var __extends=this&&this.__extends||function(){var n=function(t,e){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a))t[a]=e[a]};return n(t,e)};return function(t,e){if(typeof e!=="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function a(){this.constructor=t}t.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}();var wxmi;(function(t){var a=window["wx"];var n=function(n){__extends(t,n);function t(){var t=n.call(this)||this;var e=Laya.Browser.window.sharedCanvas;if(e){if(!e._addReference){e._addReference=function(){}}var a=new Laya.Texture(e);a.bitmap.alwaysChange=true;t.graphics.drawTexture(a,0,0,a.width,a.height)}return t}return t}(Laya.Sprite);t.DrawSprite=n;var e=function(){function t(){this.isOpen=false}t.prototype.open=function(t){if(!this.isOpen){var e=Laya.Browser.window.sharedCanvas;e.width=Laya.stage.width;e.height=Laya.stage.height;a.postMessage({type:-1,data:{width:Laya.stage.width,height:Laya.stage.height,matrix:Laya.stage._canvasTransform}});this.isOpen=true}a.postMessage({type:1,cls:t});if(!this.drawSprite){this.drawSprite=new n}Laya.stage.addChild(this.drawSprite)};t.prototype.clear=function(){this.isOpen=false;var t=Laya.Browser.window.sharedCanvas;t.width=1;t.height=1;a.postMessage({type:0});if(this.drawSprite){this.drawSprite.removeSelf()}};return t}();t.Main=e;var i=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.closeBtn=new Laya.Sprite;t.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#00ff00");t.addChild(t.closeBtn);return t}t.prototype.onClose=function(){this.closeBtn.off(Laya.Event.CLICK,this,this.onClose);this.removeSelf();s.clear()};t.prototype.setCloseBtn=function(t,e,a,n){this.hitArea=new Laya.Rectangle(0,0,Laya.stage.width,Laya.stage.height);this.closeBtn.x=t;this.closeBtn.y=e;this.closeBtn.graphics.drawRect(0,0,a,n,"#ff0000");this.closeBtn.hitArea=new Laya.Rectangle(0,0,a,n);this.closeBtn.on(Laya.Event.CLICK,this,this.onClose)};return t}(Laya.Sprite);var r=new i;var s=new e;window["tr_openSub"]=function(t,e,a,n,i){r.setCloseBtn(t,e,a,n);Laya.stage.addChild(r);s.open(i)}})(wxmi||(wxmi={}));