var w=window;var ui=w["ui"];var Laya=w["Laya"];var laya=w["laya"];var JSZip=w["JSZip"];var GameWXmini=w["GameWXmini"];var isometric=w["isometric"];var scene=w["scene"];var items=w["items"];var role=w["role"];var app=w["app"];var common=w["common"];var avatar=w["avatar"];var list=w["list"];var game=w["game"];var gm=w["gm"];var grids=w["grids"];var main=w["main"];var pet=w["pet"];var shop=w["shop"];var activitytaren=w["activitytaren"];var ai=w["ai"];var bag=w["bag"];var battle=w["battle"];var boss=w["boss"];var chat=w["chat"];var dailytask=w["dailytask"];var danfang=w["danfang"];var dianfenceshi=w["dianfenceshi"];var equip=w["equip"];var friend=w["friend"];var garden=w["garden"];var guaji=w["guaji"];var guild=w["guild"];var synthesis=w["synthesis"];var hulupick=w["hulupick"];var csv=w["csv"];var mjhole=w["mjhole"];var mount=w["mount"];var pedlar=w["pedlar"];var rank=w["rank"];var skill=w["skill"];var sixBox=w["sixBox"];var soul=w["soul"];var talk=w["talk"];var task=w["task"];var team=w["team"];var tip=w["tip"];var touzilic=w["touzilic"];var xinfa=w["xinfa"];var yuanshencode=w["yuanshencode"];var ent=w["ent"];var olddata=w["olddata"];var manager=w["manager"];var gamesdk=w["gamesdk"];var util=w["util"];var cfgCls=w["cfgCls"];var fc=w["fc"];var bc=w["bc"];var component=w["component"];var actdenglu=w["actdenglu"];var actHuntRich=w["actHuntRich"];var sevendaysign=w["sevendaysign"];var actSignIn=w["actSignIn"];var aniSoul=w["aniSoul"];var weapons=w["weapons"];var chart=w["chart"];var chengzhanjijing=w["chengzhanjijing"];var chouka=w["chouka"];var copy=w["copy"];var rebirth=w["rebirth"];var fabaonew=w["fabaonew"];var fatepool=w["fatepool"];var forum=w["forum"];var fulicode=w["fulicode"];var fumo=w["fumo"];var gaiming=w["gaiming"];var goddungeon=w["goddungeon"];var guajiexp=w["guajiexp"];var guardisland=w["guardisland"];var guide=w["guide"];var guildboss=w["guildboss"];var huodong=w["huodong"];var amulet=w["amulet"];var jihuoma=w["jihuoma"];var jinjiericode=w["jinjiericode"];var jjcnew=w["jjcnew"];var kaifuchongban=w["kaifuchongban"];var leijichongzhi=w["leijichongzhi"];var leijixiaofei=w["leijixiaofei"];var levelpackage=w["levelpackage"];var lianpenglianziCode=w["lianpenglianziCode"];var achievement=w["achievement"];var limitgiftbag=w["limitgiftbag"];var limitshop=w["limitshop"];var limittimegift=w["limittimegift"];var login=w["login"];var onlineActivity=w["onlineActivity"];var sevenday=w["sevenday"];var upgrade=w["upgrade"];var mall=w["mall"];var medal=w["medal"];var meirichongzhi=w["meirichongzhi"];var meiritehui=w["meiritehui"];var book=w["book"];var monthCard=w["monthCard"];var mountain=w["mountain"];var newshangcheng=w["newshangcheng"];var pedlarnew=w["pedlarnew"];var qiYu=w["qiYu"];var question=w["question"];var renyichongzhi=w["renyichongzhi"];var xiulian=w["xiulian"];var sevenSoul=w["sevenSoul"];var share=w["share"];var shenbing=w["shenbing"];var shouchonghaoli=w["shouchonghaoli"];var guard=w["guard"];var shoujibanding=w["shoujibanding"];var skin=w["skin"];var social=w["social"];var talent=w["talent"];var styles=w["styles"];var title=w["title"];var tongtiange=w["tongtiange"];var tower=w["tower"];var treasure=w["treasure"];var verifiedcode=w["verifiedcode"];var vipcode=w["vipcode"];var waixiantegou=w["waixiantegou"];var xianshimiaosha=w["xianshimiaosha"];var xianyaodingzhi=w["xianyaodingzhi"];var xsqg=w["xsqg"];var yaowangfight=w["yaowangfight"];var yishou=w["yishou"];var zeroshopping=w["zeroshopping"];var zhanlin=w["zhanlin"];var zhanqi=w["zhanqi"];var zhenjiuqiwa=w["zhenjiuqiwa"];var zhuanpan=w["zhuanpan"];var ByteUtil=w["ByteUtil"];var Point2D=w["Point2D"];var RoleHpView=w["RoleHpView"];var CombatInfo=w["CombatInfo"];var CommonInfo=w["CommonInfo"];var UserViewData=w["UserViewData"];var ElementPropInf=w["ElementPropInf"];var ObjViewData=w["ObjViewData"];var PropValue=w["PropValue"];var RoleView=w["RoleView"];var RoleScore=w["RoleScore"];var ItemData=w["ItemData"];var ItemCost=w["ItemCost"];var ResourceData=w["ResourceData"];var PropRand=w["PropRand"];var GemData=w["GemData"];var ItemInfoData=w["ItemInfoData"];var EquipStrenData=w["EquipStrenData"];var TaskRd=w["TaskRd"];var TaskData=w["TaskData"];var TaskRecord=w["TaskRecord"];var TaskDailyInf=w["TaskDailyInf"];var MailSimpleData=w["MailSimpleData"];var AnnexInf=w["AnnexInf"];var MailData=w["MailData"];var MailStateInf=w["MailStateInf"];var StringCell=w["StringCell"];var SysMsgParam=w["SysMsgParam"];var MallBuyData=w["MallBuyData"];var BlackMallDataItem=w["BlackMallDataItem"];var BlackMallData=w["BlackMallData"];var MallDB=w["MallDB"];var JoinGuildInf=w["JoinGuildInf"];var GuildSelfInf=w["GuildSelfInf"];var GuildMember=w["GuildMember"];var GuildInf=w["GuildInf"];var GuildListInf=w["GuildListInf"];var GuildViewInf=w["GuildViewInf"];var GuildSkillInf=w["GuildSkillInf"];var PosGuildSkill=w["PosGuildSkill"];var GuildConInf=w["GuildConInf"];var GuildTaskHelpRd=w["GuildTaskHelpRd"];var BattleUserData=w["BattleUserData"];var BattleMonsterData=w["BattleMonsterData"];var BuffData=w["BuffData"];var EffectHpData=w["EffectHpData"];var UseSkillData=w["UseSkillData"];var TrigMasterSkillData=w["TrigMasterSkillData"];var BattleRecord=w["BattleRecord"];var SkillData=w["SkillData"];var MasterSkill=w["MasterSkill"];var MasterTreeSkill=w["MasterTreeSkill"];var PetPropRand=w["PetPropRand"];var PetSpace=w["PetSpace"];var PetInfo=w["PetInfo"];var PetInfoEquip=w["PetInfoEquip"];var BossRank=w["BossRank"];var DgnDailyTime=w["DgnDailyTime"];var BossFocus=w["BossFocus"];var DgnDailyVipTime=w["DgnDailyVipTime"];var BossFreshInfo=w["BossFreshInfo"];var BossFreshInfoNew=w["BossFreshInfoNew"];var KingBossRoleSize=w["KingBossRoleSize"];var BossFreshDB=w["BossFreshDB"];var BossPersonalDB=w["BossPersonalDB"];var InspireInf=w["InspireInf"];var BossBelong=w["BossBelong"];var WorldHostility=w["WorldHostility"];var BossRobot=w["BossRobot"];var BossRobotState=w["BossRobotState"];var PackDB=w["PackDB"];var EquipFromDB=w["EquipFromDB"];var BuffDB=w["BuffDB"];var PetDB=w["PetDB"];var PetFromDB=w["PetFromDB"];var WorldBossFreshDB=w["WorldBossFreshDB"];var CrossBossDrop=w["CrossBossDrop"];var CrossBossDropShow=w["CrossBossDropShow"];var CrossUser=w["CrossUser"];var ExtDB=w["ExtDB"];var GuildAwardDB=w["GuildAwardDB"];var GuildTask=w["GuildTask"];var GuildHelpTask=w["GuildHelpTask"];var GuildPkgDB=w["GuildPkgDB"];var ActHorse=w["ActHorse"];var ActHorseCom=w["ActHorseCom"];var HorseUseSkill=w["HorseUseSkill"];var HorseDB=w["HorseDB"];var LotusData=w["LotusData"];var LotusSeedData=w["LotusSeedData"];var FriendData=w["FriendData"];var VipMallData=w["VipMallData"];var VipData=w["VipData"];var VipDataDB=w["VipDataDB"];var TeamData=w["TeamData"];var TeamMemberData=w["TeamMemberData"];var TeamInviteData=w["TeamInviteData"];var NineTowerLayer=w["NineTowerLayer"];var NineTowerInf=w["NineTowerInf"];var RoleCDInf=w["RoleCDInf"];var DailyDrawData=w["DailyDrawData"];var OpenDrawData=w["OpenDrawData"];var DailyDrawInf=w["DailyDrawInf"];var DailyDrawLuckInf=w["DailyDrawLuckInf"];var DialDrawData=w["DialDrawData"];var CheckpointData=w["CheckpointData"];var DgnGradeData=w["DgnGradeData"];var DailyActInf=w["DailyActInf"];var DailyDgnInf=w["DailyDgnInf"];var GourdInf=w["GourdInf"];var GourdDB=w["GourdDB"];var WaterRecord=w["WaterRecord"];var HomeBubbleData=w["HomeBubbleData"];var HomeQuestionData=w["HomeQuestionData"];var HomeQuestionLotteryData=w["HomeQuestionLotteryData"];var ActivityStartTimeInfo=w["ActivityStartTimeInfo"];var AloneActInfo=w["AloneActInfo"];var AloneActStatus=w["AloneActStatus"];var AloneActIcon=w["AloneActIcon"];var MonsterSoulInfo=w["MonsterSoulInfo"];var TitleData=w["TitleData"];var HeadFrameData=w["HeadFrameData"];var SkinData=w["SkinData"];var GuardData=w["GuardData"];var GuardEquipData=w["GuardEquipData"];var AwakeData=w["AwakeData"];var TransfData=w["TransfData"];var QuenchMagicData=w["QuenchMagicData"];var QuenchData=w["QuenchData"];var SoulFromDB=w["SoulFromDB"];var SoulItemData=w["SoulItemData"];var SoulData=w["SoulData"];var XinfaItemData=w["XinfaItemData"];var XinfaData=w["XinfaData"];var XinfaDbData=w["XinfaDbData"];var BoxBelong=w["BoxBelong"];var BoxRecord=w["BoxRecord"];var GardenEnvData=w["GardenEnvData"];var GardenPlantData=w["GardenPlantData"];var ActivityListInfo=w["ActivityListInfo"];var ActivityRedStatus=w["ActivityRedStatus"];var ActivityIconStatus=w["ActivityIconStatus"];var StatusItem=w["StatusItem"];var StampBuff=w["StampBuff"];var StatusItemGroup=w["StatusItemGroup"];var ActRankList=w["ActRankList"];var StatusBless=w["StatusBless"];var Limitinf=w["Limitinf"];var MedalData=w["MedalData"];var MedalHisttorData=w["MedalHisttorData"];var MedalDbData=w["MedalDbData"];var MedalMallBuyData=w["MedalMallBuyData"];var MedalGlobalData=w["MedalGlobalData"];var MedalRoleSizeRankData=w["MedalRoleSizeRankData"];var MedalMagicWeaponSizeRankData=w["MedalMagicWeaponSizeRankData"];var MedalPetRankData=w["MedalPetRankData"];var MedalOfflineTaskData=w["MedalOfflineTaskData"];var MedalGlobalDbData=w["MedalGlobalDbData"];var MonthCardData=w["MonthCardData"];var MonthCardDbData=w["MonthCardDbData"];var LifeCardDbData=w["LifeCardDbData"];var WeekCardData=w["WeekCardData"];var CardDbData=w["CardDbData"];var RechargeMallData=w["RechargeMallData"];var RechargeMallDbData=w["RechargeMallDbData"];var WarOrderRewardData=w["WarOrderRewardData"];var WarOrderShopData=w["WarOrderShopData"];var WarOrderTaskData=w["WarOrderTaskData"];var WarOrderDbData=w["WarOrderDbData"];var PedlarDbActtime=w["PedlarDbActtime"];var PedlarDbData=w["PedlarDbData"];var OffLineAwardItemData=w["OffLineAwardItemData"];var AmuleteData=w["AmuleteData"];var AmuleteDbData=w["AmuleteDbData"];var TreasureHuntLuckData=w["TreasureHuntLuckData"];var TreasureHuntUnitData=w["TreasureHuntUnitData"];var TreasureHuntData=w["TreasureHuntData"];var TreasureHuntRecordData=w["TreasureHuntRecordData"];var DBTreasureHuntData=w["DBTreasureHuntData"];var DBAllTreasureHuntData=w["DBAllTreasureHuntData"];var DBTreasureHuntRecordData=w["DBTreasureHuntRecordData"];var DBAllTreasureHuntRecordData=w["DBAllTreasureHuntRecordData"];var GuildDgnBuff=w["GuildDgnBuff"];var GuildBuffCD=w["GuildBuffCD"];var GuildDgnJoinInf=w["GuildDgnJoinInf"];var ArenaRecord=w["ArenaRecord"];var WeaponData=w["WeaponData"];var WeaponDataDB=w["WeaponDataDB"];var QuickHangUpDB=w["QuickHangUpDB"];var CtlCode=w["CtlCode"];var GmCombatInfo=w["GmCombatInfo"];var GmItemInfo=w["GmItemInfo"];var GmSyncRoleInfo=w["GmSyncRoleInfo"];var GmDngInfo=w["GmDngInfo"];var GmRankInfo=w["GmRankInfo"];var GmGuildList=w["GmGuildList"];var GmGuildMember=w["GmGuildMember"];var LuheFromDB=w["LuheFromDB"];var LuheItemData=w["LuheItemData"];var LuheData=w["LuheData"];var SvrGroup=w["SvrGroup"];var GuildChampionMember=w["GuildChampionMember"];var GuildChampionBattleInfo=w["GuildChampionBattleInfo"];var GuildChampionTeam=w["GuildChampionTeam"];var GuildChampionBattleList=w["GuildChampionBattleList"];var ServerGuildChampionBattleList=w["ServerGuildChampionBattleList"];var GuildChampionRank=w["GuildChampionRank"];var GuildChampionTeamDB=w["GuildChampionTeamDB"];var GuildChampionBattleInfoDB=w["GuildChampionBattleInfoDB"];var GuildChampionServerGuildDB=w["GuildChampionServerGuildDB"];var GuildChampionGuildPairDB=w["GuildChampionGuildPairDB"];var GuildChampionGroupDB=w["GuildChampionGroupDB"];var GuildChampionDB=w["GuildChampionDB"];var GuildChampionServerRankDB=w["GuildChampionServerRankDB"];var CrossChampionSeverInfo=w["CrossChampionSeverInfo"];var MailAnnex=w["MailAnnex"];var SkillCDData=w["SkillCDData"];var RPGetList=w["RPGetList"];var RedPacketData=w["RedPacketData"];var SaveSeventhBoxData=w["SaveSeventhBoxData"];var BtComInf=w["BtComInf"];var BtComAskResult=w["BtComAskResult"];var DailyBtComInf=w["DailyBtComInf"];var BtComShowInf=w["BtComShowInf"];var BtComRecord=w["BtComRecord"];var TitleRankDataDB=w["TitleRankDataDB"];var DilaoCombatInf=w["DilaoCombatInf"];var DgnBuff=w["DgnBuff"];var ArboretumEnv=w["ArboretumEnv"];var ArboretumSpace=w["ArboretumSpace"];var ArboretumPetSlot=w["ArboretumPetSlot"];var ArboretumMyPetSlot=w["ArboretumMyPetSlot"];var ArboretumPetAward=w["ArboretumPetAward"];var ArboretumOrder=w["ArboretumOrder"];var ArboretumOrderInfo=w["ArboretumOrderInfo"];var ArboretumDevelop=w["ArboretumDevelop"];var ArboretumGuard=w["ArboretumGuard"];var ArboretumUsingGuard=w["ArboretumUsingGuard"];var ArboretumFriend=w["ArboretumFriend"];var ArboretumInfo=w["ArboretumInfo"];var ArboretumRecord=w["ArboretumRecord"];var ArboretumEnvDB=w["ArboretumEnvDB"];var ArboretumSpaceDB=w["ArboretumSpaceDB"];var ArboretumPetSlotDB=w["ArboretumPetSlotDB"];var ArboretumInfoDB=w["ArboretumInfoDB"];var ResDataToClient=w["ResDataToClient"];var LeftData=w["LeftData"];var ResDataToDB=w["ResDataToDB"];var ResFindBack=w["ResFindBack"];var PetDispatchMap=w["PetDispatchMap"];var PetDispatchMapDB=w["PetDispatchMapDB"];var DayShopData=w["DayShopData"];var DayComData=w["DayComData"];var SDayTaskData=w["SDayTaskData"];var SDayPointDdata=w["SDayPointDdata"];var ActDrawData=w["ActDrawData"];var TanbaoInf=w["TanbaoInf"];var SimpleTeamData=w["SimpleTeamData"];var HangUpInfo=w["HangUpInfo"];var DongfuTreasure=w["DongfuTreasure"];var DongfuInfo=w["DongfuInfo"];var SecSoulInfo=w["SecSoulInfo"];var ElixirInfo=w["ElixirInfo"];var SecTimeInfo=w["SecTimeInfo"];var EventData=w["EventData"];var MakeUpData=w["MakeUpData"];var DailyRechargeItem=w["DailyRechargeItem"];var MagicData=w["MagicData"];var MagicLayUnitData=w["MagicLayUnitData"];var MagicEquipUnitData=w["MagicEquipUnitData"];var MagicResonanceInfo=w["MagicResonanceInfo"];var MagicAddInfo=w["MagicAddInfo"];var MagicPluginInfo=w["MagicPluginInfo"];var MagicInfoDB=w["MagicInfoDB"];var SecretAreaOpenData=w["SecretAreaOpenData"];var SecretAreaRecord=w["SecretAreaRecord"];var SecretAreaData=w["SecretAreaData"];var MountDataDB=w["MountDataDB"];var Arboretum2PlantInfo=w["Arboretum2PlantInfo"];var Arboretum2GuardInfo=w["Arboretum2GuardInfo"];var Arboretum2HelpRecord=w["Arboretum2HelpRecord"];var Arboretum2Info=w["Arboretum2Info"];var Arboretum2StewardInfo=w["Arboretum2StewardInfo"];var Arboretum2PlantInfoDB=w["Arboretum2PlantInfoDB"];var Arboretum2StewardInfoDB=w["Arboretum2StewardInfoDB"];var Arboretum2HelpedInfoDB=w["Arboretum2HelpedInfoDB"];var Arboretum2HelpedTimeDB=w["Arboretum2HelpedTimeDB"];var Arboretum2InfoDB=w["Arboretum2InfoDB"];var SimpleArenaBattleRecordData=w["SimpleArenaBattleRecordData"];var RefineDataDB=w["RefineDataDB"];var ElixirDataDB=w["ElixirDataDB"];var GiftData=w["GiftData"];var PedlarNewItemData=w["PedlarNewItemData"];var ActLimitedBuyData=w["ActLimitedBuyData"];var CrossRankData=w["CrossRankData"];var RankData=w["RankData"];var RankShowPlayerData=w["RankShowPlayerData"];var ArenaRankTitleDB=w["ArenaRankTitleDB"];var UserRank=w["UserRank"];var RoleShowView=w["RoleShowView"];var ShowPlayerMagicPluginInfo=w["ShowPlayerMagicPluginInfo"];var ShowPlayerData=w["ShowPlayerData"];var ChartData=w["ChartData"];var MijingUnlockData=w["MijingUnlockData"];var SimpleBubbleData=w["SimpleBubbleData"];var ForumData=w["ForumData"];var ForumRawData=w["ForumRawData"];var InvestFundData=w["InvestFundData"];var DialDrawResult=w["DialDrawResult"];var TimeGiftData=w["TimeGiftData"];var CrossXiuLianData=w["CrossXiuLianData"];var CrossXlInf=w["CrossXlInf"];var BattleHpCacheData=w["BattleHpCacheData"];var CrossXiuLianBattleRecordData=w["CrossXiuLianBattleRecordData"];var CrossXiuLianSecenesData=w["CrossXiuLianSecenesData"];var CrossXiuLianUserData=w["CrossXiuLianUserData"];var SpecialItem=w["SpecialItem"];var PeakRecord=w["PeakRecord"];var PeakParamRecord=w["PeakParamRecord"];var Peakinf=w["Peakinf"];var PeakTask=w["PeakTask"];var CltUseDataInfo=w["CltUseDataInfo"];var CustomGiftData=w["CustomGiftData"];var LingtaiRd=w["LingtaiRd"];var HomeAwardRd=w["HomeAwardRd"];var BuildData=w["BuildData"];var TongtianSData=w["TongtianSData"];var TongtianPData=w["TongtianPData"];var FateDB=w["FateDB"];var YsKillData=w["YsKillData"];var YiShouSData=w["YiShouSData"];var YiShouPData=w["YiShouPData"];var QiYuSData=w["QiYuSData"];var QiYuPData=w["QiYuPData"];var GongfaData=w["GongfaData"];var GongfaAllData=w["GongfaAllData"];var WxShareData=w["WxShareData"];var WxGmRoleData=w["WxGmRoleData"];var WxHelpData=w["WxHelpData"];var FumoData=w["FumoData"];var ShenbingData=w["ShenbingData"];var ShenbingTaskData=w["ShenbingTaskData"];var ShenbingGoingData=w["ShenbingGoingData"];var ShenbingDBData=w["ShenbingDBData"];var ActivityStartTimeAck=w["ActivityStartTimeAck"];var GetMainPanelResp=w["GetMainPanelResp"];var RecvPrizeResp=w["RecvPrizeResp"];var ActEffectResp=w["ActEffectResp"];var ActOpenNoti=w["ActOpenNoti"];var RedTipsNoti=w["RedTipsNoti"];var ShowIconNoti=w["ShowIconNoti"];var GetActMainPanelResp=w["GetActMainPanelResp"];var RecvActPrizeResp=w["RecvActPrizeResp"];var ActRedTipsNoti=w["ActRedTipsNoti"];var ActShowIconNoti=w["ActShowIconNoti"];var OnlineActTimeNoti=w["OnlineActTimeNoti"];var FirstChargeNoti=w["FirstChargeNoti"];var GetActRankListResp=w["GetActRankListResp"];var ZeroBuyResp=w["ZeroBuyResp"];var ActDrawResp=w["ActDrawResp"];var ActDrawInfoResp=w["ActDrawInfoResp"];var ActDrawCountNtf=w["ActDrawCountNtf"];var ActLimitedBuyDataNtf=w["ActLimitedBuyDataNtf"];var AmuletDataAck=w["AmuletDataAck"];var AmuletUpdateAck=w["AmuletUpdateAck"];var Arboretum2Ntf=w["Arboretum2Ntf"];var Arboretum2PlantNtf=w["Arboretum2PlantNtf"];var Arboretum2PlantAck=w["Arboretum2PlantAck"];var Arboretum2WaterAck=w["Arboretum2WaterAck"];var Arboretum2FricendListAck=w["Arboretum2FricendListAck"];var Arboretum2FriendAck=w["Arboretum2FriendAck"];var Arboretum2GuardUpLvAck=w["Arboretum2GuardUpLvAck"];var Arboretum2StewardInfoNtf=w["Arboretum2StewardInfoNtf"];var Arboretum2StewardSetNtf=w["Arboretum2StewardSetNtf"];var Arboretum2RewardAck=w["Arboretum2RewardAck"];var Arboretum2SetPetAck=w["Arboretum2SetPetAck"];var ArboretumNtf=w["ArboretumNtf"];var ArboretumAddEnvAck=w["ArboretumAddEnvAck"];var ArboretumPlantAck=w["ArboretumPlantAck"];var ArboretumOrderAck=w["ArboretumOrderAck"];var ArboretumFosterPetAck=w["ArboretumFosterPetAck"];var ArboretumFriendAck=w["ArboretumFriendAck"];var ArboretumStealAck=w["ArboretumStealAck"];var ArboretumRecordAck=w["ArboretumRecordAck"];var ArboretumGuardOperateAck=w["ArboretumGuardOperateAck"];var ArboretumDevelopAck=w["ArboretumDevelopAck"];var ArboretumUnlockPetSlotAck=w["ArboretumUnlockPetSlotAck"];var ArboretumPetAwardtAck=w["ArboretumPetAwardtAck"];var ArboretumPetAwardtNtf=w["ArboretumPetAwardtNtf"];var ChargeArenaAck=w["ChargeArenaAck"];var ChargePkAck=w["ChargePkAck"];var SimpleArenaDataNtf=w["SimpleArenaDataNtf"];var SimpleArenaRecordAck=w["SimpleArenaRecordAck"];var SimpleArenaAwardAck=w["SimpleArenaAwardAck"];var SimpleArenaMatchAck=w["SimpleArenaMatchAck"];var SimpleArenaChallengeAck=w["SimpleArenaChallengeAck"];var AwakInfoAck=w["AwakInfoAck"];var AwakGetRewardAck=w["AwakGetRewardAck"];var BattleStartNtf=w["BattleStartNtf"];var BattleMonsterNtf=w["BattleMonsterNtf"];var BattleEndNtf=w["BattleEndNtf"];var BattleAwardNtf=w["BattleAwardNtf"];var BattleRecordNtf=w["BattleRecordNtf"];var UseSkillStartNtf=w["UseSkillStartNtf"];var UseSkillEndNtf=w["UseSkillEndNtf"];var TrigMasterSkillNtf=w["TrigMasterSkillNtf"];var UseBackNtf=w["UseBackNtf"];var HpChangeNtf=w["HpChangeNtf"];var BuffChangeNtf=w["BuffChangeNtf"];var CallSummonNtf=w["CallSummonNtf"];var EndTimeSummonNtf=w["EndTimeSummonNtf"];var BattleAttributeNoti=w["BattleAttributeNoti"];var BattleSkillCD=w["BattleSkillCD"];var BattleReportStream=w["BattleReportStream"];var BossDailyNtf=w["BossDailyNtf"];var BossDailyModifyNtf=w["BossDailyModifyNtf"];var BossFocusNtf=w["BossFocusNtf"];var FightBossNtf=w["FightBossNtf"];var BossRobotNtf=w["BossRobotNtf"];var BossRobotStateNtf=w["BossRobotStateNtf"];var BossDailyVipNtf=w["BossDailyVipNtf"];var FreshBossAck=w["FreshBossAck"];var JoinBossAck=w["JoinBossAck"];var BossHurtNtf=w["BossHurtNtf"];var LeaveBossAck=w["LeaveBossAck"];var FocusBossAck=w["FocusBossAck"];var BossAliveNtf=w["BossAliveNtf"];var InspireNtf=w["InspireNtf"];var InspireAck=w["InspireAck"];var BossBelongNtf=w["BossBelongNtf"];var WorldHostilityNtf=w["WorldHostilityNtf"];var WorldBelongNtf=w["WorldBelongNtf"];var ChargeBelongAck=w["ChargeBelongAck"];var ChargeBelongNtf=w["ChargeBelongNtf"];var RelieveAck=w["RelieveAck"];var BuyBossDailyAck=w["BuyBossDailyAck"];var DailyTimeSetNtf=w["DailyTimeSetNtf"];var CrossGroupNtf=w["CrossGroupNtf"];var StateFightNtf=w["StateFightNtf"];var IceWorldNtf=w["IceWorldNtf"];var IceWorldKickNtf=w["IceWorldKickNtf"];var IceWorldBagNtf=w["IceWorldBagNtf"];var CrossBossAwardNtf=w["CrossBossAwardNtf"];var WorldBossBagAllNtf=w["WorldBossBagAllNtf"];var WorldBossBagAddNtf=w["WorldBossBagAddNtf"];var WorldBossBagAwardAck=w["WorldBossBagAwardAck"];var BossFreshInfoNewNtf=w["BossFreshInfoNewNtf"];var KingBossFreshInfoNewNtf=w["KingBossFreshInfoNewNtf"];var KingBossKillListNtf=w["KingBossKillListNtf"];var KingBossRoleSizeNtf=w["KingBossRoleSizeNtf"];var DevilBossRoleAndHurtNtf=w["DevilBossRoleAndHurtNtf"];var DevilBossHurtAwardAck=w["DevilBossHurtAwardAck"];var DevilBossDataNtf=w["DevilBossDataNtf"];var BossClientTipsNtf=w["BossClientTipsNtf"];var BtCompanionNtf=w["BtCompanionNtf"];var BtCompanionModifyNtf=w["BtCompanionModifyNtf"];var NoBtCompanionNtf=w["NoBtCompanionNtf"];var AwardBcActAck=w["AwardBcActAck"];var JoinBcMapAck=w["JoinBcMapAck"];var StartBcAck=w["StartBcAck"];var AskBcReq=w["AskBcReq"];var AskBcResultNtf=w["AskBcResultNtf"];var LeaveBcAck=w["LeaveBcAck"];var OpenBcInfAck=w["OpenBcInfAck"];var ChangeBcNameAck=w["ChangeBcNameAck"];var ChangeBcNtf=w["ChangeBcNtf"];var TransfLeaderBcAck=w["TransfLeaderBcAck"];var AttributeNoti=w["AttributeNoti"];var LevChangeNoti=w["LevChangeNoti"];var AddExpNoti=w["AddExpNoti"];var RoleDataNoti=w["RoleDataNoti"];var ResourceNoti=w["ResourceNoti"];var RoleModifyNtf=w["RoleModifyNtf"];var TransfChangeNoti=w["TransfChangeNoti"];var RealNamePrizeNoti=w["RealNamePrizeNoti"];var CreateCombatAck=w["CreateCombatAck"];var ChangeNameCDNtf=w["ChangeNameCDNtf"];var ChangeNameResp=w["ChangeNameResp"];var ChangeHuluNameAck=w["ChangeHuluNameAck"];var UserScoreResp=w["UserScoreResp"];var UseExpAck=w["UseExpAck"];var GainAwardOnlineAck=w["GainAwardOnlineAck"];var GainAwardItemNtf=w["GainAwardItemNtf"];var OffLineAwardItemNtf=w["OffLineAwardItemNtf"];var QuackHangUpInfoAck=w["QuackHangUpInfoAck"];var StatusItemNtf=w["StatusItemNtf"];var IdentityAuthDataNoti=w["IdentityAuthDataNoti"];var RecvIdentityPrizeResp=w["RecvIdentityPrizeResp"];var IdentityAuthTimeNoti=w["IdentityAuthTimeNoti"];var IdentityAuthKickNoti=w["IdentityAuthKickNoti"];var GetChargeSignResp=w["GetChargeSignResp"];var SaveSettingsAck=w["SaveSettingsAck"];var SaveSettingsNoti=w["SaveSettingsNoti"];var AskAwardNtf=w["AskAwardNtf"];var SetInFightAck=w["SetInFightAck"];var GainBanPhoneAck=w["GainBanPhoneAck"];var CombatAddExpNoti=w["CombatAddExpNoti"];var SectionBattleScoreAck=w["SectionBattleScoreAck"];var CltUseDataNtf=w["CltUseDataNtf"];var ChartDataNtf=w["ChartDataNtf"];var ChartSynthesisResp=w["ChartSynthesisResp"];var ChartMagicLayResp=w["ChartMagicLayResp"];var ChattingResponse=w["ChattingResponse"];var ChattingLangParamResponse=w["ChattingLangParamResponse"];var SysMsgNtf=w["SysMsgNtf"];var SysMsgParamNtf=w["SysMsgParamNtf"];var SysNoticeParamNtf=w["SysNoticeParamNtf"];var SysNewNoticeParamNtf=w["SysNewNoticeParamNtf"];var DialogLangParamNtf=w["DialogLangParamNtf"];var SysMsgStringNtf=w["SysMsgStringNtf"];var BossAIMsgNtf=w["BossAIMsgNtf"];var RoleArenaRecordNtf=w["RoleArenaRecordNtf"];var AddRoleArenaRecordNtf=w["AddRoleArenaRecordNtf"];var DailyActNtf=w["DailyActNtf"];var DailyActModifyNtf=w["DailyActModifyNtf"];var AwardDailyActAck=w["AwardDailyActAck"];var AwardActPointAck=w["AwardActPointAck"];var RoleCDModifyNtf=w["RoleCDModifyNtf"];var PetGemTowerNtf=w["PetGemTowerNtf"];var PetGemTowerAck=w["PetGemTowerAck"];var JoinMountGodAck=w["JoinMountGodAck"];var DailyInspireNtf=w["DailyInspireNtf"];var DailyInspireAck=w["DailyInspireAck"];var MonsterbookNtf=w["MonsterbookNtf"];var AwardMonsterbookAck=w["AwardMonsterbookAck"];var SweepMonsterbookAck=w["SweepMonsterbookAck"];var BuyDailyNumAck=w["BuyDailyNumAck"];var MissPalaceAck=w["MissPalaceAck"];var JoinMissPalaceAck=w["JoinMissPalaceAck"];var MissPalaceExpNtf=w["MissPalaceExpNtf"];var FuncOpenNtf=w["FuncOpenNtf"];var AwardFuncOpenAck=w["AwardFuncOpenAck"];var AchieveInfNtf=w["AchieveInfNtf"];var AwardAchieveAck=w["AwardAchieveAck"];var TaskTowerNtf=w["TaskTowerNtf"];var TaskTowerAck=w["TaskTowerAck"];var TowerAwardNtf=w["TowerAwardNtf"];var TowerAwardAck=w["TowerAwardAck"];var BraveChallengeNtf=w["BraveChallengeNtf"];var BraveChallengeAck=w["BraveChallengeAck"];var EliteChallengeNtf=w["EliteChallengeNtf"];var EliteChallengeAck=w["EliteChallengeAck"];var SweepEliteChallengeAck=w["SweepEliteChallengeAck"];var SignNtf=w["SignNtf"];var SignAck=w["SignAck"];var SignDaysAck=w["SignDaysAck"];var DgnSzjdSweepNtf=w["DgnSzjdSweepNtf"];var DgnSzjdAck=w["DgnSzjdAck"];var DgnSzjdStepNtf=w["DgnSzjdStepNtf"];var SweepDgnSzjdAck=w["SweepDgnSzjdAck"];var DgnNineTowerNtf=w["DgnNineTowerNtf"];var DgnNineTowerAck=w["DgnNineTowerAck"];var AwardNineTowerAck=w["AwardNineTowerAck"];var SweepNineTowerAck=w["SweepNineTowerAck"];var NineTowerBuyAck=w["NineTowerBuyAck"];var DgnSaveSeventhAck=w["DgnSaveSeventhAck"];var SaveSeventhHPNotice=w["SaveSeventhHPNotice"];var SaveSeventhAddBoxNotice=w["SaveSeventhAddBoxNotice"];var SaveSeventhGetBoxAck=w["SaveSeventhGetBoxAck"];var ResFindBackDataAck=w["ResFindBackDataAck"];var ResFindBackAck=w["ResFindBackAck"];var SevenDayDataAck=w["SevenDayDataAck"];var SevenDayRewardAck=w["SevenDayRewardAck"];var DailyDrawResp=w["DailyDrawResp"];var DailyDrawDataNtf=w["DailyDrawDataNtf"];var CheckpointDataNtf=w["CheckpointDataNtf"];var CheckpointAck=w["CheckpointAck"];var CheckpointAwardAck=w["CheckpointAwardAck"];var CaveTreasureDataNtf=w["CaveTreasureDataNtf"];var CaveTreasureBattleAck=w["CaveTreasureBattleAck"];var SecretAreaOpenNtf=w["SecretAreaOpenNtf"];var SecretAreaDataAck=w["SecretAreaDataAck"];var SecretAreaAwardResp=w["SecretAreaAwardResp"];var SecretAreaFightResp=w["SecretAreaFightResp"];var SecretAreaStartResp=w["SecretAreaStartResp"];var SSSSGradeInfoNtf=w["SSSSGradeInfoNtf"];var SSSSSweapAck=w["SSSSSweapAck"];var DialDrawResp=w["DialDrawResp"];var DialDrawDataNtf=w["DialDrawDataNtf"];var DialDrawAwardResp=w["DialDrawAwardResp"];var DailyDrawRecvResp=w["DailyDrawRecvResp"];var DilaoNtf=w["DilaoNtf"];var DilaoCombatNtf=w["DilaoCombatNtf"];var DilaoBuffNtf=w["DilaoBuffNtf"];var GainLayerAwardAck=w["GainLayerAwardAck"];var DilaoLayerAck=w["DilaoLayerAck"];var ResetLayerAck=w["ResetLayerAck"];var ChangeRoleAck=w["ChangeRoleAck"];var ChooseDilaoBuffNtf=w["ChooseDilaoBuffNtf"];var ChooseDilaoBuffAck=w["ChooseDilaoBuffAck"];var AlchemistNtf=w["AlchemistNtf"];var PrescriptionNtf=w["PrescriptionNtf"];var RefineDataNtf=w["RefineDataNtf"];var RefineStartResp=w["RefineStartResp"];var BreakRefineResp=w["BreakRefineResp"];var GetRefineAwardResp=w["GetRefineAwardResp"];var EveryRefineNtf=w["EveryRefineNtf"];var EquipStrenAck=w["EquipStrenAck"];var EquipGemAck=w["EquipGemAck"];var EquipGemLvAck=w["EquipGemLvAck"];var EquipclAck=w["EquipclAck"];var EquipJlAck=w["EquipJlAck"];var TransfEquipAck=w["TransfEquipAck"];var FmPeifangNtf=w["FmPeifangNtf"];var ModifyFmPeifangNtf=w["ModifyFmPeifangNtf"];var FateDataAck=w["FateDataAck"];var FateDrawAck=w["FateDrawAck"];var FateGiftAck=w["FateGiftAck"];var PostCommentAck=w["PostCommentAck"];var PostLikeAck=w["PostLikeAck"];var GetCommentListAck=w["GetCommentListAck"];var GetVerifyDataAck=w["GetVerifyDataAck"];var BlackListDataAck=w["BlackListDataAck"];var BlackListAddAck=w["BlackListAddAck"];var BlackListDelAck=w["BlackListDelAck"];var FriendListDataAck=w["FriendListDataAck"];var friendListAddAck=w["friendListAddAck"];var friendListAcceptAck=w["friendListAcceptAck"];var friendListDelAck=w["friendListDelAck"];var FriendApplyListAck=w["FriendApplyListAck"];var FriendStateListAck=w["FriendStateListAck"];var friendSearchAck=w["friendSearchAck"];var GardenInfoAck=w["GardenInfoAck"];var GardenUpdateAck=w["GardenUpdateAck"];var GardenEnvUpdateAck=w["GardenEnvUpdateAck"];var GardenPlantUpdateAck=w["GardenPlantUpdateAck"];var StartGatherAck=w["StartGatherAck"];var EndGatherAck=w["EndGatherAck"];var StopGatherAck=w["StopGatherAck"];var GongfaDataNtf=w["GongfaDataNtf"];var GongfaGraspResp=w["GongfaGraspResp"];var GongfaTaskResp=w["GongfaTaskResp"];var GuardNtf=w["GuardNtf"];var SpeedGuardAck=w["SpeedGuardAck"];var AwardGuardAck=w["AwardGuardAck"];var GoldSpeedGuardAck=w["GoldSpeedGuardAck"];var NewGuardNtf=w["NewGuardNtf"];var GuajiAck=w["GuajiAck"];var GuardhuluChallengeAck=w["GuardhuluChallengeAck"];var GuardInspireNtf=w["GuardInspireNtf"];var GuardInspireAck=w["GuardInspireAck"];var GuardhuluTimeAck=w["GuardhuluTimeAck"];var GuardPrivateInspireNtf=w["GuardPrivateInspireNtf"];var GuardIslandNtf=w["GuardIslandNtf"];var GuardIslandStartNtf=w["GuardIslandStartNtf"];var GuardIslandEndNtf=w["GuardIslandEndNtf"];var GuardIslandObjNtf=w["GuardIslandObjNtf"];var GuildBuffNtf=w["GuildBuffNtf"];var GuardBossAck=w["GuardBossAck"];var JoinGuardIslandAck=w["JoinGuardIslandAck"];var GuardIslandAwardNtf=w["GuardIslandAwardNtf"];var GuildCDNtf=w["GuildCDNtf"];var GuardIslandExpNtf=w["GuardIslandExpNtf"];var JoinInfIslandAck=w["JoinInfIslandAck"];var GuardInfoAck=w["GuardInfoAck"];var GuardEquipAck=w["GuardEquipAck"];var GuardOverDueNotice=w["GuardOverDueNotice"];var GuardSellAck=w["GuardSellAck"];var GuardRenewAck=w["GuardRenewAck"];var GuardFollowAck=w["GuardFollowAck"];var GuildChampionSessionAck=w["GuildChampionSessionAck"];var GuildChampionBaomingAck=w["GuildChampionBaomingAck"];var GuildChampionBattleListAck=w["GuildChampionBattleListAck"];var GuildChampionBattleRecordAck=w["GuildChampionBattleRecordAck"];var GuildChampionSetPositionAck=w["GuildChampionSetPositionAck"];var GuildChampionOpenNotice=w["GuildChampionOpenNotice"];var GuildNtf=w["GuildNtf"];var GuildReqNtf=w["GuildReqNtf"];var GuildInfListAck=w["GuildInfListAck"];var CreateGuildAck=w["CreateGuildAck"];var UpdateGuildSelfAck=w["UpdateGuildSelfAck"];var UpdateGuildInfAck=w["UpdateGuildInfAck"];var UpdateGuildChiefAck=w["UpdateGuildChiefAck"];var OpenGuildAck=w["OpenGuildAck"];var GuildMemberListAck=w["GuildMemberListAck"];var OperateGuildAck=w["OperateGuildAck"];var LeaveGuildNtf=w["LeaveGuildNtf"];var OpenJoinGuildAck=w["OpenJoinGuildAck"];var OperateJoinGuildAck=w["OperateJoinGuildAck"];var AutoJoinGuildLimitAck=w["AutoJoinGuildLimitAck"];var JoinNotify=w["JoinNotify"];var PlayerGuildChangeNtf=w["PlayerGuildChangeNtf"];var ChangeGuildNameAck=w["ChangeGuildNameAck"];var ChangeGuildNcAck=w["ChangeGuildNcAck"];var UpdateGuildNoticeAck=w["UpdateGuildNoticeAck"];var GuildInfAck=w["GuildInfAck"];var UpgraGuildAck=w["UpgraGuildAck"];var ConGuildAck=w["ConGuildAck"];var ConGuildRecordAck=w["ConGuildRecordAck"];var GuildMallRecordNtf=w["GuildMallRecordNtf"];var GuildMallRandNtf=w["GuildMallRandNtf"];var BuyGuildMallNumAck=w["BuyGuildMallNumAck"];var GuildTechNtf=w["GuildTechNtf"];var ChangeGuildTechNtf=w["ChangeGuildTechNtf"];var GuildTechAck=w["GuildTechAck"];var GuildTreasureNtf=w["GuildTreasureNtf"];var ModifyGuildTreasureNtf=w["ModifyGuildTreasureNtf"];var DelGuildTreasureNtf=w["DelGuildTreasureNtf"];var GainGuildTreasureAck=w["GainGuildTreasureAck"];var GuildTreasureDailyNtf=w["GuildTreasureDailyNtf"];var GuildTaskNtf=w["GuildTaskNtf"];var GuildTaskStarAwardAck=w["GuildTaskStarAwardAck"];var SubGuildQuestItemAck=w["SubGuildQuestItemAck"];var GuildQuestAck=w["GuildQuestAck"];var GuildQuestNumNtf=w["GuildQuestNumNtf"];var HelpGuildQuestAck=w["HelpGuildQuestAck"];var FreshGuildQuestStarAck=w["FreshGuildQuestStarAck"];var SubGuildQuestBuyAck=w["SubGuildQuestBuyAck"];var GuildTaskHelpAck=w["GuildTaskHelpAck"];var CrossBossHelpAck=w["CrossBossHelpAck"];var CrossBossHelpNtf=w["CrossBossHelpNtf"];var GuildGourdNtf=w["GuildGourdNtf"];var HangUpInfoAck=w["HangUpInfoAck"];var HangUpRewardAck=w["HangUpRewardAck"];var HeadFrameInfoAck=w["HeadFrameInfoAck"];var HeadFrameActiveNotice=w["HeadFrameActiveNotice"];var HeadFramePastDueNotice=w["HeadFramePastDueNotice"];var HeadFrameEquipAck=w["HeadFrameEquipAck"];var HeadTitleInfoAck=w["HeadTitleInfoAck"];var HeadTitleUpgradeAck=w["HeadTitleUpgradeAck"];var HomeBubbleDataAck=w["HomeBubbleDataAck"];var HomeQuestionAck=w["HomeQuestionAck"];var HomeAnswerAck=w["HomeAnswerAck"];var HomeLotteryDataAck=w["HomeLotteryDataAck"];var HomeLotteryAck=w["HomeLotteryAck"];var HomeKungDataAck=w["HomeKungDataAck"];var HomeImpartKungAck=w["HomeImpartKungAck"];var HomeInviteKungListAck=w["HomeInviteKungListAck"];var HomeAcceptKungAck=w["HomeAcceptKungAck"];var HomeStartKungAck=w["HomeStartKungAck"];var HomeFinishKungAck=w["HomeFinishKungAck"];var HomePlayerLvAck=w["HomePlayerLvAck"];var HomeWorshipInfoAck=w["HomeWorshipInfoAck"];var HomeWorshipStartAck=w["HomeWorshipStartAck"];var HomeWorshipStopAck=w["HomeWorshipStopAck"];var HomeWorshipFinishAck=w["HomeWorshipFinishAck"];var HomeRunningActivityIdAck=w["HomeRunningActivityIdAck"];var HomeDataNtf=w["HomeDataNtf"];var AwardHomeAck=w["AwardHomeAck"];var HorseListNtf=w["HorseListNtf"];var RideHorseAck=w["RideHorseAck"];var UseHorseSkillAck=w["UseHorseSkillAck"];var RideLvAck=w["RideLvAck"];var ActHorseAck=w["ActHorseAck"];var HorseLvAck=w["HorseLvAck"];var HorseComNtf=w["HorseComNtf"];var AddHorseComNtf=w["AddHorseComNtf"];var ActNewHorseComNtf=w["ActNewHorseComNtf"];var TouziNtf=w["TouziNtf"];var AwardTouziAck=w["AwardTouziAck"];var DayAwardTouziAck=w["DayAwardTouziAck"];var NewMallInfoNtf=w["NewMallInfoNtf"];var GetFreeGiftResp=w["GetFreeGiftResp"];var GetOtherGiftResp=w["GetOtherGiftResp"];var NewTouziNtf=w["NewTouziNtf"];var TimeGiftNtf=w["TimeGiftNtf"];var BuyGiftResp=w["BuyGiftResp"];var SpecialItemNtf=w["SpecialItemNtf"];var CustomGiftChoiceResp=w["CustomGiftChoiceResp"];var CustomGiftChoiceSyn=w["CustomGiftChoiceSyn"];var WxShareDataNtf=w["WxShareDataNtf"];var WxShareAwardResp=w["WxShareAwardResp"];var ItemDelNtf=w["ItemDelNtf"];var ItemModifyNtf=w["ItemModifyNtf"];var PackListNtf=w["PackListNtf"];var PackExpandNtf=w["PackExpandNtf"];var UseItemAck=w["UseItemAck"];var ItemMoveAck=w["ItemMoveAck"];var SellAck=w["SellAck"];var MixEngulfingAck=w["MixEngulfingAck"];var BagUnlockAck=w["BagUnlockAck"];var ItemGainPush=w["ItemGainPush"];var SynthesisAck=w["SynthesisAck"];var UseResItemNtf=w["UseResItemNtf"];var ShowItemAck=w["ShowItemAck"];var ShowItemInfoAck=w["ShowItemInfoAck"];var ItemQuaUpResp=w["ItemQuaUpResp"];var AwardItemScrNtf=w["AwardItemScrNtf"];var LoginResp=w["LoginResp"];var CreateRoleResp=w["CreateRoleResp"];var HeartBeatResp=w["HeartBeatResp"];var EnterGameResp=w["EnterGameResp"];var ServerTimeResp=w["ServerTimeResp"];var BanRoleResp=w["BanRoleResp"];var SysNoticeResp=w["SysNoticeResp"];var LotusDataAck=w["LotusDataAck"];var LotusCultivateAck=w["LotusCultivateAck"];var LotusSeedUseAck=w["LotusSeedUseAck"];var LuheInfoAck=w["LuheInfoAck"];var LuheMoveAck=w["LuheMoveAck"];var LuheModifyNtf=w["LuheModifyNtf"];var LuheDecomposeAck=w["LuheDecomposeAck"];var LuheUpdateAck=w["LuheUpdateAck"];var LuheSynthesisAck=w["LuheSynthesisAck"];var LuheAutoDecomposeAck=w["LuheAutoDecomposeAck"];var MagicDataAck=w["MagicDataAck"];var MagicUpLevelAck=w["MagicUpLevelAck"];var MagicUpStarAck=w["MagicUpStarAck"];var MagicWearAck=w["MagicWearAck"];var MagicLayAck=w["MagicLayAck"];var MagicLayBuyAck=w["MagicLayBuyAck"];var MagicResonanceInfoAck=w["MagicResonanceInfoAck"];var MagicResonanteAck=w["MagicResonanteAck"];var MagicAddExtNtf=w["MagicAddExtNtf"];var ModifyMagicAddExtNtf=w["ModifyMagicAddExtNtf"];var MagicAlmightyPieceAck=w["MagicAlmightyPieceAck"];var MagicPluginAck=w["MagicPluginAck"];var MagicPluginNtf=w["MagicPluginNtf"];var MagicLingtaiNtf=w["MagicLingtaiNtf"];var UpMagicLingtaiAck=w["UpMagicLingtaiAck"];var MailBoxAck=w["MailBoxAck"];var MailBoxInfAck=w["MailBoxInfAck"];var MailDeleteAck=w["MailDeleteAck"];var MailAnnexAck=w["MailAnnexAck"];var NewMailAck=w["NewMailAck"];var MallBuyRecordAck=w["MallBuyRecordAck"];var BuyMallWithNumberAck=w["BuyMallWithNumberAck"];var KfMallBuyRecordNtf=w["KfMallBuyRecordNtf"];var BuyKfMallWithNumberAck=w["BuyKfMallWithNumberAck"];var BlackMallAck=w["BlackMallAck"];var BuyBlackMallAck=w["BuyBlackMallAck"];var FreshBlackMallAck=w["FreshBlackMallAck"];var MoveResponse=w["MoveResponse"];var SetPosistionResponse=w["SetPosistionResponse"];var JoinNewMapNtf=w["JoinNewMapNtf"];var UserViewAck=w["UserViewAck"];var MapObjViewAck=w["MapObjViewAck"];var ViewportDestroyAck=w["ViewportDestroyAck"];var TeleportAck=w["TeleportAck"];var UserViewHpAck=w["UserViewHpAck"];var UserDeadRelieveNtf=w["UserDeadRelieveNtf"];var ChangeNameNoti=w["ChangeNameNoti"];var RoleStatusNtf=w["RoleStatusNtf"];var MapObjFightNtf=w["MapObjFightNtf"];var SetSkinNtf=w["SetSkinNtf"];var SkillTreeListNoti=w["SkillTreeListNoti"];var ModitySkillTreeNtf=w["ModitySkillTreeNtf"];var LearnSkillTreeAck=w["LearnSkillTreeAck"];var ClearTreeAck=w["ClearTreeAck"];var MedalInfoAck=w["MedalInfoAck"];var MedalHistoryInfoAck=w["MedalHistoryInfoAck"];var MedalGetRewardAck=w["MedalGetRewardAck"];var MedalMallRecordNtf=w["MedalMallRecordNtf"];var BuyMedalMallNumAck=w["BuyMedalMallNumAck"];var MijingUnLockNtf=w["MijingUnLockNtf"];var ModifyMijingUnLockNtf=w["ModifyMijingUnLockNtf"];var MijingUnLockAck=w["MijingUnLockAck"];var MonsterSoulInfoAck=w["MonsterSoulInfoAck"];var MonsterSoulUpdateAck=w["MonsterSoulUpdateAck"];var MonthCardInfoAck=w["MonthCardInfoAck"];var MonthCardGetRewardAck=w["MonthCardGetRewardAck"];var LifeCardInfoAck=w["LifeCardInfoAck"];var WeekCardInfoAck=w["WeekCardInfoAck"];var ReceiveWeekCardRewardAck=w["ReceiveWeekCardRewardAck"];var MountainInfoAck=w["MountainInfoAck"];var MountainChallengeAck=w["MountainChallengeAck"];var MountainSweepAck=w["MountainSweepAck"];var AwardMountainAck=w["AwardMountainAck"];var FmbkInfoNtf=w["FmbkInfoNtf"];var FmbkChallengeAck=w["FmbkChallengeAck"];var FmbkSweepAck=w["FmbkSweepAck"];var PeakNtf=w["PeakNtf"];var ModifyPeakNtf=w["ModifyPeakNtf"];var PeakTaskNtf=w["PeakTaskNtf"];var PeakTestNtf=w["PeakTestNtf"];var ChargePeakAck=w["ChargePeakAck"];var TestPeakAck=w["TestPeakAck"];var TupoTestAck=w["TupoTestAck"];var AwardTestAck=w["AwardTestAck"];var FinishPeakTaskAck=w["FinishPeakTaskAck"];var GainPeakAwardAck=w["GainPeakAwardAck"];var OpenPeakAck=w["OpenPeakAck"];var PedlarInfoAck=w["PedlarInfoAck"];var PedlarBuyAck=w["PedlarBuyAck"];var PedlarNewNtf=w["PedlarNewNtf"];var PedlarNewAwardAck=w["PedlarNewAwardAck"];var PetDispatchInfoAck=w["PetDispatchInfoAck"];var PetDispatchRewardAck=w["PetDispatchRewardAck"];var PetDispatchAck=w["PetDispatchAck"];var PetDelNtf=w["PetDelNtf"];var PetModifyNtf=w["PetModifyNtf"];var PetGainPush=w["PetGainPush"];var PetPackNtf=w["PetPackNtf"];var PetReputationNtf=w["PetReputationNtf"];var FullPetStarNtf=w["FullPetStarNtf"];var PetFormNtf=w["PetFormNtf"];var PetMoveAck=w["PetMoveAck"];var FreePetAck=w["FreePetAck"];var PetSpaceNtf=w["PetSpaceNtf"];var UnlockPetSpaceAck=w["UnlockPetSpaceAck"];var HatchPetAck=w["HatchPetAck"];var SpeedPetAck=w["SpeedPetAck"];var GainPetAck=w["GainPetAck"];var UpdatePetAck=w["UpdatePetAck"];var PetStarAck=w["PetStarAck"];var PetReputionAck=w["PetReputionAck"];var QuenchMagicAck=w["QuenchMagicAck"];var QuenchOneKeyMagicAck=w["QuenchOneKeyMagicAck"];var GetRankListResp=w["GetRankListResp"];var RankShowPlayerResp=w["RankShowPlayerResp"];var GetShowPlayerResp=w["GetShowPlayerResp"];var GetTarPlayerIpAck=w["GetTarPlayerIpAck"];var RecharegeMallInfoAck=w["RecharegeMallInfoAck"];var RecharegeTaskNotify=w["RecharegeTaskNotify"];var DailyRechargeDataNtf=w["DailyRechargeDataNtf"];var DailyRechargeAwardAck=w["DailyRechargeAwardAck"];var RechargeInfoNtf=w["RechargeInfoNtf"];var RPInfoAck=w["RPInfoAck"];var RPGetAck=w["RPGetAck"];var RPHistoryAck=w["RPHistoryAck"];var RPSendInfo=w["RPSendInfo"];var RPGetTimes=w["RPGetTimes"];var SecSoulTupoAck=w["SecSoulTupoAck"];var SecSoulDataNtf=w["SecSoulDataNtf"];var SecSoulDujieStartAck=w["SecSoulDujieStartAck"];var SecSoulDujieDamage=w["SecSoulDujieDamage"];var SecSoulDujieEnd=w["SecSoulDujieEnd"];var SecSoulShieldNtf=w["SecSoulShieldNtf"];var SecSoulStartResp=w["SecSoulStartResp"];var SecSoulEventNtf=w["SecSoulEventNtf"];var SecSoulEventResp=w["SecSoulEventResp"];var SecSoulTreasureUpResp=w["SecSoulTreasureUpResp"];var SecSoulMakeUpResp=w["SecSoulMakeUpResp"];var CrossSecSoulSecenesAck=w["CrossSecSoulSecenesAck"];var CrossSecSoulBattleRecordAck=w["CrossSecSoulBattleRecordAck"];var CrossSecSoulBattleRecordShowAck=w["CrossSecSoulBattleRecordShowAck"];var CrossSecSoulChallengeAck=w["CrossSecSoulChallengeAck"];var CrossSecSoulSetBattleArrayAck=w["CrossSecSoulSetBattleArrayAck"];var CrossSecSoulTimeNtf=w["CrossSecSoulTimeNtf"];var OpenDongfuResp=w["OpenDongfuResp"];var DongfuMagicLayResp=w["DongfuMagicLayResp"];var SevenInfoAck=w["SevenInfoAck"];var SevenUpAck=w["SevenUpAck"];var SevenSpiritLvAck=w["SevenSpiritLvAck"];var SevenEffectChooseAck=w["SevenEffectChooseAck"];var ShenbingDataNotify=w["ShenbingDataNotify"];var ShenbingOnGoingNotify=w["ShenbingOnGoingNotify"];var ShenbingOprateAck=w["ShenbingOprateAck"];var SimpleTeamDataNtf=w["SimpleTeamDataNtf"];var SimpleTeamUpdateAvatarAck=w["SimpleTeamUpdateAvatarAck"];var TeamElementPropNtf=w["TeamElementPropNtf"];var TeamElementSkillNtf=w["TeamElementSkillNtf"];var UseElementSkillAck=w["UseElementSkillAck"];var SimpleBubbleDataNtf=w["SimpleBubbleDataNtf"];var SimpleBubbleUpdateAck=w["SimpleBubbleUpdateAck"];var SkinInfoAck=w["SkinInfoAck"];var SkinEquipAck=w["SkinEquipAck"];var SkinActiveAck=w["SkinActiveAck"];var SkinReceiveAck=w["SkinReceiveAck"];var SkinUpStarAck=w["SkinUpStarAck"];var SoulInfoAck=w["SoulInfoAck"];var SoulAck=w["SoulAck"];var SoulDecomposeAck=w["SoulDecomposeAck"];var SoulUpdateeAck=w["SoulUpdateeAck"];var TanbaoNtf=w["TanbaoNtf"];var TanbaoActNtf=w["TanbaoActNtf"];var TanbaoBuffNtf=w["TanbaoBuffNtf"];var TanbaoMoveAck=w["TanbaoMoveAck"];var TanbaoResetLayerAck=w["TanbaoResetLayerAck"];var TaskInfoNtf=w["TaskInfoNtf"];var TaskRecordNtf=w["TaskRecordNtf"];var UpdateTaskRecordNtf=w["UpdateTaskRecordNtf"];var TaskSubmitAck=w["TaskSubmitAck"];var TaskGiveUpAck=w["TaskGiveUpAck"];var SubQuestItemAck=w["SubQuestItemAck"];var QuestDgnAck=w["QuestDgnAck"];var QuestKillAck=w["QuestKillAck"];var FuncItemRecordNtf=w["FuncItemRecordNtf"];var JoinEndlessAck=w["JoinEndlessAck"];var LeaveTeamDgnAck=w["LeaveTeamDgnAck"];var EndlessInfNtf=w["EndlessInfNtf"];var EndlessAwardNtf=w["EndlessAwardNtf"];var RollAwardAck=w["RollAwardAck"];var ViewRollAwardAck=w["ViewRollAwardAck"];var TeamInspireNtf=w["TeamInspireNtf"];var TeamInspireAck=w["TeamInspireAck"];var MyTeamDataAck=w["MyTeamDataAck"];var TeamListAck=w["TeamListAck"];var TeamCreateAck=w["TeamCreateAck"];var TeamSetCopyIdAck=w["TeamSetCopyIdAck"];var TeamInviteListAck=w["TeamInviteListAck"];var TeamInviteNotice=w["TeamInviteNotice"];var TeamMemberAcceptAck=w["TeamMemberAcceptAck"];var TeamApplyAck=w["TeamApplyAck"];var TeamApplyListAck=w["TeamApplyListAck"];var TeamApplyAcceptAck=w["TeamApplyAcceptAck"];var TeamEnterCopyAck=w["TeamEnterCopyAck"];var TeamEnterCopyNotice=w["TeamEnterCopyNotice"];var TeamAcceptEnterCopyAck=w["TeamAcceptEnterCopyAck"];var TeamEnterFinalNotice=w["TeamEnterFinalNotice"];var TeamExitAck=w["TeamExitAck"];var TeamChangeCaptainAck=w["TeamChangeCaptainAck"];var TeamInviteAck=w["TeamInviteAck"];var TeamDissolveAck=w["TeamDissolveAck"];var TitleInfoAck=w["TitleInfoAck"];var TitleActiveNotice=w["TitleActiveNotice"];var TitlePastDueNotice=w["TitlePastDueNotice"];var TitleEquipAck=w["TitleEquipAck"];var TongtiangeNtf=w["TongtiangeNtf"];var TongtiangeBuildResp=w["TongtiangeBuildResp"];var TongtiangeAwardResp=w["TongtiangeAwardResp"];var TongtiangeExchangeResp=w["TongtiangeExchangeResp"];var YiShouNtf=w["YiShouNtf"];var YiShouKillResp=w["YiShouKillResp"];var YiShouAwardResp=w["YiShouAwardResp"];var YiShouExchangeResp=w["YiShouExchangeResp"];var QiYuNtf=w["QiYuNtf"];var QiYuDrawResp=w["QiYuDrawResp"];var QiYuAwardResp=w["QiYuAwardResp"];var QiYuExchangeResp=w["QiYuExchangeResp"];var TransfListNtf=w["TransfListNtf"];var RoleTransfAck=w["RoleTransfAck"];var RoleFinishTransfAck=w["RoleFinishTransfAck"];var StartDujieResp=w["StartDujieResp"];var TreasureHuntDataAck=w["TreasureHuntDataAck"];var TreasureHuntRecordAck=w["TreasureHuntRecordAck"];var TreasureHuntDrawAck=w["TreasureHuntDrawAck"];var TreasureHuntReceiveLuckAck=w["TreasureHuntReceiveLuckAck"];var TreasureHuntRefreshAck=w["TreasureHuntRefreshAck"];var TreasureHuntBuyAck=w["TreasureHuntBuyAck"];var VipDataAck=w["VipDataAck"];var VipUseitemAck=w["VipUseitemAck"];var WarOrderInfoAck=w["WarOrderInfoAck"];var WarOrderGetRewardAck=w["WarOrderGetRewardAck"];var WarOrderUpGradeAck=w["WarOrderUpGradeAck"];var WarOrderShopInfoAck=w["WarOrderShopInfoAck"];var WarOrderShopBuyAck=w["WarOrderShopBuyAck"];var WarOrderGetExpBagAck=w["WarOrderGetExpBagAck"];var WarOrderRewardInfoAck=w["WarOrderRewardInfoAck"];var WarOrderTaskInfoAck=w["WarOrderTaskInfoAck"];var WarGetTaskRewardAck=w["WarGetTaskRewardAck"];var WarBuyLevelAck=w["WarBuyLevelAck"];var WarBuyExpAck=w["WarBuyExpAck"];var WeaponInfoAck=w["WeaponInfoAck"];var WeaponUpLevelAck=w["WeaponUpLevelAck"];var WeaponStrengthlvAck=w["WeaponStrengthlvAck"];var XinfaInfoAck=w["XinfaInfoAck"];var XinfaEquipAck=w["XinfaEquipAck"];var XinfaDecomposeAck=w["XinfaDecomposeAck"];var XinfaUpdateeAck=w["XinfaUpdateeAck"];var XinfaUnlockAck=w["XinfaUnlockAck"];var XinfaGongMingAttr=w["XinfaGongMingAttr"];var Int64=w["Int64"];var SocketRequestBase=w["SocketRequestBase"];var Uint64=w["Uint64"];var Csv=w["Csv"];var LayaConfig=w["LayaConfig"];var LogUtil=w["LogUtil"];var ObServer=w["ObServer"];var ObDispatcher=w["ObDispatcher"];var ScreenAdapter=w["ScreenAdapter"];var SortUtil=w["SortUtil"];var ByteCfg=w["ByteCfg"];var ByteStatus=w["ByteStatus"];var AttributeData=w["AttributeData"];var Attributes=w["Attributes"];var HpBarMediator=w["HpBarMediator"];var IHpBarCache=w["IHpBarCache"];var ZjqwHpBarMediator=w["ZjqwHpBarMediator"];var Loader=Laya.Loader;var Byte=Laya.Byte;var Dialog=Laya.Dialog;var View=Laya.View;var P=app.Protocol;var B=ByteUtil;var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var isometric;(function(s){var t=function(o){__extends(t,o);function t(t,e,i){if(i===void 0){i=0}var n=this;var r=Math.floor(t/s.WORLD_GRID_SIZE);n=o.call(this,r,r)||this;n.boxSize=t;n.isoColor=e;n.isoHeight=i;n.draw();return n}t.prototype.draw=function(){var t=this.isoColor>>16;var e=this.isoColor>>8&255;var i=this.isoColor&255;var n=t*.5<<16|e*.5<<8|i*.5;var r=t*.75<<16|e*.75<<8|i*.75;var o=this.isoHeight*s.Y_CORRECT;this.graphics.clear();this.graphics.setAlpha(1);var a="#"+this.isoColor.toString(16);this.graphics.drawPoly(0,0,[-this.boxSize,-o,0,-this.boxSize*.5-o,this.boxSize,-o,0,this.boxSize*.5-o,-this.boxSize,-o],a,1,1);a="#"+n.toString(16);this.graphics.drawPoly(0,0,[-this.boxSize,-o,0,this.boxSize*.5-o,0,this.boxSize*.5,-this.boxSize,0,-this.boxSize,-o],a,1,1);a="#"+r.toString(16);this.graphics.drawPoly(0,0,[this.boxSize,-o,0,this.boxSize*.5-o,0,this.boxSize*.5,this.boxSize,0,this.boxSize,-o],a,1,1)};return t}(s.IsoSprite);s.IsoBox=t})(isometric||(isometric={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var isometric;(function(u){var t=function(l){__extends(t,l);function t(t,e,i,n){if(i===void 0){i=32}if(n===void 0){n="#ff000078"}var r=l.call(this)||this;for(var o=0;o<t;o++){for(var a=0;a<e;a++){var s=new u.IsoTile(i,n);s.isoPos=new u.Point3D(o*i,0,a*i);r.addChild(s)}}return r}return t}(Laya.Sprite);u.IsoGrid=t})(isometric||(isometric={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var isometric;(function(t){var e=function(r){__extends(t,r);function t(t,e,i){if(i===void 0){i=0}var n=r.call(this,t)||this;n.isoColor=e;n.isoHeight=i;n.lbl=new Laya.Label;n.addChild(n.lbl);n.draw();return n}t.prototype.setLabel=function(t,e,i,n){if(i===void 0){i=""}if(n===void 0){n=1}this.lbl.text="("+i+")";this.lbl.scale(n,n)};t.prototype.draw=function(){this.graphics.clear();this.graphics.setAlpha(1);this.graphics.drawPoly(0,0,[-this.isoSize,0,0,-this.isoSize*.5,this.isoSize,0,0,this.isoSize*.5,-this.isoSize,0],this.isoColor,"#cccccc",1)};return t}(t.IsoSprite);t.IsoTile=e})(isometric||(isometric={}));var isometric;(function(t){var e=function(){function t(){}t.SM_MAP_TYPE=0;t.FLOOR_TYPE=1;t.OBJECTS_TYPE=2;t.AVATAR_TYPE=3;t.EX_PART_TYPE=4;t.SKILL_TYPE=5;t.BATTLEHURT_TYPE=6;t.STAGE_SKILL_TYPE=7;t.STAGE_HURT_TYPE=8;t.HIT_TYPE=9;return t}();t.IsoType=e})(isometric||(isometric={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var isometric;(function(o){var t=function(r){__extends(t,r);function t(){var t=r.call(this)||this;t.sortList=[];t.avatarList=[];t.gridSize=o.WORLD_GRID_SIZE;t.isoGridLayer=new Laya.Sprite;t.floorLayer=new Laya.Sprite;t.objectLayer=new Laya.Sprite;t.avatarLayer=new Laya.Sprite;t.shadowLayer=new Laya.Sprite;t.avatarLayer.addChild(t.shadowLayer);t.characterLayer=new Laya.Sprite;t.avatarLayer.addChild(t.characterLayer);t.hpLayer=new Laya.Sprite;t.avatarLayer.addChild(t.hpLayer);t.nameLayer=new Laya.Sprite;t.avatarLayer.addChild(t.nameLayer);t.headLayer=new Laya.Sprite;t.avatarLayer.addChild(t.headLayer);t.flyLayer=new Laya.Sprite;t.avatarLayer.addChild(t.flyLayer);t.shadowLayer.name="影子";t.characterLayer.name="角色";t.hpLayer.name="血条";t.nameLayer.name="名字";t.headLayer.name="称号";t.flyLayer.name="飞行";t.skillLayer1=new Laya.Sprite;t.skillLayer2=new Laya.Sprite;t.battleHurtLayer=new Laya.Sprite;t.characterLayer2=new Laya.Sprite;t.stageSkillLayer=new Laya.Sprite;t.stageHurtLayer=new Laya.Sprite;t.talkLayer=new Laya.Sprite;t.hitLayer=new Laya.Sprite;t.layers=[t.isoGridLayer,t.floorLayer,t.objectLayer,t.skillLayer1,t.avatarLayer,t.skillLayer2,t.battleHurtLayer,t.characterLayer2,t.stageSkillLayer,t.stageHurtLayer,t.talkLayer,t.hitLayer];for(var e=0,i=t.layers.length;e<i;e++){var n=t.layers[e];n.pivot(Laya.stage.width/2,Laya.stage.height/2);n.x=Laya.stage.width/2;n.y=Laya.stage.height/2;t.addChild(n)}t.avatarLayer.mouseEnabled=true;t.mouseEnabled=true;Laya.stage.on(Laya.Event.RESIZE,t,t.onStageResize);t.on(Laya.Event.DISPLAY,t,t.onDisplay);t.on(Laya.Event.UNDISPLAY,t,t.onUnDisplay);t.onStageResize();return t}t.prototype.onDisplay=function(){Laya.timer.frameLoop(1,this,this.depthSort)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.depthSort)};t.prototype.depthSort=function(){this.sortList.sort(function(t,e){if(t.depth===e.depth){return 0}if(t.depth>e.depth){return 1}else{return-1}});for(var t=0;t<this.sortList.length;t++){if(this.sortList[t]!=null&&this.sortList[t].parent==this.objectLayer&&t<this.objectLayer.numChildren){this.objectLayer.setChildIndex(this.sortList[t],t)}}this.avatarList.sort(function(t,e){if(t.depth===e.depth){return t.getOrderId()-e.getOrderId()}if(t.depth>e.depth){return 1}else{return-1}});for(var e=0;e<this.avatarList.length;e++){if(this.avatarList[e]!=null&&this.avatarList[e].parent==this.characterLayer&&e<this.characterLayer.numChildren){this.characterLayer.setChildIndex(this.avatarList[e],e)}}};t.prototype.scaleWorld=function(t){this.isoGridLayer.scaleX=this.isoGridLayer.scaleY=this.floorLayer.scaleX=this.floorLayer.scaleY=this.objectLayer.scaleX=this.objectLayer.scaleY=this.avatarLayer.scaleX=this.avatarLayer.scaleY=this.skillLayer1.scaleX=this.skillLayer1.scaleY=this.skillLayer2.scaleX=this.skillLayer2.scaleY=this.battleHurtLayer.scaleX=this.battleHurtLayer.scaleY=this.characterLayer2.scaleX=this.characterLayer2.scaleY=this.stageSkillLayer.scaleX=this.stageSkillLayer.scaleY=this.stageHurtLayer.scaleX=this.stageHurtLayer.scaleY=this.talkLayer.scaleX=this.talkLayer.scaleY=this.hitLayer.scaleX=this.hitLayer.scaleY=t};t.prototype.setWorldXy=function(t,e){this.isoGridLayer.x=this.floorLayer.x=this.objectLayer.x=this.skillLayer1.x=this.avatarLayer.x=this.skillLayer2.x=this.battleHurtLayer.x=this.talkLayer.x=this.hitLayer.x=Laya.stage.width/2+t;this.isoGridLayer.y=this.floorLayer.y=this.objectLayer.y=this.skillLayer1.y=this.avatarLayer.y=this.skillLayer2.y=this.battleHurtLayer.y=this.talkLayer.y=this.hitLayer.y=Laya.stage.height/2+e};t.prototype.onStageResize=function(){this.avatarLayer.width=Laya.stage.width;this.avatarLayer.height=Laya.stage.height;this.width=Laya.stage.width;this.height=Laya.stage.height};t.prototype.addIsoChild=function(t){switch(t.isoType){case o.IsoType.SM_MAP_TYPE:this.addChildAt(t,0);break;case o.IsoType.FLOOR_TYPE:this.floorLayer.addChild(t);break;case o.IsoType.OBJECTS_TYPE:this.objectLayer.addChild(t);if(this.sortList.indexOf(t)==-1){this.sortList.push(t)}break;case o.IsoType.AVATAR_TYPE:this.characterLayer.addChild(t);if(this.avatarList.indexOf(t)==-1){this.avatarList.push(t)}break;case o.IsoType.EX_PART_TYPE:this.objectLayer.addChild(t);if(this.sortList.indexOf(t)==-1){this.sortList.push(t)}break;case o.IsoType.SKILL_TYPE:this.skillLayer2.addChild(t);break;case o.IsoType.STAGE_SKILL_TYPE:this.stageSkillLayer.addChild(t);break;case o.IsoType.HIT_TYPE:this.hitLayer.addChild(t);break;default:break}};t.prototype.removeIsoChild=function(t){switch(t.isoType){case o.IsoType.SM_MAP_TYPE:t.removeSelf();break;case o.IsoType.FLOOR_TYPE:if(t!=null&&t.parent){if(t.parent==this.floorLayer){this.floorLayer.removeChild(t)}}break;case o.IsoType.OBJECTS_TYPE:case o.IsoType.EX_PART_TYPE:if(t!=null&&t.parent){if(t.parent==this.objectLayer){this.objectLayer.removeChild(t);var e=this.sortList.indexOf(t);if(e!=-1){this.sortList.splice(e,1)}}}break;case o.IsoType.AVATAR_TYPE:if(t!=null&&t.parent){if(t.parent==this.characterLayer){this.characterLayer.removeChild(t);var i=this.avatarList.indexOf(t);if(i!=-1){this.avatarList.splice(i,1)}}}break;case o.IsoType.SKILL_TYPE:if(t!=null&&t.parent){if(t.parent==this.skillLayer2){this.skillLayer2.removeChild(t)}}break;case o.IsoType.STAGE_SKILL_TYPE:if(t!=null&&t.parent){if(t.parent==this.stageSkillLayer){this.stageSkillLayer.removeChild(t)}}break;case o.IsoType.HIT_TYPE:if(t!=null&&t.parent){if(t.parent==this.hitLayer){this.hitLayer.removeChild(t)}}break;default:break}};t.prototype.clearAll=function(){Laya.stage.off(Laya.Event.RESIZE,this,this.onStageResize);this.removeSelf();this.offAll();if(this.layers){for(var t=0,e=this.layers.length;t<e;t++){var i=this.layers[t];while(i.numChildren>0){i.removeChildAt(0)}i.removeSelf()}}this.sortList=null;this.avatarList=null;this.layers=null};t.prototype.showLayers=function(){if(!this.layers){return}for(var t=0,e=this.layers.length;t<e;t++){var i=this.layers[t];i.visible=true}};t.prototype.hideLayers=function(){if(!this.layers){return}for(var t=0,e=this.layers.length;t<e;t++){var i=this.layers[t];i.visible=false}};return t}(Laya.Sprite);o.IsoWorld=t})(isometric||(isometric={}));var isometric;(function(t){var e=function(){function t(t,e){this.node=t;this.cost=e}return t}();t.ALink=e})(isometric||(isometric={}));var isometric;(function(t){var e=function(){function t(t,e){this.version=1;this.walkAtt=1;this.changed=true;this.x=t;this.y=e}return t}();t.ANode=e})(isometric||(isometric={}));var isometric;(function(t){var e=function(){function t(t,e){this.version=1;this.walkAtt=0;this.col=t;this.row=e;this.x=t;this.z=e-(t-(t&1))/2;this.y=-this.x-this.z}t.cubToOffsetCol=function(t){return t};t.cubToOffsetRow=function(t,e){return e+(t-(t&1))/2};return t}();t.ANode2=e})(isometric||(isometric={}));var isometric;(function(e){var c=Laya.Point;var t=function(){function i(t,e){if(t===void 0){t=i.DIRECTION_8}if(e===void 0){e=i.MANHATTAN}this.path=[];this.straightCost=1;this.diagCost=Math.SQRT2;this.wallConst=9999999;this.nowVersion=1;this.wayCost=.2;this.direction=t;if(e==i.DIAGONAL){this.heuristic=this.diagonal}else if(e==i.EUCLIDIAN){this.heuristic=this.euclidian2}else{this.heuristic=this.manhattan}}i.prototype.justMin=function(t,e){return t.f<e.f};i.prototype.findPath=function(t){this.endNode=t.gridEndNode;this.nowVersion++;this.startNode=t.gridStartNode;this.grid=t;if(this.startNode==null||this.endNode==null)return false;this.open=new e.BinaryHeap(this.justMin);this.startNode.g=0;return this.search()};Object.defineProperty(i.prototype,"pathArr",{get:function(){return this.path},enumerable:true,configurable:true});i.prototype.search=function(){var t=this.startNode;t.version=this.nowVersion;var e=this.grid.gridNumCols;var i=this.grid.gridNumRows;var n;var r;var o;var a;while(t!=this.endNode){n=Math.max(0,t.x-1);r=Math.min(e-1,t.x+1);o=Math.max(0,t.y-1);a=Math.min(i-1,t.y+1);for(var s=n;s<=r;s++){for(var l=o;l<=a;l++){var u=this.grid.getNode(s,l);var p=this.calculateCost(t,u);if(p>=this.wallConst)continue;var h=t.g+p;var c=this.heuristic(u);var f=h+c;if(u.version==this.nowVersion){if(u.f>f){u.f=f;u.g=h;u.h=c;u.parent=t}}else{u.f=f;u.g=h;u.h=c;u.parent=t;this.open.ins(u);u.version=this.nowVersion}}}if(this.open.a.length==1){return false}t=this.open.pop()}this.buildPath();return true};i.prototype.buildPath=function(){this.path=[];var t=this.endNode;this.path.push({x:t.x+this.grid.startX,y:t.y+this.grid.startY});while(t!=this.startNode){t=t.parent;this.path.unshift({x:t.x+this.grid.startX,y:t.y+this.grid.startY})}};i.prototype.calculateCost=function(t,e){if(e==t||e.walkAtt==0){return this.wallConst}if(e.x!=t.x&&e.y!=t.y){var i=this.grid.getNode(t.x,e.y);if(i.walkAtt==0){return this.wallConst}i=this.grid.getNode(e.x,t.y);if(i.walkAtt==0){return this.wallConst}}var n=this.straightCost;if(!(t.x==e.x||t.y==e.y)){if(this.direction==4){return this.wallConst}n=this.diagCost}var r=Math.atan2(e.y-t.y,e.x-e.x);if(t.testDir!=undefined&&t.testDir!=r){n+=this.wayCost}e.testDir=r;return n};i.prototype.manhattan=function(t){return Math.abs(t.x-this.endNode.x)+Math.abs(t.y-this.endNode.y)};i.prototype.manhattan2=function(t){var e=Math.abs(t.x-this.endNode.x);var i=Math.abs(t.y-this.endNode.y);return e+i+Math.abs(e-i)/1e3};i.prototype.euclidian=function(t){var e=t.x-this.endNode.x;var i=t.y-this.endNode.y;return Math.sqrt(e*e+i*i)};i.prototype.euclidian2=function(t){var e=t.x-this.endNode.x;var i=t.y-this.endNode.y;return e*e+i*i};i.prototype.diagonal=function(t){var e=Math.abs(t.x-this.endNode.x);var i=Math.abs(t.y-this.endNode.y);var n=Math.min(e,i);var r=e+i;return this.diagCost*n+this.straightCost*(r-2*n)};i.prototype.bresenhamNodes=function(t,e){var i=Math.abs(e.y-t.y)>Math.abs(e.x-t.x);if(i){var n=t.x;t.x=t.y;t.y=n;n=e.x;e.x=e.y;e.y=n}var r=e.x>t.x?1:e.x<t.x?-1:0;var o=e.y>t.y?1:e.y<t.y?-1:0;var a=(e.y-t.y)/Math.abs(e.x-t.x);var s=[];var l=t.x+r;var u=t.y+a;if(i){s.push(new c(t.y,t.x))}else{s.push(new c(t.x,t.y))}while(l!=e.x){var p=Math.floor(u);var h=Math.ceil(u);if(i){s.push(new c(p,l))}else{s.push(new c(l,p))}if(p!=h){if(i){s.push(new c(h,l))}else{s.push(new c(l,h))}}l+=r;u+=a}if(i){s.push(new c(e.y,e.x))}else{s.push(new c(e.x,e.y))}return s};i.DIRECTION_8=8;i.DIRECTION_4=4;i.MANHATTAN="manhattan";i.EUCLIDIAN="euclidian";i.DIAGONAL="diagonal";return i}();e.AStar=t})(isometric||(isometric={}));var isometric;(function(d){var t=function(){function g(){this.path=[];this.wallConst=9999999;this.nowVersion=1}g.prototype.justMin=function(t,e){return t.f<e.f};g.prototype.findPath=function(t){this.endNode=t.gridEndNode;this.nowVersion++;this.startNode=t.gridStartNode;this.grid=t;if(this.startNode==null||this.endNode==null)return false;this.open=new d.BinaryHeap(this.justMin);this.startNode.g=0;return this.search()};Object.defineProperty(g.prototype,"pathArr",{get:function(){return this.path},enumerable:true,configurable:true});g.prototype.search=function(){var t=this.startNode;t.version=this.nowVersion;var e=this.grid.gridNumCols;var i=this.grid.gridNumRows;while(t!=this.endNode){for(var n=0;n<6;n++){var r=g.round[n];var o=t.x+r[0];var a=t.z+r[1];var s=d.ANode2.cubToOffsetCol(o);var l=d.ANode2.cubToOffsetRow(o,a);if(s<0||s>e||l<0||l>i){continue}var u=this.grid.getNode(s,l);var p=this.calculateCost(t,u);if(p>=this.wallConst)continue;var h=t.g+p;var c=this.heuristic(u);var f=h+c;if(u.version==this.nowVersion){if(u.f>f){u.f=f;u.g=h;u.h=c;u.parent=t}}else{u.f=f;u.g=h;u.h=c;u.parent=t;this.open.ins(u);u.version=this.nowVersion}}if(this.open.a.length==1){return false}t=this.open.pop()}this.buildPath();return true};g.prototype.buildPath=function(){this.path=[];var t=this.endNode;this.path.push({col:t.col+this.grid.startX,row:t.row+this.grid.startY});while(t!=this.startNode){t=t.parent;this.path.unshift({col:t.col+this.grid.startX,row:t.row+this.grid.startY})}};g.prototype.calculateCost=function(t,e){if(e==t||e.walkAtt==0){return this.wallConst}return 1};g.prototype.heuristic=function(t){return(Math.abs(t.x-this.endNode.x)+Math.abs(t.y-this.endNode.y)+Math.abs(t.z-this.endNode.z))/2};g.round=[[1,0],[0,1],[-1,1],[-1,0],[0,-1],[1,-1]];return g}();d.AStar2=t})(isometric||(isometric={}));var isometric;(function(t){var e=function(){function t(t){this.a=[];this.justMinFun=function(t,e){return t<e};this.a.push(-1);if(t!=null){this.justMinFun=t}}t.prototype.ins=function(t){var e=this.a.length;this.a[e]=t;var i=e>>1;while(e>1&&this.justMinFun(this.a[e],this.a[i])){var n=this.a[e];this.a[e]=this.a[i];this.a[i]=n;e=i;i=e>>1}};t.prototype.pop=function(){var t=this.a[1];this.a[1]=this.a[this.a.length-1];this.a.pop();var e=1;var i=this.a.length;var n=e<<1;var r=n+1;var o;while(n<i){if(r<i){o=this.justMinFun(this.a[r],this.a[n])?r:n}else{o=n}if(this.justMinFun(this.a[o],this.a[e])){var a=this.a[e];this.a[e]=this.a[o];this.a[o]=a;e=o;n=e<<1;r=n+1}else{break}}return t};return t}();t.BinaryHeap=e})(isometric||(isometric={}));var isometric;(function(s){var t=function(){function t(t,e,i,n,r){if(i===void 0){i=0}if(n===void 0){n=0}this.nodes=[];this.numCols=0;this.numRows=0;this.sX=0;this.sY=0;this.numCols=t;this.numRows=e;this.sX=i;this.sY=n;for(var o=0;o<this.numCols;o++){this.nodes[o]=[];for(var a=0;a<this.numRows;a++){this.nodes[o][a]=new s.ANode(o,a);if(r){this.nodes[o][a].walkAtt=r.isWalk(o,a)?1:0;if(ent.DebugConfig.isDebugger&&game.Context.custMapID!=undefined){this.nodes[o][a].walkAtt=1}}}}}Object.defineProperty(t.prototype,"startX",{get:function(){return this.sX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"startY",{get:function(){return this.sY},enumerable:true,configurable:true});t.prototype.getNode=function(t,e){if(this.nodes[t]&&this.nodes[t][e]){return this.nodes[t][e]}return null};t.prototype.setEndNode=function(t,e){if(this.nodes[t-this.sX]!=null&&this.nodes[t-this.sX][e-this.sY]!=null){this.endNode=this.nodes[t-this.sX][e-this.sY]}};t.prototype.setStartNode=function(t,e){if(this.nodes[t-this.sX]!=null&&this.nodes[t-this.sX][e-this.sY]!=null){this.startNode=this.nodes[t-this.sX][e-this.sY]}};t.prototype.setWalkAtt=function(t,e,i){this.nodes[t][e].walkAtt=i;this.nodes[t][e].changed=true};t.prototype.getWalkAtt=function(t,e){return this.nodes[t][e].walkAtt};Object.defineProperty(t.prototype,"gridEndNode",{get:function(){return this.endNode},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridStartNode",{get:function(){return this.startNode},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridNumCols",{get:function(){return this.numCols},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridNumRows",{get:function(){return this.numRows},enumerable:true,configurable:true});return t}();s.MapGrid=t})(isometric||(isometric={}));var isometric;(function(s){var t=function(){function t(t,e,i,n,r){if(i===void 0){i=0}if(n===void 0){n=0}this.nodes=[];this.numCols=0;this.numRows=0;this.sX=0;this.sY=0;this.numCols=t;this.numRows=e;this.sX=i;this.sY=n;for(var o=0;o<=this.numCols;o++){this.nodes[o]=[];for(var a=0;a<=this.numRows;a++){this.nodes[o][a]=new s.ANode2(o,a);if(r[o]&&r[o][a]){this.nodes[o][a].walkAtt=1}}}}Object.defineProperty(t.prototype,"startX",{get:function(){return this.sX},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"startY",{get:function(){return this.sY},enumerable:true,configurable:true});t.prototype.getNode=function(t,e){if(this.nodes[t]&&this.nodes[t][e]){return this.nodes[t][e]}return null};t.prototype.setEndNode=function(t,e){if(this.nodes[t-this.sX]!=null&&this.nodes[t-this.sX][e-this.sY]!=null){this.endNode=this.nodes[t-this.sX][e-this.sY]}};t.prototype.setStartNode=function(t,e){if(this.nodes[t-this.sX]!=null&&this.nodes[t-this.sX][e-this.sY]!=null){this.startNode=this.nodes[t-this.sX][e-this.sY]}};t.prototype.setWalkAtt=function(t,e,i){this.nodes[t][e].walkAtt=i};t.prototype.getWalkAtt=function(t,e){return this.nodes[t][e].walkAtt};Object.defineProperty(t.prototype,"gridEndNode",{get:function(){return this.endNode},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridStartNode",{get:function(){return this.startNode},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridNumCols",{get:function(){return this.numCols},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridNumRows",{get:function(){return this.numRows},enumerable:true,configurable:true});return t}();s.MapGrid2=t})(isometric||(isometric={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var manager;(function(t){var e=function(){function u(){this._oldSocre=0;this._boAttrDelay=false;this._flowContainer=new Laya.Sprite;this._flowContainer.mouseEnabled=false;app.AppContainer.zhezhaoLayer.addChild(this._flowContainer);game.RoleModel.getIns().on(game.RoleModel.EVENTS.SCORE_UPDATE,this,this.delayUpdataScore);game.RoleModel.getIns().on(game.RoleModel.EVENTS.PROP_CHANGE,this,this.delayUpdataAttri);this.scoreHandler=new Laya.Handler(this,this.onScoreCheck)}u.prototype.delayUpdataAttri=function(){if(Laya.timer.currTimer-game.RoleModel.getIns().scoreCd<2e3){return}Laya.timer.once(500,this,this.onAttriChange)};u.prototype.delayUpdataScore=function(){if(Laya.timer.currTimer-game.RoleModel.getIns().scoreCd<2e3){this._oldSocre=game.Context.score;return}Laya.timer.once(500,this,this.onScoreChange)};Object.defineProperty(u,"instance",{get:function(){return app.Singleton.getInstance(u)},enumerable:true,configurable:true});u.prototype.onScoreChange=function(){if(chouka.ChouKaModel.getIns().isStartReqesutDaily){return}if(app.ViewManager.DisplayedInStage(main.ScoreFlowView.SINGLE_KEY)){return}this.onScoreCheck()};u.prototype.onScoreCheck=function(){if(game.Context.score>this._oldSocre){app.ViewManager.toggleView(main.ScoreFlowView,app.AppContainer.flowLayer,1,[game.Context.score-this._oldSocre,this.scoreHandler])}this._oldSocre=game.Context.score};u.prototype.onAttriChange=function(){if(chouka.ChouKaModel.getIns().isStartReqesutDaily){return}if(!this._boAttrDelay){this._boAttrDelay=true;this.onAttriCheck()}};u.prototype.onAttriCheck=function(){var t=[];var e=game.Context.getTotalAttri();if(this._oldProps){for(var i=0,n=u.PROP_ARR.length;i<n;i++){var r=u.PROP_ARR[i];if(r==2){var o=e[78]-this._oldProps[78];var a=e[3]-this._oldProps[3]+o;var s=e[2]-this._oldProps[2]+o;if(a<0){a=0}if(s<0){s=0}if(a==0&&s==0){continue}t.push([u.ATTRIBUTE_URL[2],a+"~"+s])}else{var l=e[r]-this._oldProps[r];if(l>0){t.push([u.ATTRIBUTE_URL[r],l+""])}}}if(t.length){this.fly(t)}else{this._boAttrDelay=false}}else{this._boAttrDelay=false}this._oldProps=e};u.prototype.fly=function(t){this._endCount=0;this._recordCount=t.length;for(var e=0;e<this._recordCount;e++){var i=Laya.Pool.getItemByClass("AttributeFlowItem",n);i.dataSource=t[e];this._flowContainer.addChild(i);i.x=0;i.y=Laya.stage.height;app.MyTween.to(i,{y:Laya.stage.height-u.BOTTOM-u.GAP*(this._recordCount-e)},200,Laya.Ease.quartOut,Laya.Handler.create(this,this.completeHandle,[i]),e*100)}};u.prototype.completeHandle=function(t){Laya.timer.once(1e3,this,this.playAni,[t],false)};u.prototype.playAni=function(t){t.ani1.on(Laya.Event.COMPLETE,this,this.aniEnd,[t]);t.ani1.play(0,false)};u.prototype.aniEnd=function(t){t.ani1.off(Laya.Event.COMPLETE,this,this.aniEnd);t.box.skewX=0;t.box.x=0;t.removeSelf();Laya.Pool.recover("AttributeFlowItem",t);this._endCount++;if(this._endCount==this._recordCount){this._boAttrDelay=false;this.onAttriCheck()}};u.SINGLE_KEY="manager.AttributeFlowManager";u.ATTRIBUTE_URL={2:"public/bg_shuxingpiaozi_gongji.png",4:"public/bg_shuxingpiaozi_fangyu.png",1:"public/bg_shuxingpiaozi_shengming.png",5:"public/bg_shuxingpiaozi_gongsu.png",122:"public/bg_shuxingpiaozi_jin.png",123:"public/bg_shuxingpiaozi_mu.png",124:"public/bg_shuxingpiaozi_shui.png",125:"public/bg_shuxingpiaozi_huo.png",126:"public/bg_shuxingpiaozi_tu.png"};u.PROP_ARR=[2,1,4,5,122,123,124,125,126];u.GAP=40;u.BOTTOM=380;u.delaytime=100;return u}();t.AttributeFlowManager=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.imgshuxing.skin=this.dataSource[0];this.clipshuxingnum.x=this.imgshuxing.x+this.imgshuxing.width;this.clipshuxingnum.value=this.dataSource[1]};e.SINGLE_KEY="battle.BattleEnemyItem";return e}(ui.main.shuxingtishengUI);t.AttributeFlowItem=n})(manager||(manager={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var manager;(function(t){var e=function(){function t(){this.urls=[];this._flowContainer=new Laya.Sprite;this._flowContainer.mouseEnabled=false;app.AppContainer.flowLayer.addChild(this._flowContainer);this.boShow=false}Object.defineProperty(t,"ins",{get:function(){return app.Singleton.getInstance(t)},enumerable:true,configurable:true});t.prototype.start=function(){this.boShow=true;Laya.timer.loop(500,this,this.fly)};t.prototype.stop=function(){this.boShow=false;this.urls=[];Laya.timer.clear(this,this.fly)};t.prototype.fly=function(){this.flyFabao()};t.prototype.addList=function(t){this.urls.push(t)};t.prototype.flyFabao=function(){if(this.urls.length<=0){return}var t=Laya.Pool.getItemByClass(i.SINGLE_KEY,i);t.img.skin="res/static/skill/"+this.urls.shift()+".png";this._flowContainer.addChild(t);t.x=0;t.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-240;var e=t.y-150;app.MyTween.to(t,{y:e,alpha:0},800,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFabaoComplete,[t]),500)};t.prototype.onFabaoComplete=function(t){t.alpha=1;t.removeSelf();Laya.Pool.recover(i.SINGLE_KEY,t)};t.prototype.flyMount=function(t){var e=this;if(!this.boShow){return}var i=csv.HorseattrProxy.getIns().getSkillOwner(t.skillid);if(!i){return}this.boShow=false;var n=Laya.Pool.getItemByClass(o.SINGLE_KEY,o);this._flowContainer.addChild(n);n.setAvatar(i);n.x=-200;n.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-190;var r=n.y+50;n.alpha=.5;n.scale(1,1);app.MyTween.to(n,{alpha:1,x:200,y:r},200,Laya.Ease.linearNone,Laya.Handler.create(this,function(){n.setImg(t.skillshow);app.MyTween.to(n,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(e,function(){app.MyTween.to(n,{alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(e,e.onMountComplete,[n]),1e3)}))}))};t.prototype.onMountComplete=function(t){this.boShow=true;t.removeSelf();Laya.Pool.recover(o.SINGLE_KEY,t)};t.prototype.flyWuxingSkill=function(t){var e=this;var i=Laya.Pool.getItemByClass(n.SINGLE_KEY,n);i.img.skin="res/static/skill/"+t+".png";this._flowContainer.addChild(i);i.scale(0,0);i.alpha=1;i.x=Laya.stage.width/2;i.y=Laya.stage.height/2;app.MyTween.to(i,{scaleX:3,scaleY:3},500,Laya.Ease.linearNone,Laya.Handler.create(this,function(){app.MyTween.to(i,{alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(e,e.onWuxingSkillComplete,[i]),500)}))};t.prototype.onWuxingSkillComplete=function(t){t.removeSelf();Laya.Pool.recover(n.SINGLE_KEY,t)};t.SINGLE_KEY="manager.BattleFlowManager";return t}();t.BattleFlowManager=e;var i=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.img=new Laya.Image;t.addChild(t.img);return t}t.SINGLE_KEY="manager.FabaoFlowItem";return t}(Laya.Sprite);t.FabaoFlowItem=i;var n=function(e){__extends(i,e);function i(){var t=e.call(this)||this;t.img=new Laya.Image;t.addChild(t.img);t.img.anchorX=.4;t.img.anchorY=.5;t.img.width=i.WIDTH;t.img.height=i.HEIGHT;return t}i.SINGLE_KEY="manager.WuxingSkillFlowItem";i.WIDTH=246;i.HEIGHT=75;return i}(Laya.Sprite);t.WuxingSkillFlowItem=n;var o=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.avatar=new avatar.AvatarAnimation;t.addChild(t.avatar);t.img=new Laya.Image;t.img.x=-100;t.img.y=-200;t.addChild(t.img);t.avatarData=new avatar.AvatarData;return t}t.prototype.setImg=function(t){this.img.skin="res/static/skill/"+t+".png";app.MyTween.to(this.img,{scaleY:1},200)};t.prototype.setAvatar=function(t){this.img.scaleY=0;this.avatarData.mountKey=t.horseres;this.avatar.y=-t.high;this.avatar.setAniData(this.avatarData);this.avatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,0);this.avatar.play()};t.SINGLE_KEY="manager.MountFlowItem";return t}(Laya.Sprite);t.MountFlowItem=o})(manager||(manager={}));var manager;(function(t){var e=function(){function o(){}Object.defineProperty(o,"instance",{get:function(){return app.Singleton.getInstance(o)},enumerable:true,configurable:true});o.prototype.loadFonts=function(){var t=[o.FUNCTIONTITLE];for(var e=0,i=t.length;e<i;e++){var n=t[e];var r=new Laya.BitmapFont;r.loadFont("res/static/bitmapfont/"+n+".fnt",new Laya.Handler(this,this.onLoaded,[r,n]))}};o.prototype.onLoaded=function(t,e){t.setSpaceWidth(0);Laya.Text.registerBitmapFont(e,t)};o.SINGLE_KEY="manager.BitmapFontManager";o.FUNCTIONTITLE="functiontitle";return o}();t.BitmapFontManager=e})(manager||(manager={}));var manager;(function(t){t.STYLES={JIHUO_SUCCESS:""};var e=function(){function t(){}Object.defineProperty(t,"instance",{get:function(){return app.Singleton.getInstance(t)},enumerable:true,configurable:true});t.playStageEffectByPos=function(e,t,i,n,r,o){if(i===void 0){i=0}if(n===void 0){n=0}if(r===void 0){r=game.AniView.FILE_NAME.UI}var a=Laya.Pool.getItemByClass("effect_"+e,game.AniView);a.on(Laya.Event.COMPLETE,this,function t(){a.off(Laya.Event.COMPLETE,this,t);a.removeSelf();Laya.Pool.recover("effect_"+e,a);if(o){o.run()}});a.x=i;a.y=n;t.addChild(a);a.load(e,r);a.loop=false;a.play(0);return a};t.playStageEffect=function(e,t,i,n,r){if(t===void 0){t=37}if(i===void 0){i=0}if(r===void 0){r=1}var o=Laya.Pool.getItemByClass("effect_"+e,game.AniView);o.on(Laya.Event.COMPLETE,this,function t(){o.off(Laya.Event.COMPLETE,this,t);app.AppContainer.flowLayer.removeChild(o);Laya.Pool.recover("effect_"+e,o);if(n){n.run()}});o.x=Laya.stage.width/2+t;o.y=Laya.stage.height/2+i;o.scaleX=r;o.scaleY=r;app.AppContainer.flowLayer.addChild(o);o.load(e,game.AniView.FILE_NAME.UI);o.loop=false;o.play(0)};t.playItemEffect=function(e,t,i,n,r){var o=Laya.Pool.getItemByClass("effect_"+e,game.AniView);if(r){o.x=t.width/2;o.y=t.height/2;r.addChild(o)}else{var a=t.parent.localToGlobal(new Laya.Point(t.x+t.width/2,t.y+t.height/2));o.x=a.x;o.y=a.y;app.AppContainer.flowLayer.addChild(o)}o.on(Laya.Event.COMPLETE,this,function t(){o.off(Laya.Event.COMPLETE,this,t);o.removeSelf();Laya.Pool.recover("effect_"+e,o);if(i){i.runWith(n)}});o.load(e,game.AniView.FILE_NAME.UI);o.play(0,false);return o};t.SINGLE_KEY="manager.EffectManager";return t}();t.EffectManager=e})(manager||(manager={}));var manager;(function(t){var e=function(){function t(){this._messages=new Array;this._flowContainer=new Laya.Sprite;this._flowContainer.mouseEnabled=false;app.AppContainer.flowLayer.addChild(this._flowContainer);this._hurtContainer=new Laya.Sprite;this._hurtContainer.mouseEnabled=false;app.AppContainer.flowLayer.addChild(this._hurtContainer)}Object.defineProperty(t,"instance",{get:function(){return app.Singleton.getInstance(t)},enumerable:true,configurable:true});t.prototype.flowByStyle1=function(t,e,i,n){if(i===void 0){i=game.STYLES.RED_COLOR}if(n===void 0){n=this._flowContainer}if(t==""||t==undefined){return}if(e){var r=new o;r.mess=t;r.point=e;r.color=i;r.sprite=n;this._messages.push(r);this.showText()}else{game.NoticeManager.getIns().flowMsg(t,"",0,i)}};t.prototype.flowByStyle3=function(t,e,i){if(e===void 0){e=-30}if(i===void 0){i=game.STYLES.RED_COLOR}if(t==""||t==undefined){return}game.NoticeManager.getIns().flowMsg(t,"",e,i)};t.prototype.showText=function(){if(this._messages.length>0){var t=void 0;var e=this._messages.shift();var i=Laya.Pool.getItemByClass("flowLabel",Laya.Label);i.color=e.color;i.fontSize=28;i.bold=true;i.text=e.mess;i.width=i.textField.textWidth+5;i.height=i.textField.textHeight+5;if(e.point==undefined){i.x=.5*(Laya.stage.width-i.width);t=.5*(Laya.stage.height-i.height)}else{i.x=e.point.x-.5*i.width;t=e.point.y}i.y=t;if(e.type==2){}else{e.sprite.addChild(i)}Laya.Tween.to(i,{y:t-100},2e3,Laya.Ease.quartOut,Laya.Handler.create(this,this.completeHandle,[i,e]))}};t.prototype.completeHandle=function(t,e){Laya.Tween.clearAll(t);t.removeSelf();Laya.Pool.recover("flowLabel",t);e.distroy();this.showText()};t.prototype.flowError=function(){};t.prototype.flowRes=function(t,e){game.NoticeManager.getIns().flowMsg(t,e)};t.prototype.getHurtContainer=function(){return this._hurtContainer};t.prototype.flowByStyle2=function(t){var e=Laya.Pool.getItemByClass("ui.lingzhiyuan.baojitipsUI",ui.lingzhiyuan.baojitipsUI);e.imgbaoji.skin="res/static/skill/bg_lingzhiyuan_lbaoji.png";e.ani1.on(Laya.Event.COMPLETE,this,this.onRemove,[e]);e.anchorX=e.anchorY=.5;e.clipshuzi.value="x"+t;e.x=Laya.stage.width*.5+37;e.y=Laya.stage.height-520;e.ani1.play(0,false);app.AppContainer.flowLayer.addChild(e)};t.prototype.onRemove=function(t){t.removeSelf();t.ani1.off(Laya.Event.COMPLETE,this,this.onRemove);Laya.Pool.recover("ui.lingzhiyuan.baojitipsUI",t)};t.SINGLE_KEY="manager.FlowManager";return t}();t.FlowManager=e;var o=function(){function t(){}t.prototype.distroy=function(){this.mess=undefined;this.style=undefined;this.point=undefined;this.type=undefined};return t}()})(manager||(manager={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var manager;(function(r){var t=function(){function t(){}Object.defineProperty(t,"instance",{get:function(){return app.Singleton.getInstance(t)},enumerable:true,configurable:true});t.changePos=function(t){if(!t.parent){console.log(t)}var e=t.parent.localToGlobal(new Laya.Point(t.x,t.y));e=app.AppContainer.flowLayer.globalToLocal(e);return e};t.playFlyByPos=function(t,e,i){var n=Laya.Pool.getItemByClass("item_fly",Laya.Image);n.skin=t;n.mouseEnabled=false;app.AppContainer.flowLayer.addChild(n);n.scale(.5,.5);n.x=e.x;n.y=e.y;Laya.Tween.to(n,{x:i.x,y:i.y},600,Laya.Ease.linearNone,Laya.Handler.create(this,function(){n.removeSelf();Laya.Pool.recover("item_fly",n)}))};t.playFlyItemByPos=function(t,e,i,n,r){if(r===void 0){r=600}var o=Laya.Pool.getItemByClass("grids.GridView_fly",grids.GridView);o.setData(t);o.mouseEnabled=false;app.AppContainer.flowLayer.addChild(o);o.x=e.x;o.y=e.y;var a=Laya.Tween.to(o,{x:i.x,y:i.y},r,Laya.Ease.linearNone,Laya.Handler.create(this,function(){o.removeSelf();Laya.Pool.recover("grids.GridView_fly",o);if(n){n.run()}}));return a};t.playFlyByStartAndEnd=function(n,r,o,a){var t=function(t,e){var i=Laya.Pool.getItemByClass("item_fly",Laya.Image);i.skin=o[t];i.mouseEnabled=false;app.AppContainer.flowLayer.addChild(i);i.scale(.7,.7);i.x=n.x;i.y=n.y;Laya.Tween.to(i,{x:r.x,y:r.y},a,Laya.Ease.linearNone,Laya.Handler.create(s,function(){i.removeSelf();Laya.Pool.recover("item_fly",i)}),t*100)};var s=this;for(var e=0,i=o.length;e<i;e++){t(e,i)}};t.playExpFly=function(t,n){if(t.itemCfg.type==csv.ItemProxy.TYPES.XIAO_HAO_PING){if(csv.ItemProxy.getIns().expTypes.indexOf(t.itemCfg.subtype)!=-1){for(var e=0;e<5;e++){Laya.timer.once(50*e,this,i,null,false)}}}function i(){var t=Laya.Pool.getItemByClass(r.TailUiFlyItem.SINGLE_KEY,r.TailUiFlyItem);var e=r.TailUiFlyItem.changePos(n,app.AppContainer.flowLayer);var i=main.MainUIIcon.getMainUIIconPoint(csv.MainIconProxy.JUESE);t.init(2,e.x+n.width/2,e.y+n.height/2,i.x,i.y,app.AppContainer.flowLayer)}};t.SINGLE_KEY="manager.ItemFlyManager";return t}();r.ItemFlyManager=t;var e=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t._factor=0;t.scale(1.2,1.2);t.imgIcon=new Laya.Image;t.imgIcon.width=80;t.imgIcon.height=80;t.imgIcon.anchorX=.5;t.imgIcon.anchorY=1;t.addChild(t.imgIcon);t.imgZhao=new game.AniView("skill_diaoluo",game.AniView.FILE_NAME.MAP);t.addChild(t.imgZhao);t.sPoint=new Laya.Point;t.tPoint=new Laya.Point;return t}t.prototype.init=function(t,e,i,n,r,o,a,s){if(n===void 0){n=0}if(r===void 0){r=0}if(o===void 0){o=app.AppContainer.flyLayer}if(a===void 0){a=100}this.handler=s;this.imgIcon.skin=t;this.x=e;this.y=i;this.sPoint.x=e;this.sPoint.y=i;this.tPoint.x=n;this.tPoint.y=r;this.rotation=0;this.speed=1;this._factor=0;o.addChild(this);Laya.timer.once(a,this,this.fly);this.imgZhao.play()};t.prototype.fly=function(){this.totalDis=this.tPoint.distance(this.sPoint.x,this.sPoint.y);this.cPoint=new Laya.Point((this.sPoint.x+this.tPoint.x)/2,(this.sPoint.y+this.tPoint.y)/2-this.totalDis);Laya.timer.frameLoop(1,this,this.loop)};t.prototype.clear=function(){Laya.timer.clear(this,this.loop)};t.prototype.loop=function(){if(this._factor>1){this.imgZhao.stop();this.clear();this.removeSelf();Laya.Pool.recover(t.SINGLE_KEY,this);this.handler&&this.handler.run();return}this.factor=this._factor+this.speed/1e3*Laya.timer.delta};Object.defineProperty(t.prototype,"factor",{set:function(t){this._factor=t;var e=(1-t)*(1-t)*this.sPoint.x+2*t*(1-t)*this.cPoint.x+t*t*this.tPoint.x;var i=(1-t)*(1-t)*this.sPoint.y+2*t*(1-t)*this.cPoint.y+t*t*this.tPoint.y;this.x=e;this.y=i},enumerable:true,configurable:true});t.changePos=function(t,e){if(e===void 0){e=app.AppContainer.flyLayer}if(!t.parent){console.log(t)}var i=t.parent.localToGlobal(new Laya.Point(t.x,t.y));i=e.globalToLocal(i);return i};t.SINGLE_KEY="manager.TailDropFlyItem";return t}(Laya.Sprite);r.TailDropFlyItem=e;var i=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.tailAddSpeed=.05;t._factor=0;t.icon=new Laya.Image;t.icon.anchorX=t.icon.anchorY=.5;t.tail=new Laya.Image;t.tail.anchorX=.9;t.tail.anchorY=.5;t.addChild(t.tail);t.addChild(t.icon);t.sPoint=new Laya.Point;t.tPoint=new Laya.Point;return t}t.prototype.init=function(t,e,i,n,r,o,a){if(n===void 0){n=0}if(r===void 0){r=0}if(o===void 0){o=app.AppContainer.flyLayer}if(a===void 0){a=100}this.icon.skin="zhandou/fly_"+t+".png";this.tail.skin="zhandou/fly_"+t+"_1.png";this.x=e;this.y=i;this.sPoint.x=e;this.sPoint.y=i;this.tPoint.x=n;this.tPoint.y=r;this.rotation=0;this.tail.scaleX=0;this.speed=0;this._factor=0;o.addChild(this);Laya.timer.once(a,this,this.fly)};t.prototype.fly=function(){this.totalDis=this.tPoint.distance(this.sPoint.x,this.sPoint.y);this.cPoint=new Laya.Point((this.sPoint.x+this.tPoint.x)/2,(this.sPoint.y+this.tPoint.y)/2-game.SceneModel.random(-this.totalDis/2,this.totalDis/2));this.angle=Math.atan2(this.tPoint.y-this.y,this.tPoint.x-this.x);this.rotation=this.angle/Math.PI*180;Laya.timer.frameLoop(1,this,this.loop)};t.prototype.clear=function(){Laya.timer.clear(this,this.loop)};t.prototype.loop=function(){if(this._factor>1){this.clear();this.removeSelf();Laya.Pool.recover(t.SINGLE_KEY,this);return}this.speed+=.02;this.factor=this._factor+this.speed/Laya.timer.delta;this.tail.scaleX+=this.tailAddSpeed;if(this.tail.scaleX>2){this.tail.scaleX=2}};Object.defineProperty(t.prototype,"factor",{set:function(t){this._factor=t;var e=(1-t)*(1-t)*this.sPoint.x+2*t*(1-t)*this.cPoint.x+t*t*this.tPoint.x;var i=(1-t)*(1-t)*this.sPoint.y+2*t*(1-t)*this.cPoint.y+t*t*this.tPoint.y;this.rotation=Math.atan2(i-this.y,e-this.x)/Math.PI*180;this.x=e;this.y=i},enumerable:true,configurable:true});t.changePos=function(t,e){if(e===void 0){e=app.AppContainer.flyLayer}var i=t.parent.localToGlobal(new Laya.Point(t.x,t.y));i=e.globalToLocal(i);return i};t.SINGLE_KEY="manager.TailUiFlyItem";return t}(Laya.Sprite);r.TailUiFlyItem=i;var n=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.speed=50;t.tailAddSpeed=.1;t._factor=0;t.icon=new Laya.Image;t.icon.scale(2,2);t.icon.anchorX=t.icon.anchorY=.5;t.tail=new Laya.Image;t.tail.anchorX=.9;t.tail.anchorY=.5;t.addChild(t.tail);t.addChild(t.icon);t.sPoint=new Laya.Point;t.tPoint=new Laya.Point;return t}t.prototype.init=function(t,e,i,n,r,o){if(n===void 0){n=0}if(r===void 0){r=0}if(o===void 0){o=scene.SceneMediator.getInstance().isoWorld.flyLayer}this.icon.skin="zhandou/fly_2.png";this.tail.skin="zhandou/fly_2_1.png";o.addChild(this);this.x=t;this.y=e;this.sPoint.x=t;this.sPoint.y=e;this.rotation=0;this.tail.scaleX=0;this.target=i;this.offX=n;this.offY=r;Laya.timer.once(200,this,this.fly,[i,n,r])};t.prototype.fly=function(){if(this.target){this.tPoint.x=this.target.x+this.offX;this.tPoint.y=this.target.y+this.offY}else{this.tPoint.x=this.offX;this.tPoint.y=this.offY}this.totalDis=this.tPoint.distance(this.sPoint.x,this.sPoint.y);this.cPoint=new Laya.Point((this.sPoint.x+this.tPoint.x)/2,(this.sPoint.y+this.tPoint.y)/2-game.SceneModel.random(-this.totalDis/2,this.totalDis/2));this.angle=Math.atan2(this.tPoint.y-this.y,this.tPoint.x-this.x);this.rotation=this.angle/Math.PI*180;this.totalTime=this.totalDis/this.speed*60;this.currTime=0;Laya.timer.frameLoop(1,this,this.loop)};t.prototype.clear=function(){Laya.timer.clear(this,this.loop)};t.prototype.loop=function(){this.currTime+=Laya.timer.delta;if(this.currTime>this.totalTime){this.clear();this.removeSelf();Laya.Pool.recover(t.SINGLE_KEY,this);return}this.factor=this.currTime/this.totalTime;this.tail.scaleX+=this.tailAddSpeed;if(this.tail.scaleX>3){this.tail.scaleX=3}};Object.defineProperty(t.prototype,"factor",{set:function(t){this._factor=t;var e=(1-t)*(1-t)*this.sPoint.x+2*t*(1-t)*this.cPoint.x+t*t*this.tPoint.x;var i=(1-t)*(1-t)*this.sPoint.y+2*t*(1-t)*this.cPoint.y+t*t*this.tPoint.y;this.rotation=Math.atan2(i-this.y,e-this.x)/Math.PI*180;this.x=e;this.y=i},enumerable:true,configurable:true});t.SINGLE_KEY="manager.TailYuanshenFlyItem";return t}(Laya.Sprite);r.TailYuanshenFlyItem=n;var o=function(e){__extends(c,e);function c(){var t=e.call(this)||this;t.tailAddSpeed=.04;t._factor=0;t.icon=new Laya.Image;t.icon.width=100;t.icon.height=100;t.icon.anchorX=t.icon.anchorY=.5;t.tail=new Laya.Image;t.tail.width=150;t.tail.anchorX=.9;t.tail.anchorY=.5;t.addChild(t.tail);t.addChild(t.icon);t.sPoint=new Laya.Point;t.tPoint=new Laya.Point;t.cPoint=new Laya.Point;return t}Object.defineProperty(c.prototype,"speed",{get:function(){if(this._state==1){if(this._factor<this._stopFactor){this._speed-=this._speed/this._speedRate}else{this._speed=.1;this._state=2}}else{this._speed=this._speedAdd*this._speed}return this._speed},enumerable:true,configurable:true});c.prototype.init=function(t,e,i,n,r,o,a,s,l,u){var p=c.arr[t];var h=c.scaleArr[t];this.scale(h,h);this._speed=c.speedArr[t];this._speedAdd=c.speedAddArr[t];this._stopFactor=c.stopFactor[t];this._speedRate=c.speedRateArr[t];this.icon.skin="res/static/chouka/"+p+"02.png";this.tail.skin="res/static/chouka/"+p+"02_w.png";this.x=i;this.y=n;this.sPoint.x=i;this.sPoint.y=n;this.tPoint.x=r;this.tPoint.y=o;this.cPoint.x=a;this.cPoint.y=s;this.rotation=0;this.tail.scaleX=0;this._state=1;this._factor=0;this.handler=u;e.addChild(this);Laya.timer.once(l,this,this.fly1)};c.prototype.fly1=function(){Laya.timer.frameLoop(1,this,this.loop1)};c.prototype.loop1=function(){if(this.y<this.tPoint.y){Laya.timer.clear(this,this.loop1);this.removeSelf();Laya.Pool.recover(c.SINGLE_KEY,this);this.handler.run();return}this.factor=this._factor+this.speed/1e3*Laya.timer.delta;this.tail.scaleX+=this.tailAddSpeed;if(this.tail.scaleX>1){this.tail.scaleX=1}};Object.defineProperty(c.prototype,"factor",{set:function(t){this._factor=t;var e=(1-t)*(1-t)*this.sPoint.x+2*t*(1-t)*this.cPoint.x+t*t*this.tPoint.x;var i=(1-t)*(1-t)*this.sPoint.y+2*t*(1-t)*this.cPoint.y+t*t*this.tPoint.y;this.rotation=Math.atan2(i-this.y,e-this.x)/Math.PI*180;this.x=e;this.y=i},enumerable:true,configurable:true});c.SINGLE_KEY="manager.TailFabaoFlyItem";c.arr=["","","lv","lan","zi","cheng","hong"];c.scaleArr=[1,1,1,1,1.3,1.5,1.5];c.speedArr=[.1,.1,.1,.1,.1,.1,.1];c.speedAddArr=[1.2,1.2,1.2,1.2,1.2,1.2,1.2];c.speedRateArr=[100,100,100,100,50,50,50];c.stopFactor=[0,0,0,0,0,0,0];return c}(Laya.Sprite);r.TailFabaoFlyItem=o})(manager||(manager={}));var manager;(function(e){var t=function(){function t(){this.everyTick=20;this.needPlay=false;this.showText="";this.loadingGameContainer=new Laya.Sprite;this.loadingGameContainer.width=Laya.stage.width;this.loadingGameContainer.height=Laya.stage.height;Laya.loader.on(Laya.Event.ERROR,this,this.onLoadError)}Object.defineProperty(t,"instance",{get:function(){return app.Singleton.getInstance(t)},enumerable:true,configurable:true});t.prototype.setJsLoading=function(t){var e=document.getElementById("outLoadingLayer");if(e){e.style.display=t?"block":"none"}};t.prototype.init=function(){};t.prototype.showGameLoading=function(t){if(game.Context.disableIosRecharge()){}else{if(this.gLoading==undefined){Laya.loader.load(["res/atlas/loading.atlas","res/atlas/effect/loading.atlas"],Laya.Handler.create(this,this.onLoadingSkinComplete))}app.AppContainer.loadingLayer.addChild(this.loadingGameContainer)}};t.prototype.onLoadingSkinComplete=function(){this.gLoading=new ui.Loading.loadingUI;this.gLoading.x=(this.loadingGameContainer.width-this.gLoading.width)*.5;this.gLoading.y=Laya.stage.height+t.LOADING_OFF_Y-(this.loadingGameContainer.height-Laya.stage.height)*.5;this.loadingGameContainer.addChild(this.gLoading);this.gLoading.progressbar.value=0;this.gLoading.animationloading.x=this.gLoading.progressbar.x;this.gLoading.animationloading.play();this.setText(this.showText);if(this.needPlay){this.needPlay=false;this.playLoading()}};t.prototype.playLoading=function(){if(this.loadCnt>0){this.loadCnt--;var t=(this.maxLoadCnt-this.loadCnt)/this.maxLoadCnt;e.LoadingManager.instance.setText(Math.floor(t*100)+"/100");e.LoadingManager.instance.updateGameLoading(t);Laya.timer.once(this.everyTick,this,this.playLoading)}};t.prototype.updateGameLoading=function(t){if(this.gLoading==undefined){return}this.gLoading.progressbar.value=t;this.gLoading.animationloading.x=this.gLoading.progressbar.x+this.gLoading.progressbar.width*t;if(this.gLoading.progressbar.value==1){this.gLoading.progressbar.value=1}if(this.showText){this.gLoading.loading_des.text=this.showText}};t.prototype.setText=function(t){this.showText=t;if(!this.gLoading){return}this.gLoading.loading_des.text=this.showText};t.prototype.removeGameLoading=function(t){if(this.loadingGameContainer&&this.loadingGameContainer.parent){this.loadingGameContainer.parent.removeChild(this.loadingGameContainer);if(this.gLoading){this.gLoading.animationloading.x=0;this.gLoading.progressbar.value=0;this.setText("")}}};t.prototype.doAddRes=function(){Laya.stage.addChild(game.UILoadingView.getIns())};t.prototype.removeResLoading=function(){Laya.timer.clear(t.instance,t.instance.doAddRes);if(game.UILoadingView.getIns().displayedInStage){game.UILoadingView.getIns().removeSelf()}};t.prototype.onLoadError=function(t){console.log(t);this.removeResLoading()};t.SINGLE_KEY="manager.LoadingManager";t.LOADING_OFF_Y=-200;return t}();e.LoadingManager=t})(manager||(manager={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(r){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.startY=Laya.stage.height*2/3;t.dataList=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.flowMsg=function(t,e,i,n){if(i===void 0){i=0}if(n===void 0){n=r.STYLES.RED_COLOR}this.dataList.push({text:t,color:n,imgUrl:e,offX:i});this.flowStart()};t.prototype.flowStart=function(){if(this.isRunning){return}this.isRunning=true;this.flowNext()};t.prototype.flowNext=function(){Laya.timer.once(50,this,this.flowNext);var t;if(this.dataList.length>0){t=this.dataList.shift()}var e;if(t){e=Laya.Pool.getItemByClass("ui.main.ziyuanpiaoziUI",ui.main.ziyuanpiaoziUI);if(!e||!e.daojubg){return}e.daojubg.skin=t.imgUrl;e.huodetxt.width=NaN;e.huodetxt.wordWrap=false;e.huodetxt.fontSize=26;e.huodetxt.align="left";e.huodetxt.text=t.text;e.huodebg.x=0;if(t.imgUrl){e.daojubg.visible=true;e.width=e.huodebg.width=Math.max(300,e.huodetxt.width+166);e.huodetxt.x=.5*(e.huodebg.width-e.huodetxt.width+66);e.daojubg.x=e.huodetxt.x-38;e.huodetxt.color=r.STYLES.GREEN_COLOR}else{e.daojubg.visible=false;e.width=e.huodebg.width=Math.max(300,e.huodetxt.width+100);e.huodetxt.x=.5*(e.huodebg.width-e.huodetxt.width);e.huodebg.x=0;e.huodetxt.color=t.color}e.cacheAsBitmap=true;this.addNotice(e,t.offX)}else{this.isRunning=false}};t.prototype.addNotice=function(t,e){var i=this;if(!this.displayedInStage){app.AppContainer.flowLayer.addChild(this)}this.addChildAt(t,0);this.alpha=1;Laya.Tween.clearAll(this);t.alpha=1;t.x=(Laya.stage.width-t.width)*.5+e;t.y=this.startY;while(this.numChildren>15){this.recoverPanel(this.getChildAt(this.numChildren-1))}var n=function(t){var e=r.getChildAt(t);Laya.Tween.to(e,{y:r.startY-50*t},100,null,new Laya.Handler(r,function(){Laya.timer.once(1500,i,function(){Laya.Tween.to(e,{y:e.y-50,alpha:0},500)})}))};var r=this;for(var o=0;o<this.numChildren;++o){n(o)}Laya.timer.once(1500,this,this.doRemove);if(this.tweenPanel){this.recoverPanel(this.tweenPanel);this.tweenPanel=null}};t.prototype.doRemove=function(){Laya.Tween.to(this,{alpha:0},500,null,new Laya.Handler(this,this.onComplete))};t.prototype.onComplete=function(){while(this.numChildren){this.recoverPanel(this.removeChildAt(this.numChildren-1))}this.alpha=1;this.removeSelf()};t.prototype.recoverPanel=function(t){if(t){Laya.Tween.clearAll(t);t.alpha=1;t.removeSelf()}else{console.log("........")}};t.prototype.flowImg=function(t,e){Laya.Tween.clearAll(t);t.alpha=1;t.y=e;Laya.Tween.to(t,{y:e-50},100);Laya.timer.once(1500,this,this.onHideImg,[t])};t.prototype.onHideImg=function(t){Laya.Tween.to(t,{alpha:0},500,null)};t.SINGLE_KEY="game.NoticeManager";return t}(Laya.Sprite);r.NoticeManager=t})(game||(game={}));var manager;(function(t){var e=function(){function t(){}Object.defineProperty(t,"instance",{get:function(){return app.Singleton.getInstance(t)},enumerable:true,configurable:true});t.prototype.init=function(){var i;var t="res/atlas/particle/p_mouse.part";Laya.loader.load(t,new Laya.Handler(this,r));Laya.stage.on(Laya.Event.CLICK,this,e);function e(t){if(i){var e=void 0;e=new Laya.Particle2D(i);e.zOrder=app.AppContainer.LAYER_NUME.TOPTOUCH;e.x=Laya.stage.mouseX;e.y=Laya.stage.mouseY;Laya.stage.addChild(e);e.play();Laya.timer.once(1e3,this,n,[e],false)}}function n(t){t.stop();t.removeSelf()}function r(){i=Laya.loader.getRes(t)}};t.SINGLE_KEY="manager.ParticleManager";return t}();t.ParticleManager=e})(manager||(manager={}));var app;(function(p){var t=function(){function i(){}i.getIns=function(){var t=p.Singleton.getInstance(i);return t};i.prototype.init=function(){var t=p.str2Array(game.Config.getParams(496),";");game.SystemSetModel.getInstance().settingData[game.SettingType.musicValue]=parseInt(t[0]);game.SystemSetModel.getInstance().settingData[game.SettingType.audioValue]=parseInt(t[1])};i.prototype.playBgm=function(t,e){if(e===void 0){e=1}Laya.SoundManager.playMusic("res/sound/"+t+"."+ent.Entry.soundSuffix,e)};i.prototype.playMapBgm=function(t){Laya.timer.clear(this,this.playMapBgm);var e=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.musicValue);if(e.switch){this.bgmUrl=t;var i=e.value/1e4;Laya.SoundManager.setMusicVolume(0);this.bgmStartTime=Laya.timer.currTimer;Laya.timer.frameLoop(1,this,this.loopMapBgmVolume,[i]);var n=0;var r=p.str2Array(this.bgmUrl,";","-");var o=[];for(var a=0,s=r.length;a<s;a++){var l=parseInt(r[a][0]);var u=r[a][1];o.push({time:l,url:u})}this.playPerMapBgm(o,n)}};i.prototype.loopMapBgmVolume=function(t){var e=(Laya.timer.currTimer-this.bgmStartTime)*t;var i=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.musicValue);if(e>i.value/100){e=i.value/100;Laya.timer.clear(this,this.loopMapBgmVolume)}if(e>1){e=1}Laya.SoundManager.setMusicVolume(e)};i.prototype.playPerMapBgm=function(t,e){var i=t[e];if(i){var n="res/sound/"+i.url+"."+ent.Entry.soundSuffix;if(i.time){Laya.SoundManager.playMusic(n,i.time,Laya.Handler.create(this,this.playPerMapBgm,[t,++e]))}else{Laya.SoundManager.playMusic(n,0)}}};i.prototype.stopMapBgm=function(){Laya.timer.clear(this,this.loopMapBgmVolume);Laya.SoundManager.stopMusic()};i.prototype.resumeMapBgm=function(){if(battle.BattleManager.getIns().currControl){this.setMapBgmVolume();battle.BattleManager.getIns().currControl.playBgm()}};i.prototype.setMapBgmVolume=function(){var t=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.musicValue);if(t.value>100){t.value=100}Laya.SoundManager.setMusicVolume(t.value/100)};i.prototype.playSound=function(t){var e=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.audioValue);if(e.switch){if(e.value>100){e.value=100}Laya.SoundManager.setSoundVolume(e.value/100);Laya.SoundManager.playSound("res/sound/"+t+"."+ent.Entry.soundSuffix)}};i.prototype.playCv=function(t){var e=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.audioValue);if(e.switch){if(e.value>100){e.value=100}Laya.SoundManager.setSoundVolume(e.value/100);return Laya.SoundManager.playSound("res/sound/cv/"+t+"."+ent.Entry.soundSuffix)}return null};i.prototype.playSpecialSound=function(t){if(Laya.Dialog.manager.numChildren>0){return}var e=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.specialOn);if(!e.value){e=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.audioValue);if(e.switch){if(e.value>100){e.value=100}Laya.SoundManager.setSoundVolume(e.value/100);Laya.SoundManager.playSound("res/sound/"+t+"."+ent.Entry.soundSuffix)}}};i.prototype.onClickBtnSound=function(){var e=this;Laya.stage.on(Laya.Event.MOUSE_DOWN,this,function(t){if(game.Context.isSubLoaded){if(t.target instanceof Laya.Button){if(t.target[i.NO_BUTTON_MUSIC]){return}e.playSound("button")}}})};i.SINGLE_KEY="app.SoundManager";i.NO_BUTTON_MUSIC="NO_BUTTON_MUSIC";return i}();p.SoundManager=t})(app||(app={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.funIds={};t.actidlist=[];t.bulletList=[];return t}t.getInstance=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this.settingData=new i.SettingData;this.settingList=[];this.settingFuncData={};i.RoleModel.getIns().on(i.RoleModel.EVENTS.KUAI_TIAN,this,this.onKuaTianClear)};t.prototype.onKuaTianClear=function(){i.SystemSetModel.getInstance().setValueByType(0,i.SettingType.kfxlEnterRed);i.SystemSetModel.getInstance().setValueByType(0,i.SettingType.vipGotoBtn);i.SystemSetModel.getInstance().setValueByType(0,i.SettingType.redpackIcon);yuanshencode.KuafuXiulianModel.getIns().clearKuaTian();Laya.timer.once(3e3,this,this.checkHd)};t.prototype.checkHd=function(){newshangcheng.NewShangChengModel.getIns().checkHuoDong()};t.prototype.alertViewCheck=function(t){return this.funIds[t]};t.prototype.settingListUpdate=function(t,e,i){this.actidlist=e;this.bulletList=i;if(t&&t.length>0){this.settingList=t;for(var n=0,r=t.length;n<r;n++){this.settingData.data[n]=t[n]}}};t.prototype.updateFuncSaveData=function(t){if(this.settingFuncData){this.settingFuncData[t.type]=t.data}};t.prototype.setValueByType=function(t,e){this.settingData.data[e]=t;if(e==n.musicValue){app.SoundManager.getIns().setMapBgmVolume()}else if(e==n.soundSwitch){if(t){app.SoundManager.getIns().resumeMapBgm()}else{Laya.SoundManager.stopAll()}}else if(e==i.SettingType.roleModel){this.event(i.SystemSetModel.EVENTS.APPEAR_CHANGE,[t])}else if(e==n.modelSwitch||e==n.friendly||e==n.otherPlayer){this.event(i.SystemSetModel.EVENTS.MODEL_SWITCH_CHANGE)}else if(e==n.blooding){this.event(i.SystemSetModel.EVENTS.HURT_SWITCH_CHANGE)}else if(e==n.skillEffect){this.event(i.SystemSetModel.EVENTS.SKILL_SWITCH_CHANGE)}else if(e==n.realShadow){this.event(i.SystemSetModel.EVENTS.REALSHADOW_SWITCH_CHANGE)}else if(e==n.otherPlayer){this.event(i.SystemSetModel.EVENTS.OTHERPLAYER_SWITCH_CHANGE)}else if(e==n.guideId){this.event(i.SystemSetModel.EVENTS.GUIDE_ID_CHANGE)}else if(e==n.noticeRedSet){this.event(i.SystemSetModel.EVENTS.NOTICE_CHANGE)}i.SystemSetModel.getInstance().synSettingData()};t.prototype.synSettingData=function(){app.ProtocolRequest.SaveSettingsReq(this.settingData.data,this.actidlist,newshangcheng.ActivityTipModel.getIns().shownTips)};t.prototype.setFuncDataByType=function(t,e,i){var n=this.getFuncSaveData(t);var r=-1;for(var o=0;o<n.length;o++){if(n[o].id==i.id){r=o;break}}if(e==0){if(r==-1){if(!this.settingFuncData[t]){this.settingFuncData[t]=[]}this.settingFuncData[t].push(i)}else{this.settingFuncData[t][r]=i}}else{if(r!=-1){this.settingFuncData[t].splice(r,1)}}app.ProtocolRequest.CltUseDataRpt(e,t,this.settingFuncData[t])};t.prototype.getFuncSaveData=function(t){if(this.settingFuncData&&this.settingFuncData[t]){return this.settingFuncData[t]}return[]};t.prototype.getFuncDataById=function(t,e){if(this.settingFuncData[t]){var i=this.settingFuncData[t];for(var n=0;n<i.length;n++){if(i[n].id==e){return i[n]}}}return null};t.prototype.saveAct=function(t){var e=false;for(var i=0;i<this.actidlist.length;i++){var n=this.actidlist[i];if(t==n){return}if(n==0){this.actidlist[i]=t;e=true;break}}if(e){}else{this.actidlist[this.actidlist.length]=t}this.synSettingData()};t.prototype.hasActid=function(t){for(var e=0;e<this.actidlist.length;e++){var i=this.actidlist[e];if(t==i){return true}}return false};t.SINGLE_KEY="game.SystemSetModel";t.EVENTS={APPEAR_CHANGE:"appear_change",MODEL_SWITCH_CHANGE:"modelSwitch_change",HURT_SWITCH_CHANGE:"hurt_switch_change",SKILL_SWITCH_CHANGE:"skill_switch_change",REALSHADOW_SWITCH_CHANGE:"realshadow_switch_change",OTHERPLAYER_SWITCH_CHANGE:"otherplayer_switch_change",GUIDE_ID_CHANGE:"guide_id_change",NOTICE_CHANGE:"notice_change"};return t}(app.ModelBase);i.SystemSetModel=t;var n;(function(t){t[t["soundSwitch"]=0]="soundSwitch";t[t["modelSwitch"]=1]="modelSwitch";t[t["roleModel"]=2]="roleModel";t[t["specialOn"]=3]="specialOn";t[t["musicValue"]=4]="musicValue";t[t["audioValue"]=5]="audioValue";t[t["friendly"]=6]="friendly";t[t["blooding"]=7]="blooding";t[t["skillEffect"]=8]="skillEffect";t[t["otherPlayer"]=9]="otherPlayer";t[t["realShadow"]=10]="realShadow";t[t["firstEnterGuild"]=11]="firstEnterGuild";t[t["battleSpeed"]=12]="battleSpeed";t[t["huluPickLock"]=13]="huluPickLock";t[t["guideId"]=14]="guideId";t[t["noticeRedSet"]=15]="noticeRedSet";t[t["wuxingPass"]=16]="wuxingPass";t[t["smelt"]=17]="smelt";t[t["redPack"]=18]="redPack";t[t["qirimubiao"]=19]="qirimubiao";t[t["jubaoCD"]=20]="jubaoCD";t[t["actShowRed"]=21]="actShowRed";t[t["vipGotoBtn"]=22]="vipGotoBtn";t[t["kfxlEnterRed"]=23]="kfxlEnterRed";t[t["yuanshenXiulian"]=24]="yuanshenXiulian";t[t["hulufuliGift"]=25]="hulufuliGift";t[t["redpackIcon"]=26]="redpackIcon";t[t["wuxingSkillRed"]=27]="wuxingSkillRed"})(n=i.SettingType||(i.SettingType={}));var e;(function(t){t[t["bossCaveTreasure"]=1]="bossCaveTreasure";t[t["systenNotice"]=2]="systenNotice";t[t["mjRoleVids"]=3]="mjRoleVids";t[t["yiShouDh"]=4]="yiShouDh"})(e=i.settingFuncType||(i.settingFuncType={}));var r=function(){function t(){this.data=[];this.group1=[i.SettingType.specialOn,i.SettingType.musicValue,i.SettingType.audioValue];this.group2=[i.SettingType.friendly,i.SettingType.blooding,i.SettingType.skillEffect,i.SettingType.otherPlayer,i.SettingType.realShadow,i.SettingType.wuxingPass,i.SettingType.redPack];this.data[i.SettingType.soundSwitch]=1;this.data[i.SettingType.modelSwitch]=0;this.data[i.SettingType.roleModel]=0;this.data[i.SettingType.specialOn]=0;this.data[i.SettingType.musicValue]=100;this.data[i.SettingType.audioValue]=50;this.data[i.SettingType.friendly]=1;this.data[i.SettingType.blooding]=1;this.data[i.SettingType.skillEffect]=1;this.data[i.SettingType.otherPlayer]=0;this.data[i.SettingType.realShadow]=0;this.data[i.SettingType.firstEnterGuild]=0;this.data[i.SettingType.battleSpeed]=1;this.data[i.SettingType.huluPickLock]=1;this.data[i.SettingType.guideId]=0;this.data[i.SettingType.noticeRedSet]=0;this.data[i.SettingType.wuxingPass]=0;this.data[i.SettingType.smelt]=22222;this.data[i.SettingType.redPack]=0;this.data[i.SettingType.qirimubiao]=0;this.data[i.SettingType.jubaoCD]=0;this.data[i.SettingType.actShowRed]=0;this.data[i.SettingType.vipGotoBtn]=0;this.data[i.SettingType.kfxlEnterRed]=0;this.data[i.SettingType.yuanshenXiulian]=22222;this.data[i.SettingType.hulufuliGift]=0;this.data[i.SettingType.redpackIcon]=0;this.data[i.SettingType.wuxingSkillRed]=0}t.prototype.getValueByType=function(t){var e=0;if(this.group1.indexOf(t)>=0){e=this.data[i.SettingType.soundSwitch]}else if(this.group2.indexOf(t)>=0){e=this.data[i.SettingType.modelSwitch]}return{switch:e,value:this.data[t]}};return t}();i.SettingData=r})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var app;(function(i){var t=function(){function e(){}e.getIns=function(){var t=i.Singleton.getInstance(e);return t};e.prototype.init=function(){this.video=new n;this.video.handler=new Laya.Handler(this,this.onEnd)};e.prototype.play=function(t,e){this.handler=e;Laya.Browser.document.body.appendChild(this.video.divElement);this.video.play(t)};e.prototype.onEnd=function(){Laya.Browser.document.body.removeChild(this.video.divElement);this.handler&&this.handler.run()};e.SINGLE_KEY="app.VideoManager";return e}();i.VideoManager=t;var n=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.creatVideo();t.on(Laya.Event.RESIZE,t,t.onResize);return t}t.prototype.onResize=function(){Laya.Utils.fitDOMElementInArea(this.divElement,this,0,0,Laya.stage.width,Laya.stage.height-10)};t.prototype.play=function(t){var e="res/video/"+t+".mp4";var i=Laya.ResourceVersion.manifest[e];if(i){this.videoElement.src=game.Context.basePath+("/"+i+"/"+e)}else{this.videoElement.src=game.Context.basePath+e}this.videoElement.play()};t.prototype.creatVideo=function(){var t=Laya.Browser.createElement("div");t.className="div";Laya.Utils.fitDOMElementInArea(t,this,0,0,Laya.stage.width,Laya.stage.height-10);this.divElement=t;var e=Laya.Browser.createElement("video");e.setAttribute("id","myvideo");this.videoElement=e;e.controls=false;e.autoPlay=false;e.setAttribute("webkit-playsinline",true);e.setAttribute("playsinline",true);e.setAttribute("x5-video-player-type","h5");e.setAttribute("x-webkit-airplay",true);e.setAttribute("x5-video-orientation","portrait");e.setAttribute("preload","auto");e.setAttribute("width","100%");e.setAttribute("height","100%");e.style.zInddex=Laya.Render.canvas.style.zIndex+1;t.appendChild(e);this.videoEvent()};t.prototype.videoEvent=function(){var t=this;this.videoElement.addEventListener("ended",function(){t.handler.run()});this.videoElement.addEventListener("error",function(){})};return t}(Laya.Sprite);i.Video=n})(app||(app={}));var app;(function(s){function i(e){try{game.Alert.show(e,new Laya.Handler(this,function(){window.location.reload()}))}catch(t){alert(e);window.location.reload()}}var t=function(){function t(){this.requestPool=[]}t.getIns=function(){return s.Singleton.getInstance(s.Http)};t.request=function(t,e,i,n,r,o,a){if(r===void 0){r="post"}if(o===void 0){o="json"}if(a===void 0){a=0}s.Http.getIns().request(t,e,i,n,r,o,a)};t.prototype.request=function(t,e,i,n,r,o,a){var s=this;if(a===void 0){a=0}var l=Laya.Pool.getItemByClass("app.HRequest",Laya.HttpRequest);try{l.http.timeout=2e4}catch(t){}l.http.ontimeout=function(){s.onTimeout(t,a)};l.on(Laya.Event.COMPLETE,l,this.onResponse,[t,l,e,i]);l.on(Laya.Event.ERROR,l,this.onError,[t,a]);l.send(t,n,r,o)};t.prototype.onResponse=function(t,e,i,n,r){e.http.ontimeout=null;e.off(Laya.Event.COMPLETE,e,this.onResponse);e.off(Laya.Event.ERROR,e,this.onError);if(n){n.call(i,r)}Laya.Pool.recover("app.HRequest",e)};t.prototype.onError=function(t,e){if(e==2){throw new Error("HTTP请求失败，重启游戏")}else if(e==1){i("HTTP请求失败，重启游戏"+t)}else{console.log("HTTP请求失败，重启游戏",t)}};t.prototype.onTimeout=function(t,e){if(e==2){throw new Error("请求超时")}else if(e==1){i("请求超时"+t)}else{console.log("请求超时",t)}};return t}();s.Http=t})(app||(app={}));var app;(function(t){var e=function(){function t(){}t.init=function(t){t[9984]=ActivityStartTimeAck;t[9985]=GetMainPanelResp;t[9986]=RecvPrizeResp;t[9987]=ActEffectResp;t[9988]=ActOpenNoti;t[9989]=RedTipsNoti;t[9990]=ShowIconNoti;t[14336]=GetActMainPanelResp;t[14337]=RecvActPrizeResp;t[14338]=ActRedTipsNoti;t[14339]=ActShowIconNoti;t[14340]=OnlineActTimeNoti;t[14341]=FirstChargeNoti;t[14342]=GetActRankListResp;t[14343]=ZeroBuyResp;t[14344]=ActDrawResp;t[14345]=ActDrawInfoResp;t[14346]=ActDrawCountNtf;t[14347]=ActLimitedBuyDataNtf;t[16129]=AmuletDataAck;t[16133]=AmuletUpdateAck;t[21249]=Arboretum2Ntf;t[21251]=Arboretum2PlantNtf;t[21253]=Arboretum2PlantAck;t[21255]=Arboretum2WaterAck;t[21257]=Arboretum2FricendListAck;t[21259]=Arboretum2FriendAck;t[21261]=Arboretum2GuardUpLvAck;t[21263]=Arboretum2StewardInfoNtf;t[21265]=Arboretum2StewardSetNtf;t[21267]=Arboretum2RewardAck;t[21270]=Arboretum2SetPetAck;t[19201]=ArboretumNtf;t[19203]=ArboretumAddEnvAck;t[19205]=ArboretumPlantAck;t[19207]=ArboretumOrderAck;t[19209]=ArboretumFosterPetAck;t[19211]=ArboretumFriendAck;t[19213]=ArboretumStealAck;t[19215]=ArboretumRecordAck;t[19217]=ArboretumGuardOperateAck;t[19219]=ArboretumDevelopAck;t[19221]=ArboretumUnlockPetSlotAck;t[19223]=ArboretumPetAwardtAck;t[19224]=ArboretumPetAwardtNtf;t[11778]=ChargeArenaAck;t[11809]=ChargePkAck;t[11824]=SimpleArenaDataNtf;t[11826]=SimpleArenaRecordAck;t[11828]=SimpleArenaAwardAck;t[11830]=SimpleArenaMatchAck;t[11832]=SimpleArenaChallengeAck;t[12545]=AwakInfoAck;t[12547]=AwakGetRewardAck;t[6400]=BattleStartNtf;t[6401]=BattleMonsterNtf;t[6402]=BattleEndNtf;t[6404]=BattleAwardNtf;t[6405]=BattleRecordNtf;t[6416]=UseSkillStartNtf;t[6417]=UseSkillEndNtf;t[6418]=TrigMasterSkillNtf;t[6419]=UseBackNtf;t[6432]=HpChangeNtf;t[6433]=BuffChangeNtf;t[6434]=CallSummonNtf;t[6435]=EndTimeSummonNtf;t[6448]=BattleAttributeNoti;t[6449]=BattleSkillCD;t[6464]=BattleReportStream;t[8192]=BossDailyNtf;t[8193]=BossDailyModifyNtf;t[8194]=BossFocusNtf;t[8195]=FightBossNtf;t[8196]=BossRobotNtf;t[8197]=BossRobotStateNtf;t[8198]=BossDailyVipNtf;t[8209]=FreshBossAck;t[8211]=JoinBossAck;t[8212]=BossHurtNtf;t[8215]=LeaveBossAck;t[8217]=FocusBossAck;t[8218]=BossAliveNtf;t[8225]=InspireNtf;t[8227]=InspireAck;t[8241]=BossBelongNtf;t[8242]=WorldHostilityNtf;t[8243]=WorldBelongNtf;t[8245]=ChargeBelongAck;t[8246]=ChargeBelongNtf;t[8248]=RelieveAck;t[8257]=BuyBossDailyAck;t[8273]=DailyTimeSetNtf;t[8290]=CrossGroupNtf;t[8291]=StateFightNtf;t[8292]=IceWorldNtf;t[8293]=IceWorldKickNtf;t[8294]=IceWorldBagNtf;t[8305]=CrossBossAwardNtf;t[8306]=WorldBossBagAllNtf;t[8307]=WorldBossBagAddNtf;t[8309]=WorldBossBagAwardAck;t[8310]=BossFreshInfoNewNtf;t[8311]=KingBossFreshInfoNewNtf;t[8312]=KingBossKillListNtf;t[8313]=KingBossRoleSizeNtf;t[8314]=DevilBossRoleAndHurtNtf;t[8316]=DevilBossHurtAwardAck;t[8317]=DevilBossDataNtf;t[8318]=BossClientTipsNtf;t[18688]=BtCompanionNtf;t[18689]=BtCompanionModifyNtf;t[18690]=NoBtCompanionNtf;t[18692]=AwardBcActAck;t[18705]=JoinBcMapAck;t[18707]=StartBcAck;t[18708]=AskBcReq;t[18710]=AskBcResultNtf;t[18712]=LeaveBcAck;t[18714]=OpenBcInfAck;t[18721]=ChangeBcNameAck;t[18722]=ChangeBcNtf;t[18724]=TransfLeaderBcAck;t[5376]=AttributeNoti;t[5377]=LevChangeNoti;t[5378]=AddExpNoti;t[5379]=RoleDataNoti;t[5380]=ResourceNoti;t[5381]=RoleModifyNtf;t[5382]=TransfChangeNoti;t[5383]=RealNamePrizeNoti;t[5385]=CreateCombatAck;t[5392]=ChangeNameCDNtf;t[5394]=ChangeNameResp;t[5396]=ChangeHuluNameAck;t[5409]=UserScoreResp;t[5411]=UseExpAck;t[5425]=GainAwardOnlineAck;t[5426]=GainAwardItemNtf;t[5440]=OffLineAwardItemNtf;t[5443]=QuackHangUpInfoAck;t[5456]=StatusItemNtf;t[5472]=IdentityAuthDataNoti;t[5474]=RecvIdentityPrizeResp;t[5475]=IdentityAuthTimeNoti;t[5478]=IdentityAuthKickNoti;t[5490]=GetChargeSignResp;t[5505]=SaveSettingsAck;t[5506]=SaveSettingsNoti;t[5510]=AskAwardNtf;t[5521]=SetInFightAck;t[5526]=GainBanPhoneAck;t[5527]=CombatAddExpNoti;t[5529]=SectionBattleScoreAck;t[5531]=CltUseDataNtf;t[21760]=ChartDataNtf;t[21762]=ChartSynthesisResp;t[21764]=ChartMagicLayResp;t[61698]=ChattingResponse;t[61699]=ChattingLangParamResponse;t[61700]=SysMsgNtf;t[61701]=SysMsgParamNtf;t[61702]=SysNoticeParamNtf;t[61703]=SysNewNoticeParamNtf;t[61704]=DialogLangParamNtf;t[61705]=SysMsgStringNtf;t[61712]=BossAIMsgNtf;t[61713]=RoleArenaRecordNtf;t[61714]=AddRoleArenaRecordNtf;t[9472]=DailyActNtf;t[9473]=DailyActModifyNtf;t[9475]=AwardDailyActAck;t[9477]=AwardActPointAck;t[9479]=RoleCDModifyNtf;t[9480]=PetGemTowerNtf;t[9482]=PetGemTowerAck;t[9489]=JoinMountGodAck;t[9493]=DailyInspireNtf;t[9495]=DailyInspireAck;t[9504]=MonsterbookNtf;t[9506]=AwardMonsterbookAck;t[9508]=SweepMonsterbookAck;t[9521]=BuyDailyNumAck;t[9537]=MissPalaceAck;t[9539]=JoinMissPalaceAck;t[9540]=MissPalaceExpNtf;t[9552]=FuncOpenNtf;t[9554]=AwardFuncOpenAck;t[9568]=AchieveInfNtf;t[9570]=AwardAchieveAck;t[9584]=TaskTowerNtf;t[9586]=TaskTowerAck;t[9587]=TowerAwardNtf;t[9589]=TowerAwardAck;t[9600]=BraveChallengeNtf;t[9603]=BraveChallengeAck;t[9616]=EliteChallengeNtf;t[9619]=EliteChallengeAck;t[9621]=SweepEliteChallengeAck;t[9632]=SignNtf;t[9634]=SignAck;t[9636]=SignDaysAck;t[9648]=DgnSzjdSweepNtf;t[9650]=DgnSzjdAck;t[9652]=DgnSzjdStepNtf;t[9654]=SweepDgnSzjdAck;t[9664]=DgnNineTowerNtf;t[9666]=DgnNineTowerAck;t[9668]=AwardNineTowerAck;t[9670]=SweepNineTowerAck;t[9672]=NineTowerBuyAck;t[9681]=DgnSaveSeventhAck;t[9682]=SaveSeventhHPNotice;t[9683]=SaveSeventhAddBoxNotice;t[9685]=SaveSeventhGetBoxAck;t[9687]=ResFindBackDataAck;t[9689]=ResFindBackAck;t[9691]=SevenDayDataAck;t[9693]=SevenDayRewardAck;t[9695]=DailyDrawResp;t[9696]=DailyDrawDataNtf;t[9697]=CheckpointDataNtf;t[9699]=CheckpointAck;t[9701]=CheckpointAwardAck;t[9702]=CaveTreasureDataNtf;t[9704]=CaveTreasureBattleAck;t[9708]=SecretAreaOpenNtf;t[9710]=SecretAreaDataAck;t[9712]=SecretAreaAwardResp;t[9714]=SecretAreaFightResp;t[9716]=SecretAreaStartResp;t[9717]=SSSSGradeInfoNtf;t[9719]=SSSSSweapAck;t[9721]=DialDrawResp;t[9722]=DialDrawDataNtf;t[9724]=DialDrawAwardResp;t[9726]=DailyDrawRecvResp;t[18944]=DilaoNtf;t[18945]=DilaoCombatNtf;t[18946]=DilaoBuffNtf;t[18949]=GainLayerAwardAck;t[18961]=DilaoLayerAck;t[18963]=ResetLayerAck;t[18965]=ChangeRoleAck;t[18976]=ChooseDilaoBuffNtf;t[18978]=ChooseDilaoBuffAck;t[21504]=AlchemistNtf;t[21505]=PrescriptionNtf;t[21507]=RefineDataNtf;t[21509]=RefineStartResp;t[21511]=BreakRefineResp;t[21513]=GetRefineAwardResp;t[21514]=EveryRefineNtf;t[4370]=EquipStrenAck;t[4388]=EquipGemAck;t[4390]=EquipGemLvAck;t[4401]=EquipclAck;t[4421]=EquipJlAck;t[4425]=TransfEquipAck;t[4432]=FmPeifangNtf;t[4433]=ModifyFmPeifangNtf;t[22529]=FateDataAck;t[22533]=FateDrawAck;t[22535]=FateGiftAck;t[61954]=PostCommentAck;t[61956]=PostLikeAck;t[61958]=GetCommentListAck;t[61960]=GetVerifyDataAck;t[8449]=BlackListDataAck;t[8451]=BlackListAddAck;t[8453]=BlackListDelAck;t[8455]=FriendListDataAck;t[8457]=friendListAddAck;t[8459]=friendListAcceptAck;t[8461]=friendListDelAck;t[8462]=FriendApplyListAck;t[8463]=FriendStateListAck;t[8465]=friendSearchAck;t[14081]=GardenInfoAck;t[14083]=GardenUpdateAck;t[14085]=GardenEnvUpdateAck;t[14087]=GardenPlantUpdateAck;t[17154]=StartGatherAck;t[17157]=EndGatherAck;t[17158]=StopGatherAck;t[23808]=GongfaDataNtf;t[23810]=GongfaGraspResp;t[23812]=GongfaTaskResp;t[10497]=GuardNtf;t[10499]=SpeedGuardAck;t[10501]=AwardGuardAck;t[10503]=GoldSpeedGuardAck;t[10504]=NewGuardNtf;t[6657]=GuajiAck;t[12291]=GuardhuluChallengeAck;t[12320]=GuardInspireNtf;t[12322]=GuardInspireAck;t[12324]=GuardhuluTimeAck;t[12325]=GuardPrivateInspireNtf;t[16896]=GuardIslandNtf;t[16897]=GuardIslandStartNtf;t[16898]=GuardIslandEndNtf;t[16899]=GuardIslandObjNtf;t[16900]=GuildBuffNtf;t[16902]=GuardBossAck;t[16913]=JoinGuardIslandAck;t[16915]=GuardIslandAwardNtf;t[16917]=GuildCDNtf;t[16919]=GuardIslandExpNtf;t[16921]=JoinInfIslandAck;t[12033]=GuardInfoAck;t[12035]=GuardEquipAck;t[12036]=GuardOverDueNotice;t[12038]=GuardSellAck;t[12040]=GuardRenewAck;t[12042]=GuardFollowAck;t[17921]=GuildChampionSessionAck;t[17923]=GuildChampionBaomingAck;t[17925]=GuildChampionBattleListAck;t[17927]=GuildChampionBattleRecordAck;t[17929]=GuildChampionSetPositionAck;t[17930]=GuildChampionOpenNotice;t[6144]=GuildNtf;t[6145]=GuildReqNtf;t[6148]=GuildInfListAck;t[6151]=CreateGuildAck;t[6152]=UpdateGuildSelfAck;t[6153]=UpdateGuildInfAck;t[6154]=UpdateGuildChiefAck;t[6156]=OpenGuildAck;t[6158]=GuildMemberListAck;t[6160]=OperateGuildAck;t[6161]=LeaveGuildNtf;t[6163]=OpenJoinGuildAck;t[6165]=OperateJoinGuildAck;t[6167]=AutoJoinGuildLimitAck;t[6168]=JoinNotify;t[6169]=PlayerGuildChangeNtf;t[6171]=ChangeGuildNameAck;t[6173]=ChangeGuildNcAck;t[6174]=UpdateGuildNoticeAck;t[6194]=GuildInfAck;t[6196]=UpgraGuildAck;t[6199]=ConGuildAck;t[6201]=ConGuildRecordAck;t[6224]=GuildMallRecordNtf;t[6225]=GuildMallRandNtf;t[6227]=BuyGuildMallNumAck;t[6240]=GuildTechNtf;t[6241]=ChangeGuildTechNtf;t[6243]=GuildTechAck;t[6256]=GuildTreasureNtf;t[6257]=ModifyGuildTreasureNtf;t[6258]=DelGuildTreasureNtf;t[6260]=GainGuildTreasureAck;t[6261]=GuildTreasureDailyNtf;t[6272]=GuildTaskNtf;t[6274]=GuildTaskStarAwardAck;t[6279]=SubGuildQuestItemAck;t[6281]=GuildQuestAck;t[6282]=GuildQuestNumNtf;t[6284]=HelpGuildQuestAck;t[6286]=FreshGuildQuestStarAck;t[6288]=SubGuildQuestBuyAck;t[6290]=GuildTaskHelpAck;t[6305]=CrossBossHelpAck;t[6306]=CrossBossHelpNtf;t[6307]=GuildGourdNtf;t[20481]=HangUpInfoAck;t[20483]=HangUpRewardAck;t[19457]=HeadFrameInfoAck;t[19458]=HeadFrameActiveNotice;t[19459]=HeadFramePastDueNotice;t[19461]=HeadFrameEquipAck;t[11265]=HeadTitleInfoAck;t[11269]=HeadTitleUpgradeAck;t[9217]=HomeBubbleDataAck;t[9219]=HomeQuestionAck;t[9221]=HomeAnswerAck;t[9223]=HomeLotteryDataAck;t[9225]=HomeLotteryAck;t[9227]=HomeKungDataAck;t[9229]=HomeImpartKungAck;t[9231]=HomeInviteKungListAck;t[9233]=HomeAcceptKungAck;t[9235]=HomeStartKungAck;t[9236]=HomeFinishKungAck;t[9238]=HomePlayerLvAck;t[9240]=HomeWorshipInfoAck;t[9242]=HomeWorshipStartAck;t[9244]=HomeWorshipStopAck;t[9245]=HomeWorshipFinishAck;t[9296]=HomeRunningActivityIdAck;t[22784]=HomeDataNtf;t[22801]=AwardHomeAck;t[7681]=HorseListNtf;t[7684]=RideHorseAck;t[7686]=UseHorseSkillAck;t[7698]=RideLvAck;t[7714]=ActHorseAck;t[7718]=HorseLvAck;t[7728]=HorseComNtf;t[7729]=AddHorseComNtf;t[7730]=ActNewHorseComNtf;t[15360]=TouziNtf;t[15364]=AwardTouziAck;t[15366]=DayAwardTouziAck;t[15367]=NewMallInfoNtf;t[15369]=GetFreeGiftResp;t[15371]=GetOtherGiftResp;t[15372]=NewTouziNtf;t[15373]=TimeGiftNtf;t[15375]=BuyGiftResp;t[15377]=SpecialItemNtf;t[15379]=CustomGiftChoiceResp;t[15380]=CustomGiftChoiceSyn;t[15382]=WxShareDataNtf;t[15385]=WxShareAwardResp;t[5120]=ItemDelNtf;t[5121]=ItemModifyNtf;t[5122]=PackListNtf;t[5123]=PackExpandNtf;t[5125]=UseItemAck;t[5127]=ItemMoveAck;t[5129]=SellAck;t[5137]=MixEngulfingAck;t[5139]=BagUnlockAck;t[5140]=ItemGainPush;t[5142]=SynthesisAck;t[5153]=UseResItemNtf;t[5169]=ShowItemAck;t[5171]=ShowItemInfoAck;t[5173]=ItemQuaUpResp;t[5184]=AwardItemScrNtf;t[4097]=LoginResp;t[4099]=CreateRoleResp;t[4101]=HeartBeatResp;t[4103]=EnterGameResp;t[4104]=ServerTimeResp;t[4112]=BanRoleResp;t[4113]=SysNoticeResp;t[7937]=LotusDataAck;t[7941]=LotusCultivateAck;t[7943]=LotusSeedUseAck;t[17665]=LuheInfoAck;t[17667]=LuheMoveAck;t[17668]=LuheModifyNtf;t[17670]=LuheDecomposeAck;t[17672]=LuheUpdateAck;t[17680]=LuheSynthesisAck;t[17682]=LuheAutoDecomposeAck;t[20993]=MagicDataAck;t[20995]=MagicUpLevelAck;t[20997]=MagicUpStarAck;t[20999]=MagicWearAck;t[21001]=MagicLayAck;t[21003]=MagicLayBuyAck;t[21005]=MagicResonanceInfoAck;t[21007]=MagicResonanteAck;t[21024]=MagicAddExtNtf;t[21025]=ModifyMagicAddExtNtf;t[21027]=MagicAlmightyPieceAck;t[21029]=MagicPluginAck;t[21030]=MagicPluginNtf;t[21040]=MagicLingtaiNtf;t[21042]=UpMagicLingtaiAck;t[5889]=MailBoxAck;t[5891]=MailBoxInfAck;t[5893]=MailDeleteAck;t[5895]=MailAnnexAck;t[5896]=NewMailAck;t[9729]=MallBuyRecordAck;t[9731]=BuyMallWithNumberAck;t[9733]=KfMallBuyRecordNtf;t[9735]=BuyKfMallWithNumberAck;t[9745]=BlackMallAck;t[9747]=BuyBlackMallAck;t[9749]=FreshBlackMallAck;t[4609]=MoveResponse;t[4611]=SetPosistionResponse;t[4612]=JoinNewMapNtf;t[4614]=UserViewAck;t[4615]=MapObjViewAck;t[4616]=ViewportDestroyAck;t[4618]=TeleportAck;t[4619]=UserViewHpAck;t[4620]=UserDeadRelieveNtf;t[4640]=ChangeNameNoti;t[4641]=RoleStatusNtf;t[4642]=MapObjFightNtf;t[4643]=SetSkinNtf;t[16640]=SkillTreeListNoti;t[16641]=ModitySkillTreeNtf;t[16643]=LearnSkillTreeAck;t[16645]=ClearTreeAck;t[14593]=MedalInfoAck;t[14595]=MedalHistoryInfoAck;t[14597]=MedalGetRewardAck;t[14609]=MedalMallRecordNtf;t[14611]=BuyMedalMallNumAck;t[22016]=MijingUnLockNtf;t[22017]=ModifyMijingUnLockNtf;t[22019]=MijingUnLockAck;t[10241]=MonsterSoulInfoAck;t[10243]=MonsterSoulUpdateAck;t[14849]=MonthCardInfoAck;t[14851]=MonthCardGetRewardAck;t[14853]=LifeCardInfoAck;t[14855]=WeekCardInfoAck;t[14857]=ReceiveWeekCardRewardAck;t[11009]=MountainInfoAck;t[11025]=MountainChallengeAck;t[11041]=MountainSweepAck;t[11073]=AwardMountainAck;t[11088]=FmbkInfoNtf;t[11090]=FmbkChallengeAck;t[11092]=FmbkSweepAck;t[22272]=PeakNtf;t[22273]=ModifyPeakNtf;t[22274]=PeakTaskNtf;t[22275]=PeakTestNtf;t[22289]=ChargePeakAck;t[22291]=TestPeakAck;t[22293]=TupoTestAck;t[22295]=AwardTestAck;t[22305]=FinishPeakTaskAck;t[22307]=GainPeakAwardAck;t[22309]=OpenPeakAck;t[15872]=PedlarInfoAck;t[15873]=PedlarBuyAck;t[15874]=PedlarNewNtf;t[15876]=PedlarNewAwardAck;t[19713]=PetDispatchInfoAck;t[19715]=PetDispatchRewardAck;t[19717]=PetDispatchAck;t[7424]=PetDelNtf;t[7425]=PetModifyNtf;t[7426]=PetGainPush;t[7427]=PetPackNtf;t[7428]=PetReputationNtf;t[7429]=FullPetStarNtf;t[7440]=PetFormNtf;t[7442]=PetMoveAck;t[7457]=FreePetAck;t[7461]=PetSpaceNtf;t[7463]=UnlockPetSpaceAck;t[7465]=HatchPetAck;t[7467]=SpeedPetAck;t[7469]=GainPetAck;t[7473]=UpdatePetAck;t[7475]=PetStarAck;t[7477]=PetReputionAck;t[13061]=QuenchMagicAck;t[13063]=QuenchOneKeyMagicAck;t[6913]=GetRankListResp;t[6914]=RankShowPlayerResp;t[6916]=GetShowPlayerResp;t[6918]=GetTarPlayerIpAck;t[15105]=RecharegeMallInfoAck;t[15106]=RecharegeTaskNotify;t[15107]=DailyRechargeDataNtf;t[15109]=DailyRechargeAwardAck;t[15110]=RechargeInfoNtf;t[18433]=RPInfoAck;t[18435]=RPGetAck;t[18437]=RPHistoryAck;t[18439]=RPSendInfo;t[18440]=RPGetTimes;t[20738]=SecSoulTupoAck;t[20740]=SecSoulDataNtf;t[20742]=SecSoulDujieStartAck;t[20743]=SecSoulDujieDamage;t[20744]=SecSoulDujieEnd;t[20746]=SecSoulShieldNtf;t[20748]=SecSoulStartResp;t[20749]=SecSoulEventNtf;t[20751]=SecSoulEventResp;t[20753]=SecSoulTreasureUpResp;t[20755]=SecSoulMakeUpResp;t[20757]=CrossSecSoulSecenesAck;t[20759]=CrossSecSoulBattleRecordAck;t[20761]=CrossSecSoulBattleRecordShowAck;t[20763]=CrossSecSoulChallengeAck;t[20765]=CrossSecSoulSetBattleArrayAck;t[20766]=CrossSecSoulTimeNtf;t[20768]=OpenDongfuResp;t[20770]=DongfuMagicLayResp;t[18177]=SevenInfoAck;t[18179]=SevenUpAck;t[18181]=SevenSpiritLvAck;t[18183]=SevenEffectChooseAck;t[24065]=ShenbingDataNotify;t[24067]=ShenbingOnGoingNotify;t[24069]=ShenbingOprateAck;t[20224]=SimpleTeamDataNtf;t[20226]=SimpleTeamUpdateAvatarAck;t[20240]=TeamElementPropNtf;t[20241]=TeamElementSkillNtf;t[20243]=UseElementSkillAck;t[20244]=SimpleBubbleDataNtf;t[20246]=SimpleBubbleUpdateAck;t[11521]=SkinInfoAck;t[11523]=SkinEquipAck;t[11525]=SkinActiveAck;t[11527]=SkinReceiveAck;t[11529]=SkinUpStarAck;t[13313]=SoulInfoAck;t[13315]=SoulAck;t[13317]=SoulDecomposeAck;t[13319]=SoulUpdateeAck;t[19968]=TanbaoNtf;t[19969]=TanbaoActNtf;t[19970]=TanbaoBuffNtf;t[19985]=TanbaoMoveAck;t[19987]=TanbaoResetLayerAck;t[5632]=TaskInfoNtf;t[5633]=TaskRecordNtf;t[5634]=UpdateTaskRecordNtf;t[5636]=TaskSubmitAck;t[5638]=TaskGiveUpAck;t[5642]=SubQuestItemAck;t[5645]=QuestDgnAck;t[5649]=QuestKillAck;t[5650]=FuncItemRecordNtf;t[13826]=JoinEndlessAck;t[13828]=LeaveTeamDgnAck;t[13829]=EndlessInfNtf;t[13830]=EndlessAwardNtf;t[13832]=RollAwardAck;t[13834]=ViewRollAwardAck;t[13840]=TeamInspireNtf;t[13842]=TeamInspireAck;t[8961]=MyTeamDataAck;t[8963]=TeamListAck;t[8965]=TeamCreateAck;t[8967]=TeamSetCopyIdAck;t[8969]=TeamInviteListAck;t[8970]=TeamInviteNotice;t[8972]=TeamMemberAcceptAck;t[8974]=TeamApplyAck;t[8976]=TeamApplyListAck;t[8978]=TeamApplyAcceptAck;t[8980]=TeamEnterCopyAck;t[8981]=TeamEnterCopyNotice;t[8983]=TeamAcceptEnterCopyAck;t[8984]=TeamEnterFinalNotice;t[8986]=TeamExitAck;t[8988]=TeamChangeCaptainAck;t[8990]=TeamInviteAck;t[8992]=TeamDissolveAck;t[10753]=TitleInfoAck;t[10754]=TitleActiveNotice;t[10755]=TitlePastDueNotice;t[10757]=TitleEquipAck;t[23041]=TongtiangeNtf;t[23043]=TongtiangeBuildResp;t[23045]=TongtiangeAwardResp;t[23047]=TongtiangeExchangeResp;t[23049]=YiShouNtf;t[23051]=YiShouKillResp;t[23053]=YiShouAwardResp;t[23055]=YiShouExchangeResp;t[23057]=QiYuNtf;t[23059]=QiYuDrawResp;t[23061]=QiYuAwardResp;t[23063]=QiYuExchangeResp;t[12801]=TransfListNtf;t[12803]=RoleTransfAck;t[12805]=RoleFinishTransfAck;t[12807]=StartDujieResp;t[16385]=TreasureHuntDataAck;t[16387]=TreasureHuntRecordAck;t[16389]=TreasureHuntDrawAck;t[16391]=TreasureHuntReceiveLuckAck;t[16393]=TreasureHuntRefreshAck;t[16395]=TreasureHuntBuyAck;t[8705]=VipDataAck;t[8707]=VipUseitemAck;t[15616]=WarOrderInfoAck;t[15617]=WarOrderGetRewardAck;t[15618]=WarOrderUpGradeAck;t[15619]=WarOrderShopInfoAck;t[15620]=WarOrderShopBuyAck;t[15621]=WarOrderGetExpBagAck;t[15622]=WarOrderRewardInfoAck;t[15623]=WarOrderTaskInfoAck;t[15624]=WarGetTaskRewardAck;t[15625]=WarBuyLevelAck;t[15770]=WarBuyExpAck;t[17409]=WeaponInfoAck;t[17411]=WeaponUpLevelAck;t[17413]=WeaponStrengthlvAck;t[13569]=XinfaInfoAck;t[13571]=XinfaEquipAck;t[13573]=XinfaDecomposeAck;t[13575]=XinfaUpdateeAck;t[13577]=XinfaUnlockAck;t[13578]=XinfaGongMingAttr};return t}();t.ProtocolAdapter=e})(app||(app={}));var app;(function(t){var s=t.Protocol;var e=function(){function t(){}t.GetMainPanelReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9985;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.RecvPrizeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9986;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.ActEffectReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9987;B.wu32(i,t);s.sm(e,arguments)};t.GetActMainPanelReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14336;B.wu32(i,t);s.sm(e,arguments)};t.RecvActPrizeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=14337;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.GetActRankListReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14342;B.wu32(i,t);s.sm(e,arguments)};t.ZeroBuyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14343;B.wu32(i,t);s.sm(e,arguments)};t.ActDrawReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=14344;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.ActDrawInfoReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14345;B.wu32(i,t);s.sm(e,arguments)};t.ActLimitedBuyTriggerRpt=function(t){var e=s.msg;var i=e.bytes;e.cmd=14348;B.wu8(i,t);s.sm(e,arguments)};t.AmuletDataReq=function(){var t=s.msg;t.cmd=16128;s.sm(t,arguments)};t.AmuletUpdateReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=16132;B.wu16(n,t);B.wu16(n,e);s.sm(i,arguments)};t.Arboretum2InfoReq=function(){var t=s.msg;t.cmd=21248;s.sm(t,arguments)};t.Arboretum2PlantInfoReq=function(){var t=s.msg;t.cmd=21250;s.sm(t,arguments)};t.Arboretum2PlantReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=21252;B.wu8(r,t);B.wu8(r,e);B.wa(r,i,ItemData.w);s.sm(n,arguments)};t.Arboretum2WaterReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=21254;B.wu64(i,t);s.sm(e,arguments)};t.Arboretum2FriendListReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=21256;B.wu8(i,t);s.sm(e,arguments)};t.Arboretum2FriendReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=21258;B.wu64(i,t);s.sm(e,arguments)};t.Arboretum2GuardUpLvlReq=function(){var t=s.msg;t.cmd=21260;s.sm(t,arguments)};t.Arboretum2StewardInfoReq=function(){var t=s.msg;t.cmd=21262;s.sm(t,arguments)};t.Arboretum2StewardSetReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=21264;B.wu32(r,t);B.wu8(r,e);B.wu8(r,i);s.sm(n,arguments)};t.Arboretum2RewardReq=function(){var t=s.msg;t.cmd=21266;s.sm(t,arguments)};t.Arboretum2EnterReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=21268;B.wu8(i,t);s.sm(e,arguments)};t.Arboretum2SetPetReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=21269;B.wu8(n,t);B.wu64(n,e);s.sm(i,arguments)};t.ArboretumInfoReq=function(){var t=s.msg;t.cmd=19200;s.sm(t,arguments)};t.ArboretumAddEnvReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19202;B.wu16(i,t);s.sm(e,arguments)};t.ArboretumPlantReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=19204;B.wu8(r,t);B.wu16(r,e);B.wu32(r,i);s.sm(n,arguments)};t.ArboretumOrderReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=19206;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.ArboretumFosterPetReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=19208;B.wu64(n,t);B.wu16(n,e);s.sm(i,arguments)};t.ArboretumFriendReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19210;B.wu64(i,t);s.sm(e,arguments)};t.ArboretumStealReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=19212;B.wu64(n,t);B.wu16(n,e);s.sm(i,arguments)};t.ArboretumRecordReq=function(){var t=s.msg;t.cmd=19214;s.sm(t,arguments)};t.ArboretumGuardOperateReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=19216;B.wu8(r,t);B.wu32(r,e);B.wu32(r,i);s.sm(n,arguments)};t.ArboretumDevelopReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=19218;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.ArboretumUnlockPetSlotReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19220;B.wu8(i,t);s.sm(e,arguments)};t.ArboretumPetAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19222;B.wu16(i,t);s.sm(e,arguments)};t.ChargeArenaReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11777;B.wu64(i,t);s.sm(e,arguments)};t.ChargePkReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=11808;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.SimpleArenaRecordReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11825;B.wu8(i,t);s.sm(e,arguments)};t.SimpleArenaAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11827;B.wu16(i,t);s.sm(e,arguments)};t.SimpleArenaMatchReq=function(){var t=s.msg;t.cmd=11829;s.sm(t,arguments)};t.SimpleArenaChallengeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11831;B.wu64(i,t);s.sm(e,arguments)};t.AwakeInfoReq=function(){var t=s.msg;t.cmd=12544;s.sm(t,arguments)};t.AwakeGetRewardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12546;B.wu32(i,t);s.sm(e,arguments)};t.BattleShowEndReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6403;B.wu32(i,t);s.sm(e,arguments)};t.BattleEscapeRpt=function(t){var e=s.msg;var i=e.bytes;e.cmd=6465;B.wu32(i,t);s.sm(e,arguments)};t.FreshBossReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8208;B.wa(n,t,B.wu32);B.wu8(n,e);s.sm(i,arguments)};t.JoinBossReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8210;B.wu32(i,t);s.sm(e,arguments)};t.LeaveBossReq=function(){var t=s.msg;t.cmd=8214;s.sm(t,arguments)};t.FocusBossReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8216;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.InspireReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8226;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.BossBelongReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8240;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.ChargeBelongReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8244;B.wu64(i,t);s.sm(e,arguments)};t.RelieveReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8247;B.wu8(i,t);s.sm(e,arguments)};t.BuyBossDailyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8256;B.wu8(i,t);s.sm(e,arguments)};t.DailyTimeSetReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8272;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.EnterBossMapReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8288;B.wu16(i,t);s.sm(e,arguments)};t.LeaveBossMapReq=function(){var t=s.msg;t.cmd=8289;s.sm(t,arguments)};t.CrossBossAwardReq=function(){var t=s.msg;t.cmd=8304;s.sm(t,arguments)};t.WorldBossBagAwardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8308;B.wu8(n,t);B.wa(n,e,B.wu16);s.sm(i,arguments)};t.DevilBossHurtAwardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8315;B.wu8(n,t);B.wu32(n,e);s.sm(i,arguments)};t.AwardBcActReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=18691;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.JoinBcMapReq=function(){var t=s.msg;t.cmd=18704;s.sm(t,arguments)};t.StartBcReq=function(){var t=s.msg;t.cmd=18706;s.sm(t,arguments)};t.AskBcAgree=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=18709;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.LeaveBcReq=function(){var t=s.msg;t.cmd=18711;s.sm(t,arguments)};t.OpenBcInfReq=function(){var t=s.msg;t.cmd=18713;s.sm(t,arguments)};t.ChangeBcNameReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=18720;B.wu8(n,t);B.wls(n,e);s.sm(i,arguments)};t.TransfLeaderBcReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=18723;B.wu64(i,t);s.sm(e,arguments)};t.CreateCombatReq=function(){var t=s.msg;t.cmd=5384;s.sm(t,arguments)};t.ChangeNameReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5393;B.wls(i,t);s.sm(e,arguments)};t.ChangeHuluNameReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5395;B.wu64(n,t);B.wls(n,e);s.sm(i,arguments)};t.UserScoreReq=function(){var t=s.msg;t.cmd=5408;s.sm(t,arguments)};t.UseExpReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=5410;B.wu64(r,t);B.wu16(r,e);B.wu8(r,i);s.sm(n,arguments)};t.GainAwardOnlineReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5424;B.wls(i,t);s.sm(e,arguments)};t.QuickHangUpReq=function(){var t=s.msg;t.cmd=5441;s.sm(t,arguments)};t.QuickHangUpInfoReq=function(){var t=s.msg;t.cmd=5442;s.sm(t,arguments)};t.RecvIdentityPrizeReq=function(){var t=s.msg;t.cmd=5473;s.sm(t,arguments)};t.VisitorModelReq=function(){var t=s.msg;t.cmd=5476;s.sm(t,arguments)};t.CanelAuthReq=function(){var t=s.msg;t.cmd=5477;s.sm(t,arguments)};t.GetRealNamePrize=function(t){var e=s.msg;var i=e.bytes;e.cmd=5479;B.wu32(i,t);s.sm(e,arguments)};t.SetAuthInfoReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5488;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.GetChargeSignReq=function(t,e,i,n){var r=s.msg;var o=r.bytes;r.cmd=5489;B.wls(o,t);B.wls(o,e);B.wu16(o,i);B.wu8(o,n);s.sm(r,arguments)};t.SaveSettingsReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=5504;B.wa(r,t,B.wu32);B.wa(r,e,B.wu32);B.wa(r,i,B.wu32);s.sm(n,arguments)};t.AskAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5509;B.wu32(i,t);s.sm(e,arguments)};t.SetInFightReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5520;B.wa(i,t,B.wu8);s.sm(e,arguments)};t.GainBanPhone=function(){var t=s.msg;t.cmd=5525;s.sm(t,arguments)};t.SectionBattleScoreReq=function(){var t=s.msg;t.cmd=5528;s.sm(t,arguments)};t.CltUseDataRpt=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=5530;B.wu8(r,t);B.wu16(r,e);B.wa(r,i,CltUseDataInfo.w);s.sm(n,arguments)};t.ChartSynthesisReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=21761;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.ChartMagicLayReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=21763;B.wu32(r,t);B.wu8(r,e);B.wu32(r,i);s.sm(n,arguments)};t.ChattingRequest=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=61697;B.wu8(r,t);B.wu64(r,e);B.wls(r,i);s.sm(n,arguments)};t.AwardDailyActReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9474;B.wu8(i,t);s.sm(e,arguments)};t.AwardActPointReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9476;B.wu8(i,t);s.sm(e,arguments)};t.LeaveDailyDgnReq=function(){var t=s.msg;t.cmd=9478;s.sm(t,arguments)};t.PetGemTowerReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9481;B.wu16(i,t);s.sm(e,arguments)};t.JoinMountGodReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9488;B.wu8(i,t);s.sm(e,arguments)};t.DailyInspireReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9494;B.wu8(n,t);B.wu16(n,e);s.sm(i,arguments)};t.AwardMonsterbookReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9505;B.wu32(i,t);s.sm(e,arguments)};t.SweepMonsterbookReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9507;B.wu32(i,t);s.sm(e,arguments)};t.BuyDailyNumReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9520;B.wu8(i,t);s.sm(e,arguments)};t.MissPalaceReq=function(){var t=s.msg;t.cmd=9536;s.sm(t,arguments)};t.JoinMissPalaceReq=function(){var t=s.msg;t.cmd=9538;s.sm(t,arguments)};t.AwardFuncOpenReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9553;B.wu32(i,t);s.sm(e,arguments)};t.AwardAchieveReq=function(){var t=s.msg;t.cmd=9569;s.sm(t,arguments)};t.TaskTowerReq=function(){var t=s.msg;t.cmd=9585;s.sm(t,arguments)};t.TowerAwardReq=function(){var t=s.msg;t.cmd=9588;s.sm(t,arguments)};t.BraveChallengeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9601;B.wu8(i,t);s.sm(e,arguments)};t.AutoBraveChallengeReq=function(){var t=s.msg;t.cmd=9602;s.sm(t,arguments)};t.EliteChallengeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9617;B.wu8(i,t);s.sm(e,arguments)};t.AutoEliteChallengeReq=function(){var t=s.msg;t.cmd=9618;s.sm(t,arguments)};t.SweepEliteChallengeReq=function(){var t=s.msg;t.cmd=9620;s.sm(t,arguments)};t.SignReq=function(){var t=s.msg;t.cmd=9633;s.sm(t,arguments)};t.SignDaysReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9635;B.wu32(i,t);s.sm(e,arguments)};t.DgnSzjdReq=function(){var t=s.msg;t.cmd=9649;s.sm(t,arguments)};t.DgnSzjdStepReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9651;B.wu8(i,t);s.sm(e,arguments)};t.SweepDgnSzjdReq=function(){var t=s.msg;t.cmd=9653;s.sm(t,arguments)};t.DgnNineTowerReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9665;B.wu16(n,t);B.wu16(n,e);s.sm(i,arguments)};t.AwardNineTowerReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9667;B.wu16(n,t);B.wu8(n,e);s.sm(i,arguments)};t.SweepNineTowerReq=function(){var t=s.msg;t.cmd=9669;s.sm(t,arguments)};t.NineTowerBuyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9671;B.wu16(i,t);s.sm(e,arguments)};t.DgnSaveSeventhReq=function(){var t=s.msg;t.cmd=9680;s.sm(t,arguments)};t.SaveSeventhGetBoxReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9684;B.wu32(i,t);s.sm(e,arguments)};t.ResFindBackDataReq=function(){var t=s.msg;t.cmd=9686;s.sm(t,arguments)};t.ResFindBackReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9688;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.SevenDayDataReq=function(){var t=s.msg;t.cmd=9690;s.sm(t,arguments)};t.SevenDayRewardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9692;B.wu8(n,t);B.wu32(n,e);s.sm(i,arguments)};t.DailyDrawReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9694;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.CheckpointReq=function(){var t=s.msg;t.cmd=9698;s.sm(t,arguments)};t.CheckpointAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9700;B.wu32(i,t);s.sm(e,arguments)};t.CaveTreasureBattleReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=9703;B.wu32(r,t);B.wu16(r,e);B.wu8(r,i);s.sm(n,arguments)};t.SecretAreaOpenReq=function(){var t=s.msg;t.cmd=9707;s.sm(t,arguments)};t.SecretAreaDataReq=function(){var t=s.msg;t.cmd=9709;s.sm(t,arguments)};t.SecretAreaAwardReq=function(){var t=s.msg;t.cmd=9711;s.sm(t,arguments)};t.SecretAreaFightReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9713;B.wu32(i,t);s.sm(e,arguments)};t.SecretAreaStartReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9715;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.SSSSSweapReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9718;B.wu32(i,t);s.sm(e,arguments)};t.DialDrawReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9720;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.DialDrawAwardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9723;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.DailyDrawRecvReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9725;B.wu32(i,t);s.sm(e,arguments)};t.GainLayerAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=18948;B.wu16(i,t);s.sm(e,arguments)};t.DilaoLayerReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=18960;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.ResetLayerReq=function(){var t=s.msg;t.cmd=18962;s.sm(t,arguments)};t.ChangeRoleReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=18964;B.wu64(n,t);B.wu64(n,e);s.sm(i,arguments)};t.ChooseDilaoBuffReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=18977;B.wu32(r,t);B.wu16(r,e);B.wu16(r,i);s.sm(n,arguments)};t.RefineDataReq=function(){var t=s.msg;t.cmd=21506;s.sm(t,arguments)};t.RefineStartReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=21508;B.wu32(r,t);B.wu16(r,e);B.wa(r,i,B.wu32);s.sm(n,arguments)};t.BreakRefineReq=function(){var t=s.msg;t.cmd=21510;s.sm(t,arguments)};t.GetRefineAwardReq=function(){var t=s.msg;t.cmd=21512;s.sm(t,arguments)};t.EquipStrenReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=4369;B.wu16(n,t);B.wu64(n,e);s.sm(i,arguments)};t.EquipGemReq=function(t,e,i,n){var r=s.msg;var o=r.bytes;r.cmd=4387;B.wu16(o,t);B.wu64(o,e);B.wu8(o,i);B.wu64(o,n);s.sm(r,arguments)};t.EquipGemLvReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=4389;B.wu16(r,t);B.wu64(r,e);B.wu8(r,i);s.sm(n,arguments)};t.EquipclReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=4400;B.wu64(r,t);B.wu8(r,e);B.wu16(r,i);s.sm(n,arguments)};t.EquipJlReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=4420;B.wu64(n,t);B.wu16(n,e);s.sm(i,arguments)};t.TransfEquipReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=4424;B.wu16(r,t);B.wu64(r,e);B.wu16(r,i);s.sm(n,arguments)};t.UpdatePeifangReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=4434;B.wu16(i,t);s.sm(e,arguments)};t.EquipFmReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=4437;B.wu64(r,t);B.wu16(r,e);B.wu16(r,i);s.sm(n,arguments)};t.FateDataReq=function(){var t=s.msg;t.cmd=22528;s.sm(t,arguments)};t.FateDrawReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=22532;B.wu8(i,t);s.sm(e,arguments)};t.FateGiftReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=22534;B.wu8(i,t);s.sm(e,arguments)};t.PostCommentReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=61953;B.wu8(r,t);B.wu32(r,e);B.wls(r,i);s.sm(n,arguments)};t.PostLikeReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=61955;B.wu8(r,t);B.wu32(r,e);B.wu64(r,i);s.sm(n,arguments)};t.GetCommentListReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=61957;B.wu8(r,t);B.wu32(r,e);B.wu16(r,i);s.sm(n,arguments)};t.GetVerifyDataReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=61959;B.wu8(n,t);B.wu32(n,e);s.sm(i,arguments)};t.BlackListDataReq=function(){var t=s.msg;t.cmd=8448;s.sm(t,arguments)};t.BlackListAddReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8450;B.wu64(i,t);s.sm(e,arguments)};t.BlackListDelReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8452;B.wu8(n,t);B.wu64(n,e);s.sm(i,arguments)};t.FriendListDataReq=function(){var t=s.msg;t.cmd=8454;s.sm(t,arguments)};t.friendListAddReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8456;B.wu64(i,t);s.sm(e,arguments)};t.friendListAcceptReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8458;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.friendListDelReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8460;B.wu64(i,t);s.sm(e,arguments)};t.friendSearchReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8464;B.wls(i,t);s.sm(e,arguments)};t.GardenInfoReq=function(){var t=s.msg;t.cmd=14080;s.sm(t,arguments)};t.GardenUpdateReq=function(){var t=s.msg;t.cmd=14082;s.sm(t,arguments)};t.GardenEnvUpdateReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14084;B.wu16(i,t);s.sm(e,arguments)};t.GardenPlantUpdateReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14086;B.wu8(i,t);s.sm(e,arguments)};t.StartGatherReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=17153;B.wu64(i,t);s.sm(e,arguments)};t.EndGatherReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=17155;B.wu64(i,t);s.sm(e,arguments)};t.StopGatherReq=function(){var t=s.msg;t.cmd=17156;s.sm(t,arguments)};t.GongfaGraspReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23809;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.GongfaTaskReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=23811;B.wu32(i,t);s.sm(e,arguments)};t.SpeedGuardReq=function(){var t=s.msg;t.cmd=10498;s.sm(t,arguments)};t.AwardGuardReq=function(){var t=s.msg;t.cmd=10500;s.sm(t,arguments)};t.GoldSpeedGuardReq=function(){var t=s.msg;t.cmd=10502;s.sm(t,arguments)};t.GuajiReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6656;B.wu32(i,t);s.sm(e,arguments)};t.GuardhuluChallengeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12290;B.wu32(i,t);s.sm(e,arguments)};t.GuardInspireReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12321;B.wu16(i,t);s.sm(e,arguments)};t.GuardhuluTimeReq=function(){var t=s.msg;t.cmd=12323;s.sm(t,arguments)};t.GuardBossReq=function(){var t=s.msg;t.cmd=16901;s.sm(t,arguments)};t.JoinGuardIslandReq=function(){var t=s.msg;t.cmd=16912;s.sm(t,arguments)};t.GuardIslandFightReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=16914;B.wu64(i,t);s.sm(e,arguments)};t.UseGuildBuffReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=16916;B.wu16(i,t);s.sm(e,arguments)};t.LeaveGuardIslandReq=function(){var t=s.msg;t.cmd=16918;s.sm(t,arguments)};t.JoinInfIslandReq=function(){var t=s.msg;t.cmd=16920;s.sm(t,arguments)};t.GuardInfoReq=function(){var t=s.msg;t.cmd=12032;s.sm(t,arguments)};t.GuardEquipReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=12034;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.GuardSellReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12037;B.wu32(i,t);s.sm(e,arguments)};t.GuardRenewReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12039;B.wu32(i,t);s.sm(e,arguments)};t.GuardFollowReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12041;B.wu32(i,t);s.sm(e,arguments)};t.GuildChampionSessionReq=function(){var t=s.msg;t.cmd=17920;s.sm(t,arguments)};t.GuildChampionBaomingReq=function(){var t=s.msg;t.cmd=17922;s.sm(t,arguments)};t.GuildChampionBattleListReq=function(){var t=s.msg;t.cmd=17924;s.sm(t,arguments)};t.GuildChampionBattleRecordReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=17926;B.wu32(i,t);s.sm(e,arguments)};t.GuildChampionSetPositionReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=17928;B.wu8(r,t);B.wu64(r,e);B.wu64(r,i);s.sm(n,arguments)};t.GuildInfListReq=function(){var t=s.msg;t.cmd=6146;s.sm(t,arguments)};t.GuildInfListByNameReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6147;B.wls(i,t);s.sm(e,arguments)};t.JoinGuildReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6149;B.wu64(i,t);s.sm(e,arguments)};t.CreateGuildReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6150;B.wls(i,t);s.sm(e,arguments)};t.OpenGuildReq=function(){var t=s.msg;t.cmd=6155;s.sm(t,arguments)};t.GuildMemberListReq=function(){var t=s.msg;t.cmd=6157;s.sm(t,arguments)};t.OperateGuildReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=6159;B.wu64(r,t);B.wu8(r,e);B.wu8(r,i);s.sm(n,arguments)};t.OpenJoinGuildReq=function(){var t=s.msg;t.cmd=6162;s.sm(t,arguments)};t.OperateJoinGuildReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=6164;B.wa(n,t,B.wu64);B.wu8(n,e);s.sm(i,arguments)};t.AutoJoinGuildLimitReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=6166;B.wu8(n,t);B.wu64(n,e);s.sm(i,arguments)};t.ChangeGuildNameReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6170;B.wls(i,t);s.sm(e,arguments)};t.ChangeGuildNcReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6172;B.wls(i,t);s.sm(e,arguments)};t.GuildInfReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6193;B.wu64(i,t);s.sm(e,arguments)};t.UpgraGuildReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6195;B.wu8(i,t);s.sm(e,arguments)};t.ConGuildReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6198;B.wu8(i,t);s.sm(e,arguments)};t.ConGuildRecordReq=function(){var t=s.msg;t.cmd=6200;s.sm(t,arguments)};t.BuyGuildMallNumReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=6226;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.GuildTechReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=6242;B.wu16(n,t);B.wu16(n,e);s.sm(i,arguments)};t.GainGuildTreasureReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6259;B.wu32(i,t);s.sm(e,arguments)};t.GuildTaskStarAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6273;B.wu8(i,t);s.sm(e,arguments)};t.SubGuildQuestItemReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=6277;B.wu64(r,t);B.wu32(r,e);B.wa(r,i,B.wu64);s.sm(n,arguments)};t.SubGuildQuestItemBuyReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=6278;B.wu64(n,t);B.wu32(n,e);s.sm(i,arguments)};t.GuildQuestReq=function(){var t=s.msg;t.cmd=6280;s.sm(t,arguments)};t.HelpGuildQuestReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6283;B.wu32(i,t);s.sm(e,arguments)};t.FreshGuildQuestStarReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6285;B.wu8(i,t);s.sm(e,arguments)};t.SubGuildQuestBuyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6287;B.wu32(i,t);s.sm(e,arguments)};t.GuildTaskHelpReq=function(){var t=s.msg;t.cmd=6289;s.sm(t,arguments)};t.CrossBossHelpReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6304;B.wu32(i,t);s.sm(e,arguments)};t.HangUpInfoReq=function(){var t=s.msg;t.cmd=20480;s.sm(t,arguments)};t.HangUpRewardReq=function(){var t=s.msg;t.cmd=20482;s.sm(t,arguments)};t.HeadFrameInfoReq=function(){var t=s.msg;t.cmd=19456;s.sm(t,arguments)};t.HeadFrameEquipReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19460;B.wu32(i,t);s.sm(e,arguments)};t.HeadTitleInfoReq=function(){var t=s.msg;t.cmd=11264;s.sm(t,arguments)};t.HeadTitleUpgradeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11268;B.wu32(i,t);s.sm(e,arguments)};t.HomeBubbleDataReq=function(){var t=s.msg;t.cmd=9216;s.sm(t,arguments)};t.HomeQuestionReq=function(){var t=s.msg;t.cmd=9218;s.sm(t,arguments)};t.HomeAnswerReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9220;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.HomeLotteryDataReq=function(){var t=s.msg;t.cmd=9222;s.sm(t,arguments)};t.HomeLotteryReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9224;B.wu8(i,t);s.sm(e,arguments)};t.HomeKungDataReq=function(){var t=s.msg;t.cmd=9226;s.sm(t,arguments)};t.HomeImpartKungReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9228;B.wu64(i,t);s.sm(e,arguments)};t.HomeInviteKungListReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9230;B.wu64(i,t);s.sm(e,arguments)};t.HomeAcceptKungReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9232;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.HomeStartKungReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9234;B.wu64(i,t);s.sm(e,arguments)};t.HomePlayerLvReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9237;B.wu64(i,t);s.sm(e,arguments)};t.HomeWorshipInfoReq=function(){var t=s.msg;t.cmd=9239;s.sm(t,arguments)};t.HomeWorshipStartReq=function(){var t=s.msg;t.cmd=9241;s.sm(t,arguments)};t.HomeWorshipStopReq=function(){var t=s.msg;t.cmd=9243;s.sm(t,arguments)};t.AwardHomeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=22800;B.wu16(i,t);s.sm(e,arguments)};t.RideHorseReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7683;B.wu16(i,t);s.sm(e,arguments)};t.UseHorseSkillReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=7685;B.wu16(r,t);B.wu16(r,e);B.wu16(r,i);s.sm(n,arguments)};t.RideLvReq=function(){var t=s.msg;t.cmd=7697;s.sm(t,arguments)};t.ActHorseReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7713;B.wu16(i,t);s.sm(e,arguments)};t.HorseLvReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7717;B.wu16(i,t);s.sm(e,arguments)};t.AwardTouziReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15363;B.wu32(i,t);s.sm(e,arguments)};t.DayAwardTouziReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15365;B.wu32(i,t);s.sm(e,arguments)};t.GetFreeGiftReq=function(){var t=s.msg;t.cmd=15368;s.sm(t,arguments)};t.GetOtherGiftReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15370;B.wu32(i,t);s.sm(e,arguments)};t.BuyGiftReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15374;B.wu32(i,t);s.sm(e,arguments)};t.ClickGiftSyn=function(t){var e=s.msg;var i=e.bytes;e.cmd=15376;B.wu32(i,t);s.sm(e,arguments)};t.CustomGiftChoiceReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15378;B.wa(i,t,CustomGiftData.w);s.sm(e,arguments)};t.WxShareDataReq=function(){var t=s.msg;t.cmd=15381;s.sm(t,arguments)};t.WxShareInfoSyn=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=15383;B.wu16(n,t);B.wa(n,e,B.wls);s.sm(i,arguments)};t.WxShareAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15384;B.wu16(i,t);s.sm(e,arguments)};t.UseItemReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=5124;B.wu64(r,t);B.wu16(r,e);B.wu64(r,i);s.sm(n,arguments)};t.ItemMoveReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=5126;B.wu16(r,t);B.wu64(r,e);B.wu16(r,i);s.sm(n,arguments)};t.SellReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5128;B.wa(i,t,B.wu64);s.sm(e,arguments)};t.MixEngulfingReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5136;B.wu16(n,t);B.wa(n,e,B.wu64);s.sm(i,arguments)};t.BagUnlockReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5138;B.wu16(n,t);B.wu16(n,e);s.sm(i,arguments)};t.SynthesisReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=5141;B.wu32(r,t);B.wu16(r,e);B.wa(r,i,B.wu64);s.sm(n,arguments)};t.ShowItemReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5168;B.wu16(n,t);B.wu64(n,e);s.sm(i,arguments)};t.ShowItemInfoReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5170;B.wu32(i,t);s.sm(e,arguments)};t.ItemQuaUpReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5172;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.LoginReq=function(t,e,i,n,r){var o=s.msg;var a=o.bytes;o.cmd=4096;B.wls(a,t);B.wu32(a,e);B.wu32(a,i);B.wls(a,n);B.wls(a,r);s.sm(o,arguments)};t.CreateRoleReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=4098;B.wls(i,t);s.sm(e,arguments)};t.HeartBeatReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=4100;B.wu32(i,t);s.sm(e,arguments)};t.EnterGameReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=4102;B.wu64(i,t);s.sm(e,arguments)};t.LotUsDataReq=function(){var t=s.msg;t.cmd=7936;s.sm(t,arguments)};t.LotusCultivateReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=7940;B.wu16(n,t);B.wu32(n,e);s.sm(i,arguments)};t.LotusSeedUseReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7942;B.wu32(i,t);s.sm(e,arguments)};t.LuheInfoReq=function(){var t=s.msg;t.cmd=17664;s.sm(t,arguments)};t.LuheMoveReq=function(t,e,i,n){var r=s.msg;var o=r.bytes;r.cmd=17666;B.wu16(o,t);B.wu64(o,e);B.wu16(o,i);B.wu8(o,n);s.sm(r,arguments)};t.LuheDecomposeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=17669;B.wa(i,t,B.wu64);s.sm(e,arguments)};t.LuheUpdateReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=17671;B.wu64(r,t);B.wu8(r,e);B.wu64(r,i);s.sm(n,arguments)};t.LuheSynthesisReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=17673;B.wu32(r,t);B.wu16(r,e);B.wa(r,i,B.wu64);s.sm(n,arguments)};t.LuheAutoDecomposeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=17681;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.MagicDataReq=function(){var t=s.msg;t.cmd=20992;s.sm(t,arguments)};t.MagicUpLevelReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20994;B.wu32(i,t);s.sm(e,arguments)};t.MagicUpStarReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=20996;B.wu32(n,t);B.wa(n,e,ItemData.w);s.sm(i,arguments)};t.MagicWearReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=20998;B.wu16(r,t);B.wu8(r,e);B.wu32(r,i);s.sm(n,arguments)};t.MagicLayReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=21e3;B.wu32(r,t);B.wu8(r,e);B.wu32(r,i);s.sm(n,arguments)};t.MagicLayBuyReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=21002;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.MagicResonanceInfoReq=function(){var t=s.msg;t.cmd=21004;s.sm(t,arguments)};t.MagicResonateReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=21006;B.wu32(i,t);s.sm(e,arguments)};t.MagicAlmightyPieceReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=21026;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.MagicPluginReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=21028;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.UpMagicLingtaiReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=21041;B.wu8(i,t);s.sm(e,arguments)};t.MailBoxReq=function(){var t=s.msg;t.cmd=5888;s.sm(t,arguments)};t.MailBoxInfReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5890;B.wu32(i,t);s.sm(e,arguments)};t.MailDeleteReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5892;B.wa(i,t,B.wu32);s.sm(e,arguments)};t.MailAnnexReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5894;B.wu32(i,t);s.sm(e,arguments)};t.BuyMallWithNumber=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9730;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.BuyKfMallWithNumber=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9734;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.BlackMallReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9744;B.wu8(i,t);s.sm(e,arguments)};t.BuyBlackMallReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=9746;B.wu8(n,t);B.wu16(n,e);s.sm(i,arguments)};t.FreshBlackMallReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=9748;B.wu8(i,t);s.sm(e,arguments)};t.MoveRequest=function(t){var e=s.msg;var i=e.bytes;e.cmd=4608;B.wa(i,t,Point2D.w);s.sm(e,arguments)};t.StopMove=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=4610;B.wu16(r,t);B.wu16(r,e);B.wu8(r,i);s.sm(n,arguments)};t.JoinNewMapLoadOK=function(){var t=s.msg;t.cmd=4613;s.sm(t,arguments)};t.TeleportReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=4617;B.wu16(i,t);s.sm(e,arguments)};t.LearnSkillTreeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=16642;B.wu32(n,t);B.wu64(n,e);s.sm(i,arguments)};t.ClearTreeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=16644;B.wu64(i,t);s.sm(e,arguments)};t.MedalInfoReq=function(){var t=s.msg;t.cmd=14592;s.sm(t,arguments)};t.MedalHistoryInfoReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=14594;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.MedalGetRewardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14596;B.wu32(i,t);s.sm(e,arguments)};t.MedalMallInfoReq=function(){var t=s.msg;t.cmd=14608;s.sm(t,arguments)};t.BuyMedalMallNumReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=14610;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.MijingUnLockReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=22018;B.wu32(n,t);B.wa(n,e,B.wu8);s.sm(i,arguments)};t.MonsterSoulInfoReq=function(){var t=s.msg;t.cmd=10240;s.sm(t,arguments)};t.MonsterSoulUpdateReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=10242;B.wu32(i,t);s.sm(e,arguments)};t.MonthCardInfoReq=function(){var t=s.msg;t.cmd=14848;s.sm(t,arguments)};t.MonthCardGetRewardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=14850;B.wu8(n,t);B.wu32(n,e);s.sm(i,arguments)};t.LifeCardInfoReq=function(){var t=s.msg;t.cmd=14852;s.sm(t,arguments)};t.WeekCardInfoReq=function(){var t=s.msg;t.cmd=14854;s.sm(t,arguments)};t.ReceiveWeekCardRewardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=14856;B.wu8(i,t);s.sm(e,arguments)};t.MountainChallengeReq=function(){var t=s.msg;t.cmd=11024;s.sm(t,arguments)};t.MountainSweepReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=11040;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.AwardMountainReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11072;B.wu16(i,t);s.sm(e,arguments)};t.FmbkChallengeReq=function(){var t=s.msg;t.cmd=11089;s.sm(t,arguments)};t.FmbkSweepReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11091;B.wu8(i,t);s.sm(e,arguments)};t.ChargePeakReq=function(){var t=s.msg;t.cmd=22288;s.sm(t,arguments)};t.TestPeakReq=function(){var t=s.msg;t.cmd=22290;s.sm(t,arguments)};t.TupoTestReq=function(){var t=s.msg;t.cmd=22292;s.sm(t,arguments)};t.AwardTestReq=function(){var t=s.msg;t.cmd=22294;s.sm(t,arguments)};t.FinishPeakTaskReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=22304;B.wu32(i,t);s.sm(e,arguments)};t.GainPeakAwardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=22306;B.wu8(n,t);B.wu8(n,e);s.sm(i,arguments)};t.OpenPeakReq=function(){var t=s.msg;t.cmd=22308;s.sm(t,arguments)};t.PedlarInfoReq=function(){var t=s.msg;t.cmd=15872;s.sm(t,arguments)};t.PedlarBuyReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=15873;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.PedlarNewAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15875;B.wu32(i,t);s.sm(e,arguments)};t.PetDispatchInfoReq=function(){var t=s.msg;t.cmd=19712;s.sm(t,arguments)};t.PetDispatchRewardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19714;B.wu8(i,t);s.sm(e,arguments)};t.PetDispatchReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=19716;B.wu8(n,t);B.wa(n,e,B.wu16);s.sm(i,arguments)};t.PetMoveReq=function(t,e,i,n){var r=s.msg;var o=r.bytes;r.cmd=7441;B.wu16(o,t);B.wu64(o,e);B.wu16(o,i);B.wu8(o,n);s.sm(r,arguments)};t.FreePetReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7456;B.wa(i,t,B.wu64);s.sm(e,arguments)};t.UnlockPetSpaceReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7462;B.wu8(i,t);s.sm(e,arguments)};t.HatchPetReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=7464;B.wu8(n,t);B.wu64(n,e);s.sm(i,arguments)};t.SpeedPetReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7466;B.wu8(i,t);s.sm(e,arguments)};t.GainPetReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7468;B.wu8(i,t);s.sm(e,arguments)};t.UpdatePetReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=7472;B.wu16(r,t);B.wu64(r,e);B.wu64(r,i);s.sm(n,arguments)};t.PetStarReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=7474;B.wu16(r,t);B.wu64(r,e);B.wa(r,i,ItemData.w);s.sm(n,arguments)};t.PetReputionReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=7476;B.wu64(i,t);s.sm(e,arguments)};t.QuenchMagicReq=function(t,e,i,n){var r=s.msg;var o=r.bytes;r.cmd=13060;B.wu16(o,t);B.wu8(o,e);B.wu8(o,i);B.wu64(o,n);s.sm(r,arguments)};t.QuenchOneKeMagicReq=function(t,e,i,n){var r=s.msg;var o=r.bytes;r.cmd=13062;B.wu16(o,t);B.wu8(o,e);B.wu8(o,i);B.wu32(o,n);s.sm(r,arguments)};t.GetRankListReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6912;B.wu8(i,t);s.sm(e,arguments)};t.GetShowPlayerReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6915;B.wu64(i,t);s.sm(e,arguments)};t.GetTarPlayerIpReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=6917;B.wu64(i,t);s.sm(e,arguments)};t.RecharegeMallInfoReq=function(){var t=s.msg;t.cmd=15104;s.sm(t,arguments)};t.DailyRechargeAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15108;B.wu32(i,t);s.sm(e,arguments)};t.RPInfoReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=18432;B.wu32(i,t);s.sm(e,arguments)};t.RPGetReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=18434;B.wa(i,t,B.wu32);s.sm(e,arguments)};t.RPHistoryReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=18436;B.wu8(i,t);s.sm(e,arguments)};t.RPSendReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=18438;B.wu8(r,t);B.wu32(r,e);B.wu16(r,i);s.sm(n,arguments)};t.SecSoulTupoReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=20737;B.wu64(n,t);B.wu32(n,e);s.sm(i,arguments)};t.SecSoulDataReq=function(){var t=s.msg;t.cmd=20739;s.sm(t,arguments)};t.SecSoulDujieStartReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=20741;B.wu64(n,t);B.wu32(n,e);s.sm(i,arguments)};t.SecSoulUseItemReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=20745;B.wu64(r,t);B.wu32(r,e);B.wu32(r,i);s.sm(n,arguments)};t.SecSoulStartReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=20747;B.wu16(r,t);B.wu64(r,e);B.wu8(r,i);s.sm(n,arguments)};t.SecSoulEventReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=20750;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.SecSoulTreasureUpReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20752;B.wu32(i,t);s.sm(e,arguments)};t.SecSoulMakeUpReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20754;B.wu16(i,t);s.sm(e,arguments)};t.CrossSecSoulSecenesReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20756;B.wa(i,t,B.wu8);s.sm(e,arguments)};t.CrossSecSoulBattleRecordReq=function(){var t=s.msg;t.cmd=20758;s.sm(t,arguments)};t.CrossSecSoulBattleRecordShowReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20760;B.wu8(i,t);s.sm(e,arguments)};t.CrossSecSoulChallengeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=20762;B.wu8(n,t);B.wa(n,e,B.wu8);s.sm(i,arguments)};t.CrossSecSoulSetBattleArrayReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=20764;B.wu8(n,t);B.wa(n,e,B.wu8);s.sm(i,arguments)};t.OpenDongfuReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20767;B.wu16(i,t);s.sm(e,arguments)};t.DongfuMagicLayReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=20769;B.wu16(r,t);B.wu8(r,e);B.wu32(r,i);s.sm(n,arguments)};t.SevenInfoReq=function(){var t=s.msg;t.cmd=18176;s.sm(t,arguments)};t.SevenUpReq=function(){var t=s.msg;t.cmd=18178;s.sm(t,arguments)};t.SevenSpiritLvReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=18180;B.wu8(i,t);s.sm(e,arguments)};t.SevenEffectChooseReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=18182;B.wu8(r,t);B.wu8(r,e);B.wu8(r,i);s.sm(n,arguments)};t.ShenbingDataReq=function(){var t=s.msg;t.cmd=24064;s.sm(t,arguments)};t.ShenbingOnGoingReq=function(){var t=s.msg;t.cmd=24066;s.sm(t,arguments)};t.ShenbingOprateReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=24068;B.wu8(n,t);B.wu32(n,e);s.sm(i,arguments)};t.SimpleTeamUpdateAvatarReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20225;B.wu32(i,t);s.sm(e,arguments)};t.UseElementSkillReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20242;B.wu32(i,t);s.sm(e,arguments)};t.SimpleBubbleUpdateReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=20245;B.wu32(i,t);s.sm(e,arguments)};t.SkinInfoReq=function(){var t=s.msg;t.cmd=11520;s.sm(t,arguments)};t.SkinEquipReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=11522;B.wu32(r,t);B.wu8(r,e);B.wu8(r,i);s.sm(n,arguments)};t.SkinActiveReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=11524;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.SkinReceiveReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11526;B.wa(i,t,B.wu64);s.sm(e,arguments)};t.SkinUpStarReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=11528;B.wu32(i,t);s.sm(e,arguments)};t.SoulInfoReq=function(){var t=s.msg;t.cmd=13312;s.sm(t,arguments)};t.SoulEquipReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=13314;B.wu64(r,t);B.wu8(r,e);B.wu64(r,i);s.sm(n,arguments)};t.SoulDecomposeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=13316;B.wa(i,t,B.wu64);s.sm(e,arguments)};t.SoulUpdateReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=13318;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.TanbaoMoveReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=19984;B.wu16(i,t);s.sm(e,arguments)};t.TanbaoResetLayerReq=function(){var t=s.msg;t.cmd=19986;s.sm(t,arguments)};t.TaskSubmit=function(t){var e=s.msg;var i=e.bytes;e.cmd=5635;B.wu32(i,t);s.sm(e,arguments)};t.TaskGiveUp=function(t){var e=s.msg;var i=e.bytes;e.cmd=5637;B.wu32(i,t);s.sm(e,arguments)};t.TaskNpcTalk=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5639;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.SubQuestItemReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5640;B.wu32(n,t);B.wa(n,e,B.wu64);s.sm(i,arguments)};t.GuideTaskReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5643;B.wu32(i,t);s.sm(e,arguments)};t.QuestDgnReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=5644;B.wu32(n,t);B.wu8(n,e);s.sm(i,arguments)};t.QuestKillReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=5648;B.wu32(i,t);s.sm(e,arguments)};t.JoinEndlessReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=13825;B.wu8(i,t);s.sm(e,arguments)};t.LeaveTeamDgnReq=function(){var t=s.msg;t.cmd=13827;s.sm(t,arguments)};t.RollAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=13831;B.wu8(i,t);s.sm(e,arguments)};t.ViewRollAwardReq=function(){var t=s.msg;t.cmd=13833;s.sm(t,arguments)};t.TeamInspireReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=13841;B.wu16(i,t);s.sm(e,arguments)};t.MyTeamDataReq=function(){var t=s.msg;t.cmd=8960;s.sm(t,arguments)};t.TeamListReq=function(){var t=s.msg;t.cmd=8962;s.sm(t,arguments)};t.TeamCreateReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8964;B.wu32(i,t);s.sm(e,arguments)};t.TeamSetCopyIdReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8966;B.wu32(i,t);s.sm(e,arguments)};t.TeamInviteListReq=function(){var t=s.msg;t.cmd=8968;s.sm(t,arguments)};t.TeamMemberAcceptReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8971;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.TeamApplyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8973;B.wu64(i,t);s.sm(e,arguments)};t.TeamApplyListReq=function(){var t=s.msg;t.cmd=8975;s.sm(t,arguments)};t.TeamApplyAcceptReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=8977;B.wu8(n,t);B.wu64(n,e);s.sm(i,arguments)};t.TeamEnterCopyReq=function(){var t=s.msg;t.cmd=8979;s.sm(t,arguments)};t.TeamAcceptEnterCopyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8982;B.wu8(i,t);s.sm(e,arguments)};t.TeamExitReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8985;B.wu64(i,t);s.sm(e,arguments)};t.TeamChangeCaptainReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8987;B.wu64(i,t);s.sm(e,arguments)};t.TeamInviteReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8989;B.wu64(i,t);s.sm(e,arguments)};t.TeamDissolveReq=function(){var t=s.msg;t.cmd=8991;s.sm(t,arguments)};t.TitleInfoReq=function(){var t=s.msg;t.cmd=10752;s.sm(t,arguments)};t.TitleEquipReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=10756;B.wu32(i,t);s.sm(e,arguments)};t.TongtiangeDataReq=function(){var t=s.msg;t.cmd=23040;s.sm(t,arguments)};t.TongtiangeBuildReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23042;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.TongtiangeAwardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23044;B.wu8(n,t);B.wu32(n,e);s.sm(i,arguments)};t.TongtiangeExchangeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23046;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.YiShouDataReq=function(){var t=s.msg;t.cmd=23048;s.sm(t,arguments)};t.YiShouKillReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23050;B.wu32(n,t);B.wu32(n,e);s.sm(i,arguments)};t.YiShouAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=23052;B.wu32(i,t);s.sm(e,arguments)};t.YiShouExchangeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23054;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.QiYuDataReq=function(){var t=s.msg;t.cmd=23056;s.sm(t,arguments)};t.QiYuDrawReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=23058;B.wu32(i,t);s.sm(e,arguments)};t.QiYuAwardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=23060;B.wu32(i,t);s.sm(e,arguments)};t.QiYuExchangeReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=23062;B.wu32(n,t);B.wu16(n,e);s.sm(i,arguments)};t.RoleTransfReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12802;B.wu16(i,t);s.sm(e,arguments)};t.RoleFinishTransfReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12804;B.wu16(i,t);s.sm(e,arguments)};t.StartDujieReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12806;B.wu32(i,t);s.sm(e,arguments)};t.DujieResultSyn=function(t){var e=s.msg;var i=e.bytes;e.cmd=12808;B.wu8(i,t);s.sm(e,arguments)};t.DujieTeleportReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=12809;B.wu32(i,t);s.sm(e,arguments)};t.TreasureHuntDataReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=16384;B.wu16(i,t);s.sm(e,arguments)};t.TreasureHuntRecordReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=16386;B.wu16(i,t);s.sm(e,arguments)};t.TreasureHuntDrawReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=16388;B.wu16(n,t);B.wu16(n,e);s.sm(i,arguments)};t.TreasureHuntReceiveLuckReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=16390;B.wu16(n,t);B.wu8(n,e);s.sm(i,arguments)};t.TreasureHuntRefreshReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=16392;B.wu16(n,t);B.wu16(n,e);s.sm(i,arguments)};t.TreasureHuntBuyReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=16394;B.wu8(n,t);B.wu16(n,e);s.sm(i,arguments)};t.VipDataReq=function(){var t=s.msg;t.cmd=8704;s.sm(t,arguments)};t.VipUseItemReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=8706;B.wu32(i,t);s.sm(e,arguments)};t.WarOrderInfoReq=function(){var t=s.msg;t.cmd=15616;s.sm(t,arguments)};t.WarOrderGetRewardReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=15617;B.wu32(n,t);B.wa(n,e,B.wu8);s.sm(i,arguments)};t.WarOrderUpGradeReq=function(){var t=s.msg;t.cmd=15618;s.sm(t,arguments)};t.WarOrderShopInfoReq=function(){var t=s.msg;t.cmd=15619;s.sm(t,arguments)};t.WarOrderShopBuyReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15620;B.wu32(i,t);s.sm(e,arguments)};t.WarOrderGetExpBagReq=function(){var t=s.msg;t.cmd=15621;s.sm(t,arguments)};t.WarOrderRewardInfoReq=function(){var t=s.msg;t.cmd=15622;s.sm(t,arguments)};t.WarOrderTaskInfoReq=function(){var t=s.msg;t.cmd=15623;s.sm(t,arguments)};t.WarGetTaskRewardReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15624;B.wu32(i,t);s.sm(e,arguments)};t.WarBuyLevelReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=15625;B.wu32(i,t);s.sm(e,arguments)};t.WarBuyExpReq=function(){var t=s.msg;t.cmd=15626;s.sm(t,arguments)};t.WeaponInfoReq=function(){var t=s.msg;t.cmd=17408;s.sm(t,arguments)};t.WeaponUpLevel=function(t){var e=s.msg;var i=e.bytes;e.cmd=17410;B.wu8(i,t);s.sm(e,arguments)};t.WeaponStrengthlv=function(t){var e=s.msg;var i=e.bytes;e.cmd=17412;B.wu8(i,t);s.sm(e,arguments)};t.XinfaInfoReq=function(){var t=s.msg;t.cmd=13568;s.sm(t,arguments)};t.XinfaEquipReq=function(t,e,i){var n=s.msg;var r=n.bytes;n.cmd=13570;B.wu64(r,t);B.wu8(r,e);B.wu64(r,i);s.sm(n,arguments)};t.XinfaDecomposeReq=function(t){var e=s.msg;var i=e.bytes;e.cmd=13572;B.wa(i,t,B.wu64);s.sm(e,arguments)};t.XinfaUpdateReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=13574;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.XinfaUnlockReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=13576;B.wu64(n,t);B.wu8(n,e);s.sm(i,arguments)};t.XinfaDelteRedPointReq=function(t,e){var i=s.msg;var n=i.bytes;i.cmd=13579;B.wu64(n,t);B.wa(n,e,B.wu32);s.sm(i,arguments)};return t}();t.ProtocolRequest=e})(app||(app={}));var app;(function(t){var e=function(){function t(){}t.ActivityStartTimeAck=9984;t.GetMainPanelResp=9985;t.RecvPrizeResp=9986;t.ActEffectResp=9987;t.ActOpenNoti=9988;t.RedTipsNoti=9989;t.ShowIconNoti=9990;t.GetActMainPanelResp=14336;t.RecvActPrizeResp=14337;t.ActRedTipsNoti=14338;t.ActShowIconNoti=14339;t.OnlineActTimeNoti=14340;t.FirstChargeNoti=14341;t.GetActRankListResp=14342;t.ZeroBuyResp=14343;t.ActDrawResp=14344;t.ActDrawInfoResp=14345;t.ActDrawCountNtf=14346;t.ActLimitedBuyDataNtf=14347;t.AmuletDataAck=16129;t.AmuletUpdateAck=16133;t.Arboretum2Ntf=21249;t.Arboretum2PlantNtf=21251;t.Arboretum2PlantAck=21253;t.Arboretum2WaterAck=21255;t.Arboretum2FricendListAck=21257;t.Arboretum2FriendAck=21259;t.Arboretum2GuardUpLvAck=21261;t.Arboretum2StewardInfoNtf=21263;t.Arboretum2StewardSetNtf=21265;t.Arboretum2RewardAck=21267;t.Arboretum2SetPetAck=21270;t.ArboretumNtf=19201;t.ArboretumAddEnvAck=19203;t.ArboretumPlantAck=19205;t.ArboretumOrderAck=19207;t.ArboretumFosterPetAck=19209;t.ArboretumFriendAck=19211;t.ArboretumStealAck=19213;t.ArboretumRecordAck=19215;t.ArboretumGuardOperateAck=19217;t.ArboretumDevelopAck=19219;t.ArboretumUnlockPetSlotAck=19221;t.ArboretumPetAwardtAck=19223;t.ArboretumPetAwardtNtf=19224;t.ChargeArenaAck=11778;t.ChargePkAck=11809;t.SimpleArenaDataNtf=11824;t.SimpleArenaRecordAck=11826;t.SimpleArenaAwardAck=11828;t.SimpleArenaMatchAck=11830;t.SimpleArenaChallengeAck=11832;t.AwakInfoAck=12545;t.AwakGetRewardAck=12547;t.BattleStartNtf=6400;t.BattleMonsterNtf=6401;t.BattleEndNtf=6402;t.BattleAwardNtf=6404;t.BattleRecordNtf=6405;t.UseSkillStartNtf=6416;t.UseSkillEndNtf=6417;t.TrigMasterSkillNtf=6418;t.UseBackNtf=6419;t.HpChangeNtf=6432;t.BuffChangeNtf=6433;t.CallSummonNtf=6434;t.EndTimeSummonNtf=6435;t.BattleAttributeNoti=6448;t.BattleSkillCD=6449;t.BattleReportStream=6464;t.BossDailyNtf=8192;t.BossDailyModifyNtf=8193;t.BossFocusNtf=8194;t.FightBossNtf=8195;t.BossRobotNtf=8196;t.BossRobotStateNtf=8197;t.BossDailyVipNtf=8198;t.FreshBossAck=8209;t.JoinBossAck=8211;t.BossHurtNtf=8212;t.LeaveBossAck=8215;t.FocusBossAck=8217;t.BossAliveNtf=8218;t.InspireNtf=8225;t.InspireAck=8227;t.BossBelongNtf=8241;t.WorldHostilityNtf=8242;t.WorldBelongNtf=8243;t.ChargeBelongAck=8245;t.ChargeBelongNtf=8246;t.RelieveAck=8248;t.BuyBossDailyAck=8257;t.DailyTimeSetNtf=8273;t.CrossGroupNtf=8290;t.StateFightNtf=8291;t.IceWorldNtf=8292;t.IceWorldKickNtf=8293;t.IceWorldBagNtf=8294;t.CrossBossAwardNtf=8305;t.WorldBossBagAllNtf=8306;t.WorldBossBagAddNtf=8307;t.WorldBossBagAwardAck=8309;t.BossFreshInfoNewNtf=8310;t.KingBossFreshInfoNewNtf=8311;t.KingBossKillListNtf=8312;t.KingBossRoleSizeNtf=8313;t.DevilBossRoleAndHurtNtf=8314;t.DevilBossHurtAwardAck=8316;t.DevilBossDataNtf=8317;t.BossClientTipsNtf=8318;t.BtCompanionNtf=18688;t.BtCompanionModifyNtf=18689;t.NoBtCompanionNtf=18690;t.AwardBcActAck=18692;t.JoinBcMapAck=18705;t.StartBcAck=18707;t.AskBcReq=18708;t.AskBcResultNtf=18710;t.LeaveBcAck=18712;t.OpenBcInfAck=18714;t.ChangeBcNameAck=18721;t.ChangeBcNtf=18722;t.TransfLeaderBcAck=18724;t.AttributeNoti=5376;t.LevChangeNoti=5377;t.AddExpNoti=5378;t.RoleDataNoti=5379;t.ResourceNoti=5380;t.RoleModifyNtf=5381;t.TransfChangeNoti=5382;t.RealNamePrizeNoti=5383;t.CreateCombatAck=5385;t.ChangeNameCDNtf=5392;t.ChangeNameResp=5394;t.ChangeHuluNameAck=5396;t.UserScoreResp=5409;t.UseExpAck=5411;t.GainAwardOnlineAck=5425;t.GainAwardItemNtf=5426;t.OffLineAwardItemNtf=5440;t.QuackHangUpInfoAck=5443;t.StatusItemNtf=5456;t.IdentityAuthDataNoti=5472;t.RecvIdentityPrizeResp=5474;t.IdentityAuthTimeNoti=5475;t.IdentityAuthKickNoti=5478;t.GetChargeSignResp=5490;t.SaveSettingsAck=5505;t.SaveSettingsNoti=5506;t.AskAwardNtf=5510;t.SetInFightAck=5521;t.GainBanPhoneAck=5526;t.CombatAddExpNoti=5527;t.SectionBattleScoreAck=5529;t.CltUseDataNtf=5531;t.ChartDataNtf=21760;t.ChartSynthesisResp=21762;t.ChartMagicLayResp=21764;t.ChattingResponse=61698;t.ChattingLangParamResponse=61699;t.SysMsgNtf=61700;t.SysMsgParamNtf=61701;t.SysNoticeParamNtf=61702;t.SysNewNoticeParamNtf=61703;t.DialogLangParamNtf=61704;t.SysMsgStringNtf=61705;t.BossAIMsgNtf=61712;t.RoleArenaRecordNtf=61713;t.AddRoleArenaRecordNtf=61714;t.DailyActNtf=9472;t.DailyActModifyNtf=9473;t.AwardDailyActAck=9475;t.AwardActPointAck=9477;t.RoleCDModifyNtf=9479;t.PetGemTowerNtf=9480;t.PetGemTowerAck=9482;t.JoinMountGodAck=9489;t.DailyInspireNtf=9493;t.DailyInspireAck=9495;t.MonsterbookNtf=9504;t.AwardMonsterbookAck=9506;t.SweepMonsterbookAck=9508;t.BuyDailyNumAck=9521;t.MissPalaceAck=9537;t.JoinMissPalaceAck=9539;t.MissPalaceExpNtf=9540;t.FuncOpenNtf=9552;t.AwardFuncOpenAck=9554;t.AchieveInfNtf=9568;t.AwardAchieveAck=9570;t.TaskTowerNtf=9584;t.TaskTowerAck=9586;t.TowerAwardNtf=9587;t.TowerAwardAck=9589;t.BraveChallengeNtf=9600;t.BraveChallengeAck=9603;t.EliteChallengeNtf=9616;t.EliteChallengeAck=9619;t.SweepEliteChallengeAck=9621;t.SignNtf=9632;t.SignAck=9634;t.SignDaysAck=9636;t.DgnSzjdSweepNtf=9648;t.DgnSzjdAck=9650;t.DgnSzjdStepNtf=9652;t.SweepDgnSzjdAck=9654;t.DgnNineTowerNtf=9664;t.DgnNineTowerAck=9666;t.AwardNineTowerAck=9668;t.SweepNineTowerAck=9670;t.NineTowerBuyAck=9672;t.DgnSaveSeventhAck=9681;t.SaveSeventhHPNotice=9682;t.SaveSeventhAddBoxNotice=9683;t.SaveSeventhGetBoxAck=9685;t.ResFindBackDataAck=9687;t.ResFindBackAck=9689;t.SevenDayDataAck=9691;t.SevenDayRewardAck=9693;t.DailyDrawResp=9695;t.DailyDrawDataNtf=9696;t.CheckpointDataNtf=9697;t.CheckpointAck=9699;t.CheckpointAwardAck=9701;t.CaveTreasureDataNtf=9702;t.CaveTreasureBattleAck=9704;t.SecretAreaOpenNtf=9708;t.SecretAreaDataAck=9710;t.SecretAreaAwardResp=9712;t.SecretAreaFightResp=9714;t.SecretAreaStartResp=9716;t.SSSSGradeInfoNtf=9717;t.SSSSSweapAck=9719;t.DialDrawResp=9721;t.DialDrawDataNtf=9722;t.DialDrawAwardResp=9724;t.DailyDrawRecvResp=9726;t.DilaoNtf=18944;t.DilaoCombatNtf=18945;t.DilaoBuffNtf=18946;t.GainLayerAwardAck=18949;t.DilaoLayerAck=18961;t.ResetLayerAck=18963;t.ChangeRoleAck=18965;t.ChooseDilaoBuffNtf=18976;t.ChooseDilaoBuffAck=18978;t.AlchemistNtf=21504;t.PrescriptionNtf=21505;t.RefineDataNtf=21507;t.RefineStartResp=21509;t.BreakRefineResp=21511;t.GetRefineAwardResp=21513;t.EveryRefineNtf=21514;t.EquipStrenAck=4370;t.EquipGemAck=4388;t.EquipGemLvAck=4390;t.EquipclAck=4401;t.EquipJlAck=4421;t.TransfEquipAck=4425;t.FmPeifangNtf=4432;t.ModifyFmPeifangNtf=4433;t.FateDataAck=22529;t.FateDrawAck=22533;t.FateGiftAck=22535;t.PostCommentAck=61954;t.PostLikeAck=61956;t.GetCommentListAck=61958;t.GetVerifyDataAck=61960;t.BlackListDataAck=8449;t.BlackListAddAck=8451;t.BlackListDelAck=8453;t.FriendListDataAck=8455;t.friendListAddAck=8457;t.friendListAcceptAck=8459;t.friendListDelAck=8461;t.FriendApplyListAck=8462;t.FriendStateListAck=8463;t.friendSearchAck=8465;t.GardenInfoAck=14081;t.GardenUpdateAck=14083;t.GardenEnvUpdateAck=14085;t.GardenPlantUpdateAck=14087;t.StartGatherAck=17154;t.EndGatherAck=17157;t.StopGatherAck=17158;t.GongfaDataNtf=23808;t.GongfaGraspResp=23810;t.GongfaTaskResp=23812;t.GuardNtf=10497;t.SpeedGuardAck=10499;t.AwardGuardAck=10501;t.GoldSpeedGuardAck=10503;t.NewGuardNtf=10504;t.GuajiAck=6657;t.GuardhuluChallengeAck=12291;t.GuardInspireNtf=12320;t.GuardInspireAck=12322;t.GuardhuluTimeAck=12324;t.GuardPrivateInspireNtf=12325;t.GuardIslandNtf=16896;t.GuardIslandStartNtf=16897;t.GuardIslandEndNtf=16898;t.GuardIslandObjNtf=16899;t.GuildBuffNtf=16900;t.GuardBossAck=16902;t.JoinGuardIslandAck=16913;t.GuardIslandAwardNtf=16915;t.GuildCDNtf=16917;t.GuardIslandExpNtf=16919;t.JoinInfIslandAck=16921;t.GuardInfoAck=12033;t.GuardEquipAck=12035;t.GuardOverDueNotice=12036;t.GuardSellAck=12038;t.GuardRenewAck=12040;t.GuardFollowAck=12042;t.GuildChampionSessionAck=17921;t.GuildChampionBaomingAck=17923;t.GuildChampionBattleListAck=17925;t.GuildChampionBattleRecordAck=17927;t.GuildChampionSetPositionAck=17929;t.GuildChampionOpenNotice=17930;t.GuildNtf=6144;t.GuildReqNtf=6145;t.GuildInfListAck=6148;t.CreateGuildAck=6151;t.UpdateGuildSelfAck=6152;t.UpdateGuildInfAck=6153;t.UpdateGuildChiefAck=6154;t.OpenGuildAck=6156;t.GuildMemberListAck=6158;t.OperateGuildAck=6160;t.LeaveGuildNtf=6161;t.OpenJoinGuildAck=6163;t.OperateJoinGuildAck=6165;t.AutoJoinGuildLimitAck=6167;t.JoinNotify=6168;t.PlayerGuildChangeNtf=6169;t.ChangeGuildNameAck=6171;t.ChangeGuildNcAck=6173;t.UpdateGuildNoticeAck=6174;t.GuildInfAck=6194;t.UpgraGuildAck=6196;t.ConGuildAck=6199;t.ConGuildRecordAck=6201;t.GuildMallRecordNtf=6224;t.GuildMallRandNtf=6225;t.BuyGuildMallNumAck=6227;t.GuildTechNtf=6240;t.ChangeGuildTechNtf=6241;t.GuildTechAck=6243;t.GuildTreasureNtf=6256;t.ModifyGuildTreasureNtf=6257;t.DelGuildTreasureNtf=6258;t.GainGuildTreasureAck=6260;t.GuildTreasureDailyNtf=6261;t.GuildTaskNtf=6272;t.GuildTaskStarAwardAck=6274;t.SubGuildQuestItemAck=6279;t.GuildQuestAck=6281;t.GuildQuestNumNtf=6282;t.HelpGuildQuestAck=6284;t.FreshGuildQuestStarAck=6286;t.SubGuildQuestBuyAck=6288;t.GuildTaskHelpAck=6290;t.CrossBossHelpAck=6305;t.CrossBossHelpNtf=6306;t.GuildGourdNtf=6307;t.HangUpInfoAck=20481;t.HangUpRewardAck=20483;t.HeadFrameInfoAck=19457;t.HeadFrameActiveNotice=19458;t.HeadFramePastDueNotice=19459;t.HeadFrameEquipAck=19461;t.HeadTitleInfoAck=11265;t.HeadTitleUpgradeAck=11269;t.HomeBubbleDataAck=9217;t.HomeQuestionAck=9219;t.HomeAnswerAck=9221;t.HomeLotteryDataAck=9223;t.HomeLotteryAck=9225;t.HomeKungDataAck=9227;t.HomeImpartKungAck=9229;t.HomeInviteKungListAck=9231;t.HomeAcceptKungAck=9233;t.HomeStartKungAck=9235;t.HomeFinishKungAck=9236;t.HomePlayerLvAck=9238;t.HomeWorshipInfoAck=9240;t.HomeWorshipStartAck=9242;t.HomeWorshipStopAck=9244;t.HomeWorshipFinishAck=9245;t.HomeRunningActivityIdAck=9296;t.HomeDataNtf=22784;t.AwardHomeAck=22801;t.HorseListNtf=7681;t.RideHorseAck=7684;t.UseHorseSkillAck=7686;t.RideLvAck=7698;t.ActHorseAck=7714;t.HorseLvAck=7718;t.HorseComNtf=7728;t.AddHorseComNtf=7729;t.ActNewHorseComNtf=7730;t.TouziNtf=15360;t.AwardTouziAck=15364;t.DayAwardTouziAck=15366;t.NewMallInfoNtf=15367;t.GetFreeGiftResp=15369;t.GetOtherGiftResp=15371;t.NewTouziNtf=15372;t.TimeGiftNtf=15373;t.BuyGiftResp=15375;t.SpecialItemNtf=15377;t.CustomGiftChoiceResp=15379;t.CustomGiftChoiceSyn=15380;t.WxShareDataNtf=15382;t.WxShareAwardResp=15385;t.ItemDelNtf=5120;t.ItemModifyNtf=5121;t.PackListNtf=5122;t.PackExpandNtf=5123;t.UseItemAck=5125;t.ItemMoveAck=5127;t.SellAck=5129;t.MixEngulfingAck=5137;t.BagUnlockAck=5139;t.ItemGainPush=5140;t.SynthesisAck=5142;t.UseResItemNtf=5153;t.ShowItemAck=5169;t.ShowItemInfoAck=5171;t.ItemQuaUpResp=5173;t.AwardItemScrNtf=5184;t.LoginResp=4097;t.CreateRoleResp=4099;t.HeartBeatResp=4101;t.EnterGameResp=4103;t.ServerTimeResp=4104;t.BanRoleResp=4112;t.SysNoticeResp=4113;t.LotusDataAck=7937;t.LotusCultivateAck=7941;t.LotusSeedUseAck=7943;t.LuheInfoAck=17665;t.LuheMoveAck=17667;t.LuheModifyNtf=17668;t.LuheDecomposeAck=17670;t.LuheUpdateAck=17672;t.LuheSynthesisAck=17680;t.LuheAutoDecomposeAck=17682;t.MagicDataAck=20993;t.MagicUpLevelAck=20995;t.MagicUpStarAck=20997;t.MagicWearAck=20999;t.MagicLayAck=21001;t.MagicLayBuyAck=21003;t.MagicResonanceInfoAck=21005;t.MagicResonanteAck=21007;t.MagicAddExtNtf=21024;t.ModifyMagicAddExtNtf=21025;t.MagicAlmightyPieceAck=21027;t.MagicPluginAck=21029;t.MagicPluginNtf=21030;t.MagicLingtaiNtf=21040;t.UpMagicLingtaiAck=21042;t.MailBoxAck=5889;t.MailBoxInfAck=5891;t.MailDeleteAck=5893;t.MailAnnexAck=5895;t.NewMailAck=5896;t.MallBuyRecordAck=9729;t.BuyMallWithNumberAck=9731;t.KfMallBuyRecordNtf=9733;t.BuyKfMallWithNumberAck=9735;t.BlackMallAck=9745;t.BuyBlackMallAck=9747;t.FreshBlackMallAck=9749;t.MoveResponse=4609;t.SetPosistionResponse=4611;t.JoinNewMapNtf=4612;t.UserViewAck=4614;t.MapObjViewAck=4615;t.ViewportDestroyAck=4616;t.TeleportAck=4618;t.UserViewHpAck=4619;t.UserDeadRelieveNtf=4620;t.ChangeNameNoti=4640;t.RoleStatusNtf=4641;t.MapObjFightNtf=4642;t.SetSkinNtf=4643;t.SkillTreeListNoti=16640;t.ModitySkillTreeNtf=16641;t.LearnSkillTreeAck=16643;t.ClearTreeAck=16645;t.MedalInfoAck=14593;t.MedalHistoryInfoAck=14595;t.MedalGetRewardAck=14597;t.MedalMallRecordNtf=14609;t.BuyMedalMallNumAck=14611;t.MijingUnLockNtf=22016;t.ModifyMijingUnLockNtf=22017;t.MijingUnLockAck=22019;t.MonsterSoulInfoAck=10241;t.MonsterSoulUpdateAck=10243;t.MonthCardInfoAck=14849;t.MonthCardGetRewardAck=14851;t.LifeCardInfoAck=14853;t.WeekCardInfoAck=14855;t.ReceiveWeekCardRewardAck=14857;t.MountainInfoAck=11009;t.MountainChallengeAck=11025;t.MountainSweepAck=11041;t.AwardMountainAck=11073;t.FmbkInfoNtf=11088;t.FmbkChallengeAck=11090;t.FmbkSweepAck=11092;t.PeakNtf=22272;t.ModifyPeakNtf=22273;t.PeakTaskNtf=22274;t.PeakTestNtf=22275;t.ChargePeakAck=22289;t.TestPeakAck=22291;t.TupoTestAck=22293;t.AwardTestAck=22295;t.FinishPeakTaskAck=22305;t.GainPeakAwardAck=22307;t.OpenPeakAck=22309;t.PedlarInfoAck=15872;t.PedlarBuyAck=15873;t.PedlarNewNtf=15874;t.PedlarNewAwardAck=15876;t.PetDispatchInfoAck=19713;t.PetDispatchRewardAck=19715;t.PetDispatchAck=19717;t.PetDelNtf=7424;t.PetModifyNtf=7425;t.PetGainPush=7426;t.PetPackNtf=7427;t.PetReputationNtf=7428;t.FullPetStarNtf=7429;t.PetFormNtf=7440;t.PetMoveAck=7442;t.FreePetAck=7457;t.PetSpaceNtf=7461;t.UnlockPetSpaceAck=7463;t.HatchPetAck=7465;t.SpeedPetAck=7467;t.GainPetAck=7469;t.UpdatePetAck=7473;t.PetStarAck=7475;t.PetReputionAck=7477;t.QuenchMagicAck=13061;t.QuenchOneKeyMagicAck=13063;t.GetRankListResp=6913;t.RankShowPlayerResp=6914;t.GetShowPlayerResp=6916;t.GetTarPlayerIpAck=6918;t.RecharegeMallInfoAck=15105;t.RecharegeTaskNotify=15106;t.DailyRechargeDataNtf=15107;t.DailyRechargeAwardAck=15109;t.RechargeInfoNtf=15110;t.RPInfoAck=18433;t.RPGetAck=18435;t.RPHistoryAck=18437;t.RPSendInfo=18439;t.RPGetTimes=18440;t.SecSoulTupoAck=20738;t.SecSoulDataNtf=20740;t.SecSoulDujieStartAck=20742;t.SecSoulDujieDamage=20743;t.SecSoulDujieEnd=20744;t.SecSoulShieldNtf=20746;t.SecSoulStartResp=20748;t.SecSoulEventNtf=20749;t.SecSoulEventResp=20751;t.SecSoulTreasureUpResp=20753;t.SecSoulMakeUpResp=20755;t.CrossSecSoulSecenesAck=20757;t.CrossSecSoulBattleRecordAck=20759;t.CrossSecSoulBattleRecordShowAck=20761;t.CrossSecSoulChallengeAck=20763;t.CrossSecSoulSetBattleArrayAck=20765;t.CrossSecSoulTimeNtf=20766;t.OpenDongfuResp=20768;t.DongfuMagicLayResp=20770;t.SevenInfoAck=18177;t.SevenUpAck=18179;t.SevenSpiritLvAck=18181;t.SevenEffectChooseAck=18183;t.ShenbingDataNotify=24065;t.ShenbingOnGoingNotify=24067;t.ShenbingOprateAck=24069;t.SimpleTeamDataNtf=20224;t.SimpleTeamUpdateAvatarAck=20226;t.TeamElementPropNtf=20240;t.TeamElementSkillNtf=20241;t.UseElementSkillAck=20243;t.SimpleBubbleDataNtf=20244;t.SimpleBubbleUpdateAck=20246;t.SkinInfoAck=11521;t.SkinEquipAck=11523;t.SkinActiveAck=11525;t.SkinReceiveAck=11527;t.SkinUpStarAck=11529;t.SoulInfoAck=13313;t.SoulAck=13315;t.SoulDecomposeAck=13317;t.SoulUpdateeAck=13319;t.TanbaoNtf=19968;t.TanbaoActNtf=19969;t.TanbaoBuffNtf=19970;t.TanbaoMoveAck=19985;t.TanbaoResetLayerAck=19987;t.TaskInfoNtf=5632;t.TaskRecordNtf=5633;t.UpdateTaskRecordNtf=5634;t.TaskSubmitAck=5636;t.TaskGiveUpAck=5638;t.SubQuestItemAck=5642;t.QuestDgnAck=5645;t.QuestKillAck=5649;t.FuncItemRecordNtf=5650;t.JoinEndlessAck=13826;t.LeaveTeamDgnAck=13828;t.EndlessInfNtf=13829;t.EndlessAwardNtf=13830;t.RollAwardAck=13832;t.ViewRollAwardAck=13834;t.TeamInspireNtf=13840;t.TeamInspireAck=13842;t.MyTeamDataAck=8961;t.TeamListAck=8963;t.TeamCreateAck=8965;t.TeamSetCopyIdAck=8967;t.TeamInviteListAck=8969;t.TeamInviteNotice=8970;t.TeamMemberAcceptAck=8972;t.TeamApplyAck=8974;t.TeamApplyListAck=8976;t.TeamApplyAcceptAck=8978;t.TeamEnterCopyAck=8980;t.TeamEnterCopyNotice=8981;t.TeamAcceptEnterCopyAck=8983;t.TeamEnterFinalNotice=8984;t.TeamExitAck=8986;t.TeamChangeCaptainAck=8988;t.TeamInviteAck=8990;t.TeamDissolveAck=8992;t.TitleInfoAck=10753;t.TitleActiveNotice=10754;t.TitlePastDueNotice=10755;t.TitleEquipAck=10757;t.TongtiangeNtf=23041;t.TongtiangeBuildResp=23043;t.TongtiangeAwardResp=23045;t.TongtiangeExchangeResp=23047;t.YiShouNtf=23049;t.YiShouKillResp=23051;t.YiShouAwardResp=23053;t.YiShouExchangeResp=23055;t.QiYuNtf=23057;t.QiYuDrawResp=23059;t.QiYuAwardResp=23061;t.QiYuExchangeResp=23063;t.TransfListNtf=12801;t.RoleTransfAck=12803;t.RoleFinishTransfAck=12805;t.StartDujieResp=12807;t.TreasureHuntDataAck=16385;t.TreasureHuntRecordAck=16387;t.TreasureHuntDrawAck=16389;t.TreasureHuntReceiveLuckAck=16391;t.TreasureHuntRefreshAck=16393;t.TreasureHuntBuyAck=16395;t.VipDataAck=8705;t.VipUseitemAck=8707;t.WarOrderInfoAck=15616;t.WarOrderGetRewardAck=15617;t.WarOrderUpGradeAck=15618;t.WarOrderShopInfoAck=15619;t.WarOrderShopBuyAck=15620;t.WarOrderGetExpBagAck=15621;t.WarOrderRewardInfoAck=15622;t.WarOrderTaskInfoAck=15623;t.WarGetTaskRewardAck=15624;t.WarBuyLevelAck=15625;t.WarBuyExpAck=15770;t.WeaponInfoAck=17409;t.WeaponUpLevelAck=17411;t.WeaponStrengthlvAck=17413;t.XinfaInfoAck=13569;t.XinfaEquipAck=13571;t.XinfaDecomposeAck=13573;t.XinfaUpdateeAck=13575;t.XinfaUnlockAck=13577;t.XinfaGongMingAttr=13578;return t}();t.ProtocolResponse=e})(app||(app={}));var gamesdk;(function(t){var e=function(){function r(t){this.platType=t;if(t==r.TYPE_ANDROID){this.bridge=Laya.PlatformClass.createClass("mo.JSBridge")}else{this.bridge=Laya.PlatformClass.createClass("JSBridge")}}r.prototype.call=function(t){var e=[];for(var i=1;i<arguments.length;i++){e[i-1]=arguments[i]}if(this.platType===r.TYPE_ANDROID){if(e.length>0){this.bridge.call.apply(this.bridge,[t].concat(e))}else{this.bridge.call(t)}}else if(this.platType===r.TYPE_IOS){if(e.length>0){for(var n=0;n<e.length;++n){t+=":"}this.bridge.call.apply(this.bridge,[t].concat(e))}else{this.bridge.call(t)}}};r.init=function(){if(Laya.Browser.window.navigator.platform.indexOf("ndroid")>-1){return new r(r.TYPE_ANDROID)}else{return new r(r.TYPE_IOS)}};r.TYPE_ANDROID=1;r.TYPE_IOS=2;return r}();t.ConchBridge=e})(gamesdk||(gamesdk={}));var gamesdk;(function(e){var t;(function(t){t[t["ChouKa30Min"]=1]="ChouKa30Min";t[t["TeamLevel"]=2]="TeamLevel"})(t=e.EReportType||(e.EReportType={}));var i=function(){function t(){this._token="testtest";this._loginFlag=false;this._timeCD=0;this.DelayCDtime=1e3;this.cdTime=0;login.LoginModel.getIns().on(login.LoginModel.EVENTS.TOMATO_SEND_REPORT,this,this.onReportHandler);this.xhhdJavascript=window["xhhdJavascript"];this.TL=window["TL"];if(this.xhhdJavascript){var t=this.xhhdJavascript.getSystemInfoSync();this.parseHeight(t)}if(this.TL){if(this.TL.getSystemInfoSync){this.parseHeight(this.TL.getSystemInfoSync())}}}t.getIns=function(){if(!this._ins){this._ins=new t}return this._ins};t.prototype.onReportHandler=function(t){if(this.TL&&this.TL.sendReport){this.TL.sendReport(t)}};t.prototype.openLink=function(t){if(this.TL){this.TL.openLink(t)}else{Laya.Browser.window.open(t)}};t.prototype.parseHeight=function(t){if(!t){return}var e=JSON.parse(t);var i=window.devicePixelRatio||1;if(e.notchTopHeight>0){window["OFFSET_Y"]=e.notchTopHeight*i}if(e.notchBottomHeight>0){window["OFFSET_BOTTOM"]=e.notchBottomHeight*i}};t.prototype.start=function(){if(this.bridge){this.bridge.call("startSDK")}};t.prototype.reLogin=function(){this.login()};t.prototype.getPlatform=function(){return e.UrlCfg.pf};t.prototype.error=function(t){};t.prototype.getAppId=function(){return""};t.prototype.getToken=function(){return this._token};t.prototype.getLoginFlag=function(){return this._loginFlag};t.prototype.getUserId=function(){return game.AccountModel.accountId};t.prototype.log=function(t){};t.prototype.login=function(){if(this.TL){this.TL.login()}else if(this.xhhdJavascript){console.log("xhhdJavascript.onLogin() call...");this.xhhdJavascript.onLogin()}};t.prototype.logout=function(){Laya.Browser.window.location.reload(true)};t.prototype.charge=function(t){if(Laya.timer.currTimer-this.cdTime<this.DelayCDtime){return}this.cdTime=Laya.timer.currTimer;this.rechargeCfg=t;var e=1;app.Protocol.removeListener(app.ProtocolResponse.GetChargeSignResp);app.Protocol.addListener(app.ProtocolResponse.GetChargeSignResp,this,this.onGetChargeSignResp);app.ProtocolRequest.GetChargeSignReq(this.getToken(),game.Context.create_order,this.rechargeCfg.id,e)};t.prototype.joinQQGroup=function(){if(this.TL){this.TL.joinQQGroup()}else if(this.xhhdJavascript){this.xhhdJavascript.joinQQGroup()}else{Laya.Browser.window.open(game.Context.webCfg.qqgroup)}};t.prototype.onGetChargeSignResp=function(t,e){app.Protocol.removeListener(app.ProtocolResponse.GetChargeSignResp);if(!e.sign){return}if(!game.Context.create_order){console.log(">>>>>>>>>> appConfig字段 create_order 未配置");game.Context.create_order="https://api-hlw.tomatogames.com/index/index/create_order"}var i=game.Context.mainRole?game.Context.mainRoleId.toString10():"";app.Http.request(game.Context.create_order,this,this.onCreateOrderHandler,"uid="+game.AccountModel.accountId+"&role="+i+"&server="+game.Context.serverId+"&amount="+this.rechargeCfg.recharge+"&product="+this.rechargeCfg.productid)};t.prototype.onCreateOrderHandler=function(t){if(t.status==1){var e=t.order;var i=this.rechargeCfg;var n={};n.cpExtension="";n.cpOrderId=e;n.currency="CNY";n.money=app.convert_Yuan(i.recharge);n.productId=i.productid;n.productName=app.getLang("chonzhi_01",app.convert_Yuan(i.recharge));n.productDesc="";if(i.reward1){var r=app.str2Array(i.reward1,"-");if(r.length>0){n.productDesc="购买"+game.ItemUtil.parserList(r[0])[0].getName()}}n.roleId=game.Context.mainRoleId.toString10();n.roleName=game.Context.mainRole.playername;n.serverId=game.Context.serverId;n.serverName=game.Context.serverName;n.roleLevel=game.Context.mainRole.level;n.roleVIP=vipcode.VipModel.getIns().vipLvl;if(this.TL){this.TL.payOrder(n.money,n.productId,n.productName,n.roleId,n.roleName,n.serverId,n.serverName,n.cpExtension,n.cpOrderId,n.productDesc,n.roleLevel,n.roleVIP)}else if(this.xhhdJavascript.purchaseInApp){this.xhhdJavascript.purchaseInApp(n.cpExtension,n.cpOrderId,n.currency,n.money,n.productId,n.productName,n.productDesc,n.roleId,n.roleName,n.serverId,n.serverName,n.roleLevel,n.roleVIP)}else{console.log("接口window.xhhdJavascript.purchaseInApp Or window.TL.payOrder 不存在")}}else{console.log(">>>>>订单创建失败")}};t.prototype.onEvt=function(t,e){};t.prototype.enterGame=function(){var t=game.AccountModel.accountId;var e=game.Context.isAdult?1:0;var i=this.userData;var n={};if(this.certi){if(this.certi.age){n.certi_age=this.certi.age}n.certi_code=this.certi.realState}app.ProtocolRequest.LoginReq(t,parseInt(game.Context.serverId),i.time,game.Context.md5,JSON.stringify(n))};t.prototype.onVerfiedUrl=function(t){if(t.resultCode==200||t.resultCode==1800){this.certi={};this.certi.age=t.data.age;this.certi.realState=t.data.realState}this.enterGame()};t.prototype.onLoginSuc=function(t){var e=t;game.AccountModel.accountId=e.userid;this._token=e.token;this.userData=t;var i="xyid="+e.userid+"&time="+e.time+"&token="+this._token;if(!game.Context.nativeDebug){app.Http.request(game.Context.loginCheckUrl,this,this.onLoginCheckBack,i,"post","json")}else{login.LoginModel.getIns().requestInfo();app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1)}};t.prototype.onLoginCheckBack=function(t){var e=t.code||t.resultCode;app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1);if(e==200){game.Context.md5=t.game_token||0;login.LoginModel.getIns().requestInfo()}else{if(app.ViewManager.DisplayedInStage(login.LoginMainView.SINGLE_KEY)){login.LoginMainView.getIns().hide()}}};t.prototype.onPayFailed=function(){};t.prototype.onPayStart=function(t){};t.prototype.onPaySuc=function(){};t.prototype.canLogout=function(){return false};t.prototype.certification=function(){};t.prototype.onLogoutSuc=function(){};t.prototype.enterServer=function(){if(game.Context.verfiedUrl){app.Http.request(game.Context.verfiedUrl,this,this.onVerfiedUrl,"xyid="+game.AccountModel.accountId+"&token="+this._token+"&sid="+game.Context.serverId)}else{this.enterGame()}};t.prototype.call_certification=function(){if(verifiedcode.VerifiedModel.getIns().verified.auth==1){if(verifiedcode.VerifiedModel.getIns().verified.prize==0){app.ViewManager.toggleDialog(verifiedcode.VerfiedRewardView,1,0)}}else{verifiedcode.VerfiedRegView.openVerFiedRegViewEnter(1,0)}verifiedcode.VerifiedModel.getIns().hasCerid=true;game.Context.event(game.ContextEvent.CERTIFICATION_SUC)};t.prototype.follow=function(t,e){Laya.timer.once(500,this,function(){if(t){t.run();t=null}})};return t}();e.TomatoSDK=i;var n;e.tomatoDebug=false;function r(){Laya.stage.addChild(n);Laya.timer.once(66,this,r)}function o(t){if(e.tomatoDebug){if(!n){n=new Laya.Sprite}n.graphics.clear();n.graphics.drawRect(0,0,Laya.stage.width,20,"#ff0000");n.alpha=.5;n.y=t;Laya.timer.once(66,this,r)}if(window["TL"]&&e.TomatoSDK.getIns().TL.setInputBox){e.TomatoSDK.getIns().TL.setInputBox(Laya.stage.height,t)}}function a(t){if(t&&t.parent){var e=t.parent.localToGlobal(new Laya.Point(t.x,t.y+t.height));o(e.y)}}e.onTomatoForceHandler=a})(gamesdk||(gamesdk={}));window.onclick=function(t){if(Laya.stage&&Laya.stage.focus){gamesdk.onTomatoForceHandler(Laya.stage.focus)}};var gamesdk;(function(o){var t;(function(t){t[t["SDK_LOGIN_END"]=1]="SDK_LOGIN_END";t[t["LOADING_LOGIN_UI"]=2]="LOADING_LOGIN_UI";t[t["LOADING_UI_END"]=3]="LOADING_UI_END";t[t["CLICK_SELECT_SERVER"]=4]="CLICK_SELECT_SERVER";t[t["SELECT_SERVER_INTO"]=5]="SELECT_SERVER_INTO";t[t["CLICK_ENTER_GAME"]=6]="CLICK_ENTER_GAME";t[t["CLICK_CREATE_ROLE"]=7]="CLICK_CREATE_ROLE"})(t=o.ELostFunc||(o.ELostFunc={}));function e(t){if(window["tr"]&&window["tr"]["c_sendDevicePointCp"]){window["tr"]["c_sendDevicePointCp"](t.toString())}console.log("c_sendDevicePoint:"+t)}o.c_sendDevicePoint=e;var i=function(){function t(){this._token="testtest";this.DelayCDtime=1e3;this.cdTime=0;this.checkLis()}t.getIns=function(){if(!this._ins){this._ins=new t}return this._ins};Object.defineProperty(t.prototype,"tr",{get:function(){return window["tr"]},enumerable:true,configurable:true});t.prototype.reLogin=function(){this.login()};t.prototype.checkLis=function(){if(game.Context.isSubLoaded){if(this.tr){game.Context.on(game.ContextEvent.SUCCEED_CREATE_ROLE,this,this.onEnterCreateRole);game.RoleModel.getIns().on(game.RoleModel.EVENTS.GET_INII_DATA,this,this.onContextEnterWorld);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.updateTeamLv)}}else{Laya.timer.once(200,this,this.checkLis)}};t.prototype.sendinfo=function(t){this.tr.c_sendinfo(t)};t.prototype.onEnterCreateRole=function(t){var e={};e.sendtype=2;e.roleid=t;e.rolename="";e.rolelevel="";e.viplevel="";e.serverid=game.Context.serverId;e.servername=game.Context.serverName;e.laborunion="";this.sendinfo(JSON.stringify(e))};t.prototype.onContextEnterWorld=function(){var t={};t.sendtype=1;t.roleid=game.Context.mainRole.insId.toNumber().toString();t.rolename=game.Context.mainRole.playername;if(game.Context.teamLv!=undefined&&game.Context.teamLv>0){t.rolelevel=game.Context.teamLv.toString()}else{t.rolelevel=""}t.viplevel="";t.serverid=game.Context.serverId;t.servername=game.Context.serverName;t.laborunion="";this.sendinfo(JSON.stringify(t))};t.prototype.updateTeamLv=function(){var t={};t.sendtype=0;t.roleid=game.Context.mainRole.insId.toNumber().toString();t.rolename=game.Context.mainRole.playername;if(game.Context.teamLv!=undefined&&game.Context.teamLv>0){t.rolelevel=game.Context.teamLv.toString()}else{t.rolelevel=""}t.viplevel=vipcode.VipModel.getIns().vipLvl.toString();t.serverid=game.Context.serverId;t.servername=game.Context.serverName;var e=guild.GuildModel.getIns().getGuildData();if(e){t.laborunion=game.Context.getGuildName(e.guildInf.guildName)}else{t.laborunion=""}this.sendinfo(JSON.stringify(t))};t.prototype.logout=function(){if(Laya.Browser.window.conch){Laya.Browser.window.location.reload()}else{this.tr.c_reload()}};t.prototype.login=function(){this.checkLogin()};t.prototype.checkLogin=function(){var t=this.tr.c_isCodeInit();console.log(Laya.timer.currTimer+">>> checkLogin:"+t);if(this.tr.c_isCodeInit()==1){Laya.timer.clear(this,this.checkLogin);console.log("start login call!!!");this.tr.c_login()}else{Laya.timer.once(1e3,this,this.checkLogin)}};t.prototype.onLoginSuc=function(t){var e=t;this._token=e.token;this.userData=t;game.AccountModel.accountId=e.uid;var i=Math.floor(Math.floor((new Date).getTime())/1e3);var n=1;var r="gameid="+e.gameid+"&channelid="+e.channelid+"&uid="+e.uid+"&token="+e.token+"&time="+i+"&clientid="+n;if(!game.Context.nativeDebug){app.Http.request(game.Context.loginCheckUrl,this,this.onLoginCheckBack,r,"post","json")}else{login.LoginModel.getIns().requestInfo();app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1)}o.c_sendDevicePoint(o.ELostFunc.LOADING_LOGIN_UI)};t.prototype.onLoginCheckBack=function(t){var e=t.code||t.resultCode;app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1);if(e==100||e==200){game.Context.md5=t.game_token||0;login.LoginModel.getIns().requestInfo()}else{if(app.ViewManager.DisplayedInStage(login.LoginMainView.SINGLE_KEY)){login.LoginMainView.getIns().hide()}}};t.prototype.charge=function(t){if(Laya.timer.currTimer-this.cdTime<this.DelayCDtime){return}this.cdTime=Laya.timer.currTimer;this.rechargeCfg=t;var e=1;app.Protocol.removeListener(app.ProtocolResponse.GetChargeSignResp);app.Protocol.addListener(app.ProtocolResponse.GetChargeSignResp,this,this.onGetChargeSignResp);app.ProtocolRequest.GetChargeSignReq(this._token,game.Context.create_order,this.rechargeCfg.id,e)};t.prototype.onGetChargeSignResp=function(t,e){app.Protocol.removeListener(app.ProtocolResponse.GetChargeSignResp);if(!e.sign){return}if(!game.Context.create_order){console.log(">>>>>>>>>> appConfig字段 create_order 未配置");return}var i=game.Context.mainRole?game.Context.mainRoleId.toString10():"";app.Http.request(game.Context.create_order,this,this.onCreateOrderHandler,"uid="+game.AccountModel.accountId+"&role="+i+"&server="+game.Context.serverId+"&amount="+this.rechargeCfg.recharge+"&product="+this.rechargeCfg.productid)};t.prototype.onCreateOrderHandler=function(t){if(t.status==1){var e=t.order;var i=this.rechargeCfg;var n={};n.OrderId=e;n.productId=i.id;n.productName=app.getLang("chonzhi_01",app.convert_Yuan(i.recharge));n.productDesc="";n.price=(i.recharge/app.moneyRate).toString();n.coinNum=game.GridsModel.getIns().getItemCount(game.ItemUtil.ENUMS.YUANBAO).toString();n.buyNum=i.recharge;n.currency=app.getLang("itemname_"+game.ItemUtil.ENUMS.YUANBAO);n.rate=app.moneyRate.toString();n.extension=e;var r=JSON.stringify(n);this.tr.c_pay(r)}else{console.log(">>>>>订单创建失败e.status="+t.status)}};t.prototype.call_certification=function(){if(verifiedcode.VerifiedModel.getIns().verified.auth==1){if(verifiedcode.VerifiedModel.getIns().verified.prize==0){app.ViewManager.toggleDialog(verifiedcode.VerfiedRewardView,1,0)}}else{verifiedcode.VerfiedRegView.openVerFiedRegViewEnter(1,0)}verifiedcode.VerifiedModel.getIns().hasCerid=true;game.Context.event(game.ContextEvent.CERTIFICATION_SUC)};t.prototype.joinQQGroup=function(){};t.prototype.openLink=function(t){if(this.tr&&this.tr.c_openurl){this.tr.c_openurl(t)}};t.prototype.enterServer=function(){if(game.Context.verfiedUrl){app.Http.request(game.Context.verfiedUrl,this,this.onVerfiedUrl,"xyid="+game.AccountModel.accountId+"&token="+this._token+"&sid="+game.Context.serverId)}else{this.enterGame()}};t.prototype.onVerfiedUrl=function(t){if(t.resultCode==200||t.resultCode==1800){this.certi={};this.certi.age=t.data.age;this.certi.realState=t.data.realState}this.enterGame()};t.prototype.enterGame=function(){var t=game.AccountModel.accountId;var e={};if(this.certi){if(this.certi.age){e.certi_age=this.certi.age}e.certi_code=this.certi.realState}var i=Math.floor(Math.floor((new Date).getTime())/1e3);app.ProtocolRequest.LoginReq(t,parseInt(game.Context.serverId),i,game.Context.md5,JSON.stringify(e))};t.prototype.getPlatform=function(){return o.UrlCfg.pf};t.prototype.getUserId=function(){return game.AccountModel.accountId};return t}();o.TrSDK=i})(gamesdk||(gamesdk={}));var tr=window["tr"];if(tr){window["tr_status"]=function(t){console.log((new Date).getTime()+"tr_status :"+t);switch(t){case 9:app.SDK.logout();break}};window["tr_init"]=function(){tr.c_codeEnd()};console.log("reg function for tr SDK!!!")}var gamesdk;(function(i){var t=function(){function e(){}e.getSDK=function(){var t;switch(e.pf){case e.PF.CYOU:break;case e.PF.YACE:t=i.WebSDK.getIns();break;case e.PF.TOMATO:t=i.TomatoSDK.getIns();break;case e.PF.TAREN:t=i.TrSDK.getIns();break;case e.PF.WXMINI:t=i.WXminiSDK.getIns();break;default:t=i.WebSDK.getIns();break}return t};e.getGAMESDK=function(){var t;switch(e.pf){case e.PF.CYOU:break}return t};e.getFACEBOOKSDK=function(){var t;switch(e.pf){case e.PF.JUNHAI:t=null;break;default:t=null;break}return t};e.init=function(){if(i.UrlCfg.pf==i.UrlCfg.PF.JUNHAI){app.SDK=i.UrlCfg.getSDK();app.GAMESDK=i.UrlCfg.getGAMESDK();app.FACEBOOKSDK=i.UrlCfg.getFACEBOOKSDK()}else if(window["conch"]){app.SDK=i.UrlCfg.getSDK();app.GAMESDK=i.UrlCfg.getGAMESDK();app.FACEBOOKSDK=i.UrlCfg.getFACEBOOKSDK()}else{app.SDK=i.UrlCfg.getSDK();app.GAMESDK=i.WebSDK.getIns();app.FACEBOOKSDK=null}};e.PF={XINMA:"easyfun",TAIGUO:"ictitan",TAIWAN:"mlbb",JUNHAI:"junhai",JUNHAI_BUYMEASURE:"junhaiBuyMeasure",CYOU:"cyou",YACE:"yace",TOMATO:"tomato",TAREN:"tr",WXMINI:"wxmini"};return e}();i.UrlCfg=t})(gamesdk||(gamesdk={}));var gamesdk;(function(e){var t=function(){function t(){this._token="testtest";this._loginFlag=false;if(e.UrlCfg.PF.YACE==e.UrlCfg.pf){var t=new Date;this._userId="T"+Math.floor(t.getTime()/100)+Math.floor(1e3*Math.random())}}t.getIns=function(){if(!this._ins){this._ins=new t}return this._ins};t.prototype.joinQQGroup=function(){};t.prototype.start=function(){if(this.bridge){this.bridge.call("startSDK")}};t.prototype.reLogin=function(){this.login()};t.prototype.getPlatform=function(){return e.UrlCfg.pf};t.prototype.error=function(t){};t.prototype.getAppId=function(){return""};t.prototype.getToken=function(){return this._token};t.prototype.getLoginFlag=function(){return this._loginFlag};t.prototype.getUserId=function(){return game.AccountModel.accountId};t.prototype.log=function(t){};t.prototype.login=function(){this.onLoginSuc("")};t.prototype.logout=function(){Laya.Browser.window.location.reload(true)};t.prototype.charge=function(t){console.log(game.Context.serverId,game.Context.serverName,game.Context.mainRoleId.toString10(),game.Context.mainRole.name,t.id,t.productid,t.desc?t.desc:"",t.money/100,t.productid);if(ent.DebugConfig.gm_cz==1){app.ViewManager.toggleDialog(shouchonghaoli.ChongzhitestuiView,1,0,[t.id])}};t.prototype.onEvt=function(t,e){};t.prototype.onLoginSuc=function(t){login.LoginModel.getIns().requestInfo();app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1)};t.prototype.onPayFailed=function(){};t.prototype.onPayStart=function(t){};t.prototype.onPaySuc=function(){};t.prototype.openLink=function(t){Laya.Browser.window.open(t)};t.prototype.canLogout=function(){return false};t.prototype.certification=function(){};t.prototype.onLogoutSuc=function(){};t.prototype.enterServer=function(){var t=game.AccountModel.accountId;var e=game.Context.isAdult?1:0;var i={game_id:game.Context.HtmlParams.gid||"",game_channel_id:game.Context.HtmlParams.gcid||"",channel_id:game.Context.HtmlParams.cid||""};app.ProtocolRequest.LoginReq(t,parseInt(game.Context.serverId),Laya.timer.currTimer)};t.prototype.call_certification=function(){if(verifiedcode.VerifiedModel.getIns().verified.auth==1){if(verifiedcode.VerifiedModel.getIns().verified.prize==0){app.ViewManager.toggleDialog(verifiedcode.VerfiedRewardView,1,0)}}else{verifiedcode.VerfiedRegView.openVerFiedRegViewEnter(1,0)}verifiedcode.VerifiedModel.getIns().hasCerid=true;game.Context.event(game.ContextEvent.CERTIFICATION_SUC)};t.prototype.follow=function(t,e){Laya.timer.once(500,this,function(){if(t){t.run();t=null}})};return t}();e.WebSDK=t})(gamesdk||(gamesdk={}));var gamesdk;(function(e){function t(e,t){if(window["wx"]){if(typeof t!="string"){return}console.log("wx_writeData:"+e+"="+t);window["wx"].setUserCloudStorage({KVDataList:[{key:e,value:t}],fail:function(t){console.log(e+":"+JSON.stringify(t))}})}}e.wx_writeData=t;function i(t){if(window["wx"]){window["wx"].postMessage(t)}}e.wx_postMessage=i;var n=function(){function t(){}t.c_lv_user=15;return t}();e.game_in_config=n;var r=function(){function t(){this._token="testtest";this.DelayCDtime=1e3;this.cdTime=0;this.checkLis()}t.getIns=function(){if(!this._ins){this._ins=new t}return this._ins};Object.defineProperty(t.prototype,"wxmini",{get:function(){return window["GameWXmini"]},enumerable:true,configurable:true});t.prototype.checkLis=function(){if(game.Context.isSubLoaded){if(this.wxmini){game.Context.on(game.ContextEvent.SUCCEED_CREATE_ROLE,this,this.onEnterCreateRole);game.RoleModel.getIns().on(game.RoleModel.EVENTS.GET_INII_DATA,this,this.onContextEnterWorld);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.updateTeamLv);game.RoleModel.getIns().on(game.RoleModel.EVENTS.SCORE_UPDATE,this,this.uploadScore)}}else{Laya.timer.once(200,this,this.checkLis)}};t.prototype.uploadScore=function(){var t=game.Context.score+"";this.wxmini.c_sendinfo(t)};t.prototype.sendinfo=function(t){this.wxmini.c_sendinfo(t)};t.prototype.onEnterCreateRole=function(t){var e={};e.sendtype=2;e.roleid=t;e.rolename="";e.rolelevel="";e.viplevel="";e.serverid=game.Context.serverId;e.servername=game.Context.serverName;e.laborunion="";this.sendinfo(JSON.stringify(e))};t.prototype.onContextEnterWorld=function(){var t={};t.sendtype=1;t.roleid=game.Context.mainRole.insId.toNumber().toString();t.rolename=game.Context.mainRole.playername;if(game.Context.teamLv!=undefined&&game.Context.teamLv>0){t.rolelevel=game.Context.teamLv.toString()}else{t.rolelevel=""}t.viplevel="";t.serverid=game.Context.serverId;t.servername=game.Context.serverName;t.laborunion="";this.sendinfo(JSON.stringify(t))};t.prototype.updateTeamLv=function(){var t={};t.sendtype=0;t.roleid=game.Context.mainRole.insId.toNumber().toString();t.rolename=game.Context.mainRole.playername;if(game.Context.teamLv!=undefined&&game.Context.teamLv>0){t.rolelevel=game.Context.teamLv.toString()}else{t.rolelevel=""}t.viplevel=vipcode.VipModel.getIns().vipLvl.toString();t.serverid=game.Context.serverId;t.servername=game.Context.serverName;var e=guild.GuildModel.getIns().getGuildData();if(e){t.laborunion=game.Context.getGuildName(e.guildInf.guildName)}else{t.laborunion=""}if(game.Context.teamLv==n.c_lv_user){this.wxmini.h5_upload_user()}this.sendinfo(JSON.stringify(t))};t.prototype.reLogin=function(){this.login()};t.prototype.logout=function(){this.wxmini.c_reload()};t.prototype.login=function(){console.log("wxminilogin......................");this.checkLogin()};t.prototype.checkLogin=function(){var e=this;this.wxmini.c_login(function(t){if(t.ret==1){console.log("login suc.........",t);e.onLoginSuc(t.content)}else{console.log("login fail.........")}})};t.prototype.onLoginSuc=function(t){console.log("onLoginSuc userData.........",t);var e=t;this.userData=t;var i=Math.floor(Math.floor((new Date).getTime())/1e3);var n="code="+this.userData.code+"&chid="+this.userData.chid+"&subchid="+this.userData.subchid+"&time="+i;console.log("onLoginSuc.........",n);if(!game.Context.nativeDebug){app.Http.request(game.Context.loginCheckUrl,this,this.onLoginCheckBack,n,"post","json")}else{login.LoginModel.getIns().requestInfo();app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1)}};t.prototype.onLoginCheckBack=function(t){console.log("onLoginCheckBack.......",t);var e=t.code||t.resultCode;app.ViewManager.toggleView(login.LoginMainView,Laya.stage,1);if(e==100||e==200){this._token=t.data.token||0;game.Context.md5=t.data.game_token||0;login.LoginModel.getIns().requestInfo();game.AccountModel.accountId=t.data.uid;this._openid=t.data.openid;this.wxmini.c_init_share(t.data.uid);this.wxmini.c_init_openid(t.data.openid)}else{if(app.ViewManager.DisplayedInStage(login.LoginMainView.SINGLE_KEY)){login.LoginMainView.getIns().hide()}}};t.prototype.charge=function(t){if(Laya.timer.currTimer-this.cdTime<this.DelayCDtime){return}this.cdTime=Laya.timer.currTimer;this.rechargeCfg=t;var e=1;app.Protocol.removeListener(app.ProtocolResponse.GetChargeSignResp);app.Protocol.addListener(app.ProtocolResponse.GetChargeSignResp,this,this.onGetChargeSignResp);app.ProtocolRequest.GetChargeSignReq(this._token,game.Context.create_order,this.rechargeCfg.id,e)};t.prototype.onGetChargeSignResp=function(t,e){console.log("onGetChargeSignResp..............");app.Protocol.removeListener(app.ProtocolResponse.GetChargeSignResp);if(!e.sign){return}if(!game.Context.create_order){console.log(">>>>>>>>>> appConfig字段 create_order 未配置");return}var i=game.Context.mainRole?game.Context.mainRoleId.toString10():"";app.Http.request(game.Context.create_order,this,this.onCreateOrderHandler,"uid="+game.AccountModel.accountId+"&role="+i+"&server="+game.Context.serverId+"&amount="+this.rechargeCfg.recharge+"&product="+this.rechargeCfg.productid)};t.prototype.onCreateOrderHandler=function(t){console.log("onCreateOrderHandler..............");if(t.status==1){var e=this.rechargeCfg;var i={uid_in_game:game.Context.mainRoleId.toString10(),user_name_in_game:game.Context.mainRole.playername,product_name:String(e.productname),product_id:String(e.productid),server_id:String(game.Context.serverId),pay_money:String(e.recharge),id:String(e.id),vip:String(vipcode.VipModel.getIns().vipLvl.toString()),level:String(game.Context.mainRole.level),orderid:String(t.order)};var n={game_area:game.Context.serverId,rgrade:game.Context.mainRole.level.toString(),user_id:game.AccountModel.accountId,token:this._token};console.log(">>>>>订单创建成功e.status="+t.status);this.wxmini.c_pay(i,n,function(t){if(t&&t.ret==0){game.Alert.show(t.msg)}else{manager.FlowManager.instance.flowByStyle1("充值成功")}})}else{console.log(">>>>>订单创建失败e.status="+t.status)}};t.prototype.call_certification=function(){if(verifiedcode.VerifiedModel.getIns().verified.auth==1){if(verifiedcode.VerifiedModel.getIns().verified.prize==0){app.ViewManager.toggleDialog(verifiedcode.VerfiedRewardView,1,0)}}else{verifiedcode.VerfiedRegView.openVerFiedRegViewEnter(1,0)}verifiedcode.VerifiedModel.getIns().hasCerid=true;game.Context.event(game.ContextEvent.CERTIFICATION_SUC)};t.prototype.joinQQGroup=function(){};t.prototype.openLink=function(t){if(this.wxmini&&this.wxmini.c_openurl){this.wxmini.c_openurl(t)}};t.prototype.enterServer=function(){if(game.Context.verfiedUrl){app.Http.request(game.Context.verfiedUrl,this,this.onVerfiedUrl,"xyid="+game.AccountModel.accountId+"&token="+this._token+"&sid="+game.Context.serverId)}else{this.enterGame()}};t.prototype.onVerfiedUrl=function(t){if(t.resultCode==200||t.resultCode==1800){this.certi={};this.certi.age=t.data.age;this.certi.realState=t.data.realState}this.enterGame()};t.prototype.enterGame=function(){var t=game.AccountModel.accountId;var e={};if(this.certi){if(this.certi.age){e.certi_age=this.certi.age}e.certi_code=this.certi.realState;e.child=this.userData.chid;e.subchid=this.userData.subchid;var i=this.wxmini.c_getFriendInviterCode();if(i!="0"){if(i.tasktype=="6"){this.wxmini.c_setFriendList()}else{}e.roleId=i.uid;e.type=i.tasktype}}var n=Math.floor(Math.floor((new Date).getTime())/1e3);app.ProtocolRequest.LoginReq(t,parseInt(game.Context.serverId),n,game.Context.md5,JSON.stringify(e))};t.prototype.getPlatform=function(){return e.UrlCfg.pf};t.prototype.getUserId=function(){return game.AccountModel.accountId};t.prototype.msgSecCheck=function(t){if(this.wxmini){this.wxmini.h5_msgSecCheck(t)}};t.prototype.openCustomerServiceConversation=function(){console.log("开启客服..............");var t={vip:String(vipcode.VipModel.getIns().vipLvl.toString()),sid:game.Context.serverId,userid:game.AccountModel.accountId,nickname:game.Context.mainRole.playername,level:game.Context.teamLv,userdata:"透传参数",ispay:0};console.log(">>>>>>>>>>客服信息创建成功extra="+t);this.wxmini.h5_openCustomerServiceConversation(t,function(t){})};t.prototype.shareWxFriendsChat=function(t){this.wxmini.c_friendsChat(t)};return t}();e.WXminiSDK=r})(gamesdk||(gamesdk={}));var util;(function(t){var e=function(){function n(){}n.PopEffect=function(t){t.scale(1,1);Laya.Tween.from(t,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Laya.Ease.backOut,Laya.Handler.create(this,this.onPopEnd,[t]))};n.onPopEnd=function(t){Laya.Dialog.manager.doOpen(t)};n.PopEffect2=function(t){Laya.Tween.to(t,{x:0,y:0,scaleX:0,scaleY:0},300,Laya.Ease.backOut,Laya.Handler.create(Laya.Dialog.manager,Laya.Dialog.manager.doClose,[t]))};n.startCircle=function(t,e,i){if(e===void 0){e=2e3}if(i===void 0){i=true}t.rotation=0;Laya.Tween.to(t,{rotation:360},e,null,Laya.Handler.create(n,n.startCircle,[t,e,i]))};n.stopCircle=function(t){Laya.Tween.clearAll(t)};n.guodong=function(t,e,i,n,r){var o=this;Laya.Tween.to(t,{x:e+n/2,width:n/4,y:i+r/6,heigth:r},100,Laya.Ease.linearNone,Laya.Handler.create(this,function(){Laya.Tween.to(t,{x:e+n/6,width:n*2/3,y:i-r/4,heigth:r+r/4},100,Laya.Ease.linearNone,Laya.Handler.create(o,function(){Laya.Tween.to(t,{x:e,width:n,y:i,heigth:r},100)}))}))};n.POP_HANDLER=new Laya.Handler(n,n.PopEffect);n.POP_HANDLER2=new Laya.Handler(n,n.PopEffect2);return n}();t.AniUtil=e;var i=function(){function t(){}t.prototype.play=function(t,e){this.label=t;this.curr=t.text;this.target=e;var i=e.toString();this.numLen=i.length;this.numArr=[];this.count=0;for(var n=0;n<this.numLen;n++){var r=parseInt(this.curr[n]);if(!r){r=0}var o=parseInt(i[n]);if(!this.numArr[n]){this.numArr[n]=[]}if(r<o){for(var a=r+1;a<=o;a++){this.numArr[n].push(a)}this.count+=o-r}else if(r>o){for(var a=r+1;a<=9;a++){this.numArr[n].push(a)}this.count+=9-r;for(var a=0;a<=o;a++){this.numArr[n].push(a)}this.count+=o+1}else{this.numArr[n].push(o)}}this.d1=this.numLen-1;this.d2=0;var s=1e3/this.count;this.loop();Laya.timer.loop(s,this,this.loop);Laya.timer.once(1100,this,this.stop)};t.prototype.loop=function(){if(!this.numArr[this.d1]){Laya.timer.clear(this,this.loop);return}var t="";for(var e=0;e<this.numLen;e++){if(e<this.d1){var i=this.curr[e];if(!i){i="0"}t+=i}else if(e==this.d1){t+=this.numArr[this.d1][this.d2]}else{var n=this.numArr[e].length;t+=this.numArr[e][n-1]}}this.d2++;var r=this.numArr[this.d1].length;if(this.d2>=r){this.d1--;this.d2=0}this.label.text=t};t.prototype.stop=function(){this.label.text=this.target.toString();Laya.timer.clearAll(this)};return t}();t.RunNum=i})(util||(util={}));var util;(function(t){var e=function(){function p(){}p.toCNLower=function(t){if(!p.NUM_CN_LOWER){p.NUM_CN_LOWER=app.getLang("count_num1");p.LEVELS=app.getLang("count_num2");p.UNITS=app.getLang("count_num3")}if(t==0){return p.NUM_CN_LOWER.charAt(0)}var e=this.getUnitCount(t);var i=t.toFixed(2);var n=i.indexOf(".");var r=n==-1?i:i.substring(0,n);var o=n==-1?"":i.substring(n+1,i.length);if(o.length>16){throw new Error("NUM IS TOO LARGE")}var a=this.convertIntegerStr(r,p.NUM_CN_LOWER);return a};p.convertIntegerStr=function(t,e){var i=Math.floor(t.length/4);var n=t.length%4;var r=[];if(n>0)r.push(this.convertThousand(t.substr(0,n),i,e));for(var o=0;o<i;o++){var a=n+o*4;var s=t.substring(a,a+4);r.push(this.convertThousand(s,i-o-1,e))}return this.convertNodes(r)};p.convertNodes=function(t){var e="";var i=false;for(var n=0;n<t.length;n++){var r=t[n];if(i&&r.desc.length>0||r.beforeZero&&r.desc.length>0&&e.length>0)e+=p.NUM_CN_LOWER[0];e+=r.desc;if(r.afterZero&&n<t.length-1)i=true;else if(r.desc.length>0)i=false}return e};p.convertThousand=function(t,e,i){var n=new h;var r=t.length;for(var o=0;o<4-r;o++)t="0"+t;var a=parseInt(t.charAt(0));var s=parseInt(t.charAt(1));var l=parseInt(t.charAt(2));var u=parseInt(t.charAt(3));if(a+s+l+u==0)return n;if(a==0)n.beforeZero=true;else{n.desc+=i.charAt(a)+p.UNITS.charAt(0)}if(s==0&&n.desc!=""&&l+u>0)n.desc+=i.charAt(0);else if(s>0){n.desc+=i.charAt(s)+p.UNITS.charAt(1)}if(l==0&&n.desc!=""&&u>0){n.desc+=i.charAt(a)}else if(l>0){n.desc+=(a==0&&s==0&&l==1?"":i.charAt(l))+p.UNITS.charAt(2)}if(u==0){n.afterZero=true}else if(u>0){n.desc+=i.charAt(u)}if(n.desc.length>0){n.desc+=e>0?p.LEVELS.charAt(e-1):""}return n};p.getUnitCount=function(t){return Math.ceil(Math.log(t)/Math.LN10)};return p}();t.CNUtil=e;var h=function(){function t(){this.beforeZero=false;this.afterZero=false;this.desc=""}return t}();t.ThousandNode=h})(util||(util={}));var util;(function(t){var e=function(){function t(t,e,i,n,r){if(r===void 0){r=1}this.keyMap=[];this.target=[];for(var o in t){this.target.push(t[o]);this.keyMap.push(o)}this.count=this.target.length;this.numLimit=i;this.current=0;this.cellHandler=e;this.completeHandler=n;Laya.timer.frameLoop(r,this,this.onLoop)}t.prototype.onLoop=function(){var t=0;while(this.current<this.target.length){this.cellHandler.runWith([this.target[this.current],this.keyMap[this.current]]);t++;this.current++;if(this.current<this.target.length&&t>=this.numLimit){return}}Laya.timer.clear(this,this.onLoop);this.completeHandler.run()};return t}();t.FrameTraversal=e})(util||(util={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var util;(function(util){var LogView=function(_super){__extends(LogView,_super);function LogView(){var _this=_super.call(this)||this;_this.hideList=[];_this.fontSize=Laya.stage.height/40;var tf=new Laya.Text;tf.overflow=Laya.Text.SCROLL;tf.mouseEnabled=true;tf.color="#000000";tf.bgColor="#ffffff";tf.alpha=.9;tf.align="left";tf.wordWrap=true;tf.width=Laya.stage.width;tf.height=Laya.stage.height-_this.fontSize*2;tf.fontSize=_this.fontSize;tf.y=_this.fontSize*2;tf.on(Laya.Event.MOUSE_DOWN,_this,_this.startScrollText);_this.tf=tf;_this.hideList.push(tf);var consoleBtn=_this.createBtn(function(){if(tf.parent){_this.hideAll()}else{for(var t=0;t<_this.hideList.length;t++){_this.addChild(_this.hideList[t])}_this.addChild(consoleBtn)}},0,0,"-----");_this.addChild(consoleBtn);var txtinput=new Laya.TextInput;txtinput.alpha=.5;txtinput.bgColor="#00ff00";txtinput.fontSize=_this.fontSize;txtinput.width=Laya.stage.width-_this.fontSize*3;txtinput.height=_this.fontSize;txtinput.y=_this.fontSize;_this.addChild(txtinput);_this.hideList.push(txtinput);var okbtn=_this.createBtn(function(){if(txtinput.text!=""){eval(txtinput.text)}},txtinput.width,txtinput.y,"OK");_this.hideList.push(okbtn);_this.hideAll();return _this}LogView.prototype.createBtn=function(t,e,i,n){var r=new Laya.Sprite;r.graphics.clear();r.graphics.drawRect(0,0,this.fontSize*3,this.fontSize,"#ff0000","#00ff00");r.alpha=.5;r.hitArea=new Laya.Rectangle(0,0,this.fontSize*3,this.fontSize);r.on(Laya.Event.MOUSE_DOWN,this,t);var o=new Laya.Label;o.color="#ffffff";o.fontSize=this.fontSize;r.addChild(o);o.text=n||"lable";r.x=e;r.y=i;return r};LogView.prototype.hideAll=function(){for(var t=0;t<this.hideList.length;t++){this.hideList[t].removeSelf()}};LogView.prototype.startScrollText=function(){this.prevX=this.tf.mouseX;this.prevY=this.tf.mouseY;Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScroll)};LogView.prototype.finishScroll=function(){Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.scrollText);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.finishScroll)};LogView.prototype.scrollText=function(){var t=this.tf.mouseX;var e=this.tf.mouseY;this.tf.scrollX+=this.prevX-t;this.tf.scrollY+=this.prevY-e;this.prevX=t;this.prevY=e};LogView.getins=function(){if(!LogView._ins){LogView._ins=new LogView}return LogView._ins};LogView.prototype.push=function(t){this.tf.text+=t+"\n"};return LogView}(Laya.Sprite);util.LogView=LogView})(util||(util={}));var util;(function(t){var e=function(){function t(){}t.trimNumberHeadZero=function(t){var e;while(true){if(t.charAt(0)=="0"){t=t.substring(1)}else{e=t;break}}return parseInt(e)};return t}();t.ObjectUtil=e})(util||(util={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var app;(function(t){var e=function(e){__extends(n,e);function n(){var t=e.call(this)||this;t._isPlaying=false;t.handlerList=[];return t}n.prototype.queue=function(t,e){this.handlerList.push({hander:t,cost:e});this.play()};n.prototype.play=function(){if(this._isPlaying===false){this._isPlaying=true;this.next()}};n.prototype.next=function(){if(this.handlerList.length){var t=this.handlerList.shift();var e=t.hander;var i=t.cost;e.run();Laya.timer.once(i,this,this.next)}else{this._isPlaying=false;this.event(n.EVENTS.COMPLETE)}};n.prototype.clear=function(t){if(t===void 0){t=false}this.handlerList=[];Laya.timer.clear(this,this.next);if(this._isPlaying&&t){this._isPlaying=false;this.event(n.EVENTS.COMPLETE)}else{this._isPlaying=false}};Object.defineProperty(n.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:true,configurable:true});n.EVENTS={COMPLETE:"complete"};return n}(Laya.EventDispatcher);t.Queue=e})(app||(app={}));var util;(function(t){var e=function(){function r(){}r.setWinSkt=function(e,i){if(i===void 0){i=-60}if(!r.winSkt){var n=new Laya.Templet;n.on(Laya.Event.COMPLETE,this,function t(){r.winSkt=n.buildArmature(0);r.winSkt.showSkinByIndex(0);r.winSkt.play(0,true);r.winSkt.scale(1,1);r.winSkt.y=i;r.winSkt.addChild(this.skt);n.off(Laya.Event.COMPLETE,this,t);e.addChild(r.winSkt)});n.loadAni("res/sks/shengli01.sk")}else{e.addChild(r.winSkt)}};return r}();t.SkUtil=e})(util||(util={}));var util;(function(t){var e=function(){function t(){}t.addLinkChild=function(t,e,i,n,r,o){if(o===void 0){o=false}if(!e||t.destroyed||e===t)return;!t.linkChilds&&(t.linkChilds=[]);e._linkOffX=n|0;e._linkOffY=r|0;if(t.linkChilds.indexOf(e)==-1){e.linkParent&&this.removeLinkChild(t,e);e.linkParent=t;t.linkChilds.push(e);e.linkVisibel=o;if(o){e.visible=t.visible}}i.addChild(e);if(t.parent){if(!e.noGlobal){var a=t.parent.localToGlobal(new Laya.Point(t.x+e._linkOffX,t.y+e._linkOffY));a=i.globalToLocal(a);e.x=a.x;e.y=a.y}else{e.x=t.x;e.y=t.y}}t.on(Laya.Event.DISPLAY,this,this.onLinkDisplay,[t]);t.on(Laya.Event.UNDISPLAY,this,this.unLinkDisplay,[t])};t.removeLinkChild=function(t,e){if(!e||t.destroyed||e===t)return;if(!t.linkChilds)return e;var i=t.linkChilds.indexOf(e);if(i!=-1){t.linkChilds.splice(i,1)}e.linkParent=null;e.removeSelf()};t.setLinkChildsVisible=function(t,e){if(!t)return;var i=t.linkChilds;if(i){for(var n=0,r=i.length;n<r;n++){var o=i[n];if(o.linkVisibel){o.visible=e}}}var a=t._childs;if(a){for(var n=0,r=a.length;n<r;n++){this.setLinkChildsVisible(a[n],e)}}};t.refreshLinkChildsPos=function(t){if(!t)return;var e=t.linkChilds;if(e){for(var i=0,n=e.length;i<n;i++){var r=e[i];if(t.parent){if(!r.noGlobal){var o=t.parent.localToGlobal(new Laya.Point(t.x+r._linkOffX,t.y+r._linkOffY));if(r.parent){o=r.parent.globalToLocal(o);r.x=o.x;r.y=o.y}}else{r.x=t.x;r.y=t.y}}}}var a=t._childs;if(a){for(var i=0,n=a.length;i<n;i++){this.refreshLinkChildsPos(a[i])}}};t.IMAGE="image";t.LABEL="label";t.EFFECT="effect";t.onLinkDisplay=function(t){this.setLinkChildsVisible(t,true);this.refreshLinkChildsPos(t)};t.unLinkDisplay=function(t){this.setLinkChildsVisible(t,false)};return t}();t.SpriteLinkUtil=e})(util||(util={}));var util;(function(s){function t(t){var e=new Array("零","一","二","三","四","五","六","七","八","九");var i=new Array("","十","百","千","万","十","百","千","亿","十","百","千","万","十","百","千","亿");if(!t||isNaN(t)){return"零"}var n=t.toString().split("");var r="";for(var o=0;o<n.length;o++){var a=n.length-1-o;r=i[o]+r;var s=n[a];r=e[s]+r}r=r.replace(/零(千|百|十)/g,"零").replace(/十零/g,"十");r=r.replace(/零+/g,"零");r=r.replace(/零亿/g,"亿").replace(/零万/g,"万");r=r.replace(/亿万/g,"亿");r=r.replace(/零+$/,"");r=r.replace(/^一十/g,"十");return r}s.convertToChinaNum=t;var e=function(){function h(){}h.initLang=function(){h.haxStr=[app.getLang("day_tips"),app.getLang("hour_tips"),app.getLang("minute__tips"),app.getLang("second_tips")]};h.secKeep=function(t,e){var i=4;var n=t;var r=0;var o=[0,0,0,0];var a=[];for(var s=r;s<h.hax.length;s++){if(s<i){if(t<h.hax[s]){continue}var l=Math.floor(n/h.hax[s]);o[s]=l;if(l){a.push(l+h.haxStr[s])}n=n%h.hax[s]}}if(a.length==0){a.push("0"+h.haxStr[3])}var u="";for(var s=0;s<a.length;s++){if(s<e){u+=a[s]}}return u};h.sec2Str=function(t,e,i,n,r){if(e===void 0){e=false}if(i===void 0){i=4}if(n===void 0){n=false}if(r===void 0){r=false}var o="";var a=t;var s=0;if(n){if(t<3600){s=1}}var l=[0,0,0,0];for(var u=s;u<h.hax.length;u++){if(u<i){if(t<h.hax[u]){continue}var p=Math.floor(a/h.hax[u]);l[u]=p;if(!e||p){if(r&&u==3&&l[0]>0){}else{o+=p+h.haxStr[u]}}a=a%h.hax[u]}}if(o==""){if(r){return t+h.haxStr[3]}else{return"0"+h.haxStr[3]}}return o};h.formatDate=function(t,e,i,n,r,o){if(e===void 0){e=false}if(i===void 0){i=false}if(n===void 0){n=true}if(r===void 0){r=false}if(o===void 0){o="/"}var a=new Date(t*1e3);var s;var l=a.getMinutes();var u=a.getSeconds();var p=l<10?"0"+l:l.toString();var h=u<10?"0"+u:u.toString();var c=a.getHours();var f=c<10?"0"+c:c.toString();if(e){if(!i){if(n){s=a.getFullYear()+o+(a.getMonth()+1)+o+a.getDate()+"  "+f+":"+p}else{s=a.getFullYear()+o+(a.getMonth()+1)+o+a.getDate()}}else{s=a.getFullYear()+o+(a.getMonth()+1)+o+a.getDate()+"  "+f+":"+p+":"+h}}else{if(r){s=a.getMonth()+1+o+a.getDate()+"  "+f+":"+p}else{s=f+":"+p+":"+h}}return s};h.formatTime=function(t,e,i){if(e===void 0){e=true}if(i===void 0){i=true}t=Math.round(Math.max(t,0));var n;var r;var o=t%60;var a=Math.floor(t%3600/60);var s=o<10?"0"+o:o.toString();var l=a<10?"0"+a:a.toString();var u="";n=Math.floor(t/3600);r=n<10?"0"+n:n.toString();if(e){u+=r+":"+l+":"+s}else if(!i){u+=r+":"+l}else{u+=l+":"+s}return u};h.formatTime1=function(t,e,i,n){if(e===void 0){e=true}if(i===void 0){i=true}if(n===void 0){n=false}t=Math.round(Math.max(t,0));var r;var o;var a;var s=t%60;var l=Math.floor(t%3600/60);var u=s.toString();var p=l.toString();var h="";o=Math.floor(t/3600);r=Math.floor(t/86400);if(n){h+=r+"天";o-=r*24}a=o.toString();if(e){h+=a+"时"+p+"分"+u+"秒"}else if(!i){h+=a+"时"+p+"分"}else{h+=p+"分"+u+"秒"}return h};h.getDayTime=function(t){var e=new Date(t*1e3);var i=e.getHours();var n=e.getMinutes();var r=e.getSeconds();return i*3600+n*60+r};h.getNowDayTime=function(){var t=new Date(game.Context.getServerTime()*1e3);var e=t.getHours();var i=t.getMinutes();var n=t.getSeconds();return e*3600+i*60+n};h.getHours=function(){var t=new Date(game.Context.getServerTime()*1e3);return t.getHours()};h.getMinutes=function(){var t=new Date(game.Context.getServerTime()*1e3);return t.getMinutes()};h.getDay=function(){return this.getWeekDay(game.Context.getServerTime())};h.getTimeByDate=function(t,e,i,n,r,o){if(t===void 0){t=0}if(e===void 0){e=0}if(i===void 0){i=0}if(n===void 0){n=0}if(r===void 0){r=0}if(o===void 0){o=0}var a=e-1;var s=new Date(0);s.setFullYear(t);s.setUTCMonth(a);s.setUTCDate(i);s.setUTCHours(n);s.setUTCMinutes(r);s.setUTCSeconds(o);return s.getTime()/1e3-game.Context.timeZone*3600};h.getWeekDay=function(t){var e;var i=new Date(t*1e3);e=i.getDay();if(e==0){e=7}return e};h.getTimeArr=function(t){var e=new Date(t*1e3);var i={};i.day=e.getDay();i.hour=e.getHours();i.minute=e.getMinutes();i.second=e.getSeconds();return i};h.getWeekEndTime=function(t){var e=new Date(t*1e3);var i=e.getDay();if(i==0){i=7}var n=e.getHours();var r=e.getMinutes();var o=e.getSeconds();return(7-i)*86400+n*3600+r*60+o};h.getWeekEndTimeNow=function(t){var e=new Date(t*1e3);var i=e.getDay();if(i==0){i=7}var n=e.getHours();var r=e.getMinutes();var o=e.getSeconds();return 7*86400-((i-1)*86400+n*3600+r*60+o)};h.getMonthHaveDays=function(){var t=new Date;var e=t.getMonth();t.setMonth(e+1);t.setDate(0);return t.getDate()};h.getMonthEndTime=function(t){var e=new Date(t*1e3);var i=e.getDate();var n=e.getHours();var r=e.getMinutes();var o=e.getSeconds();return s.TimeUtil.getMonthHaveDays()*86400-((i-1)*86400+n*3600+r*60+o)};h.getOfflineDay=function(t,e,i,n,r,o){if(e===void 0){e="offline_day"}if(i===void 0){i="offline_hour"}if(n===void 0){n="offline_min"}if(r===void 0){r="offline_sec"}if(o===void 0){o="family_16"}var a=Math.floor(t/(3600*24));var s=Math.floor(t/3600);var l=Math.floor(t%3600/60);var u=Math.floor(t%60);var p=o.length>0?app.getLang(o):"";if(a>0)p=app.getLang(e,a);else if(s>0)p=app.getLang(i,s);else if(l>0)p=app.getLang(n,l);else if(u>0)p=app.getLang(r,u);return p};h.getOnlineDay=function(t){var e=Math.floor(t/(3600*24));var i=Math.floor(t%(3600*24)/3600);var n=Math.floor(t%3600/60);var r=Math.floor(t%60);var o="";if(e>0)o=app.getLang("online_day",e)+app.getLang("online_hour",i);else if(i>0)o=app.getLang("online_hour",i)+app.getLang("online_min",n);else if(n>0)o=app.getLang("online_min",n)+app.getLang("online_sec",r);else if(r>0)o=app.getLang("online_min",n)+app.getLang("online_sec",r);return o};h.getCoolDown=function(t){var e="";var i=Math.floor(t/(3600*24));if(i>0){e=s.TimeUtil.getOnlineDay(t)}else{e=s.TimeUtil.formatTime(t)}return e};h.toChineseNum=function(t){var e=["零","一","二","三","四","五","六","七","八","九"];var i=["","十","百","千"];var n=t.toString().split("");var r=null;var o="";var a=true;var s=true;if(n.length==2){r=n[0];o=r==1?i[1]:e[r]+i[1];r=n[1];o+=r==0?"":e[r]}else if(n.length>2){var l=0;for(var u=n.length-1;u>=0;u--){r=n[u];if(r==0){if(!a&&!s){o=e[r]+o;s=true}if(l==4&&r==0){o+="万"}}else{if(u==0&&r==1&&l==1){o=e[r]+o}else{o=e[r]+i[l%9]+o}a=false;s=false}l++}}else{o=e[n[0]]}return o};h.getChineseNum=function(t){var e="一";switch(t){case 1:e="一";break;case 2:e="二";break;case 3:e="三";break;case 4:e="四";break;case 5:e="五";break;case 6:e="六";break;case 7:e="七";break;case 8:e="八";break;case 9:e="九";break;case 10:e="十";break}return e};h.getWeekCn=function(t,e){if(e===void 0){e=false}var i="一";switch(t){case 1:i="一";break;case 2:i="二";break;case 3:i="三";break;case 4:i="四";break;case 5:i="五";break;case 6:i="六";break;case 7:i="日";break}if(e){i="周"+i}return i};h.getWeekTime=function(t,e){var i=new Date(t*1e3);var n=i.getDay();if(n==0){n=7}var r=i.getHours()*3600+i.getMinutes()*60+i.getSeconds();var o=app.str2Array(e,"-");var a=parseInt(o[0]);var s=parseInt(o[1])*3600+parseInt(o[2])*60+parseInt(o[3]);var l=a-n;if(l<0){l+=7}else if(l==0){if(s-r<=0){l+=7}}return s-r+l*86400};h.checkIfReachWeekTime=function(t,e){var i=game.Context.getServerTime()-t;var n=this.getWeekTime(t,e);return i-n>0};h.checkIntervalTime=function(t,e){if(e===void 0){e=100}if((new Date).getTime()-this.intervalTime<e){if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("你点的太快了！"))}return false}this.intervalTime=(new Date).getTime();return true};h.getTimeWeek=function(t,e){var i=game.Context.getServerTime();var n=this.getWeekDay(i);var r=t.split("-");var o=parseInt(r[0]);var a=game.Context.getServerZeroTime()-n*86400+o*86400+parseInt(r[1])*3600+parseInt(r[2])*60+parseInt(r[3]);if(e){console.log(s.TimeUtil.formatDate(a,true,true))}return a};h.secOneDay=86400;h.hax=[86400,3600,60,1];h.haxStr=["","","",""];return h}();s.TimeUtil=e})(util||(util={}));var app;(function(L){var S=Laya.Loader;var t=function(){function t(t,e,i,n){this._zip=i;this._url=t;this._onComplete=n;this.count=1;this.onLoaded(e)}t.prototype.onLoaded=function(t){var i=this;if(!t.src&&!t._setContext){if(!this._data){this._data=t;if(t.meta&&t.meta.image){var e=t.meta.image.split(",");var n=this._url.indexOf("/")>=0?"/":"\\";var r=this._url.lastIndexOf(n);var o=r>=0?this._url.substr(0,r+1):"";for(var a=0,s=e.length;a<s;a++){e[a]=o+e[a]}}else{e=[this._url.replace(".json",".png")]}e.reverse();t.toLoads=e;t.pics=[]}var l=e.pop();if(Laya.loader.getRes(l)){return this.onLoaded(Laya.loader.getRes(l))}else{var u="data:image/png;base64,"+this._zip.file(l).asText();l=Laya.URL.formatURL(l);return L.DasParser.loadImage(u,l,function(t,e){t._src=e;S.loadedMap[e]=t;i.count++;i.onLoaded(t)})}}else{this._data.pics.push(t);if(this._data.toLoads.length>0){var p=this._data.toLoads.pop();var u="data:image/png;base64,"+this._zip.file(p).asText();p=Laya.URL.formatURL(p);return L.DasParser.loadImage(u,p,function(t,e){t._src=e;S.loadedMap[e]=t;i.onLoaded(t);i.count++})}var h=this._data.frames;var c=this._url.split("?")[0];var f=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:c.substring(0,c.lastIndexOf("."))+"/";var g=this._data.pics;var d=Laya.URL.formatURL(this._url);var y=Laya.Loader["atlasMap"][d]||(Laya.Loader["atlasMap"][d]=[]);y.dir=f;var m=1;if(this._data.meta&&this._data.meta.scale&&this._data.meta.scale!=1){m=parseFloat(this._data.meta.scale);for(var v in h){var b=h[v];var _=g[b.frame.idx?b.frame.idx:0];var I=Laya.URL.formatURL(f+v);_.scaleRate=m;var w;w=Laya.Texture.create(_,b.frame.x,b.frame.y,b.frame.w,b.frame.h,b.spriteSourceSize.x,b.spriteSourceSize.y,b.sourceSize.w,b.sourceSize.h);S.cacheRes(I,w);w.url=I;y.push(I)}}else{for(v in h){b=h[v];_=g[b.frame.idx?b.frame.idx:0];I=Laya.URL.formatURL(f+v);S.cacheRes(I,Laya.Texture.create(_,b.frame.x,b.frame.y,b.frame.w,b.frame.h,b.spriteSourceSize.x,b.spriteSourceSize.y,b.sourceSize.w,b.sourceSize.h));S.loadedMap[I].url=I;y.push(I)}}delete this._data.pics;this._onComplete.call(this._onComplete.caller,this._data,this.count)}};return t}();L.ZipParser=t})(app||(app={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var cfgCls;(function(t){function e(t,e,i){var n=t["keyLen"];var r=t["keyType"][i]=="string"?"":0;if(t.cache==undefined){return t.gv(e,i)||r}else if(t.cache[e*n+i]==undefined){t.cache[e*n+i]=t.gv(e,i)||r}return t.cache[e*n+i]}var i=function(){function t(){}t.prototype.g=function(t){return e(this.b,this.p,t)};return t}();var n=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"stage",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"points",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewards",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"words",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.AchievementXCfg=n;var r=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.ActivityawardXCfg=r;var o=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"week7",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.ActivityforecasttimeXCfg=o;var a=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"checktime",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"checkguide",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timestart",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timeend",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"banner",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.ActivityforecastXCfg=a;var s=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guildlv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"openday",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"closeday",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"map",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npc",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param1",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"popup",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cycle",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guildtimetext",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"opentime",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"closetime",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapregion",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"awardshow",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param3",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"popdes",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"poptitle",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ruledes",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tips",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(26)},enumerable:true,configurable:true});return t}(i);t.ActivityfunctionXCfg=s;var l=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"number",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity_max",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endshow",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clear",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cdflag",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timedes",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typedes",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlvdes",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"contentdes",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"awardshow",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res2",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"key1",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"key2",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"key3",{get:function(){return this.g(21)},enumerable:true,configurable:true});return t}(i);t.ActivityXCfg=l;var u=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"openday",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"closeday",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timetype",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param1",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cycle",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date2",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date3",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date4",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date5",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date6",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award1",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award2",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award3",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award4",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"popdes",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"poptitle",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tips",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(26)},enumerable:true,configurable:true});return t}(i);t.Activity_cycleXCfg=u;var p=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"location",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Activity_tanbaomoveXCfg=p;var h=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rank",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Activity_tanbaorankXCfg=h;var c=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layerid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leveltype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leveltypenum",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hide",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battlegroup",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battletime",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buff",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showpicture",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"slayeraward",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Activity_tanbaoXCfg=c;var f=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open_type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open_canshu",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open_date",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"client_type",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gogao",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mailtemp",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tipsid",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date_juti",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity_date",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date3",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"serverid",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"receive_effect",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p3",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p4",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p5",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p6",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p7",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p8",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p9",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp2",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp3",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp4",{get:function(){return this.g(30)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp5",{get:function(){return this.g(31)},enumerable:true,configurable:true});return t}(i);t.Activity_tarenXCfg=f;var g=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.AddupsignXCfg=g;var d=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.AiXCfg=d;var y=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"danshilv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upexp",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jingjie",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"danyaoqua",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type2",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Alchemy_expXCfg=y;var m=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"danfanglv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"state",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"danshilv",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preid",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typename",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"realm",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"remark",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost1",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost2",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.Alchemy_listXCfg=m;var v=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typename",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P3",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P4",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P5",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P6",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"P7",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.Alchemy_prescriptionXCfg=v;var b=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"amuletid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"word",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillparameters1",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.AmuletXCfg=b;var _=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upexp",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.ArboretumXCfg=_;var I=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needxp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"costitem",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Arboretum_developXCfg=I;var w=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"initial",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"up",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"drop",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"expend",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upattribute",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Arboretum_environmentXCfg=w;var L=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"seedid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"plantdesc",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"growtime",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"harvestexp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"state1",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"state2",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Arboretum_growXCfg=L;var S=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stack",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Arboretum_guardXCfg=S;var A=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preview",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item1",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Arboretum_helpXCfg=A;var E=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"seedid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Arboretum_limitXCfg=E;var P=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qua",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rate",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"plantexp",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Arboretum_marketXCfg=P;var x=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"number",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Arboretum_markrtawardXCfg=x;var C=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Arboretum_newpetspaceXCfg=C;var D=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upexp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guardtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"costitem",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Arboretum_patronXCfg=D;var M=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"unlocklv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"growup",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"secgrowup",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"plantexp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"harvestexp",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemid",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"state1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"state2",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"state3",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.Arboretum_plantXCfg=M;var T=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"unlockitem",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Arboretum_spaceXCfg=T;var O=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param1",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Arboretum_waterXCfg=O;var N=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wuxingtype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wuxingvalue",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guardtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Arboretum_wuxingXCfg=N;var k=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qua",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"special",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrshow",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Attribute_levelXCfg=k;var R=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"key",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levattribute",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Attribute_listXCfg=R;var B=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.Attribute_poolXCfg=B;var G=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrlist",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.AttrshowXCfg=G;var j=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigstage",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smallstage",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tasktype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parmes",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskname",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigreward",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smallreward",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showpic",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showpic_1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showname",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showjieshao",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"getdes",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.AwakeXCfg=j;var U=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lockturn",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"unlockitem",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.BaglocksystemXCfg=U;var H=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"access",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bagflag",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.BagtypeXCfg=H;var V=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"index",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.BanreasonlistXCfg=V;var F=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.BattlecompanionawardXCfg=F;var Y=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.BattlecompanionnameXCfg=Y;var q=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activity_max",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.BattlecompanionXCfg=q;var z=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"groupid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monster",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.BattlegroupXCfg=z;var K=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop7",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop8",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop9",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop10",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop11",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop12",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop13",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop14",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop15",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop16",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop17",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop18",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop19",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop20",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop21",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop22",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop23",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop24",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop25",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop26",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop27",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop28",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop29",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop30",{get:function(){return this.g(30)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop31",{get:function(){return this.g(31)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop32",{get:function(){return this.g(32)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop33",{get:function(){return this.g(33)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop34",{get:function(){return this.g(34)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop35",{get:function(){return this.g(35)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop36",{get:function(){return this.g(36)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop37",{get:function(){return this.g(37)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop38",{get:function(){return this.g(38)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop39",{get:function(){return this.g(39)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop40",{get:function(){return this.g(40)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop41",{get:function(){return this.g(41)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop42",{get:function(){return this.g(42)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop43",{get:function(){return this.g(43)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop44",{get:function(){return this.g(44)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop45",{get:function(){return this.g(45)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop46",{get:function(){return this.g(46)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop47",{get:function(){return this.g(47)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop48",{get:function(){return this.g(48)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop49",{get:function(){return this.g(49)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop50",{get:function(){return this.g(50)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop51",{get:function(){return this.g(51)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop52",{get:function(){return this.g(52)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop53",{get:function(){return this.g(53)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop54",{get:function(){return this.g(54)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop55",{get:function(){return this.g(55)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop56",{get:function(){return this.g(56)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop57",{get:function(){return this.g(57)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop58",{get:function(){return this.g(58)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop59",{get:function(){return this.g(59)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop60",{get:function(){return this.g(60)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop61",{get:function(){return this.g(61)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop62",{get:function(){return this.g(62)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop63",{get:function(){return this.g(63)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop64",{get:function(){return this.g(64)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop65",{get:function(){return this.g(65)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop66",{get:function(){return this.g(66)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop67",{get:function(){return this.g(67)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop68",{get:function(){return this.g(68)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop69",{get:function(){return this.g(69)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop70",{get:function(){return this.g(70)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop71",{get:function(){return this.g(71)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop72",{get:function(){return this.g(72)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop73",{get:function(){return this.g(73)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop74",{get:function(){return this.g(74)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop75",{get:function(){return this.g(75)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop76",{get:function(){return this.g(76)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop77",{get:function(){return this.g(77)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop78",{get:function(){return this.g(78)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop79",{get:function(){return this.g(79)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop80",{get:function(){return this.g(80)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop81",{get:function(){return this.g(81)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop82",{get:function(){return this.g(82)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop83",{get:function(){return this.g(83)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop84",{get:function(){return this.g(84)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop85",{get:function(){return this.g(85)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop86",{get:function(){return this.g(86)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop87",{get:function(){return this.g(87)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop88",{get:function(){return this.g(88)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop89",{get:function(){return this.g(89)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop90",{get:function(){return this.g(90)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop91",{get:function(){return this.g(91)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop92",{get:function(){return this.g(92)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop93",{get:function(){return this.g(93)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop94",{get:function(){return this.g(94)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop95",{get:function(){return this.g(95)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop96",{get:function(){return this.g(96)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop97",{get:function(){return this.g(97)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop98",{get:function(){return this.g(98)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop99",{get:function(){return this.g(99)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop100",{get:function(){return this.g(100)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop101",{get:function(){return this.g(101)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop102",{get:function(){return this.g(102)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop103",{get:function(){return this.g(103)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop104",{get:function(){return this.g(104)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop105",{get:function(){return this.g(105)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop106",{get:function(){return this.g(106)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop107",{get:function(){return this.g(107)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop108",{get:function(){return this.g(108)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop109",{get:function(){return this.g(109)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop110",{get:function(){return this.g(110)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop111",{get:function(){return this.g(111)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop112",{get:function(){return this.g(112)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop113",{get:function(){return this.g(113)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop114",{get:function(){return this.g(114)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop115",{get:function(){return this.g(115)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop116",{get:function(){return this.g(116)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop117",{get:function(){return this.g(117)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop118",{get:function(){return this.g(118)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop119",{get:function(){return this.g(119)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop120",{get:function(){return this.g(120)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop121",{get:function(){return this.g(121)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop122",{get:function(){return this.g(122)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop123",{get:function(){return this.g(123)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop124",{get:function(){return this.g(124)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop125",{get:function(){return this.g(125)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop126",{get:function(){return this.g(126)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop127",{get:function(){return this.g(127)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop128",{get:function(){return this.g(128)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop129",{get:function(){return this.g(129)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop130",{get:function(){return this.g(130)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop131",{get:function(){return this.g(131)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop132",{get:function(){return this.g(132)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop133",{get:function(){return this.g(133)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop135",{get:function(){return this.g(134)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop137",{get:function(){return this.g(135)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop139",{get:function(){return this.g(136)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop140",{get:function(){return this.g(137)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop141",{get:function(){return this.g(138)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop143",{get:function(){return this.g(139)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop145",{get:function(){return this.g(140)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop147",{get:function(){return this.g(141)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop148",{get:function(){return this.g(142)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop154",{get:function(){return this.g(143)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop155",{get:function(){return this.g(144)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop156",{get:function(){return this.g(145)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop157",{get:function(){return this.g(146)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop158",{get:function(){return this.g(147)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop159",{get:function(){return this.g(148)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop160",{get:function(){return this.g(149)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop161",{get:function(){return this.g(150)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop162",{get:function(){return this.g(151)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop180",{get:function(){return this.g(152)},enumerable:true,configurable:true});return t}(i);t.BattlenumbersectionXCfg=K;var W=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop7",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop8",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop9",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop10",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop11",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop12",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop13",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop14",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop15",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop16",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop17",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop18",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop19",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop20",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop21",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop22",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop23",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop24",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop25",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop26",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop27",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop28",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop29",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop30",{get:function(){return this.g(30)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop31",{get:function(){return this.g(31)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop32",{get:function(){return this.g(32)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop33",{get:function(){return this.g(33)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop34",{get:function(){return this.g(34)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop35",{get:function(){return this.g(35)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop36",{get:function(){return this.g(36)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop37",{get:function(){return this.g(37)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop38",{get:function(){return this.g(38)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop39",{get:function(){return this.g(39)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop40",{get:function(){return this.g(40)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop41",{get:function(){return this.g(41)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop42",{get:function(){return this.g(42)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop43",{get:function(){return this.g(43)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop44",{get:function(){return this.g(44)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop45",{get:function(){return this.g(45)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop46",{get:function(){return this.g(46)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop47",{get:function(){return this.g(47)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop48",{get:function(){return this.g(48)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop49",{get:function(){return this.g(49)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop50",{get:function(){return this.g(50)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop51",{get:function(){return this.g(51)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop52",{get:function(){return this.g(52)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop53",{get:function(){return this.g(53)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop54",{get:function(){return this.g(54)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop55",{get:function(){return this.g(55)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop56",{get:function(){return this.g(56)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop57",{get:function(){return this.g(57)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop58",{get:function(){return this.g(58)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop59",{get:function(){return this.g(59)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop60",{get:function(){return this.g(60)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop61",{get:function(){return this.g(61)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop62",{get:function(){return this.g(62)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop63",{get:function(){return this.g(63)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop64",{get:function(){return this.g(64)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop65",{get:function(){return this.g(65)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop66",{get:function(){return this.g(66)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop67",{get:function(){return this.g(67)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop68",{get:function(){return this.g(68)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop69",{get:function(){return this.g(69)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop70",{get:function(){return this.g(70)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop71",{get:function(){return this.g(71)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop72",{get:function(){return this.g(72)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop73",{get:function(){return this.g(73)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop74",{get:function(){return this.g(74)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop75",{get:function(){return this.g(75)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop76",{get:function(){return this.g(76)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop77",{get:function(){return this.g(77)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop78",{get:function(){return this.g(78)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop79",{get:function(){return this.g(79)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop80",{get:function(){return this.g(80)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop81",{get:function(){return this.g(81)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop82",{get:function(){return this.g(82)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop83",{get:function(){return this.g(83)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop84",{get:function(){return this.g(84)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop85",{get:function(){return this.g(85)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop86",{get:function(){return this.g(86)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop87",{get:function(){return this.g(87)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop88",{get:function(){return this.g(88)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop89",{get:function(){return this.g(89)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop90",{get:function(){return this.g(90)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop91",{get:function(){return this.g(91)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop92",{get:function(){return this.g(92)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop93",{get:function(){return this.g(93)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop94",{get:function(){return this.g(94)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop95",{get:function(){return this.g(95)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop96",{get:function(){return this.g(96)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop97",{get:function(){return this.g(97)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop98",{get:function(){return this.g(98)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop99",{get:function(){return this.g(99)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop100",{get:function(){return this.g(100)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop101",{get:function(){return this.g(101)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop102",{get:function(){return this.g(102)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop103",{get:function(){return this.g(103)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop104",{get:function(){return this.g(104)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop105",{get:function(){return this.g(105)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop106",{get:function(){return this.g(106)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop107",{get:function(){return this.g(107)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop108",{get:function(){return this.g(108)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop109",{get:function(){return this.g(109)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop110",{get:function(){return this.g(110)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop111",{get:function(){return this.g(111)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop112",{get:function(){return this.g(112)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop113",{get:function(){return this.g(113)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop114",{get:function(){return this.g(114)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop115",{get:function(){return this.g(115)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop116",{get:function(){return this.g(116)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop117",{get:function(){return this.g(117)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop118",{get:function(){return this.g(118)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop119",{get:function(){return this.g(119)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop120",{get:function(){return this.g(120)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop121",{get:function(){return this.g(121)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop122",{get:function(){return this.g(122)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop123",{get:function(){return this.g(123)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop124",{get:function(){return this.g(124)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop125",{get:function(){return this.g(125)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop126",{get:function(){return this.g(126)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop127",{get:function(){return this.g(127)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop128",{get:function(){return this.g(128)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop129",{get:function(){return this.g(129)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop130",{get:function(){return this.g(130)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop131",{get:function(){return this.g(131)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop132",{get:function(){return this.g(132)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop133",{get:function(){return this.g(133)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop135",{get:function(){return this.g(134)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop137",{get:function(){return this.g(135)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop139",{get:function(){return this.g(136)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop140",{get:function(){return this.g(137)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop141",{get:function(){return this.g(138)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop143",{get:function(){return this.g(139)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop145",{get:function(){return this.g(140)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop147",{get:function(){return this.g(141)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop148",{get:function(){return this.g(142)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop154",{get:function(){return this.g(143)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop155",{get:function(){return this.g(144)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop156",{get:function(){return this.g(145)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop157",{get:function(){return this.g(146)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop158",{get:function(){return this.g(147)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop159",{get:function(){return this.g(148)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop160",{get:function(){return this.g(149)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop161",{get:function(){return this.g(150)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop162",{get:function(){return this.g(151)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop180",{get:function(){return this.g(152)},enumerable:true,configurable:true});return t}(i);t.BattlenumberXCfg=W;var X=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"height",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clipx",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clipy",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"key",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.BiaoqingXCfg=X;var Q=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"group",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numandrate",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pro",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.BlackmarketgroupXCfg=Q;var J=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"time",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"num",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.BlackmarketrefreshXCfg=J;var Z=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specialtimes",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pro",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.BlackmarketspecialXCfg=Z;var $=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"group",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"num",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rate",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"count",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"discount",{get:function(){return this.g(12)},enumerable:true,configurable:true});return t}(i);t.BlackmarketXCfg=$;var tt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bosssetbase",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlv",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rareshow",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"deadtime",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"refreshtime",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bloodloss",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"systemchat",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossname",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"drop2",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"drop3",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"drop4",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dropshow",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"propdropshow",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dungeonname",{get:function(){return this.g(18)},enumerable:true,configurable:true});return t}(i);t.BossXCfg=tt;var et=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needdps",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewarditem",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Boss_guildboxXCfg=et;var it=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needdps",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewarditem",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Boss_guildrewardXCfg=it;var nt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bosssetbase",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlv",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timelimit",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"saodangdrop",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qfsaodangdrop",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qfsaodang",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossname",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dropshow",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qfitem",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qfitembuy",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fightdropshow",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qfdropshow",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bsdropshow",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jiaobiao",{get:function(){return this.g(16)},enumerable:true,configurable:true});return t}(i);t.Boss_shandongXCfg=nt;var rt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"num",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qua",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Box_showXCfg=rt;var ot=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monsterexp",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelup",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_foreshow",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upattr",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.BravechallengeXCfg=ot;var at=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activationattr",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useattr",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sizegrid",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconword",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"get",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.BubbleiconXCfg=at;var st=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlvmin",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlvmax",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeat",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"last",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Bubble_tipsXCfg=st;var lt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"roleid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.BuchangXCfg=lt;var ut=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"firstaward",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"secondaward",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"thirdaward",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.ChallengeareaXCfg=ut;var pt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"area",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monsterbase",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starlimit",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limitpeo",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limittime",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lasttime",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelname",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossdesc",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"onestaraward",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"twostaraward",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"threestaraward",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.ChallengebossXCfg=pt;var ht=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.ChallengespellXCfg=ht;var ct=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"num",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"picktime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.CollectionXCfg=ct;var ft=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"role",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamiconid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stories",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Create_roleXCfg=ft;var gt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"daytime",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"countdown",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viptype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"doublevip",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buytime",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.DaliytimeXCfg=gt;var dt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"group",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"refresh",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"collectionid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxlimit",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"revive",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xcoor",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ycoor",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"empty",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.DanaotiangongXCfg=dt;var yt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"distance",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"standdistance",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rolename",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nameres",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"head",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"background",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"createrole",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"createname",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"position",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"target",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preattr",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"professional",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"roleattr",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rolepic",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"createyuanshen",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"soulmodel",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"donghuaid",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillshow",{get:function(){return this.g(22)},enumerable:true,configurable:true});return t}(i);t.DefclassXCfg=yt;var mt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buffid",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.DengjishanghaiXCfg=mt;var vt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.DenidwordsXCfg=vt;var bt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"openlv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight2",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"normal",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"special",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapres",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.DispatchXCfg=bt;var _t=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"raise",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Dispatch_raiseXCfg=_t;var It=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"preid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chapter",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petid",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"picture",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"power",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Dungeon_cwmjXCfg=It;var wt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"round",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backround",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"round_exp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Dungeon_mjgXCfg=wt;var Lt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewards",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Dungeon_mountainawardXCfg=Lt;var St=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reconmmend",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clear_item",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Dungeon_mountainXCfg=St;var At=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grade_num",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grade_exp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Dungeon_ssslXCfg=At;var Et=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time1",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time2",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time3",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time4",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time5",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward3",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward4",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward5",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"awardprop",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timeshow",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step1",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord1",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step2",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord2",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step3",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord3",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step4",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord4",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step5",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord5",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step6",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord6",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"step7",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coord7",{get:function(){return this.g(30)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"steplang",{get:function(){return this.g(31)},enumerable:true,configurable:true});return t}(i);t.Dungeon_szjdXCfg=Et;var Pt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chapter",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"round",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battletype",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stories",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tasklink",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"film",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cutline",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigaward",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"head",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pictureframe",{get:function(){return this.g(18)},enumerable:true,configurable:true});return t}(i);t.Dungeon_zxrwXCfg=Pt;var xt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.ElementsXCfg=xt;var Ct=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"extra_award",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clear_item",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"morelevels",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.ElitechallengeXCfg=Ct;var Dt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"power",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lucky",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.EndlesscjXCfg=Dt;var Mt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pass",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"second",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.EndlessjumpXCfg=Mt;var Tt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"team",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardnum",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.EndlessrollXCfg=Tt;var Ot=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lucky",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monsterbase",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mvpreward",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.EndlessXCfg=Ot;var Nt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterprop",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.EquipgemmasterXCfg=Nt;var kt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"sort",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"strengthen_level",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.EquipgemopenXCfg=kt;var Rt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.EquipgemXCfg=Rt;var Bt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"equipid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equiplevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equipgrade",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"strengthen_max",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cuilian_max",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"randomstar",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"random_pool",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"special_pool",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gem_num",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"random_show",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"baseprop",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"randomshow",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smeltexp",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"random_num",{get:function(){return this.g(17)},enumerable:true,configurable:true});return t}(i);t.EquipXCfg=Bt;var Gt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xilianrule",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.EquipxilianruleXCfg=Gt;var jt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Equip_fumoattrXCfg=jt;var Ut=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equiptype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needquenching",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needcasting",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Equip_fumoXCfg=Ut;var Ht=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"neednum",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"baseprop",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Equip_masterXCfg=Ht;var Vt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"purifylv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"systemchat",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"purifycost1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"purifycost2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"evolvecost",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Equip_purifyXCfg=Vt;var Ft=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equipgrade",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"index",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grade",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery3",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score3",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost_money",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute1",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition1",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute2",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition2",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute3",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition3",{get:function(){return this.g(19)},enumerable:true,configurable:true});return t}(i);t.Equip_quenchingXCfg=Ft;var Yt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equipgrade",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"strengthen_add",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost_money",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr_add",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.Equip_refiningXCfg=Yt;var qt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equip",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"intensifylv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"systemchat",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"intensifyprop",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost_money",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"intensifyexpend",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Equip_strengthenXCfg=qt;var zt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"equipid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"page",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taozhuang",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"partstage",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"return",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Equip_suitXCfg=zt;var Kt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taozhuang",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equipcount",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equipprop",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Equip_suit_attrXCfg=Kt;var Wt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Equip_unlockXCfg=Wt;var Xt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"index",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"message",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.ErrortipXCfg=Xt;var Qt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigtype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eventtype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"location",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pic",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talk",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.EventXCfg=Qt;var Jt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"funcid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pic",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.ExpgatewayXCfg=Jt;var Zt=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.Extra_awardXCfg=Zt;var $t=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dadingshichang",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"workshichang",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"youketime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shijianduan",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fading",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gongzuori",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nianlingzu",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xianchongjine",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"meiyuejine",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.FangchenmiXCfg=$t;var te=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jine",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"account",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.FanlifafangXCfg=te;var ee=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Fate_fuzengXCfg=ee;var ie=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gachatype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gachalimit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chatid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fatepool",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Fate_gachaXCfg=ie;var ne=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"poolid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"poolname",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itme",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"probability",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showname",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showexplain",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vipentrancename",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.Fate_poolXCfg=ne;var re=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Free_giftXCfg=re;var oe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reconmmend",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clear_item",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Fumobaoku_mountainXCfg=oe;var ae=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function_id",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"describe",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showword",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.FunctionopenXCfg=ae;var se=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"colselv",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"task",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maindlg",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"resident",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buttonshow",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"popout",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"location",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"newlink",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iso",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sameid",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prefunid",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"realm",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"opened",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconskin",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"closure",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"redrule",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buttonname",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buttonicon",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"windowname",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigicon",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"growicon",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"describe",{get:function(){return this.g(26)},enumerable:true,configurable:true});return t}(i);t.FunctionXCfg=se;var le=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cfgid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inversionrate",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.FundXCfg=le;var ue=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eventid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fuyuan",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eventtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"story",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewards",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewards1",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.FuyuanXCfg=ue;var pe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.GameconfigXCfg=pe;var he=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"eventid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levellimit",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dieani",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelregion",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"packid",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.GardeneventXCfg=he;var ce=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"everyexp",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"crit",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.GardenXCfg=ce;var fe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Garden_environmentXCfg=fe;var ge=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needgarden",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"year",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Garden_plantXCfg=ge;var de=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.GminfoXCfg=de;var ye=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"item1",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item2",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"costitem",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.GoldentouchXCfg=ye;var me=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buynum",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"actid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p3",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p4",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"banner_1",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"banner_2",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"batteryshow",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"giftvalue",{get:function(){return this.g(15)},enumerable:true,configurable:true});return t}(i);t.Gold_timegiftXCfg=me;var ve=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gongfaid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quagrade",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quest1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quest2",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quest3",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.GongfaXCfg=ve;var be=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gongfaid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layer",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sign",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelpointcost",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"special",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Gongfa_attributeXCfg=be;var _e=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Gongfa_fuzengXCfg=_e;var Ie=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"original",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"target",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.GourdrecastXCfg=Ie;var we=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sutype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrdown",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrup",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inherit",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"updateid",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"percent",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"updatecost",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"word",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wordback",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(16)},enumerable:true,configurable:true});return t}(i);t.GourdrefiningXCfg=we;var Le=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.GradedifferenceXCfg=Le;var Se=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equippart",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equipgrade",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qua",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Grow_equipXCfg=Se;var Ae=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prompt",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"countdown",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recommend",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Grow_levelXCfg=Ae;var Ee=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"countdown",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recommend",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Grow_strongXCfg=Ee;var Pe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"sceneid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bosssetbase",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossblood",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"looppath",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossweapon",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.GuajiXCfg=Pe;var xe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titlebg",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"entryicon",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chaperbg",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guanqiabg",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mijing",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.GuanqiachaperXCfg=xe;var Ce=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"close",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"picture",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.GuanqiafunctionopXCfg=Ce;var De=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.GuanqiarewardXCfg=De;var Me=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chapter",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossdrop",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posX",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posY",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monid",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward1",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bosssexp",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dropshow",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewarddrop",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.GuanqiaXCfg=Me;var Te=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guardid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lasttime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sold",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"modelres",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"high",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.GuardXCfg=Te;var Oe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"special",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shake",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jump",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"area",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dir",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"offxy",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.GuideitemXCfg=Oe;var Ne=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guide",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condtion",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.GuidespecialXCfg=Ne;var ke=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"group",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jump",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"loseid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"special",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tiggertype",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"funcid",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"statetype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemid",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fitemid",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"playone",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"done",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starttime",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"request",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tiggervalue",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"statevalue",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guidedes",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ext_para",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"extcomplete",{get:function(){return this.g(19)},enumerable:true,configurable:true});return t}(i);t.GuideXCfg=ke;var Re=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"daylimit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"people",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"deputy",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"elite",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.GuildbaseXCfg=Re;var Be=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"goldcost",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diamondcost",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"goldreward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.GuilddonateXCfg=Be;var Ge=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"function",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guildlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionpic",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.GuildfunctionXCfg=Ge;var je=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.GuildlobbyXCfg=je;var Ue=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.GuildnameXCfg=Ue;var He=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ulock",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.GuildshoplevelXCfg=He;var Ve=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"amount",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"counttype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"count",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shopid",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.GuildshopXCfg=Ve;var Fe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"star",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.GuildtaskstarXCfg=Fe;var Ye=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"task_id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"group",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rate",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"assistreward",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"picture",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.GuildtaskXCfg=Ye;var qe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.GuildtechattrXCfg=qe;var ze=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.GuildtechXCfg=ze;var Ke=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"syschat",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.GuildtreasureXCfg=Ke;var We=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maptype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battletype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"channel1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"channel2",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicpassive",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.HelpXCfg=We;var Xe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"need",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"awardtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"word",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backres",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backword",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Hlxd_ydXCfg=Xe;var Qe=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xlexp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"location",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigrealm",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posx",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posy",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mijing",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"putcondition",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pic",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicput",{get:function(){return this.g(12)},enumerable:true,configurable:true});return t}(i);t.HoleXCfg=Qe;var Je=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"treasureid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr2",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pic",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Hole_treasurelvXCfg=Je;var Ze=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"holeid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activation",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pic",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Hole_treasureXCfg=Ze;var $e=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quantity",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"number",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"event",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemid",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"region",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hbly",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param1",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.HongbaoXCfg=$e;var ti=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"speed",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"high",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"window",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseskill",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horsewuxing",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseres",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"offsets",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseicon",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horsenameres",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battershow",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"conditiontext",{get:function(){return this.g(15)},enumerable:true,configurable:true});return t}(i);t.HorseattrXCfg=ti;var ei=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needhorse",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.HorsecombinationXCfg=ei;var ii=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributes",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseskill",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horsewuxing",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Horse_updateXCfg=ii;var ni=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diff",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstershow",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"revive",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xcoor",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ycoor",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_per",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_guild",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.HuludaoXCfg=ni;var ri=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"diff",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blood1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blood2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blood3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blood4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blood5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"update",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"expparam",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward1",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward2",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward3",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward4",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward5",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award_item",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rank_award",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.Huludao_awardXCfg=ri;var oi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mp",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lasttime",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cd",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attack",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buffname",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Huludao_buffXCfg=oi;var ai=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"group",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"refresh",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"collectionid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxlimit",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"revive",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xcoor",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ycoor",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icenum",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcid",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.IceworldXCfg=ai;var si=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buffid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"overlaymax",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typemax",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrshow",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrdes",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showdes",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.InspireXCfg=si;var li=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cfgid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inversionrate",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.InvestmentXCfg=li;var ui=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"redtype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qua",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"broadcast",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtopping",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reqLevel",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p3",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p6",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"roleuse",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"expire",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stack",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"batchuse",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"originalnum",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"throw",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesis",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"redcall",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autouse",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"remind",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clientUse",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityuse",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namedispaly",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p4",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p7",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reskey",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"littleicon",{get:function(){return this.g(30)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cornermarker",{get:function(){return this.g(31)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cornermarkerpos",{get:function(){return this.g(32)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clientget",{get:function(){return this.g(33)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ordertype",{get:function(){return this.g(34)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"opentime",{get:function(){return this.g(35)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endtime",{get:function(){return this.g(36)},enumerable:true,configurable:true});return t}(i);t.ItemXCfg=ui;var pi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.JjcawardXCfg=pi;var hi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rank",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtitle",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.JjcrankXCfg=hi;var ci=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"realm",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scenename",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.KfxiuliansceneXCfg=ci;var fi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sitex",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sitey",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"realm",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xlexp",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"absorptivity",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"integralbase",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scenename",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gridname",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.KfxiulianXCfg=fi;var gi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rank",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtitle",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Kuafu_rankXCfg=gi;var di=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guanka",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"num",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weektimes",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlv",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"trueprice",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Kuafu_shopXCfg=di;var yi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"bigrealm",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage7",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage8",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage9",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.LeijieXCfg=yi;var mi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"point",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.LevelupskillXCfg=mi;var vi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterskillpoints",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exppool",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"actexp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemexp",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemmoney",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recommendcombat",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"breakmoney",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"break",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute1",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre1",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute2",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre2",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute3",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre3",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute4",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre4",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute5",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre5",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute6",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre6",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute7",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributepre7",{get:function(){return this.g(26)},enumerable:true,configurable:true});return t}(i);t.LevelXCfg=vi;var bi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.LifecardXCfg=bi;var _i=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.LimitXCfg=_i;var Ii=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limitlevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"returnexp",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namedispaly",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.LiuheXCfg=Ii;var wi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"openlevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Liuhe_chuandaiXCfg=wi;var Li=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guide",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"button",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.LoseguideXCfg=Li;var Si=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recommend",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.LoseXCfg=Si;var Ai=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"seedres",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"seedtopres",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.LotusseedXCfg=Ai;var Ei=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.LotusskillXCfg=Ei;var Pi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"costitem",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseres",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nameres",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.LotusXCfg=Pi;var xi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"item",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bag",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"group",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.MagicitemchangeXCfg=xi;var Ci=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconword",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"get",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.MagicweaponiconXCfg=Ci;var Di=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"personal",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"word",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.MagicweaponXCfg=Di;var Mi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicweaponid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"evolutelv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skilllevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Magicweapon_evoluteXCfg=Mi;var Ti=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"position",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Magicweapon_openXCfg=Ti;var Oi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needserver",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typedes",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showparam",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Magicweapon_passiveXCfg=Oi;var Ni=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicweaponid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grade",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needevo",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Magicweapon_updateXCfg=Ni;var ki=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"laygroup",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"supportelements",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specialtype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"roleshow",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bookshow",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"point",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"holeadd",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jiguanadd",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"laypro",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tag_1",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tag_2",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specialprogroup",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prorole",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"baseelements",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxelements",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"getmaxelements",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typeeffect1",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typeeffect2",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stardesc",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(30)},enumerable:true,configurable:true});return t}(i);t.Magic_baseXCfg=ki;var Ri=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gachatype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rookietimes",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chatid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"defendtimes",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"newpool",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rookienormalpool",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rookiedefendpool",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"normalpool",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"defendpool",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.Magic_gachaXCfg=Ri;var Bi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"site",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needteamlevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tagpic",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Magic_layXCfg=Bi;var Gi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Magic_lingtaiXCfg=Gi;var ji=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"poolid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"probability",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showprobability",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"luck",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Magic_poolXCfg=ji;var Ui=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"resonateid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicnum",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stagepic",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"requirement",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"resonatecondition",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"resonatedesc",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.Magic_resonateXCfg=Ui;var Hi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type_1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type_2",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type_3",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type_4",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typedes",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specialdes",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showparam",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sumdes",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param_1",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2_1",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr_1",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param_2",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2_2",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr_2",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param_3",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2_3",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr_3",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param_4",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param2_4",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr_4",{get:function(){return this.g(24)},enumerable:true,configurable:true});return t}(i);t.Magic_skillXCfg=Hi;var Vi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackpercent",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addpoint",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"holeadd",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jiguanadd",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addelements",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stardesc",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specialcost",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.Magic_starXCfg=Vi;var Fi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"parm1",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicid",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Magic_tiesXCfg=Fi;var Yi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needteamlevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addpoint",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addelements",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"getitem",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Magic_updateXCfg=Yi;var qi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"tempID",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"theme",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.MailtempXCfg=qi;var zi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"arrang",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sorting",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"colselv",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"task",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buttonshow",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hide",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"redflag",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autosize",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"linkmaindlgs",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconskin",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigicon",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effectadjust",{get:function(){return this.g(21)},enumerable:true,configurable:true});return t}(i);t.MaindlgXCfg=zi;var Ki=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"floor",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bubble",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"direct",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"enable",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"server",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"start_time",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"end_time",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dailog",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon_res",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recharge",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.MallXCfg=Ki;var Wi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"mainid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapcode",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"diam",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"second",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timepiece",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurt",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"status",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"column",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"randonm",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"columncola",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.MapcolumnXCfg=Wi;var Xi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"mapid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"click",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pk",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battletype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"revive",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pathpoint",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rightshow",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blesson",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"line",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxcount",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quickbattlebuff",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapscale",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rightmaindlg",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapfile",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"music",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xy",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigeffect",{get:function(){return this.g(18)},enumerable:true,configurable:true});return t}(i);t.MapXCfg=Xi;var Qi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Masterskill1XCfg=Qi;var Ji=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"masterid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"job",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxlevel",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frontlevel",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterskillid",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.MasterskilltreeXCfg=Ji;var Zi=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillorigin",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repel",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effectid",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sound",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.MasterskillXCfg=Zi;var $i=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.MedalnameXCfg=$i;var tn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timesforever",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"trueprice",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.MedalshopXCfg=tn;var en=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"frontmedal",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.MedalXCfg=en;var nn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"increase",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"explain",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.MijingincreaseXCfg=nn;var rn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"unlocktype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typeid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leveltype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"things",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mainroad",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battletime",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nleveid",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"paramshow",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"slayeraward",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.MijingjiesuoXCfg=rn;var on=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guanqia",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigrealm",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posX",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"posY",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mingzi",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"picture",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tips",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardshow",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"increase",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smallicon",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardway",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"guajibg",{get:function(){return this.g(19)},enumerable:true,configurable:true});return t}(i);t.MijingXCfg=on;var an=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"monid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chapterid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sheetid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cardtimes",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bonetimes",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"groupid",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossreward2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bonetimes2",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mondesc",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardshow",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossreward1",{get:function(){return this.g(12)},enumerable:true,configurable:true});return t}(i);t.MonsterbookXCfg=an;var sn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"chapterid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sheetid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chaptername",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chapterpic",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mondesc",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Monsterbook_chapterXCfg=sn;var ln=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"sheetid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sheetesc",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sheetpic",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Monsterbook_sheetXCfg=ln;var un=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battleset",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"element",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"head",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.MonstersetbaseXCfg=un;var pn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"soulid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needitem",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.MonstersoullevelXCfg=pn;var hn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"compoundattr",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlv",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.MonstersoulsuitXCfg=hn;var cn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"soulid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typename",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"soulname",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"soulres",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.MonstersoulXCfg=cn;var fn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"monid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"montype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monpro",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackdis",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monlevel",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attack_lower",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attack_upper",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"def",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackid",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cardtimes",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"energybar",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hpheight",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hpnum",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monname",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"specialprop",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ai",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monicon",{get:function(){return this.g(20)},enumerable:true,configurable:true});return t}(i);t.MonsterXCfg=fn;var gn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rechargeid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sycee",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"total_recharge",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vipreward",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"firstward",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.MonthcardXCfg=gn;var dn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxtime",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monstersetbase",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"unlock_title",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"towername",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"towerpicture",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewards",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.MountainXCfg=dn;var yn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"name",{get:function(){return this.g(0)},enumerable:true,configurable:true});return t}(i);t.NameXCfg=yn;var mn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"var7",{get:function(){return this.g(0)},enumerable:true,configurable:true});return t}(i);t.Name_jinXCfg=mn;var vn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"petid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pettype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qualityrat",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qualityshow",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pet_role",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"supportelements",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tag_2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bonetimes",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"newpetskill",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score2",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery2",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"basewuxing",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tag_1",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addattricon",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addattr",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smelt",{get:function(){return this.g(23)},enumerable:true,configurable:true});return t}(i);t.NewpetattributeXCfg=vn;var bn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"levelid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score7",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score8",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score9",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score10",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score11",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery2",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery3",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery4",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery5",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery6",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery7",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery8",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery9",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery10",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery11",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(23)},enumerable:true,configurable:true});return t}(i);t.Newpetattribute_levelXCfg=bn;var _n=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needteamlevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"returnitem",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Newpetattribute_updateXCfg=_n;var In=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"comid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"comstar",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"comtag",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needpet",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effectres",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.NewpetcombinationXCfg=In;var wn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"peteggid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"growtime",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cdgroup",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"baseattr",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petbrobability",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score3",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score4",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery2",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery3",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery4",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.NewpetgrowXCfg=wn;var Ln=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cdgroup",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hatchingperiod",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.NewpethatchXCfg=Ln;var Sn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"index",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addshow",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starcost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reitem",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.NewpetreputationXCfg=Sn;var An=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"newpetskill",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skilllevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petlevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petstar",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.NewpetskillXCfg=An;var En=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viplimit",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"unlockitem",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.NewpetspaceXCfg=En;var Pn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attriid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent1",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent2",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent3",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent4",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent5",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent6",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talent7",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.NewpettalentXCfg=Pn;var xn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starparam1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starparam2",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starreturn",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score1",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score2",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score3",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery2",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery3",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wuxingaddelements",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addattr",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stardesc",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"spcost",{get:function(){return this.g(16)},enumerable:true,configurable:true});return t}(i);t.NewpetvoluteXCfg=xn;var Cn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrtype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Newpet_baseXCfg=Cn;var Dn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needrecord",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needtowers",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankres",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.NobleXCfg=Dn;var Mn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"npcid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npctype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcmap",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x1",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dir",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dis",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"high",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"headoffx",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"headoffxsign",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"paopaoid",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcyincang",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hidestate",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcname",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nameurl",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talk",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param1",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npchead",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dlgpic",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"action",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clickarea",{get:function(){return this.g(23)},enumerable:true,configurable:true});return t}(i);t.NpcXCfg=Mn;var Tn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.PackXCfg=Tn;var On=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showitem",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Pack_ruleXCfg=On;var Nn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"postaura",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"boxaura",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp2",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.PeakXCfg=Nn;var kn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"progress",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.Peak_taskXCfg=kn;var Rn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"consume",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titletype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"upcost",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titleaura",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp2",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.Peak_testXCfg=Rn;var Bn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rank",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equiptype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankneed",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cuilianneed",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.PeifangXCfg=Bn;var Gn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"magicid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buffid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"elements",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fumocost",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showpro",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showdesc",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Peifang_updateXCfg=Gn;var jn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"affinityexp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"affinity",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lovevalue",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addshow",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.PetaffinityXCfg=jn;var Un=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needpet",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.PetcombinationXCfg=Un;var Hn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"petid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skilllevel",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"intelligence",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addattr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.PetevoluteXCfg=Hn;var Vn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stoneid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.PetgemXCfg=Vn;var Fn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.PetlevelXCfg=Fn;var Yn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"character",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"intelligence",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"baseattr",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addattr",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addition",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activation",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"additionlang",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.PetXCfg=Yn;var qn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"progress",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ulock",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.PickXCfg=qn;var zn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"window",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activationattr",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useattr",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useshow",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(12)},enumerable:true,configurable:true});return t}(i);t.PictureframeXCfg=zn;var Kn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uplevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterskillpoints",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"profession",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needtask",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backtype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nameres",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"prop",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"propdes",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"backres",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.PracticeXCfg=Kn;var Wn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"discount",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timeon",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eventype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pircetype",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"para",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Pushshop2XCfg=Wn;var Xn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"listid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"groupid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needbuyed",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"discount",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timeon",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eventype",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"para",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"items",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.PushshopXCfg=Xn;var Qn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"total_recharge_start",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"total_recharge_end",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"single_recharge_1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"single_recharge_2",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"last_recharge",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Pushshop_ruleXCfg=Qn;var Jn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layer",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cehuades",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"consume",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"remind",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Qiyu_duihuanXCfg=Jn;var Zn=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gachatype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gachalimit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chatid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"defendtimes",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qiyupool",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"defendpool",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Qiyu_gachaXCfg=Zn;var $n=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rangk",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Qiyu_paihangbangXCfg=$n;var tr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"poolid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtype",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"probability",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qualang",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itme",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"probability_show",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Qiyu_poolXCfg=tr;var er=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rounds",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Qiyu_renwuXCfg=er;var ir=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stem",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rightkey",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wronganswer",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.QuestionsXCfg=ir;var nr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"awards",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Questions_lotteryXCfg=nr;var rr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"index",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"id",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight_qua",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Random_poolXCfg=rr;var or=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rule1",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rule2",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Random_ruleXCfg=or;var ar=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lowlevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankaward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.RankingawardgeneralXCfg=ar;var sr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lowlevel",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelsec",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankaward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.RankingawardXCfg=sr;var lr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"rank",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"winscore",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"losescore",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"drawscore",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankname",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankicon",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankscore",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"honor",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.RankingXCfg=lr;var ur=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recharge",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vipexp",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"get",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"double",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"uniquetype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pushid",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showicon",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"productid",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"productname",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"banner",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subscript",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(17)},enumerable:true,configurable:true});return t}(i);t.RechargeXCfg=ur;var pr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"select_item1",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"select_item2",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"select_item3",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"productname",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Recharge_dingzhiXCfg=pr;var hr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"server",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.Recharge_resetXCfg=hr;var cr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.ReportXCfg=cr;var fr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.ResonateXCfg=fr;var gr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.RetrieveXCfg=gr;var dr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelattr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"orderattr",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"horseorderattr",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rideres",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.RideattrXCfg=dr;var yr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"usage",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"noble",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name1",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rolebase",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levels",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"equip_attr",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.RobotXCfg=yr;var mr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layer",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"consume",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"remind",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Ruqin_duihuanXCfg=mr;var vr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sequence",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"chatid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"appearance",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showname",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"kill",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damage",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.Ruqin_jishajiangliXCfg=vr;var br=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rangk",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Ruqin_paihangbangXCfg=br;var _r=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rounds",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Ruqin_renwuXCfg=_r;var Ir=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monster",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.SaveXCfg=Ir;var wr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"blood",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"statu",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Save_dungeonXCfg=wr;var Lr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rank",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Save_rankXCfg=Lr;var Sr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bossword",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"countdown",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ranklv",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"awardshow",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillshow",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Save_ruleXCfg=Sr;var Ar=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.ScoreXCfg=Ar;var Er=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"timeon",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eventype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recharge",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showtype",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showparam",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"gogao",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mailtemp",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"actid",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"seckill_ruleid",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mainicon",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"adjust",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp2",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp3",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"eject",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp4",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp5",{get:function(){return this.g(21)},enumerable:true,configurable:true});return t}(i);t.SeckillXCfg=Er;var Pr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"total_recharge_start",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"total_recharge_end",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"single_recharge_1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"single_recharge_2",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"last_recharge",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Seckill_ruleXCfg=Pr;var xr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"spirit",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"perexp",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rise",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"crit",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powerfirst",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powericon1",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powername1",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powerdes1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"linkskill1",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powersecond",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powericon2",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powername2",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"powerdes2",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"linkskill2",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"refreshcost",{get:function(){return this.g(18)},enumerable:true,configurable:true});return t}(i);t.Seven_spiritspromoteXCfg=xr;var Cr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"spirit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"requirement",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attack",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Seven_spiritsXCfg=Cr;var Dr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"client_type",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.ShangchengiconXCfg=Dr;var Mr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"shenbingid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qualitu",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tips",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"offsets",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quest",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.ShenbingXCfg=Mr;var Tr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shenbingid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"point",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointcost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointattr",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Shenbing_levelXCfg=Tr;var Or=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shenbingid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Shenbing_skilllevelXCfg=Or;var Nr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shenbingid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"star",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Shenbing_starXCfg=Nr;var kr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"masterid7",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.ShenshandilaomasterskillXCfg=kr;var Rr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid1",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid2",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid3",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid4",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid5",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid6",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid7",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.ShenshandilaoskillXCfg=Rr;var Br=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layerid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viewid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"row",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"setvisble",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leveltype",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battlegroup",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"battletime",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nleveid",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buff",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"shop",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showpicture",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"slayeraward",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"slayerawardshow",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layeraward",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layerawardshow",{get:function(){return this.g(17)},enumerable:true,configurable:true});return t}(i);t.ShenshandilaoXCfg=Br;var Gr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"class",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"teamlv",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"num",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weektimes",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"trueprice",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showprice",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showitem",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"date2",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"word",{get:function(){return this.g(18)},enumerable:true,configurable:true});return t}(i);t.ShopXCfg=Gr;var jr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"viprate",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.SignXCfg=jr;var Ur=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillorigin",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillshare",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limitdata",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skilltype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"damagetype",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"targettype",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"targetmax",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"targetpriority",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"coldtime",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurttype",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackpercent",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackvalue",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurttype1",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackpercent1",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mpcost",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showorder",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"distance",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"actionid",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(24)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repel",{get:function(){return this.g(25)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typeicon",{get:function(){return this.g(26)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(27)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typevalue",{get:function(){return this.g(28)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(29)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"selfstatus",{get:function(){return this.g(30)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"targetstatus",{get:function(){return this.g(31)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"passsiveattribute",{get:function(){return this.g(32)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"talentelement",{get:function(){return this.g(33)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(34)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"explain",{get:function(){return this.g(35)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"way",{get:function(){return this.g(36)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(37)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sound",{get:function(){return this.g(38)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneeffect",{get:function(){return this.g(39)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillshow",{get:function(){return this.g(40)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigeffect",{get:function(){return this.g(41)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillparameters1",{get:function(){return this.g(42)},enumerable:true,configurable:true});return t}(i);t.SkillXCfg=Ur;var Hr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"laiyuan",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"beici",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"big",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Skill_effectXCfg=Hr;var Vr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skin",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sceneeffect",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.Skill_skinXCfg=Vr;var Fr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelmin",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"levelmax",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needpracice",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needlevel",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attackvalue",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"passsiveattribute",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Skill_updateXCfg=Fr;var Yr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrfirst",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.SkinlvXCfg=Yr;var qr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skinid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"scale",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrfirst",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrsecond",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"modelres",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.SkinXCfg=qr;var zr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skinid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attributes",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Skin_updateXCfg=zr;var Kr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"type",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"return_money",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"return_item",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.SmeltXCfg=Kr;var Wr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.SoulattrenhanceXCfg=Wr;var Xr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"position",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starlevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stars",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"starattr",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"score",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.SoulattrXCfg=Xr;var Qr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"job",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stars",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.SoulspiritXCfg=Qr;var Jr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stand_or_fall",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bufftype",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isclear",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cleartype",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"overlaymax",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mutexgroup",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurttype",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dottype",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buffpercent",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"buffvalue",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effecttype",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typevalue",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clearvalue",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"elements",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"explain",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconid",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effectid",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect_position",{get:function(){return this.g(22)},enumerable:true,configurable:true});return t}(i);t.StatusXCfg=Jr;var Zr=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inspireid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mapid",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Status_blessXCfg=Zr;var $r=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sutype",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mutexgroup",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"elements",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"explain",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconid",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.Status_itemXCfg=$r;var to=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"plotid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"command",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leftright",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"seconds",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"func",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value2",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcname",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"words",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sks",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sksdes",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sksmove",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"playone",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"role",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dubin",{get:function(){return this.g(16)},enumerable:true,configurable:true});return t}(i);t.StoriesXCfg=to;var eo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reveal",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p2",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"p3",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp2",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp3",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.Subject_ejectXCfg=eo;var io=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cp1",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Subject_shounaXCfg=io;var no=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesistype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtypeid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"redflag",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesis_item",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"baserate",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"team_level",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"systemchat",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typename",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesis_materials1",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemaddrate",{get:function(){return this.g(12)},enumerable:true,configurable:true});return t}(i);t.SynthesisXCfg=no;var ro=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesistype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtypeid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesis_item",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"systemchat",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"typename",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesis_materials1",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"des",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"synthesis_materials2",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.Synthesis_equipXCfg=ro;var oo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"channel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"broadcast",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lang_chat",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.SystemchatXCfg=oo;var ao=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vipneed",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titlepic",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"trueprice",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showprice",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showitem",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Targettask_shopXCfg=ao;var so=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pointsneed",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isbigicon",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Targettask_stageXCfg=so;var lo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tag",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"progress",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"point",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Targettask_taskXCfg=lo;var uo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}t.prototype.get=function(){return this.g(0)};return t}(i);t.TargetXCfg=uo;var po=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"task_id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"totalcount",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needdays",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"front_id",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"next_id",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npc_id",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"qua",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sign",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"action",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"done",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wait",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endwait",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clientsubmit",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"desc",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"client_params",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reqlv",{get:function(){return this.g(19)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npc_pos",{get:function(){return this.g(20)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(21)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemshow",{get:function(){return this.g(22)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this.g(23)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"story",{get:function(){return this.g(24)},enumerable:true,configurable:true});return t}(i);t.TaskXCfg=po;var ho=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activationattr",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useattr",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iconword",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"get",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.TeamiconXCfg=ho;var co=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"teamlevel",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"tupocishi",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.TeamlevelXCfg=co;var fo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"daliytimeid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxnumber",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"roomname",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.TeamroomXCfg=fo;var go=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"jiguanid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"mijing",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stage",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"income",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"modelsize",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"putcondition",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"language",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"access",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"accesslanguage",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sheetres",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"itemid",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"anilocation",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.TiangongpuXCfg=go;var yo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"condition",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limittime",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"systemchat",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sword",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"window",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ranktype",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ios",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"param",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activationattr",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"useattr",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titleword",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"effect",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titleeffect",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"titleshow",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"conditiontext",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(17)},enumerable:true,configurable:true});return t}(i);t.TitleXCfg=yo;var mo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"monsterbase",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stroies",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.TransfermapXCfg=mo;var vo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ariselevel",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skillicon",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skilldetail",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attlist",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"banner",{get:function(){return this.g(10)},enumerable:true,configurable:true});return t}(i);t.TransferXCfg=vo;var bo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"map",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y1",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x2",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y2",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"url",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.TrapareaXCfg=bo;var _o=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"mapid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hp",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"areas",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showmachine",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"openrelation",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stoprelation",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"traptrigger",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rulepic",{get:function(){return this.g(9)},enumerable:true,configurable:true});return t}(i);t.TrapcontrolXCfg=_o;var Io=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"warntime",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"warnscalex",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"warnscaley",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtscalex",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtscaley",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtdelay",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurttime",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtcd",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtvalue",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"warnurl",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurturl",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtrange",{get:function(){return this.g(14)},enumerable:true,configurable:true});return t}(i);t.TraphurtXCfg=Io;var wo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"map",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"x1",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"y1",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dir",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"dis",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"times",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"namelang",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"iniaction",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clickaction",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"clickarea",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(13)},enumerable:true,configurable:true});return t}(i);t.TrapmachineXCfg=wo;var Lo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"hurtid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"duration",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"interval",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"count",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"pertime",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"randomdis",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"triggertype",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"triggertime",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.TraptriggerXCfg=Lo;var So=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"category",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeat",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weight",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"record",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"radio",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"showrate",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.TreasurehuntXCfg=So;var Ao=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"luck",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.TreasureluckXCfg=Ao;var Eo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.TreasureshopXCfg=Eo;var Po=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"layer",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"consume",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"remind",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.Ttg_duihuanXCfg=Po;var xo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardshow",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.Ttg_jianzaojiangliXCfg=xo;var Co=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rangk",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Ttg_paihangbangXCfg=Co;var Do=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rounds",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Ttg_renwuXCfg=Do;var Mo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"type",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"resclient",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip0",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip1",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip2",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip3",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip4",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip5",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip6",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip7",{get:function(){return this.g(11)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip8",{get:function(){return this.g(12)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip9",{get:function(){return this.g(13)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip10",{get:function(){return this.g(14)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip11",{get:function(){return this.g(15)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip12",{get:function(){return this.g(16)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vip13",{get:function(){return this.g(17)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(18)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(19)},enumerable:true,configurable:true});return t}(i);t.VippriXCfg=Mo;var To=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"vipgift",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"show_level",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.VipXCfg=To;var Oo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"rankmin",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rankmax",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"title",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"award",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.Vsranking_awardXCfg=Oo;var No=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardlow",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardup",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.WarorderrankXCfg=No;var ko=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"ID",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"numlimit",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"ranklimit",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.WarordershopXCfg=ko;var Ro=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"taskid",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"limit",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name2",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.WarordertaskXCfg=Ro;var Bo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"level",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"exp",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"day",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grandreward",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"advancedreward",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"price",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.WarorderXCfg=Bo;var Go=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weaponid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"level",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skill",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"word",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.WeaponXCfg=Go;var jo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"weaponid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"strengthlv",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attribute",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addattr",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.Weapon_sterngthXCfg=jo;var Uo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"day",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.WeekcardXCfg=Uo;var Ho=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"order",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"windowname",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.WindowXCfg=Ho;var Vo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"functionid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rewardnum",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reset",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"complete",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(6)},enumerable:true,configurable:true});return t}(i);t.Wx_fenxiangXCfg=Vo;var Fo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"subtype",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"stars",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"name",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"postype",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"recovery",{get:function(){return this.g(7)},enumerable:true,configurable:true});return t}(i);t.XinfaattrXCfg=Fo;var Yo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"position",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"open",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.XinfacaseposXCfg=Yo;var qo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"sort",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.XinfacaseXCfg=qo;var zo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"lv",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needqua",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cost",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});return t}(i);t.XinfalvXCfg=zo;var Ko=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"suitid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quality",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"neednum",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"needid",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"position",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"nameame",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"suitprop",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"suitskill",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.XinfasuitXCfg=Ko;var Wo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigrealm",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"number",{get:function(){return this.g(2)},enumerable:true,configurable:true});return t}(i);t.XiulianmedicineXCfg=Wo;var Xo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"function_id",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"type",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"percent",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"icon",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"describe",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.XiuliantujingXCfg=Xo;var Qo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bigrealm",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"smallrealm",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"section",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"rolelevel",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xlexp",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"absorptivity",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addition",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"successrate",{get:function(){return this.g(8)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"failrate",{get:function(){return this.g(9)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"time",{get:function(){return this.g(10)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"break",{get:function(){return this.g(11)},enumerable:true,configurable:true});return t}(i);t.XiulianXCfg=Qo;var Jo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"job",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xiulian",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addbattery",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attrclient",{get:function(){return this.g(5)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"res",{get:function(){return this.g(6)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this.g(7)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"attr_bigshow",{get:function(){return this.g(8)},enumerable:true,configurable:true});return t}(i);t.Xiulian_attrXCfg=Jo;var Zo=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"laoqudao",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"xinqudao",{get:function(){return this.g(1)},enumerable:true,configurable:true});return t}(i);t.ZhanghaohutongXCfg=Zo;var $o=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.ZhuanpangongshiXCfg=$o;var ta=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grid",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"grandprize",{get:function(){return this.g(3)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"endgrandprize",{get:function(){return this.g(4)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"item",{get:function(){return this.g(5)},enumerable:true,configurable:true});return t}(i);t.ZhuanpanwupinXCfg=ta;var ea=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.b=t;i.p=e;return i}Object.defineProperty(t.prototype,"id",{get:function(){return this.g(0)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this.g(1)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"activityid",{get:function(){return this.g(2)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"reward",{get:function(){return this.g(3)},enumerable:true,configurable:true});return t}(i);t.ZhuanpanXCfg=ea})(cfgCls||(cfgCls={}));var fc;(function(t){var e=function(){function t(){this.curTime=0;this.status=false;this.list=[]}t.prototype.add=function(t,e,i){var n={};n.dataList=t;n.handler=e;n.drawCnt=i||game.Context.framedraw;this.list.push(n)};t.prototype.addByObj=function(t,e){if(t["csv"]&&t["loopNode"]){var i=new Laya.Handler(t,t["loopNode"]);this.add(t["csv"]["getArray"](),i,e)}else{throw Error("检查_this有没有实现csv和loopNode的接口")}};t.prototype.start=function(t){this.endCallBack=t;this.run()};t.prototype.run=function(){if(this.list.length>0){var t=this.list.shift();this.doAction(t)}else{this.endCallBack.run()}};t.prototype.ef=function(t){var e=0;var i=t.dataList;if(i){for(var n=0,r=i.length;n<r;++n){if(n==t.index){var o=i[n];t.handler.runWith([o,n]);t.index++;e++;if(e>=t.drawCnt){var a=app.getLang("load_text6")+"("+e+"/"+i.length+")";manager.LoadingManager.instance.setText(a);manager.LoadingManager.instance.updateGameLoading(this.status?1:0);this.status=!this.status;Laya.timer.frameOnce(1,this,this.ef,[t]);return}}}}else{t.handler.run()}this.run()};t.prototype.doAction=function(t){t.index=0;Laya.timer.frameOnce(1,this,this.ef,[t])};return t}();t.FrameCall=e})(fc||(fc={}));var fc;(function(t){var e=function(){function t(){this.time=10;this.list=[];Laya.timer.once(this.time,this,this.ef)}t.prototype.ef=function(){if(this.list.length>0){var t=this.list.shift();t.handler.runWith(t.data)}Laya.timer.once(this.time,this,this.ef)};t.prototype.add=function(t,e){var i={};i.handler=t;i.data=e;this.list.push(i)};return t}();t.FrameCallLater=e})(fc||(fc={}));var bc;(function(t){var s=function(){function v(){this.useFill=true}v.tl_bintree=function(t){var e=0;var i=t;while(i!=1){i=i/2;e++;if(i==0){break}}return e};v.setv=function(t,e){t=t|e;return t};v.resetv=function(t,e){return~e&t};v.getv=function(t,e){return(t&e)>>this.tl_bintree(e)};v.prototype.parse=function(t,e){if(!this._isParse){var i=Laya.timer.currTimer;this._isParse=true;t.pos=e+this.pos;this._start=e;this.bs=t;this.vo=new scene.MapVO;var n=this.vo;n.map=this;n.obj=[];n.eff=[];n.bg=new scene.MapBgCfg;n.bg.sliceWidth=t.getUint16();n.bg.sliceHeight=t.getUint16();n.bg.bgOffsetX=t.getInt32();n.bg.bgOffsetY=t.getInt32();n.bg.bgXNum=t.getInt32();n.bg.bgYNum=t.getInt32();var r=t.getInt32();var o=t.getInt32();n.bg.bgw=t.getInt32();n.bg.bgh=t.getInt32();if(n.bg.bgw==0&&n.bg.bgh==0){console.error("[%s]>>>>>>>>>>>>>>>>>>>>> bgw = 0,bgh = 0",this.mapName)}this.w=r;this.h=o;this.offset=t.pos;if(this.useFill){n.mask=[];n.att=[];n.att.length=r;for(var a=0;a<r;a++){n.att[a]=[];n.att[a].length=o;n.mask[a]=[];n.mask[a].length=o;for(var s=0;s<o;s++){var l=this.bs.readByte();n.att[a][s]=l;n.mask[a][s]=v.getv(l,v.BIT_MASK)==1?1:0}}var u=this.bs.getInt32();for(var a=0;a<u;a++){var p=this.bs.readUTFString();var h=this.bs.getInt32();var c=this.bs.getInt32();var f=this.bs.getInt32();for(var g=0;g<h;g++){var d=this.bs.getInt32();var y=this.bs.getInt32();var m=new scene.MapEffCfg;m.base="res/effects/";m.w=c;m.h=f;m.x=d;m.z=y;m.img=p;n.eff.push(m)}}}scene.SceneParser.parser(this.vo);this.vo.xSize=r;this.vo.zSize=o}};v.prototype.getXY=function(t,e){var i=0;for(var n=0;n<this.w;n++){for(var r=0;r<this.h;r++){if(n==t&&e==r){this.bs.pos=this.offset+i;var o=this.bs.readByte();return o}i++}}};v.BIT_COLLISION=1;v.BIT_MASK=2;return v}();t.MapByteCfg=s;var e=function(){function t(t){var e=new laya.utils.Byte(t.asArrayBuffer());this.bs=e;this.list=[];var i=e.getInt16();for(var n=0;n<i;n++){var r=e.readUTFString();var o=e.getUint32();var a=new s;a.mapName=r;a.pos=o;this.list.push(a)}this.start=e.pos}t.prototype.getMapVO=function(t){for(var e=0;e<this.list.length;e++){var i=this.list[e];if(i.mapName==t){i.parse(this.bs,this.start);return i.vo}}};return t}();t.MapBytes=e})(bc||(bc={}));var app;(function(t){var e=function(){function t(){}t.init=function(){laya.ani.bone.Skeleton.prototype["_update"]=function(t){t===void 0&&(t=true);if(this._pause)return;if(t&&this._indexControl){return}var e=this.timer.currTimer;var i=this._player.currentKeyframeIndex;var n=e-this._lastTime;if(t){this._player._update(n)}else{i=-1}this._lastTime=e;if(!this._player)return;this._index=this._clipIndex=this._player.currentKeyframeIndex;if(this._index<0)return;if(n>0&&this._clipIndex==i&&this._lastUpdateAniClipIndex==this._aniClipIndex){return}this._lastUpdateAniClipIndex=this._aniClipIndex;if(i>this._clipIndex&&this._eventIndex!=0){this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex);this._eventIndex=0}var r;var o=this._templet.eventAniArr;var a=o[this._aniClipIndex];var s;if(a&&this._eventIndex<a.length){r=a[this._eventIndex];if(r.time>=this._player.playStart&&r.time<=this._player.playEnd){if(this._player.currentPlayTime>=r.time){this.event("label",r);this._eventIndex++;if(this._playAudio&&r.audioValue&&r.audioValue!=="null"){s=Laya.SoundManager.playSound(this._player.templet._path+r.audioValue,1,Laya.Handler.create(this,this._onAniSoundStoped));Laya.SoundManager.playbackRate=this._player.playbackRate;s&&this._soundChannelArr.push(s)}}}else if(r.time<this._player.playStart&&this._playAudio&&r.audioValue&&r.audioValue!=="null"&&this._player.playEnd-this._player.currentPlayTime>.1){this._eventIndex++;s=Laya.SoundManager.playSound(this._player.templet._path+r.audioValue,1,Laya.Handler.create(this,this._onAniSoundStoped),null,(this._player.currentPlayTime-r.time)/1e3);Laya.SoundManager.playbackRate=this._player.playbackRate;s&&this._soundChannelArr.push(s)}else{this._eventIndex++}}var l;if(this._aniMode==0){l=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex);if(l){if(this.graphics!=l){this.graphics=l}this.event("CLIP_CHANGE",this._clipIndex);return}else{var u=0,p=0;p=this._clipIndex;while(!this._templet.getGrahicsDataWithCache(this._aniClipIndex,p-1)&&p>0){p--}if(p<this._clipIndex){for(u=p;u<this._clipIndex;u++){this._createGraphics(u)}}this.event("CLIP_CHANGE",this._clipIndex)}}else if(this._aniMode==1){l=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex);if(l){if(this.graphics!=l){this.graphics=l}return}else{p=this._clipIndex;while(!this._getGrahicsDataWithCache(this._aniClipIndex,p-1)&&p>0){p--}if(p<this._clipIndex){for(u=p;u<this._clipIndex;u++){this._createGraphics(u)}}}}this._createGraphics()};laya.ani.bone.Skeleton.prototype["_createGraphics"]=function(t){t===void 0&&(t=-1);if(t==-1)t=this._clipIndex;var e=t*this._player.cacheFrameRateInterval;var i;var n=this._templet.drawOrderAniArr;var r=n[this._aniClipIndex];if(r&&r.length>0){this._drawOrderIndex=0;i=r[this._drawOrderIndex];while(e>=i.time){this._drawOrder=i.drawOrder;this._drawOrderIndex++;if(this._drawOrderIndex>=r.length){break}i=r[this._drawOrderIndex]}}var o;if(this._aniMode==0||this._aniMode==1){this.graphics=laya.ani.GraphicsAni["create"]()}else{if(this.graphics instanceof laya.ani.GraphicsAni){this.graphics.clear()}else{this.graphics=laya.ani.GraphicsAni["create"]()}}o=this.graphics;var a=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],t,e);var s=this._aniSectionDic[this._aniClipIndex];var R;var l=0;var u=0,p=0,h=0,c=0;var f;var g;var d;var y;var m=this._templet.srcBoneMatrixArr.length;for(u=0,c=s[0];u<m;u++){y=this._boneList[u];d=this._templet.srcBoneMatrixArr[u];y.resultTransform.scX=d.scX*this._curOriginalData[l++];y.resultTransform.skX=d.skX+this._curOriginalData[l++];y.resultTransform.skY=d.skY+this._curOriginalData[l++];y.resultTransform.scY=d.scY*this._curOriginalData[l++];y.resultTransform.x=d.x+this._curOriginalData[l++];y.resultTransform.y=d.y+this._curOriginalData[l++];if(this._templet.tMatrixDataLen===8){y.resultTransform.skewX=d.skewX+this._curOriginalData[l++];y.resultTransform.skewY=d.skewY+this._curOriginalData[l++]}}var v={};var b={};var _;for(c+=s[1];u<c;u++){_=a[u];v[_.name]=this._curOriginalData[l++];b[_.name]=this._curOriginalData[l++];this._curOriginalData[l++];this._curOriginalData[l++];this._curOriginalData[l++];this._curOriginalData[l++]}var I={};var w={};for(c+=s[2];u<c;u++){_=a[u];I[_.name]=this._curOriginalData[l++];w[_.name]=this._curOriginalData[l++];this._curOriginalData[l++];this._curOriginalData[l++];this._curOriginalData[l++];this._curOriginalData[l++]}if(this._pathDic){var L;for(c+=s[3];u<c;u++){_=a[u];L=this._pathDic[_.name];if(L){var S=new Byte(_.extenData);switch(S.getByte()){case 1:L.position=this._curOriginalData[l++];break;case 2:L.spacing=this._curOriginalData[l++];break;case 3:L.rotateMix=this._curOriginalData[l++];L.translateMix=this._curOriginalData[l++];break}}}}if(this._yReverseMatrix){this._rootBone.update(this._yReverseMatrix)}else{this._rootBone.update(Laya.Matrix.TEMP.identity())}if(this._ikArr){var A;for(u=0,c=this._ikArr.length;u<c;u++){A=this._ikArr[u];if(I.hasOwnProperty(A.name)){A.bendDirection=I[A.name]}if(w.hasOwnProperty(A.name)){A.mix=w[A.name]}A.apply()}}if(this._pathDic){for(var E in this._pathDic){L=this._pathDic[E];L.apply(this._boneList,o)}}if(this._tfArr){var P;for(u=0,h=this._tfArr.length;u<h;u++){P=this._tfArr[u];P.apply()}}for(u=0,h=this._boneList.length;u<h;u++){y=this._boneList[u];g=this._bindBoneBoneSlotDic[y.name];y.resultMatrix.copyTo(this._boneMatrixArray[u]);if(g){for(p=0,c=g.length;p<c;p++){f=g[p];if(f){f.setParentMatrix(y.resultMatrix)}}}if(this.resultMatrixMap){if(!this.resultMatrixMap[y.name]){this.resultMatrixMap[y.name]={}}if(!this.resultMatrixMap[y.name][t]){this.resultMatrixMap[y.name][t]={}}this.resultMatrixMap[y.name][t]=[y.resultMatrix.tx,y.resultMatrix.ty]}}var x={};var C=this._templet.deformAniArr;var D;var B;var G;if(C&&C.length>0){if(this._lastAniClipIndex!=this._aniClipIndex){this._lastAniClipIndex=this._aniClipIndex;for(u=0,c=this._boneSlotArray.length;u<c;u++){f=this._boneSlotArray[u];f.deformData=null}}var M=C[this._aniClipIndex];D=M["default"];this._setDeform(D,x,this._boneSlotArray,e);var T;for(T in M){if(T!="default"&&T!=this._skinName){D=M[T];this._setDeform(D,x,this._boneSlotArray,e)}}D=M[this._skinName];this._setDeform(D,x,this._boneSlotArray,e)}var O;var N;var k;if(this._drawOrder){for(u=0,c=this._drawOrder.length;u<c;u++){f=this._boneSlotArray[this._drawOrder[u]];O=v[f.name];N=b[f.name];if(!isNaN(N)){o.save();o.alpha(N)}if(!isNaN(O)&&O!=-2){if(this._templet.attachmentNames){f.showDisplayByName(this._templet.attachmentNames[O])}else{f.showDisplayByIndex(O)}}if(x[this._drawOrder[u]]){k=x[this._drawOrder[u]];if(f.currDisplayData&&k[f.currDisplayData.attachmentName]){f.deformData=k[f.currDisplayData.attachmentName]}else{f.deformData=null}}else{f.deformData=null}if(!isNaN(N)){f.draw(o,this._boneMatrixArray,this._aniMode==2,N)}else{f.draw(o,this._boneMatrixArray,this._aniMode==2)}if(!isNaN(N)){o.restore()}}}else{for(u=0,c=this._boneSlotArray.length;u<c;u++){f=this._boneSlotArray[u];O=v[f.name];N=b[f.name];if(!isNaN(N)){o.save();o.alpha(N)}if(!isNaN(O)&&O!=-2){if(this._templet.attachmentNames){f.showDisplayByName(this._templet.attachmentNames[O])}else{f.showDisplayByIndex(O)}}if(x[u]){k=x[u];if(f.currDisplayData&&k[f.currDisplayData.attachmentName]){f.deformData=k[f.currDisplayData.attachmentName]}else{f.deformData=null}}else{f.deformData=null}if(!isNaN(N)){f.draw(o,this._boneMatrixArray,this._aniMode==2,N)}else{f.draw(o,this._boneMatrixArray,this._aniMode==2)}if(!isNaN(N)){o.restore()}}}if(this._aniMode==0){this._templet.setGrahicsDataWithCache(this._aniClipIndex,t,o)}else if(this._aniMode==1){this._setGrahicsDataWithCache(this._aniClipIndex,t,o)}}};return t}();t.AniRewriter=e})(app||(app={}));var app;(function(t){var e=function(){function t(){}t.init=function(){laya.ui.ProgressBar.prototype.effectAdd=function(e,i,n,r,t){var o=this;if(n===void 0){n=600}if(r===void 0){r=0}if(t===void 0){t=true}Laya.Tween.clearAll(this);if(t&&e<this.value){r+=1}var a=0;var s=function(){var t=(1-o.value)*n;Laya.Tween.to(o,{value:1},t,Laya.Ease.linearNone,new Laya.Handler(o,function(){a++;o.value=0;if(a<r){s.call(o)}else{l.call(o)}}))};var l=function(){var t=e*n;Laya.Tween.to(o,{value:e},t,Laya.Ease.linearNone,new Laya.Handler(o,function(){if(i){i.run()}}))};if(r>0){s.call(this)}else{l.call(this)}};laya.ui.List.prototype.setContentSize=function(t,e){this._content.width=t;this._content.height=e;this.scrollRectOffX=this.scrollRectOffX|0;this.scrollRectOffY=this.scrollRectOffY|0;if(this._scrollBar||this._offset.x!=0||this._offset.y!=0){this._content.scrollRect||(this._content.scrollRect=new Laya.Rectangle);this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,t+this.scrollRectOffX*2,e+this.scrollRectOffY*2);this._content.scrollRect=this._content.scrollRect}this._content.x=-this.scrollRectOffX;this._content.y=-this.scrollRectOffY;this.event("resize")};laya.ui.List.prototype["onScrollBarChange"]=function(t){this.runCallLater(this.changeCells);var e=this._scrollBar.value;var i=this._isVertical?this.repeatX:this.repeatY;var n=this._isVertical?this.repeatY:this.repeatX;if(!this.offStartIndex){this.offStartIndex=0}var r=Math.floor(e/this._cellSize)-this.offStartIndex;if(!this.cacheContent){var o=r*i;var a=0;if(o>this._startIndex){a=o-this._startIndex;var s=true;var l=this._startIndex+i*(n+1);this._isMoved=true}else if(o<this._startIndex){a=this._startIndex-o;s=false;l=this._startIndex-1;this._isMoved=true}for(var u=0;u<a;u++){if(s){var p=this._cells.shift();this._cells[this._cells.length]=p;var h=l+u}else{p=this._cells.pop();this._cells.unshift(p);h=l-u}var c=Math.floor(h/i)*this._cellSize;this._isVertical?p.y=c:p.x=c;this.renderItem(p,h)}this._startIndex=o;this.changeSelectStatus()}else{a=n+1;if(this._createdLine-r<a){this._createItems(this._createdLine,i,this._createdLine+a);this.renderItems(this._createdLine*i,0);this._createdLine+=a}}var f=this._content.scrollRect;if(this._isVertical){f.y=e-this._offset.y-this.scrollRectOffY;f.x=-this._offset.x}else{f.y=-this._offset.y;f.x=e-this._offset.x-this.scrollRectOffX}this._content.scrollRect=f};Laya.getset(false,laya.ui.List.prototype,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t||this.ignoreSelectIndex){this._selectedIndex=t;this.changeSelectStatus();this.event("change");this.selectHandler&&this.selectHandler.runWith(t);this.startIndex=this._startIndex}});laya.ui.List.prototype["_createItems"]=function(t,e,i){if(!this.offStartIndex){this.offStartIndex=0}t-=this.offStartIndex;i+=this.offStartIndex;var n=this._content;var r=this._getOneCell();var o=r.width+this._spaceX;var a=r.height+this._spaceY;if(this.cacheContent){var s=new Laya.Box;s.cacheAsBitmap=true;s.pos((this._isVertical?0:t)*o,(this._isVertical?t:0)*a);this._content.addChild(s);this._content.optimizeScrollRect=true;n=s}else{var l=[];for(var u=this._cells.length-1;u>-1;u--){var p=this._cells[u];p.removeSelf();l.push(p)}this._cells.length=0}for(var h=t;h<i;h++){for(var c=0;c<e;c++){if(l&&l.length){r=l.pop()}else{r=this.createItem()}r.x=(this._isVertical?c:h)*o-n.x;r.y=(this._isVertical?h:c)*a-n.y;r.name="item"+(h*e+c);if(this.boReverseCell){n.addChildAt(r,0)}else{n.addChild(r)}this.addCell(r)}}};Laya.getset(false,laya.ui.List.prototype,"name",function(){return this._name},function(t){this._name=t;if(t!=""){var e=t.split("_");for(var i=0,n=e.length;i<n;i+=2){if(e[i]=="sx"&&e[i+1]&&!this.scrollRectOffX){this.scrollRectOffX=parseInt(e[i+1])}else if(e[i]=="sy"&&e[i+1]&&!this.scrollRectOffY){this.scrollRectOffY=parseInt(e[i+1])}}}});laya.ui.DialogManager.prototype.checkIfResultSmall=function(){for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);if(e&&e.boSmallResult){return true}}return false}};return t}();t.LibRewriter=e;var i=function(){function t(){}t.init=function(){laya.events.EventDispatcher.prototype.off=function(t,e,i,n){n===void 0&&(n=false);if(!this._events||!this._events[t])return this;var r=this._events[t];if(r!=null){if(r.run){if((!e||r.caller===e)&&r.method===i&&(!n||r.once)){delete this._events[t];r.recover()}}else{var o=0;var a=r.length;for(var s=0,l=r.length;s<l;s++){var u=r[s];if(!u){o++;r.splice(s,1);s--;l--;continue}if(u&&(!e||u.caller===e)&&u.method===i&&(!n||u.once)){o++;r[s]=null;u.recover()}}if(o===a)delete this._events[t]}}return this}};return t}();t.EventRewriter=i;var n=function(){function e(){}e.init=function(){Laya.getset(false,laya.display.Sprite.prototype,"visible",function(){return this._style.visible},function(t){if(this._style&&this._style.visible!==t){this.getStyle().visible=t;this.conchModel&&this.conchModel.visible(t);if(this.boLink){util.SpriteLinkUtil.setLinkChildsVisible(this,t)}this.parentRepaint();this.event(e.VISIBLE_CHAGNE)}});Laya.getset(false,laya.display.Sprite.prototype,"x",function(){return this._x},function(t){if(this._x!==t){if(this.destroyed)return;this._x=t;if(this.boLink){util.SpriteLinkUtil.refreshLinkChildsPos(this)}this.conchModel&&this.conchModel.pos(t,this._y);var e=this._parent;if(e&&e._repaint===0){e._repaint=1;e.parentRepaint()}if(this._$P.maskParent&&this._$P.maskParent._repaint===0){this._$P.maskParent._repaint=1;this._$P.maskParent.parentRepaint()}}});Laya.getset(false,laya.display.Sprite.prototype,"y",function(){return this._y},function(t){if(this._y!==t){if(this.destroyed)return;this._y=t;if(this.boLink){util.SpriteLinkUtil.refreshLinkChildsPos(this)}this.conchModel&&this.conchModel.pos(this._x,t);var e=this._parent;if(e&&e._repaint===0){e._repaint=1;e.parentRepaint()}if(this._$P.maskParent&&this._$P.maskParent._repaint===0){this._$P.maskParent._repaint=1;this._$P.maskParent.parentRepaint()}}});Laya.getset(false,laya.display.Sprite.prototype,"linkOffX",function(){return this._linkOffX},function(t){if(this._linkOffX!==t){this._linkOffX=t;util.SpriteLinkUtil.refreshLinkChildsPos(this.linkParent)}});Laya.getset(false,laya.display.Sprite.prototype,"linkOffY",function(){return this._linkOffY},function(t){if(this._linkOffY!==t){this._linkOffY=t;util.SpriteLinkUtil.refreshLinkChildsPos(this.linkParent)}});Laya.getset(false,laya.display.Sprite.prototype,"boSmallResult",function(){return this._boSmallResult},function(t){if(this._boSmallResult!==t){this._boSmallResult=t}if(this._boSmallResult){this.on(Laya.Event.UNDISPLAY,this,this.smallResultClose)}});laya.display.Sprite.prototype.smallResultClose=function(){Laya.stage.event("small_result_close")}};e.VISIBLE_CHAGNE="visible_change";return e}();t.NodeRewriter=n;var r=function(){function t(){}t.init=function(){Laya.Loader.cacheRes=function(t,e){t=Laya.URL.formatURL(t);if(e.bitmap&&e.bitmap["_url"]&&e.bitmap["_url"].indexOf("main")!=-1){Laya.AtlasResourceManager.instance.pushData(e)}if(Laya.Loader.loadedMap[t]!=null){console.warn("Resources already exist,is repeated loading:",t)}else{Laya.Loader.loadedMap[t]=e}}};return t}();t.LoaderRewriter=r;var o=function(){function w(){}w.isAtlas=function(t){for(var e=0,i=w.matchKeys.length;e<i;e++){if(t.indexOf(w.matchKeys[e])!=-1){return true}}return false};w.isBattleAtlas=function(t){for(var e=0,i=w.matchBattleKeys.length;e<i;e++){if(t.indexOf(w.matchBattleKeys[e])!=-1){return true}}return false};w.init=function(){laya.webgl.atlas.AtlasResourceManager.prototype.pushData=function(t){var e=t.bitmap;var i=e["_url"]&&w.isAtlas(e["_url"]);var n=false;var r=false;if(!i){n=e["_url"]&&e["_url"].indexOf("ani/role")!=-1;if(!r){r=e["_url"]&&w.isBattleAtlas(e["_url"])}}var o=-1;var a=null;if(i){if(!w.mainIconAtlaser){w.mainIconAtlaser=new Laya.Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,1e3)}a=w.mainIconAtlaser;o=w.mainIconAtlaser.findBitmapIsExist(e)}else if(n){if(!w.roleAtlasers[w.roleDex]){w.roleAtlasers[w.roleDex]=new Laya.Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,1001+w.roleDex)}a=w.roleAtlasers[w.roleDex];o=w.roleAtlasers[w.roleDex].findBitmapIsExist(e)}else if(r){if(!w.battleAtlasers[w.battleDex]){w.battleAtlasers[w.battleDex]=new Laya.Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,1001+w.roleDex)}a=w.battleAtlasers[w.battleDex];o=w.battleAtlasers[w.battleDex].findBitmapIsExist(e)}else{var s=0,l=0,u=0;for(s=0,l=this._atlaserArray.length;s<l;s++){u=(this._curAtlasIndex+s)%l;a=this._atlaserArray[u];o=a.findBitmapIsExist(e);if(o!=-1){break}}}if(o!=-1){var p=a.InAtlasWebGLImagesOffsetValue[o];y=p[0];m=p[1];a.addToAtlas(t,y,m);return true}else{var h=t;this._setAtlasParam=false;var c=false;var f=Math.ceil((t.bitmap.width+2)/this._gridSize);var g=Math.ceil((t.bitmap.height+2)/this._gridSize);var d=false;if(i){var y=0,m=0;var v=a.addTex(1,f,g);if(v.ret){y=v.x*this._gridSize+1;m=v.y*this._gridSize+1;e.lock=true;a.addToAtlasTexture(e,y,m);a.addToAtlas(t,y,m);d=true;return d}}else if(n){var y=0,m=0;var v=a.addTex(1,f,g);if(v.ret){y=v.x*this._gridSize+1;m=v.y*this._gridSize+1;e.lock=true;a.addToAtlasTexture(e,y,m);a.addToAtlas(t,y,m);d=true;return d}else{w.roleDex++;d=this.pushData(t);if(d){return d}}}else if(r){var y=0,m=0;var v=a.addTex(1,f,g);if(v.ret){y=v.x*this._gridSize+1;m=v.y*this._gridSize+1;e.lock=true;a.addToAtlasTexture(e,y,m);a.addToAtlas(t,y,m);d=true;return d}else{w.battleDex++;d=this.pushData(t);if(d){return d}}}else{for(var b=0;b<2;b++){var _=this._maxAtlaserCount;for(s=0;s<_;s++){u=(this._curAtlasIndex+s)%_;this._atlaserArray.length-1>=u||this._atlaserArray.push(new Laya.Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,Laya.AtlasResourceManager["_sid_"]++));var I=this._atlaserArray[u];var y=0,m=0;var v=I.addTex(1,f,g);if(v.ret){y=v.x*this._gridSize+1;m=v.y*this._gridSize+1;e.lock=true;I.addToAtlasTexture(e,y,m);I.addToAtlas(t,y,m);d=true;this._curAtlasIndex=u;break}}if(d)break;this._atlaserArray.push(new Laya.Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,Laya.AtlasResourceManager["_sid_"]++));this._needGC=true;this.garbageCollection();this._curAtlasIndex=this._atlaserArray.length-1}}if(!d){console.log(">>>AtlasManager pushData error")}return d}};laya.webgl.atlas.AtlasResourceManager.prototype.freeBattleAtlas=function(){for(var t=0,e=w.battleAtlasers.length;t<e;t++){w.battleAtlasers[t].dispose()}w.battleAtlasers.length=0;w.battleDex=0};laya.webgl.resource.WebGLCharImage.prototype["recreateResource"]=function(){var t=Laya.Render.isConchApp;this.onresize(this.cw+w.CborderSize*2,this.ch+w.CborderSize*2);this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w);if(t){var e=this.fontSize;if(this.xs!=1||this.ys!=1){e=parseInt(e*(this.xs>this.ys?this.xs:this.ys)+"")}var i="normal 100 "+this.font;i=i.replace(Laya.WebGLCharImage["_fontSizeReg"],e);if(this.borderColor){i+=" 1 "+this.borderColor}this._ctx.font=i;this._ctx.textBaseline="top";this._ctx.fillStyle=this.fillColor;this._ctx.fillText(this.char,w.CborderSize,w.CborderSize,null,null,null)}else{this._ctx.save();this._ctx.lineJoin="round";this._ctx.clearRect(0,0,this.cw+w.CborderSize*2,this.ch+w.CborderSize*2);this._ctx.font=this.font;if(Laya.Text.RightToLeft){this._ctx.textAlign="end"}this._ctx.textBaseline="top";if(this.xs!=1||this.ys!=1){this._ctx.setTransform(this.xs,0,0,this.ys,w.CborderSize,w.CborderSize)}else{this._ctx.setTransform(1,0,0,1,w.CborderSize,w.CborderSize)}if(this.fillColor&&this.borderColor){this._ctx.strokeStyle=this.borderColor;this._ctx.lineWidth=this.lineWidth;this._ctx.strokeText(this.char,0,0,null,null,0,null);this._ctx.fillStyle=this.fillColor;this._ctx.fillText(this.char,0,0,null,null,null)}else{if(this.lineWidth===-1){this._ctx.fillStyle=this.fillColor?this.fillColor:"white";this._ctx.fillText(this.char,0,0,null,null,null)}else{this._ctx.strokeStyle=this.borderColor?this.borderColor:"white";this._ctx.lineWidth=this.lineWidth;this._ctx.strokeText(this.char,0,0,null,null,0,null)}}if(this.underLine){this._ctx.lineWidth=1;this._ctx.strokeStyle=this.fillColor;this._ctx.beginPath();this._ctx.moveTo(0,this.fontSize+2);var n=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(n,this.fontSize+2);this._ctx.stroke()}this._ctx.restore()}this.borderSize=w.CborderSize;this.completeCreate()}};w.CborderSize=12;w.roleAtlasers=[];w.roleDex=0;w.battleAtlasers=[];w.battleDex=0;w.matchKeys=["static/mainicon","static/main","static/head","main.png"];w.matchBattleKeys=["ani/monster","ani/skill","ani/buff"];return w}();t.WebglRewriter=o})(app||(app={}));var app;(function(d){var t=function(){function g(){this._complete=null;this._target=null;this._ease=null;this._props=null;this._duration=0;this._delay=0;this._startTimer=0;this._usedTimer=0;this._usedPool=false;this._delayParam=null;this.gid=0;this.update=null;this._call=null;this._calldelay=null;this.canstop=true}g.prototype.to=function(t,e,i,n,r,o,a,s){o===void 0&&(o=0);s===void 0&&(s=false);return this._create(t,e,i,n,r,o,a,s,true,false,true)};g.prototype.toWithCall=function(t,e,i,n,r,o,a,s,l,u){o===void 0&&(o=0);u===void 0&&(u=false);return this._createWithCall(t,e,i,n,r,o,a,s,l,u,false,false,true)};g.prototype.from=function(t,e,i,n,r,o,a,s){o===void 0&&(o=0);s===void 0&&(s=false);return this._create(t,e,i,n,r,o,a,s,false,false,true)};g.prototype._create=function(t,e,i,n,r,o,a,s,l,u,p){if(!t)throw new Error("Tween:target is null");this.canstop=a;this._target=t;this._duration=i;this._ease=n||e.ease||g.easeNone;this._complete=r||e.complete;this._delay=o;this._props=[];this._usedTimer=0;this._startTimer=this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer;this._usedPool=u;this._delayParam=null;this.update=e.update;var h=t.$_GID||(t.$_GID=Laya.Utils.getGID());if(!g.tweenMap[h]){g.tweenMap[h]=[this]}else{if(s)g.clearTween(t);g.tweenMap[h].push(this)}if(p){if(o<=0)this.firstStart(t,e,l);else{this._delayParam=[t,e,l];if(this.canstop){Laya.timer.once1(o,this,this.firstStart,this._delayParam)}else{Laya.timer.once(o,this,this.firstStart,this._delayParam)}}}else{this._initProps(t,e,l)}return this};g.prototype._createWithCall=function(t,e,i,n,r,o,a,s,l,u,p,h,c){if(!t)throw new Error("Tween:target is null");this.canstop=l;this._target=t;this._duration=i;this._ease=n||e.ease||g.easeNone;this._complete=r||e.complete;this._delay=o;this._props=[];this._usedTimer=0;this._startTimer=this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer;this._usedPool=h;this._delayParam=null;this.update=e.update;this._call=a;this._calldelay=s;var f=t.$_GID||(t.$_GID=Laya.Utils.getGID());if(!g.tweenMap[f]){g.tweenMap[f]=[this]}else{if(u)g.clearTween(t);g.tweenMap[f].push(this)}if(c){if(o<=0)this.firstStart(t,e,p);else{this._delayParam=[t,e,p];if(this.canstop){Laya.timer.once1(o,this,this.firstStart,this._delayParam)}else{Laya.timer.once(o,this,this.firstStart,this._delayParam)}}}else{this._initProps(t,e,p)}return this};g.prototype.firstStart=function(t,e,i){this._delayParam=null;if(t.destroyed){this.clear();return}this._initProps(t,e,i);this._beginLoop()};g.prototype._initProps=function(t,e,i){for(var n in e){if(typeof t[n]=="number"){var r=i?t[n]:e[n];var o=i?e[n]:t[n];this._props.push([n,r,o-r]);if(!i)t[n]=r}}};g.prototype._beginLoop=function(){if(this.canstop){Laya.timer.frameLoop1(1,this,this._doEase)}else{Laya.timer.frameLoop(1,this,this._doEase)}};g.prototype._doEase=function(){this._updateEase(this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer)};g.prototype._updateEase=function(t){var e=this._target;if(!e)return;if(e.destroyed)return g.clearTween(e);var i=this._usedTimer=t-this._startTimer-this._delay;if(i<0)return;if(this._call){if(i>=this._calldelay){this._call.run();this._call=null;this._calldelay=null}}if(i>=this._duration)return this.complete();var n=i>0?this._ease(i,0,1,this._duration):0;var r=this._props;for(var o=0,a=r.length;o<a;o++){var s=r[o];e[s[0]]=s[1]+n*s[2]}if(this.update)this.update.run()};g.prototype.complete=function(){if(!this._target)return;Laya.timer.runTimer(this,this.firstStart);var t=this._target;var e=this._props;var i=this._complete;for(var n=0,r=e.length;n<r;n++){var o=e[n];t[o[0]]=o[1]+o[2]}if(this.update)this.update.run();this.clear();i&&i.run()};g.prototype.pause=function(){Laya.timer.clear(this,this._beginLoop);Laya.timer.clear(this,this._doEase);Laya.timer.clear(this,this.firstStart);var t=this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer;var e=NaN;e=t-this._startTimer-this._delay;if(e<0){this._usedTimer=e}};g.prototype.setStartTime=function(t){this._startTimer=t};g.prototype.clear=function(){if(this._target){this._remove();this._clear()}};g.prototype._clear=function(){this.pause();Laya.timer.clear(this,this.firstStart);this._complete=null;this._target=null;this._ease=null;this._props=null;this._delayParam=null;this.canstop=true;this._call=null;if(this._usedPool){this.update=null;Laya.Pool.recover("mytween",this)}};g.prototype.recover=function(){this._usedPool=true;this._clear()};g.prototype._remove=function(){var t=g.tweenMap[this._target.$_GID];if(t){for(var e=0,i=t.length;e<i;e++){if(t[e]===this){t.splice(e,1);break}}}};g.prototype.restart=function(){this.pause();this._usedTimer=0;this._startTimer=this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer;if(this._delayParam){if(this.canstop){Laya.timer.once1(this._delay,this,this.firstStart,this._delayParam)}else{Laya.timer.once(this._delay,this,this.firstStart,this._delayParam)}return}var t=this._props;for(var e=0,i=t.length;e<i;e++){var n=t[e];this._target[n[0]]=n[1]}if(this.canstop){Laya.timer.once1(this._delay,this,this._beginLoop)}else{Laya.timer.once(this._delay,this,this._beginLoop)}};g.prototype.resume=function(){if(this._usedTimer>=this._duration)return;this._startTimer=this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer-this._usedTimer-this._delay;if(this._delayParam){if(this._usedTimer<0){if(this.canstop){Laya.timer.once1(-this._usedTimer,this,this.firstStart,this._delayParam)}else{Laya.timer.once(-this._usedTimer,this,this.firstStart,this._delayParam)}}else{this.firstStart.apply(this,this._delayParam)}}else{this._beginLoop()}};Object.defineProperty(g.prototype,"progress",{set:function(t){var e=t*this._duration;this._startTimer=this.canstop?d.TimerRewriter.currTimer:Laya.timer.currTimer-this._delay-e},enumerable:true,configurable:true});g.to=function(t,e,i,n,r,o,a,s,l){o===void 0&&(o=0);a===void 0&&(a=false);s===void 0&&(s=false);l===void 0&&(l=true);return Laya.Pool.getItemByClass("mytween",g)._create(t,e,i,n,r,o,a,s,true,l,true)};g.toWithCall=function(t,e,i,n,r,o,a,s,l,u,p){o===void 0&&(o=0);l===void 0&&(l=false);u===void 0&&(u=false);p===void 0&&(p=true);return Laya.Pool.getItemByClass("mytween",g)._createWithCall(t,e,i,n,r,o,a,s,l,u,true,p,true)};g.from=function(t,e,i,n,r,o,a,s,l){o===void 0&&(o=0);a===void 0&&(a=false);s===void 0&&(s=false);l===void 0&&(l=true);return Laya.Pool.getItemByClass("mytween",g)._create(t,e,i,n,r,o,a,s,false,l,true)};g.clearAll=function(t){if(!t||!t.$_GID)return;var e=g.tweenMap[t.$_GID];if(e){for(var i=0,n=e.length;i<n;i++){e[i]._clear()}e.length=0}};g.clear=function(t){t.clear()};g.clearTween=function(t){g.clearAll(t)};g.easeNone=function(t,e,i,n){return i*t/n+e};g.tweenMap={};return g}();d.MyTween=t})(app||(app={}));var app;(function(u){var t=function(){function e(){}Object.defineProperty(e,"boStop",{get:function(){return e._boStop},set:function(t){e._boStop=t;game.Context.event(game.ContextEvent.BATTLE_TIME_STATE_CHANGE)},enumerable:true,configurable:true});e.init=function(){Laya.timer.loop(6e4,this,function t(){var e=[];for(var i in Laya.timer["_map"]){if(Laya.timer["_map"][i]!=null){e[i]=Laya.timer["_map"][i]}}Laya.timer["_map"]=e;e=[];for(var i in Laya["scaleTimer"]["_map"]){if(Laya["scaleTimer"]["_map"][i]!=null){e[i]=Laya["scaleTimer"]["_map"][i]}}Laya["scaleTimer"]["_map"]=e});laya.utils.Timer.prototype.once1=function(t,e,i,n,r){r===void 0&&(r=true);var o=this._create(false,false,t,e,i,n,r);if(o)o.canstop=true};laya.utils.Timer.prototype.loop1=function(t,e,i,n,r,o){r===void 0&&(r=true);o===void 0&&(o=false);var a=this._create(false,true,t,e,i,n,r);if(a){a.jumpFrame=o;a.canstop=true}};laya.utils.Timer.prototype.frameLoop1=function(t,e,i,n,r){r===void 0&&(r=true);var o=this._create(true,true,t,e,i,n,r);if(o){o.canstop=true}};laya.utils.Timer.prototype["_recoverHandler"]=function(t){if(this._map[t.key]==t)this._map[t.key]=null;t.clear();t.canstop=false;Laya.Timer["_pool"].push(t)};laya.utils.Timer.prototype["_indexHandler"]=function(t){var e=t.caller;var i=t.method;var n=e?e.$_GID||(e.$_GID=Laya.Utils.getGID()):0;var r=i.$_TID||(i.$_TID=this._mid++*1e5);var o=n+r;t.key=o;this._map[t.key]=t};laya.utils.Timer.prototype["_update"]=function(){if(this.scale<=0){this._lastTimer=this._now();return}var t=this.currFrame=this.currFrame+this.scale;var e=this._now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;if(!u.TimerRewriter.boStop){u.TimerRewriter.currTimer+=this._delta*u.TimerRewriter.battleScale}this._lastTimer=e;var n=this._handlers;this._count=0;for(a=0,s=n.length;a<s;a++){l=n[a];if(l.method!==null){var r=l.userFrame?t:i;if(l.canstop){if(u.TimerRewriter.boStop){l.exeTime+=l.userFrame?this.scale:this._delta;continue}}if(r>=l.exeTime){if(l.repeat){if(!l.jumpFrame){l.exeTime+=l.delay;l.run(false);if(r>l.exeTime){l.exeTime+=Math.ceil((r-l.exeTime)/l.delay)*l.delay}}else{while(r>=l.exeTime){l.exeTime+=l.delay;l.run(false)}}}else{l.run(true)}}}else{this._count++}}if(this._count>30||t%200===0)this._clearHandlers();var o=this._laters;for(var a=0,s=o.length-1;a<=s;a++){var l=o[a];if(l.method!==null){this._map[l.key]=null;l.run(false)}this._recoverHandler(l);a===s&&(s=o.length-1)}o.length=0};laya.display.AnimationPlayerBase.prototype["_frameLoop"]=function(){if(u.TimerRewriter.boStop&&this.canstop){return}if(this._isReverse){this._index--;if(this._index<0){if(this.loop){if(this.wrapMode==2){this._index=this._count>0?1:0;this._isReverse=false}else{this._index=this._count-1}this.event("complete")}else{this._index=0;this.stop();this.event("complete");return}}}else{this._index++;if(this.playAndCallIndexArr&&this.playAndCallIndexArr.indexOf(this._index)!=-1){this.event("reach",this._index)}if(this.playAndStopIndex&&this._index>=this.playAndStopIndex){this.playAndStopIndex=null;this.stop();this.event("p_s_complete");return}if(this._index>=this._count){if(this.loop){if(this.wrapMode==2){this._index=this._count-2>=0?this._count-2:0;this._isReverse=true}else{if(this.boPa){this._index=this._count}else{this._index=0}}this.event("complete")}else{this._index--;this.stop();this.event("complete");return}}}this.index=this._index};laya.display.AnimationPlayerBase.prototype.playToAndStop=function(t){this.playAndStopIndex=t;this.play()}};e._boStop=false;e.currTimer=0;e.battleScale=1;return e}();u.TimerRewriter=t})(app||(app={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(t){var e=t.Tab;var n=t.Button;var i=function(i){__extends(t,i);function t(t,e){if(t===void 0){t=null}if(e===void 0){e=""}return i.call(this,t,e)||this}t.prototype.createItem=function(t,e){return new n(e)};return t}(e);t.ButtonTab=i})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(i){var t=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n._repeat=4;n.speed=10;n._cells=[];n.skin=t;n.repeat=e;n.width=i;return n}Object.defineProperty(t.prototype,"sizeGrid",{get:function(){return this._skin},set:function(t){if(this._sizeGrid!=t){this._sizeGrid=t;this.cellChanged=true}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"skin",{get:function(){return this._skin},set:function(t){if(this._skin!=t){this._skin=t;this.cellChanged=true}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){if(this._width!=t){this.cellChanged=true}i.superSet(i.Component,this,"width",t)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeat",{get:function(){return this._repeat},set:function(t){if(this._repeat!=t){this._repeat=t;this.cellChanged=true}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"cellChanged",{get:function(){return this._cellChanged},set:function(t){this._cellChanged=t;if(this.cellChanged){i.timer.callLater(this,this.updateCell)}},enumerable:true,configurable:true});t.prototype.updateCell=function(){for(var t=0;t<this._repeat+1;++t){var e=void 0;if(!this._cells[t]){e=this._cells[t]=new i.Image(this._skin)}else{e=this._cells[t]}e.sizeGrid=this._sizeGrid;e.x=this.width/this.repeat*t;this.addChild(e)}while(this._cells.length>this.repeat+1){this._cells.pop().removeSelf()}};t.prototype.play=function(){if(!this._play){this._play=true;this.on(i.Event.DISPLAY,this,this.onDisplay);this.on(i.Event.UNDISPLAY,this,this.onUnDisplay);if(this.displayedInStage){this.onDisplay()}}};t.prototype.stop=function(){if(this._play){this._play=false;i.timer.clear(this,this.loopCells);this.off(i.Event.DISPLAY,this,this.onDisplay);this.off(i.Event.UNDISPLAY,this,this.onUnDisplay)}};t.prototype.onUnDisplay=function(){i.timer.clear(this,this.loopCells)};t.prototype.onDisplay=function(){i.timer.frameLoop(1,this,this.loopCells)};t.prototype.loopCells=function(){for(var t=0;t<this._cells.length;++t){this._cells[t].x+=this.speed;if(this._cells[t].x>=this.width){this._cells[t].x-=this.width}if(this._cells[t].x<=-this._cells[t].width){this._cells[t].x+=this.width}}};return t}(i.Component);i.ImgMarquee=t})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(d){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.offsets=[];t.cacheOffset=[];t._cacheOffetIndex=0;return t}t.prototype.setCustomItem=function(t,e){var i=this._getOneCell();this.offsets[t]=e.height-i.height;this._cacheOffetIndex=Math.min(this._cacheOffetIndex,t);if(!e&&this.customCell){var n=this.customCell.indexOf(t);if(n>-1){this.customCell.splice(n,2)}}else{if(!this.customCell){this.customCell=[]}this.customCell.push(t,e)}};t.prototype.getOff=function(t){for(var e=this._cacheOffetIndex;e<=t;++e){if(e==0){this.cacheOffset[0]=0}else{if(this.offsets[e-1]){this.cacheOffset[e]=this.cacheOffset[e-1]+this.offsets[e-1]}else{this.cacheOffset[e]=this.cacheOffset[e-1]}}}this._cacheOffetIndex=t;return this.cacheOffset[t]};Object.defineProperty(t.prototype,"array",{get:function(){return this._array},set:function(t){this.runCallLater(this.changeCells);this._array=t||[];var e=this._array.length;this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY));this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1;this.startIndex=this._startIndex;if(this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY;var n=this._isVertical?this.repeatY:this.repeatX;var r=Math.ceil(e/i);var o=this._cellOffset>0?this.totalPage+1:this.totalPage;if(o>1){this._scrollBar.scrollSize=this._cellSize;this._scrollBar.thumbPercent=n/r;this._scrollBar.setScroll(0,(r-n)*this._cellSize+this._cellOffset+this.getOff(this._array.length-1),this._scrollBar.value);this._scrollBar.target=this._content}else{this._scrollBar.setScroll(0,0,0);this._scrollBar.target=this._content}}},enumerable:true,configurable:true});t.prototype.getCommonCell=function(){var t;if(this.cellPool){t=this.cellPool.pop()}if(!t){t=this.createItem();this.addCell(t);this.cells.pop()}this._content.addChild(t);return t};t.prototype.addCommonCell=function(t){if(!this.cellPool){this.cellPool=[]}t.removeSelf();this.cellPool.push(t)};t.prototype._getOneCell=function(){if(!this.tempCell){var t=this.tempCell=this.createItem();this._offset.setTo(t.x,t.y);if(this.cacheContent)return t}return this.tempCell};t.prototype.isCustomCell=function(t){if(!this.customCell){return false}return this.customCell.indexOf(t)>-1};t.prototype.getCustomCell=function(t){if(!this.customCell){return null}var e=this.customCell.indexOf(t);if(e>-1){return this.customCell[e+1]}return null};t.prototype.getCellByIndex=function(t){if(this.isCustomCell(t)){return this.getCustomCell(t)}return this._getOneCell()};t.prototype.changeCells=function(){this._cellChanged=false;if(this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell();var e=t.width+this._spaceX||1;var i=t.height+this._spaceY||1;if(this._width>0)this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e);if(this._height>0)this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i);var n=this._width?this._width:e*this.repeatX-this._spaceX;var r=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:e;this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-r-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX;if(this._isVertical&&this._scrollBar)this._scrollBar.height=r;else if(!this._isVertical&&this._scrollBar)this._scrollBar.width=n;this.setContentSize(n,r);var o=this._isVertical?this.repeatX:this.repeatY;var a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,o,a);this._createdLine=a;if(this._array){this.array=this._array;this.runCallLater(this.renderItems)}}};t.prototype.posCell=function(t,e){if(!this._scrollBar)return;var i=this._isVertical?this.repeatX:this.repeatY;var n=this._isVertical?this.repeatY:this.repeatX;var r=Math.floor(e/i)*this._cellSize+this.getOff(e);this._isVertical?t.y=r:t.x=r};t.prototype.onScrollBarChange=function(t){this.runCallLater(this.changeCells);var e=this._scrollBar.value;var i=this._isVertical?this.repeatX:this.repeatY;var n=this._isVertical?this.repeatY:this.repeatX;var r=Math.floor((e-this.getOff(this._array?this._array.length-1:0))/this._cellSize);r=Math.max(0,r);if(!this.cacheContent){var o=r*i;var a=0;if(o>this._startIndex){a=o-this._startIndex;var s=true;var l=this._startIndex+i*(n+1);this._isMoved=true}else if(o<this._startIndex){a=this._startIndex-o;s=false;l=this._startIndex-1;this._isMoved=true}for(var u=0;u<a;u++){if(s){var p=this._cells.shift();var h=l+u;if(this.isCustomCell(h)){if(!this.isCustomCell(p)){this.addCommonCell(p)}p=this._cells[this._cells.length]=this.getCustomCell(h);this._content.addChild(p)}else{if(this.isCustomCell(p)){p.removeSelf();p=this._cells[this._cells.length]=this.getCommonCell()}else{this._cells[this._cells.length]=p}}}else{p=this._cells.pop();h=l-u;if(this.isCustomCell(h)){if(!this.isCustomCell(p)){this.addCommonCell(p)}p=this.getCustomCell(h);this._cells.unshift(p);this._content.addChild(p)}else{if(this.isCustomCell(p)){p.removeSelf();p=this.getCommonCell();this._cells.unshift(p)}else{this._cells.unshift(p)}}}var c=Math.floor(h/i)*this._cellSize+this.getOff(h);this._isVertical?p.y=c:p.x=c;this.renderItem(p,h)}this._startIndex=o;this.changeSelectStatus()}else{a=n+1;if(this._createdLine-r<a){this._createItems(this._createdLine,i,this._createdLine+a);this.renderItems(this._createdLine*i,0);this._createdLine+=a}}var f=this._content.scrollRect;if(this._isVertical){f.y=e-this._offset.y;f.x=-this._offset.x}else{f.y=-this._offset.y;f.x=e-this._offset.x}this._content.scrollRect=f};t.prototype._createItems=function(t,e,i){var n=this._content;var r=this._getOneCell();var o=r.width+this._spaceX;var a=r.height+this._spaceY;if(this.cacheContent){var s=new d.Box;s.cacheAsBitmap=true;s.pos((this._isVertical?0:t)*o,(this._isVertical?t:0)*a);this._content.addChild(s);this._content.optimizeScrollRect=true;n=s}else{var l=[];for(var u=this._cells.length-1;u>-1;u--){var p=this._cells[u];p.removeSelf();if(!this.customCell||this.customCell.indexOf(p)==-1){l.push(p)}}this._cells.length=0}for(var h=t;h<i;h++){for(var c=0;c<e;c++){var f=h*e+c;if(this.customCell&&this.customCell.indexOf(f)>-1){var g=this.customCell.indexOf(f);if(g>-1){r=this.customCell[g+1]}}else if(l&&l.length){r=l.pop()}else{r=this.createItem()}r.x=(this._isVertical?c:h)*o-n.x;r.y=(this._isVertical?h:c)*a-n.y+ +this.getOff(f);r.name="item"+f;n.addChild(r);this.addCell(r)}}};return t}(d.List);d.MultiList=t})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(i){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.style.height=0;return t}Object.defineProperty(t.prototype,"stroke",{get:function(){return this.style.stroke},set:function(t){this.style.stroke=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"strokeColor",{get:function(){return this.style.strokeColor},set:function(t){this.style.strokeColor=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"italic",{get:function(){return this.style.italic},set:function(t){this.style.italic=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(t){this.style.wordWrap=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"color",{get:function(){return this.style.color},set:function(t){this.style.color=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"leading",{get:function(){return this.style.leading},set:function(t){this.style.leading=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"font",{get:function(){return this.style.font},set:function(t){this.style.font=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"fontSize",{get:function(){return this.style.fontSize},set:function(t){this.style.fontSize=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"bold",{get:function(){return this.style.bold},set:function(t){this.style.bold=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"align",{get:function(){return this.style.align},set:function(t){this.style.align=t;this.isChanged=true},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"text",{get:function(){return this.innerHTML},set:function(t){if(this._text!=t||this.isChanged){t=this.newlineToBr(t);this._text=t;this.innerHTML=this._text||"";this.isChanged=false}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"inputText",{get:function(){return this._text},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"valign",{get:function(){return this.style.valign},set:function(t){this.style.padding=[0,0,0,0];if(t=="top"){this.style.padding=[0,0,0,0]}else if(t=="center"){this.style.padding=[(this.height-this.fontSize)/2,0,0,0]}else if(t=="bottom"){this.style.padding=[this.height-this.fontSize,0,0,0]}this.isChanged=true},enumerable:true,configurable:true});t.prototype.newlineToBr=function(t){return t.replace(/\n/g,"<br>")};Object.defineProperty(t.prototype,"isChanged",{get:function(){return this._isChanged},set:function(t){this._isChanged=t;if(this._isChanged){i.timer.callLater(this,this.updateText)}else{i.timer.clear(this,this.updateText)}},enumerable:true,configurable:true});t.prototype.updateText=function(){this.text=this._text};return t}(i.HTMLDivElement);i.RichText=t})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var component;(function(t){var e=function(e){__extends(p,e);function p(){var t=e.call(this)||this;t.groupKey="group";t._keepOpenStatus=true;t.groupDatas=[];t.groupItems=[];t.selectStatus=[];t._groupGap=0;t.upSpace=0;t.startY=0;t.boChange=true;t.onlyOpenSelectIndex=false;t._boOpenOne=true;t._boScroll=false;t._selectedIndex=-1;t.width=t.height=200;return t}p.prototype.removeChild=function(t){return t!=this._content?e.prototype.removeChild.call(this,t):null};p.prototype.removeChildAt=function(t){return this.getChildAt(t)!=this._content?e.prototype.removeChildAt.call(this,t):null};Object.defineProperty(p.prototype,"boOpenOne",{get:function(){return this._boOpenOne},set:function(t){this._boOpenOne=t},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"keepOpenStatus",{get:function(){return this._keepOpenStatus},set:function(t){this._keepOpenStatus=t},enumerable:true,configurable:true});p.prototype.scrollToIndex=function(t,e){if(e===void 0){e=0}this._scrollIndex=t;this._scorllSubIndex=e;this._boScroll=true;this.callLater(this.updateLayout)};p.prototype.getSubItem=function(t,e){var i=this.listMap[t];if(i){for(var n=0,r=i.cells.length;n<r;n++){var o=i.cells[n];if(o&&o.dataSource==e){return i.cells[n]}}}return null};Object.defineProperty(p.prototype,"dataSource",{set:function(t){this._dataSource=t;if(Array.isArray(t)){this.array=t}else{Laya.superSet(Laya.Panel,this,"dataSource",t)}},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"array",{get:function(){return this._array},set:function(t){this._array=t;this.initGroupItems()},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"groupGap",{get:function(){return this._groupGap},set:function(t){this._groupGap=t},enumerable:true,configurable:true});p.prototype.addGroup=function(t){if(this.boChange){t.on(Laya.Event.CLICK,this,this.onGroupMouse);t.on(Laya.Event.ROLL_OVER,this,this.onGroupMouse);t.on(Laya.Event.ROLL_OUT,this,this.onGroupMouse);t.on(Laya.Event.MOUSE_DOWN,this,this.onGroupMouse);t.on(Laya.Event.MOUSE_UP,this,this.onGroupMouse);t.on(Laya.Event.RIGHT_CLICK,this,this.onGroupMouse);t.on(Laya.Event.DOUBLE_CLICK,this,this.onGroupMouse)}this.groupItems.push(t)};p.prototype.openByIndex=function(t,e){if(this.groupItems[t]){this.onMouseHandler(this.groupItems[t],Laya.Event.CLICK);this.selectedIndex=e}};p.prototype.getOpenIndex=function(){if(this._boOpenOne){if(this.groupItems){for(var t=0;t<this.groupItems.length;t++){var e=this.groupItems[t];if(this.isShow(e.dataSource)){return 1}}}}return 0};p.prototype.initGroupItems=function(){this.groupDatas.length=0;this.selectStatus.length=0;this._selectedIndex=-1;this._scrollIndex=0;for(var t in this.listMap){this.listMap[t].off(Laya.Event.CHANGE,this,this.onSelectChange);this.listMap[t].removeSelf()}this.listMap={};while(this.groupItems.length){var e=this.groupItems.pop();if(this.boChange){e.off(Laya.Event.CLICK,this,this.onGroupMouse);e.off(Laya.Event.ROLL_OVER,this,this.onGroupMouse);e.off(Laya.Event.ROLL_OUT,this,this.onGroupMouse);e.off(Laya.Event.MOUSE_DOWN,this,this.onGroupMouse);e.off(Laya.Event.MOUSE_UP,this,this.onGroupMouse);e.off(Laya.Event.RIGHT_CLICK,this,this.onGroupMouse);e.off(Laya.Event.DOUBLE_CLICK,this,this.onGroupMouse)}e.removeSelf()}for(var i=0;i<this._array.length;i++){var t=this._array[i];if(t[this.groupKey]!=undefined){var n=t[this.groupKey];if(n&&this.groupDatas.indexOf(n)<0){this.groupDatas.push(n);e=new this.groupRender;e.dataSource=n;this._content.addChild(e);this.addGroup(e)}}this.callLater(this.updateLayout)}};p.prototype.changeCellState=function(t,e,i){var n=t.getChildByName("selectBox");if(n instanceof Laya.Clip){n.visible=e;n.index=i}var r=t.getChildByName("selectBox");if(r instanceof Laya.Button){r.selected=i>0&&e}};p.prototype.changeSelectStatus=function(){for(var t=0,e=this.groupItems.length;t<e;t++){var i=this.groupItems[t];if(this.isShow(i.dataSource)){this.changeCellState(this.groupItems[t],this.groupSelectIndex==t,1)}else{this.changeCellState(this.groupItems[t],this.groupSelectIndex==t,0)}}};p.prototype.onMouseHandler=function(t,e){var i=t.dataSource;switch(e){case Laya.Event.CLICK:{if(!this.onlyOpenSelectIndex){r=this.selectStatus.indexOf(i);var n=this.listMap[t.dataSource];if(n){n.array=this.getArray(t)}if(r<0){if(this.keepOpenStatus){if(this.boOpenOne){this.selectStatus.length=0}if(this.selectStatus.indexOf(i)==-1){this.selectStatus.push(i)}}}else{this.selectStatus.splice(r,1)}this.callLater(this.updateLayout)}break}default:{break}}var r=this.groupItems.indexOf(t);if(e==Laya.Event.CLICK||e==Laya.Event.ROLL_OVER||e==Laya.Event.ROLL_OUT){if(e==Laya.Event.CLICK){this.groupSelectIndex=r;this.changeSelectStatus();this.scrollToIndex(r)}else if(this.groupSelectIndex!=r){this.changeCellState(t,e==Laya.Event.ROLL_OVER,0)}}};p.prototype.onGroupMouse=function(t){var e=t.currentTarget;this.onMouseHandler(e,t.type)};p.prototype.updateLayout=function(){var t=0;var e=this.startY;var i=0;var n=0;for(var r=0;r<this.groupItems.length;r++){var o=this.groupItems[r];o.x=t;o.y=e;e+=o.height;if(this.groupRenderHandler)this.groupRenderHandler.runWith([o,r]);i=Math.max(o.width+o.x,this.width);var a=0;var s=this.listMap[o.dataSource];var l=this.getArray(o);if(l.length==1&&l[0][p.NO_OPEN_KEY]){}else{if(this.isShow(o.dataSource)){if(o["setArrow"]){o["setArrow"].call(o,p.OPEN)}if(l.length>0){if(!s){s=this.listMap[o.dataSource]=new Laya.List;s.itemRender=this.itemRender;s.renderHandler=this.itemRenderHandler;s.selectHandler=new Laya.Handler(this,this.onSelectChange,[s]);s.dataSource=l;s.selectEnable=true;if(s.array.length){var u=s.getCell(0);s.repeatX=1;s.repeatY=s.array.length;s.height=(u.height+s.spaceY)*s.array.length;i=Math.max(s.width+s.x,this.width)}}if(!this._content.contains(s)){this._content.addChildAt(s,0)}s.y=e;e+=s.height;if(r==this._scrollIndex&&this._scorllSubIndex){var u=s.getCell(0);a=(u.height+s.spaceY)*this._scorllSubIndex}}}else{if(o["setArrow"]){o["setArrow"].call(o,p.CLOSE)}if(s&&this._content.contains(s)){this._content.removeChild(s)}}}if(this._boScroll&&r==this._scrollIndex){if(this.isShow(o.dataSource)){if(s){if(o.height+s.height>this._content.height){n=e-(o.height+s.height)-this.startY;if(a){n+=o.height+a}}else{if(e-this.vScrollBar.value>this._content.height){n=e-(o.height+s.height)-this.startY}else if(e-this.vScrollBar.value<o.height+s.height){n=e-(o.height+s.height)-this.startY}else{n=this.vScrollBar.value}}}else{if(e-this.vScrollBar.value>this._content.height){n=e-this._content.height-this.startY}else if(e-this.vScrollBar.value<o.height){n=e-o.height-this.startY}else{n=this.vScrollBar.value}}}else{if(e-this.vScrollBar.value>this._content.height){n=e-this._content.height-this.startY}else if(e-this.vScrollBar.value<o.height){n=e-o.height-this.startY}else{n=this.vScrollBar.value}}if(this.upSpace){n-=o.height}this._boScroll=false}e+=this.groupGap}this.refresh();this.scrollTo(0,n);this.upSpace=0};p.prototype.onSelectChange=function(t){var e=this.lastSubSelectCell;if(e&&e["setSelectState"]){e["setSelectState"].call(e,p.UNSELECT)}e=this.lastSubSelectCell=t.getCell(t.selectedIndex);if(e&&e["setSelectState"]){e["setSelectState"].call(e,p.SELECTED)}};p.prototype.getArray=function(t){if(this.getArrayHandler){return this.getArrayHandler.runWith(t)}var e=t.dataSource;var i=[];for(var n=0;n<this.array.length;n++){if(this.array[n][this.groupKey]==e){i.push(this.array[n])}}return i};p.prototype.isShow=function(t){return this.selectStatus.indexOf(t)>-1};Object.defineProperty(p.prototype,"groupRender",{get:function(){return this._groupRender},set:function(t){this._groupRender=t},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"itemRender",{get:function(){return this._itemRender},set:function(t){this._itemRender=t},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"itemRenderHandler",{get:function(){return this._itemRenderHandler},set:function(t){this._itemRenderHandler=t},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"groupRenderHandler",{get:function(){return this._groupRenderHandler},set:function(t){this._groupRenderHandler=t},enumerable:true,configurable:true});p.prototype.setGroupSelect=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}this.selectStatus.length=0;for(var i=0;i<t.length;i++){this.selectStatus.push(t[i])}this.callLater(this.updateLayout)};Object.defineProperty(p.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t==-1||t>=this._array.length){t=-1}if(this._selectedIndex==t){return}if(t==-1){for(var e in this.listMap){this.listMap[e].selectedIndex=-1;this._selectedIndex=t;this.callLater(this.updateLayout);this.event(Laya.Event.CHANGE)}return}var i=this._array[t];if(this.selectStatus.indexOf(i[this.groupKey])<0){this.selectStatus.push(i[this.groupKey])}if(this._selectedIndex!=t){this._selectedIndex=t;this.runCallLater(this.updateLayout);for(var e in this.listMap){var n=this.listMap[e];n.selectedIndex=-1}var r=this.listMap[i[this.groupKey]];r.selectedIndex=r.array.indexOf(i);this.groupSelectIndex=this.groupDatas.indexOf(i[this.groupKey]);this.changeSelectStatus();if(this.boOpenOne){this.selectStatus.length=0}if(this.selectStatus.indexOf(i[this.groupKey])<0){this.selectStatus.push(i[this.groupKey])}this.callLater(this.updateLayout)}},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"selectedItem",{get:function(){return this._selectedIndex!=-1?this._array[this._selectedIndex]:null},set:function(t){this.selectedIndex=this._array.indexOf(t)},enumerable:true,configurable:true});p.CLOSE=0;p.OPEN=1;p.UNSELECT=0;p.SELECTED=1;p.NO_OPEN_KEY="no_open";return p}(Laya.Panel);t.SimpleGroupList=e})(component||(component={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(n){var t=function(e){__extends(i,e);function i(){var t=e.call(this)||this;t._vecImg=[];t._spaceX=0;t._spaceY=0;t._rowNum=100;return t}Object.defineProperty(i.prototype,"enableSkin",{get:function(){return this._enableSkin},set:function(t){if(this._enableSkin!==t){this._enableSkin=t;this._setChanged()}},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"disableSkin",{get:function(){return this._disableSkin},set:function(t){if(this._disableSkin!==t){this._disableSkin=t;this._setChanged()}},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(t){if(this._value!==t){this._value=t;this._setChanged()}},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){t=Math.max(t,1);if(this._maxValue!==t){this._maxValue=t;this._setChanged()}},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"rowNum",{get:function(){return this._rowNum},set:function(t){t=Math.max(t,1);if(this._rowNum!==t){this._rowNum=t;this._setChanged()}this._rowNum=t},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"spaceX",{get:function(){return this._spaceX},set:function(t){if(this._spaceX!==t){this._spaceX=t;this._setChanged()}},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"spaceY",{get:function(){return this._spaceX},set:function(t){if(this._spaceY!==t){this._spaceY=t;this._setChanged()}},enumerable:true,configurable:true});i.prototype._setChanged=function(){if(!this._changed){this._changed=true;this.callLater(this.changeItem)}};i.prototype.getItem=function(t){return this._vecImg[t]};i.prototype.changeItem=function(){if(this._changed){this._changed=false;var t=void 0;for(t=0;t<this._maxValue;++t){if(!this._vecImg[t]){this._vecImg[t]=new n.Image;this.addChild(this._vecImg[t])}if(t<this.value){this._vecImg[t].skin=this._enableSkin}else{this._vecImg[t].skin=this._disableSkin}if(t%this._rowNum===0){this._vecImg[t].x=0}else{this._vecImg[t].x=this._vecImg[t-1].x+this._vecImg[t-1].width+this._spaceX}if(Math.floor(t/this._rowNum)===0){this._vecImg[t].y=0}else{this._vecImg[t].y=this._vecImg[t-this._rowNum].y+this._vecImg[t-this._rowNum].height+this.spaceY}}while(t<this._vecImg.length){this._vecImg.pop().removeSelf()}}};i.prototype.effectStar=function(t){if(this._vecImg.length-1<t){return}var e=new n.Animation;e.zOrder=1;e.source=i.StarEffect;e.pivot(64,64);e.interval=120;e.on(n.Event.COMPLETE,this,function(){e.removeSelf()});this.addChild(e);e.play(0);e.x=this._vecImg[t].x+this._vecImg[t].width*.5;e.y=this._vecImg[t].y+this._vecImg[t].height*.5};i.StarEffect="effect/chengjiuxingxing/skill_chengjiuxingxing_00000.png,effect/chengjiuxingxing/skill_chengjiuxingxing_00001.png,"+"effect/chengjiuxingxing/skill_chengjiuxingxing_00002.png,effect/chengjiuxingxing/skill_chengjiuxingxing_00003.png,"+"effect/chengjiuxingxing/skill_chengjiuxingxing_00004.png,effect/chengjiuxingxing/skill_chengjiuxingxing_00005.png";return i}(n.Component);n.StarSprite=t})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(t){var e=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}Object.defineProperty(t.prototype,"toggleRender",{get:function(){return this._toggleRender},set:function(t){this._toggleRender=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"toggleHandler",{get:function(){return this._toggleHandler},set:function(t){this._toggleHandler=t},enumerable:true,configurable:true});t.prototype.destory=function(t){e.prototype.destroy.call(this,t);this._toggleRender=this._toggleHandler=null};return t}(t.List);t.ToggleList=e})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var Laya;(function(i){var t=function(e){__extends(t,e);function t(){return e.call(this)||this}Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){var e=t.slice(0,t.lastIndexOf("."));this._source=e.slice(t.lastIndexOf("/")+1);if(this.autoPlay){this.load()}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"autoPlay",{get:function(){return this._autoPlay},set:function(t){if(t)this.load();else this.stop()},enumerable:true,configurable:true});t.prototype.play=function(t,e,i,n){this._start=t;this._loop=e;this._name=i;this._showWarn=n;this.load()};t.prototype.load=function(){this.alpha=0;this.clear();this.altasUrl="res/atlas/uieffect/"+this.source+".atlas";this.loadAtlas(this.altasUrl,new i.Handler(this,this.loadComplete,[this.altasUrl]))};t.prototype.loadComplete=function(t){if(t!=this.altasUrl){return}this.aniUrl="res/atlas/uieffect/"+this.source+".ani";this.loadAnimation(this.aniUrl,i.Handler.create(this,this.aniLoaded,[this.aniUrl]),t)};t.prototype.aniLoaded=function(t){if(t!=this.aniUrl){return}e.prototype.play.call(this,this._start,this._loop,this._name,this._showWarn);this.alpha=1};return t}(i.Animation);i.UiAnimation=t})(Laya||(Laya={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){};e.SINGLE_KEY="game.AccountModel";return e}(app.ModelBase);t.AccountModel=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(s){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.lastTicket=0;t.nextFive=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){if(app.Protocol.isConnected()){this.onServerConnected()}else{s.Context.on(s.ContextEvent.SERVER_CONNECTED,this,this.onServerConnected)}s.Context.on(s.ContextEvent.ENTER_WORLD,this,this.onContextEnterWorld)};t.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.LoginResp,this,this.onLoginResp);this.addMsgListener(app.ProtocolResponse.HeartBeatResp,this,this.onHeartBeatResp);this.addMsgListener(app.ProtocolResponse.EnterGameResp,this,this.onEnterGameNoti);this.addMsgListener(app.ProtocolResponse.ServerTimeResp,this,this.onServerTimeResp);this.addMsgListener(app.ProtocolResponse.SysNoticeResp,this,this.onSysNoticeRespHandler);this.addMsgListener(app.ProtocolResponse.BanRoleResp,this,this.onBanRoleResp)};t.prototype.onSysNoticeRespHandler=function(t,e){};t.prototype.onServerConnected=function(){login.CoverModel.getIns().start_game();app.SDK.enterServer()};t.prototype.onLoginResp=function(t,e){if(e.result==0){alert(app.getLang("com_err_2"))}else if(e.result==1){manager.LoadingManager.instance.setJsLoading(true);s.Context.event(s.ContextEvent.ENTER_CREATE_ROLE)}else if(e.result==2){s.Context.mainRoleId=e.id;this.checkInitWorld()}else if(e.result==3){login.LoginModel.getIns().isOtherLogin=true;Laya.timer.once(1e3,this,this.show)}Laya.timer.loop(1e4,this,this.doHeartLoop)};t.prototype.checkInitWorld=function(){if(s.Context.isSubLoaded){this.initWorld()}else{Laya.timer.once(100,this,this.checkInitWorld)}};t.prototype.show=function(){s.Alert.show(app.getLang("com_err_3"),new Laya.Handler(this,this.onDisconnect));s.Alert.getIns().hideCloseBtn()};t.prototype.onDisconnect=function(){if(window["conch"]){window["conch"].setExternalLink()}window.location.reload()};t.prototype.initWorld=function(){manager.LoadingManager.instance.setJsLoading(false);s.Context.event(s.ContextEvent.ENTER_WORLD)};t.prototype.onHeartBeatResp=function(t,e){s.Context.setServerTime(e.serverTime)};t.prototype.doHeartLoop=function(){if(app.Protocol.isConnected()){app.ProtocolRequest.HeartBeatReq((new Date).getTime()/1e3)}};t.prototype.onContextEnterWorld=function(){if(!login.LoginModel.getIns().isReConnet){s.Context.createVersion(2);manager.LoadingManager.instance.showGameLoading("onContextEnterWorld");if(s.Context.useZip){var t=[];if(s.Context.use_xbin){t.push("res/config/preload_xbin0.das");t.push("res/config/ui.das");t.push("res/config/"+s.Context.MAPS_DAS+".das")}else{t.push("res/config/preload.das");t.push("res/config/map.das")}app.Config.initZipCfg(t,this,this.loadPreLoadCsvs)}else{this.loadPreLoadCsvs()}}else{guide.GuideModel.getIns().event(guide.GuideModel.GUIDE_CLEAR);app.ProtocolRequest.EnterGameReq(s.Context.mainRoleId)}};t.prototype.loadPreLoadCsvs=function(){Laya.loader.load(app.Config.PreloadArr,Laya.Handler.create(this,this.onInitResComplete),Laya.Handler.create(this,this.onInitResProgress,null,false))};t.prototype.onInitResComplete=function(){var t=Laya.Loader.getRes("res/atlas/ui.json");Laya.View.uiMap=t;s.Context.removeVersion();var e=app.Singleton.getInstance(s.ModuleManager);e.init();e.startup();app.ProtocolRequest.EnterGameReq(s.Context.mainRoleId)};t.prototype.onInitResProgress=function(t){manager.LoadingManager.instance.updateGameLoading(t)};t.prototype.onEnterGameNoti=function(t,e){this.enterTime=Laya.timer.currTimer};t.prototype.onServerTimeResp=function(t,e){s.Context.timeZone=e.timezone;s.Context.setServerTime(e.serverTime);s.Context.openTime=e.openTime;s.Context.openZeroTime=s.Context.getServerZeroTime(e.openTime);s.Context.mergeTime=e.mergeTime;s.Context.mergeZeroTime=s.Context.getServerZeroTime(e.mergeTime);s.Context.mergeNum=e.mergeNum;s.Context.cursvrid=e.cursvrid;this.initKuaitian()};t.prototype.initKuaitian=function(){var t=s.Context.getServerZeroTime();var e=s.Context.getServerTime();var i=t+24*3600;this.lastTicket=i-e;var n=5*3600;if(e-t<n){this.nextFive=t+n-e}else{this.nextFive=i+n-e}var r=Laya.timer.currTimer-this.enterTime;if(r<3e3){Laya.timer.once(3e3-r,this,this.onKuaitian);return}this.onKuaitian()};t.prototype.onKuaitian=function(){if(this.lastTicket<0){s.SystemSetModel.getInstance().setValueByType(0,s.SettingType.hulufuliGift);s.RoleModel.getIns().event(s.RoleModel.EVENTS.KUAI_TIAN);this.lastTicket=s.Context.getServerZeroTime()+24*3600-s.Context.getServerTime()}else{this.lastTicket--}if(this.nextFive<0){s.RoleModel.getIns().event(s.RoleModel.EVENTS.FIVE_CLOCK);this.nextFive=s.Context.getServerTime()+86400}else{this.nextFive--}Laya.timer.once(1e3,this,this.onKuaitian)};t.prototype.onBanRoleResp=function(t,e){var i=csv.BanReasonProxy.getIns().getCfg(e.breason).text;if(e.btime){var n=e.btime-s.Context.getServerTime();var r=Math.floor(n/86400);var o=Math.ceil((n-r*86400)/3600);var a=app.getLang("online_day",r)+app.getLang("online_hour",o);s.Alert.show(app.getLang("fenghao_err_1",i,a))}else{s.Alert.show(app.getLang("fenghao_err_2",i))}};t.SINGLE_KEY="game.AccountModule";return t}(app.ModuleBase);s.AccountModule=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("banreasonlist.csv");this.cfgMap=t.getMap("index")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.BanReasonProxy";return e}(app.ModelBase);t.BanReasonProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actdenglu;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.ActDengLuMainView,"qiandao.atlas","huodong.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.DENG_LU_HUO_DONG,i.ActDengLuMainView);this._model=i.ActDengLuModel.getIns()};e.prototype.initCommands=function(){};e.prototype.onRedDotChange=function(){Laya.timer.callLater(this,this.onUpdateRedDot)};e.prototype.onUpdateRedDot=function(){};e.SINGLE_KEY="actdenglu.ActDengLuModule";return e}(app.ModuleBase);i.ActDengLuModule=t})(actdenglu||(actdenglu={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actdenglu;(function(t){var e=function(){function t(){}t.ACT_DENG_LU_REFRESH="ACT_DENG_LU_REFRESH";t.ACT_DENG_LU_CHANGE="ACT_DENG_LU_CHANGE";return t}();t.ActDengLuEvent=e;var a=function(){function t(){}return t}();t.ActDengLuVo=a;var i;(function(t){t[t["DENG_JI_AWARD"]=1]="DENG_JI_AWARD";t[t["ZAI_XIAN_AWARD"]=2]="ZAI_XIAN_AWARD"})(i=t.JinJieRi_Client_Type||(t.JinJieRi_Client_Type={}));var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getJinJieRiArr=function(){var t=this.netData.cfgList;var e=this.netData.info.prize;this.retArr=[];for(var i=0;i<t.length;i++){var n=new a;n.id=+t[i].id;n.actId=+t[i].activityid;n.dayNum=+t[i].p1;n.bigIcon=t[i].p2;n.tipStr=t[i].p3;n.wenzi=t[i].p4;n.award=t[i].award;n.receive_effect=t[i].receive_effect;n.moxing=t[i].p5;n.select=false;this.retArr.push(n)}for(var i=0;i<this.retArr.length;i++){var r=this.retArr[i];var o=e[i];r.state=o.status}for(var i=0;i<this.retArr.length;i++){if(this.selectitemDay){if(this.selectitemDay==this.retArr[i].dayNum){this.retArr[i].select=true;this.selectitemDay=this.retArr[i].dayNum;this.selectitemId=this.retArr[i].id;this.itemActId=this.retArr[i].actId;this.selectTempIndex=i;break}}else{if(this.retArr[i].state==1){this.retArr[i].select=true;this.selectitemDay=this.retArr[i].dayNum;this.selectitemId=this.retArr[i].id;this.itemActId=this.retArr[i].actId;this.selectTempIndex=i;break}if(i==this.retArr.length-1&&this.retArr[i].state!=1){this.retArr[0].select=true;this.selectitemDay=this.retArr[0].dayNum;this.selectitemId=this.retArr[0].id;this.itemActId=this.retArr[0].actId;this.selectTempIndex=0}}}return this.retArr};e.prototype.checkAwardEffectByDay=function(t){if(!t){t=1}var e=[];for(var i=0;i<this.retArr.length;i++){if(this.retArr[i].dayNum==t){return this.retArr[i].receive_effect}}};e.prototype.checkAwardByDay=function(t){if(!t){t=1}var e=[];for(var i=0;i<this.retArr.length;i++){if(this.retArr[i].dayNum==t){var n=this.retArr[i].award.split(";");for(var r=0;r<n.length;r++){e.push(game.ItemUtil.parserList(n[r])[0])}}}return e};e.prototype.checkDataByDay=function(t){if(!t){t=1}var e;for(var i=0;i<this.retArr.length;i++){if(this.retArr[i].dayNum==t){e=this.retArr[i]}}return e};e.SINGLE_KEY="actdenglu.ActDengLuModel";return e}(app.ModelBase);t.ActDengLuModel=n})(actdenglu||(actdenglu={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.initActivityTaRen()};e.prototype.initActivityTaRen=function(){var t=app.Config.getResById("activity_taren.csv");this._activityTaRenMap=t.getMap("id");this._activityTaRenArr=t.getArray()};e.prototype.isPartOf=function(t){for(var e=0;e<this._activityTaRenArr.length;e++){var i=this._activityTaRenArr[e];if(i.functionid==t){return true}}};e.prototype.getActivityTaRenMapCell=function(t){return this._activityTaRenMap[t]};e.prototype.getActivityTaRenArr=function(){return this._activityTaRenArr};e.SINGLE_KEY="csv.ActDengLuProxy";return e}(app.ModelBase);t.ActDengLuProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actdenglu;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.ActDengLuModel.getIns();this.shanglist.itemRender=i.ActDengLuTabItem;this.shanglist.renderHandler=new Laya.Handler(this,this.onDailyTabHandler);this.shanglist.selectEnable=true;this.shanglist.selectHandler=new Laya.Handler(this,this.onSelectHandler);this._mountAvatar=new avatar.AvatarAnimation;this.weizhi.addChild(this._mountAvatar);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=new Laya.Handler(this,this.onCellHandler);this.activityTimeView=new activitytaren.ActivityTimeView(this.shijianlab,new Laya.Handler(this,this.endTimeCallBack),"{0}")};e.prototype.onSelectHandler=function(t){var e=this._model.getJinJieRiArr()[t].dayNum;this.refreCellView(e)};e.prototype.onDailyTabHandler=function(t,e){t.lingquEffect=this.shanglist.selectedIndex==e;t.setData(t.dataSource,this._model.getJinJieRiArr(),this.shanglist,e)};e.prototype.onCellHandler=function(t,e){var i=this._model.checkAwardEffectByDay(this._model.selectitemDay).split(";")[e];t.setData(t.dataSource,"",1,undefined,i)};e.prototype.onDisplay=function(){this.lingqubtn.on(Laya.Event.CLICK,this,this.onClick);this._model.on(i.ActDengLuEvent.ACT_DENG_LU_REFRESH,this,this.refreCellView);activitytaren.ActivityTaRenModel.getIns().on(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA,this,this.refrshNetData);this.callLater(this.onGetInfo)};e.prototype.onGetInfo=function(){if(this.functionid){this._model.netData=this.actVo;this.refreshAll();this.shanglist.scrollTo(this._model.selectitemDay-1)}};e.prototype.onUnDisplay=function(){this._model.selectitemDay=undefined;this._model.selectitemId=undefined;this._model.itemActId=undefined;this.lingqubtn.off(Laya.Event.CLICK,this,this.onClick);this._model.off(i.ActDengLuEvent.ACT_DENG_LU_REFRESH,this,this.refreCellView);activitytaren.ActivityTaRenModel.getIns().off(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA,this,this.refrshNetData)};e.prototype.refreshAll=function(){this.setTabList();this.refreCellView();var t=this.actVo.timeVo;this.activityTimeView.start(t.endTime)};e.prototype.setTabList=function(){this.shanglist.repeatX=8;this.shanglist.width=620;this.shanglist.hScrollBarSkin="";this.shanglist.array=this._model.getJinJieRiArr();this.shanglist.selectedIndex=this._model.selectTempIndex};e.prototype.setCellList=function(){this.gezilist.array=this._model.checkAwardByDay(this._model.selectitemDay);this.gezilist.refresh()};e.prototype.refreCellView=function(t){this.setCellList();var e=this._model.checkDataByDay(this._model.selectitemDay);if(e.bigIcon==""){this._mountAvatar.visible=true;this.jiangliimg.visible=false;this.setAvatar(e)}else{this._mountAvatar.visible=false;this.jiangliimg.visible=true;this.jiangliimg.skin=this.getUrl(e.bigIcon)}this.wenziimg.skin="res/static/huodong/"+e.wenzi+".png";this.xiatieshilab.text=app.getLang(e.tipStr);game.RedDotView.removeFrom(this.lingqubtn);if(e.state==0){this.lingqubtn.disabled=true;this.lingqubtn.label="领取"}else if(e.state==1){game.RedDotView.addTo(this.lingqubtn);this.lingqubtn.disabled=false;this.lingqubtn.label="领取"}else if(e.state==2){this.lingqubtn.disabled=true;this.lingqubtn.label="已领取"}};e.prototype.refrshNetData=function(){var e=this;activitytaren.ActivityTaRenModel.getIns().getInfoByActID(this._model.itemActId,new Laya.Handler(this,function(t){e._model.netData.info=t;e.refreshAll();e.shanglist.scrollTo(e._model.selectitemDay-1)}))};e.prototype.onClick=function(){app.ProtocolRequest.RecvActPrizeReq(this._model.selectitemId)};e.prototype.hideSubTime=function(){this.activityTimeView.stop();this.huodonglab.visible=false;this.shijianlab.visible=false};e.prototype.endTimeCallBack=function(){this.hideSubTime()};e.prototype.getUrl=function(t){if(t){return"res/icon/activity_sign/"+t+".png"}return""};e.prototype.setAvatar=function(t){var e=new avatar.AvatarData;e.mountKey=t.moxing;this._mountAvatar.setAniData(e);this._mountAvatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,0);this._mountAvatar.play()};e.SINGLE_KEY="actdenglu.ActDengLuMainView";return e}(ui.huodong.denglujiangliUI);i.ActDengLuMainView=t})(actdenglu||(actdenglu={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actdenglu;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.ActDengLuModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i,n){this._tempData=t;this._arr=e;this._parentList=i;this.gezi.mouseEnabled=false;this.labelnum.visible=false;this.imgdaoju.visible=false;this.labeltianshu.text=""+t.dayNum;this.lingquEffect1=false;if(t.state==0){this.imglingqu.visible=false}else if(t.state==1){this.imglingqu.visible=false;this.lingquEffect1=true}else if(t.state==2){this.imglingqu.visible=true;this.imglingqu.skin="public/bg_s_yilingqu.png"}var r=game.ItemUtil.parserList(t.award)[0];game.ItemShowUtil.showType3(r,this.gezi,false)};e.prototype.onClick=function(){this._model.selectitemDay=this._tempData.dayNum;this._model.selectitemId=this._tempData.id;this._model.itemActId=this._tempData.actId};Object.defineProperty(e.prototype,"lingquEffect",{set:function(t){if(t){this.xuanzhongimg.visible=true}else{this.xuanzhongimg.visible=false}},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"lingquEffect1",{set:function(t){if(t){this.tishiani.play();this.tishiani.visible=true}else{this.tishiani.stop();this.tishiani.visible=false}},enumerable:true,configurable:true});e.SINGLE_KEY="actdenglu.ActDengLuTabItem";return e}(ui.huodong.denglujiangliitemUI);i.ActDengLuTabItem=t})(actdenglu||(actdenglu={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=n.ActHuntRichModel.getIns();app.ViewManager.regist(n.ActHuntRichMainView);app.ViewManager.regist(n.ActHuntRichRankView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.ACT_HUNT_RICH,n.ActHuntRichMainView,null,5)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.TanbaoNtf,this,this.onTanbaoNtf);this.addMsgListener(app.ProtocolResponse.TanbaoActNtf,this,this.onTanbaoActNtf);this.addMsgListener(app.ProtocolResponse.TanbaoBuffNtf,this,this.onTanbaoBuffNtf);this.addMsgListener(app.ProtocolResponse.TanbaoMoveAck,this,this.onTanbaoMoveAck);this.addMsgListener(app.ProtocolResponse.TanbaoResetLayerAck,this,this.onTanbaoResetLayerAck)};e.prototype.onTanbaoNtf=function(t,e){this._model.layer=e.layer;this._model.gridpos=e.gridpos;this._model.gridstate=e.gridstate;this._model.event(n.ActHuntRichModel.UPDATE_LAYER_VIEW)};e.prototype.onTanbaoActNtf=function(t,e){this._model.act=e.act;this._model.acttime=e.acttime;this._model.resetnum=e.resetnum;this._model.event(n.ActHuntRichModel.UPDATE_PLAYER_POWER)};e.prototype.onTanbaoBuffNtf=function(t,e){this._model.buffArr=e.buff;this._model.event(n.ActHuntRichModel.UPDATE_BUFF)};e.prototype.onTanbaoMoveAck=function(t,e){if(e.result){if(e.gridid==0){return}var i=this._model.getMoveAward(e.gridid);if(i.length>0){app.ViewManager.toggleDialog(n.ActHuntRichAwardListView,1,0,i)}if(this._model.isNeedBuffPop(e.gridid)){app.ViewManager.toggleDialog(n.ActHuntRichBuffView,1,0)}}else{console.warn("通关失败=========================")}};e.prototype.onTanbaoResetLayerAck=function(t,e){if(e.result==1){}};e.SINGLE_KEY="actHuntRich.ActHuntRichModule";return e}(app.ModuleBase);n.ActHuntRichModule=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getShopItemArr=function(){var t=csv.MallProxy.getIns().getArrayByType(csv.MallProxy.ENUM_TYPE.ACT_HUNT_RICH_SHOP);return t};e.prototype.getShopMoney=function(){var t=csv.MallProxy.getIns().getArrayByType(csv.MallProxy.ENUM_TYPE.ACT_HUNT_RICH_SHOP);return t[0].trueprice};e.SINGLE_KEY="actHuntRich.ActHuntRichChangeShopModel";return e}(app.ModelBase);t.ActHuntRichChangeShopModel=e})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var n;(function(t){t[t["BLANK"]=0]="BLANK";t[t["START_POS"]=1]="START_POS";t[t["BOSS"]=2]="BOSS";t[t["END_POS"]=3]="END_POS";t[t["RICH"]=4]="RICH";t[t["DE_BUFF"]=5]="DE_BUFF";t[t["MONSTER"]=6]="MONSTER"})(n=i.ActHuntRichItemType||(i.ActHuntRichItemType={}));var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.shopModel=i.ActHuntRichChangeShopModel.getIns();this.rankModel=i.ActHuntRichRankModel.getIns()};e.prototype.initPosItem=function(){this.posItemArr=[];for(var t=0;t<this.gridstate.length;t++){var e=new i.ActHuntRichPosItem;e.zOrder=this.gridstate.length-t;this.posItemArr.push(e)}};e.prototype.getItemType=function(t){if(t.gridid==0){return 0}return csv.ActHuntRichProxy.getIns().getCfgMapItem(t.gridid).leveltype};e.prototype.getCanGoPosArr=function(){return csv.ActHuntRichProxy.getIns().getMoveCfgMapItem(this.gridpos).location.split("-")};e.prototype.getMoveAward=function(t){var e=[];var i=csv.ActHuntRichProxy.getIns().getCfgMapItem(t).slayeraward;if(i){var n=i.split(";");for(var r=0;r<n.length;r++){e.push(game.ItemUtil.parserList(n[r])[0])}}return e};e.prototype.isNeedBuffPop=function(t){var e=csv.ActHuntRichProxy.getIns().getCfgMapItem(t).buff;if(e){return true}return false};e.prototype.getBuffData=function(){if(this.buffArr.length==0){return null}var t=0;for(var e=0;e<this.buffArr.length;e++){t+=this.buffArr[e].level}return{id:this.buffArr[0].buffid,lv:t}};e.prototype.getFightTime=function(t){var e=csv.ActHuntRichProxy.getIns().getCfgMapItem(t).battletime;return e};e.prototype.isCanGoNextLayer=function(){for(var t=0;t<this.gridstate.length;t++){var e=this.getItemType(this.gridstate[t]);if(e==n.BOSS&&this.gridstate[t].gridstate==2){return true}}return false};e.prototype.getForPosItem=function(t){for(var e=0;e<this.gridstate.length;e++){if(this.gridstate[e].gridpos==t){return this.gridstate[e]}}};e.prototype.getRoleDir=function(t){var e=this;var i=[];var n=[];this.getCanGoPosArr().map(function(t){if(+t>e.gridpos){i.push(+t)}else{n.push(+t)}});if(t>this.gridpos){if(i[0]==t){return 5}return 1}else{if(n[0]==t){return 5}return 1}};e.SINGLE_KEY="actHuntRich.ActHuntRichModel";e.UPDATE_PLAYER_MOVE="UPDATE_PLAYER_MOVE";e.UPDATE_PLAYER_POWER="UPDATE_PLAYER_POWER";e.UPDATE_LAYER_VIEW="UPDATE_LAYER_VIEW";e.SEND_NEXT_POS="SEND_NEXT_POS";e.CLICK_CD="CLICK_CD";e.UPDATE_BUFF="UPDATE_BUFF";return e}(app.ModelBase);i.ActHuntRichModel=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("activity_tanbao.csv");this._cfgMapByLayerViewId=t.getMapList("layerid","leveltype");this._cfgMap=t.getMap("id");this._cfgArr=t.getArray();var e=app.Config.getResById("activity_tanbaomove.csv");this._cfgMoveArr=e.getArray();this._cfgMoveMap=e.getMap("id");var i=app.Config.getResById("activity_tanbaorank.csv");this._cfgRankArr=i.getArray();this._cfgRankMap=i.getMap("id")};e.prototype.getBigLayerCfgArr=function(t){var e=[];var i=this._cfgMapByLayerViewId[t];for(var n in i){e.push.apply(e,i[n])}return e};e.prototype.getBigLayerCfg=function(t){return this._cfgMapByLayerViewId[t][0]};e.prototype.getCfgItemByLayerViewId=function(t,e){return this._cfgMapByLayerViewId[t][e][0]};e.prototype.getCfgMap=function(){return this._cfgMap};e.prototype.getCfgMapItem=function(t){return this._cfgMap[t]};e.prototype.getCfgArr=function(){return this._cfgArr};e.prototype.getMoveCfgMap=function(){return this._cfgMoveMap};e.prototype.getMoveCfgMapItem=function(t){return this._cfgMoveMap[t]};e.prototype.getMoveCfgArr=function(){return this._cfgMoveArr};e.prototype.getRankCfgMap=function(){return this._cfgRankMap};e.prototype.getRankCfgMapItem=function(t){return this._cfgRankMap[t]};e.prototype.getRankCfgArr=function(){return this._cfgRankArr};e.SINGLE_KEY="csv.ActHuntRichProxy";return e}(app.ModelBase);t.ActHuntRichProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getRankAward=function(t){var e=[];var i=0;var n=csv.ActHuntRichProxy.getIns().getRankCfgArr();for(var r=0;r<n.length;r++){var o=n[r].rank.split("-");var a=o[o.length-1];if(t<=+a){i=n[r].id;break}}var s=csv.ActHuntRichProxy.getIns().getRankCfgMapItem(i);if(s){var l=s.item.split(";");for(var u=0;u<l.length;u++){e.push(game.ItemUtil.parserList(l[u])[0])}}return e};e.SINGLE_KEY="actHuntRich.ActHuntRichRankModel";return e}(app.ModelBase);t.ActHuntRichRankModel=e})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.quedingbtn.clickHandler=new Laya.Handler(this,this.onBtnClose);this.label01.text="获得以下物品："};e.prototype.onBtnClose=function(){app.ViewManager.toggleDialog(e,-1,0)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource;this.daojulist.array=t};e.SINGLE_KEY="actHuntRich.ActHuntRichAwardListView";return e}(ui.yunyinghuodong.alert05UI);t.ActHuntRichAwardListView=e})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onBtnClose)};e.prototype.onBtnClose=function(){app.ViewManager.toggleDialog(e,-1,0)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.SINGLE_KEY="actHuntRich.ActHuntRichBuffView";return e}(ui.yunyinghuodong.wabaojiangliUI);t.ActHuntRichBuffView=e})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.itemdaoju.mouseEnabled=false;this.on(Laya.Event.CLICK,this,this.onMouseUpHandler);this._model=i.ActHuntRichModel.getIns()};e.prototype.onMouseUpHandler=function(){if(this.data){var t=-1;shop.ShopModel.getIns().buyItem(shop.ShopModel.ENNUMS.TANBAO_SHOP,this.data,t)}};e.prototype.setData=function(t){this.data=t;var e=t.item;var i=game.ItemUtil.createVO(e);this.labelname.text=i.getName();this.itemdaoju.setData(i);var n=t.trueprice||t.price;var r=app.str2Array(n);this.imgyuanbao.icon.skin=csv.ItemProxy.getItemSmallIcon(r[0]);shop.ShopModel.getIns().setMoneyLabelColor(this.labelmoneynum,n,"#ffffff");var o=t;if(shop.ShopModel.getIns().isbelongLimit(t)){this.labelxiangou.text=""}else{var a=o.times;this.labelxiangou.text=app.getLang("shop_txt_01",a,a-shop.ShopModel.getIns().getLimitCnt(o),a)}var s=shop.ShopModel.getIns().isSellOut(t.id);this.imgyiduihuan.visible=s};e.SINGLE_KEY="actHuntRich.ActHuntRichChangeShopItem";return e}(ui.yunyinghuodong.duihuanshangdianitemUI);i.ActHuntRichChangeShopItem=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listshengwang.itemRender=i.ActHuntRichChangeShopItem;this.listshengwang.renderHandler=new Laya.Handler(this,this.onMedalItemRender);this.listshengwang.vScrollBarSkin=" ";this._model=i.ActHuntRichModel.getIns()};e.prototype.onMedalItemRender=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this._model.shopModel.getShopItemArr();this.listshengwang.array=t;this._refreshShowMoney(t)};e.prototype._refreshShowMoney=function(t){var e=game.ItemUtil.ENUMS.TAN_BAO;if(t.length>0){var i=app.str2Array(t[0].trueprice);e=parseInt(i[0])}this.imgshengwang.icon.skin=csv.ItemProxy.getItemSmallIcon(e);this.labelshuzi01.text=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.TANBAO))};e.SINGLE_KEY="actHuntRich.ActHuntRichChangeShopView";return e}(ui.yunyinghuodong.duihuanshangchengviewUI);i.ActHuntRichChangeShopView=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.ActHuntRichModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.dianjiC.on(Laya.Event.CLICK,this,this.onSelect);this._model.on(i.ActHuntRichModel.CLICK_CD,this,this.funCd);this.mouseThrough=true};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){app.MyTween.clearAll(this.imgxuanzhong)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._vo=t;this._updateItemIcon()};e.prototype._updateItemIcon=function(){this.imgxuanzhong.visible=false;this.zhengchang.visible=false;this._updateNormalFloor();if(this._vo.gridpos==this._model.gridpos){this.imgxuanzhong.visible=false}this.dianjiC.mouseEnabled=true;this.imgxuanzhong.alpha=1;app.MyTween.clearAll(this.imgxuanzhong);var t=this._model.getCanGoPosArr();for(var e=0;e<t.length;e++){if(+t[e]==this._vo.gridpos){app.MyTween.clearAll(this.imgxuanzhong);this.imgxuanzhong.visible=true;this.playAni()}}};e.prototype._updateNormalFloor=function(){var t=this._model.getItemType(this._vo);if(t!=i.ActHuntRichItemType.BLANK&&t!=i.ActHuntRichItemType.END_POS){if(this._vo.gridstate==2){this.zhengchang.visible=true}}};e.prototype.funCd=function(){var t=this._model.getCanGoPosArr();for(var e=0;e<t.length;e++){if(+t[e]==this._vo.gridpos){this.dianjiC.mouseEnabled=false}}};e.prototype.onSelect=function(t){if(!this._isCanClick()){manager.FlowManager.instance.flowByStyle1(app.getLang("tanbaohuodong_1"));return}if(this._model.act<=0){manager.FlowManager.instance.flowByStyle1(app.getLang("体力耗尽!"));return}var e=this._model.getItemType(this._vo);if(e==i.ActHuntRichItemType.END_POS&&!this._model.isCanGoNextLayer()){manager.FlowManager.instance.flowByStyle1(app.getLang("请先击杀boss!"));return}this._model.event(i.ActHuntRichModel.CLICK_CD);this._model.event(i.ActHuntRichModel.SEND_NEXT_POS,[t.target._parent,this._vo.gridpos])};e.prototype._isCanClick=function(){var t=this._model.getCanGoPosArr();for(var e=0;e<t.length;e++){if(+t[e]==this._vo.gridpos){return true}}return false};e.prototype.playAni=function(){this.imgTween1()};e.prototype.imgTween1=function(){app.MyTween.to(this.imgxuanzhong,{alpha:0},800,null,new Laya.Handler(this,this.imgTween2))};e.prototype.imgTween2=function(){app.MyTween.to(this.imgxuanzhong,{alpha:1},800,null,new Laya.Handler(this,this.imgTween1))};e.SINGLE_KEY="actHuntRich.ActHuntRichMainItem";return e}(ui.yunyinghuodong.wabaodizuoitemUI);i.ActHuntRichMainItem=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(n){var t=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this._model=n.ActHuntRichModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihangbtn.clickHandler=new Laya.Handler(this,this._openRankView);this.shangdianbtn.clickHandler=new Laya.Handler(this,this._openShopView);this.chongzhibtn.clickHandler=new Laya.Handler(this,this.resetLevel);this.jiahaobtn.clickHandler=new Laya.Handler(this,this.clickShowTip);this.imgbuff.on(Laya.Event.CLICK,this,this._showBuff);game.HelperViewHandler.registerStr([this.wenhaobtn,this.labelshuoming],"func221t","func221");this.activityTimeView=new activitytaren.ActivityTimeView(this.labelhuodongdaojishi,new Laya.Handler(this,this.endTimeCallBack),app.getLang("huodong_text05"));this._model.initPosItem();for(var t=0;t<this._model.posItemArr.length;t++){this._model.posItemArr[t].funAddChild(this.gezi["objlayer"])}var e=game.Config.getParams(924);this.huonidaoju.parserIcon(e,this.labelshuzhi)};t.prototype.onDisplay=function(){this.callLater(this.onGetInfo);this._model.on(n.ActHuntRichModel.UPDATE_LAYER_VIEW,this,this.refreshAll);this._model.on(n.ActHuntRichModel.UPDATE_BUFF,this,this._updateBuffView);this._model.on(n.ActHuntRichModel.UPDATE_PLAYER_POWER,this,this._updateTopView);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this._shopRed)};t.prototype.onUnDisplay=function(){this._model.off(n.ActHuntRichModel.UPDATE_LAYER_VIEW,this,this.refreshAll);this._model.off(n.ActHuntRichModel.UPDATE_BUFF,this,this._updateBuffView);this._model.off(n.ActHuntRichModel.UPDATE_PLAYER_POWER,this,this._updateTopView);game.MoneyModel.getIns().off(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this._shopRed)};t.prototype.onGetInfo=function(){if(this.functionid){this._model.netData=this.actVo;this.refreshAll()}};t.prototype.refreshAll=function(){this.gezi["objlayer"].mouseThrough=true;this._updateTopView();this._updateBuffView();this._updateDungeonView();this._setDailyTime();this._shopRed()};t.prototype._updateTopView=function(){this.shuzi.value=this._model.layer+"";this.labelshuzi.text=this._model.act+"/"+game.Config.getParams(926);var t=this.actVo.timeVo;this.activityTimeView.start(t.endTime);this.labelchongzhicishu.text="重置次数（"+this._model.resetnum+"/"+game.Config.getParams(923)+"）"};t.prototype._updateBuffView=function(){var t=this._model.getBuffData();if(t){this.imgbuff.visible=true;this.labelmiaoshu.visible=true;this.dengji.visible=true;this.imgwenzidi.visible=true;var e=csv.StatusProxy.getIns().getCfg(t.id,t.lv);this.imgbuff.skin="res/icon/skill/"+e.iconid+".png";this.labelmiaoshu.text=app.getLang(e.name);this.dengji.text="Lv."+app.getLang(t.lv)}else{this.imgbuff.visible=false;this.labelmiaoshu.visible=false;this.dengji.visible=false;this.imgwenzidi.visible=false}};t.prototype._updateDungeonView=function(){for(var t=0;t<this._model.posItemArr.length;t++){if(this.gezi["dizuo"+(t+1)]){this.gezi["dizuo"+(t+1)].setData(this._model.gridstate[t]);this._model.posItemArr[t].setData(this._model.gridstate[t])}}};t.prototype._setDailyTime=function(){this.labeldaojishi.visible=false;this.wenzidi.visible=false;var t=this._model.acttime-game.Context.getServerTime();if(this._model.act<+game.Config.getParams(926)&&t>0){this.labeldaojishi.visible=true;this.wenzidi.visible=true;this.labeldaojishi.text=util.TimeUtil.formatTime(t)+app.getLang("后恢复一次");this.startLoop()}};t.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=this._model.acttime-game.Context.getServerTime();if(t>0){this.labeldaojishi.text=util.TimeUtil.formatTime(t)+app.getLang("后恢复一次")}else{this.labeldaojishi.visible=false;this.wenzidi.visible=false;Laya.timer.clear(this,this.loopFreshTime)}};t.prototype._shopRed=function(){if(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.TANBAO)>=10){game.RedDotView.addTo(this.shangdianbtn,76)}else{game.RedDotView.removeFrom(this.shangdianbtn)}};t.prototype.hideSubTime=function(){this.activityTimeView.stop();this.labeldaojishi.visible=false};t.prototype.endTimeCallBack=function(){this.hideSubTime()};t.prototype._showBuff=function(){var t=this._model.getBuffData();tip.TipManager.showBuff(t.id,t.lv)};t.prototype.clickShowTip=function(){var t=game.ItemUtil.parserList("8022-1")[0];tip.TipManager.show(t,true,true)};t.prototype._openRankView=function(){app.ViewManager.toggleDialog(n.ActHuntRichRankView,1,0)};t.prototype._openShopView=function(){app.ViewManager.toggleDialog(n.ActHuntRichChangeShopView,1,0)};t.prototype.resetLevel=function(){app.ViewManager.toggleDialog(n.ActHuntRichReTipsView,1,0)};t.SINGLE_KEY="actHuntRich.ActHuntRichMainView";return t}(ui.yunyinghuodong.wabaoviewUI);n.ActHuntRichMainView=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(n){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t._model=n.ActHuntRichModel.getIns();t.width=192;t.height=100;t._model.on(n.ActHuntRichModel.SEND_NEXT_POS,t,t.onSelect);return t}t.prototype.funAddChild=function(t){t.addChild(this)};t.prototype.setData=function(t){this._vo=t;this.x=n.ActHuntRichMainView.getIns().gezi["dizuo"+t.gridpos].x;this.y=n.ActHuntRichMainView.getIns().gezi["dizuo"+t.gridpos].y;this._setObj();this._setPlayer();this.mouseThrough=true};t.prototype._setObj=function(){var t=this._model.getItemType(this._vo);if(t==n.ActHuntRichItemType.BLANK||t==n.ActHuntRichItemType.START_POS){}else{var e=csv.ActHuntRichProxy.getIns().getCfgItemByLayerViewId(this._model.layer,t).showpicture;if(t==n.ActHuntRichItemType.BOSS||t==n.ActHuntRichItemType.MONSTER){if(!this.roleAvatar){this.roleAvatar=new avatar.AvatarAnimation;this._roleAvatar=new avatar.AvatarData;this._roleAvatar.roleKey=e;this.roleAvatar.x=100;this.roleAvatar.y=50;this.addChild(this.roleAvatar)}this.setAniVisible(true,false,false);this._roleAvatar.roleKey=e;this._roleAvatar.fileName=game.AniView.FILE_NAME.MONSTER;this.roleAvatar.scale(.5,.5);this.roleAvatar.setAniData(this._roleAvatar);this.roleAvatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,6);this.roleAvatar.play()}else if(t==n.ActHuntRichItemType.END_POS){if(!this.roleAvatar){this.roleAvatar=new avatar.AvatarAnimation;this._roleAvatar=new avatar.AvatarData;this._model.isCanGoNextLayer()?this._roleAvatar.roleKey=e:this._roleAvatar.roleKey="chuansong03";this.roleAvatar.x=100;this.roleAvatar.y=50;this.addChild(this.roleAvatar)}this.setAniVisible(true,false,false);this._model.isCanGoNextLayer()?this._roleAvatar.roleKey=e:this._roleAvatar.roleKey="chuansong03";this._roleAvatar.fileName=game.AniView.FILE_NAME.MONSTER;this.roleAvatar.scale(.5,.5);this.roleAvatar.setAniData(this._roleAvatar);this.roleAvatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,0);this.roleAvatar.play()}else if(t==n.ActHuntRichItemType.DE_BUFF){if(!this.aniEffect){this.aniEffect=new game.AniView;this.aniEffect.x=100;this.aniEffect.y=20;this.addChild(this.aniEffect)}this.setAniVisible(false,true,false);this.aniEffect.load(e,game.AniView.FILE_NAME.BUFF);this.aniEffect.play(0)}else{if(!this._img){this._img=new Laya.Image;this._img.x=10;this._img.y=-80;this.addChild(this._img)}this.setAniVisible(false,false,true);this._img.skin="res/static/yunyinghuodong/"+e+".png"}}if(this._vo.gridstate==0||this._vo.gridstate==2){this.setAniVisible(false,false,false)}};t.prototype._setPlayer=function(t,e){if(t===void 0){t=avatar.AvatarAnimation.ANI_ENUMS.IDLE}if(e===void 0){e=6}if(this._model.gridpos==this._vo.gridpos){if(!this.roleAvatar){this.roleAvatar=new avatar.AvatarAnimation;this._roleAvatar=new avatar.AvatarData;this._roleAvatar.roleKey="dawa";this._roleAvatar.fileName=game.AniView.FILE_NAME.ROLE;this.roleAvatar.x=100;this.roleAvatar.y=30;this.addChild(this.roleAvatar)}this.setAniVisible(true,false,false);this._roleAvatar.roleKey="dawa";this._roleAvatar.fileName=game.AniView.FILE_NAME.ROLE;this.roleAvatar.scale(1,1);this.roleAvatar.setAniData(this._roleAvatar);this.roleAvatar.setAni(t,e);this.roleAvatar.play()}};t.prototype._getPosCenter=function(t){return{x:t.x+t.width/2,y:t.y+t.height/2}};t.prototype.setAniVisible=function(t,e,i){if(this.roleAvatar){this.roleAvatar.visible=t}if(this.aniEffect){this.aniEffect.visible=e}if(this._img){this._img.visible=i}};t.prototype.onSelect=function(t,e){if(e==this._vo.gridpos&&this._model.getForPosItem(e).gridstate==0){var i=this._model.getItemType(this._vo);if(i==n.ActHuntRichItemType.BOSS||i==n.ActHuntRichItemType.MONSTER){this.setAniVisible(true,false,false)}else if(i==n.ActHuntRichItemType.DE_BUFF){this.setAniVisible(false,true,false)}else if(i==n.ActHuntRichItemType.RICH){this.setAniVisible(false,false,true)}}if(this._model.gridpos==this._vo.gridpos){this._sendSeverData=e;this._targer=t;this._setPlayer(avatar.AvatarAnimation.ANI_ENUMS.RUN,game.SceneModel.getDirByTowPoint(this.x,this.y,t.x,t.y));app.MyTween.to(this,{x:t.x,y:t.y},800,null,new Laya.Handler(this,this._nextAction))}};t.prototype._nextAction=function(){app.ProtocolRequest.TanbaoMoveReq(this._sendSeverData);this.roleAvatar.visible=false};return t}(View);n.ActHuntRichPosItem=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgbg.on(Laya.Event.CLICK,this,this.onClick);this.listjiangli.itemRender=grids.GridView;this.listjiangli.renderHandler=grids.GridView.CommonItemRender;this._model=i.ActHuntRichModel.getIns()};e.prototype.onClick=function(t){t.stopPropagation();if(!Uint64.equal(this.dataSource.uid,game.Context.mainRoleId)){rank.RankModel.showRankBtnList(this.dataSource.uid,this.dataSource.name,this.dataSource.totallv,this.dataSource.classskin,this.dataSource.headframeId)}else{if(app.ViewManager.DisplayedInStage(friend.HaoYouCaiDanView.SINGLE_KEY)){app.ViewManager.toggleView(friend.HaoYouCaiDanView,app.AppContainer.flowLayer,-1)}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=rank.RankModel.getIns().getRankNum(e,t.uid);this.lapelpaiming.text=i.toString();this.labelname.text=game.Context.clearPlayerName(t.name);this.listjiangli.array=this._model.rankModel.getRankAward(i);if(Uint64.equal(t.uid,game.Context.mainRoleId)){this.lapelpaiming.color=this.labelduanwei.color=this.labelname.color=game.STYLES.YELLOW_COLOR_S}else{this.lapelpaiming.color=this.labelduanwei.color=this.labelname.color=game.STYLES.DESC_TXT_COLOR_S}this.labelduanwei.text="第"+t.value.toNumber()+"层";this.imgbg.skin=rank.RankModel.getRankBgUrl(i)};e.SINGLE_KEY="actHuntRich.ActHuntRichRankItem";return e}(ui.yunyinghuodong.wabaopaihangbangitem02UI);i.ActHuntRichRankItem=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listpaiming01.itemRender=i.ActHuntRichRankItem;this.listpaiming01.renderHandler=new Laya.Handler(this,this.onRender);this._model=rank.RankModel.getIns()};e.prototype.onRender=function(t,e){t.setData(t.dataSource,rank.RankModel.TYPE_ENUM.ENMRANKTYPE_TANBAO)};e.prototype.onDisplay=function(){app.ProtocolRequest.GetRankListReq(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_TANBAO);this._model.on(rank.RankModel.RANK_DATA_CHANGE,this,this.onDataChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(rank.RankModel.RANK_DATA_CHANGE,this,this.onDataChange)};e.prototype.onDataChange=function(t){if(t==rank.RankModel.TYPE_ENUM.ENMRANKTYPE_TANBAO){this.refreshAll()}};e.prototype.refreshAll=function(){var t=this._model.getRankInfo(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_TANBAO);if(!t){this.listpaiming01.array=[];this.renwu.visible=false;this.labelwodepaiming.visible=false;this.labelwodepaimingnum.text="";this.labelduanwei.text=""}else{this.labelwodepaiming.visible=true;this.listpaiming01.array=t.rankList;this.labelduanwei.text="第"+t.rankValue.toNumber()+"层";this.labelwodepaimingnum.text=t.rank==0?app.getLang("paihang_txt01"):app.getLang(t.rank);this.renwu.visible=true;this.renwu.setData(game.Context.mainRoleId,game.Context.mainRole.playername,game.Context.teamAvatar,game.Context.mainRole.headframeId)}};e.SINGLE_KEY="actHuntRich.ActHuntRichRankView";return e}(ui.yunyinghuodong.wabaopaihangbangviewUI);i.ActHuntRichRankView=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actHuntRich;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.confirm);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.unConfirm)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.shuzhi.text=game.Config.getParams(924).split("-")[1]+"";this.titleimg.text=app.getLang("tanbao_reset")};e.prototype.confirm=function(){app.ProtocolRequest.TanbaoResetLayerReq();app.ViewManager.toggleDialog(i.ActHuntRichReTipsView,-1,0)};e.prototype.unConfirm=function(){app.ViewManager.toggleDialog(i.ActHuntRichReTipsView,-1,0)};e.SINGLE_KEY="actHuntRich.ActHuntRichReTipsView";return e}(ui.yunyinghuodong.wabaoguanqiachongzhiUI);i.ActHuntRichReTipsView=t})(actHuntRich||(actHuntRich={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var activitytaren;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.GetActMainPanelResp,this,this.onGetActMainPanelRespHandle);this.addMsgListener(app.ProtocolResponse.RecvActPrizeResp,this,this.onRecvActPrizeRespHandle);this.addMsgListener(app.ProtocolResponse.ActRedTipsNoti,this,this.onActRedTipsNotiHandle);this.addMsgListener(app.ProtocolResponse.ActShowIconNoti,this,this.onActShowIconNotiHandle)};e.prototype.onGetActMainPanelRespHandle=function(t,e){i.ActivityTaRenModel.getIns().iconMan.saveMainPanelInfo(e);i.ActivityTaRenModel.getIns().event(i.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.GET_MAIN_PANEL_INFO,e)};e.prototype.onRecvActPrizeRespHandle=function(t,e){i.ActivityTaRenModel.getIns().iconMan.savePrizeData(e);i.ActivityTaRenModel.getIns().event(i.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA)};e.prototype.onActRedTipsNotiHandle=function(t,e){i.ActivityTaRenModel.getIns().redRefresh(e.list);newshangcheng.NewShangChengModel.getIns().checkSubjectRed()};e.prototype.onActShowIconNotiHandle=function(t,e){i.ActivityTaRenModel.getIns().iconMan.refresh(e.list);newshangcheng.NewShangChengModel.getIns().checkHuoDong();newshangcheng.ActivityTipModel.getIns().onActShowIconNoti()};e.SINGLE_KEY="activity_taren.ActivityTaRenModule";return e}(app.ModuleBase);i.ActivityTaRenModule=t})(activitytaren||(activitytaren={}));var activitytaren;(function(e){var t=function(){function t(){}t.prototype.getStart=function(t,e){this.protocolList=t;this.endCallBack=e;this.start()};t.prototype.start=function(){if(this.protocolList.length>0){var t=this.protocolList.pop();e.ActivityTaRenModel.getIns().getInfoByActID(t,new Laya.Handler(this,this.start))}else{this.endCallBack.run()}};return t}();e.ActivityGetDataListAcp=t})(activitytaren||(activitytaren={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.serverid=parseInt(game.Context.serverId);this.cfgMap={};var t=app.Config.getResById("activity_taren.csv",new Laya.Handler(this,this.checkCfg));this.allList=t.getArray();if(!t.byteCfg){var e=[];for(var i=0;i<this.allList.length;i++){if(this.checkCfg(this.allList[i])){e.push(this.allList[i])}}t.arrData=e;this.allList=e}this.cfgMap=t.getMap("id");this.clientTypeCfgArr=t.getMapList("client_type");this.initActivityidMap()};e.prototype.checkCfg=function(t){var e=t.serverid;var i=e.split("-");if(this.serverid>=parseInt(i[0])&&this.serverid<=parseInt(i[1])){return true}return false};e.prototype.initActivityidMap=function(){this.activityidMap={};this.activityTimeCfgMap={};var t=this.allList;for(var e=0;e<t.length;e++){var i=t[e];var n=parseInt(i.activityid);if(!this.activityidMap[n]){this.activityidMap[n]=this.getCfgListByActivityID(n)}if(!this.activityTimeCfgMap[n]){this.activityTimeCfgMap[n]=new activitytaren.ActityTimeTaRenTimeVO(i)}}};e.prototype.getCfgByActivityid=function(t){var e=this.allList;for(var i=0;i<e.length;i++){var n=e[i];if(n.activityid==t){return n}}};e.prototype.getCfgListByType=function(t){var e=[];for(var i=0;i<this.allList.length;i++){var n=this.allList[i];if(n.client_type==t){var r=new activitytaren.ActivityTaRenVO(n.activityid);e.push(r)}}return e};e.prototype.getCfgByFunctionid=function(t){var e=this.allList;for(var i=0;i<e.length;i++){var n=e[i];if(n.functionid==t){return n}}};e.prototype.getCfgListByActivityID=function(t){var e=[];var i=this.allList;for(var n=0;n<i.length;n++){var r=i[n];if(r.activityid==t){e.push(r)}}return e};e.SINGLE_KEY="csv.ActivityTarenProxy";return e}(app.ModelBase);t.ActivityTarenProxy=e})(csv||(csv={}));var activitytaren;(function(t){var e;(function(t){t[t["EVERY_DAY_CHONG_ZHI"]=4]="EVERY_DAY_CHONG_ZHI";t[t["REN_YI_CHONG_ZHI"]=5]="REN_YI_CHONG_ZHI";t[t["SHOU_CHONG"]=6]="SHOU_CHONG";t[t["ZERO"]=13]="ZERO";t[t["PEDLAR"]=14]="PEDLAR";t[t["JITIAN_HAOLI"]=16]="JITIAN_HAOLI";t[t["QI_RI_LEI_CHONG"]=17]="QI_RI_LEI_CHONG";t[t["XIANSHICHOUKA"]=26]="XIANSHICHOUKA";t[t["XING_YUN_ZHUAN_PAN"]=27]="XING_YUN_ZHUAN_PAN";t[t["MOTIVE_HUO_DONG"]=29]="MOTIVE_HUO_DONG";t[t["INVESTMENT"]=30]="INVESTMENT";t[t["XIAN_SHI_TEHUI_LIBAO"]=32]="XIAN_SHI_TEHUI_LIBAO";t[t["XIANG_YAO_DING_ZHI"]=33]="XIANG_YAO_DING_ZHI";t[t["TONGTIANGE"]=34]="TONGTIANGE";t[t["TONGTIANGE_SHOP"]=35]="TONGTIANGE_SHOP";t[t["YI_SHOU_RUQING"]=36]="YI_SHOU_RUQING";t[t["YI_SHOU_RUQING_LIBAO"]=38]="YI_SHOU_RUQING_LIBAO";t[t["ZHAN_LIN"]=39]="ZHAN_LIN"})(e=t.ActivityTaRenType||(t.ActivityTaRenType={}));var i;(function(t){t[t["CAN_T_LINGQU"]=0]="CAN_T_LINGQU";t[t["YOU_CAN_LING_QU"]=1]="YOU_CAN_LING_QU";t[t["IS_ALREADY_LING_QU"]=2]="IS_ALREADY_LING_QU"})(i=t.ActivityTaRenLingQuStatus||(t.ActivityTaRenLingQuStatus={}))})(activitytaren||(activitytaren={}));var activitytaren;(function(t){var e=function(){function t(){}return t}();t.ActityCheckNode=e})(activitytaren||(activitytaren={}));var activitytaren;(function(s){var t=function(){function c(t){this.cfg=t}Object.defineProperty(c.prototype,"cfgData",{get:function(){return this.cfg},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"open_date",{get:function(){return parseInt(this.cfg.open_date)},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"open_type",{get:function(){return parseInt(this.cfg.open_type)},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"startTime",{get:function(){var t=this.cfg;var e;var i=[];var n=0;var r=0;var o=this.open_type;if(o==c.OPEN_TYPE_ZERO||o==c.OPEN_TYPE_3){switch(this.open_date){case c.TYPE_TIME_SERVER_OPEN:e=app.str2Array(t.date_juti,";");n=game.Context.openZeroTime+e[0]*util.TimeUtil.secOneDay-1;n=game.Context.getServerZeroTime(n);break;case c.TYPE_YEAR_MONDAY_DAY_TIME:i=t.date_juti.split(";");n=util.TimeUtil.getTimeByDate(i[0],i[1],i[2],i[3],i[4]);break;case c.TYPE_CRETAE_ROLE:e=t.date_juti.split(";").map(app.parseStr2Int);n=game.Context.getServerZeroTime(game.Context.mainRole.createTime)+e[0]*util.TimeUtil.secOneDay-1;n=game.Context.getServerZeroTime(n);break}}else if(o==c.OPEN_TYPE_4){if(this.open_date==c.TYPE_YEAR_MONDAY_DAY_TIME){var a=t.date_juti.split(";").map(app.parseStr2Int);var s=t.activity_date.split(";").map(app.parseStr2Int);var l=util.TimeUtil.getTimeByDate(a[0],a[1],a[2],a[3],a[4])+util.TimeUtil.secOneDay;var u=util.TimeUtil.getTimeByDate(s[0],s[1],s[2],s[3],s[4]);var p=game.Context.openZeroTime+parseInt(t.open_canshu)*util.TimeUtil.secOneDay;if(p<=l){i=t.date_juti.split(";");n=util.TimeUtil.getTimeByDate(i[0],i[1],i[2],i[3],i[4])}else if(p>=l&&p<=u){n=p}}}else{if(o==1){r=game.Context.openZeroTime+(parseInt(t.open_canshu)-1)*util.TimeUtil.secOneDay}else if(parseInt(t.open_type)==c.OPEN_TYPE_COMBINE_SERVER){r=game.Context.mergeZeroTime+(parseInt(t.open_canshu)-1)*util.TimeUtil.secOneDay}var h=game.Context.getServerTime();if(h>=r){if(this.open_date==c.TYPE_WEEK_NUM){if(util.TimeUtil.getWeekDay(h)==parseInt(t.date_juti)){n=game.Context.getServerZeroTime(h)}}}}return n},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"allTime",{get:function(){return this.endTime-this.startTime},enumerable:true,configurable:true});Object.defineProperty(c.prototype,"endTime",{get:function(){var t;var e=[];var i;var n;var r=this.cfg;if(parseInt(r.open_type)==c.OPEN_TYPE_ZERO||parseInt(r.open_type)==c.OPEN_TYPE_3||parseInt(r.open_type)==c.OPEN_TYPE_4){if(parseInt(r.open_date)==c.TYPE_TIME_SERVER_OPEN){t=r.date_juti.split(";").map(app.parseStr2Int);if(t.length==1){i=game.Context.openZeroTime+t[0]*util.TimeUtil.secOneDay}else if(t.length==2){i=game.Context.openZeroTime+t[1]*util.TimeUtil.secOneDay}}else if(parseInt(r.open_date)==c.TYPE_YEAR_MONDAY_DAY_TIME){if(r.date3==""){e=r.activity_date.split(";").map(app.parseStr2Int)}else{e=r.date3.split(";").map(app.parseStr2Int)}i=util.TimeUtil.getTimeByDate(e[0],e[1],e[2],e[3],e[4])}else if(parseInt(r.open_date)==c.TYPE_COMBINE_SERVER){t=r.date_juti.split(";").map(app.parseStr2Int);if(t.length==1){i=game.Context.getServerZeroTime(game.Context.mainRole.createTime)+t[0]*util.TimeUtil.secOneDay}else if(t.length==2){i=game.Context.getServerZeroTime(game.Context.mainRole.createTime)+t[1]*util.TimeUtil.secOneDay}}}else{if(parseInt(r.open_type)==c.OPEN_TYPE_OPEN_SERVER){n=game.Context.openZeroTime+(parseInt(r.open_canshu)-1)*util.TimeUtil.secOneDay}else if(parseInt(r.open_type)==c.OPEN_TYPE_COMBINE_SERVER){n=game.Context.openZeroTime+(parseInt(r.open_canshu)-1)*util.TimeUtil.secOneDay}var o=game.Context.getServerTime();if(o>=n){if(parseInt(r.open_date)==c.TYPE_WEEK_NUM){if(util.TimeUtil.getWeekDay(o)==parseInt(r.date_juti)){var a=game.Context.getServerZeroTime(o);i=a+util.TimeUtil.secOneDay}}}}if(this.cfg.client_type==s.ActivityTaRenType.REN_YI_CHONG_ZHI||this.cfg.client_type==s.ActivityTaRenType.EVERY_DAY_CHONG_ZHI){if(this.cfg.p2=="1"){i=game.Context.getServerZeroTime()+util.TimeUtil.secOneDay}}return i},enumerable:true,configurable:true});c.TYPE_TIME_SERVER_OPEN=1;c.TYPE_YEAR_MONDAY_DAY_TIME=2;c.TYPE_WEEK_NUM=3;c.TYPE_CRETAE_ROLE=4;c.TYPE_COMBINE_SERVER=5;c.OPEN_TYPE_ZERO=0;c.OPEN_TYPE_OPEN_SERVER=1;c.OPEN_TYPE_COMBINE_SERVER=2;c.OPEN_TYPE_3=3;c.OPEN_TYPE_4=4;return c}();s.ActityTimeTaRenTimeVO=t})(activitytaren||(activitytaren={}));var activitytaren;(function(r){var t=function(){function t(t){this.cfg=t;this.curCfg=t;this.functionid=parseInt(t.functionid);this.functionidList=[];if(this.functionid){var e=csv.FunctionsProxy.getIns().getCfg(this.functionid);if(e){if(e.closure){var i=app.str2Array(e.closure,"-");if(parseInt(i[0])==1){var n=parseInt(i[1]);this.windowId=n;this.functionidList=csv.WindowProxy.getIns().getFuncs(n)}}}else{console.error("没有找到function id = "+this.functionid+",当前的mainDlg id = "+t.id)}if(this.functionid!=0&&this.functionidList.indexOf(this.functionid)==-1){this.functionidList.push(this.functionid)}}}Object.defineProperty(t.prototype,"type",{get:function(){return parseInt(this.cfg.type)},enumerable:true,configurable:true});t.prototype.getCanOpenFuncID=function(){for(var t=0;t<this.functionidList.length;t++){var e=this.functionidList[t];if(csv.FunctionsProxy.getIns().isOpen(e)){return e}}return-1};t.prototype.isCanShow=function(){if(!csv.MainIconProxy.getIns().checkLevel(parseInt(this.cfg.id))){return false}if(game.Context.teamLv<this.cfg.teamlevel){return false}var t=false;for(var e=0;e<this.functionidList.length;e++){var i=this.functionidList[e];var n=csv.ActivityTarenProxy.getIns().getCfgByFunctionid(i);if(n){if(!t){if(r.ActivityTaRenModel.getIns().iconMan.isCanShow(n.activityid)){t=true}}}else{if(csv.FunctionsProxy.getIns().isOpen(i)){t=true}}}return t};t.TYPE_FUNCTION=0;t.TYPE_ACTITY_ID=1;return t}();r.MainDlgIconVO=t})(activitytaren||(activitytaren={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var sevendaysign;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SEVEN_DAY_SIGN,i.ActSevenDaySignMainView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SEVEN_DAY_SIGN_BEI,i.ActSevenDaySignMainView,null,game.ECommonType.COMMON_TYPE_WITOUT_TAB);this._model=i.ActSevenDaySignModel.getIns()};e.prototype.initCommands=function(){};e.prototype.onRedDotChange=function(){Laya.timer.callLater(this,this.onUpdateRedDot)};e.prototype.onUpdateRedDot=function(){this._model.checkRedDot()};e.SINGLE_KEY="sevendaysign.ActSevenDaySignModule";return e}(app.ModuleBase);i.ActSevenDaySignModule=t})(sevendaysign||(sevendaysign={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var sevendaysign;(function(t){var e=function(){function t(){}t.ACT_SEVEN_DAY_REFRESH_RED="ACT_SEVEN_DAY_REFRESH_RED";t.ACT_DENG_LU_CHANGE="ACT_DENG_LU_CHANGE";return t}();t.ActSeventEvent=e;var o=function(){function t(){}return t}();t.ActDaySignVo=o;var i;(function(t){t[t["DENG_JI_AWARD"]=1]="DENG_JI_AWARD";t[t["ZAI_XIAN_AWARD"]=2]="ZAI_XIAN_AWARD"})(i=t.JinJieRi_Client_Type||(t.JinJieRi_Client_Type={}));var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getDaySignArr=function(){var t=this.netData.cfgList;var e=this.netData.info.prize;this.retArr=[];for(var i=0;i<t.length;i++){var n=t[i];var r=new o;r.id=+n.id;r.actId=+n.activityid;r.cfg=n;this.retArr.push(r)}for(var i=0;i<e.length;i++){this.retArr[i].state=e[i].status}return this.retArr};e.prototype.getSendDayArr=function(){var t=[];for(var e=0;e<this.retArr.length;e++){if(this.retArr[e].state==1){t.push(this.retArr[e].cfg)}}return t};e.prototype.getedAwardArr=function(){var t=[];for(var e=0;e<this.retArr.length;e++){if(this.retArr[e].state==2){t.push(e+1)}}return t};e.prototype.getCanAwardArr=function(){var t=[];for(var e=0;e<this.retArr.length;e++){if(this.retArr[e].state==1){t.push(e+1)}}return t};e.prototype.getIndexDayData=function(t){for(var e=0;e<this.retArr.length;e++){if(+this.retArr[e].cfg.p1.split("_")[0]==t){return this.retArr[e]}}return null};e.prototype.checkRedDot=function(){var i=this;activitytaren.ActivityTaRenModel.getIns().getInfoByActID(67,new Laya.Handler(this,function(t){if(i.netData){i.netData.info=t;i.retArr=i.getDaySignArr();var e=i.getCanAwardArr();if(e.length>0){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.SEVEN_DAY_SIGN)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.SEVEN_DAY_SIGN)}}}))};e.SINGLE_KEY="sevendaysign.ActSevenDaySignModel";return e}(app.ModelBase);t.ActSevenDaySignModel=n})(sevendaysign||(sevendaysign={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var sevendaysign;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._mountAvatar=new avatar.AvatarAnimation;this.weizhi.addChild(this._mountAvatar)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){Laya.Tween.clearTween(this.tupian);this.imgTween1()};e.prototype.setData=function(t){this.ditu.skin="res/static/qiriqiandao/bg_qrqd_img_"+t.cfg.p1+".jpg";if(t.cfg.p3==1){this.tupian.visible=true;this.weizhi.visible=false;this.tupian.skin="res/static/qiriqiandao/"+t.cfg.p2+".png"}else{this.weizhi.visible=true;this.tupian.visible=false;this.setAvatar(t.cfg.p2)}};e.prototype.setAvatar=function(t){var e=new avatar.AvatarData;e.mountKey=t;this._mountAvatar.setAniData(e);this._mountAvatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,0);this._mountAvatar.scale(.8,.8);this._mountAvatar.play()};e.prototype.imgTween1=function(){Laya.Tween.to(this.tupian,{y:100},1e3,null,new Laya.Handler(this,this.imgTween2))};e.prototype.imgTween2=function(){Laya.Tween.to(this.tupian,{y:120},1e3,null,new Laya.Handler(this,this.imgTween1))};e.SINGLE_KEY="sevendaysign.ActSevenDaySignBannerItem";return e}(ui.qiriqiandao.qiriqiandaoitemUI);t.ActSevenDaySignBannerItem=e})(sevendaysign||(sevendaysign={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var sevendaysign;(function(a){var t=function(t){__extends(o,t);function o(){return t!==null&&t.apply(this,arguments)||this}o.getIns=function(){return app.Singleton.getInstance(o)};o.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=a.ActSevenDaySignModel.getIns();this.activityTimeView=new activitytaren.ActivityTimeView(this.labeldaojishi2,new Laya.Handler(this,this.endTimeCallBack),app.getLang("huodong_text05"));this.gundong.hScrollBarSkin="";this.gundong.hScrollBar.elasticDistance=0;this._bannerMediator=new a.BannerMediator(this.gundong,this.huadong,a.ActSevenDaySignBannerItem,this.liebiao,2e3,this.jiantou2,this.jiantou1);this._uiImgArr=[this.zhezhao1,this.zhezhao2,this.zhezhao3,this.zhezhao4,this.zhezhao5,this.zhezhao6,this.zhezhao7];this.btnaniu.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.CLICK,this,this.onClick2);game.HelperViewHandler.registerStr([this.wenhao],"func309t","func309")};o.prototype.initState=function(){for(var t=1;t<8;t++){Laya.Tween.clearTween(this["fudong"+t]);this["zhanshi"+t].mouseEnabled=false;this["shanguang"+t].play(0,true);this["shanshuo"+t].play(0,true);this.imgTween1(t)}for(var t=0;t<this._uiImgArr.length;t++){this._uiImgArr[t].visible=true;this._uiImgArr[t].mouseEnabled=true}};o.prototype.imgTween1=function(t){Laya.Tween.to(this["fudong"+t],{y:this["fudong"+t].y+5},800,null,new Laya.Handler(this,this.imgTween2,[t]))};o.prototype.imgTween2=function(t){Laya.Tween.to(this["fudong"+t],{y:this["fudong"+t].y-5},800,null,new Laya.Handler(this,this.imgTween1,[t]))};o.prototype.onDisplay=function(){this.initState();activitytaren.ActivityTaRenModel.getIns().on(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA,this,this.refrshNetData);this.callLater(this.onGetInfo)};o.prototype.onGetInfo=function(){if(this.functionid){this._model.netData=this.actVo;this.refreshAll()}};o.prototype.onUnDisplay=function(){activitytaren.ActivityTaRenModel.getIns().off(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA,this,this.refrshNetData)};o.prototype.refreshAll=function(){var t=this.actVo.timeVo;this.activityTimeView.start(t.endTime);var e=this._model.getDaySignArr();var i=[e[e.length-1]];for(var n=0;n<e.length;n++){i.push(e[n])}i.push(e[0]);this._bannerMediator.setData(i,e);this._bannerMediator.startMove();this.updateShanView()};o.prototype.refrshNetData=function(){var e=this;activitytaren.ActivityTaRenModel.getIns().getInfoByActID(this.actVo.actid,new Laya.Handler(this,function(t){e._model.netData.info=t;e._model.retArr=e._model.getDaySignArr();e.updateShanView()}))};o.prototype.setSkin=function(t){var e=0;if(t==1){e=7}else if(t==2){e=5}else if(t==3){e=6}else if(t==4){e=4}else if(t==5){e=2}else if(t==6){e=1}else if(t==7){e=3}return e};o.prototype.updateShanView=function(){var e=this;var t=this._model.getedAwardArr();var i=this._model.getCanAwardArr();for(var n=1;n<=7;n++){this["shanguang"+n].visible=false;this["shanshuo"+n].visible=true;this["lingqu"+n].visible=false;this["zhanshi"+this.setSkin(n)].skin="res/static/qiriqiandao/"+this._model.netData.cfgList[n-1].p4+".png"}t.map(function(t){e["shanshuo"+t].visible=false;e["lingqu"+t].visible=true;e["zz"+t].visible=true;Laya.Tween.clearTween(e["fudong"+t])});i.map(function(t){e["shanguang"+t].visible=true});if(i.length>0){this.btnaniu.label=app.getLang("签到领礼");this.btnaniu.disabled=false;game.RedDotView.addTo(this.btnaniu)}else{game.RedDotView.removeFrom(this.btnaniu);this.btnaniu.disabled=true;if(this._model.getIndexDayData(7).state==2){this.btnaniu.label=app.getLang("已领完")}else{this.btnaniu.label=app.getLang("明日领礼")}}};o.prototype.hideSubTime=function(){this.activityTimeView.stop();this.labeldaojishi2.visible=false};o.prototype.endTimeCallBack=function(){this.hideSubTime()};o.prototype.onClick=function(){var t=this._model.getSendDayArr();t.map(function(t){app.ProtocolRequest.RecvActPrizeReq(t.id)})};o.prototype.onClick2=function(t){app.ViewManager.toggleView(a.ActSevenDaySignTipsView,o.getIns(),-1);for(var e=0;e<this._uiImgArr.length;e++){if(this._uiImgArr[e]&&this._uiImgArr[e].source){var i=this._uiImgArr[e].globalToLocal(new Laya.Point(t.stageX,t.stageY));var n=this._uiImgArr[e].source.getPixels(i.x,i.y,1,1);if(n){var r=n.join("");if(r=="0000"){continue}else{this._bannerMediator.updateBannerView(+this._uiImgArr[e].name);app.ViewManager.toggleView(a.ActSevenDaySignTipsView,o.getIns(),1,[this._model.retArr[+this._uiImgArr[e].name-1],this["weizhi"+this._uiImgArr[e].name].x,this["weizhi"+this._uiImgArr[e].name].y]);break}}else{continue}}}};o.SINGLE_KEY="sevendaysign.ActSevenDaySignMainView";return o}(ui.qiriqiandao.qiriqiandaoUI);a.ActSevenDaySignMainView=t})(sevendaysign||(sevendaysign={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var sevendaysign;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezi.itemRender=grids.GridView;this.gezi.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.hitArea=new Laya.Rectangle(0,0,200,150);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onBtnClose=function(){};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource[0];this.x=this.dataSource[1];this.y=this.dataSource[2];this.gezi.array=game.ItemUtil.parserList(t.cfg.award);this.gezi.repeatX=this.gezi.array.length;if(this.gezi.repeatX==1){this.gezi.x=200/2-this.gezi.width/2+5}else{this.gezi.x=200/2-this.gezi.width/2+18}};e.prototype.onClick=function(t){t.stopPropagation()};e.prototype.onRenderHandler=function(t,e){t.showBagCount(-2);t.setData(t.dataSource)};e.SINGLE_KEY="sevendaysign.ActSevenDaySignTipsView";return e}(ui.qiriqiandao.zhanshitanchuangUI);t.ActSevenDaySignTipsView=e})(sevendaysign||(sevendaysign={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var sevendaysign;(function(t){var e=function(u){__extends(n,u);function n(t,e,i,n,r,o,a,s){var l=u.call(this)||this;l.mouseEndTime=0;l.selectHandler=s;l.bannerList=e;l.bannerList.itemRender=i;l.bannerList.renderHandler=new Laya.Handler(l,l.onRenderHandler);l.bannerList.selectEnable=false;l.checkList=n;l.checkList.renderHandler=new Laya.Handler(l,l.onRenderHandler2);l.timeCd=r;l.fPanel=t;l.leftBtn=o;l.rightBtn=a;l.fPanel.mouseEnabled=false;l.leftBtn.on(Laya.Event.CLICK,l,l.onLeftClick);l.rightBtn.on(Laya.Event.CLICK,l,l.onRightClick);return l}n.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};n.prototype.onRenderHandler2=function(t,e){if(this.nowIndex==e){t.skin="res/static/qiriqiandao/btn_banghui_fanye01.png"}else{t.skin="res/static/qiriqiandao/btn_banghui_fanye02.png"}};n.prototype.startMove=function(){Laya.timer.clearAll(this);this.nowIndex=0;this.type=1;this.fPanel.hScrollBar.value=n.ITEM_WIDTH;this.startTimeLoop()};n.prototype.playMoveAutoAni=function(){this.leftBtn.mouseEnabled=this.rightBtn.mouseEnabled=false;this.type=1;Laya.Tween.to(this.fPanel.hScrollBar,{value:this.fPanel.hScrollBar.value+n.ITEM_WIDTH},n.DURATION_TIME,null,new Laya.Handler(this,this.aniEnd))};n.prototype.aniEnd=function(){if(this.type==1){if(this.nowIndex+1>this.bannerList.array.length-3){this.nowIndex=0;this.fPanel.hScrollBar.value=n.ITEM_WIDTH}else{this.nowIndex=this.nowIndex+1}}else{if(this.nowIndex-1<0){this.nowIndex=this.bannerList.array.length-3;this.fPanel.hScrollBar.value=(this.bannerList.array.length-2)*n.ITEM_WIDTH}else{this.nowIndex=this.nowIndex-1}}this.leftBtn.mouseEnabled=this.rightBtn.mouseEnabled=true;this.setCheckIndex()};n.prototype.onLeftClick=function(){this.type=1;this.leftBtn.mouseEnabled=this.rightBtn.mouseEnabled=false;Laya.timer.clearAll(this);Laya.Tween.to(this.fPanel.hScrollBar,{value:this.fPanel.hScrollBar.value+n.ITEM_WIDTH},n.DURATION_TIME,null,new Laya.Handler(this,this.aniEnd))};n.prototype.onRightClick=function(){this.type=2;this.leftBtn.mouseEnabled=this.rightBtn.mouseEnabled=false;Laya.timer.clearAll(this);Laya.Tween.to(this.fPanel.hScrollBar,{value:this.fPanel.hScrollBar.value-n.ITEM_WIDTH},n.DURATION_TIME,null,new Laya.Handler(this,this.aniEnd))};n.prototype.setCheckIndex=function(){this.checkList.selectedIndex=this.nowIndex;this.startTimeLoop()};n.prototype.startTimeLoop=function(){Laya.timer.clearAll(this);Laya.timer.loop(this.timeCd,this,this.playMoveAutoAni)};n.prototype.updateBannerView=function(t){Laya.timer.clearAll(this);this.fPanel.hScrollBar.value=t*n.ITEM_WIDTH;this.nowIndex=t-1;this.checkList.selectedIndex=this.nowIndex};n.prototype.setData=function(t,e){this.bannerList.array=t;this.checkList.array=e;this.distance_arr=[];for(var i=0;i<this.bannerList.length;i++){this.distance_arr.push(i*n.ITEM_WIDTH)}};n.ITEM_WIDTH=632;n.DURATION_TIME=500;n.MOUSE_CD=2;return n}(Laya.EventDispatcher);t.BannerMediator=e})(sevendaysign||(sevendaysign={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actSignIn;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.ActSignInMainView,"qirimubiao.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.ACT_SING_IN,i.ActSignInMainView,null,5);this._model=i.ActSignInModel.getIns()};e.prototype.initCommands=function(){};e.SINGLE_KEY="actSignIn.ActSignInModule";return e}(app.ModuleBase);i.ActSignInModule=t})(actSignIn||(actSignIn={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actSignIn;(function(t){var u;(function(t){t[t["CAN_SIGN"]=1]="CAN_SIGN";t[t["CAN_BUSIGN"]=2]="CAN_BUSIGN";t[t["SIGNED"]=3]="SIGNED";t[t["DONT_CAN_SIGN_AND_BUSIGN"]=4]="DONT_CAN_SIGN_AND_BUSIGN"})(u=t.ActSignInState||(t.ActSignInState={}));var p=function(){function t(){}return t}();t.ActSignInVo=p;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getSignInArr=function(){var t=this.netData.cfgList;var e=this.netData.info.prize;this.retArr=[];for(var i=0;i<t.length;i++){var n=t[i];var r=new p;r.id=+n.id;r.actId=+n.activityid;r.cfg=n;this.retArr.push(r)}var o=game.Context.getServerTime()-this.netData.timeVo.startTime;var a=Math.floor(o/(3600*24))+1;for(var i=0;i<this.retArr.length;i++){var s=this.retArr[i];var l=e[i];if(+s.cfg.p1==a){this.nowSelectItem=this.retArr[i]}if(l.status==0){s.state=u.DONT_CAN_SIGN_AND_BUSIGN}else if(l.status==1){if(+s.cfg.p1==a){s.state=u.CAN_SIGN}else if(+s.cfg.p1<a){s.state=u.CAN_BUSIGN}else{s.state=u.DONT_CAN_SIGN_AND_BUSIGN}}else if(l.status==2){s.state=u.SIGNED}}return this.retArr};e.prototype.checkAwardByDay=function(t){var e=[];var i=this.checkDataByDay(t);var n=i.cfg.award.split(";");for(var r=0;r<n.length;r++){e.push(game.ItemUtil.parserList(n[r])[0])}return e};e.prototype.checkDataByDay=function(t){var e;for(var i=0;i<this.retArr.length;i++){if(this.retArr[i].cfg.p1==t){e=this.retArr[i]}}return e};e.SINGLE_KEY="actSignIn.ActSignInModel";return e}(app.ModelBase);t.ActSignInModel=e})(actSignIn||(actSignIn={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actSignIn;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.ActSignInModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.imgbaoxiang.skin="res/static/yunyinghuodong/"+t.cfg.p4+".png";this.clipnum.value=util.TimeUtil.getChineseNum(+t.cfg.p1);if(t.state==i.ActSignInState.DONT_CAN_SIGN_AND_BUSIGN){this.imgbuqian.visible=false;this.imgyilingqu.visible=false}else if(t.state==i.ActSignInState.CAN_SIGN){this.imgbuqian.visible=false;this.imgyilingqu.visible=false}else if(t.state==i.ActSignInState.SIGNED){this.imgbuqian.visible=false;this.imgyilingqu.visible=true}else{this.imgbuqian.visible=true;this.imgyilingqu.visible=false}};Object.defineProperty(e.prototype,"lingquEffect",{set:function(t){if(t){this.imgxuanzhong.visible=true}else{this.imgxuanzhong.visible=false}},enumerable:true,configurable:true});e.SINGLE_KEY="actSignIn.ActSignInClickItem";return e}(ui.yunyinghuodong.qiandaoitemUI);i.ActSignInClickItem=t})(actSignIn||(actSignIn={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var actSignIn;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=r.ActSignInModel.getIns();this.listbaoxiang.itemRender=r.ActSignInClickItem;this.listbaoxiang.renderHandler=new Laya.Handler(this,this.onDailyTabHandler);this.listbaoxiang.selectEnable=true;this.listbaoxiang.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.listdaoju.itemRender=grids.GridView;this.listdaoju.renderHandler=new Laya.Handler(this,this.onCellHandler);this.activityTimeView=new activitytaren.ActivityTimeView(this.labeldaojishi,new Laya.Handler(this,this.endTimeCallBack),app.getLang("huodong_text05"))};e.prototype.onCellHandler=function(t,e){var i="";if(e==0){i=this._model.checkDataByDay(this.listbaoxiang.selectedIndex+1).cfg.receive_effect}t.setData(t.dataSource,"",.88,undefined,i)};e.prototype.onDailyTabHandler=function(t,e){t.lingquEffect=this.listbaoxiang.selectedIndex==e;t.setData(t.dataSource)};e.prototype.onSelectHandler=function(t){this._updateLowView(t+1)};e.prototype.onDisplay=function(){this.btnlingqu.on(Laya.Event.CLICK,this,this.onClick);activitytaren.ActivityTaRenModel.getIns().on(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA,this,this.refrshNetData);this.callLater(this.onGetInfo)};e.prototype.onGetInfo=function(){if(this.functionid){this._model.netData=this.actVo;this.refreshAll()}};e.prototype.onUnDisplay=function(){this._model.nowSelectItem=null;this.btnlingqu.off(Laya.Event.CLICK,this,this.onClick);activitytaren.ActivityTaRenModel.getIns().off(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.UPDATE_ACTIVIT_DATA,this,this.refrshNetData)};e.prototype.refreshAll=function(){this.setClickList();var t=this.actVo.timeVo;this.activityTimeView.start(t.endTime)};e.prototype.setClickList=function(){this.listbaoxiang.array=this._model.getSignInArr();this.listbaoxiang.selectedIndex=this._model.nowSelectItem.cfg.p1-1;var t=this._model.checkDataByDay(this.listbaoxiang.selectedIndex+1).cfg.p3;this.imgbanner.skin="res/static/yunyinghuodong/"+t+".png"};e.prototype._updateLowView=function(t){this._updateAwardArr(t);this._updateBtn(t)};e.prototype._updateAwardArr=function(t){this.listdaoju.array=this._model.checkAwardByDay(t)};e.prototype._updateBtn=function(t){this.itemmoney.visible=false;this.labelnum.visible=false;game.RedDotView.removeFrom(this.btnlingqu);var e=this._model.checkDataByDay(t);if(e.state==r.ActSignInState.DONT_CAN_SIGN_AND_BUSIGN){this.btnlingqu.disabled=true;this.btnlingqu.label="领取"}else if(e.state==r.ActSignInState.CAN_SIGN){game.RedDotView.addTo(this.btnlingqu);this.btnlingqu.disabled=false;this.btnlingqu.label="领取"}else if(e.state==r.ActSignInState.SIGNED){this.btnlingqu.disabled=true;this.btnlingqu.label="已领取"}else{this.btnlingqu.disabled=false;this.btnlingqu.label="补签";this.itemmoney.visible=true;this.labelnum.visible=true;var i=game.ItemUtil.parserList(e.cfg.p2)[0];this.itemmoney.parserIconByItemId(i.getItemId());this.labelnum.text=e.cfg.p2.split("-")[1];var n=game.GridsModel.getIns().hasEnoughItems(i);if(n){game.RedDotView.addTo(this.btnlingqu)}}};e.prototype.refrshNetData=function(){var e=this;activitytaren.ActivityTaRenModel.getIns().getInfoByActID(this._model.nowSelectItem.actId,new Laya.Handler(this,function(t){e._model.netData.info=t;e.listbaoxiang.array=e._model.getSignInArr();e._updateBtn(e.listbaoxiang.selectedIndex+1)}))};e.prototype.onClick=function(){var t=this._model.checkDataByDay(this.listbaoxiang.selectedIndex+1);app.ProtocolRequest.RecvActPrizeReq(t.id)};e.prototype.hideSubTime=function(){this.activityTimeView.stop();this.labeldaojishi.visible=false};e.prototype.endTimeCallBack=function(){this.hideSubTime()};e.SINGLE_KEY="actSignIn.ActSignInMainView";return e}(ui.yunyinghuodong.qiandaoviewUI);r.ActSignInMainView=t})(actSignIn||(actSignIn={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.actEle=t;this.mapId=parseInt(t.map);return this};e.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.MOVE};e.prototype.start=function(){if(this.mapId==game.Context.mainRole.mapId){s.FindWayEffect.getIns().show();game.Context.off(game.ContextEvent.CHANGE_MAP,this,this.start);var t=app.str2Array(this.actEle.mapregion,";","-");var e=Math.min(t[0][0],t[1][0]);var i=Math.max(t[0][0],t[1][0]);var n=Math.min(t[0][1],t[1][1]);var r=Math.max(t[0][1],t[1][1]);var o=scene.SceneMediator.getInstance().findRandomPathByArea(e,n,i,r);var a=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,o[0],o[1]);this.target.movePath(a,Laya.Handler.create(this,function(){if(this.target.getAIState()==role.LeadingRoleView.AI_STATE.MOVE){this.target.completeAI()}}))}else{game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.start);game.SceneModel.getInstance().teleportRequest(this.mapId)}};e.prototype.pause=function(){this.target.stopMove()};return e}(s.BaseRoleAI);s.ActivityMoveAI=t})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(i){__extends(n,i);function n(t){var e=i.call(this)||this;e._isAwake=false;e.target=t;return e}n.prototype.getAction=function(){return this._action};n.prototype.getTarget=function(){return this.target};n.prototype.getState=function(){if(this._action!=null){return this._action.getState()}return role.LeadingRoleView.AI_STATE.IDLE};n.prototype.doAction=function(t,e){if(e===void 0){e=-1}if(e>=0&&this._power>e){return}if(this._action){this._action.onCancel()}this._action=t;if(this._action){this._power=Math.max(e,0);this._action.start()}else{this._power=0}this.event(n.EVENTS.STATE_CHANGE)};n.prototype.sleep=function(){if(this._isAwake==true){this._isAwake=false;if(this._action){this._action.pause();this.event(n.EVENTS.STATE_CHANGE)}}};n.prototype.cancel=function(t){if(this._action&&this._action.needCancel(t)){this.doAction(null)}};n.prototype.awake=function(){if(!this._isAwake){this._isAwake=true;if(this._action){this._action.awake();this.event(n.EVENTS.STATE_CHANGE)}}};n.prototype.complete=function(){if(this._action){this._action.onComplete();this._action=null;this.event(n.EVENTS.STATE_CHANGE)}};n.prototype.isAwake=function(){return this._isAwake};n.prototype.next=function(){};n.EVENTS={STATE_CHANGE:"state_change"};return n}(Laya.EventDispatcher);t.AiController=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._isBattle=false;t.isPause=false;t.limt=1;return t}Object.defineProperty(t.prototype,"isBattle",{get:function(){return this._isBattle},set:function(t){this._isBattle=t;game.Context.event(game.ContextEvent.ASSISTANT_STATE_CHANGE,this._isBattle)},enumerable:true,configurable:true});t.prototype.setMap=function(t){this.mapId=t;return this};t.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.BATTLE};t.prototype.needCancel=function(){return true};t.prototype.onCancel=function(){this.target.stopMove();this.isBattle=false};t.prototype.awake=function(){this.start()};t.prototype.start=function(){if(this.mapId==game.Context.mainRole.mapId){this.isPause=false;if(!this.isBattle){this.isBattle=true}this.limt=1;var t=this.getRandom();if(t){this.target.move(t.x,t.y,new Laya.Handler(this,this.moveComplete))}}else{if(!game.SceneModel.getInstance().teleportRequest(this.mapId,true)){this.target.cancelAI()}}};t.prototype.moveComplete=function(){var e=this;Laya.timer.once(50,this,function(){e.limt=1;if(e.isPause)return;if(!e.isBattle)return;var t=e.getRandom();e.target.move(t.x,t.y,new Laya.Handler(e,e.moveComplete))})};t.prototype.pause=function(){this.isPause=true;this.target.stopMove();this.isBattle=false};t.prototype.getRandom=function(){if(!scene.SceneMediator.getInstance().mapGrid){return null}if(this.tempMap==game.Context.mainRole.mapId){var t=this.tempNode;if(Math.abs(t.x-game.Context.mainRole.posX)+Math.abs(t.y-game.Context.mainRole.posY)>3){return t}}var e=csv.MapProxy.getIns().getNode();if(e){this.tempNode=e;this.tempMap=game.Context.mainRole.mapId;return e}var i=Math.floor(role.LeadingRoleView.getIns().isoPosX/32)+Math.round((Math.random()-Math.random())*20);var n=Math.floor(role.LeadingRoleView.getIns().isoPosZ/32)+Math.round((Math.random()-Math.random())*20);var r=scene.SceneMediator.getInstance().mapGrid.gridNumRows-1;var o=scene.SceneMediator.getInstance().mapGrid.gridNumCols-1;if(i>r)i=r;if(n>o)n=o;var a=i;var s=n;e=scene.SceneMediator.getInstance().mapGrid.getNode(a,s);if(e!=null&&e.walkAtt==1){this.limt++;if(this.limt>5){this.moveComplete();return e}var l=scene.SceneMediator.getInstance().findPath(i,n,a,s);if(l.length>0){return e}else{return this.getRandom()}}else{return this.getRandom()}};t.SINGLE_KEY="ai.BattleAI";return t}(t.BaseRoleAI);t.BattleAI=e})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.bossId=t;return this};e.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.BOSS_BATTLE};e.prototype.start=function(){var t=csv.NpcProxy.getIns().getBossMap(this.bossId);var e=t.npcmap;if(e==game.Context.mainRole.mapId){o.FindWayEffect.getIns().show();boss.BossModel.getIns().worldBossNpcId=parseInt(t.npcid);var i=parseInt(t.x1);var n=parseInt(t.y1);var r=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,i,n);if(r.length>1){r.pop()}this.target.movePath(r,Laya.Handler.create(this,this.moveToBoss,[t]))}else{if(!game.SceneModel.getInstance().EnterBossMapRequest(e)){this.target.cancelAI()}}};e.prototype.moveToBoss=function(t){this.target.stopMove();this.target.completeAI();this.onCancel();var e=parseInt(t.param1);if(boss.BossModel.getIns().getCanBattleBoss(e)){app.ProtocolRequest.JoinBossReq(e);boss.BossModel.getIns().battleWorldBossNpcId=parseInt(t.npcid)}};e.prototype.onCancel=function(){t.prototype.onCancel.call(this);boss.BossModel.getIns().worldBossNpcId=0};e.prototype.pause=function(){this.target.stopMove()};return e}(o.BaseRoleAI);o.BossBattleAI=t})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(t){var e=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.aniEffect=new game.AniView;t.addChild(t.aniEffect);t.aniEffect.load("skill_xunlu",game.AniView.FILE_NAME.UI);return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.show=function(){this.aniEffect.x=Laya.stage.width/2;this.aniEffect.y=Laya.stage.height-app.AppContainer.UI_LAYER_Y.RIGHT_BOTTOM-main.NoticeIconList.ICON_H-70;this.aniEffect.play(0);app.AppContainer.flowLayer.addChild(this)};t.prototype.hide=function(){this.aniEffect.stop();app.AppContainer.flowLayer.removeChild(this)};return t}(Laya.Sprite);t.FindWayEffect=e})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t,e,i){this.mapId=t;this.x=e;this.y=i;return this};e.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.MOVE};e.prototype.start=function(){if(this.mapId==game.Context.mainRole.mapId){var t=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,this.x,this.y);this.target.movePath(t,Laya.Handler.create(this,function(){if(this.target.getAIState()==role.LeadingRoleView.AI_STATE.MOVE){this.target.completeAI()}}))}else{if(!game.SceneModel.getInstance().teleportRequest(this.mapId)){this.target.cancelAI()}}};e.prototype.pause=function(){this.target.stopMove()};return e}(t.BaseRoleAI);t.MoveAI=e})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(o){var t=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}r.prototype.setTarget=function(t,e,i,n){this.npc=t;this.type=e;this.data=i;this.param=n;return this};r.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.TALK};r.prototype.onComplete=function(){var t=this;n.prototype.onComplete.call(this);Laya.Dialog.closeAll();if(this.type==r.ENUM_TYPE.DIALOG){app.ViewManager.toggleDialog(this.data,1,0,this.param)}else if(this.type==r.ENUM_TYPE.VIEW){app.ViewManager.toggleView(this.data,this.param[0],1)}else if(this.type==r.ENUM_TYPE.STORY){var e=this.data;talk.TalkModel.getIns().callBack=Laya.Handler.create(this,function(){app.ProtocolRequest.TaskNpcTalk(e.cfg.npc_id,e.cfg.task_id);if(e.cfg.done=="3"){app.ProtocolRequest.TaskSubmit(e.data.questIndex)}});talk.TalkModel.getIns().event(talk.TalkModel.STORY_TIGGER,csv.StoriesProxy.ENUM_TIGGER.GET_NPC)}else if(this.type==r.ENUM_TYPE.FUNC){if(typeof this.data==="string"){var i=app.str2Array(this.data,";");game.ClosureManager.callFunctionByNpcOpen(i[0],this.param[0],this.param[1])}else{game.ClosureManager.callFunctionByNpcOpen(this.data,true,false,this.param)}if(this.param[2]&&this.param[2][0]&&this.param[2][0]instanceof Laya.Handler){Laya.timer.once(100,this,function(){t.param[2][0].run()})}}else if(this.type==r.ENUM_TYPE.CALL){this.data.run()}};r.prototype.onCancel=function(){n.prototype.onCancel.call(this);role.LeadingRoleView.getIns().stopMove()};r.prototype.start=function(){if(!this.npc){return}if(this.npc.mapId==game.Context.mainRole.mapId||this.npc.mapId===undefined){var t=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,this.npc.posX,this.npc.posY);var e=this.npc.getCfg().dis;for(var i=0,n=t.length-1;i<n;i++){var r=t[i];if(Math.abs(r.x-this.npc.posX)<=e&&Math.abs(r.y-this.npc.posY)<=e){t.splice(i+1,t.length);break}}if(t){o.FindWayEffect.getIns().show();role.LeadingRoleView.getIns().movePath(t,Laya.Handler.create(this,this.onMoveEnd))}else{this.onComplete()}}else{if(!game.SceneModel.getInstance().teleportRequest(this.npc.mapId)){this.target.cancelAI()}}};r.prototype.onMoveEnd=function(){if(this.target.getAIState()===role.LeadingRoleView.AI_STATE.TALK){this.npc=null;this.target.completeAI()}};r.prototype.pause=function(){this.target.stopMove()};r.prototype.autoCloseTalkView=function(){if(this.npc&&this.type==r.ENUM_TYPE.DIALOG){if(Math.abs(this.npc.posX-role.LeadingRoleView.getIns().vo.posX)>game.Config.getIntParams(401)||Math.abs(this.npc.posY-role.LeadingRoleView.getIns().vo.posY)>game.Config.getIntParams(401)){app.ViewManager.toggleDialog(this.data,-1,0)}}else if(this.npc&&this.type==r.ENUM_TYPE.VIEW){if(Math.abs(this.npc.posX-role.LeadingRoleView.getIns().vo.posX)>game.Config.getIntParams(401)||Math.abs(this.npc.posY-role.LeadingRoleView.getIns().vo.posY)>game.Config.getIntParams(401)){app.ViewManager.toggleView(this.data,this.param[0],-1)}}};r.prototype.checkIsSame=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}if(this.npc==t[0]&&this.type==t[1]&&this.data==t[2]&&this.param==t[3]){return true}return false};r.ENUM_TYPE={DIALOG:0,VIEW:1,STORY:2,FUNC:3,CALL:4};return r}(o.BaseRoleAI);o.NpcTalkAI=t})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(n){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._isAdd=false;return t}t.prototype.setData=function(t){this.player=t;return this};t.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.ROLE_BATTLE};t.prototype.start=function(){battle.BattleModel.getIns().once(battle.BattleModel.JOIN_BOSS_MAP_PVP,this,this.onCancel);if(this.player){this.moving(this.player.walkPosX||this.player.vo.posX,this.player.walkPosY||this.player.vo.posY)}};t.prototype.moving=function(t,e){n.FindWayEffect.getIns().show();this.targetX=t;this.targetY=e;var i=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,t,e);if(i&&i.length>0){i.pop();if(i.length>0){i.pop()}}this.target.movePath(i,Laya.Handler.create(this,this.moveToRolePk))};t.prototype.moveToRolePk=function(){if(scene.SceneMediator.getInstance().getStatus(role.LeadingRoleView.getIns().vo.posX,role.LeadingRoleView.getIns().vo.posY,scene.E_BIT_Define.CUST2)){manager.FlowManager.instance.flowByStyle1(app.getLang("安全区不能PK"));this.onCancel();return}if(csv.MapProxy.isInKuaFuMap()){if(this.player.roleVO.cursvrid!=game.Context.cursvrid){app.ProtocolRequest.ChargePkReq(this.player.vo.insId,1)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_boss_error1"))}}else{app.ProtocolRequest.ChargePkReq(this.player.vo.insId,1)}this.onCancel();this._isAdd=false};t.prototype.onCancel=function(){e.prototype.onCancel.call(this);battle.BattleModel.getIns().off(battle.BattleModel.JOIN_BOSS_MAP_PVP,this,this.onCancel);this.target.completeAI();this.target.stopMove();if(scene.ClickEffect.getIns().posView){scene.ClickEffect.getIns().posView.removeClickView()}this.player=null};t.prototype.pause=function(){this.target.stopMove()};t.prototype.updateFrame=function(t){var e;if(this.player){e=scene.SceneMediator.getInstance().getViewById(this.player.vo.insId)}if(e){if(scene.SceneMediator.getInstance().checkIsMathAttack(this.player,role.LeadingRoleView.getIns(),1)){this.moveToRolePk();return}var i=this.player.walkPosX||this.player.vo.posX;var n=this.player.walkPosY||this.player.vo.posY;if(i!=this.targetX||n!=this.targetY){this.moving(i,n)}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("未找到玩家"));this.onCancel()}};return t}(n.BaseRoleAI);n.RoleBattleAI=t})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.collect=t;return this};e.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.ROLE_COLLECT};e.prototype.onCancel=function(){t.prototype.onCancel.call(this);this.target.completeAI();this.cancelCollect();if(scene.ClickEffect.getIns().posView){scene.ClickEffect.getIns().posView.removeClickView()}role.LeadingRoleView.getIns().stopMove()};e.prototype.start=function(){if(!this.collect){return}if(this.collect.mapId==game.Context.mainRole.mapId||this.collect.mapId===undefined){i.FindWayEffect.getIns().hide();var t=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,this.collect.posX,this.collect.posY);if(t&&t.length>0){t.pop();if(t.length>0){t.pop()}}role.LeadingRoleView.getIns().movePath(t,Laya.Handler.create(this,function(){if(this.target.getAIState()===role.LeadingRoleView.AI_STATE.ROLE_COLLECT){this.target.stopMove();this.reqCollect()}}))}};e.prototype.pause=function(){this.target.stopMove()};e.prototype.reqCollect=function(){if(csv.MapProxy.isInKuaFuMap()){if(boss.BossModel.getIns().getCanCollect()){guardisland.GuardIslandsModel.getIns().once(guardisland.GuardIslandsModel.EVENT_GATHER_INFO,this,this.onGatherInfoHandler);role.LeadingRoleView.getIns().isBeginingCollect=true;app.ProtocolRequest.StartGatherReq(this.collect.insId)}}else{guardisland.GuardIslandsModel.getIns().once(guardisland.GuardIslandsModel.EVENT_GATHER_INFO,this,this.onGatherInfoHandler);role.LeadingRoleView.getIns().isBeginingCollect=true;app.ProtocolRequest.StartGatherReq(this.collect.insId)}};e.prototype.onGatherInfoHandler=function(t){if(Uint64.equal(t.playerID,game.Context.mainRole.insId)&&t.endTime==0){guardisland.GuardIslandsModel.getIns().stopCold();return}this.startCollect(t)};e.prototype.startCollect=function(t){this.gatherVo=t;role.LeadingRoleView.getIns().showProgressBar(role.ProgressBarView.ENUM_TYPE.CAI_JI,this.gatherVo.endTime,Laya.Handler.create(this,this.endRequest))};e.prototype.endRequest=function(){role.LeadingRoleView.getIns().hideProgressBar();if(this.gatherVo&&guardisland.GuardIslandsModel.getIns().isCollecting(this.gatherVo.gatherID)){guardisland.GuardIslandsModel.getIns().once(guardisland.GuardIslandsModel.EVENT_GATHER_END,this,this.collectEndCallBack);app.ProtocolRequest.EndGatherReq(this.gatherVo.gatherID);this.target.completeAI()}else{}this.gatherVo=null};e.prototype.collectEndCallBack=function(t){guardisland.GuardIslandsModel.getIns().startCold()};e.prototype.cancelCollect=function(t){if(t===void 0){t=true}role.LeadingRoleView.getIns().hideProgressBar();if(this.gatherVo){if(t){var e=app.getLang("shoufuisland_txt_42");manager.FlowManager.instance.flowByStyle1(e)}}app.ProtocolRequest.StopGatherReq();this.gatherVo=null};return e}(i.BaseRoleAI);i.RoleCollectAI=t})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var ai;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t,e){this.trapVo=t;this.handler=e;return this};e.prototype.getState=function(){return role.LeadingRoleView.AI_STATE.TRAP_CLICK};e.prototype.onComplete=function(){role.LeadingRoleView.getIns().hideProgressBar();if(scene.ClickEffect.getIns().posView){scene.ClickEffect.getIns().posView.removeClickView()}this.handler.run()};e.prototype.onCancel=function(){role.LeadingRoleView.getIns().hideProgressBar();if(scene.ClickEffect.getIns().posView){scene.ClickEffect.getIns().posView.removeClickView()}};e.prototype.start=function(){if(this.target.getAIState()===role.LeadingRoleView.AI_STATE.TRAP_CLICK){this.openTrap()}};e.prototype.pause=function(){this.target.stopMove()};e.prototype.openTrap=function(){role.LeadingRoleView.getIns().showProgressBar(role.ProgressBarView.ENUM_TYPE.TRAP_OPEN,3e3,Laya.Handler.create(this.target,this.target.completeAI))};e.prototype.checkIsSame=function(){var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}if(this.trapVo==t[0]){return true}return false};return e}(t.BaseRoleAI);t.TrapMachineAI=e})(ai||(ai={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.AniSoulListView,"jineng.atlas","shouhunshouji.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SOUL_MONSTER,i.AniSoulListView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.SOUL_MONSTER,i.SoulModel.getIns(),i.SoulModel.getIns().onRedDotChange);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.MONSTER_SOUL_BAG,i.AniSoulBagView)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.MonsterSoulInfoAck,this,this.onMonsterSoulInfoAck);this.addMsgListener(app.ProtocolResponse.MonsterSoulUpdateAck,this,this.onMonsterSoulUpdateAck)};e.prototype.onMonsterSoulInfoAck=function(t,e){i.SoulModel.getIns().setData(e.monsterSoulList);this.onRedDotChange()};e.prototype.onMonsterSoulUpdateAck=function(t,e){if(e.success){i.SoulModel.getIns().updateData(e.monsterSoulList[0]);this.onRedDotChange()}};e.prototype.onRedDotChange=function(){i.SoulModel.getIns().onRedDotChange()};e.SINGLE_KEY="animalSoul.AnimalSoulModule";return e}(app.ModuleBase);i.AnimalSoulModule=t})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){if(!t){return}if(t.attr){this.txtName.text=Attributes.getPropName(t.attr.propId)}else if(t.attrNext){this.txtName.text=Attributes.getPropName(t.attrNext.propId)}this.txtValue.text="+"+(t.attr?Attributes.getPropValue(t.attr.propId,t.attr.value,t.attr.formula):"0");if(t.attrNext){this.imgArrow.visible=true;this.txtNext.text="  +"+Attributes.getPropValue(t.attrNext.propId,t.attrNext.value,t.attrNext.formula)}else{this.imgArrow.visible=false;this.txtNext.text=""}this.reSetSize()};e.SINGLE_KEY="aniSoul.SoulAttrItem";return e}(game.ComAttrItem0);t.SoulAttrItem=e})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(t){var e=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.active=[this.jihuoani,this.jihuoani2,this.jihuoani3];this.loop=[this.xunhuan1,this.xunhuan2,this.xunhuan3];for(var t=0;t<3;t++){this.active[t].on(Laya.Event.COMPLETE,this,this.onComplete,[t])}};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.stopAll=function(){for(var t=0;t<3;t++){this.active[t].stop();this.active[t].visible=false;this.loop[t].stop();this.loop[t].visible=false}};t.prototype.playLoopAni=function(t){if(t>=0){this.loop[t].play(0,true);this.loop[t].visible=true}};t.prototype.playActiveAni=function(t){if(t>=0){this.active[t].play(0,false);this.active[t].visible=true}};t.prototype.onComplete=function(t){this.active[t].stop();this.active[t].visible=false;this.loop[t].play(0,true);this.loop[t].visible=true};t.SINGLE_KEY="soul.SoulEffectItem";return t}(ui.shouhunshouji.shouhunjihuoitemUI);t.SoulEffectItem=e})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(c){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.viewjineng.shuzi.visible=false;this.img=new Laya.Image;this.img.x=67;this.img.y=0;this.img.scaleX=this.img.scaleY=.8;this.viewjineng.addChild(this.img);this.onAniStop()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.onAniStop()};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.data=t;var i=c.AniSoulListView.getIns().tabBar.selecItemData;var n=c.SoulModel.getIns().getSoulInfoBySoulID(t.soulid);this.shuzhi.text="0/1";this.jindutiao.value=0;this.viewjineng.img.skin="";this.img.skin=csv.AniSoulProxy.getIns().getSoulTypeUrl(i);this.labelname.text=t.soulname;this.levellab.text="0";if(n==null){return}var r=csv.AniSoulProxy.getIns().isMax(n.monsterSoulId,n.lv);var o=n.lv>0?n.lv:1;var a=csv.AniSoulProxy.getIns().getLevelMap(t.soulid,o);var s=game.ItemUtil.parserList(a.needitem)[0];var l=0;var u=0;if(n.lv>0){l=s?s.count:1;this.viewjineng.gray=false}else{l=1;this.viewjineng.gray=true}u=s?game.GridsModel.getIns().getItemCount(s.getItemId()):0;this.viewjineng.img.skin=csv.AniSoulProxy.getIns().getSoulResUrl(t.soulid);this.img.skin=csv.AniSoulProxy.getIns().getSoulTypeUrl(i);this.labelname.text=t.soulname;this.levellab.text=(n.lv?n.lv:0)+"";if(r){this.shuzhi.text=app.getLang("max");this.jindutiao.value=1}else{this.shuzhi.text=u+"/"+l;this.jindutiao.value=u/l}var p=false;if(c.SoulModel.getIns().canActive(n.monsterSoulId,n.lv)){p=true}else{var h=c.SoulModel.getIns().canUp(n.monsterSoulId,n.lv,n.count);if(h>0){p=true}}if(p){game.RedDotView.addTo(this.boxhongdian)}else{game.RedDotView.removeFrom(this.boxhongdian)}this.setSelect(e&&this.data.soulid==e.soulid)};e.prototype.setSelect=function(t){this.imgxuanzhong.visible=t};e.prototype.onAniplay=function(){this.jinhua.visible=true;this.jinhua.play(0,false)};e.prototype.onAniStop=function(){this.jinhua.visible=false;this.jinhua.stop()};e.SINGLE_KEY="animalSoul.SoulItem";return e}(ui.shouhunshouji.shouhunshoujiitem3UI);c.SoulItem=t})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.data=t;this.guaimg.skin=csv.AniSoulProxy.getIns().getSoulTypeUrl(t);this.setSelect(t==e);var i=n.SoulModel.getIns().getRedDotArr();if(i.indexOf(t)>=0){game.RedDotView.addTo(this.boxhongdian)}else{game.RedDotView.removeFrom(this.boxhongdian)}};e.prototype.setSelect=function(t){this.imgxuanzhong.visible=t};e.SINGLE_KEY="aniSoul.SoulTabItem";return e}(ui.shouhunshouji.shouhunshoujiitem1UI);n.SoulTabItem=t})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.soulMapById=app.Config.getResById("monstersoul.csv").getMap("soulid");this.soulMap=app.Config.getResById("monstersoul.csv").getMapList("type");this.levelMap=app.Config.getResById("monstersoullevel.csv").getMapList("soulid");this.suitMap=app.Config.getResById("monstersoulsuit.csv").getMapList("type")};e.prototype.getAllType=function(){return Object.keys(this.soulMap).length};e.prototype.getSoulMap=function(t){return this.soulMap[t]};e.prototype.getSoulResUrl=function(t){var e=this.soulMapById[t].soulres;return"res/icon/monstersoul/"+e+".png"};e.prototype.getSoulTypeUrl=function(t){return"res/static/shouhunshouji/bg_shouhun_gua_"+t+".png"};e.prototype.getSoulTypeById=function(t){return parseInt(this.soulMapById[t].type)};e.prototype.isSoulType=function(t,e){var i=this.getSoulMap(t);for(var n=0;n<i.length;n++){if(parseInt(i[n].soulid)==e){return true}}return false};e.prototype.getSoulMaxLevel=function(t){return this.levelMap[t].length};e.prototype.getLevelMap=function(t,e){var i=this.levelMap[t];if(!i){return}var n;if(i){for(var r=0;r<i.length;r++){if(parseInt(i[r].lv)==e){n=i[r];break}}}return n};e.prototype.isMax=function(t,e){var i=this.levelMap[t];return i&&i[i.length-1].lv===e||false};e.prototype.getSuitMap=function(t){return this.suitMap[t]};e.SINGLE_KEY="aniSoul.AniSoulProxy";return e}(app.ModelBase);t.AniSoulProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(e){var t=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n.list=t;n.list.itemRender=e;n.list.renderHandler=i?i:new Laya.Handler(n,n.onRenderHandler);n.list.on(Laya.Event.CLICK,n,n.onSelectHandler);n.list.selectEnable=true;n.list.array=[];if(n.list.scrollBar){n.list.scrollBar.touchScrollEnable=true;n.list.scrollBar.elasticDistance=100;n.list.scrollBar.elasticBackTime=100}return n}t.prototype.setHSkin=function(t){if(t===void 0){t=" "}this.list.hScrollBarSkin=t};t.prototype.setVSkin=function(t){if(t===void 0){t=" "}this.list.vScrollBarSkin=t};t.prototype.onRenderHandler=function(t){t.setData(t.dataSource,this.selecItemData)};t.prototype.onSelectHandler=function(t){if(this.selecItemData==this.list.selectedItem){return}this.onItemSelectHandler()};t.prototype.onItemSelectHandler=function(){this.selecItemData=this.list.selectedItem;this.selectCell=this.list.getCell(this.list.selectedIndex);this.event(e.CommonListMediator.LIST_ITEM_SELECT,this.selecItemData)};t.prototype.setData=function(t,e){this._dataArr=e;this.list.array=this._dataArr;this.list.selectedIndex=t;this.onItemSelectHandler()};t.prototype.setRedArr=function(t){for(var e=0;e<5;e++){this._dataArr[e].boRed=t[e]||false}this.list.refresh()};t.LIST_ITEM_SELECT="common.ListItemSelected";return t}(Laya.EventDispatcher);e.CommonListMediator=t})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(o){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.monsterSoulList=[];return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){};i.prototype.setData=function(t){this.monsterSoulList=t;this.event(i.MONSER_SOUL_INFO_UPDATE)};i.prototype.getSoulInfoBySoulID=function(t){var e=null;for(var i in this.monsterSoulList){if(this.monsterSoulList[i].monsterSoulId==t){e=this.monsterSoulList[i];break}}return e};i.prototype.updateData=function(t){if(t){for(var e in this.monsterSoulList){if(this.monsterSoulList[e].monsterSoulId==t.monsterSoulId){this.monsterSoulList[e]=t;break}}this.event(i.MONSER_SOUL_LEVEL_UP)}};i.prototype.monsterSoulUpdateReq=function(t){var e=o.SoulModel.getIns().getSoulInfoBySoulID(t);if(e){var i=csv.AniSoulProxy.getIns().getLevelMap(t,e.lv);var n=csv.AniSoulProxy.getIns().isMax(t,e.lv);if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("lotus_8"));return}if(game.GridsModel.getIns().hasEnoughItems(i.needitem)){app.ProtocolRequest.MonsterSoulUpdateReq(t)}else{var r=game.ItemUtil.parserList(i.needitem)[0];manager.FlowManager.instance.flowByStyle1(app.getLang("monstersoul_error1",r.getName()))}}};i.prototype.getSuitLevel=function(t){var e=csv.AniSoulProxy.getIns().getSuitMap(t);var i=9999;for(var n=0,r=this.monsterSoulList;n<r.length;n++){var o=r[n];var a=csv.AniSoulProxy.getIns().isSoulType(t,o.monsterSoulId);if(a&&o.lv<i){i=o.lv}}var s=0;var l=0;var u=0;var p=0;if(i>0){for(var h=0;h<e.length;h++){if(i>=e[h].needlv){s=e[h].lv;u=e[h].compoundattr;if(h<e.length-1){l=e[h+1].needlv;p=e[h+1].compoundattr}else{l=e[h].needlv;p=e[h].compoundattr}}}}else{s=0;u=0;l=e[0].needlv;p=e[0].compoundattr}return{lv:s,nextNeedLv:l,compoundattr:u,nextattr:p}};i.prototype.getRedDotArr=function(){var t=[];var e;for(var i=0,n=this.monsterSoulList;i<n.length;i++){var r=n[i];if(this.canActive(r.monsterSoulId,r.lv)){e=csv.AniSoulProxy.getIns().getSoulTypeById(r.monsterSoulId);if(e>0&&t.indexOf(e)==-1){t.push(e)}}else{e=this.canUp(r.monsterSoulId,r.lv,r.count);if(e>0&&t.indexOf(e)==-1){t.push(e)}}}return t};i.prototype.onRedDotChange=function(){var t=this.getReddotSoulType();if(t>0){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.SOUL_MONSTER);this.event(i.MONSER_SOUL_REDDOT,t)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.SOUL_MONSTER);this.event(i.MONSER_SOUL_REDDOT,t)}};i.prototype.getReddotSoulType=function(){var t=0;for(var e=0,i=this.monsterSoulList;e<i.length;e++){var n=i[e];if(this.canActive(n.monsterSoulId,n.lv)){t=csv.AniSoulProxy.getIns().getSoulTypeById(n.monsterSoulId);break}else{t=this.canUp(n.monsterSoulId,n.lv,n.count);if(t>0){break}}}return t};i.prototype.canActive=function(t,e){if(e==0){var i=csv.AniSoulProxy.getIns().getLevelMap(t,e);if(i){return game.GridsModel.getIns().hasEnoughItems(i.needitem)}}return false};i.prototype.canUp=function(t,e,i){var n=csv.AniSoulProxy.getIns().isMax(t,e);if(n){return 0}var r=csv.AniSoulProxy.getIns().getLevelMap(t,e);if(r&&game.GridsModel.getIns().hasEnoughItems(r.needitem)){return csv.AniSoulProxy.getIns().getSoulTypeById(t)}};i.SINGLE_KEY="aniSoul.SoulModel";i.MONSER_SOUL_INFO_UPDATE="aniSoul.SoulInfoUpdata";i.MONSER_SOUL_REDDOT="aniSoul.RedDot";i.MONSER_SOUL_LEVEL_UP="aniSoul.LevelUp";return i}(app.ModelBase);o.SoulModel=t})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=game.GridsModel.getIns().getGridByType(game.GridsModel.BAG_MONSTER);var e=t.itemList.length;var i=[];i=i.concat(t.itemList);i.sort(this.sortAniSoul);for(var n=e;n<t.openSize;n++){i.push(game.GridsModel.EMPTY)}this.baglist.array=i;this.numlabel.text=e+"/"+t.openSize};e.prototype.sortAniSoul=function(t,e){if(t.getQuality()>e.getQuality()){return-1}if(t.getQuality()<e.getQuality()){return 1}if(t.getItemId()>e.getItemId()){return 1}if(t.getItemId()<e.getItemId()){return-1}return 0};e.SINGLE_KEY="aniSoul.AniSoulBagView";return e}(bag.BagDaojuView);t.AniSoulBagView=e})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var aniSoul;(function(c){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jinhuabtn.clickHandler=new Laya.Handler(this,this.onBtnClick);this.btnShowTips.on(Laya.Event.CLICK,this,this.onShowTips);this.shuxinglist.itemRender=c.SoulAttrItem;this.shuxinglist.renderHandler=new Laya.Handler(this,this.onListShuXingRendler);this.shuxinglist.array=[];this.gonminglist.itemRender=game.ComAttrItem1;this.gonminglist.renderHandler=new Laya.Handler(this,this.onListAttrRendler);this.gonminglist.array=[];this.initTabBar();this.initSoulList();this.initGongMing();guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.ANISOUL_ALIVE,this.jinhuabtn)};e.prototype.initGongMing=function(){this.arr=[this.gongming1,this.gongming2,this.gongming3,this.gongming4,this.gongming5];for(var t=0;t<this.arr.length;t++){this.arr[t].stopAll()}};e.prototype.initSoulList=function(){this.items=new common.CommonListMediator(this.gezilist,c.SoulItem);this.items.setData(0,[])};e.prototype.initTabBar=function(){this.tabBar=new common.CommonListMediator(this.xuanzelist,c.SoulTabItem);this.tabBar.setHSkin();var t=csv.AniSoulProxy.getIns().getAllType();var e=[];for(var i=1;i<=t;i++){e.push(i)}this.tabBar.setData(0,e)};e.prototype.playLoopAni=function(t){var e=Math.floor(t/5);for(var i=0,n=this.arr.length;i<n;i++){this.arr[i].stopAll();if(t%5>i){this.arr[i].playLoopAni(e)}else{this.arr[i].playLoopAni(e-1)}}};e.prototype.playActiveAni=function(t){t=t-1;var e=Math.floor(t/5);var i=t-e*5;if(this.arr[i]){this.arr[i].playActiveAni(e)}};e.prototype.onDisplay=function(){this.tabBar.on(common.CommonListMediator.LIST_ITEM_SELECT,this,this.onTabBarSelect);this.items.on(common.CommonListMediator.LIST_ITEM_SELECT,this,this.onItemsSelect);c.SoulModel.getIns().on(c.SoulModel.MONSER_SOUL_INFO_UPDATE,this,this.refreshAll);c.SoulModel.getIns().on(c.SoulModel.MONSER_SOUL_REDDOT,this,this.showRedDot);c.SoulModel.getIns().on(c.SoulModel.MONSER_SOUL_LEVEL_UP,this,this.onPlayLevelUpAni);app.ProtocolRequest.MonsterSoulInfoReq()};e.prototype.onUnDisplay=function(){this.tabBar.off(common.CommonListMediator.LIST_ITEM_SELECT,this,this.onTabBarSelect);this.items.off(common.CommonListMediator.LIST_ITEM_SELECT,this,this.onItemsSelect);c.SoulModel.getIns().off(c.SoulModel.MONSER_SOUL_INFO_UPDATE,this,this.refreshAll);c.SoulModel.getIns().off(c.SoulModel.MONSER_SOUL_REDDOT,this,this.showRedDot);c.SoulModel.getIns().off(c.SoulModel.MONSER_SOUL_LEVEL_UP,this,this.onPlayLevelUpAni);for(var t=0;t<this.arr.length;t++){this.arr[t].stopAll()}};e.prototype.onShowTips=function(){var t=this._selectSoulItem;if(t){tip.TipManager.showAttrCompare(this._suitData,app.getLang("monstersoul_tips"+this._selectSoulItem.type))}};e.prototype.onBtnClick=function(){c.SoulModel.getIns().monsterSoulUpdateReq(this._selectSoulItem?this._selectSoulItem.soulid:0)};e.prototype.onPlayLevelUpAni=function(){if(this.items.selectCell){this.items.selectCell.onAniplay()}this.onTabBarSelect(this.tabBar.selecItemData,true)};e.prototype.showRedDot=function(){this.xuanzelist.refresh()};e.prototype.refreshAll=function(){var t=c.SoulModel.getIns().getReddotSoulType();if(t){this.xuanzelist.selectedIndex=t-1;this.tabBar.selecItemData=t;this.xuanzelist.scrollTo(t-1);this.onTabBarSelect(t)}else{this.xuanzelist.scrollTo(this.tabBar.selecItemData-1);this.onTabBarSelect(this.tabBar.selecItemData)}};e.prototype.onListShuXingRendler=function(t){t.setData(t.dataSource)};e.prototype.onListAttrRendler=function(t){var e=t.dataSource;e.value=Math.floor(e.value*(1+this._suitData.compoundattr*1e-4));t.txtName.align="right";t.txtValue.color=game.STYLES.GREEN_COLOR_S;t.x=40;t.setData(e)};e.prototype.setTotalAttr=function(t){var e=[];for(var i=0;i<t.length;i++){var n=t[i];if(n){var r=c.SoulModel.getIns().getSoulInfoBySoulID(n.soulid);if(r.lv>0){var o=csv.AniSoulProxy.getIns().getLevelMap(n.soulid,r.lv);var a=Attributes.decode(o?o.attribute:"");var s=a.baseList.length;for(var l=0;l<s;l++){var u=a.baseList[l].propId;var p=void 0;for(var h in e){if(e[h].propId==u){p=e[h];break}}if(p){p.value+=a.baseList[l].value}else{p=AttributeData.init(a.baseList[l].propId,a.baseList[l].value,a.baseList[l].formula,a.baseList[l].flag);e.push(p)}}}}}this.weijihuolab.visible=!(e.length>0);this.gonminglist.array=e;return e};e.prototype.onItemsSelect=function(t){if(t){this.gezilist.scrollTo(this.gezilist.selectedIndex);var e=c.SoulModel.getIns().getSoulInfoBySoulID(t.soulid);var i=csv.AniSoulProxy.getIns().getLevelMap(t.soulid,e.lv);var n=Attributes.decode(i?i.attribute:"");var r=csv.AniSoulProxy.getIns().getSoulMaxLevel(t.soulid);var o=void 0;if(e.lv+1<r){i=csv.AniSoulProxy.getIns().getLevelMap(t.soulid,e.lv+1);o=Attributes.decode(i.attribute);this.imgyimanji.visible=false;this.jinhuabtn.visible=true}else{o=Attributes.decode("");this.imgyimanji.visible=true;this.jinhuabtn.visible=false}var a=[];var s=n.baseList.length||o.baseList.length;for(var l=0;l<s;l++){var u={};u.attr=n.baseList[l];u.attrNext=o.baseList[l];a.push(u)}this.shuxinglist.array=a;this.shuxinglist.height=this.shuxinglist.array.length*25;this._selectSoulItem=t;game.RedDotView.removeFrom(this.jinhuabtn);if(e.lv>0){if(c.SoulModel.getIns().canUp(e.monsterSoulId,e.lv,e.count)>0){game.RedDotView.addTo(this.jinhuabtn)}this.jinhuabtn.label=app.getLang("xilian_des_7")}else{if(c.SoulModel.getIns().canActive(t.soulid,t.lv)){game.RedDotView.addTo(this.jinhuabtn)}this.jinhuabtn.label=app.getLang("lotus_2")}}};e.prototype.onTabBarSelect=function(t,e){if(e===void 0){e=false}var i=csv.AniSoulProxy.getIns().getSoulMap(t);var n=-1;var r;for(var o=0;o<i.length;o++){var a=i[o].soulid;r=c.SoulModel.getIns().getSoulInfoBySoulID(a);if(c.SoulModel.getIns().canActive(r.monsterSoulId,r.lv)){n=o;break}else{if(c.SoulModel.getIns().canUp(r.monsterSoulId,r.lv,r.count)>0){n=o;break}}}r=c.SoulModel.getIns().getSoulInfoBySoulID(i[this.gezilist.selectedIndex].soulid);var s=c.SoulModel.getIns().canActive(r.monsterSoulId,r.lv)||c.SoulModel.getIns().canUp(r.monsterSoulId,r.lv,r.count)>0;if(!s&&n>=0){this.items.setData(n,i);this.gezilist.scrollTo(n);this._lastSelectedIndex=n}else{this.items.setData(this.gezilist.selectedIndex,i);this._lastSelectedIndex=this.gezilist.selectedIndex}var l=this._suitData?this._suitData.lv:0;if(e){this._suitData=c.SoulModel.getIns().getSuitLevel(t);if(this._suitData.lv>l){this.playActiveAni(this._suitData.lv)}else{this.playLoopAni(this._suitData.lv)}}else{this._suitData=c.SoulModel.getIns().getSuitLevel(t);this.playLoopAni(this._suitData.lv)}var u=this.setTotalAttr(i);var p=0;var h;for(var o in u){h=u[o].clone();h.value=u[o].value*(1+this._suitData.compoundattr*1e-4);p+=Attributes.getAllRoleScore(h)}this.txtFight.value=p+"";this.gongmingtitle.text=app.getLang("monstersoul_attr3",i[0].typename)};e.SINGLE_KEY="aniSoul.AniSoulListView";return e}(ui.shouhunshouji.shouhunshoujiUI);c.AniSoulListView=t})(aniSoul||(aniSoul={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("attribute_list.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray();var e=app.Config.getResById("attrshow.csv");this.showArr=e.getArray();var i=app.Config.getResById("battlenumbersection.csv");this.levelMap=i.getMap("id");this.battleNumMap={};var n=app.Config.getResById("battlenumber.csv");this.scoreMap=n.getMap("id")["1"]};e.prototype.getBattleScore=function(t){return this.scoreMap["prop"+t]};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.formatCfg=function(t){if(typeof t=="number"||typeof t=="string"){t=e.getIns().getCfg(t)}return t};e.prototype.getScore=function(t,e,i){if(!t){return 0}if(t<0){return 0}var n=i+"_"+t+"_"+e;if(!this.battleNumMap[n]){var r=this.levelMap[i];if(r){var o=r["prop"+t];if(o){var a=app.str2Array(o,";","-");for(var s=0,l=a.length;s<l;s++){var u=a[s];this.battleNumMap[i+"_"+t+"_"+u[0]]=parseInt(u[1])}}else{}}else{}}return this.battleNumMap[n]};e.prototype.getShowArr=function(){return this.showArr};e.SINGLE_KEY="game.AttributesProxy";return e}(app.ModelBase);t.AttributesProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var avatar;(function(h){var t=function(i){__extends(p,i);function p(t){if(t===void 0){t=true}var e=i.call(this)||this;e.shadowAlpha=.7;e.dir=0;e.hitArea=new Laya.Rectangle(-25,-25,50,50);e._setControlNode(e);e.interval=p.DEF_INTERVAL;e.avatarDisplay=new Laya.Sprite;e.addChild(e.avatarDisplay);e.mountShape=new h.MountShape;e.roleShape=new h.RoleShape;e.roleItemShape=new h.RoleItemShape;e.weaponShape=new h.WeaponShape;if(t){e._backRole=new Laya.Image("res/assist/roleshadow.png");e.addChild(e._backRole);e._backRole.anchorX=.5;e._backRole.anchorY=1}e.shapes=[e.mountShape,e.roleShape,e.roleItemShape,e.weaponShape];e.setAni(h.AvatarAnimation.ANI_ENUMS.IDLE,0);return e}p.prototype.setAniData=function(t){this.avatarData=t;if(t){this.mountHeight=this.avatarData.getMountHeight()}this._isChanged=true;Laya.timer.callLater(this,this.onChange)};p.prototype.setAni=function(t,e,i){if(i===void 0){i=false}if(this.aniName!=t||this.dir!=e||i){this.aniName=this._actionName=t;this.boPa=this.aniName==p.ANI_ENUMS.PA||this.aniName==p.ANI_ENUMS.HIT||this.aniName==p.ANI_ENUMS.DIE;this.dir=e;this._isChanged=true;if(i||this.aniName!=t){this.index=0}Laya.timer.callLater(this,this.onChange)}};p.prototype.play=function(t,e,i,n){if(t===void 0){t=0}if(e===void 0){e=true}if(i===void 0){i=""}if(n===void 0){n=true}this._isPlaying=true;if(i==""){i=this.aniName}if(t>=0){this.index=t}this.loop=e;this.aniName=this._actionName=i;this._isReverse=this.wrapMode==Laya.AnimationPlayerBase.WRAP_REVERSE;if(this.interval>0){this.timerLoop(this.interval,this,this._frameLoop,null,true,true)}};p.prototype.destroy=function(t){if(t===void 0){t=true}this.stop();i.prototype.destroy.call(this,t)};p.prototype._frameLoop=function(){if(this._style.visible&&this._style.alpha>.01){i.prototype._frameLoop.call(this)}};p.prototype._displayToIndex=function(t){for(var e=0;e<this.shapes.length;++e){this.shapes[e].displayToIndex(t,this.aniName,this.dir)}this.updataShadow()};p.prototype.onChange=function(){if(!this._isChanged||!this.avatarData){return}this._isChanged=false;var t=[];if(this.aniName==h.AvatarAnimation.ANI_ENUMS.JUMP){var e=this.avatarData.getRoleUrl(this.aniName,1);e&&t.push(e);this._atlass=t;Laya.loader.load(t,new Laya.Handler(this,this.onLoaded,[t]),null,Laya.Loader.ATLAS,0)}else{var i=this.formatResDir(this.dir);var e=this.avatarData.getRoleUrl(this.aniName,i);e&&t.push(e);e=this.avatarData.getRoleItemUrl(this.aniName,i);e&&t.push(e);e=this.avatarData.getMountUrl(this.aniName,i);e&&t.push(e);this._atlass=t;Laya.loader.load(t,new Laya.Handler(this,this.onLoaded,[t]),null,Laya.Loader.ATLAS,0)}};p.prototype.formatResDir=function(t){if(t===4){return 2}else if(t===5){return 1}else if(t===6){return 0}else{return t}};p.prototype.onLoaded=function(t){this.visible=true;if(this._atlass!==t){return}if(this._backRole){this._backRole.removeSelf();this._backRole=null}var e=0;if(this.aniName==h.AvatarAnimation.ANI_ENUMS.JUMP){if(this.dir===0||this.dir===1||this.dir===2||this.dir===3){e=1;this.avatarDisplay.scaleX=1;if(this._realShadow){this._realShadow.scaleX=1}}else{e=1;this.avatarDisplay.scaleX=-1;if(this._realShadow){this._realShadow.scaleX=-1}}this.roleShape.setAni(this.avatarData.getRoleUrl(this.aniName,e),this.aniName,e)}else{if(this.dir===4){e=2;this.avatarDisplay.scaleX=-1;if(this._realShadow){this._realShadow.scaleX=-1}}else if(this.dir===5){e=1;this.avatarDisplay.scaleX=-1;if(this._realShadow){this._realShadow.scaleX=-1}}else if(this.dir===6){e=0;this.avatarDisplay.scaleX=-1;if(this._realShadow){this._realShadow.scaleX=-1}}else{e=this.dir;this.avatarDisplay.scaleX=1;if(this._realShadow){this._realShadow.scaleX=1}}this.roleShape.setAni(this.avatarData.getRoleUrl(this.aniName,e),this.aniName,e);this.roleItemShape.setAni(this.avatarData.getRoleItemUrl(this.aniName,e),this.aniName,e);this.mountShape.setAni(this.avatarData.getMountUrl(this.aniName,e),this.aniName,e)}var i=0;if(this.mountShape.url&&this.aniName!=p.ANI_ENUMS.DIE){i=-this.mountHeight}var n=[];if(!csv.MapProxy.getIns().isMove(game.Context.mainRole.mapId)){n=p.SHAPE_ENUMS_1}else if(this.aniName==h.AvatarAnimation.ANI_ENUMS.JUMP){n=p.SHAPE_ENUMS_JUMP}else{if(e===0){n=p.SHAPE_ENUMS_0}else{n=p.SHAPE_ENUMS_2}}for(var r=0;r<n.length;++r){var o=n[r];for(var a=0;a<this.shapes.length;++a){var s=this.shapes[a].getShapeNames();var l=s.indexOf(o);if(l>-1&&this.shapes[a].displays.length>l){this.avatarDisplay.addChild(this.shapes[a].displays[l]);this.shapes[a].displays[l].y=this.mountShape.url?i:0;if(this.avatarData instanceof role.GuardPetVO){i=-this.avatarData.offY;this.shapes[a].displays[l].y=i}}}}this._aniCfg=this.roleShape._aniCfg?this.roleShape._aniCfg:this.mountShape._aniCfg;if(!this._aniCfg){this._count=0;this._checkResumePlaying();this.event(p.EVENTS.LOADED);return}if(this._aniCfg){this._count=this._aniCfg.count}var u=new Laya.Rectangle;for(var r=0;r<this.shapes.length;++r){if(this.shapes[r]&&this.shapes[r].boHitArea&&this.shapes[r].hitArea){u=u.union(this.shapes[r].hitArea,u)}}if(this.mountShape.url){u.y+=i}this.hitArea=u;this._checkResumePlaying();this.event(p.EVENTS.LOADED)};p.prototype._checkResumePlaying=function(){if(this._isPlaying){if(this.displayedInStage){this.play(this._index,this.loop,this._actionName)}else{this.clearTimer(this,this._frameLoop);this.clearGraphics()}}else{if(this._displayedInStage){this._displayToIndex(this._index)}else{this.clearTimer(this,this._frameLoop);this.clearGraphics()}}};p.prototype.clearGraphics=function(){for(var t=0;t<this.shapes.length;++t){this.shapes[t].clearGraphics()}};p.prototype.createShadow=function(t,e,i){if(!this._realShadow){this._realShadow=new Laya.Sprite;this._realShadow.alpha=this.shadowAlpha;this._realShadow.noGlobal=true;this._realShadow.filters=[new Laya.ColorFilter(game.STYLES.SHADOW_MATRIX)];this._realShadow.skewX=40;this._realShadow.skewY=0;this._realShadow.scale(e,i*.7);this._realShadow.pivot(512,512)}util.SpriteLinkUtil.addLinkChild(t,this._realShadow,scene.SceneMediator.getInstance().isoWorld.shadowLayer,0,0,true)};p.prototype.clearShadow=function(t){if(this._realShadow){util.SpriteLinkUtil.removeLinkChild(t,this._realShadow)}};p.prototype.updataShadow=function(){if(this._realShadow&&this._realShadow.visible){if(this.roleShape.displays&&this.roleShape.displays[0]){this._realShadow.graphics=this.roleShape.displays[0].graphics}}};p.prototype.getCurrShadow=function(){var t=new Laya.Sprite;t.alpha=this.shadowAlpha;t.pivot(512,512);if(this.roleShape.displays&&this.roleShape.displays[0]){t.graphics=this.roleShape.displays[0].graphics}if(this.dir===4){t.scaleX=-1}else if(this.dir===5){t.scaleX=-1}else if(this.dir===6){t.scaleX=-1}else{t.scaleX=1}return t};p.DEF_INTERVAL=120;p.X_POSITIVE=0;p.X_NEGATIVE=4;p.Z_POSITIVE=2;p.Z_NEGATIVE=6;p.SHAPE_ENUMS_0=[h.MountShape.MOUNT_B,h.RoleShape.ROLE,h.RoleItemShape.ITEM,h.WeaponShape.WEAPON,h.MountShape.MOUNT_F];p.SHAPE_ENUMS_1=[h.MountShape.MOUNT_B,h.RoleShape.ROLE,h.RoleItemShape.ITEM,h.WeaponShape.WEAPON];p.SHAPE_ENUMS_2=[h.MountShape.MOUNT_B,h.RoleShape.ROLE,h.RoleItemShape.ITEM,h.WeaponShape.WEAPON,h.MountShape.MOUNT_F];p.SHAPE_ENUMS_JUMP=[h.RoleShape.ROLE];p.ANI_ENUMS={IDLE:"idle",RUN:"run",DIE:"die",JUMP:"jump",HIT:"hit",SKILL_01:"skill01",SKILL_02:"skill02",SKILL_03:"skill03",SKILL_04:"skill04",PA:"pa",WATU:"watu",CAIJI:"caiji"};p.EVENTS={LOADED:"loaded"};return p}(Laya.AnimationPlayerBase);h.AvatarAnimation=t})(avatar||(avatar={}));var avatar;(function(t){var e=function(){function t(){this.fileName=game.AniView.FILE_NAME.ROLE;this.mountHeight=0}t.prototype.getMountHeight=function(){return this.mountHeight};t.prototype.getMountUrl=function(t,e){if(!this.mountKey){return""}if(t.indexOf("skill")>-1){t="idle"}var i="res/atlas/ani/zq/"+this.mountKey+"_"+t+"_"+e+".atlas";return i};t.prototype.getRoleUrl=function(t,e){if(!this.roleKey){return""}var i;if(this.mountKey){i="res/atlas/ani/"+this.fileName+"/zq_"+this.roleKey+"_"+t+"_"+e+".atlas"}else{i="res/atlas/ani/"+this.fileName+"/"+this.roleKey+"_"+t+"_"+e+".atlas"}return i};t.prototype.getRoleItemUrl=function(t,e){if(!this.weaponKey){return""}var i;if(this.mountKey){i="res/atlas/ani/wq/wq_zq_"+this.roleKey+"_"+t+"_"+e+".atlas"}else{i="res/atlas/ani/wq/wq_"+this.weaponKey+"_"+t+"_"+e+".atlas"}return i};return t}();t.AvatarData=e})(avatar||(avatar={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=i.BagModel.getIns();app.ViewManager.regist(i.BagDaojuView,"bag.atlas");app.ViewManager.regist(i.BagEquipView,"bag.atlas");app.ViewManager.regist(i.BagBaoshiView,"bag.atlas");app.ViewManager.regist(i.BagDanyaoView,"bag.atlas");app.ViewManager.regist(i.EquipSmeltView,"bag.atlas");app.ViewManager.regist(i.BagFumoView,"bag.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BAG_TOOL,i.BagDaojuView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BAG_EQUIP,i.BagEquipView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BAG_BAOSHI,i.BagBaoshiView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BAG_DANYAO,i.BagDanyaoView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BAG_FUMO,i.BagFumoView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.BAG_EQUIP,this._model,this._model.updataSmeltRed);game.GridsModel.getIns().on(game.GridsModel.EVENTS.ITEM_UPDATE,this._model,this._model.updataDaojuRed);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_INIT,this._model,this._model.updataDaojuRed);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this._model,this._model.updataDaojuRed);game.RoleModel.getIns().on(game.RoleModel.EVENTS.KUAI_TIAN,this._model,this._model.updataDaojuRed)};e.prototype.initCommands=function(){};e.SINGLE_KEY="bag.BagModule";return e}(app.ModuleBase);i.BagModule=t})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(h){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.baglist.vScrollBarSkin="";this.baglist.vScrollBar.isVertical=true;this.listCustom=new list.JListCustom;if(game.Context.disableIosRecharge()){this.lbl.text=""}else{this.lbl.text=app.getLang("bagnum_tips");this.lbl.on(Laya.Event.LINK,this,this.onHandler)}};e.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t)};e.prototype.onDisplay=function(){this.baglist.scrollTo(0);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.listCustom.clear();game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.listCustom.clear();var t=h.BagModel.getIns().getBaoshis();if(t.length>0){this.wuzhuangbeiimg.visible=false;var e=[];for(var i=0,n=t.length;i<n;i++){var r=game.ItemUtil.createVO(t[i].getItemId(),t[i].serverData,t[i].flag);r.showFlag=game.GridsModel.BAG_ITEM;e.push(r)}e.sort(items.ItemVO.BAOSHI_SORT_RULE);var o=[e[0]];var a=e[0].itemCfg.subtype;var s=[];for(var i=1,n=e.length;i<n;i++){var l=e[i];if(a==l.itemCfg.subtype){o.push(l)}else{s.push({grade:a,arr:o});a=l.itemCfg.subtype;o=[l]}}s.push({grade:a,arr:o});this.listCustom.init(this.baglist);for(var i=0;i<s.length;i++){var u=s[i];this.listCustom.split([u.grade],c,40);this.listCustom.split(u.arr,f,120,0,5)}var p=this.listCustom.getScrollValue();this.listCustom.end(p)}else{this.wuzhuangbeiimg.visible=true}this.numlabel.text=h.BagModel.getIns().getBagDes()};e.SINGLE_KEY="bag.BagBaoshiView";return e}(ui.bag.bagbaoshiviewUI);h.BagBaoshiView=t;var c=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="BaoshiNodeTitle";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,ui.zhuangbei.zhuangbeixuanzeitem2UI);e.biaotiname.text=app.getLang("baoshi_type_"+this.list[t]);e.y=this.y;return e};return t}(list.RowMoveBaseNode);h.BaoshiNodeTitle=c;var f=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="BaoshiNode";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,grids.GridView);e.x=t*118;e.y=this.y;e.setData(this.list[t],"",1,false);return e};return t}(list.RowMoveBaseNode);h.BaoshiNode=f})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(h){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.baglist.vScrollBarSkin="";this.baglist.vScrollBar.isVertical=true;this.listCustom=new list.JListCustom;if(game.Context.disableIosRecharge()){this.lbl.text=""}else{this.lbl.text=app.getLang("bagnum_tips");this.lbl.on(Laya.Event.LINK,this,this.onHandler)}};e.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t)};e.prototype.onDisplay=function(){this.baglist.scrollTo(0);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.listCustom.clear();var t=h.BagModel.getIns().getDanyaos();if(t.length>0){this.wuzhuangbeiimg.visible=false;var e=0;var i=[];for(var n=0,r=t.length;n<r;n++){var o=game.ItemUtil.createVO(t[n].getItemId(),t[n].serverData,t[n].flag);o.showFlag=game.GridsModel.BAG_ITEM;i.push(o)}i.sort(items.ItemVO.DANYAO_SORT_RULE);var a=[i[0]];var s=i[0].itemCfg.level;var l=[];for(var n=1,r=i.length;n<r;n++){var u=i[n];if(s==u.itemCfg.level){a.push(u)}else{l.push({grade:s,arr:a});s=u.itemCfg.level;a=[u]}}l.push({grade:s,arr:a});this.listCustom.init(this.baglist);for(var n=0;n<l.length;n++){var p=l[n];this.listCustom.split([p.grade],c,40);this.listCustom.split(p.arr,f,120,0,5)}this.listCustom.end()}else{this.wuzhuangbeiimg.visible=true}this.numlabel.text=h.BagModel.getIns().getBagDes()};e.SINGLE_KEY="bag.BagDanyaoView";return e}(ui.bag.bagbaoshiviewUI);h.BagDanyaoView=t;var c=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="DanyaoNodeTitle";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,ui.zhuangbei.zhuangbeixuanzeitem2UI);e.biaotiname.text=app.getLang("danyaotitle_"+this.list[t]);e.y=this.y;return e};return t}(list.RowMoveBaseNode);h.DanyaoNodeTitle=c;var f=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="DanyaoNode";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,grids.GridView);e.x=t*118;e.y=this.y;e.setData(this.list[t],"",1,false);return e};return t}(list.RowMoveBaseNode);h.DanyaoNode=f})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(h){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.baglist.vScrollBarSkin="";this.baglist.vScrollBar.isVertical=true;this.listCustom=new list.JListCustom;this.ronglianbtn.clickHandler=new Laya.Handler(this,this.setRonglian);this.checkArr=[this.check5,this.check1,this.check2,this.check3,this.check4];if(game.Context.disableIosRecharge()){this.lbl.text=""}else{this.lbl.text=app.getLang("bagnum_tips");this.lbl.on(Laya.Event.LINK,this,this.onHandler)}guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BAG_EQUIP_SELECT,this,this.getGuideItemBtn,300)};e.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t)};e.prototype.getGuideItemBtn=function(t){var e=this.listCustom.getItemView(new Laya.Handler(this,this.onCheck1,[t]));if(e){return e}return this.listCustom.getItemView(new Laya.Handler(this,this.onCheck2,[t]))};e.prototype.onCheck1=function(t,e){if(e.flag==game.GridsModel.BAG_ITEM&&e.getItemId()==t){return true}};e.prototype.onCheck2=function(t,e){if(e.flag!=game.GridsModel.BAG_ITEM&&e.getItemId()==t){return true}};e.prototype.setRonglian=function(){var t=[];for(var e=0,i=this.checkArr.length;e<i;e++){if(this.checkArr[e].selected){t.push(h.BagModel.getIns().selectTypes[e])}}if(!t.length){manager.FlowManager.instance.flowByStyle1(app.getLang("ronglian_des2"));return}var n=game.GridsModel.getIns().getBagEquips();var r=[];for(var e=0,i=n.length;e<i;e++){var o=n[e].getQuality();if(t.indexOf(o.toString())==-1){continue}var a=game.ItemUtil.createVO(n[e].getItemId(),n[e].serverData,n[e].flag);r.push(a)}if(!r.length){manager.FlowManager.instance.flowByStyle1(app.getLang("ronglian_des6"));return}r.sort(items.EquipVO.SORT_RULE);app.ViewManager.toggleDialog(h.EquipSmeltView,1,0,r)};e.prototype.delayRefresh=function(){Laya.timer.once(100,this,this.refreshAll)};e.prototype.onDisplay=function(){this.baglist.scrollTo(0);var t=game.SystemSetModel.getInstance().settingData.data;var e=t[game.SettingType.smelt].toString();for(var i=0,n=e.length;i<n;i++){this.checkArr[i].selected=e[i]=="1"}game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.delayRefresh);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.delayRefresh);var t="";for(var e=0,i=this.checkArr.length;e<i;e++){t+=this.checkArr[e].selected?"1":"2"}game.SystemSetModel.getInstance().setValueByType(parseInt(t),game.SettingType.smelt)};e.prototype.refreshAll=function(){this.listCustom.clear();var t=game.GridsModel.getIns().getAllEquips();if(t.length>0){this.wuzhuangbeiimg.visible=false;var e=[];for(var i=0,n=t.length;i<n;i++){var r=game.ItemUtil.createVO(t[i].getItemId(),t[i].serverData,t[i].flag);r.showFlag=game.GridsModel.BAG_ITEM;e.push(r)}e.sort(items.EquipVO.SORT_RULE);var o=[e[0]];var a=e[0].grade;var s=[];for(var i=1,n=e.length;i<n;i++){var l=e[i];if(a==l.grade){o.push(l)}else{s.push({grade:a,arr:o});a=l.grade;o=[l]}}s.push({grade:a,arr:o});this.listCustom.init(this.baglist);for(var i=0;i<s.length;i++){var u=s[i];this.listCustom.split([u.grade],c,40);this.listCustom.split(u.arr,f,120,0,5)}var p=this.listCustom.getScrollValue();this.listCustom.end(p)}else{this.wuzhuangbeiimg.visible=true}this.numlabel.text=h.BagModel.getIns().getBagDes();if(game.ClosureManager.hasDot(csv.FunctionsProxy.ENUMS.BAG_EQUIP)){game.RedDotView.addTo(this.ronglianbtn)}else{game.RedDotView.removeFrom(this.ronglianbtn)}};e.SINGLE_KEY="bag.BagEquipView";return e}(ui.bag.bagzhuangbeiviewUI);h.BagEquipView=t;var c=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="EquipTitle";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,ui.zhuangbei.zhuangbeixuanzeitem2UI);e.x=t*e.width;e.y=this.y;e.biaotiname.text=app.getLang("skill_des2",this.list[t]);return e};return t}(list.RowMoveBaseNode);h.EquipTitle=c;var f=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="EquipNode";t.check=true;return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,ui.zhuangbei.zhuangbeixuanzeitemUI);e.x=t*118;e.y=this.y;e.gezi.setData(this.list[t],"",1,false);e.yizhuangbeiimg.visible=Boolean(this.list[t].flag!=game.GridsModel.BAG_ITEM);return e};return t}(list.RowMoveBaseNode);h.EquipNode=f})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(h){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.baglist.vScrollBarSkin="";this.baglist.vScrollBar.isVertical=true;this.listCustom=new list.JListCustom;if(game.Context.disableIosRecharge()){this.lbl.text=""}else{this.lbl.text=app.getLang("bagnum_tips");this.lbl.on(Laya.Event.LINK,this,this.onHandler)}};e.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t)};e.prototype.onDisplay=function(){this.baglist.scrollTo(0);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.listCustom.clear();game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.listCustom.clear();var t=h.BagModel.getIns().getFumos();if(t.length>0){this.wuzhuangbeiimg.visible=false;var e=[];for(var i=0,n=t.length;i<n;i++){var r=game.ItemUtil.createVO(t[i].getItemId(),t[i].serverData,t[i].flag);r.showFlag=game.GridsModel.BAG_ITEM;e.push(r)}e.sort(items.ItemVO.FUMO_SORT_RULE);var o=[e[0]];var a=e[0].itemCfg.p1;var s=[];for(var i=1,n=e.length;i<n;i++){var l=e[i];if(a==l.itemCfg.p1){o.push(l)}else{s.push({grade:a,arr:o});a=l.itemCfg.p1;o=[l]}}s.push({grade:a,arr:o});this.listCustom.init(this.baglist);for(var i=0;i<s.length;i++){var u=s[i];this.listCustom.split([u.grade],c,40);this.listCustom.split(u.arr,f,120,0,5)}var p=this.listCustom.getScrollValue();this.listCustom.end(p)}else{this.wuzhuangbeiimg.visible=true}this.numlabel.text=h.BagModel.getIns().getBagDes()};e.SINGLE_KEY="bag.BagFumoView";return e}(ui.bag.bagbaoshiviewUI);h.BagFumoView=t;var c=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="FumoNodeTitle";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,ui.zhuangbei.zhuangbeixuanzeitem2UI);e.biaotiname.text=app.getLang("fumo_type_"+this.list[t]);e.y=this.y;return e};return t}(list.RowMoveBaseNode);h.FumoNodeTitle=c;var f=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="FumoNode";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,grids.GridView);e.x=t*118;e.y=this.y;e.setData(this.list[t],"",1,false);return e};return t}(list.RowMoveBaseNode);h.FumoNode=f})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezi.mouseEnabled=this.cb.mouseEnabled=false;this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){if(this.cb.selected){this.cb.selected=false;i.EquipSmeltView.getIns().removeSmeltVo(this.gezi.data)}else{this.cb.selected=true;i.EquipSmeltView.getIns().pushSmeltVo(this.gezi.data)}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.gezi.setData(t);this.cb.selected=i.EquipSmeltView.getIns().boSmelt(t)};return e}(ui.bag.zhuangbeirongliantemUI);i.EquipSmeltGridView=t})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(u){var t=function(t){__extends(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=u.BagModel.getIns();this.listCustom=new list.JListCustom;this.fanhuanlist.itemRender=grids.GridView;this.fanhuanlist.renderHandler=grids.GridView.CommonItemRender;this.weizhi.vScrollBarSkin="";this.weizhi.vScrollBar.isVertical=true;this.ronglianbtn.on(Laya.Event.CLICK,this,this.onSmelt);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_SMELT,this.ronglianbtn,null,500)};r.prototype.onSmelt=function(){var t=[];if(this.smeltVos.length){var e=this.smeltVos[0].flag;for(var i=0,n=this.smeltVos.length;i<n;i++){var r=this.smeltVos[i];t.push(r.getInstId())}while(t.length>0){var o=t.length;if(o>100){app.ProtocolRequest.MixEngulfingReq(e,t.splice(0,100))}else{app.ProtocolRequest.MixEngulfingReq(e,t.splice(0,o))}}}app.ViewManager.toggleDialog(u.EquipSmeltView,-1,0)};r.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.SMELT_SUCCESS,this,this.checkEquip);this.callLater(this.refreshAll)};r.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.SMELT_SUCCESS,this,this.checkEquip);Laya.timer.clearAll(this)};r.prototype.refreshAll=function(){this.setSmeltArr(this.dataSource)};r.prototype.checkEquip=function(){var t=[];for(var e=0,i=this.dataSource.length;e<i;e++){var n=game.GridsModel.getIns().getVOByInsId(this.dataSource[e].getInstId());if(n){t.push(n)}}this.dataSource=t;this.setSmeltArr(this.dataSource)};r.prototype.setSmeltArr=function(t){this.listCustom.clear();this.smeltVos=[];this.fanhuanlist.array=[];var e=t[0];if(e){var i=[e];var n=e.grade;this.smeltVos.push(e);var r=[];for(var o=1,a=t.length;o<a;o++){var s=t[o];this.smeltVos.push(s);if(n==s.grade){i.push(s)}else{r.push({grade:n,arr:i});n=s.grade;i=[s]}}r.push({grade:n,arr:i});this.listCustom.init(this.weizhi);for(var o=0;o<r.length;o++){var l=r[o];this.listCustom.split([l.grade],u.EquipTitle,40);this.listCustom.split(l.arr,p,120,0,5)}this.listCustom.end()}this.dellCost()};r.prototype.dellCost=function(){var t=[];var e=[];for(var i=0,n=this.smeltVos.length;i<n;i++){var r=this.smeltVos[i];var o=app.str2Array(r.equipCfg.smeltexp,";","-");for(var a=0,s=o.length;a<s;a++){var l=o[a];var u=parseInt(l[0]);var p=parseInt(l[1]);var h={id:u,count:p};if(u==game.Config.getIntParams(1237)){e.push(h)}else{t.push(h)}}if(r.strenLv){var c=csv.EquipProxy.getIns().getStrenSmeltCost(r.getItemId(),r.strenLv);for(var f=0,g=c.length;f<g;f++){t.push({id:c[f].id,count:c[f].count})}}if(r.refineLv){var c=csv.EquipProxy.getIns().getRefineSmeltCost(r.equipCfg.equippart,r.equipCfg.equipgrade,r.refineLv);for(var d=0,y=c.length;d<y;d++){t.push({id:c[d].id,count:c[d].count})}}for(var m=0,v=r.quench.length;m<v;++m){if(r.quench[m]){var c=csv.EquipProxy.getIns().getCuilianSmeltCost(r.equipCfg.equippart,r.equipCfg.equipgrade,r.quench[m]);for(var b=0,_=c.length;b<_;b++){t.push({id:c[b].id,count:c[b].count})}}}}if(e.length&&fabaonew.FaBaoNewModel.getIns().getPlayModeLv(fabaonew.Etask_type.SmeltJlsDouble)!=""){var I=game.ItemUtil.hebingItemsByObj(e)[0];I.doubleFlag=true;var w=game.ItemUtil.hebingItemsByObj(t);w.unshift(I);w.sort(this.sortRule);this.fanhuanlist.array=w}else{t=t.concat(e);var w=game.ItemUtil.hebingItemsByObj(t);w.sort(this.sortRule);this.fanhuanlist.array=w}};r.prototype.sortRule=function(t,e){if(!r.rankIds){r.rankIds=app.str2Array(game.Config.getParams(978),";")}var i=r.rankIds.indexOf(t.getItemId().toString());var n=r.rankIds.indexOf(e.getItemId().toString());if(i!=n){if(i==-1||n==-1){return-1}return i-n}return 0};r.prototype.pushSmeltVo=function(t){this.smeltVos.push(t);this.dellCost()};r.prototype.removeSmeltVo=function(t){var e=this.smeltVos.indexOf(t);this.smeltVos.splice(e,1);this.dellCost()};r.prototype.boSmelt=function(t){return this.smeltVos.indexOf(t)!=-1};r.SINGLE_KEY="bag.EquipSmeltView";return r}(ui.bag.zhuangbeirongliantipsUI);u.EquipSmeltView=t;var p=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="SmeltEquipNode";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,u.EquipSmeltGridView);e.setData(this.list[t]);e.x=t*118;e.y=this.y;return e};return t}(list.RowMoveBaseNode)})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._numChoose=new game.NumChoose(this.jianhao,this.jiahao,this.shuliang);this.btnchuan.clickHandler=new Laya.Handler(this,this.onQuedingClick);this._numChoose.on(game.NumChoose.VALUE_CHANGE,this,this.onValueChange);this.list.itemRender=game.CostItem;this.list.renderHandler=game.CostItem.RENDER_HANDLER;this.list.scrollRectOffX=50;this.list.scrollRectOffY=50;this.centerLayout=new game.CenterLayoutMediator(this.list,this,100,this.list.spaceX)};e.prototype.onQuedingClick=function(){if(game.GridsModel.getIns().hasEnoughItems(this.costArr,false,true,true)){app.ProtocolRequest.ItemQuaUpReq(this.dataSource.item1,this._numChoose.currValue)}};e.prototype.onValueChange=function(){for(var t=0,e=this.costArr.length;t<e;t++){this.costArr[t].setCount(this.perCount[t]*this._numChoose.currValue)}this.list.refresh();this.gezi2.shuzi.text=this._numChoose.currValue.toString()};e.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this.dataSource;var e=game.ItemUtil.createVO(t.item1);this.myOwn=game.GridsModel.getIns().getItemCount(t.item1);if(!this.myOwn){app.ViewManager.toggleDialog(o.GoldChangeView,-1,0);return}e.setCount(this.myOwn);this.gezi1.setData(e);this.gezi1.shuzi.text=this.myOwn.toString();this.lblname1.text=e.getName();this.lblname1.color=game.STYLES.ITEM_QUALITY_S[e.getQuality()];this.costArr=game.ItemUtil.parserList(t.costitem);var i=Math.min(this.myOwn,game.GridsModel.getIns().getEnoughNum(this.costArr));this.itemVo2=game.ItemUtil.createVO(t.item2);this.gezi2.setData(this.itemVo2);this.lblname2.text=this.itemVo2.getName();this.lblname2.color=game.STYLES.ITEM_QUALITY_S[this.itemVo2.getQuality()];i=Math.max(i,1);this._numChoose.init(i,1,1,i);this.perCount=[];for(var n=0,r=this.costArr.length;n<r;n++){this.perCount.push(this.costArr[n].count);this.costArr[n].setCount(this.perCount[n]*this._numChoose.currValue)}this.centerLayout.array=this.costArr;this.gezi2.shuzi.text=this._numChoose.currValue.toString()};e.SINGLE_KEY="bag.GoldChangeView";return e}(ui.bag.dianshichengjintipsUI);o.GoldChangeView=t})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var bag;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=new Laya.Handler(this,this.onRenderHandler);this._startX=-(Laya.stage.width+this.width)/2;this._moveInHandler=new Laya.Handler(this,this.moveOut);this._moveOutHandler=new Laya.Handler(this,this.moveEnd);this._soundHandler=new Laya.Handler(this,this.playSound)};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.daojulist.array=this.dataSource};e.prototype.moveIn=function(){this.box.x=this._startX;app.MyTween.toWithCall(this.box,{x:0},200,Laya.Ease.linearNone,this._moveInHandler,0,this._soundHandler,50)};e.prototype.playSound=function(){app.SoundManager.getIns().playSound("smelt")};e.prototype.moveOut=function(){Laya.Tween.to(this.box,{x:this._startX},200,Laya.Ease.linearNone,this._moveOutHandler,1e3)};e.prototype.moveEnd=function(){app.MyTween.clearTween(this.box);app.ViewManager.toggleDialog(e,-1,0)};e.SINGLE_KEY="game.SmeltAwardView";return e}(ui.alert.smeltalertUI);t.SmeltAwardView=e})(bag||(bag={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(w){var l=role.RobotView;var t=function(e){__extends(I,e);function I(){var t=e!==null&&e.apply(this,arguments)||this;t._boMapLoadEnd=true;t._boMapLoadHie=true;t.boBattleLog=false;t._boSceneEnd=false;t._boReportEnd=false;t.reportLen=0;t.battleEndTime=NaN;t.battleEndSeverTime=NaN;return t}I.getIns=function(){return app.Singleton.getInstance(I)};Object.defineProperty(I.prototype,"boMapLoadEnd",{get:function(){return this._boMapLoadEnd},set:function(t){this._boMapLoadEnd=t;if(t){this.event(I.MAP_LOAD_END)}},enumerable:true,configurable:true});Object.defineProperty(I.prototype,"boMapLoadHide",{get:function(){return this._boMapLoadHie},set:function(t){this._boMapLoadHie=t;if(t){this.event(I.MAP_LOAD_HIDE)}},enumerable:true,configurable:true});I.prototype.init=function(){this.reportArr=[];this.reportLen=0;this.model=w.BattleModel.getIns()};Object.defineProperty(I.prototype,"boSceneEnd",{get:function(){return this._boSceneEnd},set:function(t){this._boSceneEnd=t;if(t){this.startReportBattle()}},enumerable:true,configurable:true});Object.defineProperty(I.prototype,"boReportEnd",{get:function(){return this._boReportEnd},set:function(t){this._boReportEnd=t;this.event(I.REPORT_END);if(this.boBattleLog){console.log("累计战报",this.reportLen);console.log("==========战报推送结束==========")}},enumerable:true,configurable:true});I.prototype.checkIfReportEnd=function(){if(this.boReportEnd){if(this.boBattleLog){console.log("==========战报播放结束==========")}Laya.timer.clear(this,this.loop);Laya.timer.once1(1e3,this,this.setReportBattleEnd)}};I.prototype.startReportBattle=function(){if(this.boBattleLog){console.log("==========战斗开始==========")}var t=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId);if(t.bigeffect!=""){I.bigRateArr=app.str2Array(t.bigeffect,"|")}this.battleStep=1;this.ajustReportTime=true;this._time=app.TimerRewriter.currTimer;Laya.timer.frameLoop1(1,this,this.loop)};I.prototype.addAiAttack=function(t,e,i,n){if(n===void 0){n=0}var r=e.length;var o=game.SceneModel.random(0,r);var a=new UseSkillStartNtf;a.objId=t;a.tarId=e[o];a.usekill=i;a.dexterity=100;return w.AttackVo.recode(a,n,0)};I.prototype.checkAddAiAttack=function(){var t=[];for(var e=0,i=game.Context.roleList.length;e<i;e++){var n=game.Context.roleList[e].insId;var r=scene.SceneMediator.getInstance().getViewById(n);if(r&&r.roleState==role.RoleStateConst.IDLE){t.push(n)}}for(var o=0,a=t.length;o<a;o++){for(var e=0,i=this.reportArr.length;e<i;e++){var s=this.reportArr[e];if(s instanceof w.AttackVo){if(Uint64.equal(s.objId,t[o])){t[o]=null;break}}}}var l;for(var o=0,a=t.length;o<a;o++){if(t[o]){if(!l){p()}var u=game.Context.roleMap[t[o].toString()];var s=this.addAiAttack(t[o],l,u.getCfg().skill,this.battleTime);this.pushReport(s)}}function p(){l=[];var t=this.model.battleInfo.monster;for(var e=0,i=t.length;e<i;e++){var n=t[e];var r=scene.SceneMediator.getInstance().getViewById(n.objId);if(r&&r.roleState!=role.RoleStateConst.DIE){l.push(n.objId)}}}};I.prototype.checkAddMonsterAiAttack=function(){var t=[];var e=this.model.battleInfo.monster;for(var i=0,n=e.length;i<n;i++){var r=e[i].objId;var o=scene.SceneMediator.getInstance().getViewById(r);if(o&&o.roleState==role.RoleStateConst.IDLE){if(o.roleVO.getCfg().montype!=csv.MonsterProxy.MON_TYPE.STUPID){t.push(r)}}}for(var a=0,s=t.length;a<s;a++){for(var i=0,n=this.reportArr.length;i<n;i++){var l=this.reportArr[i];if(l instanceof w.AttackVo){if(Uint64.equal(l.objId,t[a])){t[a]=null;break}}}}var u;for(var a=0,s=t.length;a<s;a++){var r=t[a];if(r){if(!u){p()}var o=scene.SceneMediator.getInstance().getViewById(r);var l=this.addAiAttack(r,u,o.vo.getCfg().attackid,this.battleTime);this.pushReport(l)}}function p(){u=[];for(var t=0,e=game.Context.roleList.length;t<e;t++){var i=game.Context.roleList[t];var n=scene.SceneMediator.getInstance().getViewById(i.insId);if(n&&n.roleState!=role.RoleStateConst.DIE){u.push(i.insId)}}}};I.prototype.checkPvpAddAiAttack=function(){var t=[];var e=[];var i=this.model.battleInfo.role;for(var n=0,r=i.length;n<r;n++){var o=i[n].roleId;var a=scene.SceneMediator.getInstance().getViewById(o);if(a&&a.roleState!=role.RoleStateConst.DIE){if(i[n].camp==1){t.push(o)}else{e.push(o)}}}var s=[t,e];for(var l=0;l<2;l++){var u=[];var p=s[l];var h=s[l==1?0:1];for(var n=0,r=p.length;n<r;n++){var o=p[n];var c=scene.SceneMediator.getInstance().getViewById(o);if(c&&c.roleState==role.RoleStateConst.IDLE){u.push(o)}}for(var f=0,g=u.length;f<g;f++){for(var n=0,r=this.reportArr.length;n<r;n++){var d=this.reportArr[n];if(d instanceof w.AttackVo){if(Uint64.equal(d.objId,u[f])){u[f]=null;break}}}}for(var f=0,g=u.length;f<g;f++){var o=u[f];if(o){var c=scene.SceneMediator.getInstance().getViewById(o);if(c){var y=csv.DefclassProxy.getIns().getCfg(c.roleVO.prof).skill;var d=this.addAiAttack(u[f],h,y);this.pushReport(d)}}}}};I.prototype.getFirstAttackView=function(t){for(var e=0,i=this.reportArr.length;e<i;e++){var n=this.reportArr[e];if(n instanceof w.AttackVo){if(n.skill instanceof UseSkillStartNtf){if(Uint64.equal(n.skill.objId,t)){var r=scene.SceneMediator.getInstance().getViewById(n.skill.tarId);if(r instanceof role.MonsterView){return r}}}}}return null};I.prototype.stopLoopBattle=function(){Laya.timer.clear(this,this.dellStepChange);Laya.timer.clear(this,this.setReportBattleEnd);Laya.timer.clear(this,this.loop);this.reportArr=[];this._boReportEnd=false;this._boSceneEnd=false;this.reportLen=0;this.battleStep=0;I.lastBigId=0;I.bigRateArr=null;this.model.clear()};I.prototype.setReportBattleEnd=function(){if(this.boBattleLog){console.log("==========战斗结束==========")}this.currControl.stopGame();if(gm.GmModel.getIns().boRecord){w.BattleRecordCenter.getIns().recordClientTime()}};I.prototype.loop=function(){if(this.ajustReportTime){if(this.reportArr[0]){this._time-=this.reportArr[0].usetime;this.ajustReportTime=false}this.showPetComb()}var t=this.battleTime;var e=[];for(var i=0,n=this.reportArr.length;i<n;i++){var r=this.reportArr[i];if(r.usetime<=t){if(r instanceof w.HpMpVo){if(r.step==this.battleStep){for(var o=0,a=r.hps.length;o<a;o++){var s=r.hps[o];var l=scene.SceneMediator.getInstance().getViewById(s.tar);l&&l.updataHpMp(s,1)}this.dellStepChange(r)}else{e.push(r)}}else if(r instanceof w.BuffVo){if(r.step==this.battleStep){if(r.objId){var l=scene.SceneMediator.getInstance().getViewById(r.objId);if(l){l.refreshBuff(r.buffs)}}else{for(var o=0,a=r.buffs.length;o<a;o++){var u=r.buffs[o];var l=scene.SceneMediator.getInstance().getViewById(u.objId);if(l){l.pushBuff(u)}}}this.dellStepChange(r)}else{e.push(r)}}else if(r instanceof w.AttackVo){r.attackView=scene.SceneMediator.getInstance().getViewById(r.objId);r.targetView=scene.SceneMediator.getInstance().getViewById(r.tarId);for(var p=0,h=r.otherAttackVo.length;p<h;p++){var c=r.otherAttackVo[p];c.attackView=scene.SceneMediator.getInstance().getViewById(c.objId);c.targetView=scene.SceneMediator.getInstance().getViewById(c.tarId)}if(I.bigRateArr){w.AttackVo.checkIsStage(r)}r.attackView.addAttack(r)}else if(r instanceof w.SummonVo){if(r.type==1&&!r.boCreate){var f=r.summon.length;var g=scene.SceneMediator.getInstance().getViewById(r.objId);for(var d=0;d<f;d++){var y=role.MonsterVO.recode(r.summon[d]);y.boShowMp=y.boEnergy;y.hittype=1;y.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.SUMMON;var m=this.createMonster(y,g.vo.posX,g.vo.posY,g.vo.dir);m.visible=false}r.boCreate=true}if(r.step==this.battleStep){if(r.type==1){var f=r.summon.length;var g=scene.SceneMediator.getInstance().getViewById(r.objId);var v=game.SceneModel.summonMonsterPosArr(g.vo.posX,g.vo.posY,g.vo.dir,f);for(var b=0;b<f;b++){var y=role.MonsterVO.recode(r.summon[b]);var _=v[b];var m=this.createMonster(y,_.pX,_.pY,_.pDir);m.showInStage();m.visible=true}}else{var g=scene.SceneMediator.getInstance().getViewById(r.objId);if(g){g.runAway()}}this.dellStepChange(r)}else{e.push(r)}}}else{e.push(r)}}this.reportArr=e};I.prototype.dellStepChange=function(t){if(this.boBattleLog){console.log("释放",t.step,t)}this.battleStep++;if(this.battleStep>this.reportLen){this.checkIfReportEnd()}else{this.event(I.BATTLE_STEP_CHANGE)}};Object.defineProperty(I.prototype,"battleTime",{get:function(){return app.TimerRewriter.currTimer-this._time},enumerable:true,configurable:true});I.prototype.pushReport=function(t){if(t.real){this.reportLen++}this.reportArr.push(t);if(this.boBattleLog){console.log("追加",t.step,t)}};I.prototype.pushHpmp=function(t){this.reportLen++;this.reportArr.push(t);if(this.boBattleLog){console.log("追加",t.step,t)}};I.prototype.pushBuff=function(t){this.reportLen++;this.reportArr.push(t);if(this.boBattleLog){console.log("追加",t.step,t)}};I.prototype.pushSummon=function(t){this.reportLen++;this.reportArr.push(t);if(this.boBattleLog){console.log("追加",t.step,t)}};I.prototype.rankRoleList=function(t){t.sort(this.mainRankSort)};I.prototype.mainRankSort=function(t,e){if(!this.ranks){this.ranks=app.str2Array(game.Config.getParams(1181),";")}var i=this.ranks.indexOf(t.classSkin.toString());var n=this.ranks.indexOf(e.classSkin.toString());if(i<n){return-1}else if(i>n){return 1}return 0};I.prototype.showPetComb=function(){var t=this.model.battleInfo;for(var e=0,i=t.role.length;e<i;e++){var n=t.role[e];if(n.petcomid&&n.petcomid.length>0){var r=scene.SceneMediator.getInstance().getViewById(n.roleId);role.PetCombEffect.playPetCombEffect(csv.PetProxy.getIns().getShowCombEff(n.petcomid),r)}}};I.prototype.createRole=function(t,e,i,n){t.posX=e;t.posY=i;t.dir=n;var r;if(csv.MapProxy.getIns().isMove(game.Context.mainRole.mapId)){if(Uint64.equal(t.insId,game.Context.mainRole.insId)){r=scene.SceneMediator.getInstance().addSceneItem(t);r.refreshView();scene.SceneMediator.getInstance().lookAt=t}else{r=scene.SceneMediator.getInstance().addSceneItem(t)}}else{if(Uint64.equal(t.insId,game.Context.battleRoleList[0].insId)){r=scene.SceneMediator.getInstance().addSceneItem(t);r.refreshView();scene.SceneMediator.getInstance().lookAt=t}else{r=scene.SceneMediator.getInstance().addSceneItem(t)}}return r};I.prototype.createPlayerRole=function(t,e,i,n){t.posX=e;t.posY=i;t.dir=n;var r=scene.SceneMediator.getInstance().addSceneItem(t);return r};I.prototype.createMonster=function(t,e,i,n){t.posX=e;t.posY=i;t.dir=n;var r=scene.SceneMediator.getInstance().addSceneItem(t);return r};I.prototype.addBossRobot=function(t,e){var i=scene.SceneMediator.getInstance().getViewById(this.model.bossInfo.insId);var n=new role.RobotVo;n.boMainRole=e;var r=this.model.getStandPos(t.uid,csv.DefclassProxy.getIns().boRemote(t.classSkin));if(!r){console.log("没有站立的点了");return null}n.boShowHp=false;n.boShowMp=false;var o=game.SceneModel.getDirByTowPos(r[1].x,r[1].y,r[0].x,r[0].y);n.createRoleVo(t,r[1].x,r[1].y,o);var a=scene.SceneMediator.getInstance().getViewById(n.insId);if(!a){a=scene.SceneMediator.getInstance().addSceneItem(n);var s=new role.PosMoveAction;s.char=a;s.target=isometric.IsoUtils.isoToScreen(new isometric.Point3D(r[0].x*32,0,r[0].y*32));a.vo.dir=game.SceneModel.getDirByTowPos(a.vo.posX,a.vo.posY,r[0].x,r[0].y);s.completeHandler=Laya.Handler.create(this,function(){var t=game.SceneModel.getDirByTowPos(a.vo.posX,a.vo.posY,i.vo.posX,i.vo.posY);a.vo.dir=t;a.refreshState()});a.setMoveAction(s)}if(a&&a instanceof l){a.attackTarget=i;a.startAttack()}return n};I.SINGLE_KEY="battle.BattleManager";I.CHECK_BATTLEID_MONSTER="check_battleid_monster";I.MAP_LOAD_END="map_load_end";I.MAP_LOAD_HIDE="map_load_hide";I.REPORT_END="report_end";I.lastBigeffectTime=0;I.lastBigId=0;I.BATTLE_STEP_CHANGE="battle_step_change";return I}(app.ModelBase);w.BattleManager=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(R){var t=function(t){__extends(k,t);function k(){return t!==null&&t.apply(this,arguments)||this}k.getIns=function(){return app.Singleton.getInstance(k)};k.prototype.init=function(){this._model=R.BattleModel.getIns();this._manager=R.BattleManager.getIns();this._mediator=scene.SceneMediator.getInstance();app.ViewManager.regist(R.BossComingView,"bosszhandou.atlas");app.ViewManager.regist(R.BossHpView,"bosszhandou.atlas");app.ViewManager.regist(R.BossHurtRankView,"bosszhandou.atlas");app.ViewManager.regist(R.BattleLimitTimeView,"bosszhandou.atlas");app.ViewManager.regist(R.BattleScoreView,"bosszhandou.atlas");app.ViewManager.regist(R.BattleRoundView,"bosszhandou.atlas");app.ViewManager.regist(R.BattleStartTimeView,"bosszhandou.atlas");app.ViewManager.regist(R.BossKuaFuBattleEnemyView,"bosszhandou.atlas");app.ViewManager.regist(R.BattlePvpTimeView,"paihangbang.atlas","effect/vs.atlas");app.ViewManager.regist(R.BattlePvpMineRoleView,"paihangbang.atlas");app.ViewManager.regist(R.BattlePvpEnemyRoleView,"paihangbang.atlas");app.ViewManager.regist(R.BattlePvpTimeView,"paihangbang.atlas","effect/vs.atlas");app.ViewManager.regist(R.BattleMountainWinView,"jiesuan.atlas");app.ViewManager.regist(R.BattleHurtStateView,"paihangbang.atlas");app.ViewManager.regist(R.BattleHurtRecordView,"paihangbang.atlas");app.ViewManager.regist(R.BattleYdLotteryView,"wudiyaodong.atlas","effect/touzi.atlas");app.ViewManager.regist(R.GuajiBossHpView,"bosszhandou.atlas");app.ViewManager.regist(R.ShanzhongJiudieScoreView,"bosszhandou.atlas");app.ViewManager.regist(R.ShanzhongJiudieStepView,"bosszhandou.atlas");app.ViewManager.regist(R.BattleGodDungeonWinView,"shenshandilao.atlas");app.ViewManager.regist(R.BattleWuxingView)};k.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.BattleStartNtf,this,this.onBattleStartNtf);this.addMsgListener(app.ProtocolResponse.BattleMonsterNtf,this,this.onBattleMonsterNtf);this.addMsgListener(app.ProtocolResponse.HpChangeNtf,this,this.onHpChangeNtf);this.addMsgListener(app.ProtocolResponse.BuffChangeNtf,this,this.onBuffChangeNtf);this.addMsgListener(app.ProtocolResponse.UseSkillStartNtf,this,this.onUseSkillStartNtf);this.addMsgListener(app.ProtocolResponse.UseSkillEndNtf,this,this.onUseSkillEndNtf);this.addMsgListener(app.ProtocolResponse.TrigMasterSkillNtf,this,this.onTrigMasterSkillNtf);this.addMsgListener(app.ProtocolResponse.UseBackNtf,this,this.onUseBackNtf);this.addMsgListener(app.ProtocolResponse.CallSummonNtf,this,this.onCallSummonNtf);this.addMsgListener(app.ProtocolResponse.EndTimeSummonNtf,this,this.onEndTimeSummonNtf);this.addMsgListener(app.ProtocolResponse.BattleEndNtf,this,this.onBattleEndNtf);this.addMsgListener(app.ProtocolResponse.BattleAwardNtf,this,this.onBattleAwardNtf);this.addMsgListener(app.ProtocolResponse.ChargeBelongNtf,this,this.onChargeBelongNtf);this.addMsgListener(app.ProtocolResponse.BattleRecordNtf,this,this.onBattleRecordNtf);this.addMsgListener(app.ProtocolResponse.BattleAttributeNoti,this,this.onBattleAttributeNoti);gm.GmModel.getIns().on("GM_BATTLE",this,this.onGmBattle)};k.prototype.onGmBattle=function(){if(gm.GmModel.getIns().boGmBattle){var t=R.BattleManager.getIns();if(t.currControl&&t.currControl.boGame){t.currControl.stopGame()}}};k.prototype.onBattleStartNtf=function(t,e){this._manager.stopLoopBattle();if(this._manager.boBattleLog){console.log("收到战斗开始",e.battleid)}if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordBattleStartNtf(e)}role.LeadingRoleView.getIns().cancelAI();if(e.battletype==R.BattleConst.BATTLE_TYPE.PVP_BOSS){app.ProtocolRequest.StopMove(game.Context.mainRole.posX,game.Context.mainRole.posY,game.Context.mainRole.dir);this._model.event(R.BattleModel.JOIN_BOSS_MAP_PVP)}var i=this._model.battleType==e.battletype;var n=game.Context.mainRole.mapId==e.dgnmap;if(e.battletype==R.BattleConst.BATTLE_TYPE.GUAJI){var r=e.battleval[0];if(i){if(this._model.battleval[0]!=r){if(this._manager.currControl&&this._manager.currControl.boGame){this._manager.currControl.stopGame(true)}this._mediator.removeOtherItems();main.MapGuajiControl.getIns().reset()}}}this._manager.battleStartTime=game.Context.getServerTime();this._model.monDieCount=0;this._model.battleid=e.battleid;this._model.battleType=e.battletype;this._model.battleval=e.battleval;this._model.initBattleStep();this._model.event(R.BattleModel.INFO_CHANGE);this._manager.event(R.BattleManager.CHECK_BATTLEID_MONSTER);if(!n||!i){game.Context.mainRole.mapId=e.dgnmap;game.Context.event(game.ContextEvent.CHANGE_MAP,e.dgnmap);this._mediator.initScene(e.dgnmap)}};k.prototype.onBattleMonsterNtf=function(t,e){if(this._manager.boBattleLog){console.log("收到战斗开始",e)}if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordBattleMonsterNtf(e)}this._model.battleInfo=e;this._model.abuff=0;this._model.dbuff=0;for(var i=0;i<5;i++){if(e.attackbuff[i]){this._model.abuff++}if(e.defendbuff[i]){this._model.dbuff++}}if(this._mediator.isLoading){game.Context.on(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.initBattle,[e])}else{this.initBattle(e)}};k.prototype.initBattle=function(t){this._manager.rankRoleList(t.role);game.Context.off(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.initBattle);switch(this._model.battleType){case R.BattleConst.BATTLE_TYPE.BOSS_YEWAI:case R.BattleConst.BATTLE_TYPE.BOSS_WORLD:case R.BattleConst.BATTLE_TYPE.BOSS_VIP:case R.BattleConst.BATTLE_TYPE.DEFEND_HULU:case R.BattleConst.BATTLE_TYPE.TRANS:case R.BattleConst.BATTLE_TYPE.YAODONG:case R.BattleConst.BATTLE_TYPE.HULU_DAO_BOSS_FIGHT:case R.BattleConst.BATTLE_TYPE.HULU_DAO_MONSTER_FIGHT:case R.BattleConst.BATTLE_TYPE.GUILD_BOSS:this.dellLimitBossBattle(t);break;case R.BattleConst.BATTLE_TYPE.BOSS_CAVE:this.dellReportBossBattle(t);break;case R.BattleConst.BATTLE_TYPE.DUNGEON_MJG:case R.BattleConst.BATTLE_TYPE.BRAVE_CHALLENGE:case R.BattleConst.BATTLE_TYPE.ELITE_CHALLENGE:case R.BattleConst.BATTLE_TYPE.DUNGEON_MOUNTAIN:case R.BattleConst.BATTLE_TYPE.TASK:case R.BattleConst.BATTLE_TYPE.DUNGEON_NINE_TOWER:case R.BattleConst.BATTLE_TYPE.GOD_DUNGEON:case R.BattleConst.BATTLE_TYPE.FUMO:this.dellDungeonBattle(t);break;case R.BattleConst.BATTLE_TYPE.PET_DUNGEON:case R.BattleConst.BATTLE_TYPE.HUNT_RICH:case R.BattleConst.BATTLE_TYPE.BOSS_SecreArea:case R.BattleConst.BATTLE_TYPE.FU_YUAN:this.dellMonsFrontBattle(t,1);break;case R.BattleConst.BATTLE_TYPE.ZHUXIAN:case R.BattleConst.BATTLE_TYPE.GUANKA_PASS:case R.BattleConst.BATTLE_TYPE.MJ_LOCK:case R.BattleConst.BATTLE_TYPE.KFXL_PVE:this.dellMonsFrontBattle(t);break;case R.BattleConst.BATTLE_TYPE.DUNGEON_SZJD:this.dellImmediateBattle(t);break;case R.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:this.dellStoreBattle(t);break;case R.BattleConst.BATTLE_TYPE.PVP_BOSS:case R.BattleConst.BATTLE_TYPE.PVP_ARENA:case R.BattleConst.BATTLE_TYPE.PVP_JJC:case R.BattleConst.BATTLE_TYPE.PVP_HOME:case R.BattleConst.BATTLE_TYPE.PVP_GUILD:case R.BattleConst.BATTLE_TYPE.KFXL_PVP:this.dellPvpBattle(t);break;case R.BattleConst.BATTLE_TYPE.GUAJI:break;case R.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:this.dellSsslBattle(t);break;default:this.dellNormalBattle(t)}R.BattleManager.getIns().currControl.checkReady()};k.prototype.dellSsslBattle=function(t){var e=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId.toString());var i=e.xy.split(";");var n=parseInt(i[0]);var r=parseInt(i[1]);var o=t.monster.length;var a=game.SceneModel.randomMonsterPosArr(n,r,o,4);for(var s=0;s<o;s++){var l=a[s];var u=role.MonsterVO.recode(t.monster[s]);u.boShowMp=u.boEnergy;u.hittype=0;u.wxBuff=this._model.abuff;var p=this._manager.createMonster(u,l.pX,l.pY,l.pDir);p.showInStage()}var h=t.role.length;var c=[];var f=0;for(var s=0;s<h;s++){var g=t.role[s];var d=role.RoleVO.parserShowInfo(g,game.Context.roleMap[g.roleId.toString()]);d.setShowInfo(g);d.boShowHp=true;d.boShowMp=true;d.zuoqiId=0;d.boMainRole=s==0;d.wxBuff=this._model.dbuff;if(d.boRemoteHero){c.push(d);f++}else{c.unshift(d)}}var y=game.SceneModel.getRolePosList(n,r);y=game.SceneModel.lineUpTeam(h,f,y);for(var s=0;s<h;s++){var d=c[s];var m=this._mediator.getViewById(d.insId);if(!m){var l=y[s];d.pos=l.pos;m=this._manager.createRole(d,l.pX,l.pY,l.pDir)}else{m.clearAll()}game.Context.setRoleHp(d.insId)}};k.prototype.dellNormalBattle=function(t){var e=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId.toString());var i=e.xy.split(";");var n=parseInt(i[0]);var r=parseInt(i[1]);var o=t.monster.length;if(o==1){var a=role.MonsterVO.recode(t.monster[0]);a.boShowHp=false;a.boShowMp=false;a.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.GUAJI_BOSS;a.movetype=1;a.hittype=1;a.wxBuff=this._model.abuff;var s=this._manager.createMonster(a,t.pX,t.pY,t.pDir);s.showInStage()}else{var l=game.SceneModel.randomMonsterPosArr(t.pX,t.pY,o,4);for(var u=0;u<o;u++){var p=l[u];var a=role.MonsterVO.recode(t.monster[u]);a.boShowMp=a.boEnergy;a.hittype=0;var s=this._manager.createMonster(a,p.pX,p.pY,p.pDir);s.showInStage()}}var h=t.role.length;var c=[];var f=0;for(var u=0;u<h;u++){var g=t.role[u];var d=role.RoleVO.parserShowInfo(g,game.Context.roleMap[g.roleId.toString()]);d.setShowInfo(g);d.boShowHp=true;d.boShowMp=true;d.zuoqiId=0;d.boMainRole=u==0;d.wxBuff=this._model.dbuff;if(d.boRemoteHero){c.push(d);f++}else{c.unshift(d)}}var y=game.SceneModel.getRolePosList(n,r);y=game.SceneModel.lineUpTeam(h,f,y);for(var u=0;u<h;u++){var d=c[u];var m=this._mediator.getViewById(d.insId);if(!m){var p=y[u];d.pos=p.pos;m=this._manager.createRole(d,p.pX,p.pY,p.pDir)}else{m.clearAll()}game.Context.setRoleHp(d.insId)}};k.prototype.dellImmediateBattle=function(t){var e=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId.toString());var i=e.xy.split(";");var n=parseInt(i[0]);var r=parseInt(i[1]);var o=t.monster.length;var a=game.SceneModel.getMonsterPosList(t.pX,t.pY,t.pDir);for(var s=0;s<o;s++){var l=a[t.monster[s].pos];var u=role.MonsterVO.recode(t.monster[s]);u.boShowMp=u.boEnergy;u.hittype=Boolean(o==1)?1:0;u.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.FUBEN_MON;u.wxBuff=this._model.abuff;var p=this._manager.createMonster(u,l.pX,l.pY,l.pDir);p.showInStage()}var h=game.SceneModel.getDirByTowPos(n,r,t.pX,t.pY);var c=t.role.length;var f=[];var g=0;for(var s=0;s<c;s++){var d=t.role[s];var y=role.RoleVO.parserShowInfo(d,game.Context.roleMap[d.roleId.toString()]);y.setShowInfo(d);y.boShowHp=true;y.boShowMp=true;y.zuoqiId=0;y.boMainRole=s==0;y.wxBuff=this._model.dbuff;if(y.boRemoteHero){f.push(y);g++}else{f.unshift(y)}}var m=game.SceneModel.getRolePosList(n,r,h);m=game.SceneModel.lineUpTeam(c,g,m);for(var s=0;s<c;s++){var y=f[s];var v=this._mediator.getViewById(y.insId);var l=m[s];y.pos=l.pos;if(!v){v=this._manager.createRole(y,l.pX,l.pY,l.pDir)}else{v.clearAll()}game.Context.setRoleHp(y.insId)}};k.prototype.dellDungeonBattle=function(t){var e=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId.toString());var i=e.xy.split(";");var n=parseInt(i[0]);var r=parseInt(i[1]);var o=Math.round((n+t.pX)/2);var a=Math.round((r+t.pY)/2);var s=game.SceneModel.getPosByTowPos(n,r,t.pX,t.pY,200,false);var l=game.SceneModel.getDirByTowPos(n,r,t.pX,t.pY);var u=game.SceneModel.getDirByTowPos(t.pX,t.pY,n,r);var p=t.monster.length;var h=game.SceneModel.getMonsterPosList(s.x,s.y,u);for(var c=0;c<p;c++){var f=role.MonsterVO.recode(t.monster[c]);var g=h[t.monster[c].pos];f.boShowMp=f.boEnergy;f.hittype=1;f.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.FUBEN_MON;f.wxBuff=this._model.abuff;var d=this._manager.createMonster(f,g.pX,g.pY,g.pDir);d.showInStage()}var y=t.role.length;var m=[];var v=0;for(var c=0;c<y;c++){var b=t.role[c];var _=role.RoleVO.parserShowInfo(b,game.Context.roleMap[b.roleId.toString()]);_.setShowInfo(b);_.boShowHp=true;_.boShowMp=true;_.zuoqiId=0;_.boMainRole=c==0;_.wxBuff=this._model.dbuff;if(_.boRemoteHero){m.push(_);v++}else{m.unshift(_)}}var I=game.SceneModel.getRolePosList(n,r,l);I=game.SceneModel.lineUpTeam(y,v,I);for(var c=0;c<y;c++){var g=I[c];var _=m[c];_.pos=g.pos;var w=this._manager.createRole(_,g.pX,g.pY,g.pDir);w.clearAll();game.Context.setRoleHp(_.insId)}this._mediator.setCameraPos(o,a)};k.prototype.dellMonsFrontBattle=function(t,e){if(e===void 0){e=0}var i=game.SceneModel.getFrontPos(t.pX,t.pY,t.pDir,9);var n=i.pX;var r=i.pY;var o=Math.round((n+t.pX)/2);var a=Math.round((r+t.pY)/2);var s=game.SceneModel.getPosByTowPos(t.pX,t.pY,n,r,200,false);var l=game.SceneModel.getDirByTowPos(n,r,t.pX,t.pY);var u=game.SceneModel.getDirByTowPos(t.pX,t.pY,n,r);var p=t.monster.length;var h=game.SceneModel.getMonsterPosList(t.pX,t.pY,u);for(var c=0;c<p;c++){var f=role.MonsterVO.recode(t.monster[c]);var g=h[t.monster[c].pos];f.boShowMp=f.boEnergy;f.hittype=1;f.movetype=e;f.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.FUBEN_MON;f.wxBuff=this._model.abuff;var d=this._manager.createMonster(f,g.pX,g.pY,g.pDir);d.showInStage()}var y=t.role.length;var m=[];var v=0;for(var c=0;c<y;c++){var b=t.role[c];var _=role.RoleVO.parserShowInfo(b,game.Context.roleMap[b.roleId.toString()]);_.setShowInfo(b);_.boShowHp=true;_.boShowMp=true;_.zuoqiId=0;_.boMainRole=c==0;_.wxBuff=this._model.dbuff;if(_.boRemoteHero){m.push(_);v++}else{m.unshift(_)}}var I=game.SceneModel.getRolePosList(s.x,s.y,l);I=game.SceneModel.lineUpTeam(y,v,I);for(var c=0;c<y;c++){var g=I[c];var _=m[c];_.pos=g.pos;var w=this._manager.createRole(_,g.pX,g.pY,g.pDir);w.clearAll();game.Context.setRoleHp(_.insId)}this._mediator.setCameraPos(o,a)};k.prototype.dellStoreBattle=function(a){this._model.initBossPos(a.pX,a.pY,a.pDir);var t=a.monster.length;for(var e=0;e<t;e++){var i=a.monster[e];var n=this._mediator.getViewById(i.objId);if(!n){var r=role.MonsterVO.recode(a.monster[e]);r.boShowMp=r.boEnergy;r.hittype=1;r.ignoreBattleId=true;r.wxBuff=this._model.abuff;if(main.MapZJQWControl.getIns().checkIsMainMonster(r.monsterId)){r.boShowHp=false;r.boShowMp=false;r.movetype=1;this._model.bossInfo=r;n=this._manager.createMonster(r,a.pX,a.pY,a.pDir)}else{var o=game.SceneModel.getMonsterPosList(a.pX,a.pY,a.pDir);var s=o[i.pos];n=this._manager.createMonster(r,s.pX,s.pY,s.pDir)}n.showInStage()}else{n.roleVO.wxBuff=this._model.dbuff;n.roleVO.battleid=R.BattleModel.getIns().battleid}}var l=a.role.length;var u=[];var p=0;for(var e=0;e<l;e++){var h=a.role[e];var c=role.RoleVO.parserShowInfo(h,game.Context.roleMap[h.roleId.toString()]);c.setShowInfo(h);c.boShowHp=true;c.boShowMp=true;c.zuoqiId=0;c.boMainRole=e==0;c.wxBuff=this._model.dbuff;if(c.boRemoteHero){u.push(c);p++}else{u.unshift(c)}}var f=function(t){var e=u[t];var i=g._mediator.getViewById(e.insId);var n=g._model.getStandPos(e.insId,e.boRemoteHero);if(!i){var r=game.SceneModel.getDirByTowPos(n[1].x,n[1].y,n[0].x,n[0].y);i=g._manager.createRole(e,n[1].x,n[1].y,r);var o=new role.PosMoveAction;o.char=i;o.target=isometric.IsoUtils.isoToScreen(new isometric.Point3D(n[0].x*32,0,n[0].y*32));o.completeHandler=Laya.Handler.create(g,function(){var t=game.SceneModel.getDirByTowPos(i.vo.posX,i.vo.posY,a.pX,a.pY);i.vo.dir=t;if(i.charactorVO.hp<=0){i.die()}});i.setMoveAction(o)}else{i.clearAll()}};var g=this;for(var e=0;e<l;e++){f(e)}var d=a.pX;var y=a.pY+3;if(a.pDir==0){d=a.pX+3;y=a.pY}this._mediator.setCameraPos(d,y)};k.prototype.dellPvpBattle=function(t){var e=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId.toString());var i=e.xy.split(";");var n=parseInt(i[0]);var r=parseInt(i[1]);var o=parseInt(i[2]);var a=parseInt(i[3]);var s=2;var l=6;var u=game.SceneModel.getSceenAngleByTowPos(n,r,o,a);var p=t.role.length;var h=0;var c=0;var f=[];var g=[];this._model.mineTeamArr=[];this._model.enemyTeamArr=[];var d=1;for(var y=0;y<p;y++){var m=t.role[y];var v=void 0;if(m.camp==d){v=role.RoleVO.parserShowInfo(m);v.boMainRole=f.length==0;v.wxBuff=this._model.dbuff;this._model.mineTeamArr.push(v);if(v.boRemoteHero){f.push(v);h++}else{f.unshift(v)}}else{v=role.RoleVO.parserShowInfo(m);v.boMainRole=g.length==0;v.wxBuff=this._model.abuff;this._model.enemyTeamArr.push(v);if(v.boRemoteHero){g.push(v);c++}else{g.unshift(v)}}v.setShowInfo(m);if(m.camp==1){v.setSerInfo(t.acursvrid,t.asvrid,t.asvrname)}else{v.setSerInfo(t.dcursvrid,t.dsvrid,t.dsvrname)}}if(this._model.enemyTeamArr.length==0){game.Alert.show("只有一只队伍数据,查看log日志");console.log("错误数据",t.role);return}if(this._model.battleType==R.BattleConst.BATTLE_TYPE.PVP_GUILD){if(guild.GuildPkModel.getIns().getTeamChange()){var b=f;f=g;g=b;b=this._model.mineTeamArr;this._model.mineTeamArr=this._model.enemyTeamArr;this._model.enemyTeamArr=b;game.Context.battleCamp=f[0].battleCamp;var _=h;h=c;c=_;for(var y=0,I=k.pvpArr.length;y<I;y+=2){var w=k.pvpArr[y];var L=k.pvpArr[y+1];var S=t[w];t[w]=t[L];t[L]=S}}}else{if(game.Context.isMainRole(this._model.enemyTeamArr[0].insId)){var b=f;f=g;g=b;b=this._model.mineTeamArr;this._model.mineTeamArr=this._model.enemyTeamArr;this._model.enemyTeamArr=b;game.Context.battleCamp=f[0].battleCamp;var _=h;h=c;c=_;for(var y=0,I=k.pvpArr.length;y<I;y+=2){var w=k.pvpArr[y];var L=k.pvpArr[y+1];var S=t[w];t[w]=t[L];t[L]=S}}}this._model.mineTeamArr[0].teamHead=t.attack;this._model.enemyTeamArr[0].teamHead=t.defend;var A=f.length;var E=game.SceneModel.getPosByTowPos(n,r,o,a,160);var P=game.SceneModel.getRolePosList(n,r,s,u);P=game.SceneModel.lineUpTeam(A,h,P);var x=game.SceneModel.getRolePosList(E.x,E.y,s,u);this._model.mineGoPosArr=game.SceneModel.lineUpTeam(A,h,x);this._model.mineTeamViews=[];for(var y=0;y<A;y++){var v=f[y];var C=P[y];v.pos=C.pos;var D=this._manager.createRole(v,C.pX,C.pY,C.pDir);D.clearAll();this._model.mineTeamViews.push(D)}var M=g.length;var T=game.SceneModel.getPosByTowPos(o,a,n,r,160);var O=game.SceneModel.getRolePosList(o,a,l,u+Math.PI);O=game.SceneModel.lineUpTeam(M,c,O);var N=game.SceneModel.getRolePosList(T.x,T.y,l,u+Math.PI);this._model.enemyGoPosArr=game.SceneModel.lineUpTeam(M,c,N);this._model.enemyTeamViews=[];for(var y=0;y<M;y++){var v=g[y];var C=O[y];v.pos=C.pos;var D=this._manager.createRole(v,C.pX,C.pY,C.pDir);D.clearAll();this._model.enemyTeamViews.push(D)}this._mediator.setCameraPos(30,30)};k.prototype.dellLimitBossBattle=function(a){this._model.initBossPos(a.pX,a.pY,a.pDir);var t=role.MonsterVO.recode(a.monster[0]);t.boShowHp=false;t.boShowMp=false;t.movetype=1;t.hittype=1;t.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.LIMIT_BOSS;t.wxBuff=this._model.abuff;if(R.BattleConst.BATTLE_TYPE.YAODONG==this._model.battleType){var e=game.SceneModel.getFrontPos(a.pX,a.pY,a.pDir,-6);this._manager.createMonster(t,e.pX,e.pY,a.pDir)}else{this._manager.createMonster(t,a.pX,a.pY,a.pDir)}this._model.bossInfo=t;var i=a.role.length;var s=[];var n=0;for(var r=0;r<i;r++){var o=a.role[r];var l=role.RoleVO.parserShowInfo(o,game.Context.roleMap[o.roleId.toString()]);l.setShowInfo(o);l.boShowHp=true;l.boShowMp=true;l.zuoqiId=0;l.boMainRole=r==0;l.wxBuff=this._model.dbuff;if(l.boRemoteHero){s.push(l);n++}else{s.unshift(l)}if(o.camp==1){l.setSerInfo(a.acursvrid,a.asvrid,a.asvrname)}else{l.setSerInfo(a.dcursvrid,a.dsvrid,a.dsvrname)}}var u=function(t){var e=s[t];var i=p._mediator.getViewById(e.insId);var n=p._model.getStandPos(e.insId,e.boRemoteHero);if(!i){var r=game.SceneModel.getDirByTowPos(n[1].x,n[1].y,n[0].x,n[0].y);i=p._manager.createRole(e,n[1].x,n[1].y,r)}else{i.clearAll()}var o=new role.PosMoveAction;o.char=i;o.target=isometric.IsoUtils.isoToScreen(new isometric.Point3D(n[0].x*32,0,n[0].y*32));o.completeHandler=Laya.Handler.create(p,function(){var t=game.SceneModel.getDirByTowPos(i.vo.posX,i.vo.posY,a.pX,a.pY);i.vo.dir=t;if(i.charactorVO.hp<=0){i.die()}});i.setMoveAction(o)};var p=this;for(var r=0;r<i;r++){u(r)}var h=a.pX-4;var c=a.pY-1;if(a.pDir==0){h=a.pX+3;c=a.pY-1}this._mediator.setCameraPos(h,c)};k.prototype.dellReportBossBattle=function(a){this._model.initBossPos(a.pX,a.pY,a.pDir);var t=role.MonsterVO.recode(a.monster[0]);t.boShowHp=false;t.boShowMp=false;t.movetype=1;t.hittype=1;t.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.REPORT_BOSS;t.wxBuff=this._model.abuff;if(R.BattleConst.BATTLE_TYPE.YAODONG==this._model.battleType){var e=game.SceneModel.getFrontPos(a.pX,a.pY,a.pDir,-6);this._manager.createMonster(t,e.pX,e.pY,a.pDir)}else{this._manager.createMonster(t,a.pX,a.pY,a.pDir)}this._model.bossInfo=t;var i=a.role.length;var s=[];var n=0;for(var r=0;r<i;r++){var o=a.role[r];var l=role.RoleVO.parserShowInfo(o,game.Context.roleMap[o.roleId.toString()]);l.setShowInfo(o);l.boShowHp=true;l.boShowMp=true;l.zuoqiId=0;l.boMainRole=r==0;l.wxBuff=this._model.dbuff;if(l.boRemoteHero){s.push(l);n++}else{s.unshift(l)}}var u=function(t){var e=s[t];var i=p._mediator.getViewById(e.insId);var n=p._model.getStandPos(e.insId,e.boRemoteHero);if(!i){var r=game.SceneModel.getDirByTowPos(n[1].x,n[1].y,n[0].x,n[0].y);i=p._manager.createRole(e,n[1].x,n[1].y,r)}else{i.clearAll()}var o=new role.PosMoveAction;o.char=i;o.target=isometric.IsoUtils.isoToScreen(new isometric.Point3D(n[0].x*32,0,n[0].y*32));o.completeHandler=Laya.Handler.create(p,function(){var t=game.SceneModel.getDirByTowPos(i.vo.posX,i.vo.posY,a.pX,a.pY);i.vo.dir=t;if(i.charactorVO.hp<=0){i.die()}});i.setMoveAction(o)};var p=this;for(var r=0;r<i;r++){u(r)}var h=a.pX-4;var c=a.pY-1;if(a.pDir==0){h=a.pX+3;c=a.pY-1}this._mediator.setCameraPos(h,c)};k.prototype.onHpChangeNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordHpChangeNtf(e)}if(app.ViewManager.DisplayedInStage(R.BossHpView.SINGLE_KEY)&&this._model.bossInfo.monsterType==role.MonsterVO.ENUM_MONSTER_TYPE.LIMIT_BOSS){for(var i=0;i<e.hps.length;i++){var n=e.hps[i];if(Uint64.equal(n.tar,this._model.bossInfo.insId)){R.BossHpView.getIns().setBossHp(n.hp.toNumber())}}}if(this._model.skillAttackVo){var r=this._model.skillAttackVo;r.hps=r.hps.concat(e.hps)}else{this._manager.pushHpmp(R.HpMpVo.recode(e.hps,e.usetime,1))}};k.prototype.onBuffChangeNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordBuffChangeNtff(e)}if(this._model.skillAttackVo){var i=this._model.skillAttackVo;i.buffs=i.buffs.concat(e.buff)}else{this._manager.pushBuff(R.BuffVo.recode(e.buff,e.usetime,e.objId))}};k.prototype.onUseSkillStartNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordUseSkillStartNtf(e)}this._model.skillAttackVo=R.AttackVo.recode(e,e.usetime)};k.prototype.onUseSkillEndNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordUseSkillEndNtf(e)}var i=this._model.skillAttackVo;var n=e.useskill[0].hps;var r=e.useskill[0].buff;i.hps=i.hps.concat(n);i.buffs=i.buffs.concat(r);this._manager.pushReport(i);this._model.skillAttackVo=null};k.prototype.onTrigMasterSkillNtf=function(t,e){if(!e.useskill[0]||!e.useskill[0].hps){console.log(e);return}if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordTrigMasterSkillNtf(e)}var i;var n=e.useskill[0].hps;var r=e.useskill[0].buff;if(this._model.skillAttackVo){i=this._model.skillAttackVo;i.hps=i.hps.concat(n);i.buffs=i.buffs.concat(r);var o=R.AttackVo.recode(e.useskill[0],e.usetime,0);i.otherAttackVo.push(o)}else{i=R.AttackVo.recode(e.useskill[0],e.usetime)}if(this._model.skillAttackVo){}else{this._manager.pushReport(i)}};k.prototype.onUseBackNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordUseBackNtf(e)}var i;i=R.AttackVo.recode(e,e.usetime);this._manager.pushReport(i)};k.prototype.onCallSummonNtf=function(t,e){if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordCallSummonNtf(e)}var i=R.SummonVo.recode(e,e.usetime);this._manager.pushSummon(i)};k.prototype.onEndTimeSummonNtf=function(t,e){if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordEndTimeSummonNtf(e)}var i=R.SummonVo.recode(e,e.usetime);this._manager.pushSummon(i)};k.prototype.onBattleAttributeNoti=function(t,e){if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordBattleAttributeNoti(e)}};k.prototype.onBattleEndNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}if(gm.GmModel.getIns().boRecord){R.BattleRecordCenter.getIns().recordBattleEndNtf(e)}this._manager.battleEndTime=e.usetime;this._manager.battleEndSeverTime=e.endtime;this._manager.boReportEnd=true};k.prototype.onBattleAwardNtf=function(t,e){if(gm.GmModel.getIns().boGmBattle){return}this._manager.currControl.setBattleResult(e)};k.prototype.onBattleRecordNtf=function(t,e){this._model.pvpHurtData=e};k.prototype.onChargeBelongNtf=function(t,e){this._manager.currControl.setPkResult(e)};k.SINGLE_KEY="battle.BattleModule";k.pvpArr=["attack","defend","asvrname","dsvrname","asvrid","dsvrid","acursvrid","dcursvrid","attackattr","defendattr","attackbuff","defendbuff","attackskill","defendskill"];return k}(app.ModuleBase);R.BattleModule=t})(battle||(battle={}));var battle;(function(t){var e=function(){function t(){}t.setAuto=function(t,e){this.keyMap[t]=e;if(this.keyMap[t]==1){this.reStartAuto(t)}else{this.stopAuto(t)}};t.getAuto=function(t){if(this.keyMap[t]){return this.keyMap[t]}return 0};t.register=function(t,e,i,n,r){t.on(Laya.Event.CHANGE,this,this.onChange,[e,n]);t.on(Laya.Event.CLICK,this,this.onClick,[e,n]);this.checkMap[e]=t;this.checkLblMap[e]=r;this.handlerMap[e]=i};t.reStartAuto=function(t){this.startLoop(t)};t.stopAuto=function(t){Laya.timer.clear(this,this.loop);this.checkMap[t].selected=false;if(this.checkLblMap[t]){this.checkLblMap[t].text=app.getLang("点击自动挑战")}else{this.checkMap[t].label=app.getLang("点击自动挑战")}};t.clearAuto=function(t){this.checkMap[t].selected=false};t.onClick=function(t,e){if(e!=0){var i=csv.VipProxy.getIns().getVipPri(e,vipcode.VipModel.getIns().vipLvl);if(i==0){manager.FlowManager.instance.flowByStyle1(app.getLang("elite_gemsys_auto1"))}}};t.onChange=function(t,e){if(e!=0){var i=csv.VipProxy.getIns().getVipPri(e,vipcode.VipModel.getIns().vipLvl);if(i==0){this.checkMap[t].selected=false;return}}var n=this.checkMap[t].selected?1:0;this.setAuto(t,n)};t.startLoop=function(t){this.startMap[t]=game.Context.getServerTime();Laya.timer.loop(1e3,this,this.loop,[t]);if(this.checkLblMap[t]){this.checkLblMap[t].text=app.getLang("{0}秒进入战斗",this.DELAY_TIME)}else{this.checkMap[t].label=app.getLang("{0}秒进入战斗",this.DELAY_TIME)}};t.loop=function(t){var e=game.Context.getServerTime()-this.startMap[t];var i=this.DELAY_TIME-e;if(i>0){if(this.checkLblMap[t]){this.checkLblMap[t].text=app.getLang("{0}秒进入战斗",i)}else{this.checkMap[t].label=app.getLang("{0}秒进入战斗",i)}}else{if(this.checkLblMap[t]){this.checkLblMap[t].text=app.getLang("点击自动挑战")}else{this.checkMap[t].label=app.getLang("点击自动挑战")}Laya.timer.clear(this,this.loop);if(this.handlerMap[t]){this.handlerMap[t].run()}}};t.AUTO={BRAVE_CHALLENGE_BATTLE:"BRAVE_CHALLENGE_BATTLE",ELITE_CHALLENGE_BATTLE:"ELITE_CHALLENGE_BATTLE"};t.keyMap={};t.checkMap={};t.checkLblMap={};t.handlerMap={};t.startMap={};t.DELAY_TIME=5;return t}();t.BattleAutoKey=e})(battle||(battle={}));var battle;(function(t){var e=function(){function t(){}t.BATTLE_RESULT_TYPE={WIN:1,LOSE:2,PING:3};t.BATTLE_TYPE={GUAJI:1,BOSS_YEWAI:2,BOSS_WORLD:3,BOSS_VIP:4,DUNGEON_SSSL:5,DUNGEON_MJG:6,ZHUXIAN:7,BRAVE_CHALLENGE:8,ELITE_CHALLENGE:9,PVP_BOSS:10,PVP_ARENA:11,DUNGEON_MOUNTAIN:13,DEFEND_HULU:14,PVP_HOME:15,TRANS:16,TASK:17,YAODONG:18,DUNGEON_SZJD:19,DUNGEON_NINE_TOWER:20,HULU_DAO_BOSS_FIGHT:21,HULU_DAO_MONSTER_FIGHT:22,PVP_GUILD:23,DUNGEON_ZJQW:24,GOD_DUNGEON:25,PET_DUNGEON:26,HUNT_RICH:27,GUANKA_PASS:28,BOSS_CAVE:29,BOSS_SecreArea:30,FU_YUAN:31,PVP_JJC:32,GUILD_BOSS:33,MJ_LOCK:34,KFXL_PVE:35,KFXL_PVP:36,FUMO:37};t.BATTLE_RESULT_CLOSE_TIME=10;t.BATTLE_START_TIME=4;t.BATTLE_CLOSE_TIME_ZHUXIAN=5;return t}();t.BattleConst=e})(battle||(battle={}));var battle;(function(t){var e=function(){function t(){}t.UPDTA_HPMP="UPDTA_HPMP";return t}();t.BattleEvent=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(s){var t=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t._boShield=false;t.mineTeamViews=[];t.mineGoPosArr=[];t.enemyTeamViews=[];t.enemyGoPosArr=[];t.waitRobots=[];t.robots={};return t}a.getIns=function(){return app.Singleton.getInstance(a)};Object.defineProperty(a.prototype,"boShield",{get:function(){var t=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId);if(t){var e=app.str2Array(t.rightmaindlg,";");if(e.indexOf(main.MainUIOtherIcon.Enum_OTHER_FUNC.PINGBI.toString())!=-1){return this._boShield}}return false},set:function(t){this._boShield=t;this.event(a.SHIELD_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"battleType",{get:function(){return this._battleType},set:function(t){this._battleType=t;switch(t){case s.BattleConst.BATTLE_TYPE.BOSS_YEWAI:case s.BattleConst.BATTLE_TYPE.BOSS_WORLD:case s.BattleConst.BATTLE_TYPE.BOSS_VIP:case s.BattleConst.BATTLE_TYPE.DEFEND_HULU:case s.BattleConst.BATTLE_TYPE.TRANS:case s.BattleConst.BATTLE_TYPE.YAODONG:case s.BattleConst.BATTLE_TYPE.HULU_DAO_BOSS_FIGHT:case s.BattleConst.BATTLE_TYPE.HULU_DAO_MONSTER_FIGHT:case s.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:case s.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:case s.BattleConst.BATTLE_TYPE.GUILD_BOSS:a.attackType=1;break;default:a.attackType=0}},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"battleStep",{get:function(){return++this._battleStep},enumerable:true,configurable:true});a.prototype.initBattleStep=function(){this._battleStep=0};a.prototype.init=function(){var t=game.Config.getParams(5);var e=t.split(";");this.attackSpace=parseInt(e[0]);this.minAttackSpace=parseInt(e[1])};a.prototype.clear=function(){this.mineTeamViews=[];this.enemyTeamViews=[]};a.prototype.boDoubleBattle=function(){return false};a.prototype.checkBattleState=function(t,e){if(t===void 0){t=false}if(e===void 0){e=[]}var i=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(csv.MapProxy.isFuncMap(i)){return false}if(e.indexOf(i)!=-1){return false}if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("battle_error1"))}return true};a.prototype.checkJumpState=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(csv.MapProxy.isNoJumpMap(t)){manager.FlowManager.instance.flowByStyle1(app.getLang("battle_error1"));return false}this.isJump=true;return true};a.prototype.checkQiecuoState=function(t,e){if(t===void 0){t=false}if(e===void 0){e=[]}var i=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(i==csv.MapProxy.MAP_TYPE.HOME||i==csv.MapProxy.MAP_TYPE.GUAJI||i==csv.MapProxy.MAP_TYPE.WORLD_BOSS_OUT){return false}if(e.indexOf(i)!=-1){return false}if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("battle_error2"))}return true};a.prototype.countDieMonster=function(t){this.monDieCount++;this.event(a.MONSTER_DIE_COUNT,t)};Object.defineProperty(a.prototype,"bossInfo",{get:function(){return this._bossInfo},set:function(t){this._bossInfo=t;this.event(a.EVENT_SET_BOSS)},enumerable:true,configurable:true});a.prototype.getMonsterByPos=function(t){var e;if(this.battleInfo){for(var i=0,n=this.battleInfo.monster.length;i<n;i++){var r=this.battleInfo.monster[i];if(r.pos==t){e=scene.SceneMediator.getInstance().getViewById(r.objId)}}}return e};a.prototype.initBossPos=function(t,e,i){this._bossDir=i;this._bossX=t;this._bossY=e;this.nearStands=[];this.usedMap={};for(var n=1;n<=8;n++){this.nearStands.push("1_"+n)}this.farStands=[];for(var n=1;n<=13;n++){this.farStands.push("2_"+n)}};a.prototype.getStandPos=function(t,e){var i;if(e){if(this.farStands.length>0){i=this.farStands.shift()}else if(this.nearStands.length>0){i=this.nearStands.shift()}}else{if(this.nearStands.length>0){i=this.nearStands.shift()}else if(this.farStands.length>0){i=this.farStands.shift()}}if(!i){return null}var n;n=a.bossStandPos[i];this.usedMap[t.toString()]=i;var r=new Laya.Point;var o=new Laya.Point;if(this._bossDir==0){r.x=this._bossX+n[1];r.y=this._bossY+n[0];if(n[2]==1){o.x=this._bossX+15;o.y=this._bossY}else if(n[2]==2){o.x=this._bossX;o.y=this._bossY+15}else if(n[2]==3){o.x=this._bossX;o.y=this._bossY-15}}else{r.x=this._bossX+n[0];r.y=this._bossY+n[1];if(n[2]==1){o.x=this._bossX;o.y=this._bossY+15}else if(n[2]==2){o.x=this._bossX+15;o.y=this._bossY}else if(n[2]==3){o.x=this._bossX-15;o.y=this._bossY}}return[r,o]};a.prototype.recoverPos=function(t){if(this.usedMap[t.toString()]){var e=this.usedMap[t.toString()];var i=app.str2Array(e,"_")[0];if(i=="1"){this.nearStands.push(e)}else{this.farStands.push(e)}}};a.prototype.storeSeverRobots=function(t){if(s.BattleManager.getIns().currControl&&s.BattleManager.getIns().currControl.boGame){for(var e=0,i=t.robots.length;e<i;e++){var n=s.BattleManager.getIns().addBossRobot(t.robots[e],e==0);if(!n){continue}this.robots[n.insId.toString()]=n}}else{this.waitRobots.push(t)}};a.prototype.changeSeverRobots=function(t){for(var e=0,i=t.robots.length;e<i;e++){var n=t.robots[e];var r=this.robots[n.uid.toString()];if(r){r.fstate=n.fstate;var o=scene.SceneMediator.getInstance().getViewById(n.uid);if(o){o.roleVO.fstate=r.fstate;o.refreshState()}}}};a.prototype.createSeverRobots=function(){for(var t=0,e=this.waitRobots.length;t<e;t++){var i=this.waitRobots[t];for(var n=0,r=i.robots.length;n<r;n++){var o=s.BattleManager.getIns().addBossRobot(i.robots[n],n==0);if(o){this.robots[o.insId.toString()]=o}}}this.waitRobots=[]};a.prototype.clearSeverRobots=function(){this.waitRobots=[];this.robots={}};a.prototype.getStrongGrowArr=function(t){if(t===void 0){t=0}var e=csv.LeadStrongerProxy.getIns().getStrongGrow();var i=[];if(e){var n=csv.LeadStrongerProxy.getIns().getList(e.recommend);n.sort(this.sortByLv);for(var r=0;r<n.length;r++){if(boss.BossModel.getIns().checkFunction(n[r].functionId,n[r].dailyTimeId)){i.push(n[r]);if(t>0&&i.length>=t){break}}}}return i};a.prototype.sortByLv=function(t,e){if(t.lv>e.lv)return-1;if(t.lv<e.lv)return 1;if(csv.FunctionsProxy.getIns().isOpen(t.functionId)&&!csv.FunctionsProxy.getIns().isOpen(e.functionId))return-1;if(csv.FunctionsProxy.getIns().isOpen(e.functionId)&&!csv.FunctionsProxy.getIns().isOpen(t.functionId))return 1};a.SINGLE_KEY="battle.BattleModel";a.INFO_CHANGE="info_change";a.SHIELD_CHANGE="shield_change";a.EVENT_SET_BOSS="EVENT_SET_BOSS";a.JOIN_BOSS_MAP_PVP="JOIN_BOSS_MAP_PVP";a.MONSTER_DIE_COUNT="monster_die_count";a.TEAM_LEVELUPTIP_CLOSE="team_leveluptip_close";a.attackType=0;a.bossStandPos={"1_1":[1,4,1],"1_2":[-1,4,1],"1_3":[3,3,1],"1_4":[-3,3,1],"1_5":[4,0,2],"1_6":[-3,0,3],"1_7":[4,-3,2],"1_8":[-3,-2,3],"2_1":[0,9,1],"2_2":[3,9,1],"2_3":[-3,9,1],"2_4":[6,9,1],"2_5":[9,8,2],"2_6":[-6,6,3],"2_7":[10,5,2],"2_8":[-7,3,3],"2_9":[10,2,2],"2_10":[-7,0,3],"2_11":[10,-1,2],"2_12":[-7,-3,3],"2_13":[9,-4,2]};return a}(app.ModelBase);s.BattleModel=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(o){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.tArr=[];t._battleMap={};t._battleArr=[];t.totalClient=0;t.totalServer=0;return t}i.getEffDes=function(t){var e="";var i=[];for(var n=0;n<=40;n++){if(o.HurtView.checkType(t,n)){i.push(this.effectType[n])}}for(var n=0,r=i.length;n<r;n++){e+=i[n];if(n<r-1){e+="、"}}return e};i.prototype.getDes=function(t,e,i,n){var r="";if(t==1){var o=e;var a=csv.SkillProxy.getIns().getCfg(o.usekill);var s="  {0}使用技能{1}攻击{2}：id="+o.usekill;r+=app.getLang(s,this.getCharName(o.objId,i),app.getLang(a.name),this.getCharName(o.tarId,i));r+="\n"}else if(t==2){var o=e;var a=csv.SkillProxy.getIns().getMasterCfg(o.masterkill,1);var s="  {0}使用天赋技能{1}攻击{2}：id="+o.masterkill;r+=app.getLang(s,this.getCharName(o.objId,i),app.getLang(a.name),this.getCharName(o.tarId,i));r+="\n";for(var l=0,u=o.hps.length;l<u;l++){var p=o.hps[l];r+=this.getEffDes(p,i);r+="\n"}for(var l=0,u=o.buff.length;l<u;l++){r+=this.getBuffDes(o.buff[l],i);r+="\n"}}else if(t==3){var h=e;r+="  血量蓝量变化：";r+="\n";for(var l=0,u=h.length;l<u;l++){r+=this.getEffDes(h[l],i);r+="\n"}}else if(t==4){var c=e;if(n.objId){var s="  {0}发生buff变化：";r+=app.getLang(s,this.getCharName(n.objId,i))}else{r+="buff变化："}r+="\n";for(var l=0,u=c.length;l<u;l++){r+=this.getBuffDes(c[l],i);r+="\n"}}else if(t==0){r+="  初始化角色信息：";r+="\n";for(var f in i){var g=i[f];if(g.initAttris){r+="    "+g.name+"初始属性：\n";var d=0;for(var l=1,u=g.initAttris.length;l<u;l++){var y=g.initAttris[l];if(y>0){if(d%2==0){r+=app.getLang("      {0}:{1}\t",Attributes.getPropName(l),y)}else{r+=app.getLang("      {0}:{1}\n",Attributes.getPropName(l),y)}d++}}}}}else if(t==5){r+=app.getLang("  属性变化-{0}：",this.getCharName(e.uid,i));r+="\n";var m=e.changes;for(var l=0,u=m.length;l<u;l++){r+=app.getLang("     {0}:{1}",Attributes.getPropName(m[l].id),m[l].value);r+="\n"}}else if(t==6){var o=e;var s=" {0}反击{1}:";r+=app.getLang(s,this.getCharName(o.objId,i),this.getCharName(o.tarId,i));r+="\n";for(var l=0,u=o.hps.length;l<u;l++){var p=o.hps[l];r+=this.getEffDes(p,i);r+="\n"}for(var l=0,u=o.buff.length;l<u;l++){r+=this.getBuffDes(o.buff[l],i);r+="\n"}}else if(t==7){var o=e;var s=" 技能释放结束";r+=app.getLang(s);for(var l=0,u=o.hps.length;l<u;l++){var p=o.hps[l];r+=this.getEffDes(p,i);r+="\n"}for(var l=0,u=o.buff.length;l<u;l++){r+=this.getBuffDes(o.buff[l],i);r+="\n"}}else if(t==8){var o=e;var s=" {0}释放召唤技能:";r+=app.getLang(s,this.getCharName(o.objId,i));r+="\n";for(var l=0,u=o.summon.length;l<u;l++){r+="召唤_"+csv.MonsterProxy.getMonsterName(o.summon[l].monsterId)+l;r+="\n"}}else if(t==9){var o=e;var s=" 召唤时间结束";r+=app.getLang(s);r+=this.currRvo.charmap[o.objId.toString()].name;r+="\n"}return r};i.prototype.getEffDes=function(t,e){var i="";var n="    目标：{0}，效果：{1}，是否格挡：{2}，伤害值/治疗量:{3}";i+=app.getLang(n,this.getCharName(t.tar,e),o.BattleRecordCenter.getEffDes(t.effectType),t.def?"有":"无",t.hurt.toNumber());return i};i.prototype.getBuffDes=function(t,e){var i="";var n="    目标：{0}，名称：{1}，等级：{2}，状态：{3}";var r=csv.StatusProxy.getIns().getCfg(t.buffId,t.level);i+=app.getLang(n,this.getCharName(t.objId,e),app.getLang(r.name),r.level,t.flag?"增加":"移除");return i};i.prototype.getStateDes=function(t,e){var i=app.getLang("    {0}的状态:\n",this.getCharName(t.uid,e));var n="    hp：{0}，maxhp：{1}，mp：{2}，maxmp:{3}，\n";i+=app.getLang(n,t.hp,t.maxhp,t.mp,t.maxmp);var r="";for(var o=0,a=t.buffs.length;o<a;o++){if(o==0){r+="    buffs:\n"}var s=t.buffs[o];var l=csv.StatusProxy.getIns().getCfg(s.buffId,s.level);r+=app.getLang("      {0}{1}级\n",l.name,s.level)}i+=r;return i};i.prototype.getCharName=function(t,e){var i=e[t.toString()];return i.name+"-"+i.pos};i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){};i.prototype.getBattleArr=function(){return this._battleArr};i.prototype.getBattleRecordVO=function(t){return this._battleMap[t]};i.prototype.clearAll=function(){this.currRvo=null;this._battleArr=[];this._battleMap={};this.tArr=[];this.totalClient=0;this.totalServer=0};i.prototype.recordBattleStartNtf=function(t){this.tVo=new r;this.tArr.push(this.tVo);this.tVo.bid=t.battleid;this.tVo.client=Laya.timer.currTimer;this.currRvo=new n;this.currRvo.bid=t.battleid;this.currRvo.bname=i.battleType[t.battletype];this._battleMap[t.battleid]=this.currRvo;this._battleArr.push(this.currRvo)};i.prototype.recordClientTime=function(){if(!this.tVo){return}this.tVo.client=Laya.timer.currTimer-this.tVo.client;this.totalClient+=this.tVo.client;this.tVo.totalClient=this.totalClient;this.event(i.TIME_REFRESH)};i.prototype.recordBattleMonsterNtf=function(t){if(!this.currRvo){return}var e=[];for(var i=0,n=t.role.length;i<n;i++){var r=t.role[i];var o=new s;o.uid=r.roleId;o.pname=r.playername;o.name=r.playername;o.pos=i+1;o.camp=r.camp;o.hp=r.hp.toNumber();o.maxhp=r.maxhp.toNumber();o.mp=r.mp.toNumber();o.maxmp=r.maxmp.toNumber();if(game.Context.roleMap[r.roleId.toString()]){o.attris=game.Context.roleMap[r.roleId.toString()].attribute}this.currRvo.charmap[o.uid.toString()]=o;if(!this.currRvo.camps[o.camp]){this.currRvo.camps[o.camp]=[]}this.currRvo.camps[o.camp].push(o);e.push(o.uid)}for(var i=0,n=t.monster.length;i<n;i++){var r=t.monster[i];var o=new l;o.uid=r.objId;o.name=csv.MonsterProxy.getMonsterName(r.monsterId);o.pos=r.pos;o.camp=r.camp;o.hp=r.hp.toNumber();o.maxhp=r.maxhp.toNumber();o.mp=r.mp.toNumber();o.maxmp=r.maxmp.toNumber();this.currRvo.charmap[o.uid.toString()]=o;if(!this.currRvo.camps[o.camp]){this.currRvo.camps[o.camp]=[]}this.currRvo.camps[o.camp].push(o);e.push(o.uid)}var a=new u;a.step=this.currRvo.steps.length+1;a.type=0;a.time=0;this.recordTimeState(a,e);this.currRvo.steps.push(a)};i.prototype.recordTimeState=function(t,n){for(var e in this.currRvo.charmap){var i=this.currRvo.charmap[e];var r=new a;r.recordState(i);r.boChange=o(i.uid);t.states.push(r)}function o(t){for(var e=0,i=n.length;e<i;e++){if(Uint64.equal(n[e],t)){return true}}return false}};i.prototype.recordHpChangeNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=3;e.time=t.usetime;e.data=t.hps;e.resp=t;var i=[];for(var n=0,r=t.hps.length;n<r;n++){var o=t.hps[n];var a=this.currRvo.charmap[o.tar.toString()];a.dellEff(o);i.push(o.tar)}this.recordTimeState(e,i);this.currRvo.steps.push(e)};i.prototype.recordBuffChangeNtff=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=4;e.time=t.usetime;var i=[t.objId];var n=this.currRvo.charmap[t.objId.toString()];e.data=n.getGetBuffArr(t.buff).concat(n.getDelBuffArr(t.buff));e.resp=t;n.refreshBuff(t.buff);this.recordTimeState(e,i);this.currRvo.steps.push(e)};i.prototype.recordUseSkillStartNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=1;e.time=t.usetime;var i=t;e.data=i;e.resp=t;this.recordTimeState(e,[]);this.currRvo.steps.push(e)};i.prototype.recordUseSkillEndNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=7;var i=t.useskill[0];e.data=i;e.resp=t;var n=[];for(var r=0,o=i.hps.length;r<o;r++){var a=i.hps[r];var s=this.currRvo.charmap[a.tar.toString()];s.dellEff(a);n.push(a.tar)}for(var r=0,o=i.buff.length;r<o;r++){var l=i.buff[r];var s=this.currRvo.charmap[l.objId.toString()];s.dellBuff(l);n.push(l.objId)}this.recordTimeState(e,n);this.currRvo.steps.push(e)};i.prototype.recordTrigMasterSkillNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=2;e.time=t.usetime;var i=t.useskill[0];e.data=i;e.resp=t;var n=[];for(var r=0,o=i.hps.length;r<o;r++){var a=i.hps[r];var s=this.currRvo.charmap[a.tar.toString()];s.dellEff(a);n.push(a.tar)}for(var r=0,o=i.buff.length;r<o;r++){var l=i.buff[r];var s=this.currRvo.charmap[l.objId.toString()];s.dellBuff(l);n.push(l.objId)}this.recordTimeState(e,n);this.currRvo.steps.push(e)};i.prototype.recordUseBackNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=6;e.time=t.usetime;e.data=t;e.resp=t;var i=[];for(var n=0,r=t.hps.length;n<r;n++){var o=t.hps[n];var a=this.currRvo.charmap[o.tar.toString()];a.dellEff(o);i.push(o.tar)}for(var n=0,r=t.buff.length;n<r;n++){var s=t.buff[n];var a=this.currRvo.charmap[s.objId.toString()];a.dellBuff(s);i.push(s.objId)}this.recordTimeState(e,i);this.currRvo.steps.push(e)};i.prototype.recordCallSummonNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=8;e.time=t.usetime;e.data=t;e.resp=t;var i=[];for(var n=0,r=t.summon.length;n<r;n++){var o=t.summon[n];var a=new l;a.uid=o.objId;a.name="召唤_"+csv.MonsterProxy.getMonsterName(o.monsterId)+n;a.pos=o.pos;a.camp=o.camp;a.hp=o.hp.toNumber();a.maxhp=o.maxhp.toNumber();a.mp=o.mp.toNumber();a.maxmp=o.maxmp.toNumber();a.bosummon=true;a.showstep=e.step;this.currRvo.charmap[a.uid.toString()]=a;if(!this.currRvo.camps[a.camp]){this.currRvo.camps[a.camp]=[]}this.currRvo.camps[a.camp].push(a);i.push(a.uid)}this.recordTimeState(e,i);this.currRvo.steps.push(e)};i.prototype.recordEndTimeSummonNtf=function(t){if(!this.currRvo){return}var e=new u;e.step=this.currRvo.steps.length+1;e.type=9;e.time=t.usetime;e.data=t;e.resp=t;var i=this.currRvo.charmap[t.objId.toString()];i.hidestep=e.step;this.recordTimeState(e,[t.objId]);this.currRvo.steps.push(e)};i.prototype.recordBattleAttributeNoti=function(t){if(!this.currRvo){return}var e=this.currRvo.charmap[t.uid.toString()];if(!e){return}var i=new u;i.step=this.currRvo.steps.length+1;i.type=5;i.time=t.usetime;var n=[];if(!e.initAttris){e.initAttris=t.attribute}for(var r=1,o=e.attris.length;r<o;r++){var a=e.attris[r];var s=t.attribute[r];if(a!=s){n.push({id:r,value:s-a})}}i.data={uid:t.uid,changes:n};i.resp=t;e.attris=t.attribute;this.recordTimeState(i,[]);this.currRvo.steps.push(i)};i.prototype.recordBattleEndNtf=function(t){if(!this.currRvo){return}this.tVo.server=t.usetime;this.totalServer+=this.tVo.server;this.tVo.totalServer=this.totalServer;this.currRvo.usetime=t.usetime;this.currRvo=null;this.event(i.RECORD_REFRESH)};i.RECORD_REFRESH="record_refresh";i.TIME_REFRESH="time_refresh";i.battleType={1:"挂机",2:"野外Boss副本",3:"世界Boss副本",4:"VIPBoss副本",5:"山神试炼",6:"迷镜宫",7:"主线爬塔",8:"勇者挑战",9:"精英挑战",10:"pvp世界boss",11:"切磋",12:"竞技场",13:"七色山",14:"守护葫芦",15:"pvp家园",16:"转职boss",17:"隐藏副本",18:"无底妖洞",19:"山中救蝶",20:"九重妖塔",21:"葫芦岛BOSS",22:"葫芦岛普通",23:"帮会争霸",24:"拯救七娃",25:"神山地牢",26:"宠物秘境",27:"探宝",28:"关卡战报",29:"山洞探宝战报",30:"葫芦秘境战报",31:"洞府福源",32:"新竞技场"};i.effectType={0:"技能miss",1:"连击",2:"致命",3:"无视",4:"暴击",5:"破击",6:"幸运",7:"普通伤害",8:"水伤害",9:"火伤害",10:"雷伤害",11:"毒伤害",12:"技能回血",13:"技能回蓝",14:"被动回血",15:"被动回蓝",16:"技能消耗",17:"反伤",18:"持续伤害",19:"持续治疗",20:"护盾吸收",21:"免疫伤害",22:"自动扣血条",23:"重生",24:"符咒回血",25:"使用外界功能回血（或道具）",26:"使用外界功能回蓝（或道具）",27:"天赋触发回血",28:"天赋触发扣血",29:"天赋肉盾扣血",30:"天赋血量设置",31:"天赋免疫伤害",32:"天赋换血",33:"天赋回蓝",34:"爆炸护盾反弹",35:"天赋清空蓝",36:"vip神威回血/复活",37:"vip神威秒杀",38:"燃烧掉血",39:"天赋减蓝",40:"分摊伤害",100:"前端假效果"};return i}(app.ModelBase);o.BattleRecordCenter=t;var n=function(){function t(){this.charmap={};this.camps={};this.steps=[]}return t}();o.BattleRecordVO=n;var e=function(){function t(){this.buffs={};this.attris=[]}t.prototype.dellEff=function(t){this.hp=t.hp.toNumber();this.maxhp=t.maxhp.toNumber();this.mp=t.mp.toNumber();this.maxmp=t.maxmp.toNumber()};t.prototype.refreshBuff=function(t){this.buffs={};for(var e=0,i=t.length;e<i;e++){this.dellBuff(t[e])}};t.prototype.dellBuff=function(t){if(t.flag==0){if(this.buffs[t.bid]){this.buffs[t.bid]=null;delete this.buffs[t.bid]}}else{if(this.buffs[t.bid]){this.buffs[t.bid].bid=t.bid;this.buffs[t.bid].buffid=t.buffId;this.buffs[t.bid].level=t.level}else{var e=new BuffData;e.objId=t.objId;e.flag=t.flag;e.bid=t.bid;e.level=t.level;e.buffId=t.buffId;this.buffs[t.bid]=e}}};t.prototype.getDelBuffArr=function(t){var e=[];for(var i in this.buffs){var n=this.buffs[i];var r=false;for(var o=0,a=t.length;o<a;o++){var s=t[o];if(n.bid==s.bid){r=true;break}}if(!r){n.flag=0;e.push(n)}}return e};t.prototype.getGetBuffArr=function(t){var e=[];for(var i=0,n=t.length;i<n;i++){var r=t[i];var o=false;for(var a in this.buffs){var s=this.buffs[a];if(s.bid==r.bid){o=true;break}}if(!o){e.push(r)}}return e};t.prototype.getBuffArr=function(){var t=[];for(var e in this.buffs){var i=this.buffs[e];t.push(i)}return t};return t}();o.BattleRecordCharacterVo=e;var s=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);o.BattleRecordRoleVo=s;var l=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(e);o.BattleRecordMonsterVo=l;var u=function(){function t(){this.states=[]}return t}();o.BattleRecordStepVo=u;var a=function(){function t(){this.buffs=[];this.boChange=true;this.attris=[]}t.prototype.recordState=function(t){this.uid=t.uid;this.hp=t.hp;this.maxhp=t.maxhp;this.mp=t.mp;this.maxmp=t.maxmp;this.buffs=t.getBuffArr();this.attris=t.attris};return t}();o.BattleRecordStateVo=a;var r=function(){function t(){this.bid=0;this.client=0;this.server=0;this.totalClient=0;this.totalServer=0}return t}();o.GmBattleTimeVo=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.robotMap={};return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){var t=app.Config.getResById("robot.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};t.prototype.getCfg=function(t){return this.cfgMap[t]};t.prototype.getArr=function(){return this.cfgArr};t.prototype.getTypeRobot=function(t,e){if(e===void 0){e=1}if(!this.robotMap[t]){this.robotMap[t]=[];for(var i=0,n=this.cfgArr.length;i<n;i++){if(parseInt(this.cfgArr[i].usage)==t){this.robotMap[t].push(this.cfgArr[i])}}}var r=[];var o=this.robotMap[t].length;var a=[];if(o<e){e=o}while(e>0){var s=game.SceneModel.random(0,o);if(a.indexOf(s)==-1){a.push(s);r.push(this.robotMap[t][s]);e--}}return r};t.SINGLE_KEY="csv.RobotProxy";t.ENUM_TYPE={BOSS_YEWAI:1};return t}(app.ModelBase);t.RobotProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("status.csv");this.cfgMap=t.getMap("id","level");this.cfgArr=t.getArray();var e=app.Config.getResById("status_item.csv");this.statusItemCfgMap=e.getMap("id");this.statusItemCfgArr=e.getArray();var i=app.Config.getResById("status_bless.csv");this.statusBlessCfgMap=i.getMap("id");var n=app.Config.getResById("dengjishanghai.csv");this.djshArr=n.getArray()};e.prototype.formatCfg=function(t){if(typeof t=="number"){t=this.getCfg(t)}else if(typeof t=="string"){t=this.getCfg(parseInt(t))}return t};e.prototype.getCfg=function(t,e){if(e===void 0){e=1}if(!this.cfgMap[t]||!this.cfgMap[t][e]){console.log("status----",t)}return this.cfgMap[t][e]};e.prototype.getArr=function(){return this.cfgArr};e.prototype.getStatusItem=function(t){return this.statusItemCfgMap[t]};e.prototype.getStatusItemArr=function(){return this.statusItemCfgArr};e.prototype.getStatusBlessById=function(t){return this.statusBlessCfgMap[t]};e.prototype.getStatusBuffIcon=function(t){for(var e=0,i=this.statusItemCfgArr.length;e<i;e++){var n=this.statusItemCfgArr[e];if(n.mutexgroup==t){return n.iconid}}return""};e.prototype.getDjshBuff=function(t){for(var e=0,i=this.djshArr.length;e<i;e++){var n=this.djshArr[e];var r=app.str2Array(n.level,"-");if(t>=parseInt(r[0])&&t<=parseInt(r[1])){return n.buffid}}return null};e.SINGLE_KEY="csv.StatusProxy";return e}(app.ModelBase);t.StatusProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){var t=this.dataSource;app.ProtocolRequest.ChargeBelongReq(t.uid)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){if(csv.MapProxy.isInKuaFuMap()){this.mingzi.text=game.Context.getSerName(t.cursvrid)+t.uname}else{this.mingzi.text=t.uname}if(t.fflag==1){this.jianimg.visible=true;this.mingzi.color=game.STYLES.WHITE}else if(t.fflag==2){this.jianimg.visible=true;this.mingzi.color=game.STYLES.RED_COLOR}else{this.jianimg.visible=false;this.mingzi.color=game.STYLES.WHITE}};e.SINGLE_KEY="battle.BattleEnemyItem";return e}(ui.bosszhandou.diduiliebiaoitemUI);t.BattleEnemyItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=Laya.stage.width-this.width;this.y=60+ScreenAdapter.OFFSET_Y;this._model=s.BattleModel.getIns()};e.prototype.onDisplay=function(){this._model.on(s.BattleModel.INFO_CHANGE,this,this.refreshAll);dailytask.DailyTaskModel.getIns().on(dailytask.DailyTaskModel.MJG_EXP_CHANGE,this,this.refreshMjgExp);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(s.BattleModel.INFO_CHANGE,this,this.refreshAll);dailytask.DailyTaskModel.getIns().off(dailytask.DailyTaskModel.MJG_EXP_CHANGE,this,this.refreshMjgExp)};e.prototype.refreshAll=function(){switch(this._model.battleType){case s.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:this.titlename.skin="bosszhandou/txt_title_shanshenshilian.png";var t=csv.DungeonProxy.getIns().getSsslCfg(this._model.battleval[0]);var e=app.str2Array(t.monstersetbase,";").length;this.jieduanlabshuzhi.text=this._model.battleval[2]+"/"+e;this.shaguaishuzhi.text=this._model.battleval[3].toString();this.shuzhilab.text="";this.jieduanlab.text=app.getLang("dungeon_sssl_tips2");this.shaguailab.text=app.getLang("dungeon_sssl_tips3");this.wodelab.text="";break;case s.BattleConst.BATTLE_TYPE.DUNGEON_MJG:this.titlename.skin="bosszhandou/txt_title_jingmigong.png";var i=csv.DungeonProxy.getIns().getMjgCfg(this._model.battleval[0]);var n=csv.DungeonProxy.getIns().getMjgCfg(this._model.battleval[0]-1);var r=i.round;var o=main.MapMjgControl.getIns().maxLvl;if(r-1>main.MapMjgControl.getIns().maxLvl){o=r-1}var a=0;if(n&&n.level==i.level){a=n.round_exp}this.jieduanlabshuzhi.text=app.getLang("jiesuan_yaodong_1",r);this.shaguaishuzhi.text=app.getLang("jiesuan_yaodong_1",o);this.refreshMjgExp();this.jieduanlab.text=app.getLang("dungeon_sssl_tips2");this.shaguailab.text=app.getLang("dungeon_mjg_tips2");this.wodelab.text=app.getLang("dungeon_sssl_tips4");break}};e.prototype.refreshMjgExp=function(){this.shuzhilab.text=game.MoneyModel.format(main.MapMjgControl.getIns().exp)};e.SINGLE_KEY="battle.BattleLevelInfoView";e.WIDTH=230;return e}(ui.bosszhandou.shanshenshilianmianbanUI);s.BattleLevelInfoView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.y=217+ScreenAdapter.OFFSET_Y;this._model=i.BattleModel.getIns()};e.prototype.onAniEnd=function(){if(this.dataSource instanceof Laya.Handler){this.dataSource.run()}app.ViewManager.toggleView(i.BattleLevelView,app.AppContainer.uiLayer,-1)};e.prototype.onDisplay=function(){this.ani1.on(Laya.Event.COMPLETE,this,this.onAniEnd);this.ani1.play(0,false);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.ani1.stop();this.ani1.off(Laya.Event.COMPLETE,this,this.onAniEnd)};e.prototype.refreshAll=function(){switch(this._model.battleType){case i.BattleConst.BATTLE_TYPE.DUNGEON_MJG:var t=csv.DungeonProxy.getIns().getMjgCfg(this._model.battleval[0]);this.guanshu.value=t.round.toString();break;case i.BattleConst.BATTLE_TYPE.GOD_DUNGEON:this.guanshu.value=this._model.battleval[0]-1+"";break;default:this.guanshu.value=this._model.battleval[0]+""}};e.SINGLE_KEY="battle.BattleLevelView";return e}(ui.bosszhandou.guanshuUI);i.BattleLevelView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(L){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=L.BattleModel.getIns()};e.prototype.onDisplay=function(){this.x=(Laya.stage.width-this.width)/2;this.y=247+ScreenAdapter.OFFSET_Y;this.ani1.play(0,false);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);Laya.timer.clear(this,this.fly);Laya.Tween.clearAll(this)};e.prototype.refreshAll=function(){this.startLoopTime()};e.prototype.fly=function(t,e){Laya.Tween.to(this,{x:t,y:e},500)};e.prototype.startLoopTime=function(){this.lblLevel.text="";var t=Laya.stage.width-this.width;var e=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM;switch(this._model.battleType){case L.BattleConst.BATTLE_TYPE.DUNGEON_NINE_TOWER:var i=this._model.battleval[0];var n=this._model.battleval[1];var r=csv.TowerMonsterProxy.getIns().getBossByType(i,n-1);if(r){this._maxTime=parseInt(r.lasttime);this.lblLevel.text=app.getLang(r.name)}else{this._maxTime=60}this._startTime=this._model.battleval[2];e-=60;break;case L.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:var o=csv.DungeonProxy.getIns().getSsslCfg(this._model.battleval[0]);this._maxTime=o.maxtime;this._startTime=this._model.battleval[1];e-=L.BattleScoreView.H;break;case L.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:var a=csv.ZhenjiuQiWaProxy.getIns().saveRuleList[0].countdown;this._maxTime=a;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.GOD_DUNGEON:var s=goddungeon.GodDungeonModel.getIns().getPlayerLayerVo().ccfg.battletime;this._maxTime=s;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.DUNGEON_MJG:var l=csv.DungeonProxy.getIns().getMjgCfg(this._model.battleval[0]);this._maxTime=l.maxtime;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.ZHUXIAN:var u=csv.DungeonProxy.getIns().getZxrwCfg(this._model.battleval[0]);this._maxTime=parseInt(u.maxtime);this._startTime=this._model.battleval[1];this.lblLevel.text=app.getLang("hlxd_end",u.title,u.round);break;case L.BattleConst.BATTLE_TYPE.BRAVE_CHALLENGE:var p=csv.DungeonProxy.getIns().getBraveCfg(this._model.battleval[0]);this._maxTime=parseInt(p.maxtime);this._startTime=this._model.battleval[1];this.lblLevel.text=app.getLang("第{0}关",p.id);break;case L.BattleConst.BATTLE_TYPE.ELITE_CHALLENGE:var h=csv.DungeonProxy.getIns().getEliteCfg(this._model.battleval[0]);this._maxTime=parseInt(h.maxtime);this._startTime=this._model.battleval[1];this.lblLevel.text=app.getLang("第{0}关",h.id);break;case L.BattleConst.BATTLE_TYPE.DUNGEON_MOUNTAIN:var c=csv.MountainProxy.getIns().getCfg(this._model.battleval[0]);this._maxTime=parseInt(c.maxtime);this._startTime=this._model.battleval[1];this.lblLevel.text=app.getLang("mountain_tips15",c.id);break;case L.BattleConst.BATTLE_TYPE.TRANS:var f=csv.DungeonProxy.getIns().getTransCfg(this._model.battleval[0]);this._maxTime=parseInt(f.times);this._startTime=this._model.battleval[2];break;case L.BattleConst.BATTLE_TYPE.PET_DUNGEON:var g=csv.DungeonProxy.getIns().getCwmjCfg(this._model.battleval[0]);this._maxTime=parseInt(g.maxtime);this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.HUNT_RICH:var d=actHuntRich.ActHuntRichModel.getIns().getFightTime(this._model.battleval[0]);this._maxTime=d;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.FU_YUAN:var y=csv.YuanshenProxy.getIns().get_shijianCfgMap(this._model.battleval[0]).time;this._maxTime=y;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.GUANKA_PASS:var m=csv.GuajiProxy.getIns().getCfgGuanqia(this._model.battleval[0]);var v=csv.GuajiProxy.getIns().getPart(m.id);this.lblLevel.text=app.getLang("xyzl_end",m.chapter,v.index);this._maxTime=guaji.GuajiModel.getIns().getMaxtime();this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.BOSS_CAVE:this._maxTime=csv.BossProxy.getIns().getCaveBossCfg(this._model.battleval[0]).timelimit;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.BOSS_SecreArea:this._maxTime=60;var b=csv.GuajiProxy.getIns().getMijingCfg(this._model.battleval[0]);if(b){this.lblLevel.text=app.getLang(b.name);this._maxTime=csv.GuajiProxy.getIns().getCfgGuanqia(b.guanqia).maxtime}this._startTime=L.BattleManager.getIns().battleStartTime;break;case L.BattleConst.BATTLE_TYPE.MJ_LOCK:this._maxTime=csv.MjHoleProxy.getIns().getCfgMapItem(this._model.battleval[0]).battletime;this._startTime=this._model.battleval[1];break;case L.BattleConst.BATTLE_TYPE.DEFEND_HULU:this._maxTime=csv.ActivityFunction.getIns().getCloseTime(csv.ActivityFunction.ENUM.SHOU_HU)-game.Context.getServerTime();this._startTime=game.Context.getServerTime();break;case L.BattleConst.BATTLE_TYPE.KFXL_PVE:this._maxTime=game.Config.getIntParams(1130);this._startTime=game.Context.getServerTime();break;case L.BattleConst.BATTLE_TYPE.FUMO:var _=csv.FumoEarthProxy.getIns().getCfg(this._model.battleval[0]);this._maxTime=parseInt(_.maxtime);this._startTime=this._model.battleval[1];this.lblLevel.text=app.getLang("fumobaoku_tips15",_.id);break}if(!this.lblLevel.inputText||this.lblLevel.inputText==""){this.di.height=55}else{this.di.height=90}var I=game.Context.getServerTime()-L.BattleManager.getIns().battleStartTime;var w=game.Context.getServerTime()-(this._startTime+I);this._delayTime=w>0?this._maxTime-w:this._maxTime;this._recodeTime=app.TimerRewriter.currTimer;this.daojishiclip.value=util.TimeUtil.formatTime(this._delayTime,false);Laya.timer.loop1(1e3/app.TimerRewriter.battleScale,this,this.loopFreshTime);Laya.timer.once(500,this,this.fly,[t,e])};e.prototype.loopFreshTime=function(){var t=this._delayTime-Math.floor((app.TimerRewriter.currTimer-this._recodeTime)/1e3);if(t>=0){this.daojishiclip.value=util.TimeUtil.formatTime(t,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.BattleLimitTimeView";e.H1=90;e.H2=60;return e}(ui.bosszhandou.bossdaojishiUI);L.BattleLimitTimeView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=L.BattleModel.getIns()};e.prototype.onDisplay=function(){this.x=(Laya.stage.width-this.width)/2;switch(this._model.battleType){case L.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:this.y=zhenjiuqiwa.TIME_LABEL_OFFSET_Y;break;default:this.y=247;break}this.ani1.play(0,false);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);Laya.timer.clear(this,this.fly);Laya.Tween.clearAll(this);if(this.tween){this.tween.clear()}};e.prototype.refreshAll=function(){this.startLoopTime()};e.prototype.fly=function(t,e){this.tween=Laya.Tween.to(this,{x:t,y:e},500)};e.prototype.startLoopTime=function(){var t=0;var e=Laya.stage.height-chat.ChatMiniView.HEIGHT-this.height;switch(this._model.battleType){case L.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:var i=csv.ZhenjiuQiWaProxy.getIns().saveRuleList[0].countdown;this._maxTime=i;this._startTime=this._model.battleval[1];e=Laya.stage.height-this.height-chat.ChatMiniView.HEIGHT;break}var n=game.Context.getServerTime()-L.BattleManager.getIns().battleStartTime;var r=game.Context.getServerTime()-(this._startTime+n);this._delayTime=r>0?this._maxTime-r:this._maxTime;this._recodeTime=app.TimerRewriter.currTimer;this.daojishiclip.value=util.TimeUtil.formatTime(this._delayTime,false);Laya.timer.loop1(1e3,this,this.loopFreshTime);Laya.timer.once(500,this,this.fly,[t,e])};e.prototype.loopFreshTime=function(){var t=this._delayTime-Math.floor((app.TimerRewriter.currTimer-this._recodeTime)/1e3);if(t>=0){this.daojishiclip.value=util.TimeUtil.formatTime(t,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.BattleShortLimitTimeView";return e}(ui.bosszhandou.bosshuodongdaojishi2UI);L.BattleShortLimitTimeView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=0;this.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-this.height-ScreenAdapter.OFFSET_BOTTOM;this._model=r.BattleModel.getIns()};e.prototype.onDisplay=function(){this._model.on(r.BattleModel.INFO_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(r.BattleModel.INFO_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){switch(this._model.battleType){case r.BattleConst.BATTLE_TYPE.DUNGEON_MJG:var t=csv.DungeonProxy.getIns().getMjgCfg(this._model.battleval[0]);var e=csv.DungeonProxy.getIns().getLevelMjgArr(t.level);var i=t.round;var n=main.MapMjgControl.getIns().maxLvl;if(i-1>main.MapMjgControl.getIns().maxLvl){n=i-1}this.guanshuclip.value=t.round.toString();this.shalab.text=app.getLang("历史最高记录：{0}关",n);this.miaoshulab.text=app.getLang("勇闯{0}关获得海量经验",e.length);break}};e.SINGLE_KEY="battle.BattleRoundView";e.HEIGHT=112;return e}(ui.bosszhandou.guanshuviewUI);r.BattleRoundView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM;this._model=n.BattleModel.getIns();this.shan.visible=false;this.shan.on(Laya.Event.COMPLETE,this,this.onAniEnd)};e.prototype.onAniEnd=function(){this.shan.stop();this.shan.visible=false};e.prototype.onDisplay=function(){this.pingfen.value="";this._model.on(n.BattleModel.INFO_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(n.BattleModel.INFO_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){switch(this._model.battleType){case n.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:var t=csv.DungeonProxy.getIns().getScore(this._model.battleval[0],this._model.battleval[3]);var e=csv.DungeonProxy.getIns().getNextScore(this._model.battleval[0],this._model.battleval[3]);var i=parseInt(e[0])-this._model.battleval[3];if(this.pingfen.value!=""&&t!=this.pingfen.value){this.shan.visible=true;this.shan.play(0)}this.pingfen.value=t;if(i<=0){this.shalab.text=app.getLang("dungeon_sssl_tips5")}else{this.shalab.text=app.getLang("dungeon_sssl_tips1",i,e[1])}break}};e.SINGLE_KEY="battle.BattleScoreView";e.H=107;return e}(ui.bosszhandou.pingjiaviewUI);n.BattleScoreView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2};e.prototype.onAni2End=function(){this.ani2.gotoAndStop(0);app.ViewManager.toggleView(e,app.AppContainer.uiLayer,-1)};e.prototype.onDisplay=function(){switch(i.BattleModel.getIns().battleType){case i.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:this.y=zhenjiuqiwa.TIME_LABEL_OFFSET_Y+ScreenAdapter.OFFSET_Y;break;default:this.y=260+ScreenAdapter.OFFSET_Y;break}this.ani2.on(Laya.Event.COMPLETE,this,this.onAni2End);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.ani2.stop();this.ani2.off(Laya.Event.COMPLETE,this,this.onAni2End);Laya.timer.clear(this,this.loopFreshTime)};e.prototype.refreshAll=function(){this._delayTime=this.dataSource[0];this.startLoopTime()};e.prototype.startLoopTime=function(){this._recodeTime=app.TimerRewriter.currTimer;this.daojishicilp.value=this._delayTime.toString();this.numShine.play(0,false);Laya.timer.loop1(1e3,this,this.loopFreshTime);this.loopFreshTime()};e.prototype.loopFreshTime=function(){this.numShine.play(0,false);var t=this._delayTime-Math.floor((app.TimerRewriter.currTimer-this._recodeTime)/1e3);if(t>0){this.daojishicilp.value=t.toString()}else{this.daojishicilp.value=t.toString();Laya.timer.clear(this,this.loopFreshTime);this.ani2.play(0,false);this.dataSource[1].run()}};e.SINGLE_KEY="battle.BattleStartTimeView";return e}(ui.bosszhandou.daojishikaishitiaozhanUI);i.BattleStartTimeView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.y=217+ScreenAdapter.OFFSET_Y;this._model=i.BattleModel.getIns()};e.prototype.onAniEnd=function(){if(this.dataSource instanceof Laya.Handler){this.dataSource.run()}app.ViewManager.toggleView(i.BattleZhuxianLevelView,app.AppContainer.uiLayer,-1)};e.prototype.onDisplay=function(){this.ani1.on(Laya.Event.COMPLETE,this,this.onAniEnd);this.ani1.play(0,false);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.ani1.stop();this.ani1.off(Laya.Event.COMPLETE,this,this.onAniEnd)};e.prototype.refreshAll=function(){if(this._model.battleType==i.BattleConst.BATTLE_TYPE.ZHUXIAN){var t=csv.DungeonProxy.getIns().getZxrwCfg(this._model.battleval[0]);this.guanshu.value=t.chapter+"-"+t.round;this.guandi.skin="bosszhandou/bg_zhandou_guanshu_huluxiongdi.png"}else if(this._model.battleType==i.BattleConst.BATTLE_TYPE.GUANKA_PASS){var t=csv.GuajiProxy.getIns().getCfgGuanqia(this._model.battleval[0]);var e=csv.GuajiProxy.getIns().getPart(t.id);this.guandi.skin="bosszhandou/bg_zhandou_guanshu_xiangyaozhilu.png";this.guanshu.value=t.chapter+"-"+e.index}};e.SINGLE_KEY="battle.BattleZhuxianLevelView";return e}(ui.bosszhandou.guanshu01viewUI);i.BattleZhuxianLevelView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=boss.BossModel.getIns();this.on(Laya.Event.CLICK,this,this.onFight);this.x=0;this.y=340+ScreenAdapter.OFFSET_Y};e.prototype.onFight=function(){var t=this._model.getBelongInfo();if(t){if(!Uint64.equal(t.uid,game.Context.mainRoleId)){app.ProtocolRequest.ChargeBelongReq(t.uid)}}};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_BELONG_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_BELONG_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this._model.getBelongInfo();this.xuetiao.value=1;if(t){this.imgbang.skin="";if(Uint64.equal(t.uid,game.Context.mainRoleId)){this.imgbang.skin="bosszhandou/bg_wo.png"}else if(!Uint64.equal(t.guildID,Uint64.ZERO)){var e=guild.GuildModel.getIns().getGuildData();if(e&&Uint64.equal(t.guildID,e.guildInf.guildID)){this.imgbang.skin="bosszhandou/bg_banghui.png"}}if(csv.MapProxy.isInKuaFuMap()){this.shoulingname.text=app.getLang("归属：")+game.Context.getSerName(t.cursvrid)+t.uname}else{this.shoulingname.text=app.getLang("归属：")+t.uname}this.zhanliclips.value=t.score.toNumber()+"";this.xuetiao.value=t.hp.toNumber()/t.maxhp.toNumber();this.touxiangimg.skin=role.RoleVO.getHeadIconUrl(t.classSkin)}else{this.shoulingname.text=app.getLang("归属：暂无");this.zhanliclips.value="0";this.xuetiao.value=0;this.touxiangimg.skin=""}};e.SINGLE_KEY="battle.BossBelongView";return e}(ui.bosszhandou.bossrenwuxuetiaoUI);t.BossBelongView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.y=200+ScreenAdapter.OFFSET_Y;this.zOrder=app.AppContainer.UI_LAYER_NUME.TOP};e.prototype.onPlayEnd=function(){};e.prototype.onDisplay=function(){this.ani1.on(Laya.Event.COMPLETE,this,this.onPlayEnd);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.ani1.off(Laya.Event.COMPLETE,this,this.onPlayEnd)};e.prototype.refreshAll=function(){this.ani1.play(0,false);var t=csv.MonsterProxy.getIns().getCfg(this.dataSource);if(t){this.touxiangimg.skin=csv.MonsterProxy.getMonsterHeadUrl(t);this.namelab.text=csv.MonsterProxy.getMonsterLvName(t);var e=n.BattleModel.getIns().battleval[0];var i=csv.GuajiProxy.getIns().getCfg(e);if(i){this.wuqilab.text=app.getLang(i.bossweapon)}}};e.SINGLE_KEY="battle.BossComingView";return e}(ui.bosszhandou.laixiUI);n.BossComingView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.hpMediator=new HpBarMediator(this.xuetiao1,this.xuetiao2,this.xuetiaotouming,this.xuetiaodi,this.xuetiaoshu);this._model=i.BattleModel.getIns();this.y=230+ScreenAdapter.OFFSET_Y};e.prototype.onDisplay=function(){this.updateInfo();i.BattleModel.getIns().on(i.BattleModel.EVENT_SET_BOSS,this,this.updateInfo)};e.prototype.updateInfo=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.hpMediator.setmock();i.BattleModel.getIns().off(i.BattleModel.EVENT_SET_BOSS,this,this.updateInfo)};e.prototype.refreshAll=function(){if(this._model.bossInfo){this.setBossInfo(this._model.bossInfo.monsterId,this._model.bossInfo.maxhp,this._model.bossInfo.hp)}};e.prototype.setBossInfo=function(t,e,i){var n=csv.MonsterProxy.getIns().getCfg(t);this.touxiangimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.shoulingname.text=csv.MonsterProxy.getMonsterLvName(n);this.hpMediator.init(e,parseInt(n.hpnum));this.hpMediator.initCurrHp(i)};e.prototype.setBossHp=function(t){this.hpMediator.currHp=t};e.SINGLE_KEY="battle.BossHpView";return e}(ui.bosszhandou.bossxuetiaoUI);i.BossHpView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.ziji.visible=true;if(csv.MapProxy.isInKuaFuMap()){this.namelab.x=0;this.shuzhilab.x=this.width-this.shuzhilab.width;this.namelab.text=e+" "+game.Context.getSerName(t.cursvrid)+t.uname}else{this.namelab.x=10;this.shuzhilab.x=this.width-this.shuzhilab.width-10;this.namelab.text=e+" "+t.uname}this.ziji.skin=e&1?"public/bg_mingcidi_1.png":"public/bg_mingcidi_2.png";this.shuzhilab.text=game.MoneyModel.format(t.hurt.toNumber());if(n.BattleModel.getIns().battleType==n.BattleConst.BATTLE_TYPE.DEFEND_HULU){var i=guild.GuildModel.getIns().guildVO?guild.GuildModel.getIns().guildVO.guildInf.guildID:Uint64.ZERO;if(Uint64.equal(t.uid,i)){this.namelab.color=game.STYLES.YELLOW_COLOR}else{this.namelab.color=game.STYLES.DESC_TXT_COLOR}}else{if(Uint64.equal(t.uid,game.Context.mainRoleId)){this.namelab.color=game.STYLES.YELLOW_COLOR}else{this.namelab.color=game.STYLES.DESC_TXT_COLOR}}};e.SINGLE_KEY="battle.BossHurtRankItem";return e}(ui.bosszhandou.shanghaipaihangitemUI);n.BossHurtRankItem=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihanglist.itemRender=n.BossHurtRankItem;this.paihanglist.renderHandler=new Laya.Handler(this,this.onRender);this.paihanglist.scrollRectOffY=5;this.chakanlab.on(Laya.Event.CLICK,this,this.onShowReward);this.x=Laya.stage.width-this.width;this.y=main.MoneyView.getIns().height+5+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns()};e.prototype.onShowReward=function(){switch(n.BattleModel.getIns().battleType){case n.BattleConst.BATTLE_TYPE.BOSS_YEWAI:var t=csv.BossProxy.getIns().getCfg(this._model.battleBossId);app.ViewManager.toggleDialog(boss.BossRewardView,1,0,t.dropshow);break;case n.BattleConst.BATTLE_TYPE.YAODONG:app.ViewManager.toggleDialog(n.YaodongRewardView,1,0,n.BattleModel.getIns().battleval[0]);break}};e.prototype.onRender=function(t,e){t.setData(t.dataSource,e+1)};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);boss.BossModel.getIns().clearHurtInfo()};e.prototype.refreshAll=function(){var t=boss.BossModel.getIns().getHurtInfo();var e=[];var i=0;if(t){i=t.selfhurt.toNumber();e=e.concat(t.rankinf)}switch(n.BattleModel.getIns().battleType){case n.BattleConst.BATTLE_TYPE.DEFEND_HULU:this.wodelab.text=app.getLang("gourddefend_tips1",i);this.lbldes.text=app.getLang("gourddefend_tips2");this.chakanlab.visible=false;this.lbldes.x=57;break;default:this.wodelab.text=app.getLang("boss_des_5",game.MoneyModel.format(i));this.lbldes.text=app.getLang("boss_des_6");this.chakanlab.visible=true;this.lbldes.x=23}this.paihanglist.array=e};e.SINGLE_KEY="battle.BossHurtRankView";return e}(ui.bosszhandou.bossshanghaipaihangUI);n.BossHurtRankView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.guishubtn.on(Laya.Event.CLICK,this,this.onClick);this.x=(Laya.stage.width-this.width)/2;this.y=835+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns()};e.prototype.onClick=function(){var t=this._model.getBelongInfo();app.ProtocolRequest.ChargeBelongReq(t.uid)};e.prototype.onChange=function(){var t=this._model.getBelongInfo();this.visible=t&&!Uint64.equal(game.Context.mainRoleId,t.uid);if(t&&Uint64.equal(game.Context.mainRoleId,t.uid)){this.guishubtn.visible=false;this.zhenduozhong.visible=false;this.zhenduozhong.stop()}else{if(this._model.battleState&&this._model.battleState.fnum>0){this.guishubtn.visible=false;this.zhenduozhong.visible=true;this.zhenduozhong.play(0,true)}else{this.guishubtn.visible=true;this.zhenduozhong.visible=false;this.zhenduozhong.stop()}}};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_BATTLE_CHANGE,this,this.onChange);this._model.on(boss.BossEvent.BOSS_BELONG_CHANGE,this,this.onChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.on(boss.BossEvent.BOSS_BATTLE_CHANGE,this,this.onChange);this._model.off(boss.BossEvent.BOSS_BELONG_CHANGE,this,this.onChange)};e.prototype.refreshAll=function(){};e.SINGLE_KEY="battle.BossRobView";return e}(ui.bosszhandou.qiangduoanniuUI);t.BossRobView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BattleModel.getIns();this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);Laya.Tween.clearAll(this)};e.prototype.refreshAll=function(){this.startLoopTime()};e.prototype.startLoopTime=function(){this._leastTime=boss.BossModel.getIns().getWRunTime();this.daojishiclip.value=util.TimeUtil.formatTime(this._leastTime,false);Laya.timer.loop1(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){this._leastTime=boss.BossModel.getIns().getWRunTime();if(this._leastTime>=0){this.daojishiclip.value=util.TimeUtil.formatTime(this._leastTime,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.BossRunTimeView";return e}(ui.bosszhandou.bossdaojishi2UI);i.BossRunTimeView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnUse.clickHandler=new Laya.Handler(this,this.onUse);this.goumaibtn.clickHandler=new Laya.Handler(this,this.onBuy)};e.prototype.onUse=function(){var t=this.dataSource.getItemId();var e=game.GridsModel.getIns().getItemByItemId(t);if(e){game.ItemUtil.use(e)}};e.prototype.onBuy=function(){var t=csv.MallProxy.getIns().getCfgByItemID(csv.MallProxy.ENUM_TYPE.FUBEN_EXP,this.dataSource.getItemId());if(t&&game.GridsModel.getIns().hasEnoughItems(t.trueprice,false,true)){shop.ShopModel.getIns().buy(t,t.num)}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=t.getItemId();var i=csv.MallProxy.getIns().getCfgByItemID(csv.MallProxy.ENUM_TYPE.FUBEN_EXP,e);var n=game.GridsModel.getIns().getItemCount(e);this.daoju.setData(t);this.wenben.text=i?app.getLang(i.word):t.getName();if(n>0){this.daoju.shuzi.color=game.STYLES.GREEN_COLOR_S;this.btnUse.visible=true;this.goumaibox.visible=false}else{this.daoju.shuzi.color=game.STYLES.RED_COLOR_S;this.jinbi.parserIcon(i.trueprice,this.shuzhi);this.btnUse.visible=false;this.goumaibox.visible=true}this.daoju.shuzi.text=n+""};e.SINGLE_KEY="battle.ExpUpItem";return e}(ui.bosszhandou.jingyanyaoshuiitemUI);t.ExpUpItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.yaoshuilist.itemRender=i.ExpUpItem;this.yaoshuilist.renderHandler=new Laya.Handler(this,this.onRender);this.wenziimg.skin="bosszhandou/bg_zhandou_tishi_wenzi_1.png"};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){game.RoleModel.getIns().on(game.RoleModel.EVENTS.PLAYER_BUFF_CHANGE,this,this.refreshAll);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.RoleModel.getIns().off(game.RoleModel.EVENTS.PLAYER_BUFF_CHANGE,this,this.refreshAll);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=false;var e=game.RoleModel.getIns().buffGroup;for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.groupid==1&&r.sitem.length>0){var o=r.sitem[0];var a=r.gtime+o.stime-game.Context.getServerTime();if(a>0){t=true;var s=csv.StatusProxy.getIns().getStatusItem(o.sid);this._leastTime=a;this._bName=app.getLang(s.name);this.startLoopTime()}break}}if(t){this.wenbenbox.visible=true;this.tupianbox.visible=false}else{this.wenbenbox.visible=false;this.tupianbox.visible=true}var l=csv.MallProxy.getIns().getArrayByType(csv.MallProxy.ENUM_TYPE.FUBEN_EXP);var u=game.ItemUtil.parserList(game.Config.getParams(630));for(var i=u.length-1;i>=0;i--){var p=false;for(var h=0,c=l;h<c.length;h++){var f=c[h];if(parseInt(f.item)==u[i].getItemId()){p=true;break}}if(!p){p=game.GridsModel.getIns().hasEnoughItems(u[i])}if(p)continue;u.splice(i,1)}this.yaoshuilist.array=u};e.prototype.startLoopTime=function(){this.shuominglab.text=this._bName+""+util.TimeUtil.formatTime(this._leastTime);Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){this._leastTime--;if(this._leastTime>=0){this.shuominglab.text=this._bName+""+util.TimeUtil.formatTime(this._leastTime)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.ExpUpView";return e}(ui.bosszhandou.jingyanyaoshuitishiUI);i.ExpUpView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.y=230+ScreenAdapter.OFFSET_Y;this._hpZoreHandler=new Laya.Handler(this,this.onHpZore);this.hpMediator=new HpBarMediator(this.xuetiao1,this.xuetiao2,this.xuetiaotouming,this.xuetiaodi,this.xuetiaoshu,this._hpZoreHandler);this._model=i.BattleModel.getIns();this.zOrder=app.AppContainer.UI_LAYER_NUME.TOP};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource;var e=t.getCfg();this.touxiangimg.skin=t.getHeadUrl();this.shoulingname.text=csv.MonsterProxy.getMonsterLvName(e);this.hpMediator.init(t.maxhp,parseInt(e.hpnum));this.hpMediator.initCurrHp(t.hp)};e.prototype.setBossHp=function(t){this.hpMediator.currHp=t};e.prototype.onHpZore=function(){app.ViewManager.toggleView(i.GuajiBossHpView,app.AppContainer.uiLayer,-1)};e.SINGLE_KEY="battle.GuajiBossHpView";return e}(ui.bosszhandou.bossxuetiaoUI);i.GuajiBossHpView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.mouseEnabled=true;this.mouseThrough=false;this.imgjihuo.visible=false;this.itemjineng.visible=false;this.buffImg=new Laya.Image;this.addChild(this.buffImg);this.buffImg.x=this.itemjineng.x;this.buffImg.y=this.itemjineng.y};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.buffImg.skin="res/icon/buff/pkdaren.png";this.labeljineng.text=app.getLang("guild_boss_buffname");var t=this.getBuffValue();this.labelxiaoguo.text=app.getLang("guild_boss_buffdesc",t)};e.prototype.getBuffValue=function(){var t=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.GUILD_BOSS);if(t){var e=t.param3.split(";");for(var i=e.length-1;i>=0;i--){var n=parseInt(e[i].split("-")[0]);var r=parseInt(e[i].split("-")[1]);if(guildboss.GuildBossModel.getIns().role_size>=n){return r*.01}}}return 0};e.SINGLE_KEY="battle.GuildBossBuffTips";return e}(ui.tips.bufftipsUI);t.GuildBossBuffTips=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BattleModel.getIns();this.x=(Laya.stage.width-this.width)/2;this.y=175+ScreenAdapter.OFFSET_Y;this.hpMediator=new HpBarMediator(this.xuetiao1,this.xuetiao2,this.xuetiaotouming,this.xuetiaodi,this.xuetiaoshu)};e.prototype.onDisplay=function(){guildboss.GuildBossModel.getIns().on(guildboss.GuildBossModel.UPDATE_ROLENUM_HURT,this,this.updateInfo);this.updateInfo()};e.prototype.updateInfo=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){guildboss.GuildBossModel.getIns().off(guildboss.GuildBossModel.UPDATE_ROLENUM_HURT,this,this.updateInfo)};e.prototype.refreshAll=function(){if(this._model.bossInfo){var t=guildboss.GuildBossModel.getIns().getCurSurpHurt();var e=guildboss.GuildBossModel.getIns().getNextNeedHurt();this.setBossInfo(this._model.bossInfo.monsterId,e,t)}this.updateChongData()};e.prototype.setBossInfo=function(t,e,i){var n=csv.MonsterProxy.getIns().getCfg(t);this.touxiangimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.shoulingname.text=csv.MonsterProxy.getMonsterName(n);this.hpMediator.setmock(game.MoneyModel.format(i)+"/"+game.MoneyModel.format(e));var r=guildboss.GuildBossModel.getIns().getTotalHurt();this.hpMediator.init(e,r);this.hpMediator.initCurrHp(i)};e.prototype.updateChongData=function(){var t=guildboss.GuildBossModel.getIns();var e=csv.GuildBossBoxProxy.getIns().getCurChongNum();if(e<100){this.chapterBox.visible=true;this.chapterBox1.visible=false;this.chongshu.value=util.CNUtil.toCNLower(e)}else{this.chapterBox.visible=false;this.chapterBox1.visible=true;this.chongshu1.value=util.CNUtil.toCNLower(e)}};e.SINGLE_KEY="battle.GuildBossHurtView";return e}(ui.bosszhandou.bossxuetiaofengmoUI);i.GuildBossHurtView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BattleModel.getIns();this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM};e.prototype.onDisplay=function(){guildboss.GuildBossModel.getIns().on(guildboss.GuildBossModel.UPDATE_ROLENUM_HURT,this,this.onUpdateHurtData);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){guildboss.GuildBossModel.getIns().off(guildboss.GuildBossModel.UPDATE_ROLENUM_HURT,this,this.onUpdateHurtData);Laya.timer.clear(this,this.loopFreshTime);Laya.Tween.clearAll(this)};e.prototype.onUpdateHurtData=function(){this.updateRoleNum()};e.prototype.refreshAll=function(){this.updateRoleNum();this.startLoopTime()};e.prototype.updateRoleNum=function(){this.lblLevel.text=app.getLang("guild_boss_tips9",guildboss.GuildBossModel.getIns().role_size)};e.prototype.startLoopTime=function(){this._leastTime=guildboss.GuildBossModel.getIns().getGuildBossRunTime();this.daojishiclip.value=util.TimeUtil.formatTime(this._leastTime,false);Laya.timer.loop1(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){this._leastTime--;if(this._leastTime>=0){this.daojishiclip.value=util.TimeUtil.formatTime(this._leastTime,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.GuildBossRunTimeView";return e}(ui.bosszhandou.bossdaojishi3UI);i.GuildBossRunTimeView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(p){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list.itemRender=p.InspireNormalItem;this.list.renderHandler=new Laya.Handler(this,this.onRender);this.list.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.list.selectEnable=true;this.guwubtn.clickHandler=new Laya.Handler(this,this.onClickHandler);this.guwubtn.clickHandler=new Laya.Handler(this,this.onClickHandler)};e.prototype.onClickHandler=function(){var t=dailytask.DailyTaskModel.getIns().getGuildInspire();var e=0;for(var i=0,n=t.length;i<n;i++){e+=t[i].num}if(e>=game.Config.getIntParams(1159)){manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_inspire8"));return}var r=csv.InspireProxy.getIns().getTypeByBattleType();t=p.InspireNormalView.getInspireArr(r);var o=this.list.array[this._selectIndex];var a=parseInt(o.id);var s=parseInt(o.overlaymax);var l=0;e=0;for(var i=0,n=t.length;i<n;i++){if(t[i].inspireid==a){l=t[i].num}e+=t[i].num}if(e>=o.typemax){manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_inspire9"));return}var u=game.ItemUtil.parserList(o.cost)[0];if(l>=s){manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1502",u.getName()));return}if(!game.GridsModel.getIns().hasEnoughItems(u,false,false)){manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1507",u.getName()));return}p.InspireNormalView.setInspire(r,a)};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onSelectHandler=function(t){if(this._lastSelectCell){this._lastSelectCell.setSelect(false)}var e=this.list.getCell(t);if(e){e.setSelect(true);this._lastSelectCell=e}this._selectIndex=t};e.prototype.onDisplay=function(){this._selectIndex=0;boss.BossModel.getIns().on(boss.BossEvent.INSPIRE_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.INSPIRE_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=csv.InspireProxy.getIns().getTypeByBattleType();var e=csv.InspireProxy.getIns().getTypeArr(t);this.list.array=e;this.list.selectedIndex=this._selectIndex;var i=dailytask.DailyTaskModel.getIns().getGuildInspire();var n=0;for(var r=0,o=i.length;r<o;r++){n+=i[r].num}var a=e[0].attrshow/100;this.tiaozhanlab1.text=app.getLang("gourddefend_inspire2",a);this.viplab1.text=app.getLang("gourddefend_inspire3",a*n)};e.SINGLE_KEY="battle.InspireHuluDefendView";return e}(ui.shouhuhulu.jilitipUI);p.InspireHuluDefendView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(l){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gouxuan1.mouseEnabled=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=l.BattleModel.getIns().boDoubleBattle();var n;if(t.costid){var r=t.subArr.length;for(var o=0;o<r;o++){var a=t.subArr[o];if(a.times>e[t.costid]){n=a;break}}if(!n){n=t.subArr[r-1]}}else{n=t}var s=game.ItemUtil.parserList(n.cost)[0];if(i){this.guwulab1.text=app.getLang(n.attrdes)+" *2";this.cishu1.text=s.count*2+"/"+app.getLang("次")}else{this.guwulab1.text=app.getLang(n.attrdes);this.cishu1.text=s.count+"/"+app.getLang("次")}this.icon.parserIconByItemId(s.getItemId())};e.prototype.setSelect=function(t){this.gouxuan1.selected=t};e.SINGLE_KEY="battle.InspireNormalItem";return e}(ui.bosszhandou.guliitemUI);l.InspireNormalItem=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(A){var t=function(t){__extends(S,t);function S(){return t!==null&&t.apply(this,arguments)||this}S.getIns=function(){return app.Singleton.getInstance(S)};S.gameStartAutoInspire=function(){var t=csv.InspireProxy.getIns().getTypeByBattleType();if(t!=csv.InspireProxy.ENUM_TYPE.SSSL&&t!=csv.InspireProxy.ENUM_TYPE.MJG){return}var e=vipcode.VipModel.getIns();if(!e.getAutoInspire(t)){return}var i=csv.InspireProxy.getIns().getTypeArr(t);if(!i){return}var n=A.BattleModel.getIns().boDoubleBattle();var r=this.getInspireArr(t);var o=0;var a;var s=0;var l;var u=0;var p;var h=0;var c;for(var f=0,g=i.length;f<g;f++){var d=i[f];var y=0;for(var m=0,v=r.length;m<v;m++){var b=r[m];if(b.inspireid==d.id){y=b.num}}var _=game.ItemUtil.parserList(d.cost)[0];if(_.getItemId()==8002){u=d.overlaymax;p=_;h=y;c=d.id}else{a=_;o=d.overlaymax;s=y;l=d.id}}var I=vipcode.VipModel.getIns().getAutoInspireTime(t)-s-h;if(I<=0){return}if(a){var w=a.count;if(n){w*=2}var L=Math.floor(game.GridsModel.getIns().getItemCount(a.getItemId())/w);L=Math.min(L,o-s);s=Math.min(I,L);I-=s}if(I>0&&p){var w=p.count;if(n){w*=2}var L=Math.floor(game.GridsModel.getIns().getItemCount(p.getItemId())/w);if(vipcode.VipModel.getIns().getAutoInspireYb(t)){L=Math.min(L,u-h)}else{L=Math.min(L,u-o-h)}h=Math.min(I,L)}for(var f=0;f<s;f++){S.setInspire(t,l)}for(var f=0;f<h;f++){S.setInspire(t,c)}};S.setInspire=function(t,e){switch(t){case csv.InspireProxy.ENUM_TYPE.BOSS_YEWAI:case csv.InspireProxy.ENUM_TYPE.BOSS_WORLD:case csv.InspireProxy.ENUM_TYPE.BOSS_KUAFU:app.ProtocolRequest.InspireReq(A.BattleModel.getIns().battleval[0],e);break;case csv.InspireProxy.ENUM_TYPE.SSSL:app.ProtocolRequest.DailyInspireReq(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SSSL,e);break;case csv.InspireProxy.ENUM_TYPE.ZJQW:app.ProtocolRequest.DailyInspireReq(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.ZJQW,e);break;case csv.InspireProxy.ENUM_TYPE.MJG:app.ProtocolRequest.DailyInspireReq(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.MJG,e);break;case csv.InspireProxy.ENUM_TYPE.SHHL:app.ProtocolRequest.GuardInspireReq(e);break;case csv.InspireProxy.ENUM_TYPE.YAODONG:app.ProtocolRequest.TeamInspireReq(e);break;case csv.InspireProxy.ENUM_TYPE.SZJD:app.ProtocolRequest.DailyInspireReq(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SZJD,e);break;default:break}};S.getInspireArr=function(t){var e=[];switch(t){case csv.InspireProxy.ENUM_TYPE.BOSS_YEWAI:case csv.InspireProxy.ENUM_TYPE.BOSS_WORLD:case csv.InspireProxy.ENUM_TYPE.BOSS_KUAFU:e=boss.BossModel.getIns().getInspire(A.BattleModel.getIns().battleval[0]);break;case csv.InspireProxy.ENUM_TYPE.SSSL:e=dailytask.DailyTaskModel.getIns().getInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SSSL);break;case csv.InspireProxy.ENUM_TYPE.ZJQW:e=dailytask.DailyTaskModel.getIns().getInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.ZJQW);break;case csv.InspireProxy.ENUM_TYPE.MJG:e=dailytask.DailyTaskModel.getIns().getInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.MJG);break;case csv.InspireProxy.ENUM_TYPE.SHHL:e=dailytask.DailyTaskModel.getIns().getInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SHHL);break;case csv.InspireProxy.ENUM_TYPE.YAODONG:e=dailytask.YaoDongModel.getIns().getInspire(12);break;case csv.InspireProxy.ENUM_TYPE.SZJD:e=dailytask.DailyTaskModel.getIns().getInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SZJD);break;default:break}return e};S.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list.itemRender=A.InspireNormalItem;this.list.renderHandler=new Laya.Handler(this,this.onRender);this.list.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.list.selectEnable=true;this.guwubtn.clickHandler=new Laya.Handler(this,this.onClickHandler)};S.prototype.onClickHandler=function(){var t=csv.InspireProxy.getIns().getTypeByBattleType();var e=S.getInspireArr(t);var i=this.list.array[this._selectIndex];var n;if(i.costid){var r=i.subArr.length;for(var o=0;o<r;o++){var a=i.subArr[o];if(a.times>this.typeTimes[i.costid]){n=a;break}}if(!n){n=i.subArr[r-1];var s=game.ItemUtil.parserList(n.cost)[0];manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1502",s.getName()));return}var l=game.ItemUtil.parserList(n.cost)[0];if(!game.GridsModel.getIns().hasEnoughItems(l,false,false)){manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1507",l.getName()));return}S.setInspire(t,n.id)}else{n=i;var u=parseInt(n.id);var p=parseInt(n.overlaymax);var h=0;var c=0;for(var o=0,r=e.length;o<r;o++){if(e[o].inspireid==u){h=e[o].num}c+=e[o].num}if(c>=n.typemax){manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1503"));return}var l=game.ItemUtil.parserList(n.cost)[0];if(h>=p){manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1502",l.getName()));return}if(!game.GridsModel.getIns().hasEnoughItems(l,false,false)){manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1507",l.getName()));return}S.setInspire(t,u)}};S.prototype.onRender=function(t,e){t.setData(t.dataSource,this.typeTimes)};S.prototype.onSelectHandler=function(t){if(this._lastSelectCell){this._lastSelectCell.setSelect(false)}var e=this.list.getCell(t);if(e){e.setSelect(true);this._lastSelectCell=e}this._selectIndex=t};S.prototype.onDisplay=function(){this.list.selectedIndex=this._selectIndex=0;boss.BossModel.getIns().on(boss.BossEvent.INSPIRE_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};S.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.INSPIRE_CHANGE,this,this.refreshAll)};S.prototype.refreshAll=function(){var t=csv.InspireProxy.getIns().getTypeByBattleType();var e=csv.InspireProxy.getIns().getTypeArr(t);this.typeTimes={};for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.costid){this.typeTimes[r.costid]=0}}var o=S.getInspireArr(t);var a=[];for(var i=0,n=o.length;i<n;i++){var s=o[i];var r=csv.InspireProxy.getIns().getCfg(s.inspireid);var l=app.str2Array(r.cost,"-")[0];this.typeTimes[l]+=s.num;var u=csv.StatusProxy.getIns().getCfg(r.buffid);var p=Attributes.decode(u.elements);a=a.concat(Attributes.multiplyAttributes(p,s.num))}var h="";a=Attributes.hebingAttributes(a);for(var i=0,n=a.length;i<n;i++){h+=Attributes.getShowLabel(a[i],"{0}+{1}");if(i<n-1){h+="、"}}if(e[0].costid){var r=void 0;var n=e[0].subArr.length;for(var i=0;i<n;i++){var c=e[0].subArr[i];if(c.times>this.typeTimes[e[0].costid]){r=c;break}if(!r){r=e[0].subArr[n-1]}}this.tiaozhanlab1.text=app.getLang(r.showdes,r.attrshow/100)}else{this.tiaozhanlab1.text=app.getLang(e[0].showdes)}this.list.array=e;this.list.selectedIndex=this._selectIndex;this.viplab1.text=h;var f=A.BattleModel.getIns().boDoubleBattle();this.lbldouble.visible=f};S.SINGLE_KEY="battle.InspireNormalView";return S}(ui.bosszhandou.gututipUI);A.InspireNormalView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BattleModel.getIns()};e.prototype.onDisplay=function(){this.x=(Laya.stage.width-this.width)/2;this.y=247+ScreenAdapter.OFFSET_Y;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);Laya.Tween.clearAll(this)};e.prototype.refreshAll=function(){this.startLoopTime()};e.prototype.startLoopTime=function(){this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM;var t=game.Context.getMapType();switch(t){case csv.MapProxy.MAP_TYPE.KUAFU_BOSS_OUT:case csv.MapProxy.MAP_TYPE.KUAFU_BOSS_IN:this.daojishiimg.skin="bosszhandou/bg_huodongdaojishi.png";this._maxTime=csv.ActivityFunction.getIns().getCloseTime(csv.ActivityFunction.ENUM.KUAFU_BOSS)-game.Context.getServerTime();break}this._recodeTime=Laya.timer.currTimer;this.daojishiclip.value=util.TimeUtil.formatTime(this._maxTime,false);Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=this._maxTime-Math.floor((Laya.timer.currTimer-this._recodeTime)/1e3);if(t>=0){this.daojishiclip.value=util.TimeUtil.formatTime(t,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.MapLimitTimeView";e.H2=60;return e}(ui.bosszhandou.bossdaojishi2UI);i.MapLimitTimeView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.SINGLE_KEY="battle.ShouhuBuyView";return e}(ui.shouhu.shouhuviewtankuangUI);t.ShouhuBuyView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BattleModel.getIns();this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);Laya.Tween.clearAll(this)};e.prototype.refreshAll=function(){this.startLoopTime()};e.prototype.startLoopTime=function(){this._leastTime=boss.BossModel.getIns().getYRunTime();this.daojishiclip.value=util.TimeUtil.formatTime(this._leastTime,false);Laya.timer.loop1(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){this._leastTime=boss.BossModel.getIns().getYRunTime();if(this._leastTime>=0){this.daojishiclip.value=util.TimeUtil.formatTime(this._leastTime,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.YaowangRunTimeView";return e}(ui.bosszhandou.bossdaojishi2UI);i.YaowangRunTimeView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.hpMediator=new ZjqwHpBarMediator(this.xuetiao1,this.xuetiao2,this.xuetiaotouming,this.xuetiaodi,this.xuetiaoshu);this._model=i.BattleModel.getIns()};e.prototype.onDisplay=function(){this.x=(Laya.stage.width-this.width)/2;this.y=200+ScreenAdapter.OFFSET_Y;this.updateInfo();i.BattleModel.getIns().on(i.BattleModel.EVENT_SET_BOSS,this,this.updateInfo)};e.prototype.updateInfo=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.hpMediator.setLabel();i.BattleModel.getIns().off(i.BattleModel.EVENT_SET_BOSS,this,this.updateInfo)};e.prototype.checkIfCurrBattleid=function(){if(!this._model.bossInfo){this.closeView()}};e.prototype.refreshAll=function(){if(this._model.bossInfo){this.setBossInfo(this._model.bossInfo.monsterId,this._model.bossInfo.maxhp,this._model.bossInfo.hp)}};e.prototype.setBossInfo=function(t,e,i){var n=csv.MonsterProxy.getIns().getCfg(t);this.touxiangimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.shoulingname.text=csv.MonsterProxy.getMonsterLvName(n)};e.prototype.closeView=function(){app.ViewManager.toggleView(i.ZjqwBossHpView,app.AppContainer.uiLayer,-1)};e.SINGLE_KEY="battle.ZjqwBossHpView";return e}(ui.bosszhandou.bossxuetiaoUI);i.ZjqwBossHpView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.touxiang.skin=t.rvo.getHeadIconUrl();this.mingzi.text=t.val;this.xuetiao.value=t.val/t.max};e.SINGLE_KEY="battle.BattleHurtRecordItem";return e}(ui.jiesuan.wanjiatouxiangsmallitem02UI);t.BattleHurtRecordItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(u){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.tab.selectedIndex=0;this.tab.selectHandler=new Laya.Handler(this,this.onTabHandler);this.listwofang.itemRender=u.BattleHurtRecordItem;this.listwofang.renderHandler=new Laya.Handler(this,this.onHandler)};e.prototype.onTabHandler=function(){this.refreshAll()};e.prototype.onHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.dellHurt();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this._hurtMap[this.tab.selectedIndex];var e=this._maxMap[this.tab.selectedIndex];if(!e){e=1}var i=[];var n=u.BattleModel.getIns().battleInfo.role;for(var r=0,o=n.length;r<o;r++){var a=n[r].roleId.toString();var s=game.Context.roleMap[a];var l=0;if(t&&t[a]){l=t[a]}i.push({rvo:s,val:l,max:e})}this.listwofang.array=i};e.prototype.dellHurt=function(){var t=u.BattleModel.getIns().pvpHurtData;if(t){var e=t.recordinf;this._hurtMap={};this._maxMap={};for(var i=0,n=e.length;i<n;i++){var r=e[i];if(!this._hurtMap[r.flag]){this._hurtMap[r.flag]={};this._maxMap[r.flag]=0}this._hurtMap[r.flag][r.objId.toString()]=r.val;if(r.val>this._maxMap[r.flag]){this._maxMap[r.flag]=r.val}}}};e.register=function(t){t.on(Laya.Event.CLICK,this,this.openView)};e.openView=function(){app.ViewManager.toggleDialog(e,1,0)};e.SINGLE_KEY="battle.BattleHurtRecordView";return e}(ui.jiesuan.shanghaitongjiitem1UI);u.BattleHurtRecordView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(s){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.type=isometric.IsoType.BATTLEHURT_TYPE;t._wordImage=new Laya.Image;t._wordImage.mouseEnabled=false;t.addChild(t._wordImage);t._wordImage.anchorX=.5;t._wordImage.anchorY=.5;return t}t.getInstance=function(){return app.Singleton.getInstance(t)};t.prototype.setSkillImg=function(t,e,i,n){var r=this;this._wordImage.skin="res/static/skill/"+t+".png";this._wordImage.alpha=1;this._wordImage.scaleX=1;this._wordImage.scaleY=1;this._wordImage.skewX=0;this._wordImage.x=e;this._wordImage.y=i-n;scene.SceneMediator.getInstance().addbattleHurt(this);app.MyTween.to(this._wordImage,{scaleX:1.5,scaleY:1.5},150,Laya.Ease.linearIn,Laya.Handler.create(this,function(){app.MyTween.to(r._wordImage,{y:r._wordImage.y-50,alpha:.5},500,Laya.Ease.linearIn,Laya.Handler.create(r,r.completeHandleSkill),400,true)}),0,true)};t.prototype.setEffect=function(t,e,i,n,r,o){var a=this;if(t==s.HurtView.EFFECT_ENUM.DOUBLE_ATT){if(e==2){this._wordImage.skin="zhandou/bg_zhandou_lianji_1.png"}else{this._wordImage.skin="zhandou/bg_zhandou_lianji_2.png"}}this._wordImage.alpha=1;this._wordImage.scaleX=1;this._wordImage.scaleY=1;this._wordImage.skewX=0;this._wordImage.x=i;this._wordImage.y=n-r/2;scene.SceneMediator.getInstance().addbattleHurt(this);app.MyTween.to(this._wordImage,{y:this._wordImage.y-r/2,scaleX:1.5,scaleY:1.5},300,Laya.Ease.linearIn,Laya.Handler.create(this,function(){app.MyTween.to(a._wordImage,{scaleX:1,scaleY:1},100,Laya.Ease.linearIn,Laya.Handler.create(a,function(){app.MyTween.to(a._wordImage,{alpha:.2},300,Laya.Ease.linearIn,Laya.Handler.create(a,a.completeHandleSkill),0,o)}),0,o)}),0,o)};t.prototype.completeHandleSkill=function(){scene.SceneMediator.getInstance().removebattleHurt(this)};t.prototype.clearAll=function(){app.MyTween.clearTween(this._wordImage);Laya.Pool.recover(s.HurtSkillImgMove.SINGLE_KEY,this)};t.SINGLE_KEY="battle.HurtSkillImgMove";return t}(Laya.Box);s.HurtSkillImgMove=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(f){var t=function(t){__extends(c,t);function c(){return t.call(this)||this}c.CHECK_IS_HP_RECOVER=function(t){for(var e=0,i=this.HP_RECOVER_ARR.length;e<i;e++){if(f.HurtView.checkType(t,this.HP_RECOVER_ARR[e])){return true}}return false};c.CHECK_IS_WUXING=function(t){for(var e=0,i=this.WUXING_ARR.length;e<i;e++){if(f.HurtView.checkType(t,this.WUXING_ARR[e])){return true}}return false};c.checkType=function(t,e){if(e<=32){if((t.getLow()>>e&1)==1){return true}}else{if((t.getHigh()>>e-32&1)==1){return true}}return false};c.prototype.initialize=function(){t.prototype.initialize.call(this);this._numRedBig="zhandou/clip_zhandou_red_b.png";this._numRedSmall="zhandou/cilp_zhandou_red_s.png";this._numChengBig="zhandou/clip_zhandou_orn_b.png";this._numChengSmall="zhandou/clip_zhandou_orn_s.png";this._numJinBig="zhandou/clip_zhandou_yel_b.png";this._defImg=new Laya.Image;this._defImg.mouseEnabled=false;this._defImg.anchorX=.5;this._defImg.anchorY=1;this._defImg.y=-5;this._defImg.skin="zhandou/bg_zhandou_gedang.png";this.addChild(this._defImg);this._wordImage=new Laya.Image;this._wordImage.mouseEnabled=false;this.addChild(this._wordImage);this._wordImage.visible=false;this._numClip=new Laya.FontClip;this._numClip.clipX=11;this._numClip.mouseEnabled=false;this._numClip.align="left";this._numClip.sheet="0";this.addChild(this._numClip)};c.prototype.setData=function(t,e,i,n,r){this._defImg.visible=r;this.visible=false;this._wordImage.visible=true;this._numClip.visible=true;this.anchorY=.5;this.anchorX=.5;var o="-";this._numClip.sheet="-1234567890()五行加成";if(c.checkType(t,f.HurtView.EFFECT_ENUM.MISS)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_shanbi.png";this._numClip.visible=false}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.IGNORE_DAMAGE)||c.checkType(t,f.HurtView.EFFECT_ENUM.TRIGMASTER_IGNORE_DAMAGE)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_mianyi.png";this._numClip.visible=false}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.SHIELD)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_hudunxishou.png";this._numClip.visible=false}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.DOT_DAMAGE)){this.visible=true;this._numClip.skin="zhandou/clip_zhandou_dg_s.png";this._wordImage.visible=false}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.HOT_RECOVER)){this.visible=true;this._numClip.skin="zhandou/clip_zhandou_gre_s.png";this._numClip.sheet="+1234567890()五行加成";o="+";this._wordImage.visible=false}else if(c.CHECK_IS_HP_RECOVER(t)){this.visible=true;this._numClip.skin="zhandou/clip_zhandou_gre_b.png";this._numClip.sheet="+1234567890()五行加成";o="+";this._wordImage.visible=false}else{if(e==2){if(c.checkType(t,f.HurtView.EFFECT_ENUM.DEAD_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_zhimin_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.UNDEF_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_wushi_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.CRIT_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_baoji_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.BREAK_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_poji_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.LUCKY_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_xinyun_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.NORMAL_ATT)){this.visible=true;this._numClip.skin=this._numRedSmall;this._wordImage.visible=false}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.WATER_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_shui_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.FIRE_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_huo_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.THUNDER_ATT)){this.visible=true;this._wordImage.skin="bg_zhandou_lei_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.POISON_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_du_1.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.RETURN_DAMAGE)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_fanshang.png";this._numClip.skin=this._numRedSmall}}else{if(c.checkType(t,f.HurtView.EFFECT_ENUM.DEAD_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_zhimin_2.png";this._numClip.skin=this._numJinBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.UNDEF_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_wushi_2.png";this._numClip.skin=this._numJinBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.CRIT_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_baoji_2.png";this._numClip.skin=this._numChengBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.BREAK_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_poji_2.png";this._numClip.skin=this._numRedBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.LUCKY_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_xinyun_2.png";this._numClip.skin=this._numChengBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.NORMAL_ATT)){this.visible=true;this._numClip.skin=this._numChengSmall;this._wordImage.visible=false}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.WATER_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_shui_2.png";this._numClip.skin=this._numChengBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.FIRE_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_huo_2.png";this._numClip.skin=this._numChengBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.THUNDER_ATT)){this.visible=true;this._wordImage.skin="bg_zhandou_lei_2.png";this._numClip.skin=this._numChengBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.POISON_ATT)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_du_2.png";this._numClip.skin=this._numChengBig}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.RETURN_DAMAGE)){this.visible=true;this._wordImage.skin="zhandou/bg_zhandou_fanshang_2.png";this._numClip.skin=this._numChengSmall}else if(c.checkType(t,f.HurtView.EFFECT_ENUM.VIP_SV_KILL)){this.visible=true;this._numClip.skin=this._numRedSmall;this._wordImage.visible=false}}}if(this.visible){if(n){this._numClip.value=o+i+("(五行加成"+n+")")}else{this._numClip.value=o+i}if(this._wordImage.visible==false){this._numClip.x=0;this._numClip.y=0}else{this._wordImage.anchorX=1}if(this._numClip.visible==false){this._wordImage.anchorX=0}}};c.prototype.playHurt=function(t){if(t.boStage){this.type=isometric.IsoType.STAGE_HURT_TYPE}else{this.type=isometric.IsoType.BATTLEHURT_TYPE}scene.SceneMediator.getInstance().addbattleHurt(this);this.setData(t.effectType,t.type,t.value,t.wxValue,t.boDef);var e=t.type==2;if(c.CHECK_IS_HP_RECOVER(t.effectType)){e=false}else if(c.checkType(t.effectType,f.HurtView.EFFECT_ENUM.HOT_RECOVER)){e=false}if(e){this.alpha=1;this.scaleX=1.2;this.scaleY=1.2;this.x=t.x;this.y=t.y-t.modelH/2;app.MyTween.to(this,{y:t.y-t.modelH*.2},500/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onTween1,[t]),0,t.canstop)}else{if(t.boStage){this.alpha=1;var i=1;var n=Math.random();var r=n*30+40;var o=n*80+20;var a=1*(1-n);i+=a;this.scale(i,i);var s=void 0;if(t.left==1){s=t.x-r}else{s=t.x+r}var l=t.y-t.modelH-o;this.x=s;this.y=l;var u=Math.atan2(l-t.y+t.modelH/2,s-t.x);var p=s+Math.cos(u)*60;var h=l+Math.sin(u)*30;app.MyTween.to(this,{scaleX:2+a,scaleY:2+a},100/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onTween4,[t,p,h,a]),0,t.canstop)}else{this.alpha=1;var i=1;var n=Math.random();var r=n*30+40;var o=n*80+20;var a=.5*(1-n);i+=a;this.scale(i,i);var s=void 0;if(t.left==1){s=t.x-r}else{s=t.x+r}var l=t.y-t.modelH-o;this.x=s;this.y=l;var u=Math.atan2(l-t.y+t.modelH/2,s-t.x);var p=s+Math.cos(u)*60;var h=l+Math.sin(u)*30;app.MyTween.to(this,{scaleX:1.5+a,scaleY:1.5+a},100/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMTween3,[t,p,h,a]),0,t.canstop)}}};c.prototype.onTween1=function(t){app.MyTween.to(this,{y:t.y,alpha:0},300/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.completeHandle),0,t.canstop)};c.prototype.onTween2=function(t,e,i,n){app.MyTween.to(this,{x:e,y:i,alpha:.5,scaleX:1+n,scaleY:1+n},300/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.completeHandle),100/app.TimerRewriter.battleScale,t.canstop)};c.prototype.onTween3=function(t,e,i,n){app.MyTween.to(this,{scaleX:2+n,scaleY:2+n},80/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onTween2,[t,e,i,n]))};c.prototype.onTween4=function(t,e,i,n){app.MyTween.to(this,{scaleX:4+n,scaleY:4+n},80/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onTween3,[t,e,i,n]))};c.prototype.onMTween1=function(t,e,i,n){app.MyTween.to(this,{x:e,y:i,alpha:.5,scaleX:.5+n,scaleY:.5+n},500/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.completeHandle),100/app.TimerRewriter.battleScale,t.canstop)};c.prototype.onMTween2=function(t,e,i,n){app.MyTween.to(this,{scaleX:1.5+n,scaleY:1.5+n},80/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMTween1,[t,e,i,n]))};c.prototype.onMTween3=function(t,e,i,n){app.MyTween.to(this,{scaleX:2.5+n,scaleY:2.5+n},80/app.TimerRewriter.battleScale,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMTween2,[t,e,i,n]))};c.prototype.completeHandle=function(){scene.SceneMediator.getInstance().removebattleHurt(this)};c.prototype.clearAll=function(){app.MyTween.clearTween(this);Laya.Pool.recover(f.HurtView.SINGLE_KEY,this)};c.SINGLE_KEY="battle.HurtView";c.EFFECT_ENUM={MISS:0,DOUBLE_ATT:1,DEAD_ATT:2,UNDEF_ATT:3,CRIT_ATT:4,BREAK_ATT:5,LUCKY_ATT:6,NORMAL_ATT:7,WATER_ATT:8,FIRE_ATT:9,THUNDER_ATT:10,POISON_ATT:11,SKILL_HP_RECOVER:12,SKILL_MP_RECOVER:13,PASSIVE_HP_RECOVER:14,PASSIVE_MP_RECOVER:15,MP_USE:16,RETURN_DAMAGE:17,DOT_DAMAGE:18,HOT_RECOVER:19,SHIELD:20,IGNORE_DAMAGE:21,AUTO_HP:22,RE_BIRTH:23,FUZHOU_HP_RECOVER:24,OUT_SIDE_FUNC_HP_RECOVER:25,OUT_SIDE_FUNC_MP_RECOVER:26,TRIGMASTER_HP_RECOVER:27,TRIGMASTER_HP_LOSE:28,TRIGMASTER_HP_SPLIT:29,TRIGMASTER_HP_SET:30,TRIGMASTER_IGNORE_DAMAGE:31,TRIGMASTER_HP_REPLACE:32,TRIGMASTER_MP_RECOVER:33,HUDUN_BOOM:34,TRIGMASTER_MP_CLEAR:35,VIP_SV_HP_FULL:36,VIP_SV_KILL:37,ICE_WORLD_HP_LOSE:38,TRIGMASTER_MP_LOSE:39,HURT_PINGFEN:40,CLIENT_FAKE:100};c.HP_RECOVER_ARR=[c.EFFECT_ENUM.SKILL_HP_RECOVER,c.EFFECT_ENUM.PASSIVE_HP_RECOVER,c.EFFECT_ENUM.FUZHOU_HP_RECOVER,c.EFFECT_ENUM.OUT_SIDE_FUNC_HP_RECOVER,c.EFFECT_ENUM.TRIGMASTER_HP_RECOVER,c.EFFECT_ENUM.VIP_SV_HP_FULL];c.WUXING_ARR=[c.EFFECT_ENUM.CRIT_ATT,c.EFFECT_ENUM.BREAK_ATT,c.EFFECT_ENUM.NORMAL_ATT,c.EFFECT_ENUM.RETURN_DAMAGE,c.EFFECT_ENUM.DOT_DAMAGE];return c}(Laya.Box);f.HurtView=t;var e=function(){function t(t,e,i,n,r,o,a,s){this.canstop=false;this.boStage=false;this.effectType=t;this.type=e;this.value=i;this.x=n;this.y=r;this.modelH=o;this.left=a;this.boDef=s;this.wxValue=0}return t}();f.HurtData=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.touxiang.skin=t.rvo.getHeadIconUrl();this.mingzi.text=t.val;this.xuetiao.value=t.val/t.max};e.SINGLE_KEY="battle.BattleHurtStateItem";return e}(ui.paihangbang.wanjiatouxiangsmallitem01UI);t.BattleHurtStateItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(p){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.tab.selectedIndex=0;this.tab.selectHandler=new Laya.Handler(this,this.onTabHandler);this.listwofang.itemRender=p.BattleHurtStateItem;this.listwofang.renderHandler=new Laya.Handler(this,this.onHandler);this.listduifang.itemRender=p.BattleHurtStateItem;this.listduifang.renderHandler=new Laya.Handler(this,this.onHandler)};e.prototype.onTabHandler=function(){this.refreshAll()};e.prototype.onHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.dellHurt();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this._hurtMap[this.tab.selectedIndex];var e=this._maxMap[this.tab.selectedIndex];if(!e){e=1}var i=[];var n=p.BattleModel.getIns().mineTeamArr;for(var r=0,o=n.length;r<o;r++){var a=n[r];var s=0;if(t&&t[a.insId.toString()]){s=t[a.insId.toString()]}i.push({rvo:a,val:s,max:e})}this.listwofang.array=i;var l=[];var u=p.BattleModel.getIns().enemyTeamArr;for(var r=0,o=u.length;r<o;r++){var a=u[r];var s=0;if(t&&t[a.insId.toString()]){s=t[a.insId.toString()]}l.push({rvo:a,val:s,max:e})}this.listduifang.array=l};e.prototype.dellHurt=function(){var t=p.BattleModel.getIns().pvpHurtData;if(t){var e=t.recordinf;this._hurtMap={};this._maxMap={};for(var i=0,n=e.length;i<n;i++){var r=e[i];if(!this._hurtMap[r.flag]){this._hurtMap[r.flag]={};this._maxMap[r.flag]=0}this._hurtMap[r.flag][r.objId.toString()]=r.val;if(r.val>this._maxMap[r.flag]){this._maxMap[r.flag]=r.val}}}};e.SINGLE_KEY="battle.BattleHurtStateView";return e}(ui.paihangbang.shanghaitongjiitemUI);p.BattleHurtStateView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwanjia.itemRender=n.BattlePvpSubRoleItem;this.listwanjia.renderHandler=new Laya.Handler(this,this.onHandler);this.x=Laya.stage.width-this.width;this.y=ScreenAdapter.OFFSET_Y;this._model=n.BattleModel.getIns()};e.prototype.onHandler=function(t,e){t.setData(t.dataSource);t.move(t.width,(e+1)*200)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this._model.enemyTeamArr.concat();var e=t.length;this.itemwanjia.setData(t[0]);var i=t.splice(1,e-1);this.listwanjia.array=i;if(e==1){this.imgbg.height=n.BattlePvpMineRoleView.MAIN_HEIGHT}else{this.imgbg.height=n.BattlePvpMineRoleView.MAIN_HEIGHT+n.BattlePvpMineRoleView.OTHER_HEIGHT*(e-1)}};e.SINGLE_KEY="battle.BattlePvpEnemyRoleView";return e}(ui.paihangbang.qiecuozhandouwanjiaitemUI);n.BattlePvpEnemyRoleView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.imgdie.visible=false;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.Context.off(game.ContextEvent.HP_CHANGE,this,this.onHpChange)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){game.Context.on(game.ContextEvent.HP_CHANGE,this,this.onHpChange);this.dataSource=t;this.imgtouxiang.skin=t.getHeadIconUrl();this.labelname.text=game.Context.clearPlayerName(t.playername);this.barhp.value=t.hp/t.maxhp;this.labelnum.text=csv.ReBirthProxy.getIns().getTransLvl(t.level).toString()};e.prototype.onHpChange=function(t){if(this.dataSource&&Uint64.equal(t,this.dataSource.insId)){this.barhp.value=this.dataSource.hp/this.dataSource.maxhp;this.imgdie.visible=Boolean(this.dataSource.hp==0)}};e.SINGLE_KEY="battle.BattlePvpMainRoleItem";return e}(ui.paihangbang.wanjiatouxiangitemUI);t.BattlePvpMainRoleItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(e){var t=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.getIns=function(){return app.Singleton.getInstance(n)};n.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwanjia.itemRender=e.BattlePvpSubRoleItem;this.listwanjia.renderHandler=new Laya.Handler(this,this.onHandler);this._model=e.BattleModel.getIns();this.y=ScreenAdapter.OFFSET_Y};n.prototype.onHandler=function(t,e){t.setData(t.dataSource);t.move(-t.width,(e+1)*200)};n.prototype.onDisplay=function(){this.callLater(this.refreshAll)};n.prototype.onUnDisplay=function(){};n.prototype.refreshAll=function(){var t=this._model.mineTeamArr.concat();var e=t.length;this.itemwanjia.setData(t[0]);var i=t.splice(1,e-1);this.listwanjia.array=i;if(e==1){this.imgbg.height=n.MAIN_HEIGHT}else{this.imgbg.height=n.MAIN_HEIGHT+n.OTHER_HEIGHT*(e-1)}};n.SINGLE_KEY="battle.BattlePvpMineRoleView";n.MAIN_HEIGHT=180;n.OTHER_HEIGHT=70;return n}(ui.paihangbang.qiecuozhandouwanjiaitemUI);e.BattlePvpMineRoleView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.imgdie.visible=false;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.Context.off(game.ContextEvent.HP_CHANGE,this,this.onHpChange)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){game.Context.on(game.ContextEvent.HP_CHANGE,this,this.onHpChange);this.imgtouxiang.skin=t.getHeadIconUrl();this.barhp.value=t.hp/t.maxhp;this.labelnumlv.text=csv.ReBirthProxy.getIns().getTransLvl(t.level).toString()};e.prototype.onHpChange=function(t){if(this.dataSource&&Uint64.equal(t,this.dataSource.insId)){this.barhp.value=this.dataSource.hp/this.dataSource.maxhp;this.imgdie.visible=Boolean(this.dataSource.hp==0)}};e.prototype.move=function(t,e){this.x=t;Laya.Tween.to(this,{x:0},200,null,null,e)};e.SINGLE_KEY="battle.BattlePvpSubRoleItem";return e}(ui.paihangbang.wanjiatouxiangsmallitemUI);t.BattlePvpSubRoleItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.y=ScreenAdapter.OFFSET_Y;this.imgdiban.x=-this.x;this.imgdiban.width=Laya.stage.width;this._model=i.BattleModel.getIns()};e.prototype.onDisplay=function(){this.ani3.play(0,true);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.animationvs.stop();this.ani3.stop();Laya.timer.clear(this,this.loopFreshTime)};e.prototype.refreshAll=function(){switch(this._model.battleType){case i.BattleConst.BATTLE_TYPE.PVP_ARENA:this._maxTime=game.Config.getIntParams(267);break;case i.BattleConst.BATTLE_TYPE.PVP_JJC:this._maxTime=game.Config.getIntParams(266);break;case i.BattleConst.BATTLE_TYPE.PVP_GUILD:this._maxTime=game.Config.getIntParams(530);break;default:this._maxTime=game.Config.getIntParams(268)}this.labeltime.text=util.TimeUtil.formatTime(this._maxTime,false)};e.prototype.startGameTime=function(){this._delayTime=this.dataSource[0];this._recodeTime=app.TimerRewriter.currTimer;this.cliptime.value=this._delayTime.toString();this.ani1.play(0,false);this.cliptime.visible=true;this.animationvs.visible=false;this.imgkaishi.visible=false;this.loopStartTime();Laya.timer.loop1(1e3,this,this.loopStartTime)};e.prototype.loopStartTime=function(){var t=this._delayTime-Math.floor((app.TimerRewriter.currTimer-this._recodeTime)/1e3);if(t>0){this.ani1.play(0,false);this.cliptime.value=t.toString();app.SoundManager.getIns().playSound("countdown")}else if(t==0){this.ani2.play(0,false);this.cliptime.visible=false;this.imgkaishi.visible=true;this.cliptime.value=t.toString();app.SoundManager.getIns().playSound("countdown")}else{this.imgkaishi.visible=false;this.animationvs.visible=true;this.animationvs.play(0,true);Laya.timer.clear(this,this.loopStartTime);this.dataSource[1].run()}};e.prototype.startLoopTime=function(){this._startTime=app.TimerRewriter.currTimer;var t=this._maxTime;this.labeltime.text=util.TimeUtil.formatTime(t,false);Laya.timer.loop1(1e3,this,this.loopFreshTime);this.loopFreshTime()};e.prototype.loopFreshTime=function(){var t=Math.floor((app.TimerRewriter.currTimer-this._startTime)/1e3);var e=this._maxTime-t;if(e>=0){this.labeltime.text=util.TimeUtil.formatTime(e,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.BattlePvpTimeView";return e}(ui.paihangbang.qiecuozhandoudaojishiitemUI);i.BattlePvpTimeView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.miaoshu.text="";this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this,98,10);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){util.AniUtil.stopCircle(this.beijingguang);Laya.timer.clear(this,this.loopFreshTime)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=game.ItemUtil.hebingItems(t.award);this.centerLayout.array=game.ItemUtil.sortItemsByQua(e);this.startLoop();this.miaoshu.text=app.getLang("shandong_win",csv.BossProxy.getIns().getCaveBossName(t.battleval[0].toNumber()))};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleBossCaveWin";return t}(ui.jiesuan.shandongtanbaojiesuanUI);i.BattleBossCaveWin=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};e.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_shandong_name",csv.BossProxy.getIns().getCaveBossName(t.battleval[0].toNumber())))};e.getIns=function(){return app.Singleton.getInstance(e)};return e}(i.SbattleWinView);i.SbattleBossCaveWin=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};return e}(i.BattleLoseView);i.BattleBossCaveLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_shandong_name",csv.BossProxy.getIns().getCaveBossName(t.battleval[0].toNumber())))};t.getIns=function(){return app.Singleton.getInstance(t)};return t}(i.SbattleLoseView);i.SbattleBossCaveLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";t.boNext=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.closebtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.xiacengbtn.on(Laya.Event.CLICK,this,this.onNextClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.quedingbtn.label=app.getLang("jiesuan_queding2");this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this,98,10);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onLeaveClick=function(){Laya.timer.clear(this,this.loopFreshTime);app.ProtocolRequest.LeaveDailyDgnReq();app.ViewManager.toggleDialog(t,-1,0)};t.prototype.onNextClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);if(this.boNext){app.ProtocolRequest.FmbkChallengeReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq()}};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang);guide.GuideItem2.getIns().hide()};t.prototype.refreshAll=function(){var t=this.dataSource;var e=t.battleval[0].toNumber();this.tongguanlab.text=app.getLang("fumobaoku_tips7",e);this.centerLayout.array=t.award;var i=csv.FumoEarthProxy.getIns().getCfg(e+1);this.boNext=i&&game.Context.teamLv>=i.teamlevel;this.startLoop()};t.prototype.showGuide=function(){var t=this.xiacengbtn.parent.localToGlobal(new Laya.Point(this.xiacengbtn.x,this.xiacengbtn.y));guide.GuideItem2.getIns().add(this.xiacengbtn,2,t.x,t.y,this.xiacengbtn.width,this.xiacengbtn.height,true)};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){if(this.boNext){this.quedingbtn.label=app.getLang("jiesuan_queding2");this.xiacengbtn.label=app.getLang("jiesuan_yongzhe_2",this.manager.currControl.closeCd-t);this.quedingbtn.visible=true;this.xiacengbtn.x=412}else{this.xiacengbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t);this.quedingbtn.visible=false;this.xiacengbtn.x=293}}else{this.leave()}};t.SINGLE_KEY="battle.BattleFumoResultView";return t}(ui.jiesuan.qiseshanjiesuanUI);i.BattleFumoResultView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){var t=this.dataSource[0];var e=t.battleval[0].toNumber();var i=csv.FumoEarthProxy.getIns().getCfg(e+1);if(game.Context.teamLv>=i.teamlevel){app.ProtocolRequest.FmbkChallengeReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq()}};e.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_fumo_name",t.battleval[0].toNumber()))};e.getIns=function(){return app.Singleton.getInstance(e)};return e}(i.SbattleWinView);i.SBattleFumoResultView=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};return e}(i.BattleLoseView);i.BattleFumoLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_fumo_name",t.battleval[0].toNumber()))};t.getIns=function(){return app.Singleton.getInstance(t)};return t}(i.SbattleLoseView);i.SbattleFumoLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};t.prototype.onClick=function(){if(this.callBack){this.callBack.runWith(this.dataSource.functionId)}};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t){var e=csv.FunctionsProxy.getIns().getCfg(t.functionId);this.btnrukou.skin=csv.FunctionsProxy.getIns().getUrl(e.growicon,0)};t.SINGLE_KEY="battle.BattleFuncItem";return t}(ui.jiesuan.gongnengrukouitemUI);t.BattleFuncItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;if(t.award.length==0){this.imgmeishuzi.visible=true;this.daojulist.visible=false}else{this.imgmeishuzi.visible=false;this.daojulist.visible=true;var e=game.ItemUtil.hebingItems(t.award);this.daojulist.array=game.ItemUtil.sortItemsByQua(e);this.daojulist.scrollTo(0)}this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleGodDungeonWinView";return t}(ui.jiesuan.shenshandilaojiesuannewUI);i.BattleGodDungeonWinView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(n){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";t.boNext=false;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.closebtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.xiacengbtn.on(Laya.Event.CLICK,this,this.onNextClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.touxiang.on(Laya.Event.COMPLETE,this,this.aniStop);this.aniStop();n.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=n.BattleManager.getIns()};i.prototype.aniStop=function(){this.touxiang.stop();this.touxiang.visible=false};i.prototype.onLeaveClick=function(){this.leave(false)};i.prototype.onNextClick=function(){this.leave(this.boNext)};i.prototype.leave=function(t){Laya.timer.clear(this,this.loopFreshTime);if(t){guaji.GuajiModel.getIns().onCheckpointReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq();if(guaji.GuajiModel.getIns().state==1){app.ViewManager.toggleView(main.PassCompleteView,app.AppContainer.uiLayer,1)}}app.ViewManager.toggleDialog(i,-1,0)};i.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang);Laya.timer.clearAll(this);guide.GuideItem2.getIns().hide();this.aniStop()};i.prototype.onTweenEnd=function(t,e){this.dengjilab.text=app.getLang("family_build_1",game.Context.teamLv);this.touxiang.play(0,false);this.touxiang.visible=true;this.jindutiao.value=0;Laya.Tween.to(this.jindutiao,{value:t,update:new Laya.Handler(this,this.onExpUpdate,[e,0])},1e3,Laya.Ease.quartOut);if(game.Context.teamlvOld>0){game.Context.teamlvOld=0}};i.prototype.onExpUpdate=function(t,e){var i,n;if(e>0){i=Math.floor(this.jindutiao.value*e);n=e}else{i=Math.floor(this.jindutiao.value*t);n=t}this.shuzhilab.text=i+"/"+n};i.prototype.refreshAll=function(){var t=csv.GuajiProxy.getIns().getCfgGuanqia(guaji.GuajiModel.getIns().getGujiPassId());var e=t.reward.split(";");this.shuzhi1.text=game.MoneyModel.format(Math.floor(+e[1].split("-")[1]*60))+"/时";this.shuzhi2.text=game.MoneyModel.format(Math.floor(+e[0].split("-")[1]*60))+"/时";var i=Math.floor(+t.reward1.split("-")[1]*60/1e4);this.shuzhi3.text=game.MoneyModel.format(i)+"/时";var n=0,r=0;this.txtAdd.text="";this.touxingimg.skin=csv.MyTeamProxy.getIns().getTeamIcon(game.Context.teamAvatar);this.touxiangkuangimg.skin=game.RoleModel.getIns().getHeadFrameIcon();var o=this.dataSource;var a=game.ItemUtil.hebingItems(o.award);var s=[];for(var l=0,u=a.length;l<u;l++){if(a[l].itemID==game.ItemUtil.ENUMS.PET_EXP_ITEM){continue}s.push(a[l])}if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.PET_LIST)){game.ItemUtil.flowMsg(a,game.ItemUtil.ENUMS.PET_EXP_ITEM)}var p=0;for(var l=0;l<s.length;l++){if(s[l].itemID==8024&&s[l].value>0){p=s[l].value;this.txtAdd.text=app.getLang("+{0}",s[l].value);break}}n=csv.MyTeamProxy.getIns().getTeamMaxExp(game.Context.teamLv);var h=game.Context.teamExp/n;if(game.Context.teamlvOld==0){this.dengjilab.text=app.getLang("family_build_1",game.Context.teamLv);this.jindutiao.value=(game.Context.teamExp-p)/n;Laya.Tween.to(this.jindutiao,{value:h,update:new Laya.Handler(this,this.onExpUpdate,[n,r])},1e3,Laya.Ease.quartOut)}else{this.dengjilab.text=app.getLang("family_build_1",game.Context.teamLv-1);r=csv.MyTeamProxy.getIns().getTeamMaxExp(game.Context.teamLv-1);this.jindutiao.value=(r-p+game.Context.teamExp)/r;Laya.Tween.to(this.jindutiao,{value:1,update:new Laya.Handler(this,this.onExpUpdate,[n,r])},1e3,Laya.Ease.quartOut,new Laya.Handler(this,this.onTweenEnd,[h,n]))}this.daojulist.array=game.ItemUtil.getAwardItem([],s);this.daojulist.scrollTo(0);var c=o.battleval[0].toNumber();this.labeltiaojian.text="";this.updateGuankaView(c);this.startLoop()};i.prototype.updateGuankaView=function(t){var e=csv.GuajiProxy.getIns().getCfgGuanqia(t);var i=csv.GuajiProxy.getIns().getPart(e.id);this.tongguanlab.text=app.getLang("guanqia_name_1",e.chapter,i.index);var n=csv.GuajiProxy.getIns().getCfgGuanqia(t+1);var r=n&&game.Context.isTeamLvReach(n.teamlevel,false);if(app.str2Array(game.Config.getParams(1209),";").indexOf(e.id.toString())==-1){this.boNext=n&&n.chapter==e.chapter&&r}else{this.boNext=false;Laya.timer.once(300,this,this.showGuide)}if(this.boNext){this.quedingbtn.label=app.getLang("jiesuan_queding2");this.xiacengbtn.label=app.getLang("jiesuan_yongzhe_2",this.manager.currControl.closeCd);this.quedingbtn.visible=true;this.xiacengbtn.x=412;if(e.id<=game.Config.getIntParams(1150)){Laya.timer.once(300,this,this.showGuide)}}else{this.xiacengbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd);this.quedingbtn.visible=false;this.xiacengbtn.x=293;if(!r&&n){this.labeltiaojian.text=app.getLang("zhuxian_2",n.teamlevel)}}};i.prototype.showGuide=function(){var t=this.xiacengbtn.parent.localToGlobal(new Laya.Point(this.xiacengbtn.x,this.xiacengbtn.y));guide.GuideItem2.getIns().add(this.xiacengbtn,2,t.x,t.y,this.xiacengbtn.width,this.xiacengbtn.height,true)};i.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};i.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){if(this.boNext){this.xiacengbtn.label=app.getLang("jiesuan_yongzhe_2",this.manager.currControl.closeCd-t)}else{this.xiacengbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}}else{this.leave(this.boNext)}};i.SINGLE_KEY="battle.BattleGuanKaWinView";return i}(ui.jiesuan.xiangyaozhilujiesuanUI);n.BattleGuanKaWinView=t;var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boNext=false;return t}t.prototype.leave=function(){if(this.boNext){guaji.GuajiModel.getIns().onCheckpointReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq();if(guaji.GuajiModel.getIns().state==1){app.ViewManager.toggleView(main.PassCompleteView,app.AppContainer.uiLayer,1)}}};t.prototype.setParentLabel=function(){var t=csv.GuajiProxy.getIns().getPart(this._ele.id);n.BattleSmallResultView.getIns().setLabel(app.getLang("guanqia_name_1",this._ele.chapter,t.index))};t.prototype.setParentIcon=function(){n.BattleSmallResultView.getIns().setIcon(n.BattleSmallResultView.TYPE_ULR.WIN)};t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listicon.itemRender=n.BattleWinGridView;this.listicon.renderHandler=new Laya.Handler(this,this.onRender)};t.prototype.onRender=function(t,e){t.setData(t.dataSource);t.boStopPropagation=true};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){var t=this.dataSource[0];var e=t.battleval[0].toNumber();this._ele=csv.GuajiProxy.getIns().getCfgGuanqia(e);var i=csv.GuajiProxy.getIns().getCfgGuanqia(e+1);var n=this._ele.reward.split(";");this.shuzhi1.text=game.MoneyModel.format(Math.floor(+n[1].split("-")[1]*60))+"/时";this.shuzhi2.text=game.MoneyModel.format(Math.floor(+n[0].split("-")[1]*60))+"/时";var r=Math.floor(+this._ele.reward1.split("-")[1]*60/1e4);this.shuzhi3.text=game.MoneyModel.format(r)+"/时";var o=game.ItemUtil.hebingItems(t.award);var a=[];for(var s=0,l=o.length;s<l;s++){if(o[s].itemID==game.ItemUtil.ENUMS.PET_EXP_ITEM){continue}a.push(o[s])}this.listicon.array=game.ItemUtil.getAwardItem([],a);this.listicon.scrollTo(0);var u=i&&game.Context.isTeamLvReach(i.teamlevel,false);if(app.str2Array(game.Config.getParams(1209),";").indexOf(this._ele.id.toString())==-1){this.boNext=i&&i.chapter==this._ele.chapter&&u}else{this.boNext=false}this.setParentLabel();this.setParentIcon()};return t}(ui.jiesuan.zhandoujiesuantankuangitem02UI);n.SbattleGuanKaWinView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueren.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.manager=i.BattleManager.getIns()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;this.labeltishi.text=app.getLang("guild_boss_tips6",game.MoneyModel.format(t.battleval[2].toNumber()),t.battleval[1].toNumber());this.startLoop()};t.prototype.onClick=function(){this.leave()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.btnqueren.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveBossReq()};t.SINGLE_KEY="battle.BattleGuildBossResultView";return t}(ui.jiesuan.fengmolingtaijiesuanUI);i.BattleGuildBossResultView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_fengmo_name"))};e.prototype.setParentIcon=function(){i.BattleSmallResultView.getIns().setIcon(i.BattleSmallResultView.TYPE_ULR.FENGMO)};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.setDes=function(){var t=this.dataSource[0];this.txtmiaoshu01.text=app.getLang("guild_boss_tips6",game.MoneyModel.format(t.battleval[2].toNumber()),t.battleval[1].toNumber())};return e}(i.SbattleWinView);i.SbattleGuildBossResultView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueding.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.btnshanghaitongji.on(Laya.Event.CLICK,this,this.onCheck);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.onCheck=function(){app.ViewManager.toggleDialog(i.BattleHurtStateView,1,0)};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=guild.GuildPkModel.getIns().getBattleInfoByRecordId(t.battleval[0].toNumber());if(e.state==1){this.imgjieguo.skin="res/static/bg_jiesuan_shengli.png";util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.beijingguang.visible=true;this.imgwofang.visible=true;util.SkUtil.setWinSkt(this.imgwofang);this.imgdidui.visible=false;if(Uint64.equal(e.player2[0].id,game.Context.mainRoleId)){this.labeltishi01.text=app.getLang("guild_battle_tips31",e.player2[0].name)}else{this.labeltishi01.text=app.getLang("guild_battle_tips34",e.player1[0].name,e.player2[0].name)}}else if(e.state==2){this.imgjieguo.skin="res/static/bg_jiesuan_shibai.png";app.SoundManager.getIns().playSound("lose");this.beijingguang.visible=false;this.imgwofang.visible=false;this.imgdidui.visible=true;if(Uint64.equal(e.player2[0].id,game.Context.mainRoleId)){this.labeltishi01.text=app.getLang("guild_battle_tips32",e.player2[0].name)}else{this.labeltishi01.text=app.getLang("guild_battle_tips35",e.player1[0].name,e.player2[0].name)}}else{this.imgjieguo.skin="res/static/bg_jiesuan_pingju.png";app.SoundManager.getIns().playSound("lose");this.beijingguang.visible=false;this.imgwofang.visible=false;this.imgdidui.visible=true;if(Uint64.equal(e.player2[0].id,game.Context.mainRoleId)){this.labeltishi01.text=app.getLang("guild_battle_tips33",e.player2[0].name)}else{this.labeltishi01.text=app.getLang("guild_battle_tips36",e.player1[0].name,e.player2[0].name)}}this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.btnqueding.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleGuildPvpResultView";return t}(ui.jiesuan.pkjiesuanUI);i.BattleGuildPvpResultView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.btnpaihang.on(Laya.Event.CLICK,this,this.onRank);this.zuihoulist.itemRender=grids.GridView;this.zuihoulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.centerLayout=new game.CenterLayoutMediator(this.zuihoulist,this,96,20);this.manager=i.BattleManager.getIns()};t.prototype.onRank=function(){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.SHOUHU_HULU,true,false,"3")};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq();app.ViewManager.toggleDialog(t,-1,0)};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=t.battleval[2].toNumber();var i=t.award.splice(e,t.award.length);var n=app.str2Array(t.tarname,";");this.centerLayout.array=game.ItemUtil.sortItemsByQua(i);this.shuominglab.text=app.getLang("gourddefend_tips9",t.battleval[0].toNumber())+"<br>"+app.getLang("gourddefend_tips10",t.battleval[3].toNumber());var r="";for(var o=1;o<n.length;o++){r+=game.Context.clearPlayerName(n[o]);if(o<n.length-1){r+="、"}}this.renshulab.text=app.getLang("gourddefend_tips11",r);if(Uint64.equal(game.Context.mainRoleId,t.battleval[1])){this.zuihoulab.text=app.getLang("gourddefend_awards5")}else{this.zuihoulab.text=app.getLang("gourddefend_awards4",n[0])}this.quedingbtn.label=app.getLang("jiesuan_queding1")};t.SINGLE_KEY="battle.BattleHuluDefendResultView";return t}(ui.jiesuan.shouhuhulujiesuanUI);i.BattleHuluDefendResultView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(a){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(a.BattleJjcResultView)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueding.clickHandler=new Laya.Handler(this,this.onLeaveHandler);this.listdaoju.itemRender=grids.GridView;this.listdaoju.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.listdaoju,this,98,this.listdaoju.spaceX);this.btnclose.clickHandler=new Laya.Handler(this,this.onLeaveHandler);this.manager=a.BattleManager.getIns()};t.prototype.startLoop=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.onLeaveHandler=function(){Laya.timer.clear(this,this.loopFreshTime);this.close();app.ProtocolRequest.BattleShowEndReq(a.BattleModel.getIns().battleid)};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.btnqueding.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.onLeaveHandler()}};t.prototype.onDisplay=function(){this.animationvs.play(0,true);this.callLater(this.refreshHandler)};t.prototype.refreshHandler=function(){this._startTime=this.manager.currControl.resultTime;this.startLoop();var t="+";this._result=this.dataSource;var e=game.Context.battleCamp==this._result.result;if(e){this.imgdiban02.skin="res/static/bg_jiesuan_shengli.png";this.beijingguang.visible=true;this.shibaiimg.visible=false;util.AniUtil.startCircle(this.beijingguang);util.SkUtil.setWinSkt(this.imgwofang);this.imgwofang.visible=true}else{this.beijingguang.visible=false;util.AniUtil.stopCircle(this.beijingguang);this.shibaiimg.visible=true;this.imgdiban02.skin="res/static/bg_jiesuan_shibai.png";this.imgwofang.visible=false;t="-"}var i=t=="+"?"-":"+";var n=a.BattleModel.getIns().mineTeamArr[0];this.itemwo.setData(n.insId,n.playername,n.teamHead,n.headframeId);this.labelwo01.text=n.playername;var r=a.BattleModel.getIns().enemyTeamArr[0];this.itemwanjia.setData(r.insId,r.playername,r.teamHead,r.headframeId);this.labelwanjia01.text=r.playername;this.centerLayout.array=this._result.award;var o=this._result.battleval;if(game.Context.battleCamp==1){this.setJiFeng(this.labelwo02,t,o[0],o[1]);this.setJiFeng(this.labelwanjia02,i,o[2],o[3])}else{this.setJiFeng(this.labelwo02,t,o[2],o[3]);this.setJiFeng(this.labelwanjia02,i,o[0],o[1])}};t.prototype.setJiFeng=function(t,e,i,n){t.text=app.getLang("jingjichang10",i.toNumber(),e=="+"?game.STYLES.GREEN_COLOR_S:game.STYLES.RED_COLOR_S,e+n.toNumber())};t.prototype.onUnDisplay=function(){util.AniUtil.stopCircle(this.beijingguang);this.animationvs.stop()};t.SINGLE_KEY="battle.BattleJjcResultView";return t}(ui.jiesuan.jingjichangjiesuanviewUI);a.BattleJjcResultView=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};e.prototype.setParentLabel=function(){a.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_jingji_name"))};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.setDes=function(){var t=this.dataSource[0];if(game.Context.battleCamp==1){this.txtmiaoshu01.text=app.getLang("jiesuan_jingji_desc_1",t.battleval[0].toNumber(),t.battleval[1].toNumber())}else{this.txtmiaoshu01.text=app.getLang("jiesuan_jingji_desc_1",t.battleval[2].toNumber(),t.battleval[3].toNumber())}};return e}(a.SbattleWinView);a.SbattleJjcWinView=i;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};e.prototype.setParentLabel=function(){a.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_jingji_name"))};e.prototype.setParentIcon=function(){a.BattleSmallResultView.getIns().setIcon(a.BattleSmallResultView.TYPE_ULR.LOSE)};e.getIns=function(){return app.Singleton.getInstance(i)};e.prototype.setDes=function(){var t=this.dataSource[0];var e=game.Context.battleCamp==t.result;if(game.Context.battleCamp==1){this.txtmiaoshu01.text=app.getLang("jiesuan_jingji_desc_2",t.battleval[0].toNumber(),t.battleval[1].toNumber())}else{this.txtmiaoshu01.text=app.getLang("jiesuan_jingji_desc_2",t.battleval[2].toNumber(),t.battleval[3].toNumber())}};return e}(a.SbattleWinView);a.SbattleJjcLoseView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueren.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;if(t.result==1){this.imgbgshengli.visible=true;this.imgbgshibai.visible=false;util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.beijingguang.visible=true;this.imgwofang.visible=true;util.SkUtil.setWinSkt(this.imgwofang);this.imgdidui.visible=false;this.labeltishi.text=app.getLang("kfxiulian_6_1")}else{this.imgbgshengli.visible=false;this.imgbgshibai.visible=true;app.SoundManager.getIns().playSound("lose");this.beijingguang.visible=false;this.imgwofang.visible=false;this.imgdidui.visible=true;this.labeltishi.text=app.getLang("kfxiulian_6_2")}this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.btnqueren.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleKfxlPveResultView";return t}(ui.jiesuan.kuafuxiulianjiesuanUI);i.BattleKfxlPveResultView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("buttonname_363"))};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.setDes=function(){this.txtmiaoshu01.text=app.getLang("kfxiulian_6_1")};return e}(i.SbattleWinView);i.SbattleKfxlPveWinView=e;var n=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;t.boFun=false;return t}t.prototype.leave=function(){app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("buttonname_363"))};t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.setDes=function(){this.txtmiaoshu.text=app.getLang("kfxiulian_6_2")};return t}(i.SbattleLoseView);i.SbattleKfxlPveLoseView=n})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueren.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.btnshanghaitongji.on(Laya.Event.CLICK,this,this.onCheck);this.manager=i.BattleManager.getIns()};t.prototype.onCheck=function(){app.ViewManager.toggleDialog(i.BattleHurtStateView,1,0)};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource[1];var e=i.BattleModel.getIns().enemyTeamArr[0];if(t){this.imgbgshengli.visible=true;this.imgbgshibai.visible=false;util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.beijingguang.visible=true;this.imgwofang.visible=true;util.SkUtil.setWinSkt(this.imgwofang);this.imgdidui.visible=false;if(game.Context.battleCamp==2){this.labeltishi.text=app.getLang("kfxiulian_7_3",game.Context.getSerName(e.cursvrid)+e.playername)}else{this.labeltishi.text=app.getLang("kfxiulian_7_1",game.Context.getSerName(e.cursvrid)+e.playername)}}else{this.imgbgshengli.visible=false;this.imgbgshibai.visible=true;app.SoundManager.getIns().playSound("lose");this.beijingguang.visible=false;this.imgwofang.visible=false;this.imgdidui.visible=true;if(game.Context.battleCamp==2){this.labeltishi.text=app.getLang("kfxiulian_7_2",game.Context.getSerName(e.cursvrid)+e.playername)}else{this.labeltishi.text=app.getLang("kfxiulian_7_4",game.Context.getSerName(e.cursvrid)+e.playername)}}this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.btnqueren.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleKfxlPvpResultView";return t}(ui.jiesuan.kuafuxiulianjiesuanUI);i.BattleKfxlPvpResultView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("buttonname_363"))};e.getIns=function(){return app.Singleton.getInstance(i.SbattleKfxlPveWinView)};e.prototype.setDes=function(){var t=i.BattleModel.getIns().enemyTeamArr[0];if(game.Context.battleCamp==2){this.txtmiaoshu01.text=app.getLang("kfxiulian_7_3",game.Context.getSerName(t.cursvrid)+t.playername)}else{this.txtmiaoshu01.text=app.getLang("kfxiulian_7_1",game.Context.getSerName(t.cursvrid)+t.playername)}};return e}(i.SbattleWinView);i.SbattleKfxlPvpWinView=e;var n=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;t.boFun=false;return t}t.prototype.leave=function(){app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("buttonname_363"))};t.getIns=function(){return app.Singleton.getInstance(i.SbattleKfxlPveLoseView)};t.prototype.setDes=function(){var t=i.BattleModel.getIns().enemyTeamArr[0];if(game.Context.battleCamp==2){this.txtmiaoshu.text=app.getLang("kfxiulian_7_2",game.Context.getSerName(t.cursvrid)+t.playername)}else{this.txtmiaoshu.text=app.getLang("kfxiulian_7_4",game.Context.getSerName(t.cursvrid)+t.playername)}};return t}(i.SbattleLoseView);i.SbattleKfxlPvpLoseView=n})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this,96,this.daojulist.spaceX);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveBossReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=app.str2Array(t.tarname,";");var i=csv.BossProxy.getIns().getBossName(t.battleval[0].toNumber());this.shuominglab.text=app.getLang("kuafu_boss1",e[1],e[0],i);var n=t.battleval[1].toNumber();if(n){this.renshulab.text=app.getLang("kuafu_boss2",n)}else{this.renshulab.text=app.getLang("kuafu_boss13")}var r=game.ItemUtil.hebingItems(t.award);this.centerLayout.array=game.ItemUtil.sortItemsByQua(r);this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleKuafuWinView";return t}(ui.jiesuan.danaotiangongjiesuanUI);i.BattleKuafuWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};e.prototype.setParentLabel=function(){var t=this.dataSource[0];var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_tiangong_name",e))};e.prototype.setParentIcon=function(){i.BattleSmallResultView.getIns().setIcon(i.BattleSmallResultView.TYPE_ULR.WIN)};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.setDes=function(){var t=this.dataSource[0];var e=app.str2Array(t.tarname,";");var i=csv.BossProxy.getIns().getBossName(t.battleval[0].toNumber());var n=app.getLang("jiesuan_tiangong_desc_3",e[1],e[0],i)+"\n";var r=t.battleval[1].toNumber();if(r){n+=app.getLang("jiesuan_tiangong_desc_1",r)}else{n+=app.getLang("jiesuan_tiangong_desc_2")}this.txtmiaoshu01.text=n};return e}(i.SbattleWinView);i.SbattleKuafuWinView=e;var n=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveBossReq()};t.prototype.onDisplay=function(){app.SoundManager.getIns().playSound("lose");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=csv.BossProxy.getIns().getBossName(t.battleval[0].toNumber());this.labeltishi.text=app.getLang("kuafu_boss4",e);this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleKuafuLoseView";return t}(ui.jiesuan.danaotiangongjiesuanshibaiUI);i.BattleKuafuLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_tiangong_name",e))};t.getIns=function(){return app.Singleton.getInstance(i.SbattleMountainLoseView)};t.prototype.setDes=function(){var t=this.dataSource[0];var e=csv.BossProxy.getIns().getBossName(t.battleval[0].toNumber());this.txtmiaoshu.text=app.getLang("kuafu_boss4",e)};return t}(i.SbattleLoseView);i.SbattleKuafuLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(r){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;r.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=r.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;if(t.award.length==0){this.imgmeishuzi.visible=true;this.daojulist.visible=false}else{this.imgmeishuzi.visible=false;this.daojulist.visible=true;var e=game.ItemUtil.hebingItems(t.award);this.daojulist.array=game.ItemUtil.sortItemsByQua(e);this.daojulist.scrollTo(0)}this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleMjLockWinView";return t}(ui.jiesuan.shenshandilaojiesuannewUI);r.BattleMjLockWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};e.prototype.setParentLabel=function(){var t=this.dataSource[0];var e=t.battleval[0].toNumber();var i=csv.MjHoleProxy.getIns().getCfgMapItem(e);var n=csv.GuajiProxy.getIns().getMijingCfg(i.typeid);r.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_mijing_name",app.getLang(n.name)))};e.getIns=function(){return app.Singleton.getInstance(e)};return e}(r.SbattleWinView);r.SbattleMjLockWinView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";t.boNext=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.closebtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.xiacengbtn.on(Laya.Event.CLICK,this,this.onNextClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.quedingbtn.label=app.getLang("jiesuan_queding2");this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this,98,10);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onLeaveClick=function(){Laya.timer.clear(this,this.loopFreshTime);app.ProtocolRequest.LeaveDailyDgnReq();app.ViewManager.toggleDialog(t,-1,0)};t.prototype.onNextClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);if(this.boNext){app.ProtocolRequest.MountainChallengeReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq()}};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang);guide.GuideItem2.getIns().hide()};t.prototype.refreshAll=function(){var t=this.dataSource;var e=t.battleval[0].toNumber();this.tongguanlab.text=app.getLang("mountain_tips7",e);this.centerLayout.array=t.award;var i=csv.MountainProxy.getIns().getCfg(e+1);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SevenColorMountain);if(i&&app.str2Array(game.Config.getParams(1171),";").indexOf(e.toString())==-1){this.boNext=i&&game.Context.teamLv>=i.teamlevel-n;if(this.boNext&&app.str2Array(game.Config.getParams(1170),";").indexOf(e.toString())!=-1){Laya.timer.once(300,this,this.showGuide)}}else{this.boNext=false;Laya.timer.once(300,this,this.showGuide)}this.startLoop()};t.prototype.showGuide=function(){var t=this.xiacengbtn.parent.localToGlobal(new Laya.Point(this.xiacengbtn.x,this.xiacengbtn.y));guide.GuideItem2.getIns().add(this.xiacengbtn,2,t.x,t.y,this.xiacengbtn.width,this.xiacengbtn.height,true)};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){if(this.boNext){this.quedingbtn.label=app.getLang("jiesuan_queding2");this.xiacengbtn.label=app.getLang("jiesuan_yongzhe_2",this.manager.currControl.closeCd-t);this.quedingbtn.visible=true;this.xiacengbtn.x=412}else{this.xiacengbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t);this.quedingbtn.visible=false;this.xiacengbtn.x=293}}else{this.leave()}};t.SINGLE_KEY="battle.BattleMountainWinView";return t}(ui.jiesuan.qiseshanjiesuanUI);i.BattleMountainWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){var t=this.dataSource[0];var e=t.battleval[0].toNumber();var i=csv.MountainProxy.getIns().getCfg(e+1);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SevenColorMountain);var r=false;if(i&&app.str2Array(game.Config.getParams(1171),";").indexOf(e.toString())==-1){r=i&&game.Context.teamLv>=i.teamlevel-n}if(r){app.ProtocolRequest.MountainChallengeReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq()}};e.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_qiseshan_name",t.battleval[0].toNumber()))};e.getIns=function(){return app.Singleton.getInstance(e)};return e}(i.SbattleWinView);i.SbattleMountainWinView=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};return e}(i.BattleLoseView);i.BattleMountainLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_qiseshan_name",t.battleval[0].toNumber()))};t.getIns=function(){return app.Singleton.getInstance(t)};return t}(i.SbattleLoseView);i.SbattleMountainLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueding.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.btnshanghaitongji.on(Laya.Event.CLICK,this,this.onCheck);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.onCheck=function(){app.ViewManager.toggleDialog(i.BattleHurtStateView,1,0)};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.BattleShowEndReq(i.BattleModel.getIns().battleid)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource[0];var e=this.dataSource[1];if(e){this.imgjieguo.skin="res/static/bg_jiesuan_shengli.png";util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.beijingguang.visible=true;this.imgwofang.visible=true;util.SkUtil.setWinSkt(this.imgwofang);this.imgdidui.visible=false;this.labeltishi01.text=app.getLang("jiesuan_qiecuo_1",t.tarname)}else{this.imgjieguo.skin="res/static/bg_jiesuan_shibai.png";app.SoundManager.getIns().playSound("lose");this.beijingguang.visible=false;this.imgwofang.visible=false;this.imgdidui.visible=true;this.labeltishi01.text=app.getLang("jiesuan_qiecuo_3",t.tarname)}this.startLoop()};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.btnqueding.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattlePvpResultView";return t}(ui.jiesuan.pkjiesuanUI);i.BattlePvpResultView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.Render=function(t,e){t.setData(t.dataSource)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t){this.jinyanchilab.text=t.getName()+app.getLang("jiesuan_jiangli");this.jinyanshuzhilab.text=game.MoneyModel.format(t.count)};t.SINGLE_KEY="battle.BattleResulteRwdItem";t.CommonItemRender=new Laya.Handler(t,t.Render);return t}(ui.jiesuan.jiesuanjiangliitemUI);t.BattleResulteRwdItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.manager=i.BattleManager.getIns();this.x=(Laya.stage.width-this.width)/2;this.on(Laya.Event.CLICK,this,this.onClick);this.ani2.on(Laya.Event.COMPLETE,this,this.onHide)};e.prototype.onClick=function(){app.ViewManager.toggleView(i.BattleSmallResultView,app.AppContainer.flowLayer,-1);if(this.dataSource[3]){app.ViewManager.toggleDialog(this.clz,1,0,[this.dataSource[2],this.dataSource[3]])}else{app.ViewManager.toggleDialog(this.clz,1,0,this.dataSource[2])}};e.prototype.leave=function(){app.ViewManager.toggleView(i.BattleSmallResultView,app.AppContainer.flowLayer,-1);Laya.timer.clear(this,this.loopFreshTime);var t=app.Singleton.getInstance(this.sclz);t.leave()};e.prototype.hide=function(){this.ani2.play(0,false)};e.prototype.onHide=function(){this.mouseEnabled=false};e.prototype.onDisplay=function(){this.mouseEnabled=true;this.callLater(this.refreshAll);this.ani1.play(0,false);Laya.stage.on("small_result_close",this,this.onClick)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);Laya.stage.off("small_result_close",this,this.onClick);app.ViewManager.toggleView(this.sclz,this.boxxiangxi,-1);this.ani2.gotoAndStop(0)};e.prototype.refreshAll=function(){this.clz=this.dataSource[0];this.sclz=this.dataSource[1];var t=this.dataSource[2];var e=this.dataSource[3];app.ViewManager.toggleView(this.sclz,this.boxxiangxi,1,[t,e]);this.startLoop()};e.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;this._hideTime=game.Config.getIntParams(2002);Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};e.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t>this.manager.currControl.closeCd){this.leave()}if(this._hideTime<=0&&this.mouseEnabled){this.hide()}this.labeltime.text=app.getLang("jiesuan_daojishi_1",this._hideTime);this._hideTime--};e.prototype.setLabel=function(t){this.labelmiaoshu.text=t};e.prototype.setIcon=function(t){this.imgshengli.skin="res/static/"+t+".png"};e.SINGLE_KEY="battle.BattleSmallResultView";e.TYPE_ULR={WIN:"jiesuantankuang/bg_jiesuantankuang_shengli",LOSE:"jiesuantankuang/bg_jiesuantankuang_shibai",FENGMO:"jiesuantankuang/bg_jiesuantankuang_fengmojieshu"};return e}(ui.jiesuan.zhandoujiesuantankuangviewUI);i.BattleSmallResultView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this.boxjiangli,96,this.daojulist.spaceX);this.lbl.text=app.getLang("shanshen_tips1");this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;this.centerLayout.array=game.ItemUtil.sortItemsByQua(t.award);this.startLoop();var e=t.battleval[0].toNumber();var i=t.battleval[1].toNumber();this.score.value=csv.DungeonProxy.getIns().getScore(e,i);this.img.visible=this.lbl.visible=csv.DungeonProxy.getIns().canSsslSweep(e,i)};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleSsslWinView";return t}(ui.jiesuan.shanshenshilianjiesuanUI);i.BattleSsslWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_shilian_name",this._id))};e.prototype.setParentIcon=function(){i.BattleSmallResultView.getIns().setIcon(i.BattleSmallResultView.TYPE_ULR.WIN)};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listicon.itemRender=grids.GridView;this.listicon.renderHandler=grids.GridView.StopPropagationCommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource[0];this.listicon.array=game.ItemUtil.sortItemsByQua(t.award);this._id=t.battleval[0].toNumber();var e=t.battleval[1].toNumber();this.imgpingfen.skin="res/static/bg_pingji"+csv.DungeonProxy.getIns().getScore(this._id,e)+".png";this.setParentLabel();this.setParentIcon()};return e}(ui.jiesuan.zhandoujiesuantankuangitem03UI);i.SbattleSsslWinView=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};return e}(i.BattleLoseView);i.BattleSsslLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_shilian_name",t.battleval[0].toNumber()))};t.getIns=function(){return app.Singleton.getInstance(t)};return t}(i.SbattleLoseView);i.SbattleSsslLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this.boxjiangli,96,this.daojulist.spaceX);this.lab1.text=app.getLang("shanshen_tips1");this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=game.ItemUtil.hebingItems(t.award);this.centerLayout.array=game.ItemUtil.sortItemsByQua(e);this.startLoop();var i=t.battleval[1].toNumber();this.score.value=csv.DungeonProxy.getIns().getSzjdScoreStr(t.battleval[1].toNumber());this.img.visible=this.lab1.visible=i==1};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleSzjdWinView";return t}(ui.jiesuan.shanzhongjiudiejiesuanUI);i.BattleSzjdWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_jiudie_name",dailytask.ShanzhongJiudieModel.getIns().sweepId))};e.prototype.setParentIcon=function(){i.BattleSmallResultView.getIns().setIcon(i.BattleSmallResultView.TYPE_ULR.WIN)};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listicon.itemRender=grids.GridView;this.listicon.renderHandler=grids.GridView.StopPropagationCommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource[0];var e=game.ItemUtil.hebingItems(t.award);this.listicon.array=game.ItemUtil.sortItemsByQua(e);var i=t.battleval[1].toNumber();this.imgpingfen.skin="res/static/bg_pingji"+csv.DungeonProxy.getIns().getSzjdScoreStr(i)+".png";this.setParentLabel();this.setParentIcon()};return e}(ui.jiesuan.zhandoujiesuantankuangitem03UI);i.SbattleSzjdWinView=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveDailyDgnReq()};return e}(i.BattleLoseView);i.BattleSzjdLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveDailyDgnReq()};t.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_jiudie_name",dailytask.ShanzhongJiudieModel.getIns().sweepId))};t.getIns=function(){return app.Singleton.getInstance(t)};return t}(i.SbattleLoseView);i.SbattleSzjdLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=grids.GridView.RenderWithoutGetWay;this.centerLayout=new game.CenterLayoutMediator(this.gezilist,this.box,96,this.gezilist.spaceX);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveBossReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());if(t.battleval[1].toNumber()){this.shuominglab.text=app.getLang("shanhai_tips7",e)}else if(t.battleval[2].toNumber()){this.shuominglab.text=app.getLang("shanhai_tips8",e)}else{this.shuominglab.text=app.getLang("shanhai_tips10",e)}var i=game.ItemUtil.hebingItems(t.award);this.centerLayout.array=game.ItemUtil.sortItemsByQua(i);this.startLoop();this.gezilist.scrollTo(0)};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleWorldWinView";return t}(ui.jiesuan.shanhaiyishoujiesuanUI);i.BattleWorldWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_shanhai_name",this._bossName))};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.setDes=function(){var t=this.dataSource[0];this._bossName=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());if(t.battleval[1].toNumber()){this.txtmiaoshu01.text=app.getLang("jiesuan_shanhai_desc_1",this._bossName)}else if(t.battleval[2].toNumber()){this.txtmiaoshu01.text=app.getLang("jiesuan_shanhai_desc_2",this._bossName)}else{this.txtmiaoshu01.text=app.getLang("jiesuan_shanhai_desc_3",this._bossName)}};return e}(i.SbattleWinView);i.SbattleWorldWinView=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveBossReq()};e.prototype.setDes=function(){var t=this.dataSource;var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());this.shuominglab.text=app.getLang("shanhai_tips9",e)};return e}(i.BattleLoseView);i.BattleWorldLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_shanhai_name",e))};t.getIns=function(){return app.Singleton.getInstance(t)};return t}(i.SbattleLoseView);i.SbattleWorldLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClick);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=grids.GridView.RenderWithoutGetWay;this.centerLayout=new game.CenterLayoutMediator(this.gezilist,this.box,96,this.gezilist.spaceX);i.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=i.BattleManager.getIns()};t.prototype.onClick=function(){this.leave()};t.prototype.leave=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(t,-1,0);app.ProtocolRequest.LeaveBossReq()};t.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);util.AniUtil.stopCircle(this.beijingguang)};t.prototype.refreshAll=function(){this.weidaoshuoming.visible=false;var t=this.dataSource;var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());this.shuominglab.text=app.getLang("bosskingkill",t.tarname,e,t.battleval[1].toNumber()?t.battleval[1].toNumber():"未入榜");var i=game.ItemUtil.hebingItems(t.award);this.centerLayout.array=game.ItemUtil.sortItemsByQua(i);if(i.length==0){if(t.battleval[2].toNumber()==1){this.weidaoshuoming.visible=true;this.weidaoshuoming.text=app.getLang("bosskingrewardtips_3")}else{this.weidaoshuoming.visible=true;this.weidaoshuoming.text=app.getLang("bosskingrewardtips_5")}}this.startLoop();this.gezilist.scrollTo(0)};t.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};t.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){this.quedingbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}else{this.leave()}};t.SINGLE_KEY="battle.BattleYaowangResultView";return t}(ui.jiesuan.yaowangzhengbajiesuanUI);i.BattleYaowangWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};e.prototype.setParentLabel=function(){i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_yaowang_name",this._bossName))};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.setDes=function(){var t=this.dataSource[0];this._bossName=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());var e=app.getLang("jiesuan_yaowang_desc_1",t.tarname,this._bossName,t.battleval[1].toNumber()?t.battleval[1].toNumber():"未入榜")+"\n";if(this.listicon.array.length==0){if(t.battleval[2].toNumber()==1){e+=app.getLang("jiesuan_yaowang_desc_2")}this.txtmiaoshu01.text=e;this.txtmiaoshu01.y=(this.height-this.txtmiaoshu01.contextHeight)/2}else{this.txtmiaoshu01.text=e;this.txtmiaoshu01.y=(this.listicon.y-this.txtmiaoshu01.contextHeight)/2}};return e}(i.SbattleWinView);i.SbattleYaowangWinView=e;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.leave=function(){app.ViewManager.toggleDialog(e,-1,0);app.ProtocolRequest.LeaveBossReq()};e.prototype.setDes=function(){this.shuominglab.text=app.getLang("bosskingfirghttips_2")};return e}(i.BattleLoseView);i.BattleYaowangLoseView=n;var r=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boCheckWuxing=false;return t}t.prototype.leave=function(){app.ProtocolRequest.LeaveBossReq()};t.prototype.setParentLabel=function(){var t=this.dataSource[0];var e=csv.BossProxy.getIns().getBossLvName(t.battleval[0].toNumber());i.BattleSmallResultView.getIns().setLabel(app.getLang("jiesuan_yaowang_name",e))};t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.setDes=function(){this.txtmiaoshu.text=app.getLang("jiesuan_yaowang_desc_3")};return t}(i.SbattleLoseView);i.SbattleYaowangLoseView=r})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(r){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";t.boNext=false;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.closebtn.on(Laya.Event.CLICK,this,this.onLeaveClick);this.xiacengbtn.on(Laya.Event.CLICK,this,this.onNextClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.RenderWithoutGetWay;this.touxiang.on(Laya.Event.COMPLETE,this,this.aniStop);this.aniStop();r.BattleHurtRecordView.register(this.btnshanghaitongji);this.manager=r.BattleManager.getIns()};i.prototype.aniStop=function(){this.touxiang.stop();this.touxiang.visible=false};i.prototype.onLeaveClick=function(){this.leave(false)};i.prototype.onNextClick=function(){this.leave(this.boNext)};i.prototype.leave=function(t){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(i,-1,0);if(t){app.ProtocolRequest.TaskTowerReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq();if(this.miniGame){task.MiniGameControl.jump(this.miniGame,this._nextZxrwCfg)}}};i.prototype.onDisplay=function(){util.SkUtil.setWinSkt(this.imgwofang);util.AniUtil.startCircle(this.beijingguang);app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){util.AniUtil.stopCircle(this.beijingguang);Laya.timer.clearAll(this);guide.GuideItem2.getIns().hide();this.aniStop()};i.prototype.onTweenEnd=function(t,e){this.dengjilab.text=app.getLang("family_build_1",game.Context.teamLv);this.touxiang.play(0,false);this.touxiang.visible=true;this.jindutiao.value=0;Laya.Tween.to(this.jindutiao,{value:t,update:new Laya.Handler(this,this.onExpUpdate,[e,0])},1e3,Laya.Ease.quartOut);if(game.Context.teamlvOld>0){game.Context.teamlvOld=0}};i.prototype.onExpUpdate=function(t,e){var i,n;if(e>0){i=Math.floor(this.jindutiao.value*e);n=e}else{i=Math.floor(this.jindutiao.value*t);n=t}this.shuzhilab.text=i+"/"+n};i.prototype.refreshAll=function(){var t=0,e=0;this.txtAdd.text="";this.touxingimg.skin=csv.MyTeamProxy.getIns().getTeamIcon(game.Context.teamAvatar);this.touxiangkuangimg.skin=game.RoleModel.getIns().getHeadFrameIcon();var i=this.dataSource;var n=game.ItemUtil.hebingItems(i.award);var r=[];for(var o=0,a=n.length;o<a;o++){if(n[o].itemID==game.ItemUtil.ENUMS.PET_EXP_ITEM){continue}r.push(n[o])}if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.PET_LIST)){game.ItemUtil.flowMsg(n,game.ItemUtil.ENUMS.PET_EXP_ITEM)}var s=0;for(var o=0;o<r.length;o++){if(r[o].itemID==8024&&r[o].value>0){s=r[o].value;this.txtAdd.text=app.getLang("+{0}",r[o].value);break}}t=csv.MyTeamProxy.getIns().getTeamMaxExp(game.Context.teamLv);var l=game.Context.teamExp/t;if(game.Context.teamlvOld==0){this.dengjilab.text=app.getLang("family_build_1",game.Context.teamLv);this.jindutiao.value=(game.Context.teamExp-s)/t;Laya.Tween.to(this.jindutiao,{value:l,update:new Laya.Handler(this,this.onExpUpdate,[t,e])},1e3,Laya.Ease.quartOut)}else{this.dengjilab.text=app.getLang("family_build_1",game.Context.teamLv-1);e=csv.MyTeamProxy.getIns().getTeamMaxExp(game.Context.teamLv-1);this.jindutiao.value=(e-s+game.Context.teamExp)/e;Laya.Tween.to(this.jindutiao,{value:1,update:new Laya.Handler(this,this.onExpUpdate,[t,e])},1e3,Laya.Ease.quartOut,new Laya.Handler(this,this.onTweenEnd,[l,t]))}this.daojulist.array=game.ItemUtil.getAwardItem([],r);var u=i.battleval[0].toNumber();this.labeltiaojian.text="";this.updateHLXDView(u);this.startLoop()};i.prototype.updateHLXDView=function(t){var e=csv.DungeonProxy.getIns().getZxrwCfg(t);this._nextZxrwCfg=csv.DungeonProxy.getIns().getZxrwCfg(t+1);if(e.type==1){this.tongguanlab.text=app.getLang("jiesuan_zhuxian_1",e.chapter,e.title,e.round)}else{this.tongguanlab.text=app.getLang("jiesuan_zhuxian_2",e.chapter,e.title,e.round)}var i=csv.DungeonProxy.getIns().getZxrwCfg(t+1);if(i){var n=game.Context.isTeamLvReach(i.teamlevel,false);this.miniGame=i.battletype;this.boNext=this.miniGame==0&&i.chapter==e.chapter&&n}else{this.boNext=false;this.miniGame=0}if(this.boNext){this.quedingbtn.label=app.getLang("jiesuan_queding2");this.xiacengbtn.label=app.getLang("jiesuan_yongzhe_2",this.manager.currControl.closeCd);this.quedingbtn.visible=true;this.xiacengbtn.x=412;if(i.id<=game.Config.getIntParams(915)){Laya.timer.once(300,this,this.showGuide)}}else{this.xiacengbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd);this.quedingbtn.visible=false;this.xiacengbtn.x=293;if(i){var n=game.Context.isTeamLvReach(i.teamlevel,false);if(!n){this.labeltiaojian.text=app.getLang("zhuxian_2",i.teamlevel)}}}if(dailytask.DailyTaskModel.getIns().taskMainId==csv.DungeonProxy.getIns().maxOpenNum-1){var r=csv.FunctionsProxy.getIns().getCfg(csv.FunctionsProxy.ENUMS.HLXD_JINGYING);main.FuncOpenView.add(r)}if(e.bigaward!=""){var o=game.ItemUtil.parserList(e.bigaward)[0];game.NoticeManager.getIns().flowMsg(csv.ItemProxy.getTipHtmlName(o.getItemId())+"<span>x"+o.count+"</span>",o.getIconUrl())}};i.prototype.showGuide=function(){var t=this.xiacengbtn.parent.localToGlobal(new Laya.Point(this.xiacengbtn.x,this.xiacengbtn.y));guide.GuideItem2.getIns().add(this.xiacengbtn,2,t.x,t.y,this.xiacengbtn.width,this.xiacengbtn.height,true)};i.prototype.startLoop=function(){this._startTime=this.manager.currControl.resultTime;Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime()};i.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=this.manager.currControl.closeCd){if(this.boNext){this.xiacengbtn.label=app.getLang("jiesuan_yongzhe_2",this.manager.currControl.closeCd-t)}else{this.xiacengbtn.label=app.getLang("jiesuan_queding",this.manager.currControl.closeCd-t)}}else{this.leave(this.boNext)}};i.SINGLE_KEY="battle.BattleZhuxianWinView";return i}(ui.jiesuan.zhuxianrenwujiesuannewUI);r.BattleZhuxianWinView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.leave=function(){var t=false;var e=this.dataSource[0];var i=e.battleval[0].toNumber();var n=csv.DungeonProxy.getIns().getZxrwCfg(i);var r=csv.DungeonProxy.getIns().getZxrwCfg(i+1);if(r){var o=game.Context.isTeamLvReach(r.teamlevel,false);t=r.battletype==0&&r.chapter==n.chapter&&o}if(t){app.ProtocolRequest.TaskTowerReq();main.RoundPassView.getIns().show()}else{app.ProtocolRequest.LeaveDailyDgnReq();if(r.battletype){task.MiniGameControl.jump(r.battletype,r)}}};e.prototype.setParentLabel=function(){var t=this.dataSource[0];var e=t.battleval[0].toNumber();var i=csv.DungeonProxy.getIns().getZxrwCfg(e);if(i.type==1){r.BattleSmallResultView.getIns().setLabel(app.getLang("jjiesuan_huluxiongdi_name",i.chapter,i.round))}else{r.BattleSmallResultView.getIns().setLabel(app.getLang("jjiesuan_huluxiongd2_name",i.chapter,i.round))}if(i.bigaward!=""){var n=game.ItemUtil.parserList(i.bigaward)[0];game.NoticeManager.getIns().flowMsg(csv.ItemProxy.getTipHtmlName(n.getItemId())+"<span>x"+n.count+"</span>",n.getIconUrl())}};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};return e}(r.SbattleWinView);r.SbattleZhuxianWinView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.open=function(t,e){if(Laya.Dialog.manager.checkIfResultSmall()){if(app.ViewManager.DisplayedInStage(i.SbossBattleResultView)){app.ViewManager.toggleView(i.SbossBattleResultView,app.AppContainer.flowLayer,-1)}app.ViewManager.toggleView(i.SbossBattleResultView,app.AppContainer.flowLayer,1,[t,e])}else{app.ViewManager.toggleDialog(i.BossBattleResultView,1,0,t)}};t.close=function(){app.ViewManager.toggleDialog(t,-1,0)};t.closeAll=function(){app.ViewManager.toggleDialog(t,-1,0);app.ViewManager.toggleView(n,app.AppContainer.flowLayer,-1)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.yuandibtn.on(Laya.Event.CLICK,this,this.onMoney)};t.prototype.onFree=function(){this.doClose();i.BattleModel.getIns().relieveFlag=0;app.ProtocolRequest.RelieveReq(0)};t.prototype.doClose=function(){app.ViewManager.toggleDialog(t,-1,0)};t.prototype.onMoney=function(){var t=game.ItemUtil.parserList(game.Config.getParams(453))[0];t.setCount(this.costNum);if(game.GridsModel.getIns().hasEnoughItems(t,false,true)){this.doClose();i.BattleModel.getIns().relieveFlag=1;app.ProtocolRequest.RelieveReq(1)}};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clearAll(this)};t.prototype.refreshAll=function(){var t=this.dataSource;var e=csv.BossProxy.getIns().getCfg(t.battleval[0].toNumber());var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.wanjianame2.text=app.getLang("boss_defeated_tips1",app.getLang(n.monname));this._delayTime=t.battleval[1].toNumber();this.costNum=t.battleval[2].toNumber();this.lblcost.text=this.costNum.toString();this.lblcost.color="#cea364";this.startLoopTime()};t.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=this._delayTime-game.Context.getServerTime();if(t<0){Laya.timer.clear(this,this.loopFreshTime);this.onFree()}this.daojishi2.text=app.getLang("boss_revive_tips1",t)};t.SINGLE_KEY="battle.BossBattleResultView";return t}(ui.alert.bosspkshibaiUI);i.BossBattleResultView=t;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.ani2.on(Laya.Event.COMPLETE,this,this.onHide);this.x=(Laya.stage.width-this.width)/2};e.prototype.onClick=function(){this.ani2.play(0,false);app.ViewManager.toggleDialog(i.BossBattleResultView,1,0,this.dataSource[0])};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this.ani1.play(0,false);Laya.stage.on("small_result_close",this,this.onClick)};e.prototype.onUnDisplay=function(){Laya.timer.clearAll(this);Laya.stage.off("small_result_close",this,this.onClick);this.ani2.gotoAndStop(0)};e.prototype.onFree=function(){this.ani2.play(0,false);i.BattleModel.getIns().relieveFlag=0;app.ProtocolRequest.RelieveReq(0)};e.prototype.onHide=function(){app.ViewManager.toggleView(i.SbossBattleResultView,app.AppContainer.flowLayer,-1)};e.prototype.refreshAll=function(){var t=this.dataSource[0];this._delayTime=t.battleval[1].toNumber();this.startLoopTime();this.labelmiaoshu.text=this.dataSource[1]};e.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime);this.txtmiaoshu01.y=(this.height-this.txtmiaoshu01.contextHeight)/2};e.prototype.loopFreshTime=function(){var t=this._delayTime-game.Context.getServerTime();if(t<=0){Laya.timer.clear(this,this.loopFreshTime);this.onFree()}this.txtmiaoshu01.text=app.getLang("jiesuan_fuhuo_2",t)};return e}(ui.jiesuan.zhandoujiesuantankuangview01UI);i.SbossBattleResultView=n})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.noCloseAll="noCloseAll";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.yuandibtn.on(Laya.Event.CLICK,this,this.onMoney)};t.open=function(t,e){if(Laya.Dialog.manager.checkIfResultSmall()){if(app.ViewManager.DisplayedInStage(i.SbossPkLoseView)){app.ViewManager.toggleView(i.SbossPkLoseView,app.AppContainer.flowLayer,-1)}app.ViewManager.toggleView(i.SbossPkLoseView,app.AppContainer.flowLayer,1,[t,e])}else{app.ViewManager.toggleDialog(i.BossPkLoseView,1,0,t)}};t.close=function(){app.ViewManager.toggleDialog(t,-1,0)};t.closeAll=function(){app.ViewManager.toggleDialog(i.BossBattleResultView,-1,0);app.ViewManager.toggleView(n,app.AppContainer.flowLayer,-1)};t.prototype.onFree=function(){i.BossPkLoseView.close();i.BattleModel.getIns().relieveFlag=0;app.ProtocolRequest.RelieveReq(0)};t.prototype.onMoney=function(){var t=game.ItemUtil.parserList(game.Config.getParams(453))[0];t.setCount(this.costNum);if(game.GridsModel.getIns().hasEnoughItems(t,false,true)){i.BossPkLoseView.close();i.BattleModel.getIns().relieveFlag=1;app.ProtocolRequest.RelieveReq(1)}};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clearAll(this)};t.prototype.refreshAll=function(){var t=this.dataSource;this.wanjianame2.text=app.getLang("boss_defeated_tips2",t.uname);this._delayTime=t.relievecd;this.costNum=t.relievecost;this.lblcost.text=this.costNum.toString();this.lblcost.color="#cea364";this.startLoopTime()};t.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=this._delayTime-game.Context.getServerTime();if(t<0){Laya.timer.clear(this,this.loopFreshTime);this.onFree()}this.daojishi2.text=app.getLang("boss_revive_tips3",t)};t.SINGLE_KEY="battle.BossPkLoseView";return t}(ui.alert.bosspkshibaiUI);i.BossPkLoseView=t;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.ani2.on(Laya.Event.COMPLETE,this,this.onHide);this.x=(Laya.stage.width-this.width)/2};e.prototype.onClick=function(){this.ani2.play(0,false);app.ViewManager.toggleDialog(i.BossPkLoseView,1,0,this.dataSource[0])};e.prototype.onFree=function(){this.ani2.play(0,false);i.BattleModel.getIns().relieveFlag=0;app.ProtocolRequest.RelieveReq(0)};e.prototype.onHide=function(){app.ViewManager.toggleView(i.SbossPkLoseView,app.AppContainer.flowLayer,-1)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this.ani1.play(0,false);Laya.stage.on("small_result_close",this,this.onClick)};e.prototype.onUnDisplay=function(){Laya.timer.clearAll(this);Laya.stage.off("small_result_close",this,this.onClick);this.ani2.gotoAndStop(0)};e.prototype.refreshAll=function(){var t=this.dataSource[0];this.killName=t.uname;this.labelmiaoshu.text=this.dataSource[1];this._delayTime=t.relievecd;this.startLoopTime()};e.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime);this.txtmiaoshu01.y=(this.height-this.txtmiaoshu01.contextHeight)/2};e.prototype.loopFreshTime=function(){var t=this._delayTime-game.Context.getServerTime();if(t<=0){Laya.timer.clear(this,this.loopFreshTime);this.onFree()}this.txtmiaoshu01.text=app.getLang("jiesuan_fuhuo_1",this.killName,t)};return e}(ui.jiesuan.zhandoujiesuantankuangview01UI);i.SbossPkLoseView=n})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.imgtouxiang.skin=t;this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(e)};e.SINGLE_KEY="rank.BattleWuxingHeadView";return e}(ui.paihangbang.paihangbangtouxiangitemUI);t.BattleWuxingHeadView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BattleModel.getIns();this.huahegn.visible=false;this.zhuzitexiao.visible=false;this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(t){t.stopPropagation();if(this.canClick){var e=this.parent.localToGlobal(new Laya.Point(this.x+this.width/2,this.y+this.height/2));tip.TipWuxingBuffView.openEffect(this.id,this.lv,e)}};e.prototype.onDisplay=function(){this.canClick=false;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.huahegn.visible=false;this.huahegn.stop();this.zhuzitexiao.visible=false;this.zhuzitexiao.stop()};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i,n,r){this.boMine=r;this.type=t;this.zhuzi.skin="res/static/wuxingzhandou/bg_wuxing_zhandou_wx"+this.type+".png";this.value=e;var o=app.str2Array(game.Config.getParams(949+this.type),"-");this.id=parseInt(o[0]);this.lv=parseInt(o[1]);if(n){this.shuzhi.text=e.toString();this.shuzhi.color=r?"#c6ffec":"#fdffd4"}else{this.shuzhi.text=""}this.state=i};Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:true,configurable:true});e.prototype.playCut=function(){this.huahegn.visible=true;this.huahegn.play(0,false)};e.prototype.stopCut=function(){this.huahegn.visible=false;this.huahegn.stop();this.alpha=0};e.prototype.playShine=function(){this.mouseEnabled=true;this.zhuzitexiao.visible=true;this.zhuzitexiao.play()};e.prototype.stopShine=function(){this.zhuzitexiao.visible=false;this.zhuzitexiao.stop()};e.prototype.setCircle=function(t){this._initAngle=t;this._scale=1;this._r=100};e.prototype.updateFrame=function(){this._initAngle+=Math.PI/60;this._r-=1*app.TimerRewriter.battleScale;if(this._r<=0){this._r=0}this.x=Laya.stage.width/2+Math.cos(this._initAngle)*this._r;this.y=Laya.stage.height/2+Math.sin(this._initAngle)*this._r;this._scale+=.01*app.TimerRewriter.battleScale;this.scale(this._scale,this._scale)};e.prototype.clear=function(){this.removeSelf();this.alpha=1;this.keItem=null;this.beKeItem=null;this.scale(1,1);this.stopShine();app.MyTween.clearAll(this);Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="battle.BattleWuxingItem";e.R=30;e.D=60;return e}(ui.wuxingzhandou.wuxingshuxingqiuUI);i.BattleWuxingItem=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(u){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.mWeizhis=[this.m1,this.m2,this.m3,this.m4,this.m5];this.eWeizhis=[this.e1,this.e2,this.e3,this.e4,this.e5];this.width=Laya.stage.width;this.height=Laya.stage.height;this.mouseThrough=true;this._model=u.BattleModel.getIns();this._enterEndHandler=new Laya.Handler(this,this.fightValue,[-1]);this.baozha.visible=false};e.prototype.getMineWxPosById=function(t){for(var e=0,i=this.showA.length;e<i;e++){var n=this.showA[e];if(n.id==t&&n.parent){return n.parent.localToGlobal(new Laya.Point(n.x,n.y))}}return new Laya.Point(0,0)};e.prototype.getEnemyWxPosById=function(t){for(var e=0,i=this.showB.length;e<i;e++){var n=this.showB[e];if(n.id==t&&n.parent){return n.parent.localToGlobal(new Laya.Point(n.x,n.y))}}return new Laya.Point(0,0)};e.prototype.onDisplay=function(){this.box1.x=-this.box1.width;this.box2.x=Laya.stage.width+this.box2.width;this.baozha.x=Laya.stage.width/2;this.baozha.y=Laya.stage.height/2;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.dataSource[0]=null;this.stopBaozha();Laya.timer.clearAll(this);app.MyTween.clearAll(this.box1);app.MyTween.clearAll(this.box2);app.MyTween.clearAll(this.biaoti);for(var t=0,e=this.showA.length;t<e;t++){this.showA[t].clear()}for(var t=0,e=this.showB.length;t<e;t++){this.showB[t].clear()}if(app.ViewManager.DisplayedInStage(tip.TipWuxingBuffView.SINGLE_KEY)){tip.TipWuxingBuffView.closeEffect()}};e.prototype.refreshAll=function(){this.mMax=0;this.eMax=0;for(var t=1;t<=5;t++){var e=this._model.battleInfo.attackbuff[t-1];var i=this._model.battleInfo.defendbuff[t-1];if(e){this.mMax++}if(i){this.eMax++}}var n;var r;var o;var a;switch(this._model.battleType){case u.BattleConst.BATTLE_TYPE.ZHUXIAN:case u.BattleConst.BATTLE_TYPE.GUANKA_PASS:case u.BattleConst.BATTLE_TYPE.DUNGEON_MOUNTAIN:case u.BattleConst.BATTLE_TYPE.BOSS_SecreArea:case u.BattleConst.BATTLE_TYPE.MJ_LOCK:case u.BattleConst.BATTLE_TYPE.TASK:case u.BattleConst.BATTLE_TYPE.FUMO:this.boIgnore=false;this.boPvp=false;this.mX=10+u.BattleWuxingItem.R;if(app.ViewManager.DisplayedInStage(u.LevelHurtBuffView.SINGLE_KEY)){this.mY=140+ScreenAdapter.OFFSET_Y+u.BattleWuxingItem.R+u.LevelHurtBuffView.HEIGHT}else{this.mY=140+ScreenAdapter.OFFSET_Y+u.BattleWuxingItem.R}n=csv.MyTeamProxy.getIns().getTeamIcon(this._model.battleInfo.attack);r=game.Context.mainRole.headframeId;o=csv.MonsterProxy.getIns().getMonsterWuxingHead(this._model.battleInfo.defend);a=0;break;case u.BattleConst.BATTLE_TYPE.PVP_BOSS:case u.BattleConst.BATTLE_TYPE.PVP_ARENA:case u.BattleConst.BATTLE_TYPE.PVP_JJC:case u.BattleConst.BATTLE_TYPE.PVP_HOME:case u.BattleConst.BATTLE_TYPE.PVP_GUILD:case u.BattleConst.BATTLE_TYPE.KFXL_PVP:this.boIgnore=false;this.boPvp=true;this.mX=118+u.BattleWuxingItem.R;this.mY=20+ScreenAdapter.OFFSET_Y+u.BattleWuxingItem.R;this.eX=Laya.stage.width-118-u.BattleWuxingItem.R;this.eY=20+ScreenAdapter.OFFSET_Y+u.BattleWuxingItem.R;n=csv.MyTeamProxy.getIns().getTeamIcon(this._model.battleInfo.attack);o=csv.MyTeamProxy.getIns().getTeamIcon(this._model.battleInfo.defend);r=this._model.mineTeamArr[0].headframeId;a=this._model.enemyTeamArr[0].headframeId;break;default:this.boIgnore=true;this.boPvp=false;n=csv.MyTeamProxy.getIns().getTeamIcon(this._model.battleInfo.attack);r=game.Context.mainRole.headframeId;o=csv.MonsterProxy.getIns().getMonsterWuxingHead(this._model.battleInfo.defend);a=0;this.mX=10+u.BattleWuxingItem.R;this.mY=140+ScreenAdapter.OFFSET_Y+u.BattleWuxingItem.R}var s=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.wuxingPass);if(s.switch&&s.value==1){this.boIgnore=true}if(this.boIgnore){this.biaoti.visible=false;this.vsimg.visible=false;this.directShow()}else{var l=false;if(!this.boPvp){for(var t=1;t<=5;t++){var i=this._model.battleInfo.defendattr[t-1];if(i){l=true}}}if(this.boPvp||l){this.biaoti.visible=true;this.vsimg.visible=false;this.head1.setData(n,r);this.head2.setData(o,a);this.enter()}else{this.biaoti.visible=false;this.vsimg.visible=false;this.directShow()}}};e.prototype.directShow=function(){this.showA=[];this.showB=[];var t=0;var e=0;for(var i=1;i<=5;i++){var n=this._model.battleInfo.attackbuff[i-1];var r=this._model.battleInfo.defendbuff[i-1];if(n){var o=Laya.Pool.getItemByClass(u.BattleWuxingItem.SINGLE_KEY,u.BattleWuxingItem);o.setData(i,n,0,false,true);o.playShine();o.anchorX=o.anchorY=.5;this.showA.push(o);if(this.boPvp){o.point=new Laya.Point(this.mX,this.mY+t*u.BattleWuxingItem.D)}else{o.point=new Laya.Point(this.mX+t*u.BattleWuxingItem.D,this.mY)}o.x=o.point.x;o.y=o.point.y;this.addChild(o);o.canClick=true;t++}if(r){var a=Laya.Pool.getItemByClass(u.BattleWuxingItem.SINGLE_KEY,u.BattleWuxingItem);a.setData(i,r,0,false,false);a.playShine();a.anchorX=a.anchorY=.5;this.showB.push(a);this.addChild(a);a.canClick=true;if(this.boPvp){a.point=new Laya.Point(this.eX,this.eY+e*u.BattleWuxingItem.D);a.x=a.point.x;a.y=a.point.y}else{var s=this.getEnemyFlyPoints(a,e);a.point=new Laya.Point(s[0],s[1]);a.x=a.point.x;a.y=a.point.y}e++}}this.dataSource[0]&&this.dataSource[0].run()};e.prototype.enter=function(){app.SoundManager.getIns().playSound("wuxing");this.biaoti.alpha=1;this.biaoti.skin="res/static/wuxingzhandou/bg_wuxing_zhandou_title_1.png";app.MyTween.to(this.box1,{x:0},500,Laya.Ease.linearNone,this._enterEndHandler);app.MyTween.to(this.box2,{x:Laya.stage.width},500);this.showValue();this.addChild(this.biaoti);this.addChild(this.baozha)};e.prototype.showValue=function(){this.showA=[];this.showB=[];var t=0;for(var e=1;e<=5;e++){var i=this._model.battleInfo.attackattr[e-1];var n=this._model.battleInfo.defendattr[e-1];if(!this.boPvp&&!n){continue}if(i||n){t++}}var r=0;for(var e=1;e<=5;e++){var i=this._model.battleInfo.attackattr[e-1];var n=this._model.battleInfo.defendattr[e-1];if(!this.boPvp&&!n){continue}if(i||n){var o=Laya.Pool.getItemByClass(u.BattleWuxingItem.SINGLE_KEY,u.BattleWuxingItem);o.setData(e,i,0,true,true);o.alpha=0;o.anchorX=o.anchorY=.5;this.showA.push(o);o.point=new Laya.Point(this.mWeizhis[r].x-this.box1.pivotX,this.box1.y+this.mWeizhis[r].y-this.box1.pivotY);o.x=-this.box1.width;o.y=o.point.y;this.addChild(o);var a=Laya.Pool.getItemByClass(u.BattleWuxingItem.SINGLE_KEY,u.BattleWuxingItem);a.setData(e,n,0,true,false);a.alpha=0;a.anchorX=a.anchorY=.5;this.showB.push(a);a.point=new Laya.Point(Laya.stage.width+this.eWeizhis[t-r-1].x-this.box2.pivotX,this.box2.y+this.eWeizhis[t-r-1].y-this.box2.pivotY);a.x=Laya.stage.width+this.box2.width;a.y=a.point.y;this.addChild(a);r++;app.MyTween.to(o,{x:o.point.x,alpha:1},500);app.MyTween.to(a,{x:a.point.x,alpha:1},500)}}};e.prototype.fightValue=function(t){if(t==2){for(var e=0,i=this.showA.length;e<i;e++){var n=this.showA[e];var r=this.showB[e];if(n.state==2){n.stopCut()}if(r.state==2){r.stopCut()}}this.checkFive();return}if(t==0){for(var o=0,i=this.showA.length;o<i;o++){var n=this.showA[o];var r=this.showB[o];if(n.value>r.value){n.state=1;n.playShine();r.state=2;r.playCut()}else if(n.value<r.value){n.state=2;n.playCut();r.state=1;r.playShine()}else{n.state=1;n.playShine();r.state=2;r.playCut()}}}Laya.timer.once(500,this,this.fightValue,[++t])};e.prototype.checkFive=function(){for(var t=0,e=this.showA.length;t<e;t++){this.showA[t].shuzhi.text=""}for(var t=0,e=this.showB.length;t<e;t++){this.showB[t].shuzhi.text=""}if(this._model.battleInfo.attackskill&&this._model.battleInfo.attackbuff.indexOf(0)==-1){this.showFive(1)}else if(this._model.battleInfo.defendskill&&this._model.battleInfo.defendbuff.indexOf(0)==-1){this.showFive(2)}else{var i=false;for(var t=0,e=this.showA.length;t<e;t++){if(this.showA[t].state==1){i=true;break}}var n=false;for(var t=0,e=this.showB.length;t<e;t++){if(this.showB[t].state==1){n=true;break}}if(i&&n){this.fightWuxing()}else if(i||n){this.fenpei()}else{this.biaoti.alpha=0;this.stopBaozha();this.hideBg();this.directShow()}}};e.prototype.showFive=function(t){this.biaoti.skin="res/static/wuxingzhandou/bg_wuxing_zhandou_title_3.png";this.hideBg();var e=t==1?this.showA:this.showB;var i=2*Math.PI/5;for(var n=0,r=e.length;n<r;n++){var o=n*i-Math.PI/2;var a=Laya.stage.width/2+Math.cos(o)*100;var s=Laya.stage.height/2+Math.sin(o)*100;app.MyTween.to(e[n],{x:a,y:s},1e3);e[n].setCircle(o)}Laya.timer.once(1500,this,this.playCircle,[e])};e.prototype.playCircle=function(t){app.MyTween.to(this.biaoti,{alpha:0},200,null,null,500);Laya.timer.frameLoop(1,this,this.circle,[t]);Laya.timer.once(1800,this,this.stopCircle,[t])};e.prototype.circle=function(t){for(var e=0,i=t.length;e<i;e++){t[e].updateFrame()}};e.prototype.stopCircle=function(t){Laya.timer.clear(this,this.circle);for(var e=0,i=t.length;e<i;e++){t[e].clear()}this.directShow();scene.SceneMediator.getInstance().shakeScene(600,15,3);this.baozha.visible=true;this.baozha.on(Laya.Event.COMPLETE,this,this.stopBaozha);this.baozha.play(0,false)};e.prototype.fightWuxing=function(){this.biaoti.skin="res/static/wuxingzhandou/bg_wuxing_zhandou_title_2.png";var t=[];for(var e=0,i=this.showA.length;e<i;e++){var n=this.showA[e];var r=this.showB[e];if(n.state==1){var o=this.getKezhiItem(n.type,false);if(o&&o.state==1){n.keItem=o;o.beKeItem=n;t.push(o)}}if(r.state==1){var o=this.getKezhiItem(r.type,true);if(o&&o.state==1){r.keItem=o;o.beKeItem=r;t.push(o)}}}var a=[];for(var e=0,i=t.length;e<i;e++){var s=t[e];if(!s.keItem){var l=[];var u=s;while(u.beKeItem){l.push(u.beKeItem);u=u.beKeItem}a=a.concat(l)}}this.playFight(a,0)};e.prototype.getKezhiItem=function(t,e){var i=game.Context.WUXING_KEZHI[t];var n=e?this.showA:this.showB;for(var r=0,o=n.length;r<o;r++){if(n[r].type==i){return n[r]}}return null};e.prototype.playFight=function(t,e){var i=t[e];if(!i){this.fenpei();return}var n=i.x;var r=i.y;app.MyTween.to(i,{x:i.keItem.x,y:i.keItem.y},300,null,Laya.Handler.create(this,this.playSecondFight,[t,e,i,i.keItem,n,r]))};e.prototype.playSecondFight=function(t,e,i,n,r,o){manager.EffectManager.playStageEffectByPos("skill_ke",this,n.x,n.y);n.clear();app.MyTween.to(i,{x:r,y:o},300,null,Laya.Handler.create(this,this.playFight,[t,++e]))};e.prototype.fenpei=function(){this.stopBaozha();this.hideBg();this.biaoti.skin="res/static/wuxingzhandou/bg_wuxing_zhandou_title_4.png";app.MyTween.to(this.biaoti,{alpha:0},500,null,null,500);var t=0;for(var e=0,i=this.showA.length;e<i;e++){var n=this.showA[e];n.canClick=true;if(this._model.battleInfo.attackbuff[n.type-1]){var r=void 0;var o=void 0;if(this.boPvp){r=this.mX;o=this.mY+t*u.BattleWuxingItem.D}else{r=this.mX+t*u.BattleWuxingItem.D;o=this.mY}Laya.timer.once(t*200,this,l,[n,r,o],false);t++}else{n.clear()}}t=0;for(var e=0,i=this.showB.length;e<i;e++){var a=this.showB[e];a.canClick=true;if(this._model.battleInfo.defendbuff[a.type-1]){var r=void 0;var o=void 0;if(this.boPvp){r=this.eX;o=this.eY+t*u.BattleWuxingItem.D}else{var s=this.getEnemyFlyPoints(a,t);r=s[0];o=s[1]}Laya.timer.once(t*200,this,l,[a,r,o],false);t++}else{a.clear()}}this.dataSource[0]&&this.dataSource[0].run();function l(t,e,i){app.SoundManager.getIns().playSound("wuxingfly");app.MyTween.to(t,{x:e,y:i},300)}};e.prototype.getEnemyFlyPoints=function(t,e){var i;var n;var r=this.eMax%2==1;var o;if(r){o=e-Math.floor(this.eMax/2)}else{o=e-this.eMax/2+.5}switch(this._model.battleType){case u.BattleConst.BATTLE_TYPE.BOSS_WORLD:case u.BattleConst.BATTLE_TYPE.BOSS_CAVE:case u.BattleConst.BATTLE_TYPE.BOSS_YEWAI:case u.BattleConst.BATTLE_TYPE.GUILD_BOSS:i=100+e*u.BattleWuxingItem.D+(Laya.stage.width-404)/2+u.BattleWuxingItem.R;n=348+ScreenAdapter.OFFSET_Y+u.BattleWuxingItem.R;break;case u.BattleConst.BATTLE_TYPE.DUNGEON_SZJD:i=o*u.BattleWuxingItem.D+Laya.stage.width-336/2;n=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-u.BattleWuxingItem.R-u.ShanzhongJiudieScoreView.H-ScreenAdapter.OFFSET_BOTTOM;break;case u.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:i=o*u.BattleWuxingItem.D+Laya.stage.width-336/2;n=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-u.BattleWuxingItem.R-u.BattleLimitTimeView.H2-u.BattleScoreView.H-ScreenAdapter.OFFSET_BOTTOM;break;case u.BattleConst.BATTLE_TYPE.DUNGEON_MOUNTAIN:case u.BattleConst.BATTLE_TYPE.ZHUXIAN:case u.BattleConst.BATTLE_TYPE.GUANKA_PASS:case u.BattleConst.BATTLE_TYPE.KFXL_PVE:case u.BattleConst.BATTLE_TYPE.FUMO:i=o*u.BattleWuxingItem.D+Laya.stage.width-336/2;n=Laya.stage.height-main.MainBottomView.HEIGHT2-chat.ChatMiniView.HEIGHT-30-u.BattleWuxingItem.R-u.BattleLimitTimeView.H1-10-ScreenAdapter.OFFSET_BOTTOM;break;case u.BattleConst.BATTLE_TYPE.BOSS_SecreArea:case u.BattleConst.BATTLE_TYPE.MJ_LOCK:i=o*u.BattleWuxingItem.D+Laya.stage.width-336/2;n=Laya.stage.height-main.MainBottomView.HEIGHT2-chat.ChatMiniView.HEIGHT-30-u.BattleWuxingItem.R-u.BattleLimitTimeView.H2-10-ScreenAdapter.OFFSET_BOTTOM;break;default:i=Laya.stage.width+this.box2.width;n=t.point.y|this.box2.y+this.eWeizhis[0].y-this.box2.pivotY}return[i,n]};e.prototype.hideBg=function(){this.vsimg.visible=false;app.MyTween.to(this.box1,{x:-this.box1.width},200);app.MyTween.to(this.box2,{x:Laya.stage.width+this.box2.width},200)};e.prototype.stopBaozha=function(){this.baozha.stop();this.baozha.visible=false;this.baozha.offAll()};e.SINGLE_KEY="battle.BattleWuxingView";return e}(ui.wuxingzhandou.wuxingzhandouUI);u.BattleWuxingView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var n=dailytask.YaoDongModel;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=0;this.y=Laya.stage.height-this.height-chat.ChatMiniView.HEIGHT;this._model=i.BattleModel.getIns();this.zOrder=100};e.prototype.onDisplay=function(){this.xinyunzhishuzhi.text="0";this.shuzhilab.text="0%";n.getIns().on(n.LUCK_INFO_CHANGE,this,this.onLuckChange);this._model.on(i.BattleModel.INFO_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){n.getIns().off(n.LUCK_INFO_CHANGE,this,this.onLuckChange);this._model.off(i.BattleModel.INFO_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.startLoopTime()};e.prototype.onLuckChange=function(){var t=n.getIns().luckInfo;if(t){this.xinyunzhishuzhi.text=t.lucky.toString();var e=t.teamnum*game.Config.getIntParams(game.ConfigID.YD_HURT_TEAM)+t.guildnum*game.Config.getIntParams(game.ConfigID.YD_HURT_FAMILY);this.shuzhilab.text=e+"%"}};e.prototype.startLoopTime=function(){this._maxTime=game.Config.getIntParams(game.ConfigID.YD_COPY_TIME);var t=game.Context.getServerTime()-this._model.battleval[1];var e=this._maxTime-t;this.daojishi.value=util.TimeUtil.formatTime(e,false);Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=game.Context.getServerTime()-this._model.battleval[1];var e=this._maxTime-t;if(e>=0){this.daojishi.value=util.TimeUtil.formatTime(e,false)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="battle.BattleYaodongInfoView";return e}(ui.wudiyaodong.wudiyaodongdaojishiUI);i.BattleYaodongInfoView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var u=dailytask.YaoDongModel;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-this.height-chat.ChatMiniView.HEIGHT;this._model=i.BattleModel.getIns();this.zOrder=100};e.prototype.onDisplay=function(){u.getIns().on(u.RWD_INFO_CHANGE,this,this.setRwd);this._model.on(i.BattleModel.INFO_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){u.getIns().on(u.RWD_INFO_CHANGE,this,this.setRwd);this._model.off(i.BattleModel.INFO_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.setRwd()};e.prototype.setRwd=function(){var t=u.getIns().rwdInfo;var e=[];for(var i=0,n=t.length;i<n;i++){var r=t[i];if(Uint64.equal(r.uid,game.Context.mainRoleId)){for(var o=0,a=r.award.length;o<a;o++){var s=r.award[o];var l=game.ItemUtil.createVO(s.itemID);l.setCount(s.value);e.push(l)}}}this.daojulist.array=game.ItemUtil.hebingItems(e)};e.prototype.getMyAwardsPos=function(){return this.daojulist.parent.localToGlobal(new Laya.Point(this.daojulist.x,this.daojulist.y))};e.SINGLE_KEY="battle.BattleYaodongRwdView";return e}(ui.wudiyaodong.wudiyaodongwodejiangliUI);i.BattleYaodongRwdView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this.y=330;this._model=i.BattleModel.getIns();this.zOrder=99};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.setData()};e.prototype.setData=function(){this.startLoopTime()};e.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=game.Context.getServerTime()-this._model.battleval[2];if(t<1){t=1}var e=csv.YaoDongProxy.getIns().getJump(t,this._model.battleval[0]);this.lab1.text=e;this.lab2.text=app.getLang("endless_4",t)};e.SINGLE_KEY="battle.BattleYdJumpView";return e}(ui.wudiyaodong.wudiyaodongjumpUI);i.BattleYdJumpView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(p){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jilulist.itemRender=p.YdLotteryMsgItem;this.jilulist.renderHandler=new Laya.Handler(this,this.onMsgHandler);this.daojugezi.itemRender=p.YdLotteryRwdItem;this.daojugezi.renderHandler=new Laya.Handler(this,this.onRwdHandler);this.cdMask=new common.CdMask(this.tiao);var t=app.str2Array(game.Config.getParams(game.ConfigID.YD_LOTTERY_CD));this._lotteryTime=parseInt(t[0]);this._closeTime=parseInt(t[1]);this.fangqibtn.on(Laya.Event.CLICK,this,this.onFangqi);this.box.on(Laya.Event.CLICK,this,this.onRoll);this.x=(Laya.stage.width-this.width)/2;this.y=(Laya.stage.height-this.height)/2;this.zOrder=app.AppContainer.UI_LAYER_NUME.UP_BUTTON};t.prototype.onRoll=function(){app.ProtocolRequest.RollAwardReq(1)};t.prototype.onFangqi=function(){app.ProtocolRequest.RollAwardReq(0)};t.prototype.onMsgHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onRwdHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.setData=function(t){this.dataSource=t;this.refreshAll()};t.prototype.refreshAll=function(){var t=this.dataSource;var e=[];for(var i=0,n=t.rolls.length;i<n;i++){var r=t.rolls[i];if(Uint64.equal(r.uid,game.Context.mainRoleId)){if(r.flag==2){this.box.visible=false;this.fangqibtn.visible=false;this.yifangqi.visible=true;this.shuzhi.visible=false}else if(r.flag==1){this.box.visible=false;this.fangqibtn.visible=false;this.yifangqi.visible=false;this.shuzhi.visible=true;this.shuzhi.value=r.rpoint.toString()}else{this.box.visible=true;this.fangqibtn.visible=true;this.yifangqi.visible=false;this.shuzhi.visible=false;this.touziani.play(0);this.startLoop()}}e.unshift(r)}this.jilulist.array=e;this.daojugezi.array=t.award;if(t.endtime>=t.starttime){this.startEnd()}};t.prototype.startLoop=function(){this.loopFreshTime();Laya.timer.loop(50,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=this.dataSource;var e=game.Context.getServerTimeM()-t.starttime*1e3;var i=e/(this._lotteryTime*1e3);if(i<=1){this.cdMask.setProgress(i)}else{Laya.timer.clear(this,this.loopFreshTime)}};t.prototype.startEnd=function(){Laya.timer.once(3e3,this,this.endTimeClose);var t=this.dataSource;var e;var i=0;for(var n=0,r=t.rolls.length;n<r;n++){var o=t.rolls[n];if(o.flag==1&&o.rpoint>i){i=o.rpoint;e=o}}if(e&&Uint64.equal(game.Context.mainRoleId,e.uid)){var a=this.daojugezi.parent.localToGlobal(new Laya.Point(this.daojugezi.x,this.daojugezi.y));var s=p.BattleYaodongRwdView.getIns().getMyAwardsPos();var l=[];for(var n=0,r=t.award.length;n<r;n++){var u=t.award[n];l.push(csv.ItemProxy.getUrl(u.itemID))}manager.ItemFlyManager.playFlyByStartAndEnd(a,s,l,600);Laya.timer.once(600,this,app.ProtocolRequest.ViewRollAwardReq)}};t.prototype.endTimeClose=function(){app.ViewManager.toggleView(p.BattleYdLotteryView,app.AppContainer.uiLayer,-1)};t.SINGLE_KEY="battle.BattleYdLotteryView";return t}(ui.wudiyaodong.jingxidajiangtipUI);p.BattleYdLotteryView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)/2;this._model=i.BattleModel.getIns();this.zOrder=99};e.prototype.onDisplay=function(){this.y=140+ScreenAdapter.OFFSET_Y;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.showRound()};e.prototype.showRound=function(){this.guanshu.value=this._model.battleval[0].toString();this.ani2.play(0,false)};e.SINGLE_KEY="battle.BattleYdRoundView";return e}(ui.bosszhandou.guanshuUI);i.BattleYdRoundView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t._factor=0;t.boLink=true;t.scale(1.2,1.2);t.isoType=isometric.IsoType.AVATAR_TYPE;t.imgIcon=new Laya.Image;t.imgIcon.width=80;t.imgIcon.height=80;t.imgIcon.anchorX=.5;t.imgIcon.anchorY=1;t.isoDisplay.addChild(t.imgIcon);t.imgZhao=new game.AniView("skill_diaoluo",game.AniView.FILE_NAME.MAP);t.isoDisplay.addChild(t.imgZhao);t._dropHandler=new Laya.Handler(t,t.dropEnd);t._clickHandler=new Laya.Handler(t,t.startFly);t.on(Laya.Event.DISPLAY,t,t.onDisplay);t.on(Laya.Event.UNDISPLAY,t,t.onUnDisplay);return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.onDisplay=function(){this.boDrop=false;this.boWin=false;this.imgZhao.play()};t.prototype.onUnDisplay=function(){app.MyTween.clearAll(this);Laya.timer.clear(this,this.startFly);Laya.Pool.recover(i.SceneAward.SINGLE_KEY,this);this.imgZhao.stop();this._hitAera.clickHandler=null};t.prototype.createItem=function(t,e){this.itemId=t;this.cfg=csv.ItemProxy.getIns().getItemCfgById(t);this.imgIcon.skin=csv.ItemProxy.getUrl(this.cfg);scene.SceneMediator.getInstance().addIsoObj(this);app.MyTween.to(this,{y:e},1e3,Laya.Ease.backInOut,this._dropHandler)};t.prototype.dropEnd=function(){this.boDrop=true;if(!this._hitAera){this._hitAera=new n(90,90)}this._hitAera.x=this.x;this._hitAera.y=this.y;scene.SceneMediator.getInstance().isoWorld.addIsoChild(this._hitAera);this.addDrop()};t.prototype.createGet=function(){this.boWin=true;this.addDrop()};t.prototype.addDrop=function(){if(this.boWin&&this.boDrop){this._hitAera.clickHandler=this._clickHandler;Laya.timer.once(3e3,this,this.startFly)}};t.prototype.startFly=function(){scene.SceneMediator.getInstance().isoWorld.removeIsoChild(this._hitAera);if(this.boFabao){var t=manager.ItemFlyManager.changePos(this);var e=Laya.Pool.getItemByClass(manager.TailFabaoFlyItem.SINGLE_KEY,manager.TailFabaoFlyItem);e.init(this.cfg.qua,app.AppContainer.flowLayer,t.x,t.y,t.x,-100,t.x,t.y,0,this.handler)}else{var t=manager.TailDropFlyItem.changePos(this);var i=manager.TailDropFlyItem.changePos(main.MainUIIcon.getMainUIIcon(csv.MainIconProxy.BAG));var e=Laya.Pool.getItemByClass(manager.TailDropFlyItem.SINGLE_KEY,manager.TailDropFlyItem);e.init(this.imgIcon.skin,t.x,t.y,i.x,i.y,app.AppContainer.flyLayer,0,this.handler)}scene.SceneMediator.getInstance().removeIsoObj(this)};Object.defineProperty(t.prototype,"factor",{get:function(){return this._factor},set:function(t){this._factor=t;this.x=(1-t)*(1-t)*this.p1.x+2*t*(1-t)*this.p2.x+t*t*this.p3.x;this.y=(1-t)*(1-t)*this.p1.y+2*t*(1-t)*this.p2.y+t*t*this.p3.y},enumerable:true,configurable:true});t.SINGLE_KEY="battle.SceneAward";return t}(isometric.IsoSprite);i.SceneAward=t;var n=function(n){__extends(t,n);function t(t,e){var i=n.call(this)||this;i.mouseEnabled=true;i.isoType=isometric.IsoType.HIT_TYPE;i.hitArea=new Laya.Rectangle(-t/2,-e,t,e);i.on(Laya.Event.CLICK,i,i.onMouseUp);return i}t.prototype.onMouseUp=function(){if(this.clickHandler){this.clickHandler.run()}};return t}(isometric.IsoSprite)})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblname.text=t.uname;if(t.flag==2){this.lblstate.text=app.getLang("已放弃")}else if(t.flag==1){this.lblstate.text=t.rpoint.toString()}else{this.lblstate.text=app.getLang("等待中")}};e.SINGLE_KEY="battle.YdLotteryMsgItem";return e}(ui.wudiyaodong.jingxidajiangitemUI);t.YdLotteryMsgItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=game.ItemUtil.createVO(t.itemID);e.setCount(t.value);this.gezi.setData(e);this.lblname.text=e.getName()};e.SINGLE_KEY="battle.YdLotteryRwdItem";return e}(ui.wudiyaodong.jingxidajiangitem2UI);t.YdLotteryRwdItem=e})(battle||(battle={}));var battle;(function(o){var t=function(){function r(){this.type=1;this.walkEnd=false}r.recode=function(t,e,i){if(i===void 0){i=1}var n=new r;n.objId=t.objId;n.tarId=t.tarId;if(t instanceof UseSkillStartNtf){n.type=1;n.showSkill=n.skill=csv.SkillProxy.getIns().getCfg(t.usekill);n.attackSpeed=t.dexterity;n.hps=[];n.buffs=[]}else if(t instanceof TrigMasterSkillData){n.type=2;n.skill=csv.SkillProxy.getIns().getMasterCfg(t.masterkill);n.showSkill=csv.SkillProxy.getIns().getCfg(n.skill.skillid);n.hps=t.hps;n.buffs=t.buff}else{n.type=3;n.hps=t.hps;n.buffs=t.buff}n.usetime=e;n.real=i;if(i){n.step=o.BattleModel.getIns().battleStep}else{n.step=0}n.otherAttackVo=[];return n};r.checkIsStage=function(t){if(t.real&&t.type==1&&t.showSkill&&t.showSkill.bigeffect!=""){if(app.TimerRewriter.currTimer-o.BattleManager.lastBigeffectTime>=3e3){if(o.BattleManager.lastBigId==t.showSkill.skillid){o.BattleManager.lastBigId=0}else{o.BattleManager.lastBigId=t.showSkill.skillid;var e=parseInt(o.BattleManager.bigRateArr[t.attackView.charactorVO.prof-1])/100;if(Math.random()<e){t.boBig=true;o.BattleManager.lastBigeffectTime=app.TimerRewriter.currTimer;return true}}}}return false};return r}();o.AttackVo=t})(battle||(battle={}));var battle;(function(o){var t=function(){function r(){}r.recode=function(t,e,i){var n=new r;n.buffs=t;n.usetime=e;n.objId=i;n.step=o.BattleModel.getIns().battleStep;return n};return r}();o.BuffVo=t})(battle||(battle={}));var battle;(function(o){var t=function(){function r(){}r.recode=function(t,e,i){if(i===void 0){i=0}var n=new r;n.hps=t;n.usetime=e;n.type=i;n.step=o.BattleModel.getIns().battleStep;return n};return r}();o.HpMpVo=t})(battle||(battle={}));var battle;(function(r){var t=function(){function n(){}n.recode=function(t,e){var i=new n;i.usetime=e;i.objId=t.objId;if(t instanceof CallSummonNtf){i.type=1;i.summon=t.summon}else if(t instanceof EndTimeSummonNtf){i.type=2}i.step=r.BattleModel.getIns().battleStep;return i};return n}();r.SummonVo=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=i.WeaponsModel.getIns();app.ViewManager.regist(i.WeaponsMainNewView,"bingqi.atlas");app.ViewManager.regist(i.WeaponsModificationView,"bingqi.atlas");app.ViewManager.regist(i.WeaponsLvUpNewView,"bingqi.atlas");app.ViewManager.regist(i.WeaponsMainTipView,"bingqi.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.WEAPONS_MAIN,i.WeaponsMainNewView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.WEAPONS_MAIN,this._model,this._model.weaponsMainRed);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.WEAPONS_LV_UP,i.WeaponsLvUpNewView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.WEAPONS_LV_UP,this._model,this._model.weaponsLvUpRed);this._model.on(i.WeaponsEvent.BINGQI_ACTIVE_SUCCESS,this,this.onRedDotChange);this._model.on(i.WeaponsEvent.BINGQI_LV_UP_SUCCESS,this,this.onRedDotChange);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onRedDotChange)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.WeaponInfoAck,this,this.onWeaponInfoAck);this.addMsgListener(app.ProtocolResponse.WeaponUpLevelAck,this,this.onWeaponUpLevelAck);this.addMsgListener(app.ProtocolResponse.WeaponStrengthlvAck,this,this.onWeaponStrengthlvAck)};e.prototype.onWeaponInfoAck=function(t,e){this._model.updateNetData(e.weaponArray)};e.prototype.onWeaponUpLevelAck=function(t,e){if(e.result==1){if(e.level==1){this._model.event(i.WeaponsEvent.BINGQI_JIHUO_SUCCESS)}else{manager.EffectManager.playStageEffect("skill_gaizaochenggong",0)}this._model.event(i.WeaponsEvent.BINGQI_ACTIVE_SUCCESS)}};e.prototype.onWeaponStrengthlvAck=function(t,e){if(e.result==1){manager.EffectManager.playStageEffect("skill_chenggong");this._model.event(i.WeaponsEvent.BINGQI_LV_UP_SUCCESS)}};e.prototype.onRedDotChange=function(){Laya.timer.callLater(this,this.onUpdateRedDot)};e.prototype.onUpdateRedDot=function(){this._model.weaponsMainRed();this._model.weaponsLvUpRed()};e.SINGLE_KEY="weapons.WeaponsModule";return e}(app.ModuleBase);i.WeaponsModule=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(t){var e=function(){function t(){}t.BINGQI_CHANGE="BINGQI_CHANGE";t.BINGQI_LV_UP_SUCCESS="BINGQI_LV_UP_SUCCESS";t.BINGQI_ACTIVE_SUCCESS="BINGQI_ACTIVE_SUCCESS";t.BINGQI_JIHUO_SUCCESS="BINGQI_JIHUO_SUCCESS";return t}();t.WeaponsEvent=e;var o=function(){function t(){}return t}();t.WeaponVo=o;var i=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.maxTabWeaponsNum=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this.maxTabWeaponsNum=this.getMaxWeaponsNum();this.weaponsTabInitArr=this.initWeaponsTabData();this.maxWeaponsChongNum=this.getMaxWeaponsChongNum();this.maxWeaponsLvNum=this.getMaxWeaponsLvNum()};t.prototype.updateNetData=function(t){this._netWeaponArray=t};t.prototype.getMaxWeaponsNum=function(){var t=csv.WeaponsProxy.getIns().getWeaponMap();var e=0;for(var i in t){e++}return e};t.prototype.getMaxWeaponsChongNum=function(){var t=csv.WeaponsProxy.getIns().getWeaponArr();var e=-1;for(var i=0;i<t.length;i++){if(t[i].weaponid==1){e++}}return e};t.prototype.getMaxWeaponsLvNum=function(){var t=csv.WeaponsProxy.getIns().getWeaponLvArr();var e=-1;for(var i=0;i<t.length;i++){if(t[i].weaponid==1){e++}}return e};t.prototype.getWeaponsChongCfgCellData=function(){var t=csv.WeaponsProxy.getIns().getWeaponLvArr();for(var e=0;e<t.length;e++){if(t[e].addattr!=""){return t[e]}}};t.prototype.initWeaponsTabData=function(){var t=[];for(var e=1;e<=this.maxTabWeaponsNum;e++){var i=csv.WeaponsProxy.getIns().getWeaponMapCell(e,0);var n=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(e,0);var r=new o;r.weaponid=+i.weaponid;r.level=0;r.strengthlv=0;r.cfg=i;r.lvCfg=n;r.active=+i.level==0?false:true;r.isChongMax=false;r.isLvMax=false;t.push(r)}return t};t.prototype.spActSort=function(t){var e=this.getSelIndex(t);var i=t.splice(e,1);t.splice(0,0,i[0]);return t};t.prototype.getSelIndex=function(t){for(var e=0;e<t.length;e++){var i=t[e];var n=csv.WeaponsProxy.getIns().getWeaponMapCell(i.weaponid,i.level+1)?csv.WeaponsProxy.getIns().getWeaponMapCell(i.weaponid,i.level+1):i.cfg;var r=this.redPointProxy(n.cost);if(r&&!i.isChongMax){return e}}return 0};t.prototype.getQianghuaSelIndex=function(t){for(var e=0;e<t.length;e++){var i=t[e];var n=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(i.weaponid,i.strengthlv+1)?csv.WeaponsProxy.getIns().getWeaponLevelMapCell(i.weaponid,i.strengthlv+1):i.lvCfg;var r=this.redPointProxyArr(n.cost);if(i.active&&r&&!i.isLvMax){return e}}return 0};t.prototype.getWeaponsTabData=function(){var t=[];if(this.weaponsTabInitArr){t=this.weaponsTabInitArr}else{t=this.initWeaponsTabData()}if(this._netWeaponArray){for(var e=0;e<this._netWeaponArray.length;e++){for(var i=0;i<t.length;i++){if(this._netWeaponArray[e].weaponid==t[i].weaponid){var n=this._netWeaponArray[e];t[i].level=n.level;t[i].strengthlv=n.strengthlv;t[i].cfg=csv.WeaponsProxy.getIns().getWeaponMapCell(n.weaponid,n.level);t[i].lvCfg=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(n.weaponid,n.strengthlv);t[i].active=n.level==0?false:true;t[i].isChongMax=n.level>=this.maxWeaponsChongNum?true:false;t[i].isLvMax=n.strengthlv>=this.maxWeaponsLvNum?true:false}}}}return t};t.prototype.xiaohaoSort=function(t){t.sort(function(t,e){if(t!=e){if(t.itemCfg.type==5){if(e.itemCfg.type!=5){return 1}}else{if(e.itemCfg.type==5){return-1}}}return 0})};t.prototype.getArray=function(t,e){var i=[];for(var n=0,r=t.length;n<r;n++){var o={};o.data=t[n];i.push(o)}for(var n=0,r=e.length;n<r;n++){var o=i[n];o.nextData=e[n]}return i};t.prototype.getWeaponUrl=function(t,e){var i=csv.WeaponsProxy.getIns().getWeaponMapCell(t,e);return"res/static/bingqi/"+i.res+".png"};t.prototype.getWeaponNameUrl=function(t,e){var i=csv.WeaponsProxy.getIns().getWeaponMapCell(t,e);return"bingqi/"+i.word+".png"};t.prototype.redPointProxyArr=function(t,e,i,n){var r=t.split(";");for(var o=0;o<r.length;o++){var a=this.redPointProxy(r[o]);if(a==false){if(e){game.RedDotView.removeFrom(e)}return false}}if(e){game.RedDotView.addTo(e)}return true};t.prototype.redPointProxy=function(t,e,i,n){var r=game.ItemUtil.parserList(t)[0];var o=game.GridsModel.getIns().getItemCount(r.getItemId());var a=r.count;if(o<a){if(n){this.event(n)}if(e){game.RedDotView.removeFrom(e)}return false}else{if(i){this.event(i)}if(e){game.RedDotView.addTo(e)}}return true};t.prototype.weaponsMainRed=function(){var t=this.getWeaponsTabData();for(var e=0,i=t.length;e<i;e++){var n=csv.WeaponsProxy.getIns().getWeaponMapCell(t[e].weaponid,t[e].level+1);if(n){var r=this.redPointProxy(n.cost);if(!t[e].isChongMax&&r){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.WEAPONS_MAIN);return}}}game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.WEAPONS_MAIN)};t.prototype.weaponsLvUpRed=function(){var t=this.getWeaponsTabData();for(var e=0,i=t.length;e<i;e++){var n=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(t[e].weaponid,t[e].strengthlv+1);if(n){var r=this.redPointProxyArr(n.cost);if(t[e].active&&!t[e].isLvMax&&r){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.WEAPONS_LV_UP);return}}}game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.WEAPONS_LV_UP)};t.SINGLE_KEY="weapons.WeaponsModel";return t}(app.ModelBase);t.WeaponsModel=i})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("weapon.csv");this._bingqiArr=t.getArray();var e=app.Config.getResById("weapon_sterngth.csv");this._bingqiLvUpArr=e.getArray();this.initWeaponMap();this.initWeaponLvUpMap()};e.prototype.initWeaponMap=function(){this._bingqiMap={};for(var t=0,e=this._bingqiArr.length;t<e;t++){var i=this._bingqiArr[t];if(!this._bingqiMap[i.weaponid]){this._bingqiMap[i.weaponid]={}}this._bingqiMap[i.weaponid][i.level]=i}};e.prototype.initWeaponLvUpMap=function(){this._bingqiLvUpMap={};for(var t=0,e=this._bingqiLvUpArr.length;t<e;t++){var i=this._bingqiLvUpArr[t];if(!this._bingqiLvUpMap[i.weaponid]){this._bingqiLvUpMap[i.weaponid]={}}this._bingqiLvUpMap[i.weaponid][i.strengthlv]=i}};e.prototype.getWeaponArr=function(){return this._bingqiArr};e.prototype.getWeaponMap=function(){return this._bingqiMap};e.prototype.getWeaponLvArr=function(){return this._bingqiLvUpArr};e.prototype.getWeaponLvMap=function(){return this._bingqiLvUpMap};e.prototype.getWeaponMapCell=function(t,e){return this._bingqiMap[t][e]};e.prototype.getWeaponLevelMapCell=function(t,e){return this._bingqiLvUpMap[t][e]};e.SINGLE_KEY="csv.WeaponsProxy";return e}(app.ModelBase);t.WeaponsProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.isAuto=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns();this.listjuese.hScrollBarSkin="";this.listjuese.selectEnable=true;this.listjuese.itemRender=i.WeaponsLvItem;this.listjuese.renderHandler=new Laya.Handler(this,this.onWeapsTabCellHandler);this.listjuese.selectHandler=new Laya.Handler(this,this.onSelectedTabHandler);this.listshuxing2.itemRender=game.ComAttrItem1;this.listshuxing2.renderHandler=new Laya.Handler(this,this.onShuxing2);this.listshuxing1.itemRender=i.WeaponsQianghuaPropItem;this.listshuxing1.renderHandler=new Laya.Handler(this,this.onShuxing);this.xiaohao.showBagCount(1);this.btnqianghua.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.btnqianghua.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.btnqianghua.on(Laya.Event.MOUSE_OUT,this,this.onMouseOut)};t.prototype.onDisplay=function(){this._model.on(i.WeaponsEvent.BINGQI_LV_UP_SUCCESS,this,this.activeSuccess);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.isAuto=false;Laya.timer.clearAll(this);this._model.off(i.WeaponsEvent.BINGQI_LV_UP_SUCCESS,this,this.activeSuccess)};t.prototype.refreshAll=function(){var t=this._model.getWeaponsTabData();t.sort(function(t,e){if(t.active){if(t.active&&e.active){return t.weaponid-e.weaponid}return-1}if(e.active){return 1}});this.listjuese.array=t;this.listjuese.selectedIndex=this._model.getQianghuaSelIndex(t);this.updateSelectedView()};t.prototype.onShuxing=function(t,e){t.setData(t.dataSource)};t.prototype.onShuxing2=function(t,e){t.setData(t.dataSource,app.getLang("全角色"))};t.prototype.onWeapsTabCellHandler=function(t,e){t.setData(e,t.dataSource);t.isSelect(this.listjuese.selectedIndex)};t.prototype.onSelectedTabHandler=function(t){if(t==-1)return;this.updateSelectedView()};t.prototype.activeSuccess=function(){this.listjuese.array=this._model.getWeaponsTabData();this.updateSelectedView()};t.prototype.updateSelectedView=function(){this.updateMidIconView();this.updateDownView()};t.prototype.updateMidIconView=function(){var t=this.listjuese.selectedItem;this.imgwuqiming.skin=this._model.getWeaponNameUrl(t.weaponid,t.level);this.imgwuqi.skin=this._model.getWeaponUrl(t.weaponid,t.level);this.clipdengji3.value=t.strengthlv+"";this.clipdengji1.value=t.strengthlv+"";this.clipdengji2.value=t.strengthlv+1+"";if(t.active){if(t.isLvMax){this.clipdengji3.visible=true;this.imglv3.visible=true;this.jidengbox.visible=false}else{this.clipdengji3.visible=false;this.imglv3.visible=false;this.jidengbox.visible=true}}else{this.clipdengji3.visible=false;this.imglv3.visible=false;this.jidengbox.visible=true}};t.prototype.updateDownView=function(){var t=this.listjuese.selectedItem;if(t.active){if(t.isLvMax){this.listshuxing1.visible=false;this.listshuxing2.visible=true;this.imgyimanbji.visible=true;this.imgweijihuo.visible=false;this.boxzhuangshi.visible=false;this.btnqianghua.visible=false;this.xiaohao.visible=false;var e=Attributes.multiplyAttributes(Attributes.decode(t.lvCfg.attribute),5);this.listshuxing2.array=e;game.RedDotView.removeFrom(this.btnqianghua)}else{this.listshuxing1.visible=true;this.listshuxing2.visible=false;this.imgyimanbji.visible=false;this.imgweijihuo.visible=false;this.boxzhuangshi.visible=true;this.btnqianghua.visible=true;this.xiaohao.visible=true;var i=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(t.weaponid,t.strengthlv+1);this.listshuxing1.array=this._model.getArray(Attributes.multiplyAttributes(Attributes.decode(t.lvCfg.attribute),5),Attributes.multiplyAttributes(Attributes.decode(i.attribute),5));var n=game.ItemUtil.parserList(i.cost);this.xiaohao.setData(n[0]);this._model.redPointProxyArr(i.cost,this.btnqianghua)}}else{this.listshuxing1.visible=true;this.listshuxing2.visible=false;this.imgyimanbji.visible=false;this.imgweijihuo.visible=true;this.boxzhuangshi.visible=false;this.btnqianghua.visible=false;this.xiaohao.visible=false;this.clipdengji1.value="0";this.clipdengji2.value="1";var i=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(t.weaponid,t.strengthlv+1);this.listshuxing1.array=this._model.getArray(Attributes.multiplyAttributes(Attributes.decode(t.lvCfg.attribute),1),Attributes.multiplyAttributes(Attributes.decode(i.attribute),1));var n=game.ItemUtil.parserList(i.cost);this._model.xiaohaoSort(n);this.xiaohao.setData(n[0])}};t.prototype.onMouseDown=function(){if(!this.isAuto){Laya.timer.once(1e3,this,this.timeShenji);this.isAuto=true}};t.prototype.onMouseOut=function(){this.isAuto=false;Laya.timer.clearAll(this)};t.prototype.onMouseUp=function(){this.isAuto=false;Laya.timer.clearAll(this);this.onQianghuaClick()};t.prototype.timeShenji=function(){Laya.timer.loop(200,this,this.onQianghuaClick)};t.prototype.onQianghuaClick=function(){var t=this.listjuese.selectedItem;if(!t){return}var e=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(t.weaponid,t.strengthlv+1);if(e){if(game.GridsModel.getIns().hasEnoughItems(e.cost,false,true)){app.ProtocolRequest.WeaponStrengthlv(t.weaponid)}}};t.SINGLE_KEY="weapons.WeaponsLvUpNewView";return t}(ui.bingqi.bingqiqianghuaviewnewUI);i.WeaponsLvUpNewView=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns();this.xuanzelist.selectEnable=true;this.xuanzelist.itemRender=i.WeaponsItem;this.xuanzelist.renderHandler=new Laya.Handler(this,this.onWeapsTabCellHandler);this.xuanzelist.selectHandler=new Laya.Handler(this,this.onSelectedTabHandler);this.xuanzelist.hScrollBarSkin="";this.listshuxing2.itemRender=i.WeaponsPropAddItem;this.listshuxing2.renderHandler=new Laya.Handler(this,this.onShuxing2);this.listshuxing1.itemRender=i.WeaponsMainPropItem;this.listshuxing1.renderHandler=new Laya.Handler(this,this.onShuxing);this.boxgaizao.mouseThrough=true;this.boxjihuo.mouseThrough=true};e.prototype.onDisplay=function(){this._model.on(i.WeaponsEvent.BINGQI_ACTIVE_SUCCESS,this,this.activeSuccess);this._model.on(i.WeaponsEvent.BINGQI_JIHUO_SUCCESS,this,this.jihupEffPlay);this._model.on(i.WeaponsEvent.BINGQI_LV_UP_SUCCESS,this,this.activeSuccess);this.btnjihuo.on(Laya.Event.CLICK,this,this.onJihuoClick);this.btngaizao.on(Laya.Event.CLICK,this,this.onGaizaoClick);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.WeaponsEvent.BINGQI_ACTIVE_SUCCESS,this,this.activeSuccess);this._model.off(i.WeaponsEvent.BINGQI_JIHUO_SUCCESS,this,this.jihupEffPlay);this._model.off(i.WeaponsEvent.BINGQI_LV_UP_SUCCESS,this,this.activeSuccess);this.btnjihuo.off(Laya.Event.CLICK,this,this.onJihuoClick);this.btngaizao.off(Laya.Event.CLICK,this,this.onGaizaoClick)};e.prototype.refreshAll=function(){var t=this._model.getWeaponsTabData();t.sort(function(t,e){if(!t.isChongMax&&!e.isChongMax){var i=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);var n=csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1);var r=game.GridsModel.getIns().hasEnoughItems(i.cost);var o=game.GridsModel.getIns().hasEnoughItems(n.cost);if(t.active){if(t.active&&e.active){if(r){if(r&&o){return t.weaponid-e.weaponid}return-1}if(o){return 1}}else{if(o){return 1}if(r){return-1}}}else{if(r){return-1}if(o){return 1}}}else{if(!t.isChongMax){var i=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);var r=game.GridsModel.getIns().hasEnoughItems(i.cost);if(r){return-1}else{if(t.active){if(t.active&&e.active){return t.weaponid-e.weaponid}}return 1}}if(!e.isChongMax){var n=csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1);var o=game.GridsModel.getIns().hasEnoughItems(n.cost);if(o){return 1}else{if(e.active){return t.weaponid-e.weaponid}return-1}}}});this.xuanzelist.array=this._model.spActSort(t);this.xuanzelist.selectedIndex=this._model.getSelIndex(t);this.updateSelectedView()};e.prototype.onShuxing=function(t,e){t.setData(t.dataSource)};e.prototype.onShuxing2=function(t,e){t.setData(t.dataSource[0],t.dataSource[1])};e.prototype.onWeapsTabCellHandler=function(t,e){t.setData(e,t.dataSource);t.isSelect(this.xuanzelist.selectedIndex)};e.prototype.onSelectedTabHandler=function(t){if(t==-1)return;this.updateSelectedView()};e.prototype.activeSuccess=function(){var t=this.xuanzelist.selection;if(t){t.playJihuo()}this.xuanzelist.array=this._model.getWeaponsTabData();this.updateSelectedView()};e.prototype.jihupEffPlay=function(){var t=this._model.getWeaponUrl(this.xuanzelist.selectedItem.weaponid,this.xuanzelist.selectedItem.level);var e=this.fabaobg.parent.localToGlobal(new Laya.Point(this.fabaobg.x,this.fabaobg.y));app.ViewManager.toggleDialog(game.JiHuoSuccessView,1,0,[game.Config.ENUM_TYPE.IMG,t,e.x,e.y])};e.prototype.updateSelectedView=function(){this.updateMidIconView();this.updateDownView()};e.prototype.updateMidIconView=function(){var t=this.xuanzelist.selectedItem;this.imgname.skin=this._model.getWeaponNameUrl(t.weaponid,t.level);this.fabaobg.skin=this._model.getWeaponUrl(t.weaponid,t.level);if(t.active){this.labelshuxing.text=app.getLang("weapontitle_1");this.labeldangqianxiaoguo.text=app.getLang("weapontitle_2");this.boxwuqiweijihuo.visible=false;this.boxwuqijihuo.visible=true;this.imgdengjidi2.visible=true;if(t.isChongMax){this.manjiBox.visible=true;this.shengjibox.visible=false;this.clipzhuan3.value=util.TimeUtil.getChineseNum(+t.level)+""}else{this.manjiBox.visible=false;this.shengjibox.visible=true;this.clipzhuan1.value=util.TimeUtil.getChineseNum(+t.level)+"";this.clipzhuan2.value=util.TimeUtil.getChineseNum(t.level+1)+""}Laya.Tween.clearAll(this.fabaobg);this.imgTween1()}else{this.labelshuxing.text=app.getLang("weapontitle_3");this.labeldangqianxiaoguo.text=app.getLang("weapontitle_4");this.boxwuqiweijihuo.visible=true;this.boxwuqijihuo.visible=false;this.manjiBox.visible=false;this.imgdengjidi2.visible=false;this.shengjibox.visible=false;Laya.Tween.clearAll(this.fabaobg);this.imgname1.skin=this._model.getWeaponNameUrl(t.weaponid,t.level)}};e.prototype.updateDownView=function(){var t=this.xuanzelist.selectedItem;var e=t.cfg.skill;var i=+e.split("-")[0];var n=+e.split("-")[1];var r="";if(t.isChongMax||t.active==false){r=csv.SkillProxy.getSkillDes(i,n)}else{r=csv.SkillProxy.getSkillDes(i,n,1)}this.labeljinengmiaoshu.text=r;this.gaizaotipsBox.visible=true;this.listshuxing1.visible=true;this.xiaohao1.visible=true;this.imgyimanbji.visible=false;this.gaizaotipsBox.visible=true;this.btnjihuo.visible=true;if(t.active){this.boxjihuo.visible=false;this.boxgaizao.visible=true;if(t.isChongMax){this.btngaizao.visible=false;this.boxjihuo.visible=true;this.imgyimanbji.visible=true;this.xiaohao1.visible=false;this.gaizaotipsBox.visible=false;this.btnjihuo.visible=false;this.listshuxing1.visible=false;var o=Attributes.multiplyAttributes(Attributes.decode(t.cfg.attribute),1);var a=[];for(var s=0,l=o.length;s<l;s++){a.push([o[s]])}this.listshuxing2.repeatY=a.length;this.listshuxing2.array=a;game.RedDotView.removeFrom(this.btngaizao)}else{this.btngaizao.visible=true;this.boxjihuo.visible=false;var u=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);var a=this._model.getArray(Attributes.multiplyAttributes(Attributes.decode(t.cfg.attribute),1),Attributes.multiplyAttributes(Attributes.decode(u.attribute),1));this.listshuxing1.repeatY=a.length;this.listshuxing1.array=a;var p=game.ItemUtil.parserList(u.cost)[0];this.xiaohao1.showBagCount(1);this.xiaohao1.setData(p);this._model.redPointProxy(u.cost,this.btngaizao)}}else{this.boxjihuo.visible=true;this.boxgaizao.visible=false;this.imgyimanbji.visible=false;var u=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);var o=Attributes.multiplyAttributes(Attributes.decode(t.cfg.attribute),1);var a=[];for(var s=0,l=o.length;s<l;s++){a.push([o[s]])}this.listshuxing2.repeatY=a.length;this.listshuxing2.array=a;var p=game.ItemUtil.parserList(u.cost)[0];this.xiaohao1.showBagCount(1);this.xiaohao1.setData(p);this._model.redPointProxy(u.cost,this.btnjihuo)}};e.prototype.imgTween1=function(){Laya.Tween.to(this.fabaobg,{y:201},800,null,new Laya.Handler(this,this.imgTween2))};e.prototype.imgTween2=function(){Laya.Tween.to(this.fabaobg,{y:209},800,null,new Laya.Handler(this,this.imgTween1))};e.prototype.onJihuoClick=function(){var t=this.xuanzelist.selectedItem;if(!t){return}var e=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);if(game.GridsModel.getIns().hasEnoughItems(e.cost,false,true,true)){app.ProtocolRequest.WeaponUpLevel(t.weaponid)}};e.prototype.onGaizaoClick=function(){var t=this.xuanzelist.selectedItem;if(!t){return}var e=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);if(game.GridsModel.getIns().hasEnoughItems(e.cost,false,true)){app.ProtocolRequest.WeaponUpLevel(t.weaponid)}};e.prototype.onSpPropClick=function(){app.ViewManager.toggleDialog(i.WeaponsMainTipView,1,0,this.xuanzelist.selectedItem)};e.prototype.getArray=function(t,e){var i=[];for(var n=0,r=t.length;n<r;n++){var o={};o.data=t[n];i.push(o)}for(var n=0,r=e.length;n<r;n++){var o=i[n];o.nextData=e[n]}return i};e.SINGLE_KEY="weapons.WeaponsMainNewView";return e}(ui.bingqi.bingqiviewnewUI);i.WeaponsMainNewView=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this._selItemData=this.dataSource;this.updateSelectedView()};e.prototype.updateSelectedView=function(){var t=this._selItemData;var e=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(t.weaponid,t.strengthlv+1)?csv.WeaponsProxy.getIns().getWeaponLevelMapCell(t.weaponid,t.strengthlv+1):t.lvCfg;var i=Attributes.decode(t.lvCfg.addattr).baseList[0];var n=Attributes.decode(e.addattr).baseList[0];var r="";var o="";var a="";if(i){r=Attributes.getPropName(i.propId);o="+"+Attributes.getPropValue(i.propId,i.value,i.formula)}if(n){a="+"+Attributes.getPropValue(n.propId,n.value,n.formula)}this.labelxiaji.visible=true;this.labelmiaoshu2.visible=true;this.labelxiaji.text=app.getLang("下级附加效果（强化至+"+e.strengthlv+"激活）");var s=this._model.getWeaponsChongCfgCellData();if(!s){this.labelxiaji.visible=false;this.labelmiaoshu2.visible=false;return}this.labelxiaji.visible=true;this.labelmiaoshu2.visible=true;if(t.lvCfg.addattr==""&&e.addattr==""){this.labelxiaji.text=app.getLang("下级附加效果（强化至+"+s.strengthlv+"激活）");var l=Attributes.decode(s.addattr).baseList[0];r=Attributes.getPropName(l.propId);o="+"+Attributes.getPropValue(l.propId,l.value,l.formula);this.labelmiaoshu04.text=app.getLang("暂无");this.labelmiaoshu2.text=app.getLang(r+o)}else if(t.lvCfg.addattr==""&&e.addattr!=""){r=Attributes.getPropName(n.propId);o="+"+Attributes.getPropValue(n.propId,n.value,n.formula);this.labelmiaoshu04.text=r+o;this.labelmiaoshu2.text=app.getLang("暂无")}else if(t.lvCfg.addattr!=""&&e.addattr!=""){this.labelmiaoshu04.text=r+o;this.labelmiaoshu2.text=r+a;if(t.isLvMax){this.labelxiaji.visible=false;this.labelmiaoshu2.visible=false;this.labelmiaoshu04.text=r+o}}};e.SINGLE_KEY="weapons.WeaponsMainTipView";return e}(ui.bingqi.qianghuaxiaoguotipUI);i.WeaponsMainTipView=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns();this.listshuxing.itemRender=i.WeaponsComAttrItem1;this.listshuxing.renderHandler=new Laya.Handler(this,this.onShuxing)};e.prototype.onDisplay=function(){this._model.on(i.WeaponsEvent.BINGQI_ACTIVE_SUCCESS,this,this.activeSuccess);this.btngaizao.on(Laya.Event.CLICK,this,this.onGaizaoClick);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.WeaponsEvent.BINGQI_ACTIVE_SUCCESS,this,this.activeSuccess);this.btngaizao.off(Laya.Event.CLICK,this,this.onGaizaoClick)};e.prototype.refreshAll=function(){this._selItemData=this.dataSource;this.updateSelectedView()};e.prototype.onShuxing=function(t,e){t.setData(t.dataSource,app.getLang("title_tips1"))};e.prototype.activeSuccess=function(){this.updateSelectedView()};e.prototype.updateSelectedView=function(){this.updateMidIconView();this.updateDownView()};e.prototype.updateMidIconView=function(){this.imgbingqi.skin=this._model.getWeaponUrl(this._selItemData.weaponid,this._selItemData.level);this.imgwuqiming.skin=this._model.getWeaponNameUrl(this._selItemData.weaponid,this._selItemData.level)};e.prototype.updateDownView=function(){var t=this._selItemData;var e;if(t.isChongMax){this.gezi.visible=false;this.btngaizao.visible=false;this.imgyimanji.visible=true;e=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level);game.RedDotView.removeFrom(this.btngaizao)}else{this.gezi.visible=true;this.btngaizao.visible=true;this.imgyimanji.visible=false;e=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);this._model.redPointProxy(e.cost,this.btngaizao)}var i=Attributes.multiplyAttributes(Attributes.decode(e.attribute),5);this.listshuxing.repeatY=i.length;this.listshuxing.array=i;var n=csv.SkillProxy.getIns().getSkillByKey(e.skill);this.labelmiaoshu.text=app.getLang(n.explain);var r=game.ItemUtil.parserList(e.cost)[0];this.gezi.showBagCount(1);this.gezi.setData(r);this.clipzhuan.value=util.TimeUtil.getChineseNum(+t.level)+""};e.prototype.onGaizaoClick=function(){var t=this._selItemData;if(!t){return}var e=csv.WeaponsProxy.getIns().getWeaponMapCell(t.weaponid,t.level+1);if(game.GridsModel.getIns().hasEnoughItems(e.cost,false,true)){app.ProtocolRequest.WeaponUpLevel(t.weaponid)}};e.SINGLE_KEY="weapons.WeaponsModificationView";return e}(ui.bingqi.bingqigaizaotipUI);i.WeaponsModificationView=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setTextColor=function(t){var e=t?game.STYLES.GRAY_COLOR_S:game.STYLES.GREEN_COLOR_S;this.txtName.color=e;this.txtValue.color=e};e.prototype.setData=function(t,e){this.txtName.text=e?e+Attributes.getPropName(t.propId):Attributes.getPropName(t.propId);this.txtValue.text="      +"+Attributes.getPropValue(t.propId,t.value,t.formula);this.txtValue.color=game.STYLES.GREEN_COLOR_S};e.SINGLE_KEY="weapons.WeaponsComAttrItem1";return e}(ui.common.commonattr1UI);t.WeaponsComAttrItem1=e})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var grids;(function(t){var e=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.onlyShow=false;t.checkDress=true;t.locktip=false;t._showBagCount=0;t._clickCount=0;t.defaultSkin="";t._drawed=false;return t}t.Render=function(t,e){t.setData(t.dataSource)};t.BtnRender=function(t,e){t.setData(t.dataSource,"",1,false)};t.NoGetWayRender=function(t,e){t.onlyShow=true;t.setData(t.dataSource,"",1,false)};t.prototype.getScoreImg=function(){if(!this.scoreImg){this.scoreImg=new Laya.Image;this.scoreImg.bottom=4;this.scoreImg.right=4}return this.scoreImg};t.prototype.getStarImg=function(t){if(t===void 0){t="public/bg_wujiaoxing1.png"}if(!this.starImg){this.starImg=new Laya.Image;this.starImg.skin=t}return this.starImg};t.prototype.showBagCount=function(t){this._showBagCount=t;if(this.displayedInStage&&t==1){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onGridsUpdate)}};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.flag=false;this.imgxuanzhong.visible=false;this.imgIcon=new Laya.Image;this.imgIcon.x=this.width>>1;this.imgIcon.y=this.height>>1;this.imgIcon.anchorX=this.imgIcon.anchorY=.5;this.shuzi.autoSize=true;for(var t=1;t<=5;t++){this["xing"+t].visible=false}this.clear();this.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);game.MenuHelper.addTextStroke(this.shuzi);this.cacheAs="bitmap"};t.prototype.onGridsUpdate=function(){if(!this.data){return}this.updateIconView()};t.prototype.updateIconView=function(){this.setData(this.data,this.defaultSkin,this.custScale,this._hideBtns,this.staticEffect)};t.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onGridsUpdate);this._drawed=false;this.updateIconView()};t.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.onGridsUpdate)};t.prototype.onClick=function(t){if(this.locktip){return}if(ent.DebugConfig.isDebugger&&this.data instanceof items.ItemVO&&t.altKey&&t.shiftKey&&t.ctrlKey){Laya.Dialog.closeAll();t.stopPropagation();chat.ChatModel.getIns().addGm(this.data);return}this.doClick()};t.prototype.doClick=function(){if(this.clickHandler){this.clickHandler.runWith(this.data)}else{if(this.data===game.GridsModel.EMPTY||this.data===game.GridsModel.LOCKED){}else{if(this.onlyShow){tip.TipManager.showOnly(this.data)}else if(this._hideBtns){tip.TipManager.show(this.data,true,true)}else{tip.TipManager.show(this.data)}}}this._clickCount=0};t.prototype.boExpired=function(t){return t.boExpired};t.prototype.setData=function(t,e,i,n,r){if(e===void 0){e=""}if(n===void 0){n=true}if(r===void 0){r=""}this._hideBtns=n;this.custScale=i;this.staticEffect=r;if(this.flag){if(t===this.data&&this.defaultSkin==e){return}if(t===this.data&&this.defaultSkin==e&&this._drawed){return}}this.data=t;this.defaultSkin=e;if(this.flag){if(!Laya.stage.contains(this)){return}}this.clear(t);this._drawed=true;if(i){this.scale(i,i)}var o=false;if(typeof t==="string"){if(t==="undefined"||t===""||t==="null"){this.img.skin=e}else if(t===game.GridsModel.EMPTY){this.img.skin=e}else if(t==game.GridsModel.LOCKED){this.img.skin="public/bg_lock01.png"}else{var a=game.ItemUtil.createVO(parseInt(t));this.setData(a,e,i,n)}}else if(typeof t=="number"){var a=game.ItemUtil.createVO(t);this.setData(a,e,i,n)}else{if(t instanceof items.ItemVO){var a=t;if(this._showBagCount==1){var s=a.ownCount==-1?game.GridsModel.getIns().getItemCount(a.getItemId()):a.ownCount;if(s<a.count){this.shuzi.color=game.STYLES.RED_COLOR_S}else{this.shuzi.color=game.STYLES.GREEN_COLOR_S}var l=s;this.shuzi.text=l+"/"+a.count}else if(this._showBagCount==0){if(a.count>1){this.shuzi.text=game.MoneyModel.format(a.count)}}else{this.shuzi.visible=false}this.gezibg.skin="res/static/bg_daoju_yuan_"+t.getQuality()+".png";this.addChildAt(this.imgIcon,this.getChildIndex(this.gezibg)+1);this.imgIcon.skin=a.getIconUrl();if(t.getQuality()>=5){}else{this.removeEffect()}if(this.boExpired(a)){this.imgIcon.gray=true}else{this.imgIcon.gray=false}if(t.itemCfg.type==csv.ItemProxy.TYPES.SOUL_MONSTER){if(!this._soulTypeImg){this._soulTypeImg=new Laya.Image;this._soulTypeImg.scaleX=this._soulTypeImg.scaleY=.7}this._soulTypeImg.skin=csv.AniSoulProxy.getIns().getSoulTypeUrl(a.itemCfg.subtype);this._soulTypeImg.x=60;this._soulTypeImg.y=5;this.addChild(this._soulTypeImg)}if(t.itemCfg.type==csv.ItemProxy.TYPES.SOUL_EQUIP){var u=parseInt(csv.SoulBodyProxy.getIns().getSoulCfg(t.itemCfg.id).starlevel);for(var p=1;p<=u;p++){if(this["xing"+p]){this["xing"+p].visible=true}}}if(t.itemCfg.type==csv.ItemProxy.TYPES.EQUIP){if(this.data.boStar){var h=this.getStarImg();this.addChild(h)}if(!this.quaEff){this.quaEff=new game.AniView;this.quaEff.x=this.width/2;this.quaEff.y=this.width/2}this.quaEff.load(csv.ItemProxy.getItemEffect(a.getQuality()),game.AniView.FILE_NAME.UI);this.addChild(this.quaEff);var c=this.data.getCompareScore();this.refreshScore(c);if(t.serverData){this._drawed=false}}else if(t.itemCfg.type==csv.ItemProxy.TYPES.XIN_FA){var c=xinfa.XinFaModel.getIns().getCompareScore(t);this.refreshScore(c)}}else if(t instanceof ItemData){var a=game.ItemUtil.createVO(t.itemID);a.setCount(t.value);this.setData(a,e,i,n)}else if(t instanceof ItemInfoData){var a=game.ItemUtil.createVO(t.itemId,t);this.setData(a,e,i,n)}o=true}this.cornerMarketIcon=tip.TipItemView.showCornermarketIcon(this.cornerMarketIcon,this,t);if(o){this.showStaticEffect(r)}};t.prototype.showStaticEffect=function(t){if(t&&t!=""){if(!this.ani){this.ani=new game.AniView}var e=activitytaren.ActivityTaRenModel.getIns().get_receive_effect(t);this.ani.load(e);this.ani.play();this.ani.x=this.width/2;this.ani.y=this.height/2;this.addChild(this.ani)}};t.prototype.refreshScore=function(t){var e=this.data;if(e){var i=!this.boExpired(e);if(i&&t==1){var n=this.getScoreImg();n.skin="public/bg_jiantou_shang.png";this.addChild(n)}else if(i&&t==-1){var n=this.getScoreImg();n.skin="public/bg_jiantou_xia.png";this.addChild(n)}else{if(this.scoreImg){this.scoreImg.removeSelf()}}}};t.prototype.addEffect=function(t){if(!this._aniView){this._aniView=new game.AniView(t);this._aniView.interval=150;this._aniView.autoPlay=true}else{this._aniView.load(t)}if(this.width!=94){console.log(">>>>>>>>>>>>>>")}this._aniView.pos(47,47);this.addChild(this._aniView)};t.prototype.removeEffect=function(){if(this._aniView){this._aniView.removeSelf()}};t.prototype.clear=function(t){this.shuzi.text="";if(t){this.gezibg.visible=true;this.gezibg.skin="res/static/bg_daoju_yuan_"+t.getQuality()+".png"}else{this.gezibg.visible=false}this.img.skin=this.defaultSkin;if(this.imgIcon){this.imgIcon.removeSelf()}if(this._shizhongImg){this._shizhongImg.removeSelf()}if(this.scoreImg){this.scoreImg.removeSelf()}if(this.starImg){this.starImg.removeSelf()}if(this._soulTypeImg){this._soulTypeImg.removeSelf()}if(this.quaEff){this.quaEff.removeSelf()}this.imgIcon.gray=false;this.removeEffect();for(var e=1;e<=5;e++){this["xing"+e].visible=false}if(this.ani){this.ani.stop();this.ani.removeSelf()}if(this.cornerMarketIcon){this.cornerMarketIcon.removeSelf()}};t.prototype.setHldBuffer=function(t){var e=csv.GuardIsandProxy.getIns().huludaoBuffCfgMap[t.buffid];this.img.skin="res/icon/item/"+e.icon+".png";if(t.num>1){this.shuzi.text=t.num.toString()}else{this.shuzi.text=""}this.clickHandler=new Laya.Handler(this,this.onHldTipHandler,[e])};t.prototype.onHldTipHandler=function(t){tip.TipManager.showGuardIslandbufferTips(t)};t.CommonItemRender=new Laya.Handler(t,t.Render);t.CommonItemRenderWithBtn=new Laya.Handler(t,t.BtnRender);t.RenderWithoutGetWay=new Laya.Handler(t,t.NoGetWayRender);return t}(ui.bingqi.bingqigeziitemUI);t.WeaponsGridView=e})(grids||(grids={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns();this.shengjiani.on(Laya.Event.COMPLETE,this,this.onJihuoEnd);this.shengjiani.visible=false;this.imgtouxiangkuang01.visible=false;this.daojugezi.mouseEnabled=false;this.xing1.visible=false;this.xing2.visible=false;this.xing3.visible=false};e.prototype.playJihuo=function(){this.shengjiani.visible=true;this.shengjiani.play(0,false)};e.prototype.onJihuoEnd=function(){this.shengjiani.visible=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this._index=t;var i=e;var n=csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1)?csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1):e.cfg;var r=game.ItemUtil.parserList(n.icon)[0];this.labelname.text=csv.ItemProxy.getName(r.itemCfg);this.daojugezi.setData(r);this.daojugezi.gezibg.skin="res/static/bg_daoju_yuan_"+r.getQuality()+".png";var o=this._model.redPointProxy(n.cost);if(o){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}if(e.isChongMax){game.RedDotView.removeFrom(this)}this.fabox.gray=!i.active};e.prototype.isSelect=function(t){if(t==this._index){this.imgxuanzhong.visible=true}else{this.imgxuanzhong.visible=false}};e.SINGLE_KEY="weapons.WeaponsItem";return e}(ui.bingqi.bingqiitemUI);i.WeaponsItem=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns();this.shengjiani.on(Laya.Event.COMPLETE,this,this.onJihuoEnd);this.shengjiani.visible=false;this.imgtouxiangkuang01.visible=false;this.daojugezi.mouseEnabled=false;this.xing1.visible=false;this.xing2.visible=false;this.xing3.visible=false};e.prototype.playJihuo=function(){this.shengjiani.visible=true;this.shengjiani.play(0,false)};e.prototype.onJihuoEnd=function(){this.shengjiani.visible=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=e;var n=csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1)?csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1):e.cfg;var r=game.ItemUtil.parserList(n.icon)[0];if(this._index==null){this._index=t;this.labelname.text=csv.ItemProxy.getName(r.itemCfg);this.daojugezi.setData(r)}var o;if(i.isLvMax){o=i.lvCfg}else{o=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(i.weaponid,i.strengthlv+1)}var a=this._model.redPointProxy(o.cost);if(i.active&&a&&!i.isLvMax){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}this.fabox.gray=!i.active};e.prototype.isSelect=function(t){if(t==this._index){this.imgxuanzhong.visible=true}else{this.imgxuanzhong.visible=false}};e.SINGLE_KEY="weapons.WeaponsLvItem";return e}(ui.bingqi.bingqiitemUI);i.WeaponsLvItem=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.txtValue.valign="left";this.txtNext.valign="right";this.imgArrow.x=300};e.prototype.setData=function(t){if(!t){return}this.txtName.text=app.getLang("全角色")+Attributes.getPropName(t.data.propId);this.txtValue.text="       +"+Attributes.getPropValue(t.data.propId,t.data.value,t.data.formula);if(t.nextData){this.imgArrow.visible=true;this.txtNext.text="             +"+Attributes.getPropValue(t.nextData.propId,t.nextData.value,t.nextData.formula)}else{this.imgArrow.visible=false;this.txtNext.text=""}};e.SINGLE_KEY="weapons.WeaponsMainPropItem";return e}(game.ComAttrItem0);t.WeaponsMainPropItem=e})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.txtName.text=app.getLang("全角色")+Attributes.getPropName(t.propId);if(e){if(e.value!=0){this.txtNext.color=game.STYLES.GREEN_COLOR_S;this.txtNext.text="      (强化+"+Attributes.getPropValue(e.propId,e.value,e.formula)+")"}else{this.txtNext.text=""}}else{this.txtNext.text=""}this.txtValue.text="      +"+Attributes.getPropValue(t.propId,t.value,t.formula);this.txtValue.color=game.STYLES.GREEN_COLOR_S};e.SINGLE_KEY="weapons.WeaponsPropAddItem";return e}(ui.common.commonattr3UI);t.WeaponsPropAddItem=e})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.WeaponsModel.getIns();this.gezi.mouseEnabled=false;this.gezi.mouseThrough=true};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this._index=t;var i=e;var n=csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1)?csv.WeaponsProxy.getIns().getWeaponMapCell(e.weaponid,e.level+1):e.cfg;var r=csv.WeaponsProxy.getIns().getWeaponLevelMapCell(e.weaponid,e.strengthlv+1)?csv.WeaponsProxy.getIns().getWeaponLevelMapCell(e.weaponid,e.strengthlv+1):e.lvCfg;var o=game.ItemUtil.parserList(n.icon)[0];this.gezi.setData(o);var a=this._model.redPointProxyArr(r.cost);if(a){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}if(!e.active||e.isLvMax){game.RedDotView.removeFrom(this)}this.gezi.gray=!i.active};e.prototype.isSelect=function(t){if(t==this._index){this.imgxuanzhong.visible=true}else{this.imgxuanzhong.visible=false}};e.SINGLE_KEY="weapons.WeaponsQianghuaItem";return e}(ui.bingqi.wuqigeziitemUI);i.WeaponsQianghuaItem=t})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var weapons;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.txtValue.valign="left";this.txtNext.valign="right";this.imgArrow.x=230};e.prototype.setData=function(t){if(!t){return}this.txtName.text=app.getLang("全角色")+Attributes.getPropName(t.data.propId);this.txtValue.text="+"+Attributes.getPropValue(t.data.propId,t.data.value,t.data.formula);if(t.nextData){this.imgArrow.visible=true;this.txtNext.text="    +"+Attributes.getPropValue(t.nextData.propId,t.nextData.value,t.nextData.formula)}else{this.imgArrow.visible=false;this.txtNext.text=""}};e.SINGLE_KEY="weapons.WeaponsQianghuaPropItem";return e}(game.ComAttrItem0);t.WeaponsQianghuaPropItem=e})(weapons||(weapons={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=s.BossModel.getIns();app.ViewManager.regist(s.BossCaveTreasureView,"bosszong.atlas");app.ViewManager.regist(s.BossVipView,"bosszong.atlas");app.ViewManager.regist(s.BossWorldView,"bosszong.atlas");app.ViewManager.regist(s.BossKuaFuView,"bosszong.atlas");app.ViewManager.regist(s.BossWorldIceView,"bosszong.atlas","bosszhandou.atlas");app.ViewManager.regist(s.BossWorldIceTypeItem,"bosszhandou.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BOSS_CAVE,s.BossCaveTreasureView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BOSS_VIP,s.BossVipView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BOSS_WOLRD,s.BossWorldView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BOSS_KUAFU,s.BossKuaFuView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BOSS_RECORD,s.BossKuaFuDropOutView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BOSS_WOLRD_ICE,s.BossWorldIceView);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.CHANGE,this,this.onRedDotChange);vipcode.VipModel.getIns().on(vipcode.VipEvent.VIP_CHANGE,this,this.onRedDotChange);this._model.on(s.BossEvent.BOSS_ICE_LEAVE,this,this.onRedDotChange);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onRedDotChange);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.onTeamLvChange);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_INIT,this,this.onTeamLvChange);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.CHANGE,this._model,this._model.checkIsQin);dailytask.DailyTaskModel.getIns().on(dailytask.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this._model,this._model.checkIsKuafuQin)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.BossDailyNtf,this,this.onBossDailyNtf);this.addMsgListener(app.ProtocolResponse.BossDailyModifyNtf,this,this.onBossDailyModifyNtf);this.addMsgListener(app.ProtocolResponse.BossFocusNtf,this,this.onBossFocusNtf);this.addMsgListener(app.ProtocolResponse.FightBossNtf,this,this.onFightBossNtf);this.addMsgListener(app.ProtocolResponse.FreshBossAck,this,this.onFreshBossAck);this.addMsgListener(app.ProtocolResponse.JoinBossAck,this,this.onJoinBossAck);this.addMsgListener(app.ProtocolResponse.BossRobotNtf,this,this.onBossRobotNtf);this.addMsgListener(app.ProtocolResponse.BossRobotStateNtf,this,this.onBossRobotStateNtf);this.addMsgListener(app.ProtocolResponse.BossHurtNtf,this,this.onBossHurtNtf);this.addMsgListener(app.ProtocolResponse.FocusBossAck,this,this.onFocusBossAck);this.addMsgListener(app.ProtocolResponse.LeaveBossAck,this,this.onLeaveBossAck);this.addMsgListener(app.ProtocolResponse.InspireNtf,this,this.onInspireNtf);this.addMsgListener(app.ProtocolResponse.InspireAck,this,this.onInspireAck);this.addMsgListener(app.ProtocolResponse.BuyBossDailyAck,this,this.onBuyBossDailyAck);this.addMsgListener(app.ProtocolResponse.BossAliveNtf,this,this.onBossAliveNtf);this.addMsgListener(app.ProtocolResponse.BossBelongNtf,this,this.onBossBelongNtf);this.addMsgListener(app.ProtocolResponse.WorldHostilityNtf,this,this.onWorldHostilityNtf);this.addMsgListener(app.ProtocolResponse.WorldBelongNtf,this,this.onWorldBelongNtf);this.addMsgListener(app.ProtocolResponse.RelieveAck,this,this.onRelieveAck);this.addMsgListener(app.ProtocolResponse.DailyTimeSetNtf,this,this.onDailyTimeSetNtf);this.addMsgListener(app.ProtocolResponse.StateFightNtf,this,this.onStateFightNtf);this.addMsgListener(app.ProtocolResponse.CrossBossHelpNtf,this,this.onCrossBossHelpNtf);this.addMsgListener(app.ProtocolResponse.CrossBossHelpAck,this,this.onCrossBossHelpAck);this.addMsgListener(app.ProtocolResponse.CrossBossAwardNtf,this,this.onCrossBossAwardNtf);this.addMsgListener(app.ProtocolResponse.IceWorldNtf,this,this.onIceWorldNtf);this.addMsgListener(app.ProtocolResponse.BossDailyVipNtf,this,this.onBossDailyVipNtf);this.addMsgListener(app.ProtocolResponse.IceWorldKickNtf,this,this.onIceWorldKickNtf);this.addMsgListener(app.ProtocolResponse.IceWorldBagNtf,this,this.onIceWorldBagNtf);this.addMsgListener(app.ProtocolResponse.CaveTreasureDataNtf,this,this.onCaveTreasureDataNtf);this.addMsgListener(app.ProtocolResponse.CaveTreasureBattleAck,this,this.onCaveTreasureBattleAck);this.addMsgListener(app.ProtocolResponse.WorldBossBagAllNtf,this,this.onWorldBossBagAllNtf);this.addMsgListener(app.ProtocolResponse.WorldBossBagAddNtf,this,this.onWorldBossBagAddNtf);this.addMsgListener(app.ProtocolResponse.WorldBossBagAwardAck,this,this.onWorldBossBagAwardAck);this.addMsgListener(app.ProtocolResponse.BossFreshInfoNewNtf,this,this.onBossFreshInfoNewNtf);this.addMsgListener(app.ProtocolResponse.KingBossFreshInfoNewNtf,this,this.onKingBossFreshInfoNewNtf);this.addMsgListener(app.ProtocolResponse.KingBossKillListNtf,this,this.onKingBossKillListNtf);this.addMsgListener(app.ProtocolResponse.KingBossRoleSizeNtf,this,this.onKingBossRoleSizeNtf);this.addMsgListener(app.ProtocolResponse.BossClientTipsNtf,this,this.onBossClientTipsNtf)};e.prototype.onBossClientTipsNtf=function(t,e){var i;if(csv.MapProxy.isInKuaFuMap()){i=game.Context.getSerName(e.cursvrid)+e.uname}else{i=e.uname}if(e.type==0){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_boss_error2",i))}else if(e.type==1){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_boss_error3",i))}else if(e.type==2){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_boss_error4",i))}};e.prototype.onKingBossRoleSizeNtf=function(t,e){this._model.dellYaowangBossRoleNum(e.kingbossrolesizelist)};e.prototype.onKingBossKillListNtf=function(t,e){this._model.yaowangLastKill=e.kingbossdailykilllist};e.prototype.onKingBossFreshInfoNewNtf=function(t,e){this._model.dellYaowangBossStates(e.bossinf)};e.prototype.onBossFreshInfoNewNtf=function(t,e){this._model.dellWorldBossStates(e.bossinf)};e.prototype.onWorldBossBagAllNtf=function(t,e){this._model.setBossAwards(e.type,e.award_list);this._model.event(s.BossEvent.BOSS_AWARD_CHANGE,e.type)};e.prototype.onWorldBossBagAddNtf=function(t,e){var i=this._model.getBossAwards(e.type);var n=i.length;var r=n+e.award_list.length;var o=[];for(var a=n;a<r;a++){o.push(a)}this._model.setBossNewDex(e.type,o);this._model.setBossAwards(e.type,i.concat(e.award_list));this._model.event(s.BossEvent.BOSS_AWARD_CHANGE,e.type)};e.prototype.onWorldBossBagAwardAck=function(t,e){};e.prototype.onCaveTreasureBattleAck=function(t,e){if(e.result){if(e.times>0){app.ViewManager.toggleDialog(s.BossSweepView,1,0,[e.id,e.times,e.award,csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE])}}};e.prototype.onCaveTreasureDataNtf=function(t,e){s.BossModel.getIns().updateCaveTreasureData(e.caveTreasure_finish_list)};e.prototype.onIceWorldBagNtf=function(t,e){s.BossModelIce.getIns().iceAwardArr=e.award;var i=Boolean(s.BossModelIce.getIns().iceAwardArr.length>0);if(i){main.MainUIOtherIcon.addRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.BOSS_ICE_BAG)}else{main.MainUIOtherIcon.removeRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.BOSS_ICE_BAG)}};e.prototype.onIceWorldKickNtf=function(t,e){manager.FlowManager.instance.flowByStyle1(app.getLang("寒气值已满，自动退出副本"))};e.prototype.onIceWorldNtf=function(t,e){s.BossModelIce.getIns().iceValueNum=e.icenum;this._model.event(s.BossEvent.BOSS_ICE_VALUE_NUM,e.icenum)};e.prototype.onBossDailyVipNtf=function(t,e){s.BossModelIce.getIns().setUseTimes(e.bdaily);this._model.event(s.BossEvent.BOSS_ICE_JOIN_NUM)};e.prototype.onCrossBossAwardNtf=function(t,e){this._model.dropArray=e.record;this._model.event(s.BossEvent.BOSS_DROP_OUT)};e.prototype.onCrossBossHelpAck=function(t,e){this._model.helpVo=e;this._model.setBtnMask();this._model.playCd()};e.prototype.onCrossBossHelpNtf=function(t,e){var i=battle.BattleConst.BATTLE_TYPE.BOSS_WORLD;var n=csv.MapProxy.MAP_TYPE.KUAFU_BOSS_IN;var r=csv.HelpProxy.getIns().getHelpEle(n,i);if(r){var o=csv.BossProxy.getIns().getCaveBossCfg(e.bossid);var a=csv.BossProxy.getIns().getMonsterId(o.bosssetbase);var s=csv.MonsterProxy.getIns().getCfg(a);var l=csv.MonsterProxy.getMonsterName(s);var u=new ChattingResponse;u.uid=e.uid;u.channel=chat.ChatModel.CHANNEL.WORLD;u.chatTime=game.Context.getServerTime();u.name=e.uname;u.level=e.level;u.headframeId=e.headframeId;u.simpleteamavatar=e.simpleteamavatar;var p=JSON.stringify({helpId:r.id,bossId:e.bossid.toString(),bossName:l});var h={t:"",ext:p};u.chatmsg=JSON.stringify(h);chat.ChatModel.getIns().dell(u)}};e.prototype.onStateFightNtf=function(t,e){this._model.battleState=e;this._model.event(s.BossEvent.BOSS_BATTLE_CHANGE)};e.prototype.onBossDailyNtf=function(t,e){this._model.dellDailyTime(e.bdaily)};e.prototype.onBossDailyModifyNtf=function(t,e){this._model.dellDailyTime(e.bdaily)};e.prototype.onBossFocusNtf=function(t,e){this._model.dellForces(e.bfocus)};e.prototype.onFocusBossAck=function(t,e){if(e.result==1){var i=csv.BossProxy.getIns().getBossType(e.bossinf);this._model.changeForceId(i,e.bossinf,e.flag==1)}};e.prototype.onFightBossNtf=function(t,e){this._model.dellEntered(e.fboss)};e.prototype.onFreshBossAck=function(t,e){this._model.dellBossDetailInfo(e.bossinf)};e.prototype.onJoinBossAck=function(t,e){if(e.result==0){manager.FlowManager.instance.flowByStyle1(app.getLang("挑战boss失败"))}else{this._model.battleBossId=e.bossinf;var i=csv.BossProxy.getIns().getCfg(e.bossinf);this._model.battletBossType=i.type}};e.prototype.onBossRobotNtf=function(t,e){battle.BattleManager.getIns().rankRoleList(e.robots);battle.BattleModel.getIns().storeSeverRobots(e)};e.prototype.onBossRobotStateNtf=function(t,e){battle.BattleModel.getIns().changeSeverRobots(e)};e.prototype.onBossHurtNtf=function(t,e){this._model.dellHurtInfo(e)};e.prototype.onLeaveBossAck=function(t,e){if(e.result==1){var i=0;if(csv.MapProxy.isInKuaFuMap()){i=1}app.ProtocolRequest.FreshBossReq([this._model.battleBossId],i)}};e.prototype.onInspireNtf=function(t,e){this._model.dellInspire(e.bossid,e.inf)};e.prototype.onInspireAck=function(t,e){if(e.result==1){this._model.dellInspire(e.bossid,e.inf);manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1505"))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1504"))}};e.prototype.onBuyBossDailyAck=function(t,e){if(e.result){manager.FlowManager.instance.flowByStyle1(app.getLang("buy_suc1"))}};e.prototype.onBossAliveNtf=function(t,e){if(csv.MapProxy.isFuncMap()){var i=game.Config.getIntParams(s.BossStatic.BOSS_RELIFE_CLOSE_TIME);var n=e.freshtime-game.Context.getServerTime();var r=n-i;if(r>0){Laya.timer.once(r*1e3,this,this.openBossRelifeNoticeView,[e.bossid,e.freshtime])}else{this.openBossRelifeNoticeView(e.bossid,e.freshtime)}}};e.prototype.openBossRelifeNoticeView=function(t,e){if(app.ViewManager.DisplayedInStage(s.BossRelifeNoticeView.SINGLE_KEY)){app.ViewManager.toggleDialog(s.BossRelifeNoticeView,-1,0)}app.ViewManager.toggleDialog(s.BossRelifeNoticeView,1,0,[t,e])};e.prototype.onBossBelongNtf=function(t,e){this._model.dellHistoryBossBelong(e);var i=csv.BossProxy.getIns().getBossType(e.belong);app.ViewManager.toggleDialog(s.BossKillView,1,0,[e.belong,i])};e.prototype.onWorldHostilityNtf=function(t,e){this._model.dellEnemys(e.hostility)};e.prototype.onWorldBelongNtf=function(t,e){if(e.belong.length==0){return}this._model.dellBelongInfo(e.belong[0])};e.prototype.onRelieveAck=function(t,e){};e.prototype.onDailyTimeSetNtf=function(t,e){this._model.dailyTimeSetInfo(e.setinf)};e.prototype.onRedDotChange=function(){Laya.timer.callLater(this,this.onUpdateRedDot)};e.prototype.onUpdateRedDot=function(){this._model.checkBossRed()};e.prototype.onTeamLvChange=function(){this._model.checkBossRed();this._model.setCommingCheckList()};e.SINGLE_KEY="boss.BossModule";return e}(app.ModuleBase);s.BossModule=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("battlegroup.csv");this.cfgMap=t.getMap("groupid");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getArr=function(){return this.cfgArr};e.SINGLE_KEY="csv.BattleGroupProxy";return e}(app.ModelBase);t.BattleGroupProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.setUseTimes=function(t){};e.prototype.setJoinTimes=function(){};e.prototype.checkRed=function(){this.setJoinTimes();var t=game.Config.getParams(550);var e=game.GridsModel.getIns().hasEnoughItems(t,false);if(this.iceJoinTimes>0&&e){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.BOSS_WOLRD_ICE)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.BOSS_WOLRD_ICE)}};e.SINGLE_KEY="boss.BossModelIce";return e}(app.ModelBase);t.BossModelIce=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.monsterIdMap={};t.bossPosMap={};return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){var t=app.Config.getResById("boss.csv");this.cfgMap=t.getMap("id");this.cfgSpMap=t.getMap("param1");this.cfgArr=t.getArray();t=app.Config.getResById("danaotiangong.csv");this.danaotiangongCfgMap=t.getMap("id");this.danaotiangongCfgArray=t.getArray();t=app.Config.getResById("iceworld.csv");this.iceCfgMap=t.getMap("id");this.iceCfgArray=t.getArray();this._bossMap={};for(var e=0,i=this.cfgArr.length;e<i;e++){var n=this.cfgArr[e];if(!this._bossMap[n.type]){this._bossMap[n.type]=[]}this._bossMap[n.type].push(n)}var r=app.Config.getResById("boss_shandong.csv");this._caveBossCfg=r.getMap("id");this._caveBossClassArr=r.getMapList("class");this._caveBossArr=r.getArray()};t.prototype.getCfg=function(t){return this.cfgMap[t]};t.prototype.getSpCfg=function(t){return this.cfgSpMap[t]};t.prototype.getArr=function(){return this.cfgArr};t.prototype.getBossType=function(t){var e;var i=this.getCfg(t);if(i){e=i.type}return e};t.prototype.getIndexByClassType=function(t){var e=this._caveBossClassArr[t][0];return this._caveBossArr.indexOf(e)};t.prototype.getBossListByClass=function(t){return this._caveBossClassArr[t]};t.prototype.getCaveBossName=function(t){var e=csv.BossProxy.getIns().getCaveBossCfg(t);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);return csv.MonsterProxy.getMonsterLvName(n)};t.prototype.getCaveBossCfg=function(t){return this._caveBossCfg[t]};t.prototype.getCaveBoss=function(){return this._caveBossArr};t.prototype.getCaveBossClass=function(){return this._caveBossClassArr};t.prototype.getBossArrByType=function(t){return this._bossMap[t]};t.prototype.getBossArrBySubType=function(t,e){var i=this._bossMap[t];var n=[];for(var r=0;r<i.length;r++){if(+i[r].param1==+e){n.push(i[r])}}return n};t.prototype.getMonsterId=function(t){if(!this.monsterIdMap[t]){var e=csv.MonsterProxy.getIns().getMonsterBase(t);var i=app.str2Array(e.battleset,";","-")[0][2];var n=csv.BattleGroupProxy.getIns().getCfg(i);var r=app.str2Array(n.monster,";","-")[0][1];this.monsterIdMap[t]=r}return this.monsterIdMap[t]};t.prototype.getBosssetbase=function(t){for(var e in this.monsterIdMap){if(this.monsterIdMap[e]==t){return e}}return null};t.prototype.getBossPos=function(t){if(!this.bossPosMap[t]){var e=this.getCfg(t);this.bossPosMap[t]=csv.MonsterProxy.getIns().getMonsterPos(e.bosssetbase)}return this.bossPosMap[t]};t.prototype.getBossName=function(t){var e=this.getCfg(t);var i=this.getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);return n.monname};t.prototype.getBossLvName=function(t){var e=this.getCfg(t);var i=this.getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);return n.monname+("("+n.monlevel+app.getLang("级")+")")};t.SINGLE_KEY="csv.BossProxy";t.ENUM={BOSS_SELF:1,BOSS_YAO_WANG:2,BOSS_VIP_4:3,BOSS_VIP_6:4,BOSS_VIP_8:5,BOSS_WORLD:6,BOSS_KUAFU:7,BOSS_WORLD_ICE:8,BOSS_GUILD:9};return t}(app.ModelBase);t.BossProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._buytimeMap={};t._buycostMap={};return t}t.prototype.getDailyTimeByBattleType=function(){var t;switch(battle.BattleModel.getIns().battleType){case battle.BattleConst.BATTLE_TYPE.BOSS_YEWAI:t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_YEWAI;break;case battle.BattleConst.BATTLE_TYPE.BOSS_WORLD:t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:t=csv.DailyTimeProxy.ENUM_TYPE.SSSL;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_MJG:t=csv.DailyTimeProxy.ENUM_TYPE.MJG;break;case battle.BattleConst.BATTLE_TYPE.PVP_JJC:t=csv.DailyTimeProxy.ENUM_TYPE.JING_JI;break;case battle.BattleConst.BATTLE_TYPE.PVP_ARENA:t=csv.DailyTimeProxy.ENUM_TYPE.QIE_CUO;break;case battle.BattleConst.BATTLE_TYPE.YAODONG:t=csv.DailyTimeProxy.ENUM_TYPE.YAO_DONG;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_SZJD:t=csv.DailyTimeProxy.ENUM_TYPE.SZJD;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_NINE_TOWER:t=csv.DailyTimeProxy.ENUM_TYPE.NINE_TOWER;break}return t};t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){var t=app.Config.getResById("daliytime.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};t.prototype.getCfg=function(t){return this.cfgMap[t]};t.prototype.getArr=function(){return this.cfgArr};t.prototype.getIdByType=function(t){var e;if(t==csv.BossProxy.ENUM.BOSS_YAO_WANG){e=csv.DailyTimeProxy.ENUM_TYPE.BOSS_YAO_WANG}else if(t==csv.BossProxy.ENUM.BOSS_VIP_4){e=csv.DailyTimeProxy.ENUM_TYPE.BOSS_VIP_4}else if(t==csv.BossProxy.ENUM.BOSS_VIP_6){e=csv.DailyTimeProxy.ENUM_TYPE.BOSS_VIP_6}else if(t==csv.BossProxy.ENUM.BOSS_VIP_8){e=csv.DailyTimeProxy.ENUM_TYPE.BOSS_VIP_8}else if(t==csv.BossProxy.ENUM.BOSS_WORLD){e=csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD}else if(t==csv.BossProxy.ENUM.BOSS_KUAFU){e=csv.DailyTimeProxy.ENUM_TYPE.KUA_FU}return e};t.prototype.buytime=function(t){var e=this.getCfg(t);if(!this._buytimeMap[t]){var i=app.str2Array(e.buytime,";","-");this._buytimeMap[t]=i.length}var n=this._buytimeMap[t]|0;var r=parseInt(e.viptype);if(r!=0){var o=vipcode.VipModel.getIns().vipLvl;var a=csv.VipProxy.getIns().getVipPri(r,o);n=Math.min(n,a)}if(t==csv.DailyTimeProxy.ENUM_TYPE.SSSL){var s=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslBuyCount);n+=s}return n};t.prototype.buyMaxTime=function(t){var e=this.getCfg(t);if(!this._buytimeMap[t]){var i=app.str2Array(e.buytime,";","-");this._buytimeMap[t]=i.length}var n=this._buytimeMap[t]|0;var r=parseInt(e.viptype);if(r!=0){var o=csv.VipProxy.getIns().getVipPri(r,csv.VipProxy.getIns().maxVip);n=Math.max(n,o)}return n};t.prototype.vipBuyTime=function(t){var e=this.getCfg(t);var i=parseInt(e.viptype);var n=csv.VipProxy.getIns().maxVip;var r=csv.VipProxy.getIns().getVipPri(i,0);for(var o=1;o<=n;o++){if(csv.VipProxy.getIns().getVipPri(i,o)-r>0){return true}}return false};t.prototype.isCanBuy=function(t){var e=this.getCfg(t);if(e&&e.buytime!=""){return true}return false};t.prototype.buycost=function(t,e){if(!this._buycostMap[t]){this._buycostMap[t]={};var i=this.getCfg(t);var n=app.str2Array(i.buytime,";","-");for(var r=0,o=n.length;r<o;r++){var a=n[r];this._buycostMap[t][a[0]]=[parseInt(a[1]),parseInt(a[2])]}}var s=this._buycostMap[t][e];if(!s){var o=Object.keys(this._buycostMap[t]).length;s=this._buycostMap[t][o-1]}return s};t.SINGLE_KEY="csv.DailyTimeProxy";t.ENUM_TYPE={BOSS_YEWAI:1,BOSS_WORLD:2,BOSS_VIP_4:3,BOSS_VIP_6:4,BOSS_VIP_8:5,SSSL:7,KUA_FU:6,MJG:8,ELITE_SWEEP:9,JING_JI:10,QIE_CUO:11,YAO_DONG:12,SZJD:13,NINE_TOWER:14,QUICK_GUAJI:15,BOSS_WORLD_ICE:16,BOSS_CAVE:17,MOUNTAIN:18,JJC_NEW:19,KUA_FU_KILL:20,BOSS_MONSTERBOOK:21,FUMO:22};return t}(app.ModelBase);t.DailyTimeProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("inspire.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getArr=function(){return this.cfgArr};e.prototype.getTypeArr=function(t){if(!this.typeMap){this.typeMap={};var e=void 0;var i=void 0;var n=void 0;for(var r=0,o=this.cfgArr.length;r<o;r++){var a=this.cfgArr[r];var s=parseInt(a.type);if(!this.typeMap[s]){this.typeMap[s]=[]}if(a.times){n=s;var l=app.str2Array(a.cost,"-")[0];if(!e){i=[];e=l}else{if(e!=l){i=[];e=l;this.typeMap[s].push({costid:e,subArr:i})}}i.push(a)}else{this.typeMap[s].push(a)}}if(i){this.typeMap[n].push({costid:e,subArr:i})}}return this.typeMap[t]};e.prototype.getTypeByBattleType=function(){var t;switch(battle.BattleModel.getIns().battleType){case battle.BattleConst.BATTLE_TYPE.BOSS_YEWAI:t=csv.InspireProxy.ENUM_TYPE.BOSS_YEWAI;break;case battle.BattleConst.BATTLE_TYPE.BOSS_WORLD:if(csv.MapProxy.MAP_TYPE.KUAFU_BOSS_IN==game.Context.getMapType()){t=csv.InspireProxy.ENUM_TYPE.BOSS_KUAFU}else{t=csv.InspireProxy.ENUM_TYPE.BOSS_WORLD}break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_SSSL:t=csv.InspireProxy.ENUM_TYPE.SSSL;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_MJG:t=csv.InspireProxy.ENUM_TYPE.MJG;break;case battle.BattleConst.BATTLE_TYPE.DEFEND_HULU:t=csv.InspireProxy.ENUM_TYPE.SHHL;break;case battle.BattleConst.BATTLE_TYPE.YAODONG:t=csv.InspireProxy.ENUM_TYPE.YAODONG;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_ZJQW:t=csv.InspireProxy.ENUM_TYPE.ZJQW;break;case battle.BattleConst.BATTLE_TYPE.DUNGEON_SZJD:t=csv.InspireProxy.ENUM_TYPE.SZJD;break}return t};e.prototype.getTypeByActivityType=function(t){var e;switch(t){case csv.DailyTimeProxy.ENUM_TYPE.MJG:e=csv.InspireProxy.ENUM_TYPE.MJG;break;case csv.DailyTimeProxy.ENUM_TYPE.SSSL:e=csv.InspireProxy.ENUM_TYPE.SSSL;break;case csv.DailyTimeProxy.ENUM_TYPE.SZJD:e=csv.InspireProxy.ENUM_TYPE.SZJD;break}return e};e.SINGLE_KEY="csv.InspireProxy";e.ENUM_TYPE={BOSS_YEWAI:1,BOSS_WORLD:2,SSSL:3,MJG:4,SHHL:5,YAODONG:6,SZJD:11,ZJQW:12,BOSS_KUAFU:13};return e}(app.ModelBase);t.InspireProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onClick)};e.prototype.onDisplay=function(){s.BossModel.getIns().on(s.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){s.BossModel.getIns().on(s.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this.dataSource[0];var e=s.BossModel.getIns().getDailyTime(t);var i=csv.DailyTimeProxy.getIns().buytime(t);if(!i){var n=csv.DailyTimeProxy.getIns().buycost(t,1);this.label01.text=app.getLang(this.dataSource[1],0,0);if(n){this.label03.text=app.getLang(this.dataSource[2],n[1]);this.daojubg.parserIconByItemId(parseInt(n[0]))}return}var r=e.bnum;var o=r+1;if(o>i){o=i}var a=csv.DailyTimeProxy.getIns().buycost(t,o);this.label01.text=app.getLang(this.dataSource[1],i-e.bnum,i);if(a){this.label03.text=app.getLang(this.dataSource[2],a[1]);this.daojubg.parserIconByItemId(parseInt(a[0]))}};e.prototype.onClick=function(){var t=this.dataSource[0];var e=s.BossModel.getIns().getDailyTime(t);var i=csv.DailyTimeProxy.getIns().buytime(t);if(!i){app.ViewManager.toggleDialog(s.BossBuyTimeTips,-1,0);game.RoleModel.getIns().buyVip();return}if(e.bnum>=i){app.ViewManager.toggleDialog(s.BossBuyTimeTips,-1,0);if(vipcode.VipModel.getIns().vipLvl>=csv.VipProxy.getIns().maxVip){game.Alert.show(app.getLang("shandong_error3"))}else{game.RoleModel.getIns().buyVip()}return}var n=csv.DailyTimeProxy.getIns().buycost(t,e.bnum+1);if(n){if(!game.GridsModel.getIns().hasEnoughItems(n[0]+"-"+n[1],false,true)){app.ViewManager.toggleDialog(s.BossBuyTimeTips,-1,0);return}}s.BossModel.getIns().onBuyTimesReq(t)};e.prototype.onVip=function(){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.VIP)};e.SINGLE_KEY="boss.BossBuyTimeTips";return e}(ui.alert.shandongtanbaoalertUI);s.BossBuyTimeTips=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(p){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemList.renderHandler=new Laya.Handler(this,this.onRenderItem);this.itemList.scrollRectOffX=10;this.itemList.scrollRectOffY=10;this.btnChallenge.clickHandler=new Laya.Handler(this,this.onClickBtn,[0]);this.btnQuick.clickHandler=new Laya.Handler(this,this.onClickBtn,[1]);this.btnFast.clickHandler=new Laya.Handler(this,this.onClickBtn,[5]);this.touxingimg.on(Laya.Event.CLICK,this,this.onClickHead);this.gouxuan.on(Laya.Event.CHANGE,this,this.onCheckBoxChange);this.wenben1.on(Laya.Event.LINK,this,this.onLinkHandler);this.txtTips.mouseEnabled=false;this.saodangtishi.mouseEnabled=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.onCheckBoxChange=function(){this.updateDropItems();var t=new CltUseDataInfo;t.id=this.id;t.val=this.gouxuan.selected?1:0;game.SystemSetModel.getInstance().setFuncDataByType(game.settingFuncType.bossCaveTreasure,0,t);this.setBtnLabel()};e.prototype.setData=function(t){this.id=t.id;var e=csv.BossProxy.getIns().getCaveBossCfg(t.id);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.imgjiaobiao.skin="res/static/bosszong/"+e.jiaobiao+".png";this.touxingimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.imgName.skin="res/static/bosszong/"+e.bossname+".png";this.dajishilab.text=n.monlevel+"";this.itemList.array=game.ItemUtil.parserList(e.dropshow);var r=e.bsdropshow.split("-");var o=game.ItemUtil.createVO(parseInt(r[0]));o.setCount(parseInt(r[1]));this.bide.gezi.setData(o);this.bide.shuzhi.visible=false;this.updateDropItems();var a=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveNeedLevel);this.setBtnState(t.id,e.teamlv,a)};e.prototype.setCheckBoxSelected=function(t){this.gouxuan.selected=t};e.prototype.updateDropItems=function(){var t;var e=csv.BossProxy.getIns().getCaveBossCfg(this.id);var i=p.BossModel.getIns().isChallenged(this.id);if(i){if(e.qfsaodang&&this.gouxuan.selected){t=e.qfdropshow}else{t=e.dropshow}}else{t=e.fightdropshow}var n=t.split(";");this.itemList.array=n};e.prototype.setBtnState=function(t,e,i){var n=csv.BossProxy.getIns().getCaveBossCfg(t);var r=p.BossModel.getIns().isChallenged(t);if(r){this.box1.visible=false;this.box2.visible=true;if(t>=1001&&t<=1003){this.btnFast.visible=false;this.btnQuick.x=140;this.btnQuick.label=app.getLang("shandong_btn2",1)}else{this.setBtnLabel()}if(n.qfsaodang==0){this.gouxuan.visible=false;this.wenben1.text=this.shuzhi.text=this.saodangtishi.text=""}else{if(p.BossModel.getIns().getQiFuOpenNotice()){this.gouxuan.visible=false;this.wenben1.text=this.shuzhi.text="";this.saodangtishi.text=p.BossModel.getIns().getQiFuOpenNotice()}else{this.gouxuan.visible=true;this.saodangtishi.text="";var o=game.SystemSetModel.getInstance().getFuncDataById(game.settingFuncType.bossCaveTreasure,t);this.gouxuan.selected=o&&o.val==1;var a=game.ItemUtil.parserList(n.qfitem)[0];var s=game.STYLES.ITEM_QUALITY_S[a.getQuality()];this.wenben1.text=app.getLang("boss_shandong2",a.getHTMLName(),s,a.getItemId());var l=game.GridsModel.getIns().getItemCount(a.getItemId());var u=a.count;this.shuzhi.text=l+"/"+u;if(l<u){this.shuzhi.color=game.STYLES.RED_COLOR}else{this.shuzhi.color=game.STYLES.DESC_TXT_COLOR_S}}}}else{this.box2.visible=false;this.box1.visible=true;e=e-i;if(game.Context.teamLv>=e){this.txtTips.text="";this.WENBEN2.visible=this.upimg.visible=this.btnChallenge.visible=true}else{this.txtTips.text=app.getLang("shandong_tips4",e);this.WENBEN2.visible=this.upimg.visible=this.btnChallenge.visible=false}}};e.prototype.setBtnLabel=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE;var e=p.BossModel.getIns().getDailyTime(t);var i=csv.BossProxy.getIns().getCaveBossCfg(this.id);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveBattleTime);var r=0;n-=e.extnum;if(n<0)n=0;var o=e.fnum+e.gnum+n;if(o<=1){this.btnFast.visible=false;this.btnQuick.x=140}else{this.btnFast.visible=true;this.btnQuick.x=28;r=o<5?o:5}var a="";var s="";if(i.qfsaodang!=0&&this.gouxuan.selected){a=app.getLang("boss_shandonganjian6",1);s=app.getLang("boss_shandonganjian6",r)}else{a=app.getLang("shandong_btn2",1);s=app.getLang("shandong_btn2",r)}this.btnQuick.label=a;this.btnFast.label=s};e.prototype.onRenderItem=function(t,e){var i=t.dataSource;var n=i.split("-");var r=game.ItemUtil.createVO(parseInt(n[0]));r.setCount(parseInt(n[1]));var o=parseInt(n[2]);var a=Math.floor(o/100*100)/100;if(a==100){t.shuzhi.visible=false;t.bideimg.visible=true}else{t.shuzhi.visible=true;t.shuzhi.value=a+"%";t.bideimg.visible=false}t.gezi.setData(r)};e.prototype.onClickBtn=function(t){p.BossModel.getIns().onGeneralBattleReq(this.id,t,csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE)};e.prototype.onClickHead=function(){var t=csv.BossProxy.getIns().getCaveBossCfg(this.id);var e=csv.MonsterProxy.getIns().getMonsterBase(t.bosssetbase).element;tip.TipManager.showWuXingTip(e)};e.prototype.onLinkHandler=function(t){var e=game.ItemUtil.createVO(t);tip.TipManager.show(e,true,true)};e.SINGLE_KEY="boss.BossCaveTreasureItem";return e}(ui.bosszong.shandongtanbaoitemUI);p.BossCaveTreasureItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(u){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.animationxuanzhong.visible=false;this.yeqianimg.mouseEnabled=false;this.yeqianbtn.selected=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=u.BossModel.getIns();this.classNum=t;var i=util.CNUtil.toCNLower(t);this.yeqianbtn.label=app.getLang("lotus_1",i);this.yeqianimg.skin="res/static/mainlisticon/bg_zb_jieshu_"+t+".png";var n=u.BossModel.getIns().getInitLvTab();var r=u.BossModel.getIns().getChallengeNum(csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE,fabaonew.Etask_type.BossCaveBattleTime);if(r>0&&t==n){game.RedDotView.addTo(this,this.width-10,10)}else{game.RedDotView.removeFrom(this)}var o=e.getCurOPenId();var a=csv.BossProxy.getIns().getCaveBossCfg(o);if(a.class==t){var s=e.hasNewOpen();if(s){game.RedDotView.addTo(this,this.width-10,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{game.RedDotView.removeFrom(this)}}else{game.RedDotView.removeFrom(this)}var l=u.BossModel.getIns().isClassOpen(t);this.gray=!l};e.prototype.setSelcted=function(t){if(t==this.classNum){this.yeqianbtn.selected=true}else{this.yeqianbtn.selected=false}};e.SINGLE_KEY="boss.BossCaveTreasureLVCell";return e}(ui.main.mainyeqianitemUI);u.BossCaveTreasureLVCell=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listshuxing.renderHandler=new Laya.Handler(this,this.onRenderItem);this.labeljihuo.text=app.getLang("wuxing_title1")};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=app.str2Array(this.dataSource[0],";","-");this.listshuxing.array=t;this.height=this.tipsbg.height=this.listshuxing.y+t.length*36+30};e.prototype.onRenderItem=function(t,e){var i=t.dataSource;var n=Attributes.getWuxingEnumType(parseInt(i[0]));t.shuxing.skin="public/bg_wuxing_"+n+".png";t.xinxi.text=i[i.length-1]};e.SINGLE_KEY="boss.BossCaveTreasureTips";return e}(ui.bosszong.wuxingshuxingtipsUI);t.BossCaveTreasureTips=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.jiahaobtn.on(Laya.Event.CLICK,this,this.onAddTime);this.height=1250;this.xiala.itemRender=i.BossCaveTreasureItem;this.xiala.renderHandler=new Laya.Handler(this,this.onBossItemRender);this.yheqian.itemRender=i.BossCaveTreasureLVCell;this.yheqian.renderHandler=new Laya.Handler(this,this.onLvCellRender);this.yheqian.selectHandler=new Laya.Handler(this,this.onTabSelectHandler);this.yheqian.mouseEnabled=this.yheqian.selectEnable=true;this.yheqian.hScrollBarSkin="";guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.SHANDONG_BATTLE,this,this.getGuideItem,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.SHANDONG_SELECT,this,this.getGuideItem2,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BOSS_QIFU,this,this.getGuideItem3,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.SHANDONG_SWEEP,this,this.getGuideItem4,300);game.HelperViewHandler.registerStr([this.imgtishi,this.shuoming],"func256t","func256")};e.prototype.getGuideItem=function(t){var e=0;for(var i=0,n=this.bossList.length;i<n;i++){var r=this.bossList[i];if(t==r.id){e=i;break}}this.xiala.scrollTo(e);for(var i=0,n=this.xiala.cells.length;i<n;i++){var o=this.xiala.cells[i];if(o.dataSource&&o.dataSource.id==t){return o.btnChallenge}}return null};e.prototype.getGuideItem4=function(t){var e=0;for(var i=0,n=this.bossList.length;i<n;i++){var r=this.bossList[i];if(t==r.id){e=i;break}}this.xiala.scrollTo(e);for(var i=0,n=this.xiala.cells.length;i<n;i++){var o=this.xiala.cells[i];if(o.dataSource&&o.dataSource.id==t){return o.btnQuick}}return null};e.prototype.getGuideItem2=function(t){this.yheqian.selectedIndex=t-1;return"complete"};e.prototype.getGuideItem3=function(t){var e=0;for(var i=0,n=this.bossList.length;i<n;i++){var r=this.bossList[i];if(t==r.id){e=i;break}}this.xiala.scrollTo(e);for(var i=0,n=this.xiala.cells.length;i<n;i++){var o=this.xiala.cells[i];if(o.dataSource&&o.dataSource.id==t){return o.gouxuan}}return null};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.updateView);this._model.on(i.BossEvent.BOSS_CAVETREASURE_QIFU,this,this.updateQifuSelected);game.RoleModel.getIns().on(game.RoleModel.EVENTS.LEVEL_CHANGE,this,this.onLevelChange);this.leaveClass=-1;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.updateView);this._model.off(i.BossEvent.BOSS_CAVETREASURE_QIFU,this,this.updateQifuSelected);game.RoleModel.getIns().off(game.RoleModel.EVENTS.LEVEL_CHANGE,this,this.onLevelChange);this.leaveClass=-1;Laya.timer.clear(this,this.loopFreshTime);this._model.stopUpdateBossInfo()};e.prototype.refreshAll=function(){this.setDailyTime();this.onLevelChange();this.yheqian.array=this.getClassArr();var t=this._model.getInitLvTab();var e=this.yheqian.array.indexOf(t);if(this.yheqian.selectedIndex==e){this.updateSelectedTabData(this.yheqian.selectedIndex)}else{this.yheqian.selectedIndex=e}var i=this.yheqian.selectedIndex-2>0?this.yheqian.selectedIndex-2:0;this.yheqian.scrollTo(i)};e.prototype.updateView=function(){this.callLater(this.refreshAll)};e.prototype.onLevelChange=function(){this.yheqian.refresh()};e.prototype.updateQifuSelected=function(t){for(var e=0;e<this.xiala.cells.length;e++){var i=this.xiala.cells[e];if(i&&i.dataSource&&i.dataSource.id==t.id){i.setCheckBoxSelected(t.selected)}}};e.prototype.onLvCellRender=function(t,e){t.setData(t.dataSource);var i=this.yheqian.array[this.yheqian.selectedIndex];t.setSelcted(i)};e.prototype.onTabSelectHandler=function(t){var e=this._model.getInitLvTab();var i=this.yheqian.array[t];if(e==i){this._model.setCurOPenId(this._model.getCurOPenId())}this._model.caveSelectedClass=i;if(this.leaveClass==-1){this.leaveClass=this._model.caveSelectedClass}this.updateSelectedTabData(t)};e.prototype.updateSelectedTabData=function(t){var e;var i=0;var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveNeedLevel);var r=this.yheqian.array[t];this.bossList=csv.BossProxy.getIns().getBossListByClass(r);this._model.startUpdateBossInfo(this.bossList);for(var o=this.bossList.length-1;o>=0;o--){e=csv.BossProxy.getIns().getCaveBossCfg(this.bossList[o].id);if(game.Context.teamLv>=e.teamlv-n){i=csv.BossProxy.getIns().getIndexByClassType(e.class);break}}this.xiala.array=this.bossList;this.yheqian.refresh()};e.prototype.onBossItemRender=function(t){t.setData(t.dataSource)};e.prototype.onAddTime=function(){app.ViewManager.toggleDialog(i.BossBuyTimeTips,1,0,[csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE,"shandong_tips9","shandong_tips10"])};e.prototype.setDailyTime=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE;var e=this._model.getDailyTime(t);var i=csv.DailyTimeProxy.getIns().getCfg(t);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveBattleTime);var r=parseInt(i.time)+n;n-=e.extnum;if(n<0)n=0;var o=e.fnum+e.gnum+n;this.cishu.text=o+"/"+r;if(e.endtime==0&&o>=r){this.huifulab.visible=false}else{this.huifulab.visible=true;this._recodeTime=e.endtime;var a=this._recodeTime-game.Context.getServerTime();this.huifulab.text=app.getLang("shandong_tips2",util.TimeUtil.formatTime(a));this.startLoop()}if(csv.DailyTimeProxy.getIns().isCanBuy(t)){this.jiahaobtn.visible=true}else{this.jiahaobtn.visible=false}};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=this._recodeTime-game.Context.getServerTime();if(t>0){this.huifulab.text=app.getLang("shandong_tips2",util.TimeUtil.formatTime(t))}else{this.huifulab.visible=false;Laya.timer.clear(this,this.loopFreshTime)}};e.prototype.getClassArr=function(){var t=[];var e=csv.BossProxy.getIns().getCaveBossClass();var i=1;while(e[i]){t.push(i);i++}return t};e.SINGLE_KEY="boss.BossCaveTreasureView";return e}(ui.bosszong.shandongtanbaoviewUI);i.BossCaveTreasureView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boGuide=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.jiahaobtn.on(Laya.Event.CLICK,this,this.onAddTime);this.bossList=csv.BossProxy.getIns().getCaveBoss();this.xiala.itemRender=i.BossItemView;this.xiala.renderHandler=new Laya.Handler(this,this.onBossItemRender);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.SHANDONG_BATTLE,this,this.getGuideItem,300);game.HelperViewHandler.registerStr([this.imgtishi,this.shuoming],"func256t","func256")};t.prototype.onBossItemRender=function(t){t.setData(t.dataSource)};t.prototype.getGuideItem=function(t){this.boGuide=true;this.xiala.array=this.bossList;var e=0;for(var i=0,n=this.bossList.length;i<n;i++){var r=this.bossList[i];if(t==r.id){e=i;break}}this.xiala.scrollTo(e);for(var i=0,n=this.xiala.cells.length;i<n;i++){var o=this.xiala.cells[i];if(o.dataSource&&o.dataSource.id==t){return o.btnChallenge}}return null};t.prototype.onAddTime=function(){app.ViewManager.toggleDialog(i.BossBuyTimeTips,1,0,[csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE,"shandong_tips9","shandong_tips10"])};t.prototype.onDisplay=function(){this._model.startUpdateBossInfo(this.bossList);this._model.on(i.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.updateView);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.updateView);Laya.timer.clear(this,this.loopFreshTime);this._model.stopUpdateBossInfo();this.boGuide=false;dailytask.FubenModel.getIns().setBoNew(csv.FunctionsProxy.ENUMS.BOSS_CAVE,false)};t.prototype.refreshAll=function(){this.setDailyTime();if(this.boGuide){return}var t=0;var e;var i=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveNeedLevel);for(var n=this.bossList.length-1;n>=0;n--){e=csv.BossProxy.getIns().getCaveBossCfg(this.bossList[n].id);if(game.Context.teamLv>=e.teamlv-i){t=csv.BossProxy.getIns().getIndexByClassType(e.class);break}}this.xiala.array=this.bossList;this.xiala.selectedIndex=t;this.xiala.scrollTo(t)};t.prototype.updateView=function(){this.xiala.refresh();this.setDailyTime()};t.prototype.setDailyTime=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE;var e=this._model.getDailyTime(t);var i=csv.DailyTimeProxy.getIns().getCfg(t);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveBattleTime);var r=parseInt(i.time)+n;n-=e.extnum;if(n<0)n=0;var o=e.fnum+e.gnum+n;this.cishu.text=o+"/"+r;if(e.endtime==0&&o>=r){this.huifulab.visible=false}else{this.huifulab.visible=true;this._recodeTime=e.endtime;var a=this._recodeTime-game.Context.getServerTime();this.huifulab.text=app.getLang("shandong_tips2",util.TimeUtil.formatTime(a));this.startLoop()}if(csv.DailyTimeProxy.getIns().isCanBuy(t)){this.jiahaobtn.visible=true}else{this.jiahaobtn.visible=false}};t.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=this._recodeTime-game.Context.getServerTime();if(t>0){this.huifulab.text=app.getLang("shandong_tips2",util.TimeUtil.formatTime(t))}else{this.huifulab.visible=false;Laya.timer.clear(this,this.loopFreshTime)}};t.SINGLE_KEY="boss.BossCaveView";return t}(ui.bosszong.bossyewaiviewnewUI);i.BossCaveView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(l){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemList.itemRender=grids.GridView;this.itemList.renderHandler=grids.GridView.CommonItemRender;this.ani1.gotoAndStop(0);this.btnFast.clickHandler=new Laya.Handler(this,this.onClick,[5]);this.btnQuick.clickHandler=new Laya.Handler(this,this.onClick,[1]);this.btnChallenge.clickHandler=new Laya.Handler(this,this.onClick,[0]);this.btnQuick.label=app.getLang("shandong_btn2",1);this.btnFast.label=app.getLang("shandong_btn2",5);this.btnChallenge.label=app.getLang("iceworld_des1");this.shuxinglist.itemRender=ui.bosszong.bosswuxingshuxingUI;this.shuxinglist.renderHandler=new Laya.Handler(this,this.shuxingRender)};e.prototype.shuxingRender=function(t){var e=t.dataSource;var i=Attributes.getWuxingEnumType(parseInt(e[0]));t.wuxingimg.skin="public/bg_wuxing_"+i+".png";t.shuzhi.text=e[e.length-1]};e.prototype.onClick=function(t){l.BossModel.getIns().onGeneralBattleReq(this.id,t,csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.id=t.id;var e=csv.BossProxy.getIns().getCaveBossCfg(t.id);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.touxingimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.imgName.skin="res/static/bosszong/"+e.bossname+".png";this.dajishilab.text=n.monlevel+"";this.itemList.array=game.ItemUtil.parserList(e.dropshow);this.imgjiaobiao.skin="bosszong/bg_jiaobiao_"+e.class+".png";var r=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveNeedLevel);if(game.Context.teamLv>=e.teamlv-r&&dailytask.FubenModel.getIns().checkIfNewId(csv.FunctionsProxy.ENUMS.BOSS_CAVE,t.id)){game.RedDotView.addTo(this.imgjiaobiaoxin,22,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{game.RedDotView.removeFrom(this.imgjiaobiaoxin)}this.setBtnState(t.id,e.teamlv,r);var o=csv.MonsterProxy.getIns().getMonsterBase(e.bosssetbase).element;if(o&&o.length>0){var a=app.str2Array(o,";","-");this.shuxinglist.array=a}else{this.shuxinglist.array=[]}};e.prototype.setBtnState=function(t,e,i){var n=l.BossModel.getIns().isChallenged(t);var r=csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE;var o=l.BossModel.getIns().getDailyTime(r);var a=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossCaveBattleTime);a-=o.extnum;if(a<0)a=0;var s=o.fnum+o.gnum+a;if(s<=0){this.txtTips.text=app.getLang("shandong_tips5");this.ani1.gotoAndStop(3)}else if(n){if(t>=1001&&t<=1003){this.ani1.gotoAndStop(2)}else{if(s==1){this.ani1.gotoAndStop(2)}else{this.ani1.gotoAndStop(1);if(s<5){this.btnFast.label=app.getLang("shandong_btn2",s)}else{this.btnFast.label=app.getLang("shandong_btn2",5)}}}}else{e=e-i;if(game.Context.teamLv>=e){this.ani1.gotoAndStop(0)}else{this.ani1.gotoAndStop(3);this.txtTips.text=app.getLang("shandong_tips4",e)}}};e.SINGLE_KEY="boss.BossItemView";return e}(ui.bosszong.bossyewaiitemnewUI);l.BossItemView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.daojishi.text=util.TimeUtil.formatDate(t.fighttime,false,true);if(e==csv.BossProxy.ENUM.BOSS_KUAFU){this.wanjianame.text=game.Context.getSerName(t.cursvrid)+t.uname}else{this.wanjianame.text=t.uname}this.zhanli.text=t.score.toNumber()+""};e.SINGLE_KEY="boss.BossKillItem";return e}(ui.bosszong.guishujilutipitemUI);t.BossKillItem=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paiminglist.itemRender=i.BossKillItem;this.paiminglist.renderHandler=new Laya.Handler(this,this.onRender);this._model=i.BossModel.getIns();this.labelxiangxi03.text=app.getLang("attribution_record_des_4")};e.prototype.onRender=function(t,e){t.setData(t.dataSource,this.dataSource[1])};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this._model.getHistoryBossBelong(this.dataSource[0]);this.paiminglist.array=t};e.SINGLE_KEY="boss.BossKillView";return e}(ui.bosszong.guishujilutipUI);i.BossKillView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(o){var t=function(t){__extends(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick)};r.prototype.onClick=function(){Laya.Dialog.closeAll();var t=csv.BossProxy.getIns().getBossType(this.dataSource[0]);if(t==csv.BossProxy.ENUM.BOSS_KUAFU){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.BOSS_KUAFU,true,false,this.dataSource)}else if(t==csv.BossProxy.ENUM.BOSS_WORLD){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.BOSS_WOLRD,true,false,this.dataSource)}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.BOSS_YEWAI,true,false,this.dataSource)}Laya.timer.clear(this,this.loopFreshTime)};r.prototype.onDisplay=function(){this.callLater(this.refreshAll)};r.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime)};r.prototype.refreshAll=function(){var t=csv.BossProxy.getIns().getCfg(this.dataSource[0]);var e=csv.BossProxy.getIns().getMonsterId(t.bosssetbase);var i=csv.MonsterProxy.getIns().getCfg(e);this.label01.text=app.getLang("boss_coming",app.getLang(i.monname));this._endTime=this.dataSource[1];var n="boss_coming1";if(o.BossModel.getIns().autoBattle){n="boss_coming2"}var r=this._endTime-game.Context.getServerTime();this.daojishi.text=app.getLang(n,r);this.startLoop()};r.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};r.prototype.loopFreshTime=function(){var t=this._endTime-game.Context.getServerTime();var e="boss_coming1";if(o.BossModel.getIns().autoBattle){e="boss_coming2"}if(t>0){this.daojishi.text=app.getLang(e,t)}else{Laya.timer.clear(this,this.loopFreshTime);if(o.BossModel.getIns().autoBattle){this.onJoinBossReq()}else{app.ViewManager.toggleDialog(r,-1,0)}}};r.prototype.onJoinBossReq=function(){var t=this.dataSource[0];var e=csv.BossProxy.getIns().getBossType(t);var i=csv.DailyTimeProxy.getIns().getIdByType(e);var n=o.BossModel.getIns().getDailyTime(i);if(n.fnum+n.gnum==0){app.ViewManager.toggleDialog(r,-1,0);return}o.BossModel.getIns().onJoinBossReq(t,i)};r.SINGLE_KEY="boss.BossRelifeNoticeView";return r}(ui.alert.bossshuaxinalertUI);o.BossRelifeNoticeView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jianglilist.itemRender=grids.GridView;this.jianglilist.renderHandler=grids.GridView.CommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=game.ItemUtil.parserList(this.dataSource);var e=[];e=e.concat(t);var i=e.length;if(i<=8){for(var n=i;n<8;n++){e.push(game.GridsModel.EMPTY)}}else{var r=i%5;for(var n=r;n<5;n++){e.push(game.GridsModel.EMPTY)}}this.jianglilist.array=e};e.SINGLE_KEY="boss.BossReward2View";return e}(ui.bosszong.jianglizonglan2UI);t.BossReward2View=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jianglilist.itemRender=grids.GridView;this.jianglilist.renderHandler=grids.GridView.CommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=game.ItemUtil.parserList(this.dataSource);var e=[];e=e.concat(t);var i=e.length;if(i<=8){for(var n=i;n<8;n++){e.push(game.GridsModel.EMPTY)}}else{var r=i%5;for(var n=r;n<5;n++){e.push(game.GridsModel.EMPTY)}}this.jianglilist.array=e};e.SINGLE_KEY="boss.BossRewardView";return e}(ui.bosszong.jianglizonglanUI);t.BossRewardView=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jinrubtn.on(Laya.Event.CLICK,this,this.onFight);this.btnanniu.on(Laya.Event.CLICK,this,this.onFight);this.gezilsit.itemRender=grids.GridView;this.gezilsit.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.gezilsit,this.box1,96,this.gezilsit.spaceX);this.gezilist2.itemRender=grids.GridView;this.gezilist2.renderHandler=grids.GridView.CommonItemRender;this.jipingLayout=new game.CenterLayoutMediator(this.gezilist2,this.box2,96,this.gezilist2.spaceX);this._model=o.BossModel.getIns()};e.prototype.onFight=function(t){t.stopPropagation();if(battle.BattleModel.getIns().checkBattleState(true)){return}var e=this._model.getDailyTime(this.dataSource.type);var i=e.fnum+e.gnum;if(i>0){if(game.GridsModel.getIns().hasEnoughItems(this.dataSource.param2,false,true)){app.ProtocolRequest.JoinBossReq(this.dataSource.id)}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("次数不足"))}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.centerLayout.array=game.ItemUtil.parserList(t.dropshow);this.jipingLayout.array=game.ItemUtil.parserList(t.propdropshow);if(game.Context.isRoleReach(false,parseInt(t.role),parseInt(t.lv))){var e=vipcode.VipModel.getIns().vipLvl;var i=o.BossStatic.BOSS_VIP_MATCH[t.type];if(e>=i){var n=this._model.getDailyTime(this.dataSource.type);var r=n.fnum+n.gnum;if(r<=0){this.anniubox.visible=false;this.jinrubtn.visible=true;this.jinrubtn.disabled=true;this.jinrubtn.label=app.getLang("次数用尽")}else{if(t.param2==""){this.anniubox.visible=false;this.jinrubtn.visible=true;this.jinrubtn.disabled=false;if(this._model.checkIfEntered(parseInt(t.id))){this.jinrubtn.label=app.getLang("继续挑战")}else{this.jinrubtn.label=app.getLang("免费挑战")}}else{this.anniubox.visible=true;this.jinrubtn.visible=false;if(this._model.checkIfEntered(parseInt(t.id))){this.btnanniu.label=app.getLang("继续挑战")}else{this.btnanniu.label=app.getLang("VIP{0}可进",i)}this.huobi.parserIcon(t.param2,this.labelshuzi)}}}else{this.jinrubtn.visible=true;this.anniubox.visible=false;this.jinrubtn.disabled=true;this.jinrubtn.label=app.getLang("VIP{0}可进",i)}}else{this.jinrubtn.visible=true;this.anniubox.visible=false;this.jinrubtn.disabled=true;this.jinrubtn.label=app.getLang("挑战")}};e.SINGLE_KEY="boss.BossSubVipTypeItem";return e}(ui.bosszong.bossvipitem2UI);o.BossSubVipTypeItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=grids.GridView.CommonItemRender;this.xiacengbtn.clickHandler=new Laya.Handler(this,this.onFlyBagItem);this.centerLayout=new game.CenterLayoutMediator(this.gezilist,this,98,20)};e.prototype.onFlyBagItem=function(){this.close()};e.prototype.onDisplay=function(){guide.GuideModel.getIns().boOpen=false;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){guide.GuideModel.getIns().boOpen=true};e.prototype.refreshAll=function(){this.saodangcishu.text=app.getLang("shandong_tips7",this.dataSource[1]);var t=this.dataSource[2];if(this.dataSource[3]==csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE){t=this.sortArr(t)}if(t.length>4){this.gezilist.x=110;this.gezilist.width=500;this.gezilist.array=t}else{this.centerLayout.array=t}if(this.dataSource[3]==csv.DailyTimeProxy.ENUM_TYPE.BOSS_CAVE){var e=csv.BossProxy.getIns().getCaveBossCfg(this.dataSource[0]);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.tiaozhanlab.text=app.getLang("shandong_tips6")+csv.MonsterProxy.getMonsterLvName(n)}else if(this.dataSource[3]==csv.DailyTimeProxy.ENUM_TYPE.MOUNTAIN){this.tiaozhanlab.text=app.getLang("mountain_tips1",this.dataSource[0])}else if(this.dataSource[3]==csv.DailyTimeProxy.ENUM_TYPE.SSSL){this.tiaozhanlab.text=app.getLang("mountain_tips1",this.dataSource[0])}else if(this.dataSource[3]==csv.DailyTimeProxy.ENUM_TYPE.BOSS_MONSTERBOOK){var e=csv.MonsterBookProxy.getIns().getCfg(this.dataSource[0]);var r=csv.GuajiProxy.getIns().getCfgGuanqia(e.condition);var o=csv.GuajiProxy.getIns().getPart(r.id);var a="";if(csv.MonsterBookProxy.getIns().getChapter(e.chapterid)){a=app.getLang(csv.MonsterBookProxy.getIns().getChapter(e.chapterid).chaptername)}this.tiaozhanlab.text=app.getLang("xiangyaolu_desc03",a,r.chapter+"-"+o.index)}else if(this.dataSource[3]==csv.DailyTimeProxy.ENUM_TYPE.FUMO){this.tiaozhanlab.text=app.getLang("fumobaoku_tips1",this.dataSource[0])}};e.prototype.sortHadnler=function(t,e){var i=game.ItemUtil.createVO(t.itemID);var n=game.ItemUtil.createVO(e.itemID);if(i.getQuality()>n.getQuality()){return-1}else if(i.getQuality()<n.getQuality()){return 1}else{if(t.itemID<e.itemID){return-1}else if(t.itemID>e.itemID){return 1}return 0}};e.prototype.sortArr=function(t){return t.sort(this.sortHadnler)};e.SINGLE_KEY="boss.BossSweepView";return e}(ui.jiesuan.shandongtanbaosaodangjiesuanUI);t.BossSweepView=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(e){__extends(h,e);function h(){var t=e!==null&&e.apply(this,arguments)||this;t._state=0;return t}h.getIns=function(){return app.Singleton.getInstance(h)};h.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.setState,[0]);this.guwubtn.clickHandler=new Laya.Handler(this,this.setState,[1]);this.anniu.clickHandler=new Laya.Handler(this,this.setState,[1]);this.gouxuan.on(Laya.Event.CHANGE,this,this.onCheckboxChange)};h.prototype.onDisplay=function(){this.callLater(this.refreshAll)};h.prototype.onUnDisplay=function(){if(this.dataSource){if(this._state==1&&this.dataSource.CheckBoxHandler){this.dataSource.CheckBoxHandler.runWith(this.gouxuan.selected)}if(this._state==0&&this.dataSource.cancelHandler){this.dataSource.cancelHandler.run()}if(this._state==1&&this.dataSource.okHandler){this.dataSource.okHandler.run()}this.dataSource=null;this._state=0}};h.prototype.onCheckboxChange=function(){this.updateCostMoney()};h.prototype.refreshAll=function(){if(this.dataSource){this.gouxuan.selected=this.dataSource["checkBoxSelected"];if(this.dataSource&&this.dataSource["btn1Label"]){this.quxiaobtn.label=app.getLang(this.dataSource["btn1Label"])}else{this.quxiaobtn.label=app.getLang("button_name1")}if(this.dataSource&&this.dataSource["btn2Label"]){if(this.dataSource["costNum"]>0){this.anniubox.visible=true;this.guwubtn.visible=false}else{this.anniubox.visible=false;this.guwubtn.visible=true}this.guwubtn.label=this.anniu.label=app.getLang(this.dataSource["btn2Label"])}else{this.guwubtn.label=this.anniu.label=app.getLang("button_name2")}if(this.dataSource&&this.dataSource["msg1"]){this.wenben1.text=this.dataSource.msg1}if(this.dataSource&&this.dataSource["msg2"]){this.wenben2.text=this.dataSource.msg2}this.updateCostMoney()}};h.prototype.updateCostMoney=function(){var t=0;if(this.gouxuan.selected){t=this.dataSource["buyCountMoney"]+this.dataSource["buyItemMoney"]}else{t=this.dataSource["buyCountMoney"]}this.shuzhi.text=t+""};h.prototype.setState=function(t){this._state=t;this.close()};h.show=function(t,e,i,n,r,o,a,s,l,u,p){if(i===void 0){i=undefined}if(n===void 0){n=undefined}if(r===void 0){r=undefined}if(o===void 0){o=0}if(a===void 0){a=0}if(s===void 0){s=0}if(l===void 0){l=true}if(u===void 0){u=""}if(p===void 0){p=""}app.ViewManager.toggleDialog(h,1,0,{msg1:t,msg2:e,okHandler:i,cancelHandler:n,CheckBoxHandler:r,costNum:o,buyCountMoney:a,buyItemMoney:s,checkBoxSelected:l,btn1Label:u,btn2Label:p},null,null,true)};h.SINGLE_KEY="boss.BossTreasureAlert";return h}(ui.bosszong.shandongtanbaotipUI);t.BossTreasureAlert=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns()};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData)};e.prototype.refreshAll=function(){};e.prototype.refreshData=function(){this.setData(this.dataSource)};e.prototype.setData=function(t){var e=csv.BossProxy.getIns().getCfg(t);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.imgbossmingzi.skin="res/static/bosszong/"+e.bossname+".png";this.touxingimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.nianfen.text=n.monlevel+app.getLang("级");if(game.Context.isTeamLvReach(e.teamlv,false)){this.tiaojian.text="";this.imgbossmingzi.gray=this.touxingimg.gray=false}else{this.tiaojian.text=game.Context.getTeamLvLimitDes(e.teamlv);this.imgbossmingzi.gray=this.touxingimg.gray=true}};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.boxxuanzhong.visible=true;this.boxzhengchang.visible=false}else{this.boxxuanzhong.visible=false;this.boxzhengchang.visible=true}};e.SINGLE_KEY="boss.BossVipTypeItem";return e}(ui.bosszong.bossvipitem1UI);i.BossVipTypeItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(f){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.tabTypArr=[csv.BossProxy.ENUM.BOSS_VIP_4,csv.BossProxy.ENUM.BOSS_VIP_6,csv.BossProxy.ENUM.BOSS_VIP_8];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=f.BossModel.getIns();this.list=new component.SimpleGroupList;this.list.startY=4;this.list.groupRender=f.BossVipTypeItem;this.list.itemRender=f.BossSubVipTypeItem;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.addChild(this.list);this.list.width=this.xiala.width;this.list.height=this.xiala.height;this.list.x=this.xiala.x;this.list.y=this.xiala.y;this.list.groupGap=4;this.viptab.selectedIndex=0;this.viptab.selectHandler=new Laya.Handler(this,this.onTabHandler);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.BOSS_VIP,[this.btnwenhao,this.shuoming])};t.prototype.onTabHandler=function(){this.refreshAll()};t.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){var t=this.tabTypArr[this.viptab.selectedIndex];var e=csv.BossProxy.getIns().getBossArrByType(t);var i=[];var n=2;var r=0;for(var o=0,a=e.length;o<a;o++){var s=e[o];if(game.Context.isTeamLvReach(s.teamlv,false)){i.push(s);r=o}else{if(n>0){i.push(s)}else{break}n--}}this.list.dataSource=i;if(this.dataSource.length>0){var l=this.dataSource[0];for(var o=0,a=i.length;o<a;o++){if(l==parseInt(i[o].id)){r=o;break}}}this.list.selectedIndex=r;this.list.scrollToIndex(r);this.setVip();var u=vipcode.VipModel.getIns().vipLvl;for(var o=0,a=this.tabTypArr.length;o<a;o++){var p=this.tabTypArr[o];var h=f.BossStatic.BOSS_VIP_MATCH[p];var c=this._model.getDailyTime(p);if(u>=h&&c.fnum+c.gnum>0){game.RedDotView.addTo(this.viptab.getChildAt(o))}else{game.RedDotView.removeFrom(this.viptab.getChildAt(o))}}};t.prototype.setVip=function(){var t=this.tabTypArr[this.viptab.selectedIndex];var e=f.BossStatic.BOSS_VIP_MATCH[t];var i=this._model.getDailyTime(t);var n=csv.DailyTimeProxy.getIns().getCfg(t);var r=parseInt(n.time);var o=i.fnum+i.gnum;this.cishu.text=o+"/"+r;this.cishulab.text=app.getLang("VIP{0}次数：",e)};t.SINGLE_KEY="boss.BossVipView";return t}(ui.bosszong.bossvipviewUI);f.BossVipView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.shuxing.text=app.getLang(t.name)};e.SINGLE_KEY="boss.VipInspireTypeItem";return e}(ui.bosszong.vipgongnengxuanzexialaUI);t.VipInspireTypeItem=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(y){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.shuominglab1.text=app.getLang("vip_auto_tips1");this.shuominglab2.text=app.getLang("vip_auto_tips2");this.lblguwucost.text=app.getLang("vip_auto_tips3");this.listMediator=new common.ListSelectMediator(this.guwulist,this.btnxia,this.lblguwutime,y.VipInspireTypeItem,new Laya.Handler(this,this.onListSelectHandler),24,150);this._model=vipcode.VipModel.getIns();this.kaiguan1.offAll();this.kaiguan2.offAll();this.kaiguan3.offAll();this.guwuybkaiguan.on(Laya.Event.CHANGE,this,this.onInpirseYbChange);this.fenList=[]};e.prototype.checkVip=function(){var t=vipcode.VipModel.getIns().vipLvl};e.prototype.onMsg=function(){manager.FlowManager.instance.flowByStyle1(app.getLang("vip_limit"))};e.prototype.onInpirseYbChange=function(){var t=csv.InspireProxy.getIns().getTypeByActivityType(this.dataSource);this._model.setAutoInspireYb(t,this.guwuybkaiguan.selected);this.setInspireCost()};e.prototype.onSwitchInspireBattle=function(){this.kaiguan3.selected=!this.kaiguan3.selected;var t=csv.InspireProxy.getIns().getTypeByActivityType(this.dataSource);this._model.setAutoInspire(t,this.kaiguan3.selected);this.setInspireCost()};e.prototype.onListSelectHandler=function(t){var e=csv.InspireProxy.getIns().getTypeByActivityType(this.dataSource);this._model.setAutoInspireTime(e,t);this.setInspireCost()};e.prototype.onSwitchAutoBattle=function(){this.kaiguan1.selected=!this.kaiguan1.selected;y.BossModel.getIns().autoBattle=this.kaiguan1.selected};e.prototype.onSwitchDoubleBattle=function(){this.kaiguan2.selected=!this.kaiguan2.selected;var t=this.kaiguan2.selected?1:0;var e=y.BossStatic.getDoubleTypeByActivityType(this.dataSource);if(e&&e>0){app.ProtocolRequest.DailyTimeSetReq(e,t)}};e.prototype.onDisplay=function(){this.checkVip();y.BossModel.getIns().on(y.BossEvent.DOUBLE_SELECT_CHANGE,this,this.setInspireCost);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){y.BossModel.getIns().off(y.BossEvent.DOUBLE_SELECT_CHANGE,this,this.setInspireCost);for(var t=0,e=this.fenList.length;t<e;t++){this.fenList[t].removeSelf();Laya.Pool.recover("vip_switch_fen",this.fenList[t])}this.fenList=[]};e.prototype.refreshAll=function(){var t=this.dataSource;this.boxAuto.removeSelf();this.boxDouble.removeSelf();this.boxGuwu.removeSelf();var e=0;if(csv.DailyTimeProxy.ENUM_TYPE.BOSS_YEWAI==t){this.vbox.addChild(this.boxAuto);e++;this.kaiguan1.selected=y.BossModel.getIns().autoBattle}var i=y.BossStatic.getDoubleTypeByActivityType(t);if(i){if(e){var n=Laya.Pool.getItemByClass("vip_switch_fen",ui.bosszong.vipgongnengfenUI);this.vbox.addChild(n);this.fenList.push(n)}this.vbox.addChild(this.boxDouble);e++;this.kaiguan2.selected=y.BossModel.getIns().getBoDouble(i)}if(csv.DailyTimeProxy.ENUM_TYPE.MJG==t||csv.DailyTimeProxy.ENUM_TYPE.SSSL==t){if(e){var n=Laya.Pool.getItemByClass("vip_switch_fen",ui.bosszong.vipgongnengfenUI);this.vbox.addChild(n);this.fenList.push(n)}this.vbox.addChild(this.boxGuwu);this.initInspire()}if(csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD_ICE==t){this.shuominglab2.text=app.getLang("iceworldvip_tips1")}else if(csv.DailyTimeProxy.ENUM_TYPE.JING_JI==t){this.shuominglab2.text=app.getLang("vip_auto_tips7")}else{this.shuominglab2.text=app.getLang("vip_auto_tips2")}this.callLater(this.onResize)};e.prototype.onResize=function(){var t=this.vbox.height-147;this.neibudibanimg01.height=210+t;this.bg01.height=297+t;this.bg02.height=260+t;this.bg04.y=320+t;this.height=332+t};e.prototype.initInspire=function(){var t=csv.InspireProxy.getIns().getTypeByActivityType(this.dataSource);var e=csv.InspireProxy.getIns().getTypeArr(t);var i=e[0].attrshow/100;var n=this._model.getAutoInspireTime(t);this.lblguwutime.text=n*i+"%";var r=[];for(var o=1;o<=e[0].typemax;o++){r.push({id:o,name:o*i+"%"})}this.listMediator.array=r;this.listMediator.init();this.listMediator.setSelectId(n);this.setInspireCost();this.kaiguan3.selected=this._model.getAutoInspire(t);this.guwuybkaiguan.selected=this._model.getAutoInspireYb(t)};e.prototype.setInspireCost=function(){if(!this.boxGuwu.parent){return}var t=csv.InspireProxy.getIns().getTypeByActivityType(this.dataSource);var e=csv.InspireProxy.getIns().getTypeArr(t);var i=0;var n=0;var r;var o=0;var a;for(var s=0,l=e.length;s<l;s++){var u=e[s];var p=game.ItemUtil.parserList(u.cost)[0];if(p.getItemId()==8002){o=u.overlaymax;a=p}else{r=p;n=u.overlaymax}}var h=y.BossStatic.getDoubleTypeByActivityType(this.dataSource);var c=false;if(h){c=y.BossModel.getIns().getBoDouble(h)}var f=c?r.count*2:r.count;var g=Math.floor(game.GridsModel.getIns().getItemCount(r.getItemId())/f);if(a){var d=this._model.getAutoInspireTime(t)-Math.min(g,n);if(d>0){i=a.count*d;if(c){i*=2}}if(game.GridsModel.getIns().getItemCount(a.getItemId())>=i){this.lblguwucost.text=app.getLang("vip_auto_tips4",'<span color="'+game.STYLES.GREEN_COLOR_S+'">'+i+"</span>")}else{this.lblguwucost.text=app.getLang("vip_auto_tips4",'<span color="'+game.STYLES.RED_COLOR_S+'">'+i+"</span>")}}else{this.lblguwucost.text=app.getLang("vip_auto_tips4",i)}};e.SINGLE_KEY="boss.VipSwitchView";return e}(ui.bosszong.vipgongnengtipUI);y.VipSwitchView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.ditu.on(Laya.Event.CLICK,this,this.onClick);this.jieshu.mouseEnabled=this.baoxiangname.mouseEnabled=this.gouxuan.mouseEnabled=false};e.prototype.onClick=function(){if(this.gouxuan.selected){this.gouxuan.selected=false;i.BossKuafuAwardView.getIns().removeSelectVo1(this.dataSource)}else{if(i.BossKuafuAwardView.getIns().pushSelectVo1(this.dataSource)){this.gouxuan.selected=true}else{this.gouxuan.selected=false}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.daoju.setData(t.vo);this.jieshu.skin="bosszong/bg_jiaobiao_"+t.vo.itemCfg.p2+".png";this.baoxiangname.text=t.vo.getName();this.gouxuan.selected=i.BossKuafuAwardView.getIns().selects1.indexOf(t)!=-1;if(this._model.getBossNewDex(i.BossModel.AWARD_TYPE.KUAFU).indexOf(t.index)!=-1){game.RedDotView.addTo(this,160,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="boss.BossKuafuAwardItem";return e}(ui.bosszong.shouyibaokuitemUI);i.BossKuafuAwardItem=n;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(n)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.ditu.on(Laya.Event.CLICK,this,this.onClick);this.jieshu.mouseEnabled=this.baoxiangname.mouseEnabled=this.gouxuan.mouseEnabled=false};e.prototype.onClick=function(){if(this.gouxuan.selected){this.gouxuan.selected=false;i.BossKuafuAwardView.getIns().removeSelectVo2(this.dataSource)}else{if(i.BossKuafuAwardView.getIns().pushSelectVo2(this.dataSource)){this.gouxuan.selected=true}else{this.gouxuan.selected=false}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.daoju.setData(t.vo);this.jieshu.skin="bosszong/bg_jiaobiao_"+t.vo.itemCfg.p2+".png";this.baoxiangname.text=t.vo.getName();this.gouxuan.selected=i.BossKuafuAwardView.getIns().selects2.indexOf(t)!=-1;if(this._model.getBossNewDex(i.BossModel.AWARD_TYPE.KUAFU_KILL).indexOf(t.index)!=-1){game.RedDotView.addTo(this,160,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="boss.BossKuafuAwardItem";return e}(ui.bosszong.shouyibaokuitemUI);i.BossKuafuAwardItem2=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=s.BossModel.getIns();this.listgezi1.itemRender=s.BossKuafuAwardItem;this.listgezi1.renderHandler=new Laya.Handler(this,this.onRender);this.listgezi2.itemRender=s.BossKuafuAwardItem2;this.listgezi2.renderHandler=new Laya.Handler(this,this.onRender2);this.queding.on(Laya.Event.CLICK,this,this.onGet);this.okHandler=new Laya.Handler(this,this.sendGet);this.cancleHandler=new Laya.Handler};e.prototype.onGet=function(){if(this.selects1.length||this.selects2.length){var t=[];for(var e=0;e<this.selects1.length;e++){t.push(this.selects1[e].vo)}for(var e=0;e<this.selects2.length;e++){t.push(this.selects2[e].vo)}game.ItemAlert.show(app.getLang("kuafu_boss14"),t,this.okHandler,this.cancleHandler)}};e.prototype.sendGet=function(){var t=[];for(var e=0;e<this.selects1.length;e++){t.push(this.selects1[e].index)}if(t.length){app.ProtocolRequest.WorldBossBagAwardReq(s.BossModel.AWARD_TYPE.KUAFU,t)}t=[];for(var e=0;e<this.selects2.length;e++){t.push(this.selects2[e].index)}if(t.length){app.ProtocolRequest.WorldBossBagAwardReq(s.BossModel.AWARD_TYPE.KUAFU_KILL,t)}};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onRender2=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(s.BossEvent.BOSS_AWARD_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(s.BossEvent.BOSS_AWARD_CHANGE,this,this.refreshAll);this._model.setBossNewDex(s.BossModel.AWARD_TYPE.KUAFU,[]);this._model.setBossNewDex(s.BossModel.AWARD_TYPE.KUAFU_KILL,[])};e.prototype.refreshAll=function(){this.selects1=[];this.setDailyTime1();var t=this._model.getBossAwards(s.BossModel.AWARD_TYPE.KUAFU);if(this._leastTime1){this.tishi1.visible=true;this.tishi2.visible=false;this.queding.disabled=true;var e=t.length;if(e){var i=[];for(var n=0;n<e;n++){var r=t[n];var o=game.ItemUtil.createVO(r.itemID);o.setCount(r.value);var a={index:n,vo:o};i.push(a)}i.sort(this.sortAward);this.listgezi1.array=i;this.tishi1.visible=this.tishi2.visible=false}else{this.listgezi1.array=[];this.tishi1.visible=true;this.tishi2.visible=false}}else{this.listgezi1.array=[];this.tishi1.visible=false;this.tishi2.visible=true}this.selects2=[];this.setDailyTime2();t=this._model.getBossAwards(s.BossModel.AWARD_TYPE.KUAFU_KILL);if(this._leastTime2){this.tishi3.visible=true;this.tishi4.visible=false;this.queding.disabled=true;var e=t.length;if(e){var i=[];for(var n=0;n<e;n++){var r=t[n];var o=game.ItemUtil.createVO(r.itemID);o.setCount(r.value);var a={index:n,vo:o};i.push(a)}i.sort(this.sortAward);this.listgezi2.array=i;this.tishi3.visible=this.tishi4.visible=false}else{this.listgezi2.array=[];this.tishi3.visible=true;this.tishi4.visible=false}}else{this.listgezi2.array=[];this.tishi3.visible=false;this.tishi4.visible=true}this.queding.disabled=true};e.prototype.setDailyTime1=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.KUA_FU;var e=csv.DailyTimeProxy.getIns().getCfg(t);var i=this._model.getDailyTime(t);var n=0;var r=parseInt(e.time)+n;this._leastTime1=i.fnum+i.gnum+n;this.lingqulab.text=app.getLang("shanhai_tips13",this._leastTime1,r)};e.prototype.pushSelectVo1=function(t){if(this.selects1.length>=this._leastTime1){manager.FlowManager.instance.flowByStyle1(app.getLang("shanhai_error1"));return false}this.selects1.push(t);this.setQueding();return true};e.prototype.removeSelectVo1=function(t){var e=this.selects1.indexOf(t);this.selects1.splice(e,1);this.setQueding()};e.prototype.setDailyTime2=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.KUA_FU_KILL;var e=csv.DailyTimeProxy.getIns().getCfg(t);var i=this._model.getDailyTime(t);var n=0;var r=parseInt(e.time)+n;this._leastTime2=i.fnum+i.gnum+n;this.lingqulab2.text=app.getLang("shanhai_tips13",this._leastTime2,r)};e.prototype.pushSelectVo2=function(t){if(this.selects2.length>=this._leastTime2){manager.FlowManager.instance.flowByStyle1(app.getLang("shanhai_error1"));return false}this.selects2.push(t);this.setQueding();return true};e.prototype.removeSelectVo2=function(t){var e=this.selects2.indexOf(t);this.selects2.splice(e,1);this.setQueding()};e.prototype.setQueding=function(){this.queding.disabled=Boolean(this.selects1.length==0)&&Boolean(this.selects2.length==0)};e.prototype.sortAward=function(t,e){if(t.vo.itemCfg.p2!==e.vo.itemCfg.p2){return e.vo.itemCfg.p2-t.vo.itemCfg.p2}if(t.vo.itemCfg.p3!==e.vo.itemCfg.p3){return e.vo.itemCfg.p3-t.vo.itemCfg.p3}return 0};e.SINGLE_KEY="boss.BossKuafuAwardView";return e}(ui.bosszong.tiangongbaokuUI);s.BossKuafuAwardView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.diduilist.itemRender=i.BattleEnemyItem;this.diduilist.renderHandler=new Laya.Handler(this,this.onRender);this._model=boss.BossModel.getIns();this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM-i.MapLimitTimeView.H2;this.diduirenshu.width=56;this.diduirenshu.align="center";this.imggongji.skin="bosszhandou/bg_anquanzhuangtai.png"};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_ENEMY_CHANGE,this,this.refreshAll);this._model.on(boss.BossEvent.BOSS_BATTLE_CHANGE,this,this.updateMyState);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_ENEMY_CHANGE,this,this.refreshAll);this._model.off(boss.BossEvent.BOSS_BATTLE_CHANGE,this,this.updateMyState)};e.prototype.refreshAll=function(){this.diduilist.array=this._model.getEnemys();this.diduirenshu.text="("+this._model.getEnemys().length+")"};e.prototype.updateMyState=function(){if(this._model.battleState.fnum>0){this.imggongji.skin="bosszhandou/bg_shoushangzhuangtai.png"}else{this.imggongji.skin="bosszhandou/bg_anquanzhuangtai.png"}};e.SINGLE_KEY="battle.BossKuaFuBattleEnemyView";return e}(ui.bosszhandou.danaotiangogbossdiduiliebiaoUI);i.BossKuaFuBattleEnemyView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.curTime=0;t.itemids=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};Object.defineProperty(t.prototype,"data",{get:function(){return this.dataSource[0]},enumerable:true,configurable:true});t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listgezi.itemRender=grids.GridView;this.listgezi.renderHandler=grids.GridView.CommonItemRender;this.quedingbtn.clickHandler=new Laya.Handler(this,this.onOkHandler)};t.prototype.onOkHandler=function(){this.close()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.curTime=0};t.prototype.refreshAll=function(){this.itemids=[];var t=this.data.award;var e="";for(var i=0;i<t.length;i++){var n=t[i];e+=n.itemID+"-"+n.value+";";this.itemids.push(n.itemID)}this.listgezi.array=game.ItemUtil.parserList(e);this.curTime=guardisland.GuardIslandsModel.getIns().fightQuitTime;this.showLabel();Laya.timer.once(1e3,this,this.updateTime)};t.prototype.showLabel=function(){this.quedingbtn.label=app.getLang("shoufuisland_txt_16",this.curTime)};t.prototype.updateTime=function(){this.curTime--;if(this.curTime<=0){this.close();return}this.showLabel();Laya.timer.once(1e3,this,this.updateTime)};t.SINGLE_KEY="boss.BossKuaFuCaijiChenggongView";return t}(ui.bosszhandou.danaotiangongcaijichenggongUI);t.BossKuaFuCaijiChenggongView=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.labelxiangxi.on(Laya.Event.LINK,this,this.onHandler)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t);chat.ChatModel.getIns().boOpenTip=true};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){if(t.showtopping==0){this.imgzhiding.visible=false}else{this.imgzhiding.visible=true}this._index=e;var i=[];this.labeltime01.text=util.TimeUtil.formatDate(t.ftime,true,true,true,true,"-");var n=csv.BossProxy.getIns().getCfg(t.bossid);var r=csv.BossProxy.getIns().getMonsterId(n.bosssetbase);var o=csv.MonsterProxy.getIns().getCfg(r);var a=t.awarditem;var s=app.getLang(game.Context.getSerName(t.cursvrid)+t.uname+"击杀了"+app.getLang(o.monname)+", ");for(var l=0;l<a.length;l++){var u=a[l];if(u.type==chat.ChatModel.SYS_MSG_TYPE.ITEM_LINK){var p=u.params[0].detal;var h=game.ItemUtil.createVO(parseInt(p));var c=game.STYLES.ITEM_QUALITY[h.getQuality()];var f=h.getName();var g=chat.ChatStatic.ENUM_HREF.ITEM+"-"+p;var d="<span color='"+c+"' href='"+g+"'>"+f+"</span>";var y=h.itemCfg.reqLevel+"";i.push(d);if(Number(y)>0){i.push(y)}}else if(u.type==chat.ChatModel.SYS_MSG_TYPE.ITEM_LINK_SERVER){var p=u.params[1].detal;var h=game.ItemUtil.createVO(parseInt(p));var c=game.STYLES.ITEM_QUALITY[u.params[2].detal];var f=h.getName();var g=chat.ChatStatic.ENUM_HREF.ITEM_SHOW+"-"+u.params[0].detal;var d="<span color='"+c+"' href='"+g+"'>"+f+"</span>";var y=h.itemCfg.reqLevel+"";i.push(d);if(Number(y)>0){i.push(y)}}}var m="";for(var l=0;l<i.length;l++){m+=i[0]}this.labelxiangxi.text=s+app.getLang("获得了 ")+m};e.SINGLE_KEY="boss.BossKuaFuDropOutItem";return e}(ui.bosszhandou.danaotiangongdiaoluojiluitemUI);t.BossKuaFuDropOutItem=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.listjuanxianjilu.itemRender=i.BossKuaFuDropOutItem;this.listjuanxianjilu.renderHandler=new Laya.Handler(this,this.onTypeRenderHandler)};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DROP_OUT,this,this.updateDropArrData);app.ProtocolRequest.CrossBossAwardReq();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DROP_OUT,this,this.updateDropArrData)};e.prototype.refreshAll=function(){this.updateDropArrData()};e.prototype.updateDropArrData=function(){this._model.dropArray.sort(function(t,e){return-(t.showtopping-e.showtopping)});this.updateDropArrDataTopSort();this.listjuanxianjilu.array=this._model.dropArray;if(this._model.dropArray.length==0){this.imgtishi.visible=true}else{this.imgtishi.visible=false}};e.prototype.updateDropArrDataTopSort=function(){this._model.dropArray.sort(function(t,e){if(t.showtopping==1||e.showtopping==0){return-1}if(t.showtopping==0||e.showtopping==1){return 1}})};e.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource,e)};e.SINGLE_KEY="boss.BossKuaFuDropOutView";return e}(ui.bosszhandou.danaotiangongdiaoluojilunewUI);i.BossKuaFuDropOutView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.titlename.visible=false;this.x=Laya.stage.width-this.width;this.y=1063-(this.dibg.height+this.titlebg.height)+5};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this._model.on(i.BossEvent.BOSS_UPDATE_COLLECT_NUM,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this._model.on(i.BossEvent.BOSS_UPDATE_COLLECT_NUM,this,this.refreshAll)};e.prototype.refreshAll=function(){this.setMapChallangeNum();this.setCollectNum()};e.prototype.setMapChallangeNum=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.KUA_FU;var e=this._model.getDailyTime(t);var i=csv.DailyTimeProxy.getIns().getCfg(t);var n=parseInt(i.time);var r=e.fnum+e.gnum;this.text2.text=r+"/"+n};e.prototype.setCollectNum=function(){this.text5.text=i.BossModel.getIns().collectsNum+""};e.SINGLE_KEY="battle.BossKuaFuOutNumView";return e}(ui.bosszhandou.fubenjieshaoitemUI);i.BossKuaFuOutNumView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihanglist.itemRender=i.BossHurtRankItem;this.paihanglist.renderHandler=new Laya.Handler(this,this.onRender);this.x=Laya.stage.width-this.width;this.y=main.MoneyView.getIns().height+5+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns()};e.prototype.onRender=function(t,e){t.setData(t.dataSource,e+1)};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);boss.BossModel.getIns().clearHurtInfo()};e.prototype.refreshAll=function(){var t=boss.BossModel.getIns().getHurtInfo();var e=[];var i=0;var n=0;if(t){i=t.selfhurt.toNumber();n=t.playerhurt.toNumber();for(var r=0,o=t.rankinf.length;r<o;r++){var a=t.rankinf[r];e.push(a)}}this.paihanglist.array=e;if(n){this.self.namelab.text=n+" "+game.Context.mainRole.playername}else{this.self.namelab.text=app.getLang("无")+" "+game.Context.mainRole.playername}this.self.shuzhilab.text=game.MoneyModel.format(i)};e.SINGLE_KEY="battle.BossKuafuRankView";return e}(ui.bosszhandou.shanhaiyishoupaihangbangUI);i.BossKuafuRankView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.listboss.visible=false;this.list=new component.SimpleGroupList;this.list.startY=4;this.list.groupRender=i.BossKuaFuTypeItem;this.list.itemRender=i.BossKuaFuTypeSubItem;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.addChild(this.list);this.list.width=this.weizhi.width;this.list.height=this.weizhi.height;this.list.x=this.weizhi.x;this.list.y=this.weizhi.y;this.list.groupGap=4;this.bossList=csv.BossProxy.getIns().getBossArrByType(csv.BossProxy.ENUM.BOSS_KUAFU)};e.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.startUpdateBossInfo(this.bossList,1);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.list.dataSource=this.bossList;var t=0;if(this.dataSource.length>0){var e=this.dataSource[0];for(var i=0,n=this.bossList.length;i<n;i++){if(e==this.bossList[i].id){t=i;break}}}else{for(var i=0,n=this.bossList.length;i<n;i++){var r=this.bossList[i];if(game.Context.isTeamLvReach(r.teamlv)){t=i}else{break}}}this.list.selectedIndex=t;this.list.upSpace=1;this.list.scrollToIndex(t)};e.SINGLE_KEY="boss.BossKuaFuSmallView";return e}(ui.bosszong.danaotiangongbossliebiaotipUI);i.BossKuaFuSmallView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.shuxinglist.itemRender=ui.bosszong.bosswuxingshuxingUI;this.shuxinglist.renderHandler=new Laya.Handler(this,this.shuxingRender)};e.prototype.shuxingRender=function(t){var e=t.dataSource;var i=Attributes.getWuxingEnumType(parseInt(e[0]));t.wuxingimg.skin="public/bg_wuxing_"+i+".png";t.shuzhi.text=e[e.length-1]};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this._model.on(i.BossEvent.BOSS_KUAFU_OPEN_STATE,this,this.refreshData);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this._model.off(i.BossEvent.BOSS_KUAFU_OPEN_STATE,this,this.refreshData)};e.prototype.refreshAll=function(){};e.prototype.refreshData=function(){this.setData(this.dataSource)};e.prototype.setData=function(t){var e=csv.BossProxy.getIns().getCfg(t);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.imgshuangbeidiaoluo.skin="bosszong/bg_jiaobiao_"+e.class+".png";this.imgbossmingzi.skin="res/static/bosszong/"+e.bossname+".png";this.touxingimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);var r=csv.MonsterProxy.getIns().getMonsterBase(e.bosssetbase).element;if(r&&r.length>0){var o=app.str2Array(r,";","-");this.shuxinglist.array=o}else{this.shuxinglist.array=[]}this.nianfen.text=n.monlevel+app.getLang("级");if(game.Context.isTeamLvReach(e.teamlv,false)){this.dadao.text="";if(this._model.boKuafuBoss){var a=this._model.getBossDetail(e.id);if(a){if(!a.deadtime){this.yijishaimg.visible=false;this.xuetiaobar.visible=true;this.xuetiaobar.value=a.hp.toNumber()/a.maxhp.toNumber()}else{this.yijishaimg.visible=true;this.xuetiaobar.visible=false}this.zhenduolab.visible=true;this.renshu.text=app.getLang("{0}人",a.fightnum)}this.imgbossmingzi.gray=this.touxingimg.gray=false}else{this.yijishaimg.visible=false;this.xuetiaobar.visible=false;this.zhenduolab.visible=false;this.renshu.text="";this.imgbossmingzi.gray=this.touxingimg.gray=false}}else{this.yijishaimg.visible=false;this.xuetiaobar.visible=false;this.zhenduolab.visible=false;this.renshu.text="";this.dadao.text=game.Context.getTeamLvLimitDes(e.teamlv);this.imgbossmingzi.gray=this.touxingimg.gray=true}};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.boxxuanzhong.visible=true;this.boxzhengchang.visible=false}else{this.boxxuanzhong.visible=false;this.boxzhengchang.visible=true}};e.SINGLE_KEY="boss.BossKuaFuTypeItem";return e}(ui.bosszong.danaotiangongbossliebiaoitem1UI);i.BossKuaFuTypeItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jinrubtn.on(Laya.Event.CLICK,this,this.onFight);this.gezilist2.itemRender=grids.GridView;this.gezilist2.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.gezilist2,this.box2,96,this.gezilist2.spaceX);this._model=i.BossModel.getIns();this.okHandler=new Laya.Handler(this,this.onEnter);this.cancleHandler=new Laya.Handler};e.prototype.onFight=function(t){t.stopPropagation();if(!battle.BattleModel.getIns().checkJumpState()){return}var e=this._model.getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.KUA_FU);var i=this._model.getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.KUA_FU_KILL);if(e.fnum+e.gnum>0||i.fnum+i.gnum>0){this._model.isNeedTip(this.dataSource.id,this.okHandler,this.cancleHandler)}else{game.Alert.show(app.getLang("shanhai_tips6"),this.okHandler,this.cancleHandler)}};e.prototype.onEnter=function(){role.LeadingRoleView.getIns().aiBossBattle(this.dataSource.id);app.ViewManager.toggleDialog(i.BossKuaFuSmallView,-1,0)};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.setBtnState);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.setBtnState)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.centerLayout.array=game.ItemUtil.parserList(t.dropshow);this.setBtnState()};e.prototype.setBtnState=function(){if(this._model.boKuafuBoss&&game.Context.isTeamLvReach(this._data.teamlv)){var t=this._model.getBossDetail(this._data.id);if(t){if(!t.deadtime){this.jinrubtn.disabled=false;this.jinrubtn.label=app.getLang("进入")}else{this.jinrubtn.disabled=true}}else{this.jinrubtn.disabled=false}}else{this.jinrubtn.disabled=true}};e.SINGLE_KEY="boss.BossKuaFuTypeSubItem";return e}(ui.bosszong.danaotiangongbossvipitem2UI);i.BossKuaFuTypeSubItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=r.BossModel.getIns();this.list=new component.SimpleGroupList;this.list.startY=4;this.list.groupRender=r.BossKuaFuTypeItem;this.list.itemRender=r.BossKuaFuTypeSubItem;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.addChild(this.list);this.list.width=this.xiala.width;this.list.height=this.xiala.height;this.list.x=this.xiala.x;this.list.y=this.xiala.y;this.list.groupGap=4;game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.BOSS_KUAFU,[this.tishibtn,this.shuoming]);this.bossList=csv.BossProxy.getIns().getBossArrByType(csv.BossProxy.ENUM.BOSS_KUAFU);this.shuoming.text=app.getLang("kuafu_boss6");this.btndiaoluoxianshi.clickHandler=new Laya.Handler(this,this._openDropView)};e.onHelpFight=function(t){if(battle.BattleModel.getIns().checkBattleState(true,[csv.MapProxy.MAP_TYPE.KUAFU_BOSS_OUT])){return}role.LeadingRoleView.getIns().aiBossBattle(t)};e.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(r.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this._model.on(r.BossEvent.BOSS_AWARD_RED_CHANGE,this,this.setDailyTime);if(this._model.boKuafuBoss){this._model.startUpdateBossInfo(this.bossList,1)}this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(r.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this._model.off(r.BossEvent.BOSS_AWARD_RED_CHANGE,this,this.setDailyTime);this._model.stopUpdateBossInfo()};e.prototype.refreshAll=function(){this.list.dataSource=this.bossList;var t=0;if(this.dataSource.length>0){var e=this.dataSource[0];for(var i=0,n=this.bossList.length;i<n;i++){if(e==this.bossList[i].id){t=i;break}}}else{for(var i=0,n=this.bossList.length;i<n;i++){var r=this.bossList[i];if(game.Context.isTeamLvReach(r.teamlv)){t=i}else{break}}}this.list.selectedIndex=t;this.list.upSpace=1;this.list.scrollToIndex(t);this.setDailyTime()};e.prototype.setDailyTime=function(){var t=false;var e=this._model.getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.KUA_FU);var i=e.fnum+e.gnum;if(i&&this._model.getBossAwards(r.BossModel.AWARD_TYPE.KUAFU).length>0){t=true}if(!t){e=this._model.getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.KUA_FU_KILL);var n=e.fnum+e.gnum;if(n&&this._model.getBossAwards(r.BossModel.AWARD_TYPE.KUAFU_KILL).length>0){t=true}}if(t){game.RedDotView.addTo(this.btndiaoluoxianshi)}else{game.RedDotView.removeFrom(this.btndiaoluoxianshi)}};e.prototype._openDropView=function(){app.ViewManager.toggleDialog(r.BossKuafuAwardView,1,0)};e.SINGLE_KEY="boss.BossKuaFuView";return e}(ui.bosszong.danaotiangongviewUI);r.BossKuaFuView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.ditu.on(Laya.Event.CLICK,this,this.onClick);this.jieshu.mouseEnabled=this.baoxiangname.mouseEnabled=this.gouxuan.mouseEnabled=false};e.prototype.onClick=function(){if(this.gouxuan.selected){this.gouxuan.selected=false;i.BossWorldAwardView.getIns().removeSelectVo(this.dataSource)}else{if(i.BossWorldAwardView.getIns().pushSelectVo(this.dataSource)){this.gouxuan.selected=true}else{this.gouxuan.selected=false}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.daoju.setData(t.vo);this.jieshu.skin="bosszong/bg_jiaobiao_"+t.vo.itemCfg.p2+".png";this.baoxiangname.text=t.vo.getName();this.gouxuan.selected=i.BossWorldAwardView.getIns().selects.indexOf(t)!=-1;if(this._model.getBossNewDex(i.BossModel.AWARD_TYPE.WORLD).indexOf(t.index)!=-1){game.RedDotView.addTo(this,160,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="boss.BossWorldAwardItem";return e}(ui.bosszong.shouyibaokuitemUI);i.BossWorldAwardItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=s.BossModel.getIns();this.listgezi.itemRender=s.BossWorldAwardItem;this.listgezi.renderHandler=new Laya.Handler(this,this.onRender);this.queding.on(Laya.Event.CLICK,this,this.onGet);this.okHandler=new Laya.Handler(this,this.sendGet);this.cancleHandler=new Laya.Handler;game.HelperViewHandler.registerStr([this.wenhao],app.getLang("shanhai_rule2"),app.getLang("shanhai_rule1"))};e.prototype.onGet=function(){if(this.selects.length){var t=[];for(var e=0;e<this.selects.length;e++){t.push(this.selects[e].vo)}game.ItemAlert.show(app.getLang("shanhai_tips15"),t,this.okHandler,this.cancleHandler)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("shanhai_tips15"))}};e.prototype.sendGet=function(){var t=[];for(var e=0;e<this.selects.length;e++){t.push(this.selects[e].index)}app.ProtocolRequest.WorldBossBagAwardReq(0,t)};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(s.BossEvent.BOSS_AWARD_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(s.BossEvent.BOSS_AWARD_CHANGE,this,this.refreshAll);this._model.setBossNewDex(s.BossModel.AWARD_TYPE.WORLD,[])};e.prototype.refreshAll=function(){this.selects=[];this.setDailyTime();if(this._leastTime){var t=this._model.getBossAwards(s.BossModel.AWARD_TYPE.WORLD);this.tishi1.visible=true;this.tishi2.visible=false;this.queding.disabled=true;var e=t.length;if(e){var i=[];for(var n=0;n<e;n++){var r=t[n];var o=game.ItemUtil.createVO(r.itemID);o.setCount(r.value);var a={index:n,vo:o};i.push(a)}i.sort(this.sortAward);this.listgezi.array=i;this.tishi1.visible=this.tishi2.visible=false}else{this.listgezi.array=[];this.tishi1.visible=true;this.tishi2.visible=false}}else{this.listgezi.array=[];this.tishi1.visible=false;this.tishi2.visible=true}this.queding.disabled=true};e.prototype.setDailyTime=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD;var e=csv.DailyTimeProxy.getIns().getCfg(t);var i=this._model.getDailyTime(t);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BOSS_WOLRD);var r=parseInt(e.time)+n;n-=i.extnum;if(n<0){n=0}this._leastTime=i.fnum+i.gnum+n;this.lingqulab.text=app.getLang("shanhai_tips13",this._leastTime,r)};e.prototype.sortAward=function(t,e){if(t.vo.itemCfg.p2!==e.vo.itemCfg.p2){return e.vo.itemCfg.p2-t.vo.itemCfg.p2}if(t.vo.itemCfg.p3!==e.vo.itemCfg.p3){return e.vo.itemCfg.p3-t.vo.itemCfg.p3}return 0};e.prototype.pushSelectVo=function(t){if(this.selects.length>=this._leastTime){manager.FlowManager.instance.flowByStyle1(app.getLang("shanhai_error1"));return false}this.selects.push(t);this.queding.disabled=!Boolean(this.selects.length>0);return true};e.prototype.removeSelectVo=function(t){var e=this.selects.indexOf(t);this.selects.splice(e,1);this.queding.disabled=!Boolean(this.selects.length>0)};e.SINGLE_KEY="boss.BossWorldAwardView";return e}(ui.bosszong.shouyibaokuUI);s.BossWorldAwardView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemList.itemRender=grids.GridView;this.itemList.renderHandler=grids.GridView.CommonItemRender;this._model=i.BossModel.getIns();this.btnChallenge.on(Laya.Event.CLICK,this,this.onBattle);this.okHandler=new Laya.Handler(this,this.onOk);this.cancleHandler=new Laya.Handler;this.shuxinglist.itemRender=ui.bosszong.bosswuxingshuxingUI;this.shuxinglist.renderHandler=new Laya.Handler(this,this.shuxingRender)};e.prototype.shuxingRender=function(t){var e=t.dataSource;var i=Attributes.getWuxingEnumType(parseInt(e[0]));t.wuxingimg.skin="public/bg_wuxing_"+i+".png";t.shuzhi.text=e[e.length-1]};e.prototype.onBattle=function(){if(!battle.BattleModel.getIns().checkJumpState()){return}var t=this._model.getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD);var e=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BOSS_WOLRD)-t.extnum;if(e<0){e=0}if(t.fnum+t.gnum+e>0){this._model.isNeedTip(this.dataSource.id,this.okHandler,this.cancleHandler)}else{game.Alert.show(app.getLang("shanhai_tips6"),this.okHandler,this.cancleHandler)}};e.prototype.onOk=function(){app.ProtocolRequest.JoinBossReq(this.dataSource.id)};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_WORLD_CHANGE,this,this.setState);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_WORLD_CHANGE,this,this.setState);Laya.timer.clear(this,this.loopFreshTime)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=csv.BossProxy.getIns().getMonsterId(t.bosssetbase);var i=csv.MonsterProxy.getIns().getCfg(e);this.imgjiaobiao.skin="bosszong/bg_jiaobiao_"+t.class+".png";this.touxingimg.skin=csv.MonsterProxy.getMonsterHeadUrl(i);this.itemList.array=game.ItemUtil.parserList(t.dropshow);this.imgName.skin="res/static/bosszong/"+t.bossname+".png";this.dajishilab.text=i.monlevel;this.setState();var n=csv.MonsterProxy.getIns().getMonsterBase(t.bosssetbase).element;if(n&&n.length>0){var r=app.str2Array(n,";","-");this.shuxinglist.array=r}else{this.shuxinglist.array=[]}};e.prototype.setState=function(){if(!this.dataSource){return}var t=this._model.getWorldBossState(this.dataSource.id);var e=this.dataSource.teamlv-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossWorldNeedLevel);if(game.Context.isTeamLvReach(e,false)){if(t){this.txtTips.visible=true;this.touxingimg.gray=true;this.btnChallenge.visible=false;this.txtTips.text=app.getLang("shanhai_tips4",util.TimeUtil.formatTime(this._model.getNextWComingTime()));this.startLoop()}else{this.txtTips.visible=false;this.touxingimg.gray=false;this.btnChallenge.visible=true;Laya.timer.clear(this,this.loopFreshTime)}}else{this.txtTips.text=app.getLang("shandong_tips4",e);this.touxingimg.gray=true;this.txtTips.visible=true;this.btnChallenge.visible=false;Laya.timer.clear(this,this.loopFreshTime)}if(!t&&this._model.commingList.indexOf(this.dataSource.id)!=-1){game.RedDotView.addTo(this.imgjiaobiaoxin,22,10,1,1,game.RedDotView.ENUM_TYPE.QIN)}else if(dailytask.FubenModel.getIns().checkIfNewId(csv.FunctionsProxy.ENUMS.BOSS_WOLRD,this.dataSource.id)){game.RedDotView.addTo(this.imgjiaobiaoxin,22,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{game.RedDotView.removeFrom(this.imgjiaobiaoxin)}};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=this._model.getNextWComingTime();if(t>=0){this.txtTips.text=app.getLang("shanhai_tips4",util.TimeUtil.formatTime(t))}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="boss.BossWorldItem";return e}(ui.bosszong.bossshijieitemUI);i.BossWorldItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihanglist.itemRender=i.BossHurtRankItem;this.paihanglist.renderHandler=new Laya.Handler(this,this.onRender);this.x=Laya.stage.width-this.width;this.y=main.MoneyView.getIns().height+5+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns()};e.prototype.onRender=function(t,e){t.setData(t.dataSource,e+1)};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);boss.BossModel.getIns().clearHurtInfo()};e.prototype.refreshAll=function(){var t=boss.BossModel.getIns().getHurtInfo();var e=[];var i=0;var n=0;if(t){i=t.selfhurt.toNumber();for(var r=0,o=t.rankinf.length;r<o;r++){var a=t.rankinf[r];if(r<game.Config.getIntParams(1003)){e.push(a)}if(Uint64.equal(a.uid,game.Context.mainRoleId)){n=a.hrank}}}this.paihanglist.array=e;if(n){this.self.namelab.text=n+" "+game.Context.mainRole.playername}else{this.self.namelab.text=app.getLang("无")+" "+game.Context.mainRole.playername}this.self.shuzhilab.text=game.MoneyModel.format(i)};e.SINGLE_KEY="battle.BossWorldRankView";return e}(ui.bosszhandou.shanhaiyishoupaihangbangUI);i.BossWorldRankView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(a){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boGuide=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=a.BossModel.getIns();this.xiala.itemRender=a.BossWorldItem;this.xiala.renderHandler=new Laya.Handler(this,this.onRender);this.jiahaobtn.on(Laya.Event.CLICK,this,this.onAddTime);this.cangkubtn.on(Laya.Event.CLICK,this,this.onCangku);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.BOSS_WOLRD,[this.btnwenhao,this.shuoming]);this.huifulab.text=app.getLang("shanhai_tips2")};t.prototype.onRender=function(t,e){t.setData(t.dataSource)};t.prototype.onAddTime=function(){dailytask.DailyTimeUtil.buyTime(csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD)};t.prototype.onCangku=function(){app.ViewManager.toggleDialog(a.BossWorldAwardView,1,0)};t.prototype.onAwardChange=function(t){if(t==a.BossModel.AWARD_TYPE.WORLD){this.setDailyTime()}};t.prototype.onDisplay=function(){this._model.on(a.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this._model.on(a.BossEvent.BOSS_AWARD_RED_CHANGE,this,this.onAwardChange);this._model.on(a.BossEvent.BOSS_WORLD_COMMING_CHANGE,this,this.refreshCommingState);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.off(a.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this._model.off(a.BossEvent.BOSS_AWARD_RED_CHANGE,this,this.onAwardChange);this._model.off(a.BossEvent.BOSS_WORLD_COMMING_CHANGE,this,this.refreshCommingState);this.boGuide=false;dailytask.FubenModel.getIns().setBoNew(csv.FunctionsProxy.ENUMS.BOSS_WOLRD,false)};t.prototype.refreshAll=function(){if(this.boGuide){return}var t=0;var e=csv.BossProxy.getIns().getBossArrByType(csv.BossProxy.ENUM.BOSS_WORLD);var i=e.length;for(var n=0;n<i;n++){var r=e[n];var o=r.teamlv-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossWorldNeedLevel);if(game.Context.isTeamLvReach(o,false)){t=n}else{break}}var a=t-this._model.upCount;var s=t+1+this._model.downCount;a=a<0?0:a;s=s>i?i:s;this.bossList=[];for(var n=a;n<s;n++){this.bossList.push(e[n])}var l=0;if(this.dataSource.length>0){var u=this.dataSource[0];for(var n=0,p=this.bossList.length;n<p;n++){if(u==this.bossList[n].id){l=n;break}}}else{for(var n=0,h=this.bossList.length;n<h;n++){var r=this.bossList[n];var o=r.teamlv-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BossWorldNeedLevel);if(game.Context.isTeamLvReach(o,false)){l=n}else{break}}}this.xiala.array=this.bossList;this.xiala.selectedIndex=l;this.xiala.scrollTo(l);this.setDailyTime()};t.prototype.setDailyTime=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD;var e=csv.DailyTimeProxy.getIns().getCfg(t);var i=this._model.getDailyTime(t);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.BOSS_WOLRD);var r=parseInt(e.time)+n;n-=i.extnum;if(n<0){n=0}var o=i.fnum+i.gnum+n;this.cishu.text=o+"/"+r;if(csv.DailyTimeProxy.getIns().isCanBuy(t)){this.jiahaobtn.visible=true}else{this.jiahaobtn.visible=false}if(o&&this._model.getBossAwards(a.BossModel.AWARD_TYPE.WORLD).length>0){game.RedDotView.addTo(this.cangkubtn)}else{game.RedDotView.removeFrom(this.cangkubtn)}};t.prototype.refreshCommingState=function(){this.xiala.refresh()};t.SINGLE_KEY="boss.BossWorldView";return t}(ui.bosszong.bossshijieviewUI);a.BossWorldView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihanglist.itemRender=i.BossHurtRankItem;this.paihanglist.renderHandler=new Laya.Handler(this,this.onRender);this.x=Laya.stage.width-this.width;this.y=main.MoneyView.getIns().height+5+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns()};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=boss.BossModel.getIns().getHurtInfo();var e=[];var i=0;var n=0;if(t){i=t.selfhurt.toNumber();for(var r=0,o=t.rankinf.length;r<o;r++){var a=t.rankinf[r];if(r<game.Config.getIntParams(1172)){e.push(a)}if(Uint64.equal(a.uid,game.Context.mainRoleId)){n=a.hrank}}}this.paihanglist.array=e;if(n){this.self.namelab.text=n+" "+game.Context.mainRole.playername}else{this.self.namelab.text=app.getLang("无")+" "+game.Context.mainRole.playername}this.self.shuzhilab.text=game.MoneyModel.format(i)};e.prototype.onRender=function(t,e){t.setData(t.dataSource,e+1)};e.SINGLE_KEY="battle.GuildBossWorldRankView";return e}(ui.bosszhandou.shanhaiyishoupaihangbangUI);i.GuildBossWorldRankView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihanglist.itemRender=i.BossHurtRankItem;this.paihanglist.renderHandler=new Laya.Handler(this,this.onRender);this.x=Laya.stage.width-this.width;this.y=main.MoneyView.getIns().height+5+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns()};e.prototype.onRender=function(t,e){t.setData(t.dataSource,e+1)};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);boss.BossModel.getIns().clearHurtInfo()};e.prototype.refreshAll=function(){var t=boss.BossModel.getIns().getHurtInfo();var e=[];var i=0;var n=0;if(t){i=t.selfhurt.toNumber();for(var r=0,o=t.rankinf.length;r<o;r++){var a=t.rankinf[r];if(r<game.Config.getIntParams(1114)){e.push(a)}if(Uint64.equal(a.uid,game.Context.mainRoleId)){n=a.hrank}}}this.paihanglist.array=e;if(n){this.self.namelab.text=n+" "+game.Context.mainRole.playername}else{this.self.namelab.text=app.getLang("无")+" "+game.Context.mainRole.playername}this.self.shuzhilab.text=game.MoneyModel.format(i)};e.SINGLE_KEY="battle.YaowangRankView";return e}(ui.bosszhandou.shanhaiyishoupaihangbangUI);i.YaowangRankView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.quedingbtn.label=app.getLang("关闭");this.listdaoju.itemRender=grids.GridView;this.listdaoju.renderHandler=grids.GridView.CommonItemRender};e.prototype.onDisplay=function(){this.quedingbtn.on(Laya.Event.CLICK,this,this.closeView);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.quedingbtn.off(Laya.Event.CLICK,this,this.closeView)};e.prototype.refreshAll=function(){if(!this._model.getIceAwardArr()||this._model.getIceAwardArr().length==0){this.label01.visible=true;this.boxdaoju.visible=false;return}this.label01.visible=false;this.boxdaoju.visible=true;this.listdaoju.array=this._model.getIceAwardArr()};e.prototype.closeView=function(){app.ViewManager.toggleDialog(i.BossWorldIceAwardView,-1,0)};e.SINGLE_KEY="boss.BossWorldIceAwardView";return e}(ui.bingxueshijie.bingxueshijieshengliguoshitipUI);i.BossWorldIceAwardView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.confirm);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.unConfirm);this._model=i.BossModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.confirmHandler=this.dataSource};e.prototype.confirm=function(){if(this.confirmHandler){this.confirmHandler.run();i.BossModelIce.getIns().iceAwardArr=[];var t=Boolean(i.BossModelIce.getIns().iceAwardArr.length>0);this._model.event(i.BossEvent.BOSS_ICE_LEAVE);if(t){main.MainUIOtherIcon.addRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.BOSS_ICE_BAG)}else{main.MainUIOtherIcon.removeRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.BOSS_ICE_BAG)}}else{app.ViewManager.toggleDialog(i.BossWorldIceExitTipView,-1,0)}};e.prototype.unConfirm=function(){app.ViewManager.toggleDialog(i.BossWorldIceExitTipView,-1,0)};e.SINGLE_KEY="boss.BossWorldIceExitTipView";return e}(ui.bingxueshijie.bingxueshijietishiUI);i.BossWorldIceExitTipView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.fuhuobox.visible=false;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.fuhuobtn.clickHandler=new Laya.Handler(this,this.onFree);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onMoney);this._model=t.BossModel.getIns();this.closebtn.visible=false;this.fuhuobtn.disabled=true;this.labelmiaoshu.text=app.getLang("ice_ui_msg_1");this.labelmiaoshu.centerX=.5};i.prototype.onDisplay=function(){this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){Laya.timer.clearAll(this)};i.prototype.refreshAll=function(){this.hanqifugubox.visible=true;var t=this.dataSource;this._delayTime=t.backrelieve;this.costNum=t.goldrelieve;this.labelshuzi.text=this.costNum.toString();this.labelshuzi.color="#cea364";this.startLoopTime()};i.prototype.onMoney=function(){var t=game.ItemUtil.parserList(game.Config.getParams(453))[0];t.setCount(this.costNum);if(game.GridsModel.getIns().hasEnoughItems(t,false,true)){app.ViewManager.toggleDialog(i,-1,0);battle.BattleModel.getIns().relieveFlag=1;app.ProtocolRequest.RelieveReq(1)}};i.prototype.onFree=function(){app.ViewManager.toggleDialog(i,-1,0);battle.BattleModel.getIns().relieveFlag=0;app.ProtocolRequest.RelieveReq(0)};i.prototype.startLoopTime=function(){this.loopFreshTime();this.txtmiaoshu.text=app.getLang("倒计时结束后将可以选择安全复活");Laya.timer.loop(1e3,this,this.loopFreshTime)};i.prototype.loopFreshTime=function(){var t=this._delayTime-game.Context.getServerTime();if(t<=0){this.clipdaoshu.value=""+0;this.fuhuobtn.disabled=true;this.clipdaoshu.visible=false;Laya.timer.clear(this,this.loopFreshTime);this.startCloseTime()}else{this.fuhuobtn.disabled=true;this.clipdaoshu.visible=true;this.clipdaoshu.value=""+t}};i.prototype.startCloseTime=function(){this.fuhuobtn.disabled=false;this.clipdaoshu.visible=true;this._delayTime=game.Context.getServerTime()+game.Config.getIntParams(452);Laya.timer.loop(1e3,this,this.loopCloseTime)};i.prototype.loopCloseTime=function(){var t=this._delayTime-game.Context.getServerTime();if(t<=0){Laya.timer.clear(this,this.loopCloseTime);this.onFree()}else{this.clipdaoshu.value=""+t}this.txtmiaoshu.text=app.getLang("倒计时结束后将传送回安全区复活点")};i.SINGLE_KEY="boss.BossWorldIceFuHuoView";return i}(ui.bingxueshijie.bingxueshijiefuhuoUI);t.BossWorldIceFuHuoView=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=9999;this.mouseThrough=true;this.visible=false};e.prototype.onDisplay=function(){Laya.timer.frameLoop(1,this,this.isShow);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.Tween.clearAll(this.imgquyukuang)};e.prototype.refreshAll=function(){this.imgquyukuang.width=this.width=Laya.stage.width;this.imgquyukuang.height=this.height=Laya.stage.height;this.blink1()};e.prototype.isShow=function(){var t=csv.MapProxy.LeadRoleIsInCustomTypeArea(scene.E_BIT_Define.CUST3);if(t){this.visible=true}else{this.visible=false}};e.prototype.blink1=function(){Laya.Tween.to(this.imgquyukuang,{alpha:0},800,null,new Laya.Handler(this,this.blink2))};e.prototype.blink2=function(){Laya.Tween.to(this.imgquyukuang,{alpha:1},800,null,new Laya.Handler(this,this.blink1))};e.SINGLE_KEY="boss.BossWorldIceHurtView";return e}(ui.bingxueshijie.quyuxiaoguoUI);t.BossWorldIceHurtView=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btncaiji.clickHandler=new Laya.Handler(this,this.onGotoHandler);this.imgwuping.clickHandler=new Laya.Handler(this,this.onMoreHandler);this._model=i.BossModel.getIns()};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this._model.on(i.BossEvent.BOSS_FORCE_CHANGE,this,this.refreshData)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this._model.off(i.BossEvent.BOSS_FORCE_CHANGE,this,this.refreshData)};e.prototype.refreshData=function(){if(this.dataSource){this.setData(this.dataSource.id)}};e.prototype.onGotoHandler=function(){role.LeadingRoleView.getIns().aiBossBattle(this.dataSource.id)};e.prototype.onMoreHandler=function(){app.ViewManager.toggleDialog(i.BossWorldIceleftMoreView,1,1,this.dataSource.id)};e.prototype.setData=function(t){var e=csv.BossProxy.getIns().getCfg(t);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.labeldiaoluo.text=app.getLang(n.monname);var r=game.ItemUtil.createVO(e.rareshow);this.labelshu.visible=false;if(game.Context.isTeamLvReach(e.teamlv,false)){var o=csv.BossProxy.getIns().getBossType(t);var a=this._model.checkIfForce(o,e.id);var s=this._model.getBossDetail(e.id);if(s){this._recodeTime=s.freshtime;var l=this._recodeTime-game.Context.getServerTime();if(l<=0){this.labelshu.visible=false;this.xuetiao.visible=true;this.xuetiao.value=s.hp.toNumber()/s.maxhp.toNumber();if(s.deadtime==0){}else{}}else{this.labelshu.visible=true;this.xuetiao.visible=false;this.labelshu.text=util.TimeUtil.formatTime(l);this.startLoop()}}}else{this.labelshu.visible=false}};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=this._recodeTime-game.Context.getServerTime();if(t>=0){this.labelshu.visible=true;this.labelshu.text=util.TimeUtil.formatTime(t)}else{this.labelshu.visible=false;Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="boss.BossWorldIceleftItem";return e}(ui.bosszhandou.bingxueshijieliebiaoitemUI);i.BossWorldIceleftItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.BossModel.getIns();this.listdaoju.itemRender=grids.GridView;this.listdaoju.renderHandler=grids.GridView.CommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.setData(this.dataSource);var t=csv.BossProxy.getIns().getCfg(this.dataSource);this.listdaoju.array=game.ItemUtil.parserList(t.dropshow)};e.prototype.setData=function(t){var e=csv.BossProxy.getIns().getCfg(t);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.bossmingcheng.skin="res/static/bosszong/"+e.bossname+".png";this.imngtouxiang.skin=csv.MonsterProxy.getMonsterHeadUrl(n);var r=game.ItemUtil.createVO(e.rareshow);this.labelshuzhi.text=e.param2.split(";")[0];this.imgtub.skin="bosszhandou/bg_hanqi.png";this.labeldengji.text=n.monlevel+app.getLang("级");if(game.Context.isTeamLvReach(e.teamlv,false)){this.labelhanqizhi.text="寒气值"}};e.SINGLE_KEY="boss.BossWorldIceleftMoreView";return e}(ui.bosszhandou.dangqianbossxinxichakanUI);i.BossWorldIceleftMoreView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.qiehuanbtn.selected=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.data=t;this.qiehuanbtn.label=app.getLang(t.name);if(this.data.id==0){this.qiehuanbtn.skin="public/btn_yeqian_jiangzhang_01.png"}this.qiehuanbtn.selected=e};e.SINGLE_KEY="boss.BossWorldIceLeftTabItem";return e}(ui.bosszhandou.bingxueshijiebossxuanzeitemUI);t.BossWorldIceLeftTabItem=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._itemHeight=0;t._labbtns=[{name:app.getLang("buttonname_157-1")},{name:app.getLang("buttonname_157-2")},{name:app.getLang("buttonname_157-3")}];t._isShow=true;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this._model=i.BossModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.UI_LAYER_NUME.LEFT_LEFT_TOP_ICON;this.y=app.AppContainer.UI_LAYER_Y.LEFT_ICON;this.initTabList();this.initItemList();game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.BOSS_WOLRD_ICE,[this.imgtubiao])};t.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_ICE_VALUE_NUM,this,this.updateIceValue);this.btnshouqi.on(Laya.Event.CLICK,this,this.upHandler);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_ICE_VALUE_NUM,this,this.updateIceValue);this.btnshouqi.off(Laya.Event.CLICK,this,this.upHandler);this._isShow=true;this.x=0;this.btnshouqi.skin="bosszhandou/btn_jiantouzuo.png"};t.prototype.refreshAll=function(){this.listyeqian.array=this._labbtns;this.listyeqian.selectedIndex=1;this._updateMainView(this.listyeqian.selectedIndex)};t.prototype.initTabList=function(){this.listyeqian.itemRender=i.BossWorldIceLeftTabItem;this.listyeqian.renderHandler=new Laya.Handler(this,this.onMedalTabItemRender);this.listyeqian.selectHandler=new Laya.Handler(this,this.onTabSelect);this.listyeqian.selectEnable=true;this.listyeqian.repeatX=3;this.listyeqian.hScrollBarSkin=""};t.prototype.initItemList=function(){this.listbossxinxi.itemRender=i.BossWorldIceleftItem;this.listbossxinxi.renderHandler=new Laya.Handler(this,this.onMedalTabItemRender2);this.listbossxinxi.selectEnable=true;this.listbossxinxi.repeatX=1;this.listbossxinxi.vScrollBarSkin=""};t.prototype.onMedalTabItemRender=function(t,e){t.setData(t.dataSource,e==this.listyeqian.selectedIndex)};t.prototype.onMedalTabItemRender2=function(t,e){t.setData(t.dataSource.id)};t.prototype.onTabSelect=function(t){this._updateMainView(t)};t.prototype._updateMainView=function(t){this.listbossxinxi.scrollTo(0);this.bossList=csv.BossProxy.getIns().getBossArrBySubType(csv.BossProxy.ENUM.BOSS_WORLD_ICE,t+1);this._model.startUpdateBossInfo(this.bossList);this.listbossxinxi.array=this.bossList};t.prototype.delay1=function(t){t.text=guardisland.GuardIslandsModel.getIns()._coldCD.subTime.toString();Laya.timer.once(200,this,this.delay1,[t])};t.prototype.upHandler=function(t){var e=this;t.stopPropagation();if(this._isShow){Laya.Tween.to(this,{x:-this.dibg.width},100,null,new Laya.Handler(this,function(){e._isShow=false;Laya.Tween.clearAll(e);e.btnshouqi.skin="bosszhandou/btn_jiantouyou.png"}))}else{Laya.Tween.to(this,{x:0},100,null,new Laya.Handler(this,function(){e._isShow=true;Laya.Tween.clearAll(e);e.btnshouqi.skin="bosszhandou/btn_jiantouzuo.png"}))}};t.prototype.updateIceValue=function(t){var e=0;if(t){e=t}var i=+game.Config.getParams(551).split("-")[1];this.hanqizhi.value=e/i;this.labelshuzhi.text=e+"/"+i};t.SINGLE_KEY="boss.BossWorldIceleftView";return t}(ui.bosszhandou.bingxueshijiexuanzeUI);i.BossWorldIceleftView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.qiehuanbtn.selected=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.data=t;this.qiehuanbtn.label=app.getLang(t.name);if(this.data.id==0){this.qiehuanbtn.skin="public/btn_yeqian_jiangzhang_01.png"}this.qiehuanbtn.selected=e};e.SINGLE_KEY="boss.BossWorldIceTabItem";return e}(ui.bingxueshijie.bingxueshijieyeqianitemUI);t.BossWorldIceTabItem=e})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.guishulab.on(Laya.Event.CLICK,this,this.onBelong);this._model=i.BossModel.getIns()};e.prototype.onBelong=function(t){t.stopPropagation();app.ProtocolRequest.BossBelongReq(this.dataSource,0)};e.prototype.onDisplay=function(){this._model.on(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this._model.on(i.BossEvent.BOSS_FORCE_CHANGE,this,this.refreshData);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BossEvent.BOSS_DETAIL_CHANGE,this,this.refreshData);this._model.off(i.BossEvent.BOSS_FORCE_CHANGE,this,this.refreshData);Laya.timer.clear(this,this.loopFreshTime)};e.prototype.refreshAll=function(){};e.prototype.refreshData=function(){this.setData(this.dataSource)};e.prototype.setData=function(t){var e=csv.BossProxy.getIns().getCfg(t);var i=csv.BossProxy.getIns().getMonsterId(e.bosssetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.imgbossmingzi.skin="res/static/bosszong/"+e.bossname+".png";this.touxingimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);var r=game.ItemUtil.createVO(e.rareshow);this.labelshuzi.text=e.param2.split(";")[0];this.nianfen.text=n.monlevel+app.getLang("级");if(game.Context.isTeamLvReach(e.teamlv,false)){this.dadao.text="寒气值";var o=this._model.getBossDetail(e.id);if(o){this._recodeTime=o.freshtime;var a=this._recodeTime-game.Context.getServerTime();if(a<=0){this.yijishaimg.visible=false;this.dajishilab.visible=false;this.xuetiaobar.visible=true;this.xuetiaobar.value=o.hp.toNumber()/o.maxhp.toNumber();if(o.deadtime==0){}else{}}else{this.yijishaimg.visible=true;this.dajishilab.visible=true;this.xuetiaobar.visible=false;this.dajishilab.text=util.TimeUtil.formatTime(a);this.startLoop()}this.zhenduolab.visible=true;this.renshu.text=app.getLang("{0}人",o.fightnum)}this.guishulab.visible=true;this.imgbossmingzi.gray=this.touxingimg.gray=false}else{this.yijishaimg.visible=false;this.dajishilab.visible=false;this.xuetiaobar.visible=false;this.zhenduolab.visible=false;this.guishulab.visible=false;this.renshu.text="";this.dadao.text=game.Context.getTeamLvLimitDes(e.teamlv);this.imgbossmingzi.gray=this.touxingimg.gray=true}};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.boxxuanzhong.visible=true;this.boxzhengchang.visible=false}else{this.boxxuanzhong.visible=false;this.boxzhengchang.visible=true}};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=this._recodeTime-game.Context.getServerTime();if(t>=0){this.dajishilab.text=util.TimeUtil.formatTime(t)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="boss.BossWorldIceTypeItem";return e}(ui.bingxueshijie.bingxueshijieliebiaoitem1UI);i.BossWorldIceTypeItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.BossModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilsit.itemRender=grids.GridView;this.gezilsit.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.gezilsit,this.box1,96,this.gezilsit.spaceX)};e.prototype.onFight=function(t){t.stopPropagation();if(battle.BattleModel.getIns().checkBattleState(true,[csv.MapProxy.MAP_TYPE.WORLD_BOSS_ICE])){return}role.LeadingRoleView.getIns().aiBossBattle(this.dataSource.id)};e.prototype.onRewardShow=function(t){t.stopPropagation();app.ViewManager.toggleDialog(i.BossReward2View,1,0,this.dataSource.dropshow)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.centerLayout.array=game.ItemUtil.parserList(t.dropshow)};e.SINGLE_KEY="boss.BossWorldIceTypeSubItem";return e}(ui.bingxueshijie.bingxueshijieliebiaoitem2UI);i.BossWorldIceTypeSubItem=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var boss;(function(o){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._labbtns=[{name:app.getLang("buttonname_157-1")},{name:app.getLang("buttonname_157-2")},{name:app.getLang("buttonname_157-3")}];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=o.BossModel.getIns();this.initCustomList();this.initTabList();this.initCostItem();this.shuoming.text=app.getLang("iceworld_ui_1");this.jiahaobtn.visible=false;this.huifulab.visible=false;game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.BOSS_WOLRD_ICE,[this.btntishi,this.shuoming])};t.prototype.onDisplay=function(){this.tequanbtn.on(Laya.Event.CLICK,this,this.onShowVipSwitchView);this.tiaozhanbtn.on(Laya.Event.CLICK,this,this.onFight);this._model.on(o.BossEvent.BOSS_ICE_JOIN_NUM,this,this.setDailyTime);this._model.on(o.BossEvent.BOSS_OPEN_DOUBLE,this,this.setBtnLable);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.tequanbtn.off(Laya.Event.CLICK,this,this.onShowVipSwitchView);this.tiaozhanbtn.off(Laya.Event.CLICK,this,this.onFight);this._model.off(o.BossEvent.BOSS_ICE_JOIN_NUM,this,this.setDailyTime);this._model.off(o.BossEvent.BOSS_OPEN_DOUBLE,this,this.setBtnLable);this._model.stopUpdateBossInfo()};t.prototype.refreshAll=function(){this.listyeqian.array=this._labbtns;this.listyeqian.selectedIndex=1;this.initCostItem();this.setDailyTime();this._updateMainView(this.listyeqian.selectedIndex)};t.prototype.initCustomList=function(){this.list=new component.SimpleGroupList;this.list.startY=4;this.list.groupRender=o.BossWorldIceTypeItem;this.list.itemRender=o.BossWorldIceTypeSubItem;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.addChild(this.list);this.list.width=this.xiala.width;this.list.height=this.xiala.height;this.list.x=this.xiala.x;this.list.y=this.xiala.y;this.list.groupGap=4};t.prototype.initTabList=function(){this.listyeqian.itemRender=o.BossWorldIceTabItem;this.listyeqian.renderHandler=new Laya.Handler(this,this.onMedalTabItemRender);this.listyeqian.selectHandler=new Laya.Handler(this,this.onTabSelect);this.listyeqian.selectEnable=true;this.listyeqian.repeatX=3;this.listyeqian.hScrollBarSkin=""};t.prototype.initCostItem=function(t){if(t===void 0){t=1}var e=game.Config.getParams(550);var i=game.ItemUtil.parserList(e)[0];var n=this._costNum=i.count*t;i.setCount(n);this.daoju.setData(i);if(t==1){this.tiaozhanbtn.label=app.getLang("iceworld_des1")}else{this.tiaozhanbtn.label=t+app.getLang("倍挑战")}var r=o.BossStatic.getDoubleTypeByActivityType(csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD_ICE);o.BossModel.getIns().getBoDouble(r)};t.prototype.onTabSelect=function(t){this._updateMainView(t)};t.prototype._updateMainView=function(t){this.bossList=csv.BossProxy.getIns().getBossArrBySubType(csv.BossProxy.ENUM.BOSS_WORLD_ICE,t+1);this._model.startUpdateBossInfo(this.bossList);this.list.dataSource=this.bossList;var e=0;if(this.dataSource.length>0){var i=this.dataSource[0];for(var n=0,r=this.bossList.length;n<r;n++){if(i==parseInt(this.bossList[n].id)){e=n;break}}}else{for(var n=0,r=this.bossList.length;n<r;n++){var o=this.bossList[n];if(game.Context.isRoleReach(false,parseInt(o.role),parseInt(o.lv))){e=n}else{break}}}this.setDailyTime()};t.prototype.onMedalTabItemRender=function(t,e){t.setData(t.dataSource,e==this.listyeqian.selectedIndex)};t.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onFight=function(t){t.stopPropagation();if(battle.BattleModel.getIns().checkBattleState(true,[csv.MapProxy.MAP_TYPE.WORLD_BOSS_ICE])){return}if(this._model.getIceJoinTimes()<1&&this.isHaveMaxJoinVipLv()){manager.FlowManager.instance.flowByStyle1(app.getLang("次数已用完"));return}if(this._model.getIceJoinTimes()<1&&!this.isHaveMaxJoinVipLv()){manager.FlowManager.instance.flowByStyle1(app.getLang("ice_warn_msg_4"));return}if(this._model.getIceJoinTimes()<this._costJoinNum&&this._model.getIceJoinTimes()>0){game.Alert.show(app.getLang("当前进入次数为1，是否单倍进入？"),new Laya.Handler(this,this.joinBigMap),new Laya.Handler);return}this.joinBigMap()};t.prototype.joinBigMap=function(){var t=+this.list.array[0].id;var e=csv.NpcProxy.getIns().getBossMap(t);var i=e.npcmap;var n=game.Config.getParams(550);var r=n.split("-")[0]+"-"+this._costNum;if(game.GridsModel.getIns().hasEnoughItems(r,false)){game.SceneModel.getInstance().EnterBossMapRequest(i)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("ice_warn_msg_3"))}};t.prototype.onShowVipSwitchView=function(){o.BossModel.getIns().onShowVipSwitchView(csv.DailyTimeProxy.ENUM_TYPE.BOSS_WORLD_ICE)};t.prototype.setDailyTime=function(){};t.prototype.isHaveMaxJoinVipLv=function(){return false};t.prototype.setBtnLable=function(t){var e=game.Config.getParams(550);var i=game.ItemUtil.parserList(e)[0];var n=this._costNum=i.count*t;i.setCount(n);this.daoju.setData(i);this._costJoinNum=t;if(t==1){this.tiaozhanbtn.label=app.getLang("iceworld_des1")}else{this.tiaozhanbtn.label=t+app.getLang("倍挑战")}};t.SINGLE_KEY="boss.BossWorldIceView";return t}(ui.bingxueshijie.bingxuehsijieviewUI);o.BossWorldIceView=t})(boss||(boss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chart;(function(p){var i=function(e){__extends(t,e);function t(t){return e.call(this,t)||this}t.prototype.onDisplay=function(){e.prototype.onDisplay.call(this);game.GridsModel.getIns().on(game.GridsModel.EVENTS.ITEM_UPDATE,this,this.onChangeItem)};t.prototype.onUndisplay=function(){e.prototype.onUndisplay.call(this);game.GridsModel.getIns().off(game.GridsModel.EVENTS.ITEM_UPDATE,this,this.onChangeItem)};t.prototype.onChangeItem=function(){p.ChartModule.getIns().onReddotUpdqate()};return t}(main.MainUIIcon);var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.isInit=true;t.openInit=true;t.oldOpen=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.TIANGONPU,p.TiangongpuView,null,game.ECommonType.DIALOG_TYPE);app.ViewManager.regist(p.TiangongpuView,"guaji.atlas");app.ViewManager.regist(p.Huodejiguanshou,"guaji.atlas");this.model.on(p.ChartEvent.EVENT_RED,this,this.onReddotUpdqate);main.MainUIIcon.iconClassMap[csv.MainIconProxy.TYPE_ICON_TIANGONPU]=i};t.prototype.onReddotUpdqate=function(){var t=[csv.FunctionsProxy.ENUMS.TIANGONPU,csv.FunctionsProxy.ENUMS.MIJING_GUAJI];var e=this.model.hasRed();for(var i=0;i<t.length;i++){if(e){game.ClosureManager.addDot(t[i])}else{game.ClosureManager.removeDot(t[i])}}};Object.defineProperty(t.prototype,"model",{get:function(){return p.ChartModel.getIns()},enumerable:true,configurable:true});t.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.ChartDataNtf,this,this.onChartDataNtf);this.addMsgListener(app.ProtocolResponse.ChartSynthesisResp,this,this.onChartSynthesisResp)};t.prototype.onChartSynthesisResp=function(t,e){if(e.ret==1){}};t.prototype.testPush=function(){var t=new ChartDataNtf;t.data=[];var e=new ChartData;t.data.push(e);e.status=1;e.id=2;e.part=[];for(var i=0;i<9;i++){var n=new ItemData;n.itemID=77001+i;n.value=1;e.part.push(n)}this.onChartDataNtf(0,t)};t.prototype.resetPush=function(){while(this.model.changeList.length>0){this.model.changeList.pop()}var t=new ChartDataNtf;t.data=[];var e=new ChartData;t.data.push(e);e.status=0;e.id=2;e.part=[];for(var i=0;i<9;i++){var n=new ItemData;n.itemID=77001+i;n.value=1;e.part.push(n)}this.onChartDataNtf(0,t)};t.prototype.isHavePiece=function(t,e){var i=false;for(var n=0;n<this.model.chartDatas.length;n++){var r=this.model.chartDatas[n];if(r.id==t){i=true;for(var o=0;o<r.part.length;o++){if(r.part[o].itemID==e){return true}}}}return false};t.prototype.onChartDataNtf=function(t,e){if(!this.isInit){for(var i=0;i<e.data.length;i++){var n=e.data[i];if(n.status==p.ETonggongPuStatus.NOT_YET_Compose){for(var r=0;r<n.part.length;r++){var o=n.part[r].itemID;if(this.isHavePiece(n.id,o)){}else{var a=new p.ChartPieceAnimVo;a.itemid=o;a.jiguanid=n.id;this.model.pieceAnimList.push(a)}}}var s=this.model.getStatus(n.id);if(s!=n.status){var l=new p.ChartStatusChangeVo;l.oldStatus=s;l.newStatus=n.status;l.jiguanid=n.id;this.model.changeList.push(l);if(l.newStatus==p.ETonggongPuStatus.ZhuHun){var u=csv.ChartProxy.getIns().getCfg(l.jiguanid,l.newStatus);if(u&&u.mijing!=0){mjhole.MjHoleModel.getIns().clientJiguanshouId=l.jiguanid}else{app.ViewManager.toggleDialog(p.Huodejiguanshou,1,0,[l.jiguanid])}}}}}this.isInit=false;this.model.chartDatas=e.data;if(this.openInit){this.oldOpen=this.model.isOpen()}this.openInit=false;if(!this.oldOpen&&this.model.isOpen()){guaji.GuajiModel.getIns().tiangongAni=true;this.oldOpen=true}this.model.event(p.ChartEvent.EVENT_DATA_NTF);this.model.event(p.ChartEvent.EVENT_RED)};t.SINGLE_KEY="chart.ChartModule";return t}(app.ModuleBase);p.ChartModule=t})(chart||(chart={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chart;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.changeList=[];t.pieceAnimList=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this.chartDatas=[]};t.prototype.popPieceVo=function(t,e){for(var i=0;i<this.pieceAnimList.length;i++){var n=this.pieceAnimList[i];if(n.jiguanid==t&&n.itemid==e){this.pieceAnimList.splice(i,1);return n}}};t.prototype.hasIn=function(t){var e=csv.ChartProxy.getIns().jiguanidMap;for(var i in e){var n=e[i];if(n.length>0){for(var r=0;r<n.length;r++){if(n[r].mijing==t){return true}}}}return false};t.prototype.getChangeVo=function(t){for(var e=0;e<this.changeList.length;e++){if(this.changeList[e].jiguanid==t){return this.changeList[e]}}};t.prototype.delChangeVo=function(t){for(var e=0;e<this.changeList.length;e++){if(this.changeList[e].jiguanid==t){this.changeList.splice(e,1)}}};t.prototype.isActivation=function(t){for(var e=0;e<this.chartDatas.length;e++){if(this.chartDatas[e].id==t){var i=this.chartDatas[e];if(i.status>=s.ZhuHun){return true}}}return false};t.prototype.getById=function(t){var e;for(var i=0;i<this.chartDatas.length;i++){if(this.chartDatas[i].id==t){e=this.chartDatas[i];break}}return e};t.prototype.isOpen=function(){if(this.chartDatas){for(var t=0;t<this.chartDatas.length;t++){return true}}var e=game.Config.getIntParams(1191);var i=csv.ChartProxy.getIns().cfgByid[e];if(i.itemid){var n=i.itemid.split(";");for(var t=0;t<this.chartDatas.length;t++){var r=this.chartDatas[t];for(var o=0;o<r.part.length;o++){var a=r.part[o].itemID;for(var s=0;s<n.length;s++){var l=n[s];if(l.indexOf(a.toString())!=-1){return true}}}}}return false};t.prototype.getTabList=function(){var t=[];var e=csv.ChartProxy.getIns().jiguanidMap;for(var i in e){var n=e[i];if(n.length>0){var r=n[0];var o=this.getStatus(r.jiguanid);var a=csv.ChartProxy.getIns().getCfg(r.jiguanid,o);if(a){if(a.mijing!=0){if(this.isActivation(a.id)){t.push(a)}}else{t.push(a)}}else{t.push(r)}}}return t};t.prototype.hasPiece=function(t,e,i){var n=this.getById(t);if(n){for(var r=0;r<n.part.length;r++){var o=n.part[r];if(o.itemID==e&&o.value>=i){return true}}}return false};t.prototype.hasPieceCount=function(t){var e=this.getById(t);var i=0;if(e){for(var n=0;n<e.part.length;n++){if(e.id==t){i=e.part.length}}}return i};t.prototype.getStatus=function(t){var e=this.getById(t);if(e){if(e.status==1){s.IS_Compose}else if(e.status==0){return s.NOT_YET_Compose}return e.status}return s.NOT_YET_Compose};Object.defineProperty(t.prototype,"proxy",{get:function(){return csv.ChartProxy.getIns()},enumerable:true,configurable:true});t.prototype.hasItemRed=function(t){var e=this.getStatus(t);if(e!=s.ZhuHun){var i=this.proxy.getCfg(t,e+1);if(i){if(e==s.NOT_YET_Compose){var n=i.itemid.split(";");var r=true;for(var o=0;o<n.length;o++){var a=n[o].split("-");if(!this.hasPiece(t,parseInt(a[0]),parseInt(a[1]))){r=false}}if(r){return true}}if(game.GridsModel.getIns().hasEnoughItems(i.itemid+";"+i.cost)){return true}}}return false};t.prototype.isCanDispatch=function(t){var e=this.getStatus(t);if(e==s.ZhuHun&&guaji.SecretAreaModel.getIns().isMijingOpen()){var i=guaji.SecretAreaModel.getIns().getAreaOpenDataByChartId(t);if(!i){return true}}return false};t.prototype.jiguanHasRed=function(t){if(this.hasItemRed(t)||this.isCanDispatch(t)){return true}return false};t.prototype.hasRed=function(){for(var t=0;t<this.proxy.jiguanIdList.length;t++){var e=this.proxy.jiguanIdList[t];if(this.jiguanHasRed(e)){return true}}return false};t.prototype.getLabel=function(t){var e=app.getLang("tiangongshou_04").split(",");if(e[t]){return e[t]}return""};t.SINGLE_KEY="chart.ChartModel";return t}(app.ModelBase);t.ChartModel=e;var i=function(){function t(){}t.EVENT_DATA_NTF="EVENT_DATA_NTF";t.EVENT_RED="EVENT_RED";return t}();t.ChartEvent=i;var n;(function(t){t[t["Null"]=0]="Null";t[t["Compose"]=1]="Compose";t[t["Part"]=2]="Part";t[t["End"]=3]="End"})(n=t.ChartAnimType||(t.ChartAnimType={}));var s;(function(t){t[t["NOT_YET_Compose"]=0]="NOT_YET_Compose";t[t["IS_Compose"]=1]="IS_Compose";t[t["ZhuHun"]=6]="ZhuHun"})(s=t.ETonggongPuStatus||(t.ETonggongPuStatus={}));var r;(function(t){t[t["ComposeItemNotEnough"]=1]="ComposeItemNotEnough";t[t["ItemNotEnough"]=2]="ItemNotEnough"})(r=t.ETiangongPuComposeStatus||(t.ETiangongPuComposeStatus={}));var o=function(){function t(){}t.prototype.getAnimType=function(){if(this.oldStatus==s.NOT_YET_Compose&&this.newStatus==s.IS_Compose){return n.Compose}if(this.oldStatus>=s.IS_Compose&&this.newStatus>=s.IS_Compose&&this.newStatus<s.ZhuHun){return n.Part}if(this.oldStatus>=s.IS_Compose&&this.newStatus<=s.ZhuHun){return n.End}return n.Null};t.prototype.curAniList=function(){var t=[];var e=csv.ChartProxy.getIns().getCfg(this.jiguanid,this.newStatus);if(e){var i=e.anilocation;if(i!=""){var n=i.split(";");return n}}return t};return t}();t.ChartStatusChangeVo=o;var a=function(){function t(){}return t}();t.ChartPieceAnimVo=a})(chart||(chart={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("tiangongpu.csv");this.cfgByid=t.getMap("id");this.cfgMap=t.getMapList("jiguanid");this.jiguanidMap=t.getMapList("jiguanid");this.arrlist=t.getArray();this.jiguanIdList=[];for(var e=0;e<this.arrlist.length;e++){if(this.jiguanIdList.indexOf(this.arrlist[e].jiguanid)==-1){this.jiguanIdList.push(this.arrlist[e].jiguanid)}}};e.prototype.getCfg=function(t,e){for(var i=0;i<this.arrlist.length;i++){var n=this.arrlist[i];if(n.jiguanid==t&&n.stage==e){return n}}};e.prototype.getArray=function(){var t=[];for(var e in this.cfgMap){t.push(this.cfgMap[e][0].jiguanid)}return t};e.prototype.isVip=function(t){return csv.VipProxy.getIns().getOpenLevel(csv.PRI_TYPE.CHART,t)>0};e.prototype.getChatrName=function(t){return app.getLang(this.cfgMap[t][0].language)};e.SINGLE_KEY="csv.ChartProxy";return e}(app.ModelBase);t.ChartProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chart;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.RESIZE,this,this.onResize);this.mengban.on(Laya.Event.CLICK,this,this.onClickHandler)};e.prototype.onClickHandler=function(){this.close()};e.prototype.onDisplay=function(){guide.GuideModel.getIns().boOpen=false;this.onResize();this.callLater(this.onCallLater)};e.prototype.onResize=function(){this.mengban.width=Laya.stage.width;this.mengban.height=Laya.stage.height;this.btnclose.y=Laya.stage.height-70};e.prototype.onCallLater=function(){this.jiguanid=this.dataSource[0];this.cfg=csv.ChartProxy.getIns().getCfg(this.jiguanid,i.ETonggongPuStatus.ZhuHun);if(this.cfg){this.imgname.skin="guaji/bg_tiangongpu_title"+this.cfg.jiguanid+".png";this.imgjiguanshou.skin=this.cfg.res;var t=app.getLang(this.cfg.language);this.labelname.text=app.getLang("tiangongshou_09",t)}};e.prototype.onUnDisplay=function(){guide.GuideModel.getIns().boOpen=true;if(mjhole.MjHoleModel.getIns().clientJiguanshouId&&this.jiguanid==mjhole.MjHoleModel.getIns().clientJiguanshouId){guaji.GuajiModel.getIns().mijingAni=true;mjhole.MjHoleModel.getIns().event(mjhole.MjHoleModel.POP_LOCK_VIEW)}};return e}(ui.guaji.huodejiguanshouUI);i.Huodejiguanshou=t})(chart||(chart={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chart;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this)};e.prototype.setData=function(t){var e=t.split("-");this.itemVO=game.ItemUtil.createVO(parseInt(e[0]));this.itemVO.setCount(parseInt(e[1]));this.daoju.setData(this.itemVO);var i=game.GridsModel.getIns().getItemCount(this.itemVO.getItemId());var n=game.STYLES.RED_COLOR;this.zhezhaoimg.visible=true;if(i>=this.itemVO.count){n=game.STYLES.GREEN_COLOR;this.zhezhaoimg.visible=false;this.imgnum.text=i+"/"+this.itemVO.count}else{this.imgnum.text="<span color='"+n+"'>"+i+"</span>/"+this.itemVO.count}};return e}(ui.guaji.tiangongpuitemUI);t.TiangongpuitemView=e})(chart||(chart={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chart;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Laya.Sprite);t.TiangongpuMkView=e})(chart||(chart={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chart;(function(h){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.itemViewList=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnhecheng.clickHandler=new Laya.Handler(this,this.onHeCheng);this.daojulist.renderHandler=new Laya.Handler(this,this.onDaoItemView);this.daojulist.itemRender=h.TiangongpuitemView;this.conXY=new Laya.Point(this.jiguanshou.x,this.jiguanshou.y);this.curScale=this.jiguanshou.scaleX;this.jiguanshou.removeSelf();this.listtiaojian.itemRender=ui.guaji.jiguanshoujiitemUI;this.listtiaojian.renderHandler=new Laya.Handler(this,this.onListTiaojianHandler)};t.prototype.onListTiaojianHandler=function(t,e){var i=t.dataSource.split("-");var n=parseInt(i[0]);var r=csv.ItemProxy.getIns().itemCfgMap[n];t.tujing.wordWrap=false;t.on(Laya.Event.LINK,this,this.onLinkHandler);var o="";if(r.p2!=""){var a=csv.GuajiProxy.getIns().getMijingCfg(r.p2);o=app.getLang("tiangongshou_15",app.getLang(a.name),r.namedispaly)}else if(r.p4!=""){var s=csv.GuajiProxy.getIns().getCfgGuanqia(parseInt(r.p4));var l=csv.GuajiProxy.getIns().getPart(s.id);o=app.getLang("tiangongshou_16",s.chapter+"-"+l.index,r.namedispaly)}if(this.model.hasPiece(this.curCfg.jiguanid,parseInt(i[0]),parseInt(i[1]))){o+=app.getLang("tiangongshou_17")}else{o+=app.getLang("tiangongshou_18")}t.tujing.text=o};t.prototype.onDaoItemView=function(t){t.setData(t.dataSource)};t.prototype.onLinkHandler=function(t){chat.ChatStatic.dellLink(t)};t.prototype.onMingJing=function(t){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.MIJING_GUAJI,true,false,t+"")};Object.defineProperty(t.prototype,"model",{get:function(){return h.ChartModel.getIns()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"proxy",{get:function(){return csv.ChartProxy.getIns()},enumerable:true,configurable:true});t.prototype.onHeCheng=function(){var t=this.model.getStatus(this.curCfg.jiguanid);if(t<h.ETonggongPuStatus.ZhuHun){if(t>=h.ETonggongPuStatus.IS_Compose){var e=this.proxy.getCfg(this.curCfg.jiguanid,t+1);if(e&&!game.GridsModel.getIns().hasEnoughItems(e.itemid+";"+e.cost)){manager.FlowManager.instance.flowByStyle1(app.getLang("tiangongshou_05"));return}}app.ProtocolRequest.ChartSynthesisReq(this.curCfg.jiguanid,t+1)}else{if(guaji.SecretAreaModel.getIns().isMijingOpen()){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.MIJING_GUAJI)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("tiangongshou_13"))}}};t.prototype.onlistyeqianSelect=function(t){this.updateView()};t.prototype.getPoolItemView=function(t){for(var e=0;e<this.itemViewList.length;e++){if(this.itemViewList[e].id==t){return this.itemViewList[e]}}var i=new n(this.curCfg.id,this);this.itemViewList.push(i);return i};t.prototype.updateView=function(){this.freeItemView();if(this.curCfg){var t=this.getPoolItemView(this.curCfg.id);if(t.view.parent){t.onDisplay()}else{this.addChild(t.view)}t.view.x=this.conXY.x;t.view.y=this.conXY.y;t.view.scaleX=t.view.scaleY=this.curScale;this.poolItem=t}};t.prototype.onHeChengSucceed=function(){this.updateView()};t.prototype.onDisplay=function(){this.model.on(h.ChartEvent.EVENT_DATA_NTF,this,this.onHeChengSucceed);guaji.SecretAreaModel.getIns().on(guaji.SecretAreaModel.SECRETAREA_START_RESP,this,this.updateView);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.updateView);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.updateView);this.callLater(this.refreshAll)};t.prototype.refreshAll=function(){var t=this.dataSource[0];this.curCfg=csv.ChartProxy.getIns().getCfg(t,this.model.getStatus(t)+1);this.updateView()};t.prototype.freeItemView=function(){while(this.itemViewList.length>0){this.itemViewList.pop().free()}};t.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.updateView);game.MoneyModel.getIns().off(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.updateView);guaji.SecretAreaModel.getIns().off(guaji.SecretAreaModel.SECRETAREA_START_RESP,this,this.updateView);this.model.off(h.ChartEvent.EVENT_DATA_NTF,this,this.onHeChengSucceed);this.freeItemView()};t.SINGLE_KEY="chart.TiangongpuView";return t}(ui.guaji.tiangongpunew2UI);h.TiangongpuView=t;var n=function(){function t(t,e){this.imgList=[];this.partAnim=[];this.shangseimgList=[];this.maskImgList=[];this.p=e;this.id=t;this.create()}Object.defineProperty(t.prototype,"model",{get:function(){return h.ChartModel.getIns()},enumerable:true,configurable:true});t.prototype.create=function(){var t=csv.ChartProxy.getIns().cfgByid[this.id];this.cfg=t;this.sign="TiangongpuMkView"+t.jiguanid;var e="tiangongpuitem_jxs"+t.jiguanid+"UI";this.view=Laya.Pool.getItemByClass(this.sign,ui.guaji[e]);this.imgList.push(this.view.img1,this.view.img2,this.view.img3,this.view.img4,this.view.img5,this.view.img6,this.view.img7,this.view.img8,this.view.img9);this.shangseimgList.push(this.view.shangseimg1,this.view.shangseimg2,this.view.shangseimg3,this.view.shangseimg4,this.view.shangseimg5,this.view.shangseimg6,this.view.shangseimg7,this.view.shangseimg8,this.view.shangseimg9,this.view.shangseimg10,this.view.shangseimg11);this.partAnim.push(this.view.ani2,this.view.ani3,this.view.ani4,this.view.ani5,this.view.ani6,this.view.ani7,this.view.ani8,this.view.ani9,this.view.ani10,this.view.ani11,this.view.ani12);this.view.on(Laya.Event.DISPLAY,this,this.onDisplay);this.view.on(Laya.Event.DISPLAY,this,this.onUnDisplay)};Object.defineProperty(t.prototype,"curCfg",{get:function(){return this.p.curCfg},enumerable:true,configurable:true});t.prototype.clear=function(){this.p.yijihuo.skin="";while(this.maskImgList.length>0){this.maskImgList.pop().removeSelf()}this.p.labeltishi1.off(Laya.Event.LINK,this.p,this.p.onLinkHandler);this.p.labeltishi1.off(Laya.Event.LINK,this.p,this.p.onMingJing);this.p.listtiaojian.visible=false;this.p.labeljindu.visible=false;game.RedDotView.removeFrom(this.p.btnhecheng);for(var t=0;t<this.partAnim.length;t++){if(this.partAnim[t]){this.partAnim[t].gotoAndStop(0)}}for(var t=0;t<this.shangseimgList.length;t++){if(this.shangseimgList[t]){this.shangseimgList[t].visible=true}}for(var t=0;t<this.imgList.length;t++){this.imgList[t].visible=false}if(this.view.zhaosebox){this.view.zhaosebox.visible=true}this.view.imgshangse.visible=false;this.view.imgzhuose.visible=false;this.view.imgliehen.visible=false;this.p.lanqibox.visible=false;this.p.btnhecheng.visible=false;this.p.labeltishi1.visible=false;this.p.daojubox.visible=false;this.view.shuipian1.visible=false;this.p.daojulist.repeatX=this.p.daojulist.repeatY=0};t.prototype.getMoneyStr=function(t,e){if(e==game.ItemUtil.ENUMS.TONGBI||e==game.ItemUtil.ENUMS.YUANBAO){return game.MoneyModel.format(t)}return t.toString()};t.prototype.refreshMoney=function(t){var e=this.proxy.getCfg(this.curCfg.jiguanid,t+1);if(e&&e.cost!=""){this.p.daojubox.visible=true;var i=e.cost.split("-");var n=parseInt(i[0]);var r=parseInt(i[1]);var o=game.GridsModel.getIns().getItemCount(n);var a=game.STYLES.GREEN_COLOR_S;if(o<r){a=game.STYLES.RED_COLOR_S}this.p.labnum.text="<span color='"+a+"'>"+this.getMoneyStr(o,n)+"</span>/"+this.getMoneyStr(r,n)}};t.prototype.playAnim=function(t,e,i){var n=this.proxy.getCfg(this.curCfg.jiguanid,t+1);if(e.visible&&n){var r=e.skin;var o=n.itemid.split(";");if(o[i]){var a=o[i].split("-");if(a.length>=2){var s=parseInt(a[0]);var l=this.model.popPieceVo(this.curCfg.jiguanid,s);if(l){var u=r.substr(0,r.length-4)+"_tm.png";var p=new Laya.Image(u);e.addChild(p);p.alpha=.7;this.maskImgList.push(p);Laya.Tween.to(p,{alpha:0},660,Laya.Ease.linearNone,new Laya.Handler(this,this.onCompleteHandler,[p]))}}}}};t.prototype.onCompleteHandler=function(t){t.removeSelf()};t.prototype.updateViewByData=function(t){this.clear();this.setAniStatus(this.curCfg.jiguanid,t);var e=this.model.getLabel(t);switch(t){case h.ETonggongPuStatus.IS_Compose:this.view.imgzhuose.visible=true;this.showDaoju(t);this.p.btnhecheng.visible=true;this.p.btnhecheng.label=e;break;case h.ETonggongPuStatus.NOT_YET_Compose:var i=0;var n=csv.ChartProxy.getIns().getCfg(this.curCfg.jiguanid,t+1);var r=void 0;if(n){r=n.itemid.split(";")}for(var o=0;o<this.imgList.length;o++){var a=this.imgList[o];var s=false;if(r){var l=r[o].split("-");s=this.model.hasPiece(this.curCfg.jiguanid,parseInt(l[0]),parseInt(l[1]))}a.visible=s;this.playAnim(t,a,o);if(s){i++}}if(i>0){this.view.imgliehen.visible=true}this.view.shuipian1.visible=true;if(i>=this.imgList.length){this.refreshMoney(t);this.p.btnhecheng.visible=true;this.p.btnhecheng.label=app.getLang("tiangongshou_10")}else{this.p.labeltishi1.on(Laya.Event.LINK,this.p,this.p.onLinkHandler);if(this.curCfg.accesslanguage){this.p.labeltishi1.visible=true;this.p.labeltishi1.text=app.getLang(this.curCfg.accesslanguage)}else{if(this.curCfg.itemid!=""){this.p.listtiaojian.visible=true;var l=this.curCfg.itemid.split(";");this.p.listtiaojian.array=l;this.p.labeljindu.visible=true;this.p.labeljindu.text=app.getLang("tiangongshou_19",this.model.hasPieceCount(this.curCfg.jiguanid),l.length)}}}break;default:this.view.imgliehen.visible=false;this.view.imgzhuose.visible=true;if(t==h.ETonggongPuStatus.ZhuHun){this.view.imgshangse.visible=true;this.p.yijihuo.skin="res/static/tiangongpu/bg_yijihuo0"+this.curCfg.jiguanid+".png";var u=guaji.SecretAreaModel.getIns().getAreaOpenDataByChartId(this.curCfg.jiguanid);if(u){var p=csv.GuajiProxy.getIns().getMijingCfg(u.areaId);this.p.labeltishi1.visible=true;this.p.labeltishi1.text=app.getLang("tiangongshou_08",app.getLang(p.name));this.p.labeltishi1.on(Laya.Event.LINK,this.p,this.p.onMingJing,[p.id])}else{this.p.btnhecheng.visible=true;this.p.btnhecheng.label=app.getLang("tiangongshou_06")}}else{this.showDaoju(t);this.p.btnhecheng.visible=true;this.p.btnhecheng.label=e}break}if(this.model.isCanDispatch(this.curCfg.jiguanid)||this.model.hasItemRed(this.curCfg.jiguanid)){game.RedDotView.addTo(this.p.btnhecheng)}};Object.defineProperty(t.prototype,"proxy",{get:function(){return csv.ChartProxy.getIns()},enumerable:true,configurable:true});t.prototype.showDaoju=function(t){this.p.labtitlefenxian.text=this.model.getLabel(t);this.p.lanqibox.visible=true;var e=this.proxy.getCfg(this.curCfg.jiguanid,t+1);if(e&&e.itemid.length>0){this.p.daojulist.array=e.itemid.split(";");this.p.daojulist.visible=true}else{this.p.daojulist.visible=false}this.refreshMoney(t)};t.prototype.onCallLater=function(){var t=h.ChartAnimType.Null;var e=this.model.getStatus(this.cfg.jiguanid);var i=this.model.getChangeVo(this.curCfg.jiguanid);if(i){t=i.getAnimType();e=i.oldStatus;this.model.delChangeVo(this.curCfg.jiguanid)}if(t==h.ChartAnimType.End){app.SoundManager.getIns().playSound("jiguanshouhecheng")}switch(t){case h.ChartAnimType.Null:case h.ChartAnimType.End:this.updateViewByData(this.model.getStatus(this.cfg.jiguanid));break;case h.ChartAnimType.Compose:app.SoundManager.getIns().playSound("tiangongpuzhizhang");this.updateViewByData(e);this.playAnimForCompose();break;case h.ChartAnimType.Part:this.updateViewByData(e);if(i){var n=i.curAniList();for(var r=0;r<n.length;r++){var o=parseInt(n[r])-1;if(this.partAnim[o]){this.partAnim[o].play(0,false)}}}Laya.timer.once(1e3,this,this.onPartEnd);break}};t.prototype.setAniStatus=function(t,e){for(var i=0;i<=e;i++){var n=csv.ChartProxy.getIns().getCfg(t,i);if(n&&n.anilocation){var r=n.anilocation;if(r!=""){var o=r.split(";");for(var a=0;a<o.length;a++){var s=parseInt(o[a])-1;if(this.partAnim[s]){this.partAnim[s].gotoAndStop(this.partAnim[s].count-1)}}}}}};t.prototype.onPartEnd=function(){this.onPlayAnimEnd()};t.prototype.onDisplay=function(){Laya.timer.callLater(this,this.onCallLater)};t.prototype.onPlayAnimEnd=function(){this.updateViewByData(this.model.getStatus(this.cfg.jiguanid))};t.prototype.playAnimForCompose=function(){this.view.imgliehen.visible=true;this.view.ani1.gotoAndStop(0);this.view.ani1.once(Laya.Event.COMPLETE,this,this.onPlayAnimEnd);this.view.ani1.play(0,false)};t.prototype.onUnDisplay=function(){this.clear();this.view.ani1.stop()};t.prototype.free=function(){this.removeSelf();Laya.Pool.recover(this.sign,this.view)};t.prototype.removeSelf=function(){this.view.removeSelf();this.view.off(Laya.Event.DISPLAY,this,this.onDisplay);this.view.off(Laya.Event.DISPLAY,this,this.onUnDisplay)};return t}();var e=function(){function t(){}return t}();var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.animationxuanzhong.visible=false;this.yeqianbtn[app.SoundManager.NO_BUTTON_MUSIC]=1};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.curCfg=t;this.yeqianbtn.label=app.getLang(t.language);if(t.sheetres==""||t.sheetres==undefined){this.yeqianimg.skin="res/static/mainlisticon/bg_zhuangbei.png"}else{this.yeqianimg.skin="res/static/mainlisticon/"+t.sheetres+".png"}this.yeqianbtn.selected=e;this.showcirle(false);if(this.boRed){game.RedDotView.addTo(this,90,10)}else{game.RedDotView.removeFrom(this)}};Object.defineProperty(e.prototype,"model",{get:function(){return h.ChartModel.getIns()},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"boRed",{get:function(){return this.model.jiguanHasRed(this.curCfg.jiguanid)},enumerable:true,configurable:true});e.prototype.showcirle=function(t){this.animationxuanzhong.visible=t;if(t){this.animationxuanzhong.play()}else{this.animationxuanzhong.stop()}};return e}(ui.main.mainyeqianitemUI)})(chart||(chart={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(r.ChatView,"liaotian.atlas");app.ViewManager.regist(r.ChatMiniView,"liaotian.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.CHAT,r.ChatView,null,6)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.ChattingResponse,this,this.onChattingResponse);this.addMsgListener(app.ProtocolResponse.SysNewNoticeParamNtf,this,this.onSysNewNoticeParamNtf);this.addMsgListener(app.ProtocolResponse.RoleArenaRecordNtf,this,this.onRoleArenaRecordNtf);this.addMsgListener(app.ProtocolResponse.AddRoleArenaRecordNtf,this,this.onAddRoleArenaRecordNtf);game.RoleModel.getIns().on(game.RoleModel.EVENTS.INFO_INIT,this,this.registerNotice);this._model=r.ChatModel.getIns();this._model.on(r.ChatModel.CHAT_ITEM_SHOW,this,this.showItem);this._model.on(r.ChatModel.CHAT_GM_ADD_ITEM,this,this.addGm)};e.prototype.showItem=function(t){app.ViewManager.toggleDialog(r.ChatView,1,0)};e.prototype.addGm=function(){app.ViewManager.toggleDialog(r.ChatView,1,0)};e.prototype.onAddRoleArenaRecordNtf=function(t,e){this.onPKSysNotice(e.addrd[0])};e.prototype.onRoleArenaRecordNtf=function(t,e){this.onPKSysNotice(e.rd[0])};e.prototype.onPKSysNotice=function(t){if(t&&!Uint64.equal(game.Context.mainRoleId,t.rid)){var e=new SysNewNoticeParamNtf;e.msgID=13;e.noticeChannel=0;e.msgParam=[];var i=game.Context.getServerTime()-t.atime;var n="";if(i>0){n=util.TimeUtil.getOfflineDay(i,"offline_day","interval_hour","interval_min","offline_sec")}e.msgParam.push(r.ChatModel.getIns().addSysMsgParam(r.ChatModel.SYS_MSG_TYPE.TEXT,n));e.msgParam.push(r.ChatModel.getIns().addSysMsgParam(r.ChatModel.SYS_MSG_TYPE.USER_NAME_LINK,t.rid.toString10(),t.name,t.headframeId+""));e.msgParam.push(r.ChatModel.getIns().addSysMsgParam(r.ChatModel.SYS_MSG_TYPE.TEXT,t.rflag==1?app.getLang("pkmessage_win"):app.getLang("pkmessage_lose")));e.msgParam.push(r.ChatModel.getIns().addSysMsgParam(r.ChatModel.SYS_MSG_TYPE.TEXT,t.sword.toString10()));r.ChatModel.getIns().onSysNewNoticeParamNtf(e)}};e.prototype.onSysNewNoticeParamNtf=function(t,e){r.ChatModel.getIns().onSysNewNoticeParamNtf(e)};e.prototype.onChattingResponse=function(t,e){r.ChatModel.getIns().dell(e)};e.prototype.registerNotice=function(){r.ClientNoticeModel.getIns().initKuafuNotice()};e.SINGLE_KEY="chat.ChatModule";return e}(app.ModuleBase);r.ChatModule=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(l){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._boLink=false;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.lblDes=new Laya.HTMLDivElement;this.lblDes.color=game.STYLES.CHAT_FONT;this.lblDes.x=l.ChatStatic.NAME_X+l.ChatStatic.DES_X_OFF;this.lblDes.y=this.imgbg.y+l.ChatStatic.DES_Y_OFF;this.lblDes.style.fontSize=l.ChatStatic.FONT_SIZE;this.lblDes.style.font=game.STYLES.FONT;this.lblDes.style.leading=l.ChatStatic.LINE_SPACE;this.lblDes.style.bold=true;this.addChild(this.lblDes);this.imghead.on(Laya.Event.CLICK,this,this.onShowPlayer);this.lblDes.on(Laya.Event.CLICK,this,this.onClick);this.lblDes.on(Laya.Event.LINK,this,this.onHandler)};t.prototype.onClick=function(t){if(this._boLink){t.stopPropagation();this._boLink=false}};t.prototype.onHandler=function(t){this._boLink=true;l.ChatStatic.dellLink(t);l.ChatModel.getIns().boOpenTip=true};t.prototype.onShowPlayer=function(){var t=friend.FriendModel.getCommonTypeArr(this.vo.uid,this.vo.channel);friend.FriendModel.getIns().setFriendMenu(t,this.vo.uid,this.vo.name,this.vo.level,this.vo.classSkin,this.vo.headframeId);l.ChatModel.getIns().boOpenTip=true};t.prototype.setData=function(t,e,i){this.vo=t;var n=csv.ChatBubbleProxy.getIns().getCfg(t.simplebubbleid);this.imgbg.sizeGrid=n.sizegrid;this.imgbg.skin=csv.ChatBubbleProxy.getIns().getBubbleIcon(n.id);this.lblDes.width=e-l.ChatStatic.NAME_X*2-l.ChatStatic.DES_X_OFF;var r=i.t;r=l.ChatLine.dellBiaoqing(r);var o=l.ChatLine.dellJsonInfo(r,t,true,i.ext);l.ChatStatic.dellPlayer(t,this.lblname,this.imghead,this.imgframe);this.lblDes.appendHTML(o[1]);l.ChatLine.addImag(this.lblDes);var a=this.lblDes.contextWidth+l.ChatStatic.DES_X_OFF*2+l.ChatStatic.SPACE_W;this.imgbg.width=a<l.ChatStatic.MIN_W?l.ChatStatic.MIN_W:a;var s=this.lblDes.contextHeight+l.ChatStatic.DES_Y_OFF+l.ChatStatic.SPACE_H;this.imgbg.height=s<l.ChatStatic.MIN_H?l.ChatStatic.MIN_H:s;this.width=e;this.height=this.imgbg.height+this.imgbg.y+l.ChatStatic.LINE_SPACE-l.ChatStatic.SPACE_H;l.ChatStatic.dellGuajian(this.list,t.magicPlugin,30,t.uid);this.list.x=this.lblname.x+this.lblname.contextWidth+5};return t}(ui.liaotian.liaotianitem01UI);l.ChatHeadLine=t;var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._boLink=false;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.lblDes=new Laya.HTMLDivElement;this.lblDes.color=game.STYLES.CHAT_FONT;this.lblDes.x=l.ChatStatic.DES_X_OFF;this.lblDes.y=this.imgbg.y+l.ChatStatic.DES_Y_OFF;this.lblDes.style.fontSize=l.ChatStatic.FONT_SIZE;this.lblDes.style.font=game.STYLES.FONT;this.lblDes.style.leading=l.ChatStatic.LINE_SPACE;this.lblDes.style.bold=true;this.addChild(this.lblDes);this.lblDes.on(Laya.Event.CLICK,this,this.onClick);this.lblDes.on(Laya.Event.LINK,this,this.onHandler)};t.prototype.onClick=function(t){if(this._boLink){t.stopPropagation();this._boLink=false}};t.prototype.onHandler=function(t){this._boLink=true;l.ChatStatic.dellLink(t);l.ChatModel.getIns().boOpenTip=true};t.prototype.setData=function(t,e,i){this.vo=t;var n=csv.ChatBubbleProxy.getIns().getCfg(t.simplebubbleid);this.imgbg.sizeGrid=n.sizegrid;this.imgbg.skin=csv.ChatBubbleProxy.getIns().getBubbleIcon(n.id);this.lblDes.width=e-l.ChatStatic.NAME_X*2-l.ChatStatic.DES_X_OFF;this.imgbg.x=e-l.ChatStatic.NAME_X;this.lblname.x=this.imgbg.x+2;this.imgKuang.x=e-this.imgKuang.width*this.imgKuang.scaleX;this.imgframe.x=e-35;var r=i.t;r=l.ChatLine.dellBiaoqing(r);var o=l.ChatLine.dellJsonInfo(r,t,true,i.ext);l.ChatStatic.dellPlayer(t,this.lblname,this.imghead,this.imgframe);this.lblDes.appendHTML(o[1]);l.ChatLine.addImag(this.lblDes);var a=this.lblDes.contextWidth+l.ChatStatic.DES_X_OFF*2+l.ChatStatic.SPACE_W;this.imgbg.width=a<l.ChatStatic.MIN_W?l.ChatStatic.MIN_W:a;this.lblDes.x=this.imgbg.x-l.ChatStatic.DES_X_OFF-this.lblDes.contextWidth;var s=this.lblDes.contextHeight+l.ChatStatic.DES_Y_OFF+l.ChatStatic.SPACE_H;this.imgbg.height=s<l.ChatStatic.MIN_H?l.ChatStatic.MIN_H:s;this.width=e;this.height=this.imgbg.height+this.imgbg.y+l.ChatStatic.LINE_SPACE-l.ChatStatic.SPACE_H;l.ChatStatic.dellGuajian(this.list,t.magicPlugin,30,t.uid);this.list.x=this.lblname.x-this.lblname.contextWidth-this.list.width-5};return t}(ui.liaotian.liaotianitem02UI);l.ChatHeadLineM=e})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(w){var t=function(i){__extends(t,i);function t(t){if(t===void 0){t=true}var e=i.call(this)||this;e.boDark=true;e._boLink=false;e.boDark=t;e.lblDes.color=e.boDark?game.STYLES.CHAT_FONT:game.STYLES.DESC_TXT_COLOR_S;return e}t.prototype.initialize=function(){i.prototype.initialize.call(this);this.lblDes=new Laya.HTMLDivElement;this.lblDes.x=0;this.lblDes.style.fontSize=w.ChatStatic.FONT_SIZE;this.lblDes.style.font=game.STYLES.FONT;this.lblDes.style.leading=w.ChatStatic.LINE_SPACE;this.lblDes.style.bold=true;this.addChild(this.lblDes);this.lblDes.on(Laya.Event.CLICK,this,this.onClick);this.lblDes.on(Laya.Event.LINK,this,this.onHandler)};t.prototype.onClick=function(t){if(this._boLink){t.stopPropagation();this._boLink=false}};t.prototype.onHandler=function(t){this._boLink=true;w.ChatStatic.dellLink(t,this.vo.channel);w.ChatModel.getIns().boOpenTip=true};t.prototype.setData=function(t,e,i){this.vo=t;this.lblDes.width=e;var n="";n=w.ChatLine.dellChannel(n,t.channel);var r=i.t;r=w.ChatLine.dellBiaoqing(r,45,45);var o=w.ChatLine.dellJsonInfo(r,t,this.boDark,i.ext);if(o[0]==0){n=w.ChatLine.dellPlayer(n,t,this.boDark)}this.lblDes.appendHTML(n+o[1]);w.ChatLine.addImag(this.lblDes,45,45);this.width=e;this.height=this.lblDes.contextHeight};t.prototype.setData2=function(t,e){this.vo=t;this.lblDes.width=e;var i="";i=w.ChatLine.dellChannel(i,t.channel);this.lblDes.appendHTML(i+t.t);w.ChatLine.addImag(this.lblDes);this.width=e;this.height=this.lblDes.contextHeight};t.dellChannel=function(t,e){t+='<img width="57px" height="20px" >pindao_'+e+"</img>";return t};t.dellPlayer=function(t,e,i){var n=i?game.STYLES.BLUE_COLOR:game.STYLES.BLUE_BTN_COLOR_S;if(e.uid){if(Uint64.equal(e.uid,game.Context.mainRoleId)){if(e.channel==w.ChatModel.CHANNEL.KUAFU){t+='<span color="'+n+'">['+game.Context.getSerName(e.cursvrid)+e.name+"]</span>"}else{t+='<span color="'+n+'">['+e.name+"]</span>"}}else{var r=w.ChatStatic.ENUM_HREF.PLAER+"-"+e.uid.toString10()+"-"+e.name+"-"+e.level+"-"+e.classSkin+"-"+e.headframeId;if(e.channel==w.ChatModel.CHANNEL.KUAFU){t+='<span color="'+n+'" href="'+r+'">['+game.Context.getSerName(e.cursvrid)+e.name+"]</span>"}else{t+='<span color="'+n+'" href="'+r+'">['+e.name+"]</span>"}}t+='<img width="10px" >10</img>'}return t};t.dellJsonInfo=function(t,e,i,n){var r=t;var o=0;if(n){var a=JSON.parse(n);if(a.showId){var s=game.ItemUtil.createVO(a.itemId);var l=i?game.STYLES.ITEM_QUALITY[a.quality]:game.STYLES.ITEM_QUALITY_S[a.quality];var u=csv.ItemProxy.getName(s.itemCfg);var p=w.ChatStatic.ENUM_HREF.ITEM_SHOW+"-"+a.showId;r+='<span color="'+l+'" href="'+p+'">'+u+"</span>"}else if(a.taskindex){var s=game.ItemUtil.createVO(a.itemId);var l=i?game.STYLES.ITEM_QUALITY[s.getQuality()]:game.STYLES.ITEM_QUALITY_S[s.getQuality()];var h=s.getName();var p=w.ChatStatic.ENUM_HREF.ITEM+"-"+s.getItemId();var c="<span color='"+l+"' href='"+p+"'>"+h+"</span>";var f="<span color='"+l+"' href='"+(w.ChatStatic.ENUM_HREF.TASK_ASSIST+"-"+a.roleId+"-"+a.taskindex)+"'>"+app.getLang("guild_21")+"</span>";r+=app.getLang("guild_19",c,a.count,f)}else if(a.itemId){var s=game.ItemUtil.createVO(a.itemId);var l=i?game.STYLES.ITEM_QUALITY[s.getQuality()]:game.STYLES.ITEM_QUALITY_S[s.getQuality()];var g=csv.ItemProxy.getName(s.itemCfg);var p=w.ChatStatic.ENUM_HREF.ITEM+"-"+a.itemId;if(s.itemCfg.type==csv.ItemProxy.TYPES.HULU_FULI_PACKAGE){p+="-"+a.total_recharge}else if(s.itemCfg.type==csv.ItemProxy.TYPES.SEVEN_GOLD){var d=a;p+="-"+d.startUseTime+"-"+d.endUseTime+"-"+d.count}r+='<span color="'+l+'" href="'+p+'">'+g+"</span>"}else if(a.fb_itemId){var s=game.ItemUtil.createVO(a.fb_itemId);var l=i?game.STYLES.ITEM_QUALITY[s.getQuality()]:game.STYLES.ITEM_QUALITY_S[s.getQuality()];var y=csv.ItemProxy.getName(s.itemCfg);var p=w.ChatStatic.ENUM_HREF.FA_BAO_SHOW+"-"+a.fb_itemId+"-"+a.fb_star+"-"+a.fb_lv;r+='<span color="'+l+'" href="'+p+'">'+y+"</span>"}else if(a.ddr){var m=app.getLang("magic_gacha_tips4",a.ddr.luck);var v="";v+=a.ddr.luck+"-";v+=a.ddr.time+"-";v+=a.ddr.playername+"-";v+=a.ddr.items+"-";var p=w.ChatStatic.ENUM_HREF.TEN_FABAO+"-"+v;var l=i?game.STYLES.YELLOW_COLOR:game.STYLES.YELLOW_COLOR_S;r+='<span color="'+l+'" href="'+p+'">'+m+"</span>"}else if(a.petshow){var b=app.getLang(csv.PetProxy.getIns().getPetCfg(a.petshow.petid).namelang);var v="";v+=a.petshow.petid+"-";v+=a.petshow.star+"-";v+=a.petshow.plevel+"-";v+=a.petshow.prop;var p=w.ChatStatic.ENUM_HREF.PET+"-"+v;var l=i?game.STYLES.YELLOW_COLOR:game.STYLES.YELLOW_COLOR_S;r+='<span color="'+l+'" href="'+p+'">'+b+"</span>"}else if(a.teamId){o=1;var _=csv.TeamProxy.getIns().getCfg(a.copyId);var p=w.ChatStatic.ENUM_HREF.TEAM+"-"+a.teamId+"-"+a.copyId;var l=i?game.STYLES.YELLOW_COLOR:game.STYLES.YELLOW_COLOR_S;r+=app.getLang("<span color='"+l+"'>{0}</span>正在召集队友参与<span color='"+l+"'>{1}</span>，有意者快加入队伍！！",e.name,app.getLang(_.roomname));l=i?game.STYLES.GREEN_COLOR:game.STYLES.GREEN_COLOR_S;r+='<span color="'+l+'" href="'+p+'">申请加入</span>'}else if(a.bossId){var I=csv.HelpProxy.getIns().getHelpById(a.helpId);var p=w.ChatStatic.ENUM_HREF.BOSS_HLEP+"-"+a.helpId+"-"+I.function+"-"+a.bossId;r+=app.getLang(I.des,e.name,p,a.bossName)}}return[o,r]};t.dellBiaoqing=function(t,e,i){if(e===void 0){e=0}if(i===void 0){i=0}var n="";var r=t.split(w.ChatStatic.BiaoQingExp);var o=t.match(w.ChatStatic.BiaoQingExp);for(var a=0,s=r.length;a<s;++a){n+=r[a];if(o&&o[a]){var l=o[a];var u=csv.BiaoqingProxy.getIns().getCfg(l);if(u){n+='<img width="'+(e>0?e:u.width)+'px" height="'+(i>0?i:u.height)+'px" >'+l+"</img>"}else{n+=l}}}return n};t.addImag=function(t,e,i){if(e===void 0){e=0}if(i===void 0){i=0}var n="";var r;if(t._childs!=undefined){for(var o=0,a=t._childs.length;o<a;o++){r=t.getChildAt(o);if(r){n=r.text;if(n&&n.indexOf("pindao")!=-1){var s=parseInt(n.replace("pindao_",""));var l=new Laya.Image;l.x=r.x;l.y=r.y;switch(s){case w.ChatModel.CHANNEL.SYSTEM:l.skin="main/bg_pindao_xitong.png";break;case w.ChatModel.CHANNEL.WORLD:l.skin="main/bg_pindao_shijie.png";break;case w.ChatModel.CHANNEL.FAMILY:l.skin="main/bg_pindao_banghui.png";break;case w.ChatModel.CHANNEL.TEAM:l.skin="main/bg_pindao_duiwu.png";break;case w.ChatModel.CHANNEL.KUAFU:l.skin="main/bg_pindao_kuafu.png";break;case w.ChatModel.CHANNEL.PK:l.skin="main/bg_pindao_qiecuo.png";break;default:l.skin="";break}t.addChild(l)}if(n&&n.match(w.ChatStatic.BiaoQingExp)&&n.match(w.ChatStatic.BiaoQingExp).length>0){var u=this.getBiaoqing(n,e,i);if(u){u.x=r.x;u.y=r.y;t.addChild(u)}}}}}};t.getBiaoqing=function(t,e,i){if(e===void 0){e=0}if(i===void 0){i=0}var n=csv.BiaoqingProxy.getIns().getCfg(t);if(!n){return null}var r=new Laya.Clip;r.skin="res/biaoqing/"+n.res+".png";r.width=e>0?e:n.width;r.height=i>0?i:n.height;r.clipX=n.clipx;r.clipY=n.clipy;r.autoPlay=true;r.interval=120;return r};return t}(Laya.View);w.ChatLine=t})(chat||(chat={}));var chat;(function(o){var t=function(){function T(){}T.dellLink=function(t,e){if(e===void 0){e=0}var i=app.str2Array(t,"-");var n=parseInt(i[0]);var r=i[1];switch(n){case T.ENUM_HREF.PLAER:var o=new Uint64;o.fromString10(r);var a=friend.FriendModel.getCommonTypeArr(o,e);friend.FriendModel.getIns().setFriendMenu(a,o,i[2],parseInt(i[3]),parseInt(i[4]),parseInt(i[5]));break;case T.ENUM_HREF.ITEM:var s=parseInt(r);var l=game.ItemUtil.createVO(s);var u=csv.ChouKaProxy.getIns().getBaseCfg(s);if(u){var p={};p.star=0;p.level=0;p.source=fabaonew.EFabaoSource.Chat;l.ext=p}else if(l.itemCfg.type==csv.ItemProxy.TYPES.HULU_FULI_PACKAGE){var h={};h.total_recharge=parseInt(i[2]);l.ext=h}else if(l.itemCfg.type==csv.ItemProxy.TYPES.SEVEN_GOLD){var c={};c.startUseTime=parseInt(i[2]);c.endUseTime=parseInt(i[3]);c.count=parseInt(i[4]);l.ext=c}tip.TipManager.show(l,true,true);break;case T.ENUM_HREF.FA_BAO_SHOW:var f=parseInt(r);var g=game.ItemUtil.createVO(f);var d={};g.ext=d;d.source=fabaonew.EFabaoSource.Chat;d.star=parseInt(i[2]);d.level=parseInt(i[3]);tip.TipManager.showByBtnType(g);break;case T.ENUM_HREF.PET:var y=new pet.PetVO(Uint64.ZERO,parseInt(i[1]));y.star=parseInt(i[2]);y.plevel=parseInt(i[3]);y.prop=[];var m=void 0;var v=app.str2Array(i[4],";","@");for(var b=0;b<v.length;b++){if(v[b].length>1){m=new PetPropRand;m.rand=parseInt(v[b][0]);m.tal=parseInt(v[b][1]);m.val=parseInt(v[b][2]);y.prop.push(m)}}tip.TipManager.showPet(y,[]);break;case T.ENUM_HREF.TEN_FABAO:app.ViewManager.toggleDialog(chouka.BencilianbaoUI,1,0,i);break;case T.ENUM_HREF.ITEM_SHOW:var _=parseInt(r);app.ProtocolRequest.ShowItemInfoReq(_);break;case T.ENUM_HREF.TEAM:var I=Uint64.fromString16(r);var w=parseInt(i[2]);if(!team.TeamModel.getIns().hasTeam){var L=csv.TeamProxy.getIns().getCfg(w);if(L.id==3){if(team.TeamZhanyouModel.getIns().checkInCD()){manager.FlowManager.instance.flowByStyle1(app.getLang("zy_Error_CDTime"));return}}else if(L.daliytimeid!=0){if(!dailytask.DailyTimeUtil.checkTime(L.daliytimeid,true)){return}}app.ProtocolRequest.TeamApplyReq(I)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("teamin_tip"))}break;case T.ENUM_HREF.FUNC:var S=parseInt(r);if(csv.FunctionsProxy.getIns().isOpen(S,true)){var A=void 0;if(i.length>2){A="";for(var b=2;b<i.length;b++){if(b<i.length-1){A+=i[b]+"-"}else{A+=i[b]}}game.WindowsResigter.call(S,true,false,A)}else{game.WindowsResigter.call(S)}}break;case T.ENUM_HREF.TASK_ASSIST:var E=new Uint64;E.fromString10(i[1]);var P=parseInt(i[2]);if(!Uint64.equal(E,game.Context.mainRoleId)){guild.GuildController.getIns().onSubGuildQuestItemReq(E,P)}break;case T.ENUM_HREF.BOSS_HLEP:var x=csv.HelpProxy.getIns().getHelpById(parseInt(r));if(i[2]=="1"){var C=parseInt(i[3]);if(csv.FunctionsProxy.getIns().isOpen(C,true)){var D=csv.BossProxy.getIns().getCfg(i[4]);var M=D.teamlv;if(x.magicpassive){M-=fabaonew.FaBaoNewModel.getIns().getPlayMode(x.magicpassive)}if(game.Context.isTeamLvReach(M,true)){game.WindowsResigter.call(C,true,false,i[4])}}}else{if(i[3]=="1"){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.SHOUHU_HULU)}}break}};T.dellPlayer=function(t,e,i,n){var r="";if(t.uid){if(t.channel==o.ChatModel.CHANNEL.KUAFU){r+=game.Context.getSerName(t.cursvrid)+t.name}else{r+=t.name}}if(e){e.text=r}if(i){i.skin=csv.MyTeamProxy.getIns().getTeamIcon(t.simpleteamavatar)}if(n){n.skin=csv.HeadFrameProxy.getIns().getIcon(t.headframeId)}return r};T.dellGuajian=function(t,e,i,n){var r=[];var o=e.length;if(!o){t.visible=false;t.width=0;t.array=[];return}else{t.visible=true}e.sort(SortUtil.sortNumeric);for(var a=0;a<o;a++){r.push(csv.GuajianProxy.getIns().getRes(e[a]))}t.array=r;t.width=o*i;if(n){if(Uint64.equal(n,game.Context.mainRoleId)){t.on(Laya.Event.CLICK,this,this.showMyself)}else{t.on(Laya.Event.CLICK,this,this.showPlayer,[n])}}};T.showMyself=function(t){game.RoleModel.getIns().boGuajian=true;Laya.Dialog.manager.closeAll();Laya.timer.once(200,this,this.laterMyselfCall)};T.laterMyselfCall=function(){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.ROLE_WUXING)};T.showPlayer=function(t){game.OtherRoleModel.getIns().boGuajian=true;game.OtherRoleModel.getIns().reOpenFuncId=game.WindowsResigter.getSelectFuncID();Laya.Dialog.manager.closeAll();Laya.timer.once(200,this,this.laterPlayerCall,[t])};T.laterPlayerCall=function(t){app.ProtocolRequest.GetShowPlayerReq(t)};T.BiaoQingExp=new RegExp("#[0-9][0-9]","g");T.FONT_SIZE=20;T.LINE_SPACE=10;T.NAME_X=88;T.DES_X_OFF=12;T.DES_Y_OFF=12;T.MIN_W=144;T.MIN_H=64;T.SPACE_W=50;T.SPACE_H=23;T.ENUM_HREF={ITEM:1,PLAER:2,TEAM:3,FUNC:4,ITEM_SHOW:5,TASK_ASSIST:6,FA_BAO_SHOW:7,TEN_FABAO:8,BOSS_HLEP:9,PET:10};return T}();o.ChatStatic=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._typeMap={};return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){var t=app.Config.getResById("biaoqing.csv");this.cfgMap=t.getMap("key");this.cfgArr=t.getArray()};t.prototype.getCfg=function(t){return this.cfgMap[t]};t.prototype.getTypeArr=function(){if(this._typeArr){return this._typeArr}this._typeArr=[];for(var t=0,e=this.cfgArr.length;t<e;++t){var i=this.cfgArr[t];var n=parseInt(i.type);if(this._typeArr.indexOf(n)==-1){this._typeArr.push(n)}if(!this._typeMap[n]){this._typeMap[n]=[]}this._typeMap[n].push(i)}};t.prototype.getBiaoqingByType=function(t){if(!this._typeMap[t]){this._typeMap[t]=[];for(var e=0,i=this.cfgArr.length;e<i;++e){var n=this.cfgArr[e];if(parseInt(n.type)==t){this._typeMap[t].push(n)}}}return this._typeMap[t]};t.SINGLE_KEY="csv.BiaoqingProxy";return t}(app.ModelBase);t.BiaoqingProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(k){var t=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t.boOpenTip=false;t.gmStr="";t._chatMap={};t._msgDict={};t._chatArr=[];t._keyArr=[];t._keyCount=0;t.hasNewPM=false;t._chatLineMap={};t._miniChatLineArr=[];return t}a.getIns=function(){return app.Singleton.getInstance(a)};a.prototype.init=function(){this._msgDict={};this.centerArr=[];this.channelLimit=[];var t=app.str2Array(game.Config.getParams(1183),";","-");for(var e=0,i=t.length;e<i;e++){var n=t[e];this.channelLimit[parseInt(n[0])]=parseInt(n[1])}};a.prototype.setShowMsg=function(t){this._showItem=t};a.prototype.setPetShowMsg=function(t){this._showPetItem=t};a.prototype.setShowDdr=function(t){this._showDdr=t};a.prototype.onShowItemAck=function(t,e){if(Uint64.equal(this._showItem.getInstId(),t)){this._showItem.showId=e;this.event(a.CHAT_ITEM_SHOW)}};a.prototype.addGm=function(t){if(t==game.GridsModel.EMPTY){console.log(t);return}this.gmStr="fetch "+t.getItemId()+" 1";this.event(a.CHAT_GM_ADD_ITEM)};Object.defineProperty(a.prototype,"showItem",{get:function(){return this._showItem},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"showDdr",{get:function(){return this._showDdr},enumerable:true,configurable:true});Object.defineProperty(a.prototype,"showPetInfo",{get:function(){return this._showPetItem},enumerable:true,configurable:true});a.prototype.clearShowItem=function(){this._showItem=undefined};a.prototype.clearShowDdr=function(){this._showDdr=undefined};a.prototype.clearShowPetInfo=function(){this._showPetItem=undefined};a.prototype.setBossHelpMsg=function(t,e,i,n){var r=JSON.stringify({helpId:e,bossId:i.toString(),bossName:n});var o={t:"",ext:r};var a=JSON.stringify(o);k.ChatModel.getIns().sendMsg(t,game.Context.mainRoleId,a,"")};a.prototype.setTeamMsg=function(t,e){var i=JSON.stringify({teamId:t.id.toString(),copyId:t.copyId});var n={t:"",ext:i};var r=JSON.stringify(n);k.ChatModel.getIns().sendMsg(e,game.Context.mainRoleId,r,"")};a.prototype.getMsgByType=function(t){return this._chatMap[t]||[]};a.prototype.getAllMsg=function(){return this._chatArr};a.prototype.getKey=function(){var t;if(this._keyArr.length>0){t=this._keyArr.shift()}else{t=this._keyCount++}return t};a.prototype.dellSysNotice=function(t){if(t.channel!=a.CHANNEL.SILIAO){this.lastChannel=t.channel}t["key"]=this.getKey();if(!this._chatMap[t.channel]){this._chatMap[t.channel]=[]}var e=this.channelLimit[t.channel]?this.channelLimit[t.channel]:20;if(this._chatMap[t.channel].length>=e){var i=this._chatMap[t.channel].shift();this._keyArr.push(i.key);if(this._chatLineMap[t.channel]){var n=this._chatLineMap[t.channel].shift();if(n&&n.parent){n.parent.removeChild(n);n=undefined}}}this._chatMap[t.channel].push(t);if(this._chatArr.length==4){this._chatArr.shift();var n=this._miniChatLineArr.shift();if(n&&n.parent){n.parent.removeChild(n);n=undefined}}this._chatArr.push(t);this.event(a.CHAT_MSG_CHANGE)};a.prototype.dell=function(t){if(friend.FriendModel.getIns().containsBlackList(t.uid)){return}if(t.channel!=a.CHANNEL.SILIAO){this.lastChannel=t.channel}t["key"]=this.getKey();if(!this._chatMap[t.channel]){this._chatMap[t.channel]=[]}var e=this.channelLimit[t.channel]?this.channelLimit[t.channel]:20;if(this._chatMap[t.channel].length>=e){var i=this._chatMap[t.channel].shift();this._keyArr.push(i.key);if(this._chatLineMap[t.channel]){var n=this._chatLineMap[t.channel].shift();if(n&&n.parent){n.parent.removeChild(n);n=undefined}}}this._chatMap[t.channel].push(t);if(t.channel==k.ChatModel.CHANNEL.SILIAO){this.handlerPMsg(t);return}if(this._chatArr.length==4){this._chatArr.shift();var n=this._miniChatLineArr.shift();if(n&&n.parent){n.parent.removeChild(n);n=undefined}}this._chatArr.push(t);this.event(a.CHAT_MSG_CHANGE)};a.prototype.handlerPMsg=function(t){var e;this.hasNewPM=false;if(!Uint64.equal(game.Context.mainRoleId,t.uid)){var i=this.getRecordsUid(t.uid.toString10());e={resp:t,flag:0,target:game.Context.mainRoleId.toString10()};if(this.isChatting(t.uid)){e.flag=1}this.hasNewPM=true;var n=app.ViewManager.DisplayedInStage(friend.HaoYouView.SINGLE_KEY);var r=app.ViewManager.DisplayedInStage(friend.HeiMingDanView.SINGLE_KEY);if(n||r){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.SILIAO)}i.push(e)}else{var i=this.getRecordsUid(this.chatObj.target);e=this.chatObj;i.push(e)}game.Context.setLocalStorageKey("pm",this._msgDict);this.event(a.CHAT_SILIAO_CHANGE,e)};a.prototype.isChatting=function(t){var e=app.ViewManager.DisplayedInStage(friend.SiLaioAlert.SINGLE_KEY);if(e&&Uint64.equal(friend.SiLaioAlert.getIns().dataSource[0],t)){return true}return false};a.prototype.getChatLineArr=function(t,e){var i=this.getMsgByType(t);if(!this._chatLineMap[t]){this._chatLineMap[t]=[]}for(var n=0,r=i.length;n<r;n++){if(!this._chatLineMap[t][n]){var o=void 0;if(i[n]instanceof ChattingResponse){var a=JSON.parse(i[n].chatmsg);if(a.ext&&JSON.parse(a.ext).teamId){o=new k.ChatLine;o.setData(i[n],e,a)}else{if(Uint64.equal(game.Context.mainRoleId,i[n].uid)){o=new k.ChatHeadLineM}else{o=new k.ChatHeadLine}o.setData(i[n],e,a)}this._chatLineMap[t][n]=o}else{o=new k.ChatLine;o.setData2(i[n],e);this._chatLineMap[t][n]=o}}}return this._chatLineMap[t]};a.prototype.getMiniChatLineArr=function(t){var e=this.getAllMsg();for(var i=0,n=e.length;i<n;i++){if(!this._miniChatLineArr[i]){if(e[i]instanceof ChattingResponse){var r=JSON.parse(e[i].chatmsg);var o=new k.ChatLine;o.setData(e[i],t,r);this._miniChatLineArr[i]=o}else{var o=new k.ChatLine;o.setData2(e[i],t);this._miniChatLineArr[i]=o}}}return this._miniChatLineArr};a.prototype.getSiLiaoChatLineArr=function(t,e){var i=this.getRecordsUid(e.toString10());var n=[];if(i&&i.length>0){for(var r=0,o=i.length;r<o;r++){var a=i[r].resp;i[r].flag=1;var s=new Uint64;s.fromString10(i[r].target);if(Uint64.equal(a.uid,e)&&Uint64.equal(s,game.Context.mainRole.insId)){var l=Laya.Pool.getItem("friend.SiLiaoAlertCell01");if(l==null){l=new friend.SiLiaoAlertCell01}l.setData(a,t);n.push(l)}else if(Uint64.equal(a.uid,game.Context.mainRole.insId)&&Uint64.equal(s,e)){var u=Laya.Pool.getItem("friend.SiLiaoAlertCell02");if(u==null){u=new friend.SiLiaoAlertCell02}u.setData(a,t);n.push(u)}}game.Context.setLocalStorageKey("pm",this._msgDict)}return n};a.prototype.appendChatLine=function(t,e){var i=t.resp;var n;if(!Uint64.equal(i.uid,game.Context.mainRoleId)){var r=Laya.Pool.getItem("friend.SiLiaoAlertCell01");if(r==null){r=new friend.SiLiaoAlertCell01}r.setData(i,e);n=r}else{var o=Laya.Pool.getItem("friend.SiLiaoAlertCell02");if(o==null){o=new friend.SiLiaoAlertCell02}o.setData(i,e);n=o}return n};a.prototype.sendMsg=function(t,e,i,n){if(t==a.CHANNEL.SILIAO){if(!Uint64.equal(game.Context.mainRoleId,e)){if(friend.FriendModel.getIns().containsBlackList(e)){manager.FlowManager.instance.flowByStyle1(app.getLang("你已经将对方拉黑"));return}app.ProtocolRequest.ChattingRequest(t,e,i);var r=new ChattingResponse;r.channel=a.CHANNEL.SILIAO;r.classSkin=game.Context.mainRole.prof;r.uid=game.Context.mainRoleId;r.name=game.Context.mainRole.playername;r.chatmsg=i;r.chatTime=game.Context.getServerTime();r.headframeId=game.RoleModel.getIns().headFrameId;r.simpleteamavatar=game.Context.teamAvatar;r.simplebubbleid=game.RoleModel.getIns().useBubbleId;r.magicPlugin=game.RoleModel.getIns().useGuajianIds;this.chatObj={resp:r,flag:1,target:e.toString10(),targetName:n}}}else{var o=JSON.parse(i);gamesdk.WXminiSDK.getIns().msgSecCheck(o.t);app.ProtocolRequest.ChattingRequest(t,e,i)}};a.prototype.getAllPM=function(){var t=[];if(Object.keys(this._msgDict).length==0){var e=game.Context.getLocalStorageKey("pm");if(e){this._msgDict=e}}for(var i in this._msgDict){var n=this._msgDict[i];var r=n.length;for(var o=r-1;o>=0;o--){var a=new Uint64;a.fromString10(n[o].target);if(Uint64.equal(a,game.Context.mainRoleId)||Uint64.equal(n[o].resp.uid,game.Context.mainRoleId)){t.push(n[o]);break}}}return t};a.prototype.hasUnReadMsg=function(){var t=false;var e=this.getAllPM();for(var i in e){if(e[i].flag==0){t=true;break}}this.hasNewPM=t;k.ChatModel.getIns().event(a.CHAT_UNREAD_MSG);return t};a.prototype.getMsgCount=function(t){var e=this.getRecordsUid(t.toString10());var i=0;if(e){for(var n=0;n<e.length;n++){var r=e[n].resp;var o=e[n].flag;var a=Uint64.format(e[n].target);if(Uint64.equal(a,game.Context.mainRoleId)){if(o==0){i++}}}}return i};a.prototype.getRecordsUid=function(t){if(Object.keys(this._msgDict).length==0){var e=game.Context.getLocalStorageKey("pm");if(e){this._msgDict=e}}var i=this._msgDict[t];if(!i){i=[];this._msgDict[t]=i}return i};a.prototype.addSysMsgParam=function(t){var e=[];for(var i=1;i<arguments.length;i++){e[i-1]=arguments[i]}var n=new SysMsgParam;n.type=t;n.params=[];var r;for(var o=0;o<e.length;o++){r=new StringCell;r.detal=e[o];n.params.push(r)}return n};a.prototype.showChat=function(t,e){var i={t:t,channel:e};this.dellSysNotice(i)};a.prototype.onSysNewNoticeParamNtf=function(t){var e;var i;var n;var r;var o="1";var a="1";var s="0";var l=t.msgParam;var u=[];var p=csv.SystemChatProxy.getIns().getsystemDicById(t.msgID);if(!p){console.log("跑马灯消息未定义：",t.msgID);return}var h=app.getLang(p.lang);var c=app.getLang(p.lang_chat);var f;if(l.length<=0){e=app.getLang(h);i=app.getLang(c)}else{f={};for(var g=0;g<l.length;g++){var d=l[g];if(d.type==k.ChatModel.SYS_MSG_TYPE.USER_NAME_LINK){var y=game.STYLES.BLUE_COLOR;n=d.params[0]?d.params[0].detal:"";r=d.params[1]?d.params[1].detal:"";s=d.params[2]?d.params[2].detal:"0";var m="";var v=new Uint64;v.fromString10(n);if(!Uint64.equal(game.Context.mainRoleId,v)){m=k.ChatStatic.ENUM_HREF.PLAER+"-"+n+"-"+r+"-"+o+"-"+a+"-"+s}var b='<span color="'+y+'">['+r+"]</span>";if(m.length>0){b='<span color="'+y+'" href="'+m+'">['+r+"]</span>"}u.push(b)}else if(d.type==k.ChatModel.SYS_MSG_TYPE.ITEM_LINK){var _=d.params[0].detal;var I=game.ItemUtil.createVO(parseInt(_));var w=game.STYLES.ITEM_QUALITY[I.getQuality()];var L=I.getName();var m=k.ChatStatic.ENUM_HREF.ITEM+"-"+_;var S="<span color='"+w+"' href='"+m+"'>"+L+"</span>";var A=I.itemCfg.reqLevel+"";u.push(S);if(Number(A)>0){u.push(A)}}else if(d.type==k.ChatModel.SYS_MSG_TYPE.ITEM_LINK_SERVER){var _=d.params[1].detal;var I=game.ItemUtil.createVO(parseInt(_));var w=game.STYLES.ITEM_QUALITY[d.params[2].detal];var L=I.getName();var m=k.ChatStatic.ENUM_HREF.ITEM_SHOW+"-"+d.params[0].detal;var S="<span color='"+w+"' href='"+m+"'>"+L+"</span>";var A=I.itemCfg.reqLevel+"";u.push(S);if(Number(A)>0){u.push(A)}}else if(d.type==k.ChatModel.SYS_MSG_TYPE.TEXT){u.push(app.getLang(d.params[0].detal))}else if(d.type==k.ChatModel.SYS_MSG_TYPE.JOB){var E=+d.params[0].detal;var P="";if(E==1){P="大娃"}else{P=util.TimeUtil.getChineseNum(E)+"娃"}u.push(app.getLang(P))}else if(d.type==k.ChatModel.SYS_MSG_TYPE.YUAN_SHEN){var x=+d.params[0].detal;var C=csv.YuanshenProxy.getIns().getXiulianCfgItem(x);var P=yuanshencode.YuanshenModel.getIns().getBigRealm(C.bigrealm)+yuanshencode.YuanshenModel.getIns().getSamllRealm(C.smallrealm);u.push(app.getLang(P))}else if(d.type==k.ChatModel.SYS_MSG_TYPE.ITEM_COUNT){if(parseInt(d.params[0].detal)>1){u.push(app.getLang("garden_tips_6","",d.params[0].detal))}else{u.push("")}}else if(d.type==k.ChatModel.SYS_MSG_TYPE.PET){var D=parseInt(d.params[0].detal);var M=csv.PetProxy.getIns().getPetCfg(D);var w=game.STYLES.ITEM_QUALITY[5];if(M){var T=app.getLang(M.namelang);var P="";P+=D+"-";P+=d.params[1].detal+"-";P+=d.params[2].detal+"-";for(var O=3;O<d.params.length;O++){P+=d.params[O].detal+"@";if((O+1)%3==0){P+=";"}}var m=k.ChatStatic.ENUM_HREF.PET+"-"+P;var N='<span color="'+w+'" href="'+m+'">'+T+"</span>";u.push(N)}}}e=app.getLang.apply(null,[h].concat(u));i=app.getLang.apply(null,[c].concat(u))}if(t.noticeChannel==1){main.WorldCenterView.getIns().showView(e,p.broadcast)}else{if(p.type==0){main.WorldCenterView.getIns().showView(e,p.broadcast);this.showChat(i,p.channel)}else if(p.type==1){this.showChat(i,p.channel)}else if(p.type==2){main.WorldCenterView.getIns().showView(e,p.broadcast)}}};a.prototype.showSiLiaoAlert=function(t){if(game.Context.isTeamLvReach(game.Config.getIntParams(1213),true)){app.ViewManager.toggleDialog(friend.SiLaioAlert,0,1,t)}};a.SINGLE_KEY="chat.ChatModel";a.CHAT_MSG_FROM_SYSTEM="chat_msg_form_system";a.CHAT_MSG_CHANGE="chat_msg_change";a.CHAT_ITEM_SHOW="chat_item_show";a.CHAT_GM_ADD_ITEM="chat_gm_add_item";a.CHAT_SILIAO_CHANGE="CHAT_SILIAO_CHANGE";a.CHAT_UNREAD_MSG="CHAT_UNREAD_MSG";a.chatNum=1;a.chatNumMax=3;a.chatTempNum=a.chatNumMax+1;a.SYS_MSG_TYPE={USER_NAME_LINK:1,ITEM_LINK:2,ITEM_LINK_SERVER:3,TEXT:4,JOB:5,ITEM_COUNT:6,YUAN_SHEN:7,PET:8};a.CHANNEL={SYSTEM:1,WORLD:2,FAMILY:3,TEAM:4,KUAFU:5,SILIAO:6};return a}(app.ModelBase);k.ChatModel=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.initKuafuNotice=function(){if(game.Context.getOpenServerDay()<csv.ActivityFunction.getIns().getOpenDay(csv.ActivityFunction.ENUM.KUAFU_BOSS)){return}var t=app.str2Array(game.Config.getParams(547),"-");var e=game.Config.getIntParams(548);var i=csv.ActivityFunction.getIns().getOpenTime(csv.ActivityFunction.ENUM.KUAFU_BOSS);var n=csv.ActivityFunction.getIns().getCloseTime(csv.ActivityFunction.ENUM.KUAFU_BOSS);var r=i-game.Context.getServerTime();if(r>=0){Laya.timer.once(r*1e3,this,this.setNotice,[t[0]],false)}r-=e;if(r>=0){Laya.timer.once(r*1e3,this,this.setNotice,[t[2]],false)}r=n-game.Context.getServerTime();if(r>=0){Laya.timer.once(r*1e3,this,this.setNotice,[t[1]],false)}r-=e;if(r>=0){Laya.timer.once(r*1e3,this,this.setNotice,[t[3]],false)}};e.prototype.setNotice=function(t){var e=new SysNewNoticeParamNtf;e.msgID=t;e.noticeChannel=0;e.msgParam=[];i.ChatModel.getIns().onSysNewNoticeParamNtf(e)};e.SINGLE_KEY="chat.ClientNoticeModel";return e}(app.ModelBase);i.ClientNoticeModel=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.helpMap={};var t=app.Config.getResById("help.csv");this.cfgMap=t.getMap("id");this.helpMap=t.getMapList("maptype","battletype")};e.prototype.getHelpEle=function(t,e){return this.helpMap[t][e][0]};e.prototype.getHelpById=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.HelpProxy";return e}(app.ModelBase);t.HelpProxy=e})(csv||(csv={}));var chat;(function(t){var e=function(){function i(){}i.decode=function(t){var e=new i;e.id=t["id"];e.lang=t["lang"];e.lang_chat=t["lang_chat"];e.type=t["type"];e.channel=t["channel"];e.broadcast=t["broadcast"];return e};return i}();t.SystemchatCsvVo=e})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.sysChatDic=new Laya.Dictionary;var t=app.Config.getResById("systemchat.csv");var e=t.getArray();for(var i=0;i<e.length;i++){var n=chat.SystemchatCsvVo.decode(e[i]);this.sysChatDic[n.id]=n}};e.prototype.getsystemDicById=function(t){return this.sysChatDic[t]};e.SINGLE_KEY="csv.SystemChatProxy";return e}(app.ModelBase);t.SystemChatProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(r){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.sendTime=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.clip=new Laya.Clip;this.clip.autoPlay=true;this.clip.interval=120;this.addChild(this.clip)};t.prototype.onClick=function(t){t.stopPropagation();if(!r.ChatBiaoqingView.getIns().boDirSend){r.ChatBiaoqingView.getIns().event(r.ChatBiaoqingView.BIAOQING_SELECT,this.dataSource.key)}else{this.sendMsg()}};t.prototype.sendMsg=function(){var t;if(csv.MapProxy.isInKuaFuMap()){t=r.ChatModel.CHANNEL.KUAFU}else{t=r.ChatModel.CHANNEL.WORLD}if(t==r.ChatModel.CHANNEL.WORLD){if(!game.Context.isTeamLvReach(game.Config.getIntParams(3),true)){return}}else if(t==r.ChatModel.CHANNEL.KUAFU){if(!game.Context.isTeamLvReach(game.Config.getIntParams(4),true)){return}}var e=game.Config.getIntParams(12)-(game.Context.getServerTime()-this.sendTime);if(e>0){manager.FlowManager.instance.flowByStyle1(app.getLang("chat_error4",e));return}var i={t:this.dataSource.key};var n=JSON.stringify(i);r.ChatModel.getIns().sendMsg(t,game.Context.mainRoleId,n,"");r.ChatModel.chatTempNum=r.ChatModel.chatNumMax+1;this.sendTime=game.Context.getServerTime()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t){this.clip.skin="res/biaoqing/"+t.res+".png";this.clip.clipX=t.clipx;this.clip.clipY=t.clipy;this.clip.width=t.width;this.clip.height=t.height;this.clip.x=(this.width-this.clip.width)/2;this.clip.y=(this.height-this.clip.height)/2};t.SINGLE_KEY="chat.ChatBiaoqingItem";return t}(ui.liaotian.biaoqingitemUI);r.ChatBiaoqingItem=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.chongwulist.itemRender=i.ChatBiaoqingItem;this.chongwulist.renderHandler=new Laya.Handler(this,this.onRender);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(t){t.stopPropagation()};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.BiaoqingProxy.getIns().getBiaoqingByType(1);this.chongwulist.array=t};e.SINGLE_KEY="chat.ChatBiaoqingView";e.BIAOQING_SELECT="biaoqing_select";return e}(ui.liaotian.biaoqingviewUI);i.ChatBiaoqingView=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chat;(function(o){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t._chatLineArr=[];t._chatMsgTotalHeight=0;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.UI_LAYER_NUME.CHAT;this.pindaopanel.vScrollBarSkin="";this.pindaopanel.vScrollBar.isVertical=true;this.pindaopanel.vScrollBar.elasticBackTime=600;this.pindaopanel.vScrollBar.elasticDistance=200;this._model=o.ChatModel.getIns();this._chatBiaoqing=o.ChatBiaoqingView.getIns();this.on(Laya.Event.RESIZE,this,this.resize);this.pindaopanel.on(Laya.Event.CLICK,this,this.onClick);this.initWArr=[this.pindaopanel.width,this.imgdiban.width];this.initWSpArr=[this.pindaopanel,this.imgdiban];this.initXArr=[];this.initXSpArr=[]};i.prototype.onClick=function(t){app.ViewManager.toggleDialog(o.ChatView,1,0)};i.prototype.resize=function(){this.x=0;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-this.height-ScreenAdapter.OFFSET_BOTTOM;var t=Laya.stage.width-750;this.width=i.WIDTH+t;for(var e=0;e<this.initWArr.length;e++){this.initWSpArr[e].width=this.initWArr[e]+t}for(var e=0;e<this.initXArr.length;e++){this.initXSpArr[e].x=this.initXArr[e]+t}};i.prototype.onDisplay=function(){this._model.on(o.ChatModel.CHAT_MSG_CHANGE,this,this.setChatLines);this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){this._model.off(o.ChatModel.CHAT_MSG_CHANGE,this,this.setChatLines);this.clearLine()};i.prototype.clearLine=function(){for(var t=0,e=this._chatLineArr.length;t<e;++t){this._chatLineArr[t].parent.removeChild(this._chatLineArr[t])}this._chatLineArr=[]};i.prototype.refreshAll=function(){this.setChatLines()};i.prototype.layout=function(){this.pindaopanel.vScrollBar.value=this.pindaopanel.vScrollBar.max=this._chatMsgTotalHeight-this.pindaopanel.height};i.prototype.setChatLines=function(t){if(t===void 0){t=true}this.resize();this._chatMsgTotalHeight=5;var e=this._model.getMiniChatLineArr(this.pindaopanel.width-o.ChatStatic.FONT_SIZE);for(var i=0,n=e.length;i<n;i++){var r=e[i];r.y=this._chatMsgTotalHeight;this._chatMsgTotalHeight+=r.height;this.pindaopanel.addChild(r)}if(t){this.layout()}};i.SINGLE_KEY="chat.ChatMiniView";i.WIDTH=625;i.HEIGHT=150;return i}(ui.liaotian.liaotianshouqinewUI);o.ChatMiniView=t})(chat||(chat={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chengzhanjijing;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){};e.prototype.initCommands=function(){};e.SINGLE_KEY="chengzhanjijing.ChengZhanJiJingModule";return e}(app.ModuleBase);t.ChengZhanJiJingModule=e})(chengzhanjijing||(chengzhanjijing={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chengzhanjijing;(function(t){var r;(function(t){t[t["CAN_T_LING_QU"]=0]="CAN_T_LING_QU";t[t["CAN_LINGQU"]=1]="CAN_LINGQU";t[t["IS_ALREADY_LINGQU"]=2]="IS_ALREADY_LINGQU";t[t["NOT_BUY"]=3]="NOT_BUY"})(r=t.E_CHENGZHANGJIJING_LINGQU_STATE||(t.E_CHENGZHANGJIJING_LINGQU_STATE={}));var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};Object.defineProperty(e.prototype,"subTime",{get:function(){var t=game.Context.getServerZeroTime(game.Context.mainRole.createTime);var e=parseInt(game.Config.getParams(361));var i=t+e*24*60*60;return i},enumerable:true,configurable:true});e.prototype.statrTime=function(){this.updateTime()};e.prototype.init=function(){};e.prototype.updateTime=function(){if(touzilic.TouZiLiCaiModel.getIns().info){if(this.isFinish()){activitytaren.ActivityTaRenModel.getIns().event(activitytaren.ActivityIconStatuManager.EVENET_ACTIVITY_STATUS_CHANGED);Laya.timer.clear(this,this.updateTime);return}}Laya.timer.once(1e3,this,this.updateTime)};e.prototype.isFinish=function(){return false};e.prototype.isLingQued=function(t){var e=touzilic.TouZiLiCaiModel.getIns().info;if(!e){return true}var i=e.award;if(!i){return true}if(i.indexOf(parseInt(t))!=-1){return true}return false};e.prototype.getLingQuStatus=function(t){if(!this.isBuyed){return r.NOT_BUY}if(this.isLingQued(t.id)){return r.IS_ALREADY_LINGQU}if(game.Context.teamLv>=parseInt(t.limit)){return r.CAN_LINGQU}return r.CAN_T_LING_QU};Object.defineProperty(e.prototype,"isBuyed",{get:function(){var t=touzilic.TouZiLiCaiModel.getIns().info;if(!t){return false}return t.ltype==touzilic.E_TOUZI_STATUS.BUYED},enumerable:true,configurable:true});e.prototype.isCanLingQu=function(){if(!touzilic.TouZiLiCaiModel.getIns().info){return false}var t=csv.ChengZhanJiJingProxy.getIns().array;for(var e=0;e<t.length;e++){var i=t[e];var n=this.getLingQuStatus(i);if(n==r.CAN_LINGQU){return true}}};e.prototype.isAllLingQu=function(){if(!touzilic.TouZiLiCaiModel.getIns().info){return false}var t=csv.ChengZhanJiJingProxy.getIns().array;for(var e=0;e<t.length;e++){var i=t[e];var n=this.getLingQuStatus(i);if(n!=r.IS_ALREADY_LINGQU){return false}}return true};e.SINGLE_KEY="chengzhanjijing.ChengZhanJiJingModel";e.EVENT_LING_QU_SUCCEED="EVENT_LING_QU_SUCCEED";return e}(app.ModelBase);t.ChengZhanJiJingModel=e})(chengzhanjijing||(chengzhanjijing={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("fund.csv");if(newshangcheng.NewShangChengModel.getIns().cztcStyle==1){var e=t.getArray();var i=[];for(var n=0;n<e.length;n++){var r=e[n];if(r.cfgid==0){i.push(r)}}this.array=i}else{this.array=t.getArray()}this.cfgMap=t.getMap("id")};e.prototype.getAllGold=function(){var t=this.array;var e=0;for(var i=0;i<t.length;i++){var n=t[i];var r=n.reward.split("-");e+=parseInt(r[1])}return e};e.prototype.getCfgList=function(t){var e=[];var i=this.array;for(var n=0;n<i.length;n++){if(i[n].cfgid==t){e.push(i[n])}}return e};e.SINGLE_KEY="csv.ChengZhanJiJingProxy";return e}(app.ModelBase);t.ChengZhanJiJingProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chengzhanjijing;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.btnchongzhi=this.btnqianwang;this.btnchongzhi.clickHandler=new Laya.Handler(this,this.onClickHandler);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=grids.GridView.CommonItemRender;this.btnweikaiqi.removeSelf()};e.prototype.onClickHandler=function(){if(this._status==s.E_CHENGZHANGJIJING_LINGQU_STATE.NOT_BUY){if(game.Context.teamLv<parseInt(this.cfg.limit)){manager.FlowManager.instance.flowByStyle1(app.getLang("chengzhangjijing_text_08"))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("chengzhangjijing_text_07"))}return}else if(this._status==s.E_CHENGZHANGJIJING_LINGQU_STATE.CAN_T_LING_QU){manager.FlowManager.instance.flowByStyle1(app.getLang("chengzhangjijing_text_08"));return}s.ChengZhanJiJingModel.getIns().once(s.ChengZhanJiJingModel.EVENT_LING_QU_SUCCEED,this,this.onLingQuSucceed);app.ProtocolRequest.AwardTouziReq(this.cfg.id)};e.prototype.onLingQuSucceed=function(){this.setData(this.cfg);huodong.HuoDongShangChengModel.getIns().event(huodong.HuoDongEvent.EVENT_RED_CHECK)};e.prototype.setData=function(t){if(!t){return}this.cfg=t;var e="";e="chengzhangjijing_text_01";var i=app.getLang("chengzhangjijing_text_04",t.limit);this.tishi.text=i;var n=app.getLang(e,game.Context.teamLv,t.limit);this.labelshuzi.text=n;var r=app.str2Array(t.reward,"-");var o=game.ItemUtil.createVO(parseInt(r[0]));o.setCount(parseInt(r[1]));this.gezilist.array=[o];var a=s.ChengZhanJiJingModel.getIns().getLingQuStatus(t);this._status=a;this.refreshByStatus(a)};Object.defineProperty(e.prototype,"redPoint",{set:function(t){if(t){game.RedDotView.addTo(this.btnchongzhi)}else{game.RedDotView.removeFrom(this.btnchongzhi)}},enumerable:true,configurable:true});e.prototype.refreshByStatus=function(t){var e=this,i=e.btnchongzhi,n=e.imgyilingqu;switch(t){case s.E_CHENGZHANGJIJING_LINGQU_STATE.CAN_LINGQU:i.label=app.getLang("chengzhangjijing_text_06");i.gray=false;i.visible=true;i.mouseEnabled=true;this.redPoint=true;n.visible=false;break;case s.E_CHENGZHANGJIJING_LINGQU_STATE.CAN_T_LING_QU:i.label=app.getLang("chengzhangjijing_text_05");i.gray=true;i.visible=true;i.mouseEnabled=true;n.visible=false;this.redPoint=false;break;case s.E_CHENGZHANGJIJING_LINGQU_STATE.NOT_BUY:if(game.Context.teamLv<parseInt(this.cfg.limit)){i.label=app.getLang("chengzhangjijing_text_05")}else{i.label=app.getLang("chengzhangjijing_text_06")}i.gray=true;i.visible=true;i.mouseEnabled=true;n.visible=false;this.redPoint=false;break;case s.E_CHENGZHANGJIJING_LINGQU_STATE.IS_ALREADY_LINGQU:n.visible=true;i.label=app.getLang("chengzhangjijing_text_06");this.redPoint=false;i.visible=false;break}};return e}(ui.xinshangcheng2.chengzhangjijinitem2UI);s.ChengZhanJiJingItemView=t})(chengzhanjijing||(chengzhanjijing={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chengzhanjijing;(function(u){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.targetIndex=0;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.model=newshangcheng.NewShangChengModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.libaolist=this.xiala;this.libaolist.itemRender=u.ChengZhanJiJingItemView;this.libaolist.renderHandler=new Laya.Handler(this,this.onRenderHandle);this.libaolist.vScrollBarSkin=" ";this.libaolist.repeatX=0;this.goumaibtn=this.touzibtn;this.goumaibtn.clickHandler=new Laya.Handler(this,this.onQuanWangHandler)};Object.defineProperty(t.prototype,"qianwangbtn",{get:function(){return this.goumaibtn},enumerable:true,configurable:true});t.prototype.onQuanWangHandler=function(){if(u.ChengZhanJiJingModel.getIns().isFinish()){manager.FlowManager.instance.flowByStyle1(app.getLang("chengzhangjijing_text_02"))}else{if(this.cfg){this.onPayHandler()}}};t.prototype.onPayHandler=function(){if(this.cfg)shop.ShopModel.getIns().chongzhi(this.cfg.id)};t.prototype.endTimeCallBack=function(){this.hideSubTime()};t.prototype.updateHandler=function(t){var e=util.TimeUtil.sec2Str(t)};t.prototype.hideSubTime=function(){};t.prototype.onRenderHandle=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){touzilic.TouZiLiCaiModel.getIns().on(touzilic.TouZiLiCaiModel.EVENT_INFO_REFRESH,this,this.onRefreshHandler);u.ChengZhanJiJingModel.getIns().on(u.ChengZhanJiJingModel.EVENT_LING_QU_SUCCEED,this,this.onLingQuSucceed);this.callLater(this.onInit)};t.prototype.onLingQuSucceed=function(){this.onRefresh()};t.prototype.onRefreshHandler=function(){this.onRefresh()};t.prototype.sortRefresh=function(t,e){if(t.id>e.id){return-1}else if(t.id<e.id){return 1}return 0};t.prototype.getCanLingquIndex=function(t){if(t){for(var e=0;e<t.length;e++){var i=u.ChengZhanJiJingModel.getIns().getLingQuStatus(t[e]);if(i==u.E_CHENGZHANGJIJING_LINGQU_STATE.CAN_LINGQU){return e}}}return 0};t.prototype.sortHandler=function(t){var e=[];var i=[];var n=[];var r=0;for(r=0;r<t.length;r++){var o=u.ChengZhanJiJingModel.getIns().getLingQuStatus(t[r]);if(o==u.E_CHENGZHANGJIJING_LINGQU_STATE.CAN_LINGQU){e.push(t[r])}}for(r=0;r<t.length;r++){var a=u.ChengZhanJiJingModel.getIns().getLingQuStatus(t[r]);if(a==u.E_CHENGZHANGJIJING_LINGQU_STATE.NOT_BUY){n.push(t[r])}}for(r=0;r<t.length;r++){var s=u.ChengZhanJiJingModel.getIns().getLingQuStatus(t[r]);if(s==u.E_CHENGZHANGJIJING_LINGQU_STATE.CAN_T_LING_QU){n.push(t[r])}}for(r=0;r<t.length;r++){var l=u.ChengZhanJiJingModel.getIns().getLingQuStatus(t[r]);if(l==u.E_CHENGZHANGJIJING_LINGQU_STATE.IS_ALREADY_LINGQU){i.push(t[r])}}e=e.concat(n);e=e.concat(i);return e};t.prototype.onRefresh=function(){if(!csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.CHENG_ZHAN_JIJING)){this.model.updateView();return}var t=csv.RechargeProxy.getIns().getCfgByType(csv.IRechargeType.ChengZhangJiJing);if(t){this.cfg=t}this.shuzhilab.text=csv.ChengZhanJiJingProxy.getIns().getAllGold().toString();this.goumaibtn.label=app.getLang("touzilicai_txt02",app.convert_Yuan(this.cfg.recharge));if(u.ChengZhanJiJingModel.getIns().isBuyed){this.hideSubTime();this.qianwangbtn.visible=true;this.qianwangbtn.gray=true;this.qianwangbtn.mouseEnabled=false;this.yigoumai=true}else{this.qianwangbtn.visible=true;this.qianwangbtn.mouseEnabled=true;this.qianwangbtn.gray=false;this.yigoumai=false}var e=this.sortHandler(csv.ChengZhanJiJingProxy.getIns().array);this.libaolist.array=e;this.targetIndex=this.getCanLingquIndex(e)};Object.defineProperty(t.prototype,"yigoumai",{set:function(t){this.yigoumaiimg.visible=t},enumerable:true,configurable:true});t.prototype.onInit=function(){this.onRefresh();this.libaolist.scrollTo(this.targetIndex)};t.prototype.onUnDisplay=function(){touzilic.TouZiLiCaiModel.getIns().off(touzilic.TouZiLiCaiModel.EVENT_INFO_REFRESH,this,this.onRefreshHandler);u.ChengZhanJiJingModel.getIns().off(u.ChengZhanJiJingModel.EVENT_LING_QU_SUCCEED,this,this.onLingQuSucceed)};return t}(ui.xinshangcheng2.chengzhangjijin2UI);u.ChengZhanJiJingView=t})(chengzhanjijing||(chengzhanjijing={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(h){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._init=true;t._oldCnt=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this._model=h.ChouKaModel.getIns();app.ViewManager.regist(h.ChouKaLianBaoView,"chouka.atlas");app.ViewManager.regist(h.MyLianbaoviewStyle1,"chouka.atlas");app.ViewManager.regist(h.MyLianbaoviewStyle2,"chouka.atlas");app.ViewManager.regist(h.Jiangliyulanview,"chouka.atlas");app.ViewManager.regist(h.DajitipView,"chouka.atlas");app.ViewManager.regist(h.Gongxihuodeview,"chouka.atlas");app.ViewManager.regist(h.BencilianbaoUI,"chouka.atlas");app.ViewManager.regist(h.Huodefabaoview,"chouka.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.CHOU_KA,h.ChouKaLianBaoView,null,game.ECommonType.COMMON_TYPE_5);var t=csv.ActivityTarenProxy.getIns().clientTypeCfgArr[activitytaren.ActivityTaRenType.XIANSHICHOUKA];for(var e=0;e<t.length;e++){game.WindowsResigter.registFunctionView(parseInt(t[e].functionid),h.ChouKaLianBaoUpView,null,game.ECommonType.COMMON_TYPE_5)}csv.FunctionsProxy.getIns().openFailCheck[csv.FunctionsProxy.ENUMS.CHOU_KA]=this.openFailCheck;csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.CHANGE,this,this.onRedDotChange);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onRedDotChange);activitytaren.ActivityTaRenModel.getIns().on(activitytaren.ActivityIconStatuManager.EVENT_ACRIVITY_SINGLE_VISIBLE,this,this.onShowHide)};t.prototype.onShowHide=function(t){if(t.client_type==activitytaren.ActivityTaRenType.XIANSHICHOUKA){var e=activitytaren.ActivityTaRenModel.getIns().iconMan.getActVOlist_by_client_type(activitytaren.ActivityTaRenType.XIANSHICHOUKA);if(this._model.isHasOpen(e)){game.ClosureManager.addLimit(t.functionid)}else{game.ClosureManager.removeLimit(t.functionid)}}};t.prototype.openFailCheck=function(){return};t.prototype.onRedDotChange=function(){var t=csv.FunctionsProxy.ENUMS.CHOU_KA;var e=h.ChouKaModel.getIns().getData(t);game.ClosureManager.removeDot(t);if(e&&e.free>0){game.ClosureManager.addDot(t)}var i=csv.ChouKaProxy.getIns().getCha(t,h.EChouKaType.Ten);if(game.GridsModel.getIns().hasEnoughItems(i.cost)){game.ClosureManager.addDot(t)}var n=activitytaren.ActivityTaRenModel.getIns().iconMan.getActVOlist_by_client_type(activitytaren.ActivityTaRenType.XIANSHICHOUKA);if(n&&n.length>0){for(var r=0;r<n.length;r++){game.ClosureManager.removeDot(n[r].funid);var o=csv.ChouKaProxy.getIns().getCha(n[r].funid,h.EChouKaType.Ten);if(game.GridsModel.getIns().hasEnoughItems(o.cost)){game.ClosureManager.addDot(n[r].funid);return}var a=h.ChouKaModel.getIns().getData(n[r].funid);if(a){var s=n[r].cfgList[0].p1;var l=s.split("-")[0];var u=a.recvNum;var p=a.drawtotal-u*l;if(p>=l){game.ClosureManager.addDot(n[r].funid);return}}}}};t.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.DailyDrawResp,this,this.onDailyDrawRespHandler);this.addMsgListener(app.ProtocolResponse.DailyDrawDataNtf,this,this.onDailyDrawDataNtfHandler)};t.prototype.pushSysNewNotice=function(t,e){var i=new SysNewNoticeParamNtf;i.msgID=e;i.msgParam=[];var n=new SysMsgParam;n.type=chat.ChatModel.SYS_MSG_TYPE.TEXT;n.params=[];var r=new StringCell;r.detal=game.Context.clearPlayerName(game.Context.mainRole.playername);n.params.push(r);i.msgParam.push(n);var o=new SysMsgParam;o.type=chat.ChatModel.SYS_MSG_TYPE.ITEM_LINK;o.params=[];var a=new StringCell;a.detal=t.toString();o.params.push(a);i.msgParam.push(o);chat.ChatModel.getIns().onSysNewNoticeParamNtf(i)};t.prototype.playNoticeCallBack=function(t){var e=h.ChouKaModel.getIns().getBetterItem(t);if(e.length){for(var i=0;i<e.length;i++){this.pushSysNewNotice(e[i],506)}}this._model.showTips(t,"playNoticeCallBack")};t.prototype.onDailyDrawRespHandler=function(t,e){if(e.result==1){if(h.ChouKaModel.getIns().isCloseAnim==false){var i=csv.ChouKaProxy.getIns().getCfg(e.gachaid);if(i.functionid==csv.FunctionsProxy.ENUMS.CHOU_KA){app.ViewManager.toggleView(h.MyLianbaoviewStyle1,app.AppContainer.flowLayer,1,[e])}else{app.ViewManager.toggleView(h.MyLianbaoviewStyle2,app.AppContainer.flowLayer,1,[e])}}else{h.ChouKaModule.getIns().playNoticeCallBack(e);this._model.isStartReqesutDaily=false}h.ChouKaModel.getIns().event(h.ChouKaModel.EVENT_REFRESH,{type:0,data:e});this.onRedDotChange()}else{this._model.isStartReqesutDaily=false}};t.prototype.onDailyDrawDataNtfHandler=function(t,e){for(var i=0;i<e.drawdata.length;i++){if(e.drawdata[i].functionid==csv.FunctionsProxy.ENUMS.CHOU_KA){var n=game.Context.getServerTime()-game.Context.mainRole.createTime;if(this._init){this._init=false;this._oldCnt=e.drawdata[i].drawtotal}else{var r=app.getLang("tomato").split(":");var o=parseFloat(r[0]);var a=parseInt(r[1]);if(n<=o*60){if(this._oldCnt<a&&e.drawdata[i].drawtotal>=a){login.LoginModel.getIns().event(login.LoginModel.EVENTS.TOMATO_SEND_REPORT,[gamesdk.EReportType.ChouKa30Min])}}}break}}h.ChouKaModel.getIns().push_data(e.drawdata);this.onRedDotChange()};t.SINGLE_KEY="chouka.ChouKaModule";return t}(app.ModuleBase);h.ChouKaModule=t})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(g){var t;(function(t){t[t["One"]=1]="One";t[t["Ten"]=2]="Ten"})(t=g.EChouKaType||(g.EChouKaType={}));var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.list=[];t.tipsList=[];t.curTime=0;t._ext={};t._fe={};t._isStartReqesutDaily=false;t.isCloseAnim=false;return t}i.getIns=function(){return app.Singleton.getInstance(i)};Object.defineProperty(i.prototype,"isStartReqesutDaily",{get:function(){return this._isStartReqesutDaily},set:function(t){this._isStartReqesutDaily=t},enumerable:true,configurable:true});i.prototype.init=function(){};i.prototype.push_data=function(t){this.list=t;for(var e=0;e<this.list.length;e++){var i=csv.ChouKaProxy.getIns().getCha(this.list[e].functionid,g.EChouKaType.One);if(this.list[e].count==parseInt(i.defendtimes)){this.list[e].count=0}}g.ChouKaModel.getIns().event(g.ChouKaModel.EVENT_INFO_UPDATE,{type:1,data:t})};i.prototype.getData=function(t){for(var e=0;e<this.list.length;e++){if(this.list[e].functionid==t){return this.list[e]}}};i.prototype.isHasOpen=function(t){for(var e=0;e<t.length;e++){if(t[e].isopen){return true}}return false};i.prototype.dailyDrawReq=function(t,e){this.isStartReqesutDaily=true;app.ProtocolRequest.DailyDrawReq(t,e)};i.prototype.onPayGold=function(t,e,i,n){if(e){shop.ShopModel.getIns().chongzhi()}else{this.dailyDrawReq(t.id,n);if(i){i.run()}}};i.prototype.onCanelGold=function(){};i.prototype.startChouKa=function(t,e,i,n,r){if(n===void 0){n=false}if(!this.isCloseAnim){if(Laya.timer.currTimer-this.curTime<3e3){return}this.curTime=Laya.timer.currTimer}this.curType=t;var o=csv.ChouKaProxy.getIns().getCha(e,t);var a=false;if(n&&t==g.EChouKaType.One){a=true}else{var s=game.ItemUtil.parserList(o.cost)[0];var l=game.GridsModel.getIns().getItemCount(s.itemCfg.id);if(l<s.count){var u=s.count-l;var p=game.ItemUtil.parserList(s.itemCfg.p4)[0];var h=p.count*u;var c=game.GridsModel.getIns().getItemCount(p.itemCfg.id);var f=game.STYLES.GREEN_COLOR_S;if(c<h){f=game.STYLES.RED_COLOR_S}game.Alert.show(app.getLang("chouka_05","<span color='"+f+"'>"+h+"</span>","<span color='"+game.STYLES.GREEN_COLOR_S+"'>"+u+"</span>",s.getHTMLName()),new Laya.Handler(this,this.onPayGold,[o,c<h,i,r]),new Laya.Handler(this,this.onCanelGold))}else{a=true}}if(a){this.dailyDrawReq(o.id,r);if(i){i.run()}}};i.prototype.showTips=function(t,e,i){if(e===void 0){e=""}if(i===void 0){i=true}this.tipsList=[];var n=t.reward;for(var r=0;r<n.length;r++){var o=n[r];var a=csv.ItemProxy.getIns().itemCfgMap[o.itemid];if(a.type==csv.ItemProxy.TYPES.FA_BAO){this.tipsList.push(o)}}this.popTips(i?t:null)};i.prototype.popTips=function(t){if(this.tipsList.length>0){if(!app.ViewManager.DisplayedInStage(g.Huodefabaoview.SINGLE_KEY)){app.ViewManager.pushToggleList(g.Huodefabaoview.SINGLE_KEY,Laya.Handler.create(this,function(){app.ViewManager.toggleView(g.Huodefabaoview,app.AppContainer.flowLayer,1,[t])}))}}else{if(t){var e=csv.ChouKaProxy.getIns().getCfg(t.gachaid);if(e){app.ViewManager.toggleDialog(g.Gongxihuodeview,1,0,t)}else{}}this.event(i.SHOW_TIP_END)}};i.prototype.getBetterItem=function(t){var e=[];if(t.reward){var i=4;for(var n=0;n<t.reward.length;n++){var r=t.reward[n];if(r.status==2){var o=csv.ItemProxy.getIns().itemCfgMap[r.itemid];if(o&&o.qua>i){var a=o.p1;e.push(a)}}var s=csv.ChouKaProxy.getIns().getBaseCfg(r.itemid);if(s){var o=csv.ItemProxy.getIns().itemCfgMap[r.itemid];if(o.qua>i){e.push(r.itemid)}}}}return e};i.prototype.getAttrValue=function(t){var e=t.split("-");return parseInt(e[3])};i.prototype.getAttrType=function(t){var e=t.split("-");return parseInt(e[0])};i.prototype.getWuXinAttr=function(t,e,i,n){if(n===void 0){n=false}var r;if(n){r=i.getmaxelements.split(";")}else{r=i.maxelements.split(";")}var o=[];for(var a=0;a<e.length;a++){var s=this.getAttrValue(e[a]);var l=this.getAttrValue(r[a]);t[a].setData(a,s,i.supportelements==a+1);var u=s/l;o.push(u)}return o};i.prototype.getWuXinAttr2=function(t,e,i){var n=[];for(var r=0;r<e.length;r++){var o=this.getAttrValue(e[r]);var a=this.getAttrValue(i[r]);var s=this.getAttrType(i[r]);var l=this.getMinedNum(a,s);var u="";if(l==-1||a==0){u=o>=a?app.getLang("mijingjiesuo_12",o,a):app.getLang("mijingjiesuo_13",o,a)}else{u=o>=a-l?app.getLang("mijingjiesuo_15",o,a,l):app.getLang("mijingjiesuo_16",o,a,l);a=a-l}t[r].setData(r,u,false);var p=o/a>1?1:o/a;n.push(p)}return n};i.prototype.getMinedNum=function(t,e){var i=0;var n=fabaonew.FaBaoNewModel.getIns().getPlayModeLv(fabaonew.Etask_type.SubMinjiValue);var r="";if(n==""&&r==""){return-1}var o=n.split(";");var a=r.split(";");for(var s=0;s<o.length;s++){var l=+o[s].split("-")[1];var u=this.getAttrType(o[s]);if(e==u){i=l}}for(var s=0;s<a.length;s++){var l=+a[s].split("-")[0];var u=this.getAttrType(a[s]);if(e==u){i=i+(t-i)*l/1e4}}return i};i.prototype.getNoReachWuxing=function(t,e){var i=[];for(var n=0;n<t.length;n++){var r=this.getAttrValue(t[n]);var o=this.getAttrValue(e[n]);var a=this.getAttrType(e[n]);var s=this.getMinedNum(o,a);if(s==-1||o==0){}else{o=o-s}var l=r/o>1?1:r/o;if(l!=1){i.push(t[n])}}return i};i.prototype.saveLvData=function(t){var e=this.getFabaoByEquip(t.magicCfgID);if(e){e.level=t.newLevel}};i.prototype.getFabaoByEquip=function(t){var e=fabaonew.FaBaoNewModel.getIns().magicCfgList;if(e){for(var i=0;i<e.length;i++){var n=e[i];if(n.cfg.id==t){return n}}}var r=new fabaonew.FaBaoNewVo;r.cfg=csv.ChouKaProxy.getIns().getBaseCfg(t);r.star=2;r.level=2;return r};i.prototype.getEquipData=function(t,e){var i=fabaonew.FaBaoNewModel.getIns();var n=i.magicEquiped;if(n){for(var r=0;r<n.length;r++){var o=n[r];if(o.combatPos==t&&o.index==e){return o}}}return};i.prototype.getIsEquiped=function(t){var e=fabaonew.FaBaoNewModel.getIns();var i=e.magicEquiped;if(i){for(var n=0;n<i.length;n++){var r=i[n];if(r.magicCfgID==t){return r}}}return};i.prototype.getEquipList=function(t){var e=[];var i=fabaonew.FaBaoNewModel.getIns();var n=i.magicEquiped;if(n){for(var r=0;r<n.length;r++){var o=n[r];if(o.combatPos==t){e.push(o)}}}return e};i.prototype.isEquip=function(t,e){var i=fabaonew.FaBaoNewModel.getIns();var n=i.magicEquiped;if(n){for(var r=0;r<n.length;r++){var o=n[r];if(o.magicCfgID==t&&o.combatPos!=e){return true}}}return};i.prototype.sortHandler=function(t,e){if(t.cfg.point<e.cfg.point){return-1}else if(t.cfg.point>e.cfg.point){return 1}return 0};i.prototype.pushData=function(t,e,i,n,r,o){if(i.cfg.role!=0&&game.Context.roleList[o-1].prof!=i.cfg.role){return}var a=false;var s=false;for(var l=0;l<e.length;l++){var u=e[l];if(u.magicCfgID==i.cfg.id){if(u.combatPos==o){a=true}else{s=true}}}if(a==false){if(t){t.push(i)}if(r){if(s==false){n.dress=i}}}};i.prototype.getEnableBagListByRoleIndex=function(t,e,i){var n=new fabaonew.FaoBaoSearchVo;n.roleIndex=t;var r=e;var o;if(i){o=[]}var a=fabaonew.FaBaoNewModel.getIns();var s=a.magicEquiped;var l=fabaonew.FaBaoNewModel.getIns().magicCfgList;if(l){for(var u=0;u<l.length;u++){var p=l[u];if(p.cfg.type==fabaonew.EFabaoNewType.ZhuDong&&p.isActive==1){this.pushData(r,s,p,n,o,t)}}}if(r&&r.length>0){r.sort(this.sortHandler)}return n};i.prototype.mShowTips=function(t,e,i,n,r){t.ext=this._ext;var o=this._fe;o.combatPos=i;o.index=n;o.magicCfgID=t.itemCfg.id;this._ext.extendData=o;tip.TipManager.showByBtnType(t,e,r)};i.prototype.tipHandler=function(t,e,i,n){var r=game.ItemUtil.parserList(n.cfg.id)[0];var o=this._fe;r.ext=this._ext;this._ext.extendData=o;o.combatPos=t;o.index=e;o.magicCfgID=r.itemCfg.id;tip.TipManager.showByBtnType(r,i)};i.prototype.openSelectBag=function(t,e,i){var n=[];g.ChouKaModel.getIns().getEnableBagListByRoleIndex(t,n);var r=n;app.ViewManager.toggleDialog(fabaonew.FabaoSelectBagView,1,0,[false,r,equip.ESelectBagType.TYPE_COST,undefined,undefined,undefined,new Laya.Handler(this,this.tipHandler,[t,e,i]),csv.ItemProxy.getIns().getBagTuiByID(game.GridsModel.BAG_FABAO_NEW),t])};i.prototype.getTypeImg=function(t){var e=csv.ChouKaProxy.getIns().getBaseCfg(t);switch(e.type){case 1:return"chouka/bg_fabao_zhu.png";case 2:return"chouka/bg_fabao_bei.png";case 3:return"chouka/bg_fabao_fang.png"}};i.prototype.getTitleImg=function(t){var e=csv.ChouKaProxy.getIns().getBaseCfg(t);switch(e.type){case 1:return"res/static/chouka/bg_title_02.png";case 2:return"res/static/chouka/bg_title_03.png";case 3:return"res/static/chouka/bg_title_04.png"}};i.prototype.hasItem=function(t){for(var e=0;e<t.length;e++){var i=t[e];var n=game.GridsModel.getIns().getItemCount(i.itemCfg.id);if(i.count>n){return false}}return true};i.prototype.isZhuLingOrNinYun=function(t){return this.isCanZhuLing(t)||this.isCanNinYun(t)};i.prototype.checkRoleHasRedZhuLingOrNinYun=function(t){for(var e=1;e<=equip.EquipStatic.FABAO_NUM;e++){var i=this.getEquipData(t,e);if(i){var n=this.getFabaoByEquip(i.magicCfgID);if(this.isZhuLingOrNinYun(n)){return true}}}return false};i.prototype.convertBtnType=function(t){var e=g.ChouKaModel.getIns().getFabaoByEquip(t);if(!this.isSpecial(t)&&e&&e.star>=e.cfg.star){return tip.TipManager.TIP_BTN_TYPE.FABAO_NEW_JUEXING}return tip.TipManager.TIP_BTN_TYPE.NIN_YUN};i.prototype.isCanZhuLing=function(t){if(!csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FA_BAO_ZHULING)){return false}if(t){if(this.isSpecial(t.cfg.id)){return false}var e=csv.FaBaoNewProxy.getIns().magic_updateMap[t.cfg.id];if(!e){return false}var i=csv.ChouKaProxy.getIns().getBaseCfg(t.cfg.id);if(!i){return false}if(i.bookshow==0){return false}if(t.level>=i.level){return false}var n=e[t.level+1];if(n){if(game.Context.teamLv<n.needteamlevel){return false}if(this.hasItem(game.ItemUtil.parserList(n.cost))){return true}}}return false};i.prototype.getPercent=function(t,e){var i=game.Config.getParams(e).split(";");for(var n=0;n<i.length;n++){var r=i[n].split("-");var o=parseInt(r[0]);var a=parseInt(r[1]);if(n==0&&t<o){return app.getLang("magic_gacha_tips3")}else{if(n+1<i.length){var s=i[n+1].split("-");var l=parseInt(s[0]);var u=parseInt(s[1]);if(t>=o&&t<l){return app.getLang("magic_gacha_tips2",a)}}else{return app.getLang("magic_gacha_tips2",a)}}}return""};i.prototype.isCanNinYun=function(t){if(!csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FA_BAO_SHENG_XING)){return false}if(this.isSpecial(t.cfg.id)){return false}if(t.cfg.bookshow==0){return false}var e=csv.FaBaoNewProxy.getIns().magic_star[t.cfg.id];if(!e){return false}var i=e[t.star+1];if(i){if(!this.hasItem(game.ItemUtil.parserList(i.cost))){return false}else{if(i.specialcost!=""){var n=i.specialcost.split(";");var r=0;for(var o=0;o<n.length;o++){var a=n[o];var s=new fabaonew.PieceTipVo;s.parse(a);if(s.isHasCost()){r++}}if(r>=n.length){return true}return false}else{return true}}}return false};i.prototype.isAwaken=function(t){var e=fabaonew.FaBaoNewModel.getIns().magicCfgMap[t];if(e.isActive&&e.star>=e.cfg.star+1){return true}return false};i.prototype.hasRedByType=function(t,e){switch(e){case tip.TipManager.TIP_BTN_TYPE.ZHU_NIN:return this.isCanZhuLing(t);case tip.TipManager.TIP_BTN_TYPE.NIN_YUN:case tip.TipManager.TIP_BTN_TYPE.FABAO_NEW_JUEXING:return this.isCanNinYun(t)}return false};i.prototype.isSpecial=function(t){return csv.ChouKaProxy.getIns().getBaseCfg(t).specialtype==1};i.prototype.getSpecIcon=function(t){var e="";var i=csv.ChouKaProxy.getIns().getBaseCfg(t);if(i.specialtype==1){e="public/bg_jiaobiao_te.png"}else{if(i.role!=0){e="public/bg_jiaobiao_zhuan.png"}}return e};i.prototype.getOpenFunidList=function(t){var e=[];for(var i=0;i<t.length;i++){var n=t[i];if(n==tip.TipManager.TIP_BTN_TYPE.NIN_YUN&&!csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FA_BAO_SHENG_XING)){}else if(n==tip.TipManager.TIP_BTN_TYPE.ZHU_NIN&&!csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FA_BAO_ZHULING)){}else{e.push(t[i])}}return e};i.prototype.fabaoShowTips=function(t,e){e=this.getOpenFunidList(e);var i=game.ItemUtil.parserList(t.cfg.id)[0];var n={};var r=t.cfg.specialtype==1;var o=[tip.TipManager.TIP_BTN_TYPE.NIN_YUN,tip.TipManager.TIP_BTN_TYPE.ZHU_NIN];var a=[];for(var s=0;s<e.length;s++){var l=e[s];if(l==tip.TipManager.TIP_BTN_TYPE.NIN_YUN){l=this.convertBtnType(i.getItemId())}if(r&&o.indexOf(l)!=-1){}else{a.push(l)}}var u=[];for(var s=0;s<a.length;s++){var p=a[s];u.push(this.hasRedByType(t,p))}n.btnList=a;n.itemvo=i;n.reds=u;return n};i.SINGLE_KEY="chouka.ChouKaModel";i.EVENT_REFRESH="EVENT_REFRESH";i.EVENT_INFO_UPDATE="EVENT_INFO_UPDATE";i.SHOW_TIP_END="SHOW_TIP_END";return i}(app.ModelBase);g.ChouKaModel=e})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var o=function(){function n(){}n.convert=function(t,e){if(e===void 0){e=true}var i=t.split("-");if(i.length>1){var n=parseInt(i[0]);var r=i[1];if(n==1){return parseInt(r)/100+(e?"%":"")}}return t};Object.defineProperty(n.prototype,"showValue",{get:function(){return n.convert(this.value)},enumerable:true,configurable:true});n.prototype.sub=function(t,e){if(e===void 0){e=false}var i=n.substr(t.value,this.value);return n.convert(i,e)};n.addstr=function(t,e){if(e){var i=t.split("-");if(i.length>1){var n=e.split("-");return i[0]+"-"+(parseInt(i[1])+parseInt(n[1]))}else{var n=e.split("-");if(n.length>1){var r=parseInt(n[1]);return(parseInt(t)*(1+r/100)).toString()}return(parseInt(t)+parseInt(e)).toString()}}return t};n.substr=function(t,e){if(e){var i=t.split("-");if(i.length>1){var n=e.split("-");return i[0]+"-"+(parseInt(i[1])-parseInt(n[1]))}else{return(parseInt(t)-parseInt(e)).toString()}}return t};return n}();t.SkillStarParam=o;var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.choukaTime=10;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){var t=app.Config.getResById("magic_base.csv");this.specialprogroupMap=t.getMapList("specialprogroup");this.magic_baseList=t.getArray();var e=app.Config.getResById("magic_gacha.csv");this.magic_gachaList=e.getArray();var i=app.Config.getResById("magic_pool.csv");this.magic_poolList=i.getArray();this.showTypeList=[];for(var n=0;n<this.magic_poolList.length;n++){var r=this.magic_poolList[n];if(r.showtype!=0&&this.showTypeList.indexOf(r.showtype)==-1){this.showTypeList.push(r.showtype)}}this.showTypeList.sort(this.sortHanlder);var o=app.Config.getResById("magic_skill.csv");this.magic_skill=o.getMap("magicid","level","star")};i.prototype.sortHanlder=function(t,e){if(t<e){return-1}else if(t>e){return 1}return 0};i.prototype.getBaseCfg=function(t){for(var e=0;e<this.magic_baseList.length;e++){if(this.magic_baseList[e].id==t){return this.magic_baseList[e]}}};i.prototype.getQuality=function(t){var e=csv.ItemProxy.getIns().itemCfgMap[t];if(e){return e.qua}throw new Error("item id  not exist!"+t)};i.prototype.getTypeDesc=function(t){return app.getLang("magiclisttag3_"+t.type)};i.prototype.getRes=function(t){return"res/icon/magicweapon_s/"+t.res+".png"};i.prototype.getBigRes=function(t){return"res/icon/magicweapon/"+i.formatCfg(t).res+".png"};i.prototype.getCha=function(t,e){for(var i=0;i<this.magic_gachaList.length;i++){var n=this.magic_gachaList[i];if(n.functionid==t&&n.gachatype==e){return n}}};i.prototype.getCfg=function(t){for(var e=0;e<this.magic_gachaList.length;e++){var i=this.magic_gachaList[e];if(i.id==t){return i}}};i.prototype.getListByShowType=function(t,e){var i=[];for(var n=0;n<this.magic_poolList.length;n++){var r=this.magic_poolList[n];if(r.showtype==t&&r.functionid==e){i.push(r)}}return i};i.prototype.getGuarenteeCount=function(){return parseInt(game.Config.getParams(929))};i.prototype.getUpdateAttrString=function(t,e){return};i.prototype.getTypeIcon=function(t){var e=["bg_jinengbiaoqian_4","bg_jinengbiaoqian_3","bg_jinengbiaoqian_5"];return"public/"+e[t.type-1]+".png"};i.prototype.getNingYun=function(t,e){var i=csv.FaBaoNewProxy.getIns().magic_star;if(!i[t.id]){return}var n=i[t.id][e];var r=new o;r.desc=t.stardesc;if(n){r.value=n.stardesc}else{r.value="1-0"}return r};i.prototype.getAllPoint=function(t,e,i){var n=0;var r=csv.ChouKaProxy.getIns().getBaseCfg(t);n+=r.point;var o=csv.FaBaoNewProxy.getIns().magic_updateMap[t];if(o){var a=o[i];if(a){n+=a.addpoint}}if(csv.FaBaoNewProxy.getIns().magic_star[t]){var s=csv.FaBaoNewProxy.getIns().magic_star[t][e];if(s){n+=s.addpoint}}return n};i.prototype.getJueXinIcon=function(t){return"res/icon/item/magicawake_"+t+".png"};i.prototype.getLockLv=function(t){var e=game.Config.getParams(969).split(";");var i=parseInt(e[t-1]);return i};Object.defineProperty(i.prototype,"getLen",{get:function(){return parseInt(app.getLang("magic_len"))},enumerable:true,configurable:true});i.prototype.getAni=function(t){var e=app.getLang(t>1?"fabao_ani1":"fabao_ani2");return e.split("-")};i.prototype.getAniConfig=function(t){if(!this._animObj){var e=app.getLang(t>1?"fabao_ani1":"fabao_ani2");var i=e.split("-");var n={};n.bigFire=parseInt(i[6]);n.itemDelay=parseInt(i[7]);this._animObj=n}return this._animObj};i.formatCfg=function(t){if(typeof t=="number"){t=i.getIns().getCfg(t)}else if(typeof t=="string"){t=i.getIns().getCfg(parseInt(t))}else if(t instanceof fabaonew.FaBaoNewVo){t=t.cfg}return t};i.SINGLE_KEY="chouka.ChouKaProxy";return i}(app.ModelBase);t.ChouKaProxy=e})(csv||(csv={}));var csv;(function(l){var t=function(){function t(t,e,i,n,r,o,a){this.attr=n;this.param=r;this.param2=o;this.type=a;this._sumdes=e;this.typedes=i;this._paramlist=t.split(";");this.outlist=[];for(var s=0;s<this._paramlist.length;s++){var l=this._paramlist[s];if(l!=""){this.outlist.push(this.getValue(l))}}}t.prototype.getValue=function(t){var e=t.split("-");return parseInt(e[1])};t.prototype.getType=function(t){var e=this._paramlist[t];var i=e.split("-");var n=parseInt(i[0]);return n};Object.defineProperty(t.prototype,"sumdesc",{get:function(){var t="";if(this._sumdes&&this._sumdes!=""&&this._sumdes!="sumdesc_null"&&this.attr!=""){var e=this.getSumPro();if(e){t=app.getLang(this._sumdes,e.value)}}return t},enumerable:true,configurable:true});t.prototype.getSumPro=function(){if(this.attr){var t=new PropValue;var e=this.attr.split("-");t.propId=parseInt(e[0]);t.flag=0;t.formula=0;t.value=parseInt(e[3])*this.serverTime;return t}};t.prototype.sub=function(t){var e=[];for(var i=0;i<this.outlist.length;i++){e.push(t.outlist[i]-this.outlist[i])}this._sublist=e};t.prototype.add=function(t){var e=[];var i=t.outlist.length;if(i<this.outlist.length){i=this.outlist.length}for(var n=0;n<i;n++){e.push((t.outlist[n]||0)+(this.outlist[n]||0))}this.outlist=e};t.prototype.parseDesc=function(t){var e=app.getLang(t);for(var i=0;i<this.outlist.length;i++){var n=this.getType(i);var r="";var o=this.outlist[i];var a=app.getLang("magic_tips_color");r+="<span color='"+a+"'>"+this.convert(n,o)+"</span>";if(this._sublist){var s=this._sublist[i];if(s!=0&&n!=l.ENumType.Service){r+=app.getLang("magiclisttag3_10",this.convert(n,s))}}e=e.replace("{"+i+"}",r)}e+=this.sumdesc;return e};Object.defineProperty(t.prototype,"onceCnt",{get:function(){var t=this.param;var e=t.split("-");return parseInt(e[e.length-1])},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"serverTime",{get:function(){if(this._isHandBook){return this.maxTime}var t=Math.floor(this.serverValue/this.onceCnt);if(t>this.maxTime){t=this.maxTime}return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"serverValue",{get:function(){var t=this.param;var e=t.split("-");var i=parseInt(e[0]);var n=parseInt(e[1]);if(l.MagicidSkillObj.is2Param(i)){return fabaonew.FaBaoNewModel.getIns().getExt2Value(i)}return fabaonew.FaBaoNewModel.getIns().getExt3Value(i,n)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"maxTime",{get:function(){return parseInt(this.param2)},enumerable:true,configurable:true});t.prototype.convert=function(t,e){if(t==l.ENumType.Percent){return e/100+"%"}else if(t==l.ENumType.Service){return this.serverTime.toString()}return e.toString()};Object.defineProperty(t.prototype,"desc",{get:function(){return this.parseDesc(this.typedes)},enumerable:true,configurable:true});return t}();l.MagicAttrCellVo=t})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(p){var t;(function(t){t[t["Percent"]=1]="Percent";t[t["Value"]=2]="Value";t[t["Service"]=3]="Service"})(t=p.ENumType||(p.ENumType={}));var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getSkillParam=function(t,e,i,n){var r=p.ChouKaProxy.getIns().magic_skill;if(r[t]&&r[t][e]&&r[t][e][i]){var o=r[t][e][i];var a=new s(o,n);return a}};e.prototype.getAllDesc=function(t,e,i){var n;if(t.length<=1){var r=t[0];var o=this.getSkillParam(r.cfg.id,r.level,r.star);n=o}else{var r=t[0];var o=this.getSkillParam(r.cfg.id,r.level,r.star);for(var a=1;a<t.length;a++){var s=t[a];var l=this.getSkillParam(s.cfg.id,s.level,s.star);o.add(l)}n=o}return n.descByKey(n.cfg[e],i)};e.prototype.getSkillAll=function(t,e,i){var n={};for(var r=0;r<t.length;r++){var o=t[r];var a=this.getSkillParam(o.cfg.id,o.level,o.star);if(!n[a.laypro]){n[a.laypro]=[]}n[a.laypro].push(o)}var s="";for(var l in n){s+=this.getAllDesc(n[l],e,i)+"\n"}return s};e.SINGLE_KEY="csv.MagicidProxy";e.maxAttrCnt=4;return e}(app.ModelBase);p.MagicidProxy=e;var s=function(){function t(t,e){this.cfg=t;this.attrlist=[];var i=t.showparam.split("#");var n=t.typedes.split("#");var r;if(t.sumdes!=""){r=t.sumdes.split("#")}var o=i.length;if(i.length==n.length&&n.length){for(var a=0;a<o;a++){var s="";if(r){s=r[a]}var l="_"+(a+1);var u=new p.MagicAttrCellVo(i[a],s,n[a],t["attr"+l],t["param"+l],t["param2"+l],t["type"+l]);u._isHandBook=e;if(a==0&&t.skill!=0){this.isInitiative=true}this.attrlist.push(u)}}else{console.error(">>>>>>>>>>>>>配置Magic_skillXCfg id:"+t.id+"异常")}this._isHandBook=e}Object.defineProperty(t.prototype,"laypro",{get:function(){return p.ChouKaProxy.getIns().getBaseCfg(this.cfg.magicid).laypro},enumerable:true,configurable:true});t.prototype.sub=function(t){for(var e=0;e<this.attrlist.length;e++){var i=t.attrlist[e];this.attrlist[e].sub(i)}};t.prototype.add=function(t){for(var e=0;e<this.attrlist.length;e++){var i=t.attrlist[e];this.attrlist[e].add(i)}};t.prototype.descByKey=function(t,e){var i=t.split("#");var n=0;var r="";if(this.attrlist.length>=n+1){if(this.isInitiative){if(e){r=app.getLang("magiclisttag3_17")+"<br>"}r+=this.attrlist[n].parseDesc(i[n])+"<br>";n++}}var o="";for(var a=n;a<this.attrlist.length;a++){o+=this.attrlist[a].parseDesc(i[n])+"<br>";n++}if(o!=""){if(e){r+=app.getLang("magiclisttag3_18")+"<br>"}r+=o}return r};t.is2Param=function(t){var e=game.Config.getParams(1141).split(";");return e.indexOf(t.toString())>=0};return t}();p.MagicidSkillObj=s})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){if(this.dataSource){var t=this.dataSource[0];var e=this.dataSource[1];var i=t.cfgList[0].p1;var n=i.split("-")[0];var r=i.split("-")[1];var o=e.recvNum;var a=e.drawtotal-o*n;this.labeljindutiao.text=a+"/"+n;this.barjindutiao.value=a/n;this.labelxiangxi06.text=app.getLang("magic_gacha_tips6",n);var s=game.ItemUtil.parserList(r)[0];this.gezi.setData(s)}};e.SINGLE_KEY="chouka.BaoXiangTip";return e}(ui.chouka.xianshibaokutipUI);t.BaoXiangTip=e})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};Object.defineProperty(e.prototype,"data",{get:function(){return o.ChouKaModel.getIns().getData(this.functionid)},enumerable:true,configurable:true});e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnjiangliyulan.clickHandler=new Laya.Handler(this,this.onJiangLiHandler);this.btnlianzhi01.clickHandler=new Laya.Handler(this,this.onLianZhiHandler);this.btnlianzhi02.clickHandler=new Laya.Handler(this,this.onTenHandler);this.btnjiangliyulan.clickHandler=new Laya.Handler(this,this.onJiangliYuLan);this.btnlianzhi02.label=app.getLang("chouka_06");this.imgdiban.anchorX=this.imgdiban.anchorY=0;this.imgmoney.on(Laya.Event.CLICK,this,this.onItemClick);this.boxclose.clickHandler=new Laya.Handler(this,this.onAnimHander);tip.TipManager.bindMoneyTips(this.imgmoney01,game.MoneyModel.MONEY_ENUM.GOLD);this.labdaojishi.visible=false;this.baoxiang.on(Laya.Event.CLICK,this,this.onbaoxiangClick);this.activityTimeView=new activitytaren.ActivityTimeView(this.shijianlab,new Laya.Handler(this,this.endTimeCallBack),app.getLang("huodong_text05"))};e.prototype.onbaoxiangClick=function(){if(!this.data)return;if(this._isClick){app.ProtocolRequest.DailyDrawRecvReq(this.actVo.cfgList[0].id)}else{app.ViewManager.toggleDialog(o.BaoXiangTip,1,0,[this.actVo,this.data])}};e.prototype.endTimeCallBack=function(){this.activityTimeView.stop();this.shijianlab.text=app.getLang("huodong_text07")};e.prototype.onDisplay=function(){this.onResize();this.clear();this.onPlayAni1Complete();this.ani1.play(0,false);this.qingyan1.play(0,true);this.qingyan2.play(0,true);o.ChouKaModel.getIns().curTime=0;this.animationxiaohuo01.play(0,true);this.animationxiaohuo02.play(0,true);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onUpdateEvt);o.ChouKaModel.getIns().on(o.ChouKaModel.EVENT_REFRESH,this,this.onRefreshHandler);o.ChouKaModel.getIns().on(o.ChouKaModel.EVENT_INFO_UPDATE,this,this.onRefreshHandler);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onRefreshHandler);this.callLater(this.onRefresh)};e.prototype.onUnDisplay=function(){this.qingyan1.stop();this.qingyan2.stop();game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.onUpdateEvt);o.ChouKaModel.getIns().off(o.ChouKaModel.EVENT_REFRESH,this,this.onRefreshHandler);o.ChouKaModel.getIns().off(o.ChouKaModel.EVENT_INFO_UPDATE,this,this.onRefreshHandler);this.clear();this.animationxiaohuo01.stop();this.animationxiaohuo02.stop();this.activityTimeView.stop()};e.prototype.onAnimHander=function(){o.ChouKaModel.getIns().isCloseAnim=this.boxclose.selected};e.prototype.onItemClick=function(){var t=csv.MallProxy.getIns().getCfg(csv.MallProxy.ENUM_TYPE.XIANSHI_CHOU_KA);var e=game.ItemUtil.parserList(t.item)[0];var i=tip.TipManager.getCanBuyCount(t.trueprice);tip.TipManager.normalShop(e,t.trueprice,new Laya.Handler(this,this.buyCallBack,[t]),i)};e.prototype.buyCallBack=function(t,e){shop.ShopModel.getIns().buyCallBack(t.type,t,e)};e.prototype.onLoadHandler=function(){var t=this.iconHeight/this.imgmoney.height;this.imgmoney.width*=t;this.imgmoney.height*=t};e.prototype.onJiangliYuLan=function(){app.ViewManager.toggleDialog(o.Jiangliyulanview,1,0,[this.functionid])};e.prototype.onLianZhiHandler=function(){this.startChouKa(o.EChouKaType.One)};e.prototype.onTenHandler=function(){this.startChouKa(o.EChouKaType.Ten)};e.prototype.startChouKa=function(t){if(!csv.FunctionsProxy.getIns().isOpen(this.functionid)){manager.FlowManager.instance.flowByStyle1(app.getLang("huodong_text06"));return}if(this.data){o.ChouKaModel.getIns().startChouKa(t,this.functionid,null,this.data.free>0,this.data.activituId)}};e.prototype.onJiangLiHandler=function(){};e.prototype.onPlayAni1Complete=function(){this.ani2.play(0,true);this.ani3.play(0,true)};e.prototype.onResize=function(){var t=Laya.stage.height-ScreenAdapter.OFFSET_BOTTOM-ScreenAdapter.OFFSET_Y;if(!this._luziY){this._luziY=this.top1.y/this.height}if(!this._bottomY){this._bottomY=this.bottom1.y/this.height}if(!this._daojicishuY){this._daojicishuY=this.daojicishu.y}if(!this.shangmianBoxY){this.shangmianBoxY=this.shangmianbox.y}this.width=Laya.stage.width;this.height=t;this.imgdiban.width=this.width;this.imgdiban.height=Laya.stage.height;this.imgdiban.x=0;this.imgdiban.y=0;this.top1.width=this.imgdiban.width;this.top1.x=this.imgdiban.width/2;this.top1.y=ScreenAdapter.OFFSET_Y+this._luziY*t;this.shangmianbox.x=(this.imgdiban.width-this.shangmianbox.width)/2;this.shangmianbox.y=this.shangmianBoxY+ScreenAdapter.OFFSET_Y;this.luzi.x=(this.imgdiban.width-this.luzi.width)/2;this.bottom1.x=this.width/2;this.bottom1.anchorY=0;this.bottom1.y=Laya.stage.height-this.bottom1.height-ScreenAdapter.OFFSET_BOTTOM;this.daojicishu.anchorX=.5;this.daojicishu.x=this.width/2;this.daojicishu.y=ScreenAdapter.OFFSET_Y+this._daojicishuY};e.prototype.onUpdateEvt=function(){this.onRefreshHandler()};e.prototype.onRefreshHandler=function(t){var e=false;if(t){e=o.ChouKaModel.getIns().curType==o.EChouKaType.Ten&&t.type==1}this.onRefresh(e)};e.prototype.onMoneyChange=function(){var t=csv.ChouKaProxy.getIns().getCha(this.functionid,o.EChouKaType.One);var e=t.cost.split("-");this.labelmoneynum.text=game.GridsModel.getIns().getItemCount(parseInt(e[0])).toString();this.labelmoneynum01.text=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.GOLD));if(this.data){this.shuzi.value=(parseInt(t.defendtimes)-this.data.count).toString()}};e.prototype.onRefresh=function(t){if(t===void 0){t=false}this.onMoneyChange();this.activityTimeView.start(this.actVo.timeVo.endTime);var e=this.data;if(!e)return;var i=csv.ChouKaProxy.getIns().getCha(this.functionid,o.EChouKaType.One);this.itemmoney01.parserIcon(i.cost,this.labelmoney01,"",true,[game.STYLES.GREEN_COLOR_S,game.STYLES.RED_COLOR_S]);var n=csv.ChouKaProxy.getIns().getCha(this.functionid,o.EChouKaType.Ten);this.itemmoney02.parserIcon(n.cost,this.labelmoney02,"",true,[game.STYLES.GREEN_COLOR_S,game.STYLES.RED_COLOR_S]);this.boxclose.selected=o.ChouKaModel.getIns().isCloseAnim;game.HelperViewHandler.register(this.functionid,[this.btnwenhao]);this.imgmoney.once(Laya.Event.LOADED,this,this.onLoadHandler);this.iconHeight=this.imgmoney.height;var r=game.ItemUtil.parserList(i.cost)[0];this.imgmoney.skin=r.getIconUrl();this.guanggao.skin="res/static/yunyinghuodong/"+this.actVo.cfgList[0].cp1+".png";if(e.free>0){this.labelmianfei.visible=true;this.labelmianfei.text=app.getLang("chouka_01");this.btnlianzhi01.label=" ";this.itemmoney01.visible=false;this.labelmoney01.visible=false;game.RedDotView.addTo(this.btnlianzhi01)}else{this.itemmoney01.visible=true;this.labelmoney01.visible=true;this.btnlianzhi01.label=app.getLang("chouka_03");this.labelmianfei.visible=false;game.RedDotView.removeFrom(this.btnlianzhi01)}if(game.GridsModel.getIns().hasEnoughItems(n.cost)){game.RedDotView.addTo(this.btnlianzhi02)}else{game.RedDotView.removeFrom(this.btnlianzhi02)}this.updataBaoXiang()};e.prototype.playAnimation=function(t){app.ViewManager.toggleView(o.MyLianbaoview,app.AppContainer.flowLayer,1,[t]);var e=csv.ChouKaProxy.getIns().getAni(t.reward.length);return 16*parseInt(e[1])};e.prototype.updataBaoXiang=function(){var t=this.data;if(!t)return;var e=this.actVo.cfgList[0].p1;var i=e.split("-")[0];var n=t.recvNum;var r=t.drawtotal-n*i;this.jdtshuzhi.text=r+"/"+i;this.xianshijdt.value=r/i;if(r>=i){this.hongdian.visible=true;this.shanguang.play();this.ani4.play();this._isClick=true}else{this.hongdian.visible=false;this.shanguang.stop();this.ani4.stop();this.baoxiang.rotation=0;this._isClick=false}};e.prototype.clear=function(){this.ani1.stop();this.ani2.stop();this.ani3.stop()};e.SINGLE_KEY="chouka.ChouKaLianBaoUpView";return e}(ui.chouka.lianbaoviewnewupUI);o.ChouKaLianBaoUpView=t})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){};e.prototype.setData=function(t){};return e}(ui.chouka.yinzhangitemUI);var e=function(i){__extends(t,i);function t(){var t=i!==null&&i.apply(this,arguments)||this;t.ALL_CNT=9;t.EVERY_MS=100;return t}Object.defineProperty(t.prototype,"data",{get:function(){return o.ChouKaModel.getIns().getData(csv.FunctionsProxy.ENUMS.CHOU_KA)},enumerable:true,configurable:true});t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.CHOU_KA,[this.btnwenhao]);this.btnjiangliyulan.clickHandler=new Laya.Handler(this,this.onJiangLiHandler);this.btnlianzhi01.clickHandler=new Laya.Handler(this,this.onLianZhiHandler);this.btnlianzhi02.clickHandler=new Laya.Handler(this,this.onTenHandler);this.btnjiangliyulan.clickHandler=new Laya.Handler(this,this.onJiangliYuLan);this.btnlianzhi02.label=app.getLang("chouka_06");this.imgdiban.anchorX=this.imgdiban.anchorY=0;var t=csv.ChouKaProxy.getIns().getCha(csv.FunctionsProxy.ENUMS.CHOU_KA,o.EChouKaType.One);this.imgmoney.once(Laya.Event.LOADED,this,this.onLoadHandler);this.iconHeight=this.imgmoney.height;var e=game.ItemUtil.parserList(t.cost)[0];this.imgmoney.skin=e.getIconUrl();this.imgmoney.on(Laya.Event.CLICK,this,this.onItemClick);this.boxclose.clickHandler=new Laya.Handler(this,this.onAnimHander);this._pY=this.btnhuolang.y-this.shangmianbox.y;this.animList=[];tip.TipManager.bindMoneyTips(this.imgmoney01,game.MoneyModel.MONEY_ENUM.GOLD);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_CHOUKA,this,this.getGuideItem,500);if(game.Context.disableIosRecharge()){this.btnhuolang.visible=false}else{this.padkarIconControl=new pedlar.PadkarIconControl(this.btnhuolang,[pedlarnew.PedkarNewModel.ENUMS.FABAOCHOUJIANG,pedlarnew.PedkarNewModel.ENUMS.TEAM_LEVEL,pedlarnew.PedkarNewModel.ENUMS.XIANGYAOZHILU])}csv.OtherFuncOpen.register(this.btntehui,csv.FunctionsProxy.ENUMS.MEI_RI_TE_HUI,true,csv.FunctionsProxy.ENUMS.CHOU_KA);csv.OtherFuncOpen.register(this.btnzhongshen,csv.FunctionsProxy.ENUMS.WEEK_AWARD,true,csv.FunctionsProxy.ENUMS.CHOU_KA);csv.OtherFuncOpen.register(this.btnzhouka,csv.FunctionsProxy.ENUMS.WEEK_CARD,true,csv.FunctionsProxy.ENUMS.CHOU_KA)};t.prototype.getGuideItem=function(){var t=csv.ChouKaProxy.getIns().getCha(csv.FunctionsProxy.ENUMS.CHOU_KA,o.EChouKaType.Ten);if(game.GridsModel.getIns().hasEnoughItems(t.cost)){return this.btnlianzhi02}else{return this.btnlianzhi01}};t.prototype.onAnimHander=function(){o.ChouKaModel.getIns().isCloseAnim=this.boxclose.selected};t.prototype.onItemClick=function(){var t=csv.MallProxy.getIns().getCfg(csv.MallProxy.ENUM_TYPE.CHOU_KA);var e=game.ItemUtil.parserList(t.item)[0];var i=tip.TipManager.getCanBuyCount(t.trueprice);tip.TipManager.normalShop(e,t.trueprice,new Laya.Handler(this,this.buyCallBack,[t]),i)};t.prototype.buyCallBack=function(t,e){shop.ShopModel.getIns().buyCallBack(t.type,t,e)};t.prototype.onLoadHandler=function(){var t=this.iconHeight/this.imgmoney.height;this.imgmoney.width*=t;this.imgmoney.height*=t};t.prototype.onDajiHandler=function(){app.ViewManager.toggleDialog(o.DajitipView,1,0)};t.prototype.onYingZhangItem=function(t){t.setData(t.dataSource)};t.prototype.onJiangliYuLan=function(){app.ViewManager.toggleDialog(o.Jiangliyulanview,1,0,[csv.FunctionsProxy.ENUMS.CHOU_KA])};t.prototype.onLianZhiHandler=function(){this.startChouKa(o.EChouKaType.One)};t.prototype.onTenHandler=function(){this.startChouKa(o.EChouKaType.Ten)};t.prototype.onJiangLiHandler=function(){};t.prototype.onPlayAni1Complete=function(){this.ani2.play(0,true);this.ani3.play(0,true)};t.prototype.onResize=function(){var t=Laya.stage.height-ScreenAdapter.OFFSET_BOTTOM-ScreenAdapter.OFFSET_Y;if(!this._luziY){this._luziY=this.top1.y/this.height}if(!this._bottomY){this._bottomY=this.bottom1.y/this.height}if(!this._daojicishuY){this._daojicishuY=this.daojicishu.y}if(!this.shangmianBoxY){this.shangmianBoxY=this.shangmianbox.y}this.width=Laya.stage.width;this.height=t;this.imgdiban.width=this.width;this.imgdiban.height=Laya.stage.height;this.imgdiban.x=0;this.imgdiban.y=0;this.top1.width=this.imgdiban.width;this.top1.x=this.imgdiban.width/2;this.top1.y=ScreenAdapter.OFFSET_Y+this._luziY*t;this.shangmianbox.x=(this.imgdiban.width-this.shangmianbox.width)/2;this.shangmianbox.y=this.shangmianBoxY+ScreenAdapter.OFFSET_Y;this.btnhuolang.y=this.shangmianbox.y+this._pY;this.luzi.x=(this.imgdiban.width-this.luzi.width)/2;this.bottom1.x=this.width/2;this.bottom1.anchorY=0;this.bottom1.y=Laya.stage.height-this.bottom1.height-ScreenAdapter.OFFSET_BOTTOM;this.daojicishu.anchorX=.5;this.daojicishu.x=this.width/2;this.daojicishu.y=ScreenAdapter.OFFSET_Y+this._daojicishuY;this.btntehui.x=this.btnzhongshen.x=this.btnzhouka.x=this.btnhuolang.x=this.daojicishu.x+this.daojicishu.width/2+this.btnhuolang.width/2};t.prototype.onDisplay=function(){this.onResize();this.clear();this.onPlayAni1Complete();this.ani1.play(0,false);this.qingyan1.play(0,true);this.qingyan2.play(0,true);o.ChouKaModel.getIns().curTime=0;this.animationxiaohuo01.play(0,true);this.animationxiaohuo02.play(0,true);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onUpdateEvt);o.ChouKaModel.getIns().on(o.ChouKaModel.EVENT_REFRESH,this,this.onRefreshHandler);o.ChouKaModel.getIns().on(o.ChouKaModel.EVENT_INFO_UPDATE,this,this.onRefreshHandler);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onRefreshHandler);if(this.data){this.callLater(this.onRefresh)}};t.prototype.showfreeTime=function(){if(app.ViewManager.DisplayedInStage(o.ChouKaLianBaoView.SINGLE_KEY)){if(this.data.free>0){this.labdaojishi.text=""}else{var t=game.Context.getServerTime()-game.Context.getServerZeroTime();var e=0;var i=5*3600;if(t<=i){e=i-t}else{e=game.Context.getServerZeroTime()+86400-game.Context.getServerTime()+i}var n=util.TimeUtil.formatTime(e);this.labdaojishi.text=app.getLang("nextfree",n);Laya.timer.once(1e3,this,this.showfreeTime)}}};t.prototype.onUpdateEvt=function(){this.onRefreshHandler()};t.prototype.onRefreshHandler=function(t){var e=false;if(t){e=o.ChouKaModel.getIns().curType==o.EChouKaType.Ten&&t.type==1}this.onRefresh(e)};t.prototype.onMoneyChange=function(){var t=csv.ChouKaProxy.getIns().getCha(csv.FunctionsProxy.ENUMS.CHOU_KA,o.EChouKaType.One);var e=t.cost.split("-");this.labelmoneynum.text=game.GridsModel.getIns().getItemCount(parseInt(e[0])).toString();this.labelmoneynum01.text=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.GOLD));var i=4;var n="<span color='"+game.STYLES.ITEM_QUALITY[i]+"'>"+app.getLang("magiclisttag3_type"+i)+app.getLang("chouka_015")+"</span>";var r=app.getLang("chouka_014",csv.ChouKaProxy.getIns().choukaTime-this.data.count,n);this.shuzi.value=(csv.ChouKaProxy.getIns().choukaTime-this.data.count).toString()};t.prototype.onShowHandler=function(){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.BAG_TOOL)};t.prototype.onShowCanelHandler=function(){};t.prototype.startChouKa=function(t){o.ChouKaModel.getIns().startChouKa(t,csv.FunctionsProxy.ENUMS.CHOU_KA,null,this.data.free>0)};Object.defineProperty(t.prototype,"curStar",{get:function(){return this._star},set:function(t){this._star=t},enumerable:true,configurable:true});t.prototype.onAnimPlayEnd=function(){this.curStar=0;this.setDaJi(this.data.count);var t=this.data.count*this.EVERY_MS;Laya.Tween.to(this,{curStar:this.data.count},t)};t.prototype.callTimeEnd=function(){var t=this.EVERY_MS;Laya.Tween.to(this,{curStar:this.ALL_CNT},t,null,new Laya.Handler(this,this.onAnimPlayEnd))};t.prototype.animEnd=function(){this.setDaJi(this.curStar);Laya.timer.once(1e3,this,this.callTimeEnd)};t.prototype.onRefresh=function(t){if(t===void 0){t=false}this.onMoneyChange();this.boxclose.selected=o.ChouKaModel.getIns().isCloseAnim;var e=this.data;var i=csv.ChouKaProxy.getIns().getCha(csv.FunctionsProxy.ENUMS.CHOU_KA,o.EChouKaType.One);this.itemmoney01.parserIcon(i.cost,this.labelmoney01,"",true,[game.STYLES.GREEN_COLOR_S,game.STYLES.RED_COLOR_S]);var n=csv.ChouKaProxy.getIns().getCha(csv.FunctionsProxy.ENUMS.CHOU_KA,o.EChouKaType.Ten);this.itemmoney02.parserIcon(n.cost,this.labelmoney02,"",true,[game.STYLES.GREEN_COLOR_S,game.STYLES.RED_COLOR_S]);if(e.free>0){this.labelmianfei.visible=true;this.labelmianfei.text=app.getLang("chouka_01");this.btnlianzhi01.label=" ";this.itemmoney01.visible=false;this.labelmoney01.visible=false;game.RedDotView.addTo(this.btnlianzhi01)}else{this.itemmoney01.visible=true;this.labelmoney01.visible=true;this.btnlianzhi01.label=app.getLang("chouka_03");this.labelmianfei.visible=false;game.RedDotView.removeFrom(this.btnlianzhi01)}if(game.GridsModel.getIns().hasEnoughItems(n.cost)){game.RedDotView.addTo(this.btnlianzhi02)}else{game.RedDotView.removeFrom(this.btnlianzhi02)}this.showfreeTime()};t.prototype.onAnimationdahuoPlayEnd=function(){};t.prototype.playAnimation=function(t){app.ViewManager.toggleView(o.MyLianbaoviewStyle1,app.AppContainer.flowLayer,1,[t]);var e=csv.ChouKaProxy.getIns().getAni(t.reward.length);return 16*parseInt(e[1])};t.prototype.onPlayEnd=function(){};t.prototype.setDaJi=function(t){if(t>=csv.ChouKaProxy.getIns().getGuarenteeCount()-1){}else{}};t.prototype.clear=function(){this.labdaojishi.text="";this.ani1.stop();this.ani2.stop();this.ani3.stop();for(var t=0;t<this.animList.length;t++){this.animList[t].visible=false;this.animList[t].stop()}};t.prototype.onUnDisplay=function(){this.qingyan1.stop();this.qingyan2.stop();game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.onUpdateEvt);o.ChouKaModel.getIns().off(o.ChouKaModel.EVENT_REFRESH,this,this.onRefreshHandler);o.ChouKaModel.getIns().off(o.ChouKaModel.EVENT_INFO_UPDATE,this,this.onRefreshHandler);this.clear();this.animationxiaohuo01.stop();this.animationxiaohuo02.stop()};t.SINGLE_KEY="chouka.ChouKaLianBaoView";return t}(ui.chouka.lianbaoviewnewUI);o.ChouKaLianBaoView=e})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.clipdajinum.value=(csv.ChouKaProxy.getIns().getGuarenteeCount()-i.ChouKaModel.getIns().getData(csv.FunctionsProxy.ENUMS.CHOU_KA).count).toString()};e.prototype.onUnDisplay=function(){};e.SINGLE_KEY="chouka.DajitipView";return e}(ui.chouka.dajitipUI);i.DajitipView=t})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(t){var e=function(e){__extends(s,e);function s(){var t=e.call(this)||this;t.on(Laya.Event.UNDISPLAY,t,t.onUnDisplay);return t}s.prototype.onUnDisplay=function(){if(this.tween){Laya.Tween.clear(this.tween)}};s.prototype.setSkin=function(t,e,i,n,r,o,a){if(a===void 0){a=1}this.url=t;this.loadImage(t,r-e/2,o-i/2,e,i);this.alpha=n;this.tween=Laya.Tween.to(this,{alpha:0},s.USE_TIME,undefined,new Laya.Handler(this,this.onCompleteHandler))};s.prototype.setSkinBySprite=function(t,e,i,n,r){if(r===void 0){r=1}this._sp=t;this._sp.x=i;this._sp.y=n;this.addChild(t);this.alpha=e;this.tween=Laya.Tween.to(this,{alpha:0},s.USE_TIME,undefined,new Laya.Handler(this,this.onCompleteHandler))};s.prototype.onCompleteHandler=function(){this.removeSelf();if(this._sp){this._sp.removeSelf()}};s.USE_TIME=360;return s}(Laya.Sprite);t.FabaoShadows=e})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(t){var e=function(t){__extends(e,t);function e(){return t.call(this)||this}e.prototype.changeAngle=function(t,e,i){var n=Math.sqrt(t*t+e*e);var r=t/n;var o=e/n;var a=Math.cos(i);var s=Math.sin(i);var l=r*a-o*s;var u=o*a+r*s;t=(n*l).toFixed(2);e=(n*u).toFixed(2);var p=new Laya.Point(t,e);p.normalize();return p};e.prototype.drawLine=function(t){if(!this.line){this.line=new Laya.Sprite}this.line.graphics.clear();this.line.graphics.drawPoly(0,0,t,undefined,this.lineColor,parseFloat(this.miaobian_arr[1]));this.addChild(this.line)};e.prototype.drawBg=function(t){if(!this.bg){this.bg=new Laya.Sprite}this.bg.alpha=this.bgAlpha;this.bg.graphics.clear();this.bg.graphics.drawPoly(0,0,t,this.bgColor);this.addChild(this.bg)};e.prototype.draw=function(t,e,i,n,r,o,a){if(e===void 0){e=100}if(i===void 0){i="#ff0000"}if(n===void 0){n=.2}if(r===void 0){r=true}if(o===void 0){o=true}if(a===void 0){a="#ff0000"}this.bgColor=i;this.bgAlpha=n;var s=app.getLang("magic_color_in_miaobian").split(":");this.miaobian_arr=s;this.lineColor=this.miaobian_arr[0];var l=[];for(var u=0;u<5;u++){var p=this.changeAngle(0,1,Math.PI+Math.PI/5*u*2);var h=1;if(t){h=t[u]}var c=e*h;p.x*=c;p.y*=c;l.push(p)}var f=[];this.graphics.clear();for(var u=0;u<l.length;u++){var g=l[u];if(r){}f.push(g.x,g.y)}this.drawBg(f);if(o){this.drawLine(f)}};return e}(Laya.Sprite);t.FiveStar=e})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(i){var n=function(){function t(t){this.skin=t;this.initialize()}t.prototype.initialize=function(){this.skin.imgnew.mouseEnabled=false;this.skin.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.skin.on(Laya.Event.DISPLAY,this,this.onDisplay)};t.prototype.onUnDisplay=function(){this.skin.ani1.stop()};t.prototype.onDisplay=function(){};t.prototype.onAnimationhuodeEnd=function(t){t.visible=false};t.prototype.setData=function(t){var e=game.ItemUtil.parserList(t.itemid+"-"+t.itemnum)[0];this.skin.itemdaoju.setData(e,null,null,false);this.skin.imgnew.visible=t.status==1;if(t.status==2){this.skin.animationhuode.visible=true;this.skin.animationhuode.play(0,false);this.skin.animationzhuanhua.visible=true;this.skin.animationzhuanhua.once(Laya.Event.COMPLETE,this,this.onAnimationhuodeEnd,[this.skin.animationzhuanhua]);this.skin.animationzhuanhua.play(0,false)}else{this.skin.animationhuode.visible=false;this.skin.animationzhuanhua.visible=false;this.skin.animationzhuanhua.stop()}};return t}();var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.c=new n(this)};e.prototype.setData=function(t){this.c.setData(t)};return e}(ui.chouka.gongxihuodeitemUI);var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.one=new n(this.itemhuode);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listdaoju.itemRender=r;this.listdaoju.renderHandler=new Laya.Handler(this,this.onRenderHandler)};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshHandler);this.ani1.play(0,false)};e.prototype.refreshHandler=function(){var t=this.dataSource;this.shuzhi.value=t[1];var e=parseInt(t[2]);this.mingzi.text=t[3];var i=t[4];var n=i.split(";");var r=[];for(var o=0;o<n.length;o++){if(n[o].length>0){var a=n[o].split("@");var s=new DailyDrawData;s.itemid=parseInt(a[0]);s.itemnum=parseInt(a[1]);r.push(s)}}if(r.length>1){this.listdaoju.visible=true;this.listdaoju.array=r;this.one.skin.visible=false}else{this.listdaoju.visible=false;this.one.skin.visible=true;this.one.setData(r[0])}this.shijian.text=util.TimeUtil.formatDate(e,true,true,true,true)};e.prototype.onUnDisplay=function(){this.ani1.stop()};e.SINGLE_KEY="chouka.BencilianbaoUI";return e}(ui.chouka.bencilianbaoUI);i.BencilianbaoUI=t;var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.needPlayCnt=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.one=new n(this.itemhuode);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listdaoju.itemRender=r;this.listdaoju.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.btnqueding.clickHandler=new Laya.Handler(this,this.close);this.btnshici.clickHandler=new Laya.Handler(this,this.onShiCiHandler);this.xuanyaobtn.clickHandler=new Laya.Handler(this,this.onXuanYaoHandler)};t.prototype.onXuanYaoHandler=function(){game.Alert.show(app.getLang("magic_gacha_tips1"),new Laya.Handler(this,this.onOkHandler))};t.prototype.onOkHandler=function(){Laya.timer.callLater(this,this.onLaterHandler)};t.prototype.onLaterHandler=function(){Laya.Dialog.closeAll();chat.ChatModel.getIns().setShowDdr(this.dataSource);chat.ChatModel.getIns().event(chat.ChatModel.CHAT_ITEM_SHOW)};t.prototype.getActid=function(){if(app.ViewManager.DisplayedInStage(i.ChouKaLianBaoUpView)){return i.ChouKaLianBaoUpView.getIns().actVo.actid}};t.prototype.onShiCiHandler=function(){i.ChouKaModel.getIns().startChouKa(this.cfg.gachatype,parseInt(this.cfg.functionid),new Laya.Handler(this,this.close),false,this.getActid())};t.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};t.prototype.onDisplay=function(){guide.GuideModel.getIns().boOpen=false;app.SoundManager.getIns().playSound("get");this.callLater(this.onRefresh)};t.prototype.onRefresh=function(){var t=this.dataSource;this.cfg=csv.ChouKaProxy.getIns().getCfg(t.gachaid);if(this.cfg.gachatype==i.EChouKaType.One){this.btnshici.label=app.getLang("chouka_03")}else{this.btnshici.label=app.getLang("chouka_06")}this.itemmoney.parserIcon(this.cfg.cost,this.labelmoney,"",true,[game.STYLES.GREEN_COLOR_S,game.STYLES.RED_COLOR_S]);if(t.reward.length==1){this.listdaoju.array=[];this.one.skin.visible=true;this.one.setData(t.reward[0]);this.callLater(this.onPlayOneAnim)}else{this.listdaoju.array=t.reward;this.one.skin.visible=false;this.needPlayCnt=t.reward.length;this.callLater(this.onPlayAnim)}this.shuzhi.value=t.luck.toString();var e=i.ChouKaModel.getIns().getPercent(t.luck,t.reward.length>1?1214:1223);this.shuoming.text=e;this.animation01.play(0,true);this.animation02.play(0,true)};t.prototype.onPlayOneAnim=function(){this.one.skin.ani1.play(0,false)};t.prototype.onPlayAnim=function(){var t=this.dataSource;if(this.needPlayCnt>0){var e=this.listdaoju.getCell(t.reward.length-this.needPlayCnt);e.ani1.play(0,false)}this.needPlayCnt--;if(this.needPlayCnt>0){var i=csv.ChouKaProxy.getIns().getAniConfig(t.reward.length);Laya.timer.once(i.itemDelay,this,this.onPlayAnim)}};t.prototype.onUnDisplay=function(){guide.GuideModel.getIns().boOpen=true;this.animation01.stop();this.animation02.stop()};t.SINGLE_KEY="chouka.Gongxihuodeview";return t}(ui.chouka.gongxihuodeviewUI);i.Gongxihuodeview=e})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(s){var n=function(){function n(t){this.skin=t}n.getIcon=function(t){return"res/static/chouka/"+this.arr[t]+"_xz.png"};n.prototype.setData=function(t,e,i){this.skin.imgwuxing.skin=n.getIcon(t);this.skin.labelnum.text=e.toString();if(i){this.skin.animationxuanzhong.visible=true;this.skin.animationxuanzhong.play(0,true)}else{this.skin.animationxuanzhong.visible=false;this.skin.animationxuanzhong.stop()}};n.arr=["bg_wuwei_jin","bg_wuwei_mu","bg_wuwei_shui","bg_wuwei_huo","bg_wuwei_tu"];return n}();s.AttrItem=n;var t=function(i){__extends(t,i);function t(){var t=i!==null&&i.apply(this,arguments)||this;t._timeScale=.3;t.btnTime=500;t.shadeList=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this._model=s.ChouKaModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onCloseHandler);this.itemList=[];for(var t=0;t<5;t++){var e=new n(this["itemwuxing0"+(t+1)]);this.itemList.push(e)}this.x=(Laya.stage.width-this.width)/2;this.y=(Laya.stage.height-this.height)/2;this.imgdiban.width=Laya.stage.width;this.imgdiban.height=Laya.stage.height;this.labelList=[];this.labelList.push(new fabaonew.LabelTempImage(this.imgtitle02,this.label04));this.labelList.push(new fabaonew.LabelTempImage(this.imgtitle03,this.label05))};t.prototype.onCloseHandler=function(){if(this._model.tipsList.length>0){this.clearIcon();var t=this._model.tipsList.shift();this.onRefreshData(t)}else{app.ViewManager.toggleView(s.Huodefabaoview,app.AppContainer.flowLayer,-1);if(this.dataSource&&this.dataSource[0]){this._model.popTips(this.dataSource[0])}else{this._model.event(s.ChouKaModel.SHOW_TIP_END)}}};t.prototype.onDisplay=function(){guide.GuideModel.getIns().boOpen=false;this.imgdiban.width=Laya.stage.width;this.imgdiban.height=Laya.stage.height;this.mengban.width=this.imgdiban.width;this.mengban.height=this.imgdiban.height;this.hitArea=new Laya.Rectangle(-this.x,-this.y,this.imgdiban.width,this.imgdiban.height);this.ani2.gotoAndStop(0);this.ani3.gotoAndStop(0);this.stopQulityAnim();this.onCloseHandler()};t.prototype.clearShader=function(){while(this.shadeList.length>0){this.shadeList.pop().removeSelf()}};t.prototype.clearIcon=function(){Laya.timer.clear(this,this.createShade);Laya.timer.clear(this,this.onImgFabaoComplete);this.clearShader();this.stopQulityAnim();this.ani2.stop();this.ani3.stop();this.chengse.stop();this.chengse.visible=false};t.prototype.onUnDisplay=function(){this.clearIcon();guide.GuideModel.getIns().boOpen=true;this.closeBtnTween();app.ViewManager.dellToggleList()};t.prototype.closeBtnTween=function(){if(this.tweenBtn){Laya.Tween.clear(this.tweenBtn)}};t.prototype.onBtnCloseComplete=function(){this.tweenBtn=Laya.Tween.to(this.btnclose,{alpha:1,scaleX:1,scaleY:1},this.btnTime,null,new Laya.Handler(this,this.playCloseBtn))};t.prototype.playCloseBtn=function(){this.tweenBtn=Laya.Tween.to(this.btnclose,{alpha:.5,scaleX:.9,scaleY:.9},this.btnTime,null,new Laya.Handler(this,this.onBtnCloseComplete))};t.prototype.stopQulityAnim=function(){this.pinzhiji.stop();this.pinzhiji.visible=false;this.pinzhijue.stop();this.pinzhijue.visible=false};t.prototype.setData=function(t){this.imgfabao.skin="";var e=t.itemid;this.cfg=csv.ChouKaProxy.getIns().getBaseCfg(e);this.imgleixing.skin=s.ChouKaModel.getIns().getTypeImg(this.cfg.id);var i=csv.ItemProxy.getIns().itemCfgMap[this.cfg.id];this.labelname.text=app.getLang(this.cfg.namelang);this.labelname.color=game.STYLES.ITEM_QUALITY[i.qua];Laya.timer.once(s.FabaoShadows.USE_TIME,this,this.onImgFabaoComplete);this.te.skin=this._model.getSpecIcon(this.cfg.id);this.te.visible=true;var n=csv.ChouKaProxy.getIns().getQuality(this.cfg.id);this.stopQulityAnim();if(n>=4){this.imgpinzhi.skin="";switch(n){case 4:this.pinzhiji.visible=true;this.pinzhiji.play(0,true);break;case 5:this.pinzhijue.visible=true;this.pinzhijue.play(0,true);break}}else{this.imgpinzhi.skin="res/static/chouka/bg_fabaopinzhi_0"+(n-1)+".png"}var r=s.ChouKaModel.getIns().getWuXinAttr(this.itemList,this.cfg.baseelements.split(";"),this.cfg,true);if(!this._fiveStar){this._fiveStar=new s.FiveStar;this._fiveStar.x=this.imgwuwei.x;this._fiveStar.y=this.imgwuwei.y}var o=app.getLang("magic_color_in").split(":");this._fiveStar.draw(r,csv.ChouKaProxy.getIns().getLen*this.imgwuwei.scaleX,o[0],parseFloat(o[1]));this.wuxing.addChild(this._fiveStar);var a=csv.MagicidProxy.getIns().getSkillParam(this.cfg.id,0,0);this.wuxing.y=fabaonew.LabelTempImage.setNingyunEffect(this.labelList,a);this.playCloseBtn()};t.prototype.onRefreshData=function(t){app.SoundManager.getIns().playSound("firsttime");this.closeBtnTween();this.setData(t);var e=csv.ItemProxy.getIns().itemCfgMap[this.cfg.id];if(e.qua<=3){this.chengse.stop();this.chengse.visible=false}else{var i={};i[4]="zi";i[5]="cheng";i[6]="hong";this.chengse.source="uieffect/ui_fabaodengji_"+i[e.qua]+".ani";this.chengse.play(0,true);this.chengse.visible=true}this.ani2.gotoAndStop(0);this.ani3.on(Laya.Event.COMPLETE,this,this.onAni3Complete);this.ani3.play(0,false);Laya.timer.loop(30,this,this.createShade)};t.prototype.createShade=function(){var t=new s.FabaoShadows;var e=csv.ChouKaProxy.getIns().getBigRes(this.cfg);var i=360*this.imgfabao.scaleX;var n=360*this.imgfabao.scaleY;var r=(this.ani3.index+1)/this.ani3.count;t.setSkin(e,i,n,r,this.imgfabao.x,this.imgfabao.y);this.addChild(t);this.shadeList.push(t)};t.prototype.onAni3Complete=function(){this.ani2.play(0,true);Laya.timer.clear(this,this.createShade)};t.prototype.onImgFabaoComplete=function(){var t=csv.ChouKaProxy.getIns().getBigRes(this.cfg);this.imgfabao.skin=t};t.SINGLE_KEY="chouka.Huodefabaoview";return t}(ui.chouka.huodefabaoviewUI);s.Huodefabaoview=t})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(i){var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){};e.prototype.setLabel=function(t){this.labellingbao.text=t};return e}(ui.chouka.jiangliyulanitemUI);var o=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="chouka.Jiangliyulanitem";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,n);e.setLabel(this.list[t]);e.x=0;e.y=this.y;return e};return t}(list.RowMoveBaseNode);var a=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="chouka.grids.GridView";return t}Object.defineProperty(t.prototype,"model",{get:function(){return i.ChouKaModel.getIns()},enumerable:true,configurable:true});t.prototype.createNode=function(t){var e=l.ItemGAP;var i=Laya.Pool.getItemByClass(this.clsKey,grids.GridView);i.x=t*(i.width+e);i.y=this.y;var n=this.list[t];var r=game.ItemUtil.parserList(n.item)[0];i.showBagCount(-4);r.ext={};var o=r.ext;var a=csv.ChouKaProxy.getIns().getBaseCfg(r.itemCfg.id);if(a){o.level=a.level;o.star=a.star+1;if(this.model.isSpecial(a.id)){o.level=0;o.star=0}o.source=fabaonew.EFabaoSource.TuJian}i.setData(r,null,null,false);var s=n.showprobability/1e4;i.shuzi.visible=true;if(s==0){i.shuzi.text=""}else{i.shuzi.text=s+"%"}return i};return t}(list.RowMoveBaseNode);var l=function(e){__extends(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;t.listCustom=new list.JListCustom;return t}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paneljiangli.vScrollBarSkin=" "};r.prototype.onDisplay=function(){this.callLater(this.onRefresh)};r.prototype.onUnDisplay=function(){this.listCustom.clear()};r.prototype.onRefresh=function(){this.listCustom.init(this.paneljiangli);this.listCustom.clear();var t=parseInt(this.dataSource[0]);for(var e=0;e<csv.ChouKaProxy.getIns().showTypeList.length;e++){var i=csv.ChouKaProxy.getIns().showTypeList[e];var n=csv.ChouKaProxy.getIns().getListByShowType(i,t);if(n.length>0){this.listCustom.split([app.getLang("magicpool_"+t+"_"+i)],o,46,r.ItemGAP);this.listCustom.split(n,a,100,r.ItemGAP,5)}}this.listCustom.end()};r.SINGLE_KEY="chouka.Jiangliyulanview";r.ItemGAP=18;return r}(ui.chouka.jiangliyulanviewUI);i.Jiangliyulanview=l})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var chouka;(function(e){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Laya.View);var n=function(){function r(t,e,i){this.shakePos=new Laya.Point(30,30);this.theParent=e;this.skinView=t;this._cls=i;e.on(Laya.Event.DISPLAY,this,this.onParentDisplay);this.initialize()}r.prototype.initialize=function(){this.skinView.on(Laya.Event.DISPLAY,this,this.onDisplay);this.skinView.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.skinView.ani1.on("p_s_complete",this,this.playAnim);this.skinView.ani1.on("reach",this,this.shake);this.flyEndHandler=new Laya.Handler(this,this.flyEnd);this.shakeIndex=117;this.skinView.ani1.playAndCallIndexArr=[this.shakeIndex]};r.prototype.skinStopClick=function(t){t.stopPropagation()};r.prototype.onParentDisplay=function(){Laya.timer.callLater(this,this.onParentCallLater)};r.prototype.onParentCallLater=function(){this.theParent.addChild(this.skinView)};r.prototype.onDisplay=function(){if(!this.cacheImgList){this.cacheImgList=[]}for(var t=0;t<10;t++){var e=new Laya.Image;e.skin="res/static/chouka/shaohuo/huolu_0000"+t+".png";this.skinView.addChildAt(e,0);var i=new Laya.Image;i.skin="res/static/chouka/shaohuo/dizuo_0000"+t+".png";this.skinView.addChildAt(i,0);this.cacheImgList.push(e);this.cacheImgList.push(i)}this.skinView.on(Laya.Event.CLICK,this,this.skinStopClick);app.SoundManager.getIns().stopMapBgm();Laya.SoundManager.setMusicVolume(1);this.onStageResize();this.onCallLater()};r.prototype.onCallLater=function(){var t=this.curData.reward;this.quaArr=[];this.maxQua=0;this.maxLen=t.length;if(this.maxLen==1){app.SoundManager.getIns().playBgm("draw1")}else{app.SoundManager.getIns().playBgm("draw10")}for(var e=0;e<this.maxLen;e++){var i=t[e];var n=i.itemid;var r=csv.ChouKaProxy.getIns().getBaseCfg(n);var o=void 0;if(r){o=csv.ChouKaProxy.getIns().getQuality(r.id)}else{if(i.status!=2){o=3}else{var a=csv.ItemProxy.getIns().itemCfgMap[n];o=a.qua}}if(o>this.maxQua){this.maxQua=o}this.quaArr.push(o)}this.quaArr.sort(this.sort);this.skinView.ani1.playToAndStop(130);if(this.maxQua==5){this.skinView.cheng.play(0,false)}else if(this.maxQua==4){this.skinView.zi.play(0,false)}else{this.skinView.lan.play(0,false)}};r.prototype.onUnDisplay=function(){this.skinView.off(Laya.Event.CLICK,this,this.skinStopClick);app.SoundManager.getIns().resumeMapBgm();e.ChouKaModule.getIns().playNoticeCallBack(this.curData);this.skinView.ani1.stop();this.skinView.cheng.stop();this.skinView.zi.stop();this.skinView.lan.stop();if(this.skinView.luzi){this.skinView.luzi.filters=[]}if(this.cacheImgList){while(this.cacheImgList.length>0){var t=this.cacheImgList.pop();t.skin="";t.removeSelf()}}};r.prototype.sort=function(t,e){return e-t};Object.defineProperty(r.prototype,"curData",{get:function(){return this.theParent.dataSource[0]},enumerable:true,configurable:true});r.prototype.onStageResize=function(){this.skinView.x=(Laya.stage.width-this.skinView.width)/2;this.skinView.y=(Laya.stage.height-this.skinView.height)/2;this.skinView.imgbg.x=-this.skinView.x-this.shakePos.x;this.skinView.imgbg.y=-this.skinView.y-this.shakePos.y;this.skinView.imgbg.width=Laya.stage.width+this.shakePos.x*2;this.skinView.imgbg.height=Laya.stage.height+this.shakePos.y*2;this.skinView.hitArea=new Laya.Rectangle(0,0,this.skinView.imgbg.width,this.skinView.imgbg.height)};r.prototype.playAnim=function(){this.skinView.ani1.play(130,false);this.endCount=0;var t=[];for(var e=0;e<this.maxLen;e++){var i=this.quaArr[e];var n=void 0;var r=this.skinView.b1.y;var o=void 0;var a=this.skinView.b3.y-100;var s=void 0;var l=void 0;if(e==0){n=this.skinView.b1.x;o=s=this.skinView.b2.x;l=this.skinView.b2.y}else if(e%2==0){var u=e/2;n=this.skinView.b1.x-u*20;o=this.skinView.b2.x-u*30;s=this.skinView.b2.x+game.SceneModel.random(-200,-100);l=this.skinView.b2.y+game.SceneModel.random(-200,0)}else{var u=e/2;n=this.skinView.b1.x+u*20;o=this.skinView.b2.x+u*30;s=this.skinView.b2.x+game.SceneModel.random(200,100);l=this.skinView.b2.y+game.SceneModel.random(-200,0)}t.push([i,n,r,o,a,s,l])}var p=0;while(t.length){var h=void 0;var c=void 0;if(p==0){c=0;h=t.splice(0,1)[0]}else{var f=game.SceneModel.random(0,t.length);h=t.splice(f,1)[0];if(p>=8){c=game.SceneModel.random(500,700)}else if(p<5){c=game.SceneModel.random(300,500)}else{c=game.SceneModel.random(200,400)}}var g=Laya.Pool.getItemByClass(manager.TailFabaoFlyItem.SINGLE_KEY,manager.TailFabaoFlyItem);g.init(h[0],this.skinView.weizhi,h[1],h[2],h[3],h[4],h[5],h[6],c,this.flyEndHandler);p++}};r.prototype.flyEnd=function(){this.endCount++;if(this.endCount>=this.maxLen){this.skinView.removeSelf();e.ChouKaModel.getIns().isStartReqesutDaily=false;app.ViewManager.toggleView(this._cls,app.AppContainer.flowLayer,-1);game.RoleModel.getIns().event(game.RoleModel.EVENTS.SCORE_UPDATE)}};r.prototype.shake=function(){var t;var e;if(this.maxQua==5){t=800;e=1}else if(this.maxQua==4){t=600;e=2}else{t=400;e=3}this._shakeDuration=t;this._shakeStart=Laya.timer.currTimer;this.dex=0;Laya.timer.frameLoop(e,this,this.onShake);if(this.skinView.luzi){this.skinView.luzi.filters=[new Laya.GlowFilter(game.STYLES.ITEM_QUALITY[this.maxQua],8,4,4)]}};r.prototype.onShake=function(){if(Laya.timer.currTimer-this._shakeStart>this._shakeDuration){Laya.timer.clear(this,this.shake);this.skinView.x=(Laya.stage.width-this.skinView.width)/2;this.skinView.y=(Laya.stage.height-this.skinView.height)/2;return}var t=r.SHAKE_ANGLE[this.dex];var e=this.shakePos;var i=Math.cos(t)*e.x;var n=Math.sin(t)*e.y;this.skinView.x=(Laya.stage.width-this.skinView.width)/2+i;this.skinView.y=(Laya.stage.height-this.skinView.height)/2+n;this.dex++;if(this.dex>=r.SHAKE_ANGLE.length){this.dex=0}};r.SHAKE_ANGLE=[Math.PI/2,-Math.PI/2,Math.PI/4,-Math.PI/4,Math.PI/2,-Math.PI/2,Math.PI/4*3,-Math.PI/4*5,Math.PI/2,-Math.PI/2];return r}();e.MyLianbaoview=n;var i=function(e){__extends(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);var t=new ui.chouka.lianbaoviewUI;new n(t,this,i)};i.SINGLE_KEY="chouka.MyLianbaoviewStyle1";return i}(View);e.MyLianbaoviewStyle1=i;var r=function(e){__extends(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);var t=new ui.chouka.lianbaoviewupUI;new n(t,this,i)};i.SINGLE_KEY="chouka.MyLianbaoviewStyle2";return i}(View);e.MyLianbaoviewStyle2=r})(chouka||(chouka={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.add=function(t,e){if(!this.tabCkList){this.tabCkList=[]}var i=false;for(var n=0;n<this.tabCkList.length;n++){var r=this.tabCkList[n];if(r.funcid==t){r.callBack=e;i=true;break}}if(!i){var o={};o.funcid=t;o.callBack=e;this.tabCkList.push(o)}};e.prototype.check=function(t){if(this.tabCkList){for(var e=0;e<this.tabCkList.length;e++){var i=this.tabCkList[e];if(i.funcid==t){return i.callBack.runWith(i.funcid)}}}return false};e.prototype.bind=function(t,e){if(!this.tabCkList){return}for(var i=0;i<this.tabCkList.length;i++){var n=this.tabCkList[i];if(n.funcid==t){n.showEffectHandler=e;e.runWith(this.check(n.funcid));break}}};e.prototype.refresh=function(){if(this.tabCkList){for(var t=0;t<this.tabCkList.length;t++){var e=this.tabCkList[t];if(e.showEffectHandler){e.showEffectHandler.runWith(this.check(e.funcid))}}}};return e}(Laya.EventDispatcher);t.CheckNode=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getInstance=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("gameconfig.csv");this.cfgMap={};if(!t){return}this.cfgMap=t.getMap("id")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getParams=function(t){if(this.cfgMap[t]){return this.cfgMap[t].value}console.log("cfg error.........:"+t);return""};e.getParams=function(t){return e.getInstance().getParams(t)};e.getIntParams=function(t){return parseInt(e.getParams(t))};e.SINGLE_KEY="game.Config";e.ENUM_TYPE={IMG:1,ANI:2,AVATAR:3};return e}(app.ModelBase);t.Config=e;var i=function(){function t(){}t.BUBBLE_NPC_ID=111;t.GUILD_FRESH_COST=209;t.GUILD_FREE_LIMIT=208;t.GUILD_FREE_INTERVAL=210;t.GUILD_HELP=206;t.GUILD_TASK_LIMIT=207;t.CHUANG_GONG_CD=303;t.ROLE_LIMIT=281;t.ANSWER_LOTTER=291;t.BATTLE_LOST_FUNC=308;t.YD_COPY_TIME=350;t.YD_START_TIME=352;t.YD_HURT_TEAM=354;t.YD_HURT_FAMILY=355;t.YD_SHOW_RWD=356;t.YD_LOTTERY_CD=357;t.TOWER_AWARD=382;t.TOWER_ITEM_PRICE=384;t.SHOW_OTHER_PLAYER_TASK_ID=385;t.NPC_TALK_MENU_AUTO_CLOSE=401;t.TASK_TYPE_NO_COUNT=402;t.FRIENDS_LIMIT=9;t.BAG_LIMIT=573;t.ACT_TIP_TYPE=2020;t.FUNIDS=2021;return t}();t.ConfigID=i})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(r){var t=function(e){__extends(c,e);function c(){var t=e!==null&&e.apply(this,arguments)||this;t.mainIconRedirectMap=[];t._roleInited=false;t.ismacInit=false;t.openFailCheck={};t._isInited=false;t.isItemRecord=false;t.isTested=false;return t}c.getIns=function(){return app.Singleton.getInstance(c)};c.prototype.preCheck=function(t){var e=this.cfgMap[t].prefunid;if(e){if(!this.isOpen(e)){return false}}return true};c.prototype.isCanInit=function(){return this._roleInited&&this.isItemRecord&&game.Context.teamLv!=undefined&&this.ismacInit==true};c.prototype.isInited=function(){return this._isInited&&this.isCanInit()};c.prototype.init=function(){this.tab=new r.CheckNode;var t=app.Config.getResById("function.csv");var e=t.getArray();this.arrlist=e;this.obList={};this.cfgMap={};this.teamlvMap={};this.taskMap={};this.sameIdMap={};for(var i=0;i<e.length;++i){var n=e[i];this.cfgMap[n.id]=n;if(n.maindlg){if(!this.obList[n.maindlg]){this.obList[n.maindlg]=[]}this.obList[n.maindlg].push(n.id)}if(!this.teamlvMap[n.teamlevel]){this.teamlvMap[n.teamlevel]=[]}if(n.sameid){if(!this.sameIdMap[n.sameid]){this.sameIdMap[n.sameid]=[]}this.sameIdMap[n.sameid].push(n.id)}if(n.popout){this.teamlvMap[n.teamlevel].push(n.id)}if(n.popout){if(!this.taskMap[n.task]){this.taskMap[n.task]=[]}this.taskMap[n.task].push(n.id)}}this.openedList=[];game.RoleModel.getIns().on(game.RoleModel.EVENTS.INFO_INIT,this,this.onRoleInfoInit);this.onRoleInfoInit()};c.prototype.getSameID=function(t){return t};c.prototype.getUrl=function(t,e){if(e){return"main/"+t+".png"}return"res/static/mainicon/"+t+".png"};c.prototype.onRoleInfoInit=function(){if(game.Context.mainRole&&game.Context.mainRole.level){this.initRoleState()}};c.prototype.onTaskRefresh=function(){if(!this.isInited()){return}this.updateFunctions()};c.prototype.onRoleLevelChange=function(){if(!this.isInited()){return}this.updateFunctions()};c.prototype.onFuncListChange=function(){if(!this.isInited()){return}this.updateFunctions()};c.prototype.initTaskState=function(){this._taskInited=true};c.prototype.initRoleState=function(){this._roleInited=true};c.prototype.initFunctions=function(){if(!this._isInited&&this.isCanInit()){this.updateFunctions(false);game.TaskModel.getIns().on(game.TaskModel.EVENTS.TASK_REFRESH,this,this.onTaskRefresh);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.onRoleLevelChange);this._isInited=true;this.event(c.EVENTS.CHANGE);this.event(c.EVENTS.INITED);if(this.hasQQ_group){game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.QQ_GROUP,undefined,new Laya.Handler(this,this.onOpenQQgroup));csv.MainIconProxy.getIns().registerCheckHandler(csv.MainIconProxy.TYPE_ICON_QQ_GROUP,new Laya.Handler(this,this.onCheckMainDlgHandler))}game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.WX_OL_SERVER,undefined,new Laya.Handler(this,this.onOpenWXOLserver));csv.MainIconProxy.getIns().registerCheckHandler(csv.MainIconProxy.TYPE_ICON_OL_SERVER_QA,new Laya.Handler(this,this.onCheckWXHandler));app.ProtocolRequest.BlackMallReq(shop.EBlackType.Base)}};c.prototype.hasQQ_group=function(){return game.Context.webCfg.qqgroup!=undefined};c.prototype.onCheckMainDlgHandler=function(){return this.hasQQ_group()};c.prototype.onCheckWXHandler=function(){return gamesdk.UrlCfg.pf==gamesdk.UrlCfg.PF.WXMINI};c.prototype.onOpenQQgroup=function(){app.SDK.joinQQGroup()};c.prototype.onOpenWXOLserver=function(){gamesdk.WXminiSDK.getIns().openCustomerServiceConversation()};c.prototype.updateFunctions=function(t){if(t===void 0){t=true}var e=app.Config.getResById("function.csv");var i=e.getArray();for(var n=0,r=i.length;n<r;++n){var o=i[n];var a=parseInt(o.id);if(this.isOpen(o.id)){this.addOpened(a,t)}else{this.removeOpened(a,t)}}};c.prototype.removeOpened=function(t,e){if(e===void 0){e=true}if(typeof t==="string"){t=parseInt(t)}var i=this.openedList.indexOf(t);if(i>-1){this.openedList.splice(i,1);if(e){this.event(c.EVENTS.REMOVE,this.getCfg(t));this.event(c.EVENTS.CHANGE)}}};c.prototype.addOpened=function(t,e){if(e===void 0){e=true}if(typeof t==="string"){t=parseInt(t)}var i=this.openedList.indexOf(t);if(i<0){this.openedList.push(t);if(e){this.event(c.EVENTS.ADD,this.getCfg(t));this.event(c.EVENTS.CHANGE)}}};c.prototype.getCfg=function(t){return this.cfgMap[t]};c.prototype.getOpenNotice=function(t){t=this.getSameID(t);if(game.Context.mainRole&&csv.MapProxy.isInKuaFuMap()&&csv.ActDengLuProxy.getIns().isPartOf(t)){return app.getLang("kfhd_error1")}if(!this._roleInited){return app.getLang("func_er_501")}if(typeof t==="string"){t=parseInt(t)}var e=this.getCfg(t);if(!e){return app.getLang("func_er_500")}if(game.Context.disableIosRecharge()&&e&&e.iso==1){return app.getLang("func_er_7")}var i=game.RoleModel.getIns().checkIfIgnoreOpen(e);if(i){return""}if(this.openFailCheck[t]){var n=this.openFailCheck[t]();if(n){return n}}if(t==csv.FunctionsProxy.ENUMS.TOUZI_LICAI){if(touzilic.TouZiLiCaiModel.getIns().isFinish()){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.CHONGZHI_SHOP){if(game.Context.cz_icon_close){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.XIANSHIMIAOSHA_SHOP){if(!xianshimiaosha.XianShiMiaoShaModle.getIns().isOpenCheck()){return app.getLang(" ")}}if(t==csv.FunctionsProxy.ENUMS.TIANGONPU){if(chart.ChartModel.getIns().isOpen()){}else{return app.getLang("func_er_7")}}if(t==csv.FunctionsProxy.ENUMS.NEW_SHANG_CHENG&&!newshangcheng.NewShangChengModel.getIns().hasOpen()){return" "}if(t==csv.FunctionsProxy.ENUMS.SEVEN_DAY){if(sevenday.SevenDayModel.getIns().isEnd()){return app.getLang("huodong_text06")}}if(this.preCheck(t)==false){return app.getLang("huodong_text06")}if(t==csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_LIST){var r=activitytaren.ActivityTaRenModel.getIns().iconMan.getActVOlist_by_client_type(activitytaren.ActivityTaRenType.ZERO,true);if(r.length<=0){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.XIANSHILIBAO){if(!limittimegift.LimitTimeGiftModel.getIns().isOpen()){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.YI_SHOU_RU_QING){if(yishou.YiShouModel.getIns().activityIsEnd()){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.CHENG_ZHAN_JIJING){if(chengzhanjijing.ChengZhanJiJingModel.getIns().isFinish()){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.CHAO_ZHI_JI_JING){if(newshangcheng.NewShangChengModel.getIns().isChengZhangJijingFinish()){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.CHAO_ZHI_LI_CAI){if(newshangcheng.NewShangChengModel.getIns().isTouZiLiCaiFinish()){return app.getLang("huodong_text06")}}if(t==csv.FunctionsProxy.ENUMS.ZHAN_LIN_MAIN){var o=zhanlin.ZhanLinModel.getIns().time.endTime;var a=zhanlin.ZhanLinModel.getIns().time.startTime;if(o==-1&&a==-1){return app.getLang("pickgourd_des4")}var s=game.Context.getServerTime();if(s>=o){return app.getLang("huodong_text06")}if(s<=a){return app.getLang("pickgourd_des4")}}if(t==csv.FunctionsProxy.ENUMS.ZHU_TI_HUODONG){if(!newshangcheng.NewShangChengModel.getIns().isSubjectOpen()){return app.getLang("huodong_text06")}}if(!activitytaren.ActivityTaRenModel.getIns().iconMan.isCanShowByFuncID(t)){return app.getLang("activity_error1")}if(parseInt(e.huanxingid)){if(!this.isOpen(csv.FunctionsProxy.ENUMS.HUANXING)){return app.getLang("func_er_5")}}if(this.openedList.indexOf(t)===-1){if(parseInt(e.day)){var l=game.Context.getOpenServerDay();if(e.day>l){return app.getLang("func_er_3",e.day)}}if(!game.Context.isTeamLvReach(e.teamlevel,false)){if(e.teamlevel==999){return app.getLang("tips_des_2")}return app.getLang("func_er_0",e.teamlevel)}if(parseInt(e.task)&&!game.TaskModel.getIns().hasCompleteTask(e.task)){return app.getLang("func_er_6",csv.TaskProxy.getTaskName(e.task))}}else{return""}return""};c.prototype.isOpen=function(t,e){if(e===void 0){e=false}if(!t){return true}var i=this.getOpenNotice(t);if(i){e&&manager.FlowManager.instance.flowByStyle1(i);return false}else{return true}};c.prototype.getObfuncByMdlgId=function(t){if(t==csv.MainIconProxy.TYPE_ICON_SHANGCHNEG){var e=huodong.HuoDongShangChengProxy.getIns().funcidlist;return e}return this.obList[t]};c.prototype.isCanAddMainIcon=function(t){if(game.Context.disableIosRecharge()){if(!csv.MainIconProxy.getIns().isMaindlgOpen(t)){return false}}if(t==csv.MainIconProxy.TYPE_ICON_MONSTER_BOOK){if(guaji.GuajiModel.getIns().bookAni){guaji.GuajiModel.getIns().bookAni=false;var e=csv.FunctionsProxy.getIns().getCfg(csv.FunctionsProxy.ENUMS.MONSTER_BOOK);main.FuncOpenView.add(e);return true}else{var i=game.Config.getIntParams(1206);return guaji.GuajiModel.getIns().isActive(i)}}if(t==csv.MainIconProxy.TYPE_ICON_TIANGONPU){if(guaji.GuajiModel.getIns().tiangongAni){guaji.GuajiModel.getIns().tiangongAni=false;var e=csv.FunctionsProxy.getIns().getCfg(csv.FunctionsProxy.ENUMS.TIANGONPU);main.FuncOpenView.add(e);return true}else{return chart.ChartModel.getIns().isOpen()}}if(t==csv.MainIconProxy.TYPE_ICON_FUNGUIDE){var n=main.FunctionGuideModel.getInstance().getAllList();return csv.MainIconProxy.getIns().isMaindlgOpen(t)&&n.length>0}if(t==csv.MainIconProxy.TYPE_ICON_BROTHER){return csv.MainIconProxy.getIns().isMaindlgOpen(t)&&game.Context.roleList.length<game.Context.TOTAL_ROLE_NUM}if(t==csv.MainIconProxy.PEDIAR_NEW){return pedlarnew.PedkarNewModel.getIns().isOpenCheck()}if(t==csv.MainIconProxy.TYPE_ICON_XIANSHIMIAOSHA){return xianshimiaosha.XianShiMiaoShaModle.getIns().isOpenCheck()}if(t==csv.MainIconProxy.GUILD_PK){return guild.GuildPkModel.getIns().IsOpen()}if(csv.MainIconProxy.getIns().isCheckActity(t)){return csv.MainIconProxy.getIns().isActivityShowByMinDlg(t)}if(csv.MainIconProxy.getIns().isMaindlgOpen(t)){return true}return false};c.prototype.getHasRedFuncid=function(t){var e=csv.FunctionsProxy.getIns().getCfg(t);if(e.closure!=""){var i=app.str2Array(e.closure,"-");if(i[0]=="1"){var n=parseInt(i[1]);var r=csv.WindowProxy.getIns().getFuncs(n);var o=[];for(var a=0;a<r.length;a++){if(csv.FunctionsProxy.getIns().isOpen(r[a])){o.push(r[a])}}var s=-1;for(var a=0,l=o.length;a<l;++a){var u=o[a];var p=csv.WindowProxy.getIns().getCfg(n).order||c.IS_DEFAULT_SELECT_RED;if(p==c.IS_DEFAULT_SELECT_RED&&game.ClosureManager.hasXin(u)){s=u;break}}if(s==-1){var h=-1;for(var a=0,l=o.length;a<l;++a){var u=o[a];var p=csv.WindowProxy.getIns().getCfg(n).order||c.IS_DEFAULT_SELECT_RED;if(p==c.IS_DEFAULT_SELECT_RED&&game.ClosureManager.hasDot(u)){h=u;break}}if(h!=-1){t=h}else if(h==-1&&o.length>0){t=o[0]}}else{t=s}}}return t};c.prototype.checkCfgFile=function(){if(this.isTested){return}this.isTested=true;var t=csv.WindowProxy.getIns().windowList;for(var e=0;e<t.length;e++){var i=t[e];if(i.functionid!=""){var n=i.functionid.split(";");var r=void 0;var o="windows id: "+i.id+"  (functionid值"+i.functionid+") ";var a=false;for(var s=0;s<n.length;s++){var l=parseInt(n[s]);var u=csv.FunctionsProxy.getIns().getCfg(l);o+="(funcid:"+l+" maindlg:"+u.maindlg+") ";if(r==undefined){r=u.maindlg}else{if(r!=u.maindlg){a=true}}}if(a){console.error(o)}}}var p=csv.FunctionsProxy.getIns().arrlist;for(var e=0;e<p.length;e++){var h=p[e];if(h.maindlg!=""){if(!csv.MainIconProxy.getIns().getCfg(h.maindlg)){console.error("funcid:"+h.id+"===>function.csv 中字段maindlg:"+h.maindlg+" 不存在于maindlg.csv中")}}}};c.prototype.convertCanOpenfuncid=function(t){var e=t.functionid;if(this.isOpen(e)){if(this.mainIconRedirectMap[e]){var i=this.mainIconRedirectMap[e];return i.runWith(e)}}else{var n=csv.MainIconProxy.getIns().mainDigMap(parseInt(t.id));if(n){var r=n.getCanOpenFuncID();if(r!=-1){e=r}}}if(!guide.GuideModel.getIns().boIgnoreRedRule){if(e==csv.FunctionsProxy.ENUMS.ZHAN_LING_REWARD){return e}e=this.getHasRedFuncid(e)}return e};c.SINGLE_KEY="game.FunctionsProxy";c.IS_DEFAULT_SELECT_RED=0;c.ENUMS={ROLE:1,EQUIP_WEAR:2,SKILL:3,BAG_TOOL:4,BAG_EQUIP:5,MAIL:6,LILIAN:7,EXP:8,GUAJI:11,EQUIP_QIANGHUA:12,EQUIP_XILIAN:13,EQUIP_BAOSHI:14,EQUIP_TAOZHUANG:15,HECHENG_BAOSHI:17,XIULIAN:18,FABAO_JIHUO:19,FABAO_PEIYANG:20,FABAO_JINHUA:21,FABAO_ZHUAGNBEI:22,MOUNT:23,MOUNT_HORSE:24,PET_MAIN:25,PET_QINHE:26,PET_JINHUA:27,PET_JIBAN:28,PET_BEIBAO:29,LIANPENG:30,LIANZI:31,HECHENG_ITEM:32,HECHENG_EQUIP:33,DAILY_TASK:34,DAILY_FIGHT:35,DAILY_LIMIT:36,DAILY_REFIND:37,SHANSHEN_SHILIAN:38,MIJINGGONG:39,HAOYOU:40,HEIMINGDAN:41,SILIAO:42,VIP:43,BOSS_VIP:44,BOSS_WOLRD:45,BOSS_WOLRD_ICE:157,BOSS_KUAFU:149,BOSS_RECORD:156,GUILD_FUN:46,GUILD_HALL:47,GUILD_SHOP:48,GUILD_TECH:49,GUILD_WAREHOUSE:50,GUILD_TASK:51,HULU_PICK:52,GUILD_LIST:53,GUILD_INFO:54,LEVEL_UP_PACKAGE:55,QIAN_DAO:56,BLACK_MARKET:57,TASK_MAIN:58,MALL:59,GROW_UP:60,HONOR_EXCHANGE:61,LILIAN_POINTS:63,SOUL_MONSTER:64,TITLE_NAME:65,SKIN:66,ELITE_CHALLENGE:67,BRAVE_CHALLENGE:68,ARENA:69,TITLE_HEAD:70,JJC:71,GUARD:72,MOUNTAIN:73,RANK_LEVEL:74,JJC_DAILY:75,JJC_SEASON:76,JJC_LAST_SEASON:77,REBIRTH:78,EQUIP_CUILIAN:79,REFINING:80,SOULBODY:81,XIN_FA_XIULIAN:82,XIN_FA_TUPO:83,XIN_FA_LEVEL_UP:84,XIN_FA_BAG:85,YAO_DONG:86,CHONGZHI_SHOP:87,GARDEN:88,GARDEN_GROW:89,JIANG_ZHANG:90,JIANG_ZHANG_SHOP:91,JIANG_ZHANG_ZHOU:92,EQUIP_JINGLIAN:93,ZAIXIAN_JIANGLI:94,TOUZI_LICAI:95,CHENG_ZHAN_JIJING:96,XIAN_SHI_QIANG_GOU:97,MEI_RI_CHONG_ZHI:98,REN_YI_CHONG_ZHI:99,XIAN_SHI_QIANG_GOU2:100,SHOU_CHONG:101,TEGOU:103,BOSS_SHOU_SHA:104,CB_RANK_LEVEL:105,CB_RANK_BROTHER:106,CB_RANK_EQUIP:107,CB_RANK_MAGIC:108,CB_RANK_LILIAN:109,CB_RANK_ZPLUS:110,SHANZHONG_JIUDIE:111,CB_RAN_BOSS_KILL_SHOP:112,CB_RANK_ZUOQI:200,CB_RANK_PET:201,CB_RANK_QIANGHUA:202,RANK_UP_LIAN_PENG:113,RANK_UP_QI_SHU:114,RANK_UP_LING_ZHI:115,DENG_LU_HUO_DONG:120,LING_YUAN_GOU_MONEY:122,ZHAN_LING_REWARD:116,ZHAN_LING_TASK:117,ZHAN_LING_RECHANGE:118,ZHAN_LING_RANK:119,TOWER_MONSTER:123,MONI_GUAJI:125,PEDIAR:127,PEDIAR_FUNC:128,HECHENG_PET:129,EQUIP_RANK:130,PET_RANK:131,FABAO_RANK:132,YUANSHEN_RANK:133,MONSTER_SOUL_BAG:136,HU_SHEN_FU:137,TREASURE_NORMAL:138,TREASURE_SUPER:139,TALENT_TREE:140,LEAD_STRONGER:141,LEAD_UPGRADE:142,SETTING_VIEW:143,HINT_VIEW:144,WEAPONS_MAIN:145,WEAPONS_LV_UP:146,QUICK_GUAJI:147,FANGCHENMI_AWARD:148,SIX_BOX:150,SIX_BOX_BAG:151,SIX_BOX_HECHENG:152,GUILD_PK:153,GUILD_PK_SHOP:154,SEVEN_SOUL:155,MORE:158,ROLE_BUFF_VIEW:159,REDPACK_GET_GUILD:160,REDPACK_GET_ROLE:161,REDPACK_GET_SYS:162,REDPACK_GUILD:163,ZJQW_MAIN:164,ZJQW_RANK:165,CHECK_WUXING:166,CHECK_ROLE:167,CHECK_EQUIP:168,TEAM_ZHANYOU_INVITE:176,TEAM_ZHANYOU_INFO:177,TEAM_ZHANYOU_AWARDS:178,TEAM_ZHANYOU_SHOP:179,GOD_MOUNTAIN_DUNGEON:180,FRIEND_APPLY_LIST:181,ZHAN_LIN_MAIN:182,FUBEN_DAILY:183,FUBEN_ACTIVITY:184,FARM:185,PublicNotice:188,HuluBrother:189,QUESTION:190,JIHUOMA:191,PET_GEM:192,PET_HAND_BOOK:193,HORSE_HAND_BOOK:194,QQ_GROUP:195,SHOUJI_BANDDING:196,CHAT:197,QI_RI_XIAN_SHI_SHOP:203,QI_RI_LEI_CHONG:205,LIAN_XU_LEI_CHONG:204,TEGOU_PHOENIX:206,SCORE_RANK:210,HEADFRAME:211,REFINING_HULUYE:212,REFINING_RESET:213,HLXD_JINGYING:214,SEVEN_DAY:215,TURNTABLE:220,ACT_SING_IN:216,LEI_JI_CHONG_ZHI:217,LEI_JI_XIAOFEI:218,ACT_HUNT_RICH:221,LIMIT_SHOP:219,ROLE_MAIN:222,CHOU_KA:223,ROLE_WUXING:224,TEAM_ICON:225,PASS:226,YUANSHEN_DONGFU:227,FABAONEW:250,FABAOLANGHUANGE:251,FABAOBAG:252,FABAOTUJIAN:253,FABAO_HECHENG:254,MEIRI_TEHUI:255,BOSS_CAVE:256,RESONATE_QIANGHUA:257,RESONATE_CUILIAN:258,RESONATE_BAOSHI:259,FABAO_GONGMING:260,MOUNTAIN_NEW:261,MOUNTAIN_RANK:262,HIGH_BLACK_SHOP:263,YAO_WANG_BOSS:10,YAO_WANG_BOSS_AWARD:265,BAG_BAOSHI:266,BAG_DANYAO:267,NEW_JJC:268,NEW_JJC_RANK:269,REFINE_HOUSE:270,FRIENDS_SHOP:271,GARDEN_ENTER:272,GUAIJI_MAIN:273,RANK_MOUNT:274,PEDIAR_FUNC_NEW:275,MJING_ITEM:276,HOD_DONG_SHANG_CHENG:281,GUANKA_RANK:282,MONSTER_BOOK:285,KUAFU_SHOP:292,GUILDBOSS:277,GUILDBOSS_TREASURY:278,GUILDBOSS_HURTREWARD:279,GUILDBOSS_RANK:280,TIANGONPU:286,MIJING_GUAJI:287,KUAFU_RANK:291,WUXING_SKILL:299,BROTHER:301,CHAT_BUBBLE:302,CHAT_GUAJIAN:303,ZHUAN_PAN:307,NEW_SHANG_CHENG:308,SEVEN_DAY_SIGN:309,HUO_DONG_GIFT:310,CHAO_ZHI_LI_CAI:312,CHAO_ZHI_JI_JING:313,MEI_RI_TE_HUI:314,CHAKAN_SCORE:320,SHOUHU_HULU:330,DAILY_SHOW:340,DAY_AWARD:315,WEEK_AWARD:316,MONTH_AWARD:317,XIANSHIMIAOSHA:311,XIANSHIMIAOSHA_SHOP:322,WEEK_CARD:318,MONTH_CARD:319,FOREVER_CARD:321,XIANSHILIBAO:341,HUO_DONG_GIFT_DFXXR:342,HUO_DONG_GIFT_BZG_UP:343,HUO_DONG_GIFT_YYJS:344,HUO_DONG_GIFT_ZYCMR:345,BAG_PET:347,PET_LIST:346,PET_FETTER:365,PET_BATTLE:364,PET_EGGS:367,FABAO_GRID_ENABLE:349,LING_YUAN_GOU_LIST:348,ZHU_TI_HUODONG:360,DIANFENCESHI:361,XIANSHI_TEHUI_LIBAO:362,KUAFU_XIULIAN:363,XIANSHI_TEHUI_LIBAO_2:366,SEVEN_DAY_SIGN_BEI:368,ZHAN_LIN_MAIN_BEI:369,SHENBING:370,GAI_MING:371,BOOK_MONSTER_BOSS:372,FA_BAO_SHU_XING:373,JI_JIANG_KAI_QI:375,FA_BAO_SHENG_XING:376,FA_BAO_ZHULING:377,PET_REPUTION:378,BOSS_QIFU:380,PET_ITEM_ONE:381,PET_ITEM_TWO:382,PET_ITEM_THREE:383,PET_ITEM_FOUR:384,XIAN_YAO_DING_ZHI:385,FABAO_LINGTAI:386,FATE_POOL:387,TONGTIANGE:388,HOME_EVENT:389,TONGTIANGE_SHOP:390,TONGTIANGE_SHOP_PAIHANG:391,TONGTIANGE_CHALLENGE:392,FUNPROGRESS:393,PET_GUARD:394,TONGTIANGE_EXCHANGE:395,YI_SHOU_RU_QING:396,YI_SHOU_RU_QING_TIAOZHAN:397,YI_SHOU_RU_QING_LI_BAO:398,YI_SHOU_RU_QING_DUIHUAN:399,YI_SHOU_RU_QING_PAIHANG:400,SHARE_DAILY:406,SHARE_WEEK:407,SHARE_FRIEND_LEVEL:408,SHARE_QUN_LEVEL:409,SHARE_LEVEL_UP:410,SHARE_HELP:411,WX_PAIHANG:414,QIYU_EXPLORE:401,QIYU_CHALLENGE:402,QIYU_GIFT:403,QIYU_EXCHANGE:404,QIYU_RANK:405,BAG_FUMO:412,ZHUANGBEI_FUMO:413,FUMO_EARTH:417};c.EVENTS={INITED:"inited",ADD:"add",REMOVE:"remove",CHANGE:"change"};return c}(app.ModelBase);r.FunctionsProxy=t;var e=function(){function t(t,e,i,n){this.iconEffect=new main.IconEffect;this.isCloseAll=n;this.btn=t;this.fid=e;this.isAct=i;var r=csv.FunctionsProxy.getIns().getCfg(e);this.cfg=csv.MainIconProxy.getIns().getCfg(r.maindlg);t.on(Laya.Event.DISPLAY,this,this.onDisplay);t.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);t.on(Laya.Event.CLICK,this,this.onClick)}t.prototype.onClick=function(){if(this.isCloseAll){Laya.Dialog.closeAll()}csv.OtherFuncOpen.onClick(this.fid,this.isAct)};t.prototype.onDisplay=function(){this.iconEffect.setEffect(this.cfg,this.btn,!this.cfg.redflag,this.btn,"0.7,-6,-8");csv.OtherFuncOpen.onDisplay(this.btn,this.fid)};t.prototype.onUnDisplay=function(){this.iconEffect.removeSelf()};return t}();r.OtherMainIcon=e;var i=function(){function t(){}t.register=function(t,e,i,n){t.on(Laya.Event.CLICK,this,this.onClick,[e,i,n]);t.on(Laya.Event.DISPLAY,this,this.onDisplay,[t,e])};t.onDisplay=function(t,e){if(csv.FunctionsProxy.getIns().isOpen(e)){if(game.ClosureManager.hasDot(e)){game.RedDotView.addTo(t)}else{game.RedDotView.removeFrom(t)}t.visible=true}else{t.visible=false}};t.onClick=function(t,e,i){if(e){game.ClosureManager.callFunction(t);newshangcheng.NewShangChengView.callBackFunc=i}else{game.ClosureManager.callFunctionByNpcOpen(t);common.CommonWindowMK.callBackFunc=i}};return t}();r.OtherFuncOpen=i})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(a,e);function a(){var t=e!==null&&e.apply(this,arguments)||this;t.mainDlgCheckMap={};return t}a.getIns=function(){return app.Singleton.getInstance(a)};a.prototype.init=function(){this.datas={};this.mldCfgMap={};this.linkMaindlgs={};this.linkMap={};var t=app.Config.getResById("maindlg.csv");this.dataArr=t.getArray();this.dataMap=t.getMap("id");this._battleArr=[];for(var e=0;e<a.MAX_GROUP;++e){this.datas[e]=[]}for(var e=0,i=this.dataArr.length;e<i;++e){var n=this.dataArr[e];if(this.datas[n.arrang]){this.datas[n.arrang].push(n)}if(n.linkmaindlgs!=""){var r=app.str2Array(n.linkmaindlgs,";");this.linkMaindlgs[n.id]=r;for(var o=0;o<r.length;++o){this.linkMap[r[o]]=n.id}}if(n.fightdisplay>0){this._battleArr.push(n)}}this._battleArr.sort(this.doBattleSort);for(var e=0;e<a.MAX_GROUP;++e){if(this.datas[e]){this.datas[e].sort(this.doSort)}}};a.prototype.isActivityShowByMinDlg=function(t){var e=this.getMainDlgMap();var i=e[t];if(i){return i.isCanShow()}};a.prototype.getMainDlgMap=function(){if(!this.mainDlgMap){this.mainDlgMap={};for(var t=0,e=this.dataArr.length;t<e;++t){var i=this.dataArr[t];this.mainDlgMap[i.id]=new activitytaren.MainDlgIconVO(i)}}return this.mainDlgMap};a.prototype.mainDigMap=function(t){var e=this.getMainDlgMap();return e[t]};a.prototype.isCheckActity=function(t){var e=this.getMainDlgMap();var i=e[t];if(i)return i.type==activitytaren.MainDlgIconVO.TYPE_ACTITY_ID};a.prototype.doSort=function(t,e){var i=parseInt(t.sorting);var n=parseInt(e.sorting);if(i===n){return 0}else if(i<n){return-1}else{return 1}};a.prototype.doBattleSort=function(t,e){var i=parseInt(t.fightdisplay);var n=parseInt(e.fightdisplay);if(i===n){return 0}else if(i<n){return-1}else{return 1}};a.prototype.getCfg=function(t){return this.dataMap[t]};a.prototype.getNewList=function(t){var e=[];for(var i=0;i<t.length;i++){var n=t[i];if(n.id==csv.MainIconProxy.TYPE_ICON_SHANGCHNEG||n.id==csv.MainIconProxy.TYPE_ICON_SHOUCHONG){}else{e.push(n)}}return e};a.prototype.getButtonList=function(t){return this.datas[t]};a.prototype.getListByType=function(t,e){if(e===void 0){e=true}var i=this.getButtonList(t);if(e){return i.filter(this.onFilter)}return i};a.registCustomOpen=function(t,e,i){a.costomOpenMap[t]={thisAny:e,closure:i}};a.prototype.onFilter=function(t){var e=a.costomOpenMap[t.id];if(e&&!e.closure.call(e.thisAny)){return false}var i=parseInt(t.lv);var n=parseInt(t.colselv)?parseInt(t.colselv):1e5;var r=true;if(parseInt(t.buttonshow)==0){return true}if(parseInt(t.day)&&parseInt(t.day)>game.Context.getOpenServerDay()){return false}return r};a.prototype.errorMsg=function(t){var e=game.Context.mainRole.level;if(parseInt(t.lv)&&parseInt(t.lv)>e){return app.getLang("func_er_1",t.lv)}if(parseInt(t.colselv)&&parseInt(t.colselv)<=e){return app.getLang("func_er_2",t.colselv)}if(parseInt(t.day)&&parseInt(t.day)>game.Context.getOpenServerDay()){return app.getLang("func_er_3",t.day)}return""};a.prototype.getBattleIcons=function(){return this._battleArr.filter(this.onFilter)};a.prototype.refreshListById=function(t){var e=this.getCfg(t);if(!e){console.log("MainDlgID不存在:"+t);return}var i=parseInt(e.arrang);if(a.leftGroup==i){main.LeftIconList.getIns().refreshAll()}else if(a.rightGroup==i){main.RightIconList.getIns().refreshAll()}};a.prototype.isOpen=function(t){if(this.onFilter(t)){return true}return false};a.prototype.checkLevel=function(t){var e=this.getCfg(t);var i=0;for(var n=0;n<game.Context.roleList.length;n++){var r=game.Context.roleList[n].level;if(parseInt(e.lv)&&parseInt(e.lv)<=r){i++}}if(i<parseInt(e.role)){return false}return true};a.prototype.registerCheckHandler=function(t,e){this.mainDlgCheckMap[parseInt(t)]=e};a.prototype.isMaindlgOpen=function(t){var e=csv.MainIconProxy.getIns().mainDigMap(t);if(e){var i=e.getCanOpenFuncID();if(i==-1){return false}}if(this.mainDlgCheckMap[t]){var n=this.mainDlgCheckMap[t];if(n){if(n.run()==false){return false}}}return true};a.SINGLE_KEY="csv.MainIconProxy";a.mainLeftGroup=1;a.mainRightGroup=2;a.leftGroup=3;a.rightGroup=4;a.rightTopGroup=5;a.redPackageGroup=6;a.homeRightBottomGroup=7;a.guajiRightBottomGroup=8;a.midBottomGroup=9;a.bigrightTopGroup=11;a.leftrightTopGroup=10;a.hintGroup=13;a.JUESE=1;a.BAG=4;a.TYPE_ICON_SHANG_CHENG=20;a.GUILD_PK=56;a.HAOYOU=66;a.SETTING=82;a.FUNPROGRESS=119;a.MAX_GROUP=100;a.TYPE_ICON_ONLINE=30;a.TYPE_ICON_CHONGZHI=34;a.TYPE_ICON_SHOUCHONG=35;a.TYPE_ICON_KAIFU_CHONGBAN=38;a.TYPE_ICON_HULUWA=25;a.TYPE_ICON_RICHANG=8;a.TYPE_ICON_BOSS=106;a.TYPE_ICON_UPGRADE=49;a.TYPE_ICON_STRONGER=48;a.TYPE_ICON_QUICKGUAJI=52;a.TYPE_ICON_REDPACK_GUILD=59;a.TYPE_ICON_REDPACK_ROLE=60;a.TYPE_ICON_REDPACK_SYS=61;a.TYPE_ICON_QUESTION=71;a.TYPE_ICON_QQ_GROUP=72;a.TYPE_ICON_OL_SERVER_QA=122;a.TYPE_ZHANLIN_ICON=89;a.TYPE_ICON_PEDKAR_HUO_DONG=44;a.TYPE_ICON_PEDKAR_FUNC=45;a.TYPE_ICON_SEVEN_DAY=74;a.YAO_WANG_FIGHT=80;a.PEDIAR_NEW=85;a.TYPE_ICON_BROTHER=90;a.TYPE_ICON_YUAN_BAO_SHOP=91;a.TYPE_ICON_FUNGUIDE=67;a.TYPE_ICON_MIJING=93;a.TYPE_ICON_MONSTER_BOOK=92;a.TYPE_ICON_TIANGONPU=94;a.TYPE_ICON_ZHUANPAN=95;a.TYPE_ICON_SHANGCHNEG=96;a.TYPE_ICON_XIANSHIMIAOSHA=98;a.TYPE_ICON_YUANBAO_SHANGCHNEG=99;a.TYPE_ICON_XING_YAO_DING_ZHI=114;a.costomOpenMap={};return a}(app.ModelBase);t.MainIconProxy=e})(csv||(csv={}));var game;(function(t){var e=function(){function t(){}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.getCurrentState=function(){return this._currentState};t.prototype.enterState=function(t){};t.prototype.leaveState=function(t){};t.SINGLE_KEY="game.SceneState";return t}();t.SceneState=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};Object.defineProperty(e.prototype,"cfgMap",{get:function(){if(this._cfgMap==null){var t=app.Config.getResById("sound.csv");if(t!=null){this._cfgMap=t.getMap("effects")}}return this._cfgMap},enumerable:true,configurable:true});e.prototype.getSoundRes=function(t){var e="";if(this.cfgMap!=null&&this.cfgMap[t]!=null){e="res/sound/"+this.cfgMap[t]["sound"]+"."+ent.Entry.soundSuffix}return e};e.SINGLE_KEY="csv.SoundConfig";return e}(app.ModelBase);t.SoundConfig=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("window.csv");this.cfgMap=t.getMap("id");this.windowList=t.getArray();this.funcMap={}};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getCfgByFunId=function(t){for(var e=0;e<this.windowList.length;e++){var i=this.windowList[e].functionid.split(";");for(var n=0;n<i.length;n++){if(t==+i[n]){return this.windowList[e]}}}};e.prototype.getFuncs=function(t){if(!this.funcMap[t]){this.funcMap[t]=[];var e=this.getCfg(t);if(e){var i=app.str2Array(e.functionid,";");for(var n=0,r=i.length;n<r;n++){if(i[n]!=""){this.funcMap[t].push(parseInt(i[n]))}}}else{console.error(" windowid="+t+" 配置不存在!")}}return this.funcMap[t]};e.SINGLE_KEY="csv.WindowProxy";return e}(app.ModelBase);t.WindowProxy=e})(csv||(csv={}));var game;(function(u){var t=function(){function l(){}l.registClosure=function(t,e){l.customClosure[t]=e};l.callStr=function(t,e,i,n){if(l.customClosure[t]){l.customClosure[t].runWith(e);return}var r=app.str2Array(t,"-");var o;if(r.length==1){o=u.ClosureManager.TYPES.WIN_OPEN}else{o=parseInt(r.shift())}r=r.concat(e);switch(o){case u.ClosureManager.TYPES.WIN_OPEN:r.unshift(r.shift(),i,n);u.WindowsResigter.call.apply(u.WindowsResigter,r);break;case u.ClosureManager.TYPES.TASK_TRACKING:break;case l.TYPES.INS_ITEM_MENU:break;case l.TYPES.BATTLE_VIEW:Laya.Dialog.manager.closeAll();break}};l.getRealFuncID=function(t){var e=t;var i=csv.FunctionsProxy.getIns().getCfg(t);if(i.closure&&i.closure.length>0){var n=app.str2Array(i.closure,"-");var r=parseInt(n[1]);var o=csv.WindowProxy.getIns().getFuncs(r);for(var a=0,s=o.length;a<s;++a){if(csv.FunctionsProxy.getIns().isOpen(o[a])===false){continue}else{}}}return e};l.callFunc=function(t,e,i,n,r){if(i===void 0){i=true}if(n===void 0){n=false}if(csv.FunctionsProxy.getIns().isOpen(e,true)){if(csv.NpcProxy.getIns().funcNpcMap[e]&&!u.WindowsResigter.isContainFuncID(e)){if(battle.BattleModel.getIns().checkBattleState(true)){return}if(t){Laya.Dialog.closeAll()}var o=csv.NpcProxy.getIns().getNpcVO(csv.NpcProxy.getIns().funcNpcMap[e]);var a=o.getCfg().dis;if(Math.abs(u.Context.mainRole.posX-o.posX)<=a&&Math.abs(u.Context.mainRole.posY-o.posY)<=a){l.callStr(e.toString(),r,i,n);if(r[0]&&r[0]instanceof Laya.Handler){Laya.timer.once(100,this,function(){r[0].run()})}}else{role.LeadingRoleView.getIns().aiTalk(o,ai.NpcTalkAI.ENUM_TYPE.FUNC,e,[i,n,r])}}else if(e==csv.FunctionsProxy.ENUMS.NEW_SHANG_CHENG||huodong.HuoDongShangChengProxy.getIns().funcidlist.indexOf(e)!=-1){if(app.ViewManager.DisplayedInStage(newshangcheng.NewShangChengView.SINGLE_KEY)){var s=[];s[0]=[e];newshangcheng.NewShangChengView.getIns().dataSource=s;newshangcheng.NewShangChengView.getIns().onUpdateShangCheng()}if(t){Laya.Dialog.closeAll()}u.ClosureManager.callFunctionByNpcOpen(csv.FunctionsProxy.ENUMS.NEW_SHANG_CHENG,true,false,[e])}else{l.callStr(e.toString(),r,i,n)}}};l.callFunction=function(t,e,i){if(e===void 0){e=true}if(i===void 0){i=false}var n=[];for(var r=3;r<arguments.length;r++){n[r-3]=arguments[r]}var o=csv.FunctionsProxy.getIns().getCfg(t);if(!o){console.log("function id undefined: "+t);return}l.callFunc(true,t,e,i,n)};l.callFunctionDontCloseAll=function(t,e,i){if(e===void 0){e=true}if(i===void 0){i=false}var n=[];for(var r=3;r<arguments.length;r++){n[r-3]=arguments[r]}var o=csv.FunctionsProxy.getIns().getCfg(t);if(!o){console.log("function id undefined: "+t);return}l.callFunc(false,t,e,i,n)};l.callFunctionByNpcOpen=function(t,e,i){if(e===void 0){e=true}if(i===void 0){i=false}var n=[];for(var r=3;r<arguments.length;r++){n[r-3]=arguments[r]}var o=csv.FunctionsProxy.getIns().getCfg(t);if(!o){console.log("function id undefined: "+t);return}if(csv.FunctionsProxy.getIns().isOpen(t,true)){l.callStr(t.toString(),n,e,i)}};l.addDot=function(t,e,i){if(e===void 0){e=0}if(i===void 0){i=true}if(!t){return}if(typeof t==="string"){t=parseInt(t)}if(i&&csv.FunctionsProxy.getIns().isOpen(t)===false){this.removeDot(t);return}if(l._dotList.indexOf(t)===-1){l._dotList.push(t)}l._numDic[t]=e;u.Context.event(u.ContextEvent.FUNCTION_DOT_CHANGE,t);if(t==csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_LV||t==csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_MONEY){u.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_LIST,e,i)}var n=csv.FunctionsProxy.getIns().sameIdMap[t];if(n){for(var r=0;r<n.length;r++){u.ClosureManager.addDot(n[r],e,i)}}};l.hasDot=function(t){t=csv.FunctionsProxy.getIns().getSameID(t);if(typeof t!="number"){t=parseInt(t)}return l._dotList.indexOf(t)>-1};l.getNum=function(t){return l._numDic[t]};l.removeDot=function(t){if(typeof t==="string"){t=parseInt(t)}var e=l._dotList.indexOf(t);if(e>-1){l._dotList.splice(e,1);l._numDic[t]=0;u.Context.event(u.ContextEvent.FUNCTION_DOT_CHANGE,t)}if(t==csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_LV||t==csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_MONEY){u.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.LING_YUAN_GOU_LIST)}var i=csv.FunctionsProxy.getIns().sameIdMap[t];if(i){for(var n=0;n<i.length;n++){u.ClosureManager.removeDot(i[n])}}};l.addXin=function(t,e){if(e===void 0){e=1}if(typeof t==="string"){t=parseInt(t)}if(!l._xinMap[e]){l._xinMap[e]=[]}if(l._xinMap[e].indexOf(t)===-1){l._xinMap[e].push(t)}u.Context.event(u.ContextEvent.FUNCTION_XIN_CHANGE,t)};l.hasXin=function(t,e){if(e===void 0){e=1}if(typeof t!="number"){t=parseInt(t)}if(!l._xinMap[e]){l._xinMap[e]=[]}return l._xinMap[e].indexOf(t)>-1};l.removeXin=function(t,e){if(e===void 0){e=1}if(typeof t==="string"){t=parseInt(t)}if(!l._xinMap[e]){l._xinMap[e]=[]}var i=l._xinMap[e].indexOf(t);if(i>-1){l._xinMap[e].splice(i,1);u.Context.event(u.ContextEvent.FUNCTION_XIN_CHANGE,t)}};l.addLimit=function(t){if(typeof t==="string"){t=parseInt(t)}if(!l._limitList){l._limitList=[]}if(l._limitList.indexOf(t)===-1){l._limitList.push(t)}u.Context.event(u.ContextEvent.FUNCTION_LIMIT_CHANGE,t)};l.hasLimit=function(t){if(typeof t!="number"){t=parseInt(t)}if(!l._limitList){l._limitList=[]}return l._limitList.indexOf(t)>-1};l.removeLimit=function(t){if(typeof t==="string"){t=parseInt(t)}if(!l._limitList){l._limitList=[]}var e=l._limitList.indexOf(t);if(e>-1){l._limitList.splice(e,1);u.Context.event(u.ContextEvent.FUNCTION_LIMIT_CHANGE,t)}};l.TYPES={WIN_OPEN:1,TRANSPORT:2,TASK_TRACKING:3,BATTLE_VIEW:4,INS_ITEM_MENU:1e3};l.customClosure={};l._dotList=[];l._numDic={};l._xinMap={};l._limitList=[];return l}();u.ClosureManager=t})(game||(game={}));var game;(function(l){var t=function(){function t(t,e,i,n){this.boChild=n;this._target=t;this._funcs=[];this._activities=[];this._x=isNaN(e)?t.width:e;this._y=isNaN(i)?0:i;if(t["__redOb"]){this.redOb=t["__redOb"]}this.redDot=new l.RedDotView;if(n){this.redDot.x=this._x;this.redDot.y=this._y}this._target.on(Laya.Event.DISPLAY,this,this.onDisplay);this._target.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);if(Laya.stage.contains(t)){this.onDisplay()}}t.prototype.setTarget=function(){if(!this.boChild){util.SpriteLinkUtil.addLinkChild(this._target,this.redDot,app.AppContainer.redPointLayer,this._x,this._y,true)}else{this._target.addChild(this.redDot)}this.redDot.alpha=0};t.prototype.onDisplay=function(){this.setTarget();l.Context.on(l.ContextEvent.FUNCTION_DOT_CHANGE,this,this.onDotChange);l.Context.on(l.ContextEvent.FUNCTION_XIN_CHANGE,this,this.onDotChange);l.Context.on(l.ContextEvent.FUNCTION_LIMIT_CHANGE,this,this.onLimitChange);l.RoleModel.getIns().on(l.RoleModel.EVENTS.LEVEL_CHANGE,this,this.onLevelChange);l.TaskModel.getIns().on(l.TaskModel.EVENTS.TASK_REFRESH,this,this.onTaskRefresh);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.CHANGE,this,this.onDotChange);Laya.timer.callLater(this,this.updateDot);Laya.timer.callLater(this,this.updateLimit)};t.prototype.onUnDisplay=function(){if(!this.boChild){util.SpriteLinkUtil.removeLinkChild(this._target,this.redDot)}else{this._target.removeChild(this.redDot)}l.RoleModel.getIns().off(l.RoleModel.EVENTS.LEVEL_CHANGE,this,this.onLevelChange);l.TaskModel.getIns().off(l.TaskModel.EVENTS.TASK_REFRESH,this,this.onTaskRefresh);csv.FunctionsProxy.getIns().off(csv.FunctionsProxy.EVENTS.CHANGE,this,this.onDotChange);l.Context.off(l.ContextEvent.FUNCTION_DOT_CHANGE,this,this.onDotChange);l.Context.off(l.ContextEvent.FUNCTION_XIN_CHANGE,this,this.onDotChange);l.Context.off(l.ContextEvent.FUNCTION_LIMIT_CHANGE,this,this.onLimitChange)};t.prototype.onLevelChange=function(){Laya.timer.callLater(this,this.updateDot)};t.prototype.onTaskRefresh=function(){Laya.timer.callLater(this,this.updateDot)};t.prototype.onDotChange=function(t){if(this._funcs.indexOf(t)>-1){Laya.timer.callLater(this,this.updateDot)}};t.prototype.clear=function(){while(this._funcs.length){this._funcs.pop()}};t.prototype.changeDot=function(){Laya.timer.callLater(this,this.updateDot)};t.prototype.updateDot=function(){var t=false;var e=0;for(var i in l.RedDotView.ENUM_TYPE){var n=l.RedDotView.ENUM_TYPE[i];for(var r=0;r<this._funcs.length;++r){var o=this._funcs[r];if(l.ClosureManager.hasXin(o,n)){this.redDot.setType(n);this.redDot.alpha=1;return}}}for(var r=0;r<this._funcs.length;++r){var o=this._funcs[r];if(l.ClosureManager.hasDot(o)){e=Math.max(l.ClosureManager.getNum(o),e);t=true;break}}if(t){this.redDot.alpha=1;this.redDot.setType(0)}else{this.redDot.alpha=0}this.redOb&&this.redOb.runWith(t)};t.prototype.obFunc=function(t){if(!t){return}this._funcs=[];for(var e=0;e<t.length;++e){var i=Number(t[e]);i=csv.FunctionsProxy.getIns().getSameID(i);this._funcs.push(i)}if(Laya.stage.contains(this._target)){Laya.timer.callLater(this,this.updateDot)}};t.prototype.onLimitChange=function(t){if(this._funcs.indexOf(t)>-1){Laya.timer.callLater(this,this.updateLimit)}};t.prototype.updateLimit=function(){if(this.ignoreLimit){return}var t=false;if(!this.limit){this.limit=new Laya.Image;this.limit.skin="public/bg_xianshidaoju.png"}for(var e=0;e<this._funcs.length;++e){var i=this._funcs[e];if(l.ClosureManager.hasLimit(i)){t=true;break}}if(t){this._target.addChild(this.limit)}else{this.limit.removeSelf()}};t.registRedFunc=function(t,e,i){var n=csv.FunctionsProxy.getIns().getCfg(t);this.doFuncReds(n,e,i);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.CHANGE,e,i)};t.doFuncReds=function(t,r,o){if(t.redrule==""){return}var a=app.str2Array(t.redrule,";","-");var e=function(t,e){var i=a[t];var n=i.shift();if(n=="1"){l.RoleModel.getIns().on(l.RoleModel.EVENTS.LEVEL_CHANGE,r,o)}else if(n=="2"){l.MoneyModel.getIns().on(l.MoneyModel.EVENTS.MONEY_CHANGE,s,function(t){if(i.length==0){Laya.timer.callLater(r,o)}else if(i.indexOf(t.toString())!=-1){Laya.timer.callLater(r,o)}})}else if(n=="3"){l.GridsModel.getIns().on(l.GridsModel.EVENTS.ITEM_UPDATE,s,function(t,e){if(e){if(i.length==0){Laya.timer.callLater(r,o)}else{if(i.indexOf(e.itemCfg.redtype.toString())!=-1){Laya.timer.callLater(r,o)}}}else{Laya.timer.callLater(r,o)}})}else if(n=="4"){l.RoleModel.getIns().on(l.RoleModel.EVENTS.PLAYER_NUM_MODIFY,r,o)}else if(n=="5"){l.RoleModel.getIns().on(l.RoleModel.EVENTS.TEAM_LEVEL_INIT,r,o);l.RoleModel.getIns().on(l.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,r,o)}};var s=this;for(var i=0,n=a.length;i<n;i++){e(i,n)}};return t}();l.FuncDotAdapter=t})(game||(game={}));var game;(function(t){var e=function(){function t(t,e,i,n,r){if(e===void 0){e=0}if(i===void 0){i=-5}if(n===void 0){n=true}if(r===void 0){r=0}this.target=t;this.offX=e;this.offY=i;if(!r){r=800+Math.random()*100}this.time=r;this.timeLine=new Laya.TimeLine;this.reLoc(t.x,t.y);t.on(Laya.Event.DISPLAY,this,this.onDisplay);t.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);if(n){this.play()}}t.prototype.reLoc=function(t,e){this.locX=t;this.locY=e;this.target.x=t;this.target.y=e;this.timeLine.reset();this.timeLine.to(this.target,{y:this.locY+this.offY,x:this.locX+this.offX},this.time,Laya.Ease.linearNone);this.timeLine.to(this.target,{y:this.locY,x:this.locX},this.time,Laya.Ease.linearNone)};t.prototype.onDisplay=function(){if(this._isPlaying){this.timeLine.play(null,true)}};t.prototype.onUnDisplay=function(){this.timeLine.pause()};t.prototype.stop=function(){this._isPlaying=false;this.timeLine.pause()};t.prototype.play=function(){this._isPlaying=true;this.timeLine.play(null,true)};return t}();t.ShakeHelper=e})(game||(game={}));var game;(function(t){var e=function(){function t(){}t.prototype.tabRegister=function(t,e,i,n){if(n===void 0){n=0}};return t}();t.TabRegister=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.width=e.WIDTH;this.imgdiban.centerX=0;this.gezi.centerX=0};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){i.ItemShowUtil.showType5(t,this.gezi,this.shuzhi)};e.SINGLE_KEY="common.CostItem";e.WIDTH=100;e.HEIGHT=126;e.RENDER_HANDLER=new Laya.Handler(e,e.onRenderHandler);return e}(ui.common.xiaohaoitemUI);i.CostItem=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.setSelect(false);this.btnadd.visible=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){game.ItemShowUtil.showType5(t,this.gezi,this.shuzhi)};e.prototype.setSelect=function(t){this.xuanzhongimg.visible=t;this.gezi.mouseEnabled=t};e.SINGLE_KEY="common.CostItem2";e.WIDTH=110;e.RENDER_HANDLER=new Laya.Handler(e,e.onRenderHandler);return e}(ui.common.xiaohaoitem2UI);t.CostItem2=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.xuanzhongimg.visible=false;this.btnadd.visible=false;this.btnadd.mouseEnabled=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.onClick=function(){if(this.onClickHandler){this.onClickHandler.run()}};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.gezi.setData(t.costVo);game.ItemShowUtil.showType4(this.shuzhi,t.costVo.count,t.own);this.shuzhi.text=t.own+"/"+t.costVo.count;if(t.costVo instanceof items.EquipVO){this.gezi.clickHandler=new Laya.Handler(this,this.onClick);if(t.qua){this.gezi.gezibg.skin=tip.TipManager.getQualityIcon(t.qua)}else{this.gezi.gezibg.skin=tip.TipManager.getQualityIcon(t.costVo.getQuality())}}};e.prototype.setRed=function(t){if(t){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="common.CostItem3";e.WIDTH=110;return e}(ui.common.xiaohaoitem2UI);t.CostItem3=e;var i=function(){function t(){}return t}();t.Xiaohao4ItemVO=i})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgxiaohao.on(Laya.Event.CLICK,this,this.onTip)};e.prototype.onTip=function(){tip.TipManager.show(this._data,true,true)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.getW=function(){return this._w};e.prototype.setData=function(t,e,i){this._data=t;this.imgxiaohao.skin=csv.ItemProxy.getItemSmallIcon(t.getItemId());game.ItemShowUtil.showType4(this.shuzhi,t.count,game.GridsModel.getIns().getItemCount(t.getItemId()),e,i);this._w=this.imgxiaohao.width+5+this.shuzhi.contextWidth};e.SINGLE_KEY="common.CostItem4";return e}(ui.common.xiaohaoitem3UI);t.CostItem4=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(a){var t=function(o){__extends(t,o);function t(t,e,i,n){var r=o.call(this)||this;r._itemBox=t;r._box=e;r._color=i;r._isColorAll=n;return r}Object.defineProperty(t.prototype,"array",{set:function(t){while(this._itemBox.numChildren>0){var e=this._itemBox.removeChildAt(0);Laya.Pool.recover(a.CostItem4.SINGLE_KEY,e)}var i=t.length;var n=0;for(var r=0;r<i;r++){var e=Laya.Pool.getItemByClass(a.CostItem4.SINGLE_KEY,a.CostItem4);e.setData(t[r],this._color,this._isColorAll);e.x=n;n+=e.getW();if(r<i-1){n+=20}this._itemBox.addChild(e)}this._itemBox.width=n;this._itemBox.x=(this._box.width-n)/2},enumerable:true,configurable:true});t.SINGLE_KEY="common.CostList";return t}(Laya.EventDispatcher);a.CostList=t})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(i){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.menuArr=[];return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.listcaozuo.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.onRenderHandler=function(t){var e=t.dataSource;this._data=e;t.label=e.label;t.clickHandler=new Laya.Handler(this,this.onClickHandler,[e])};t.prototype.onClickHandler=function(t){this.event(i.CommonMenu.MENU_CLICK_EVENT,t)};t.prototype.appendItem=function(t){this.menuArr.push(t)};t.prototype.clean=function(){this.menuArr=[]};t.prototype.show=function(t,e,i){if(t===void 0){t=0}if(e===void 0){e=0}if(i===void 0){i=0}this.listcaozuo.array=this.menuArr;if(t){this.x=t}else{if(Laya.stage.mouseX+this.width>Laya.stage.width){this.x=Laya.stage.width-this.width}else{this.x=Laya.stage.mouseX}}e?this.y=e:this.y=Laya.stage.mouseY;if(i<=0){i=this.listcaozuo.y+this.listcaozuo.array.length*(57+5)+15}this.imgtipsbg.height=i;this.height=i;this.visible=true};t.prototype.hide=function(){this.visible=false};return t}(ui.haoyou.haoyoucaozuoliebiaoviewUI);i.MenuItem=t})(common||(common={}));var game;(function(t){var e=function(){function t(){}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.flowMsg=function(t,e,i,n){if(n===void 0){n=1800}var r=Laya.Pool.getItemByCreateFun("game.AddNumFollowManager.Clip",this.createClip);r.once(Laya.Event.UNDISPLAY,this,this.onUndisplayed,[r]);r.value=t;r.pos(e.x,e.y);i.addChild(r);Laya.Tween.to(r,{y:r.y-100},n,Laya.Ease.quartOut,new Laya.Handler(this,this.onComplete,[r]))};t.prototype.onComplete=function(t){t.removeSelf();Laya.Tween.clearAll(t);Laya.Pool.recover("game.AddNumFollowManager.Clip",t)};t.prototype.onUndisplayed=function(t){Laya.timer.callLater(t,this.onComplete,[t])};t.prototype.createClip=function(){var t=new Laya.FontClip;t.skin="public/clips_piaozinum2.png";t.clipX=12;t.sheet="1234567890+%";return t};t.prototype.flowAddMsg=function(t,e,i){var n=Laya.Pool.getItemByCreateFun("game.AddNumFollowManager.Clip",this.createClip);n.once(Laya.Event.UNDISPLAY,this,this.onUndisplayed,[n]);n.value=t;n.pos(e.x,e.y);i.addChild(n);Laya.Tween.to(n,{y:n.y-50},1800,Laya.Ease.quartOut,new Laya.Handler(this,this.onComplete,[n]),1e3)};t.prototype.flowExpAddMsg=function(t,e,i,n,r){if(n===void 0){n=1800}if(r===void 0){r=-1}if(!this.start){this.start=Laya.timer.currTimer;this.count=0}if(Laya.timer.currTimer-this.start>1e3){this.start=Laya.timer.currTimer;this.count=0}this.count++;if(this.count>10){return}var o=Laya.Pool.getItemByCreateFun("game.AddNumFollowManager.Clip",this.createExpClip);o.once(Laya.Event.UNDISPLAY,this,this.onUndisplayed,[o]);if(r>=0){o.anchorX=r}o.alpha=1;o.value=t;o.pos(e.x,e.y);i.addChild(o);Laya.Tween.to(o,{y:o.y-50},n,null,new Laya.Handler(this,this.onHide,[o]))};t.prototype.onHide=function(t){Laya.Tween.to(t,{alpha:0},2e3,null,new Laya.Handler(this,this.onComplete,[t]))};t.prototype.createExpClip=function(){var t=new Laya.FontClip;t.skin="res/static/main/clip_shengjijingyan.png";t.clipX=14;t.sheet="+0123456789.万亿";return t};t.SINGLE_KEY="game.AddNumFollowManager";return t}();t.AddNumFollowManager=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(e){__extends(c,e);function c(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="";t._state=0;t._btnName="";return t}c.getIns=function(){return app.Singleton.getInstance(c)};c.prototype.initialize=function(){e.prototype.initialize.call(this);this.label.fontSize=22;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.setState,[0]);this.quedingbtn.clickHandler=new Laya.Handler(this,this.setState,[1]);this.pos_x=this.quedingbtn.x;this.gouxuan.visible=false;this.label.leading=5;this.gouxuan.label=app.getLang("tip_ignore");this.label.valign="undefine"};c.prototype.hideCloseBtn=function(){this.closebtn.visible=false};c.prototype.setState=function(t){this._state=t;this.dataSource.colseRunCancel=1;this.close()};c.prototype.onDisplay=function(){this.closebtn.visible=true;this.callLater(this.updateLayout)};c.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.doCount);this.setBtnName(this._btnName);if(this.dataSource){if(this._state==0&&this.dataSource.colseRunCancel==1&&this.dataSource.cancelHandler){this.dataSource.cancelHandler.run()}if(this._state==1&&this.dataSource.okHandler){this.dataSource.okHandler.run()}if(this.dataSource["funId"]>0&&this.gouxuan.selected){i.SystemSetModel.getInstance().funIds[this.dataSource["funId"]]=true}this.dataSource=null;this._state=0;this._btnName=""}if(this.icons){for(var t=0,e=this.icons.length;t<e;t++){this.icons[t].removeSelf();this.icons[t].off(Laya.Event.CLICK,i.Alert,i.Alert.onShowTips)}this.icons=null}};c.prototype.updateLayout=function(){if(!this.dataSource){this.dataSource=[]}this.fullScreen=this.dataSource["fullScreen"];if(this.dataSource){if(this.dataSource&&this.dataSource["btn1Label"]){this.quxiaobtn.label=app.getLang(this.dataSource["btn1Label"])}else{this.quxiaobtn.label=app.getLang("button_name1")}if(this.dataSource&&this.dataSource["btn2Label"]){this.quedingbtn.label=app.getLang(this.dataSource["btn2Label"])}else{this.quedingbtn.label=app.getLang("button_name2")}if(this.dataSource&&this.dataSource["msg"]){this.label.text=this.dataSource.msg;this.icons=c.addImag(this.label);this.setComfirm()}if(!!this.dataSource["cancelHandler"]&&!!this.dataSource["okHandler"]){this.quxiaobtn.visible=true;this.quedingbtn.visible=true;this.quedingbtn.x=this.pos_x}else{this.quxiaobtn.visible=false;this.quedingbtn.visible=true;this.quedingbtn.x=(this.width-this.quedingbtn.width)/2}if(this.dataSource["funId"]>0){this.gouxuan.visible=true;if(i.SystemSetModel.getInstance().funIds[this.dataSource["funId"]]){this.gouxuan.selected=true}else{this.gouxuan.selected=false}var t=this.label.contextHeight+40;this.label.y=(this.vbox.height-t)*.5;this.gouxuan.x=(this.vbox.width-this.gouxuan.width)*.5;this.gouxuan.y=this.label.y+this.label.contextHeight+5}else{this.label.y=(this.vbox.height-this.label.contextHeight)/2;this.gouxuan.visible=false}}};c.prototype.setComfirm=function(){if(this.dataSource.comfirmLimit){this._count=this.dataSource.comfirmLimit;this._btnName=this.quedingbtn.label;this.doCount()}else{this.setBtnName(this._btnName);Laya.timer.clear(this,this.doCount)}this._count--};c.prototype.setBtnName=function(t){if(t.length>0){this.quedingbtn.label=t}};c.prototype.doCount=function(){this.quedingbtn.label=this._btnName+("("+this._count+")");if(this._count>=0){this._count--;Laya.timer.once(1e3,this,this.doCount)}else{this.dataSource.okHandler.run();app.ViewManager.toggleDialog(c,-1)}};c.onShowTips=function(t){var e=i.ItemUtil.parserList(t+"-1")[0];tip.TipManager.show(e)};c.addImag=function(t){var e="";var i;var n=[];if(t._childs!=undefined){for(var r=0,o=t._childs.length;r<o;r++){i=t.getChildAt(r);if(i){e=i.text;if(e&&e.indexOf("item")!=-1){var a=parseInt(e.replace("item_",""));var s=new Laya.Image;s.skin=csv.ItemProxy.getItemSmallIcon(a);s.x=i.x;s.y=i.y+(i.height-t.style.fontSize)/2;s.width=i.width;s.height=i.height;t.addChild(s);n.push(s);s.on(Laya.Event.CLICK,this,this.onShowTips,[a])}}}}return n};c.show=function(t,e,i,n,r,o,a,s,l,u,p,h){if(e===void 0){e=undefined}if(i===void 0){i=undefined}if(n===void 0){n=0}if(r===void 0){r=""}if(o===void 0){o="fullScreen"}if(a===void 0){a="center"}if(s===void 0){s="center"}if(l===void 0){l=0}if(u===void 0){u=""}if(p===void 0){p=""}if(h===void 0){h=1}app.ViewManager.toggleDialog(c,1,0,{title:r,msg:t,okHandler:e,cancelHandler:i,comfirmLimit:n,fullScreen:o,valign:a,align:s,funId:l,btn1Label:u,btn2Label:p,colseRunCancel:h},null,null,true)};c.show02=function(t,e,i,n,r,o,a,s){if(e===void 0){e=undefined}if(i===void 0){i=undefined}if(n===void 0){n=0}if(r===void 0){r=""}if(o===void 0){o=""}if(a===void 0){a=""}app.ViewManager.toggleDialog(c,1,0,{title:r,msg:t,okHandler:e,cancelHandler:i,comfirmLimit:n,btn1Label:o,btn2Label:a,align:s},null,null,true)};c.SINGLE_KEY="game.Alert";return c}(ui.alert.alert01UI);i.Alert=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(r){var t=function(e){__extends(i,e);function i(){var t=e.call(this)||this;t.boStart=false;return t}i.prototype.load=function(t,e){this.aniName=t;this.altasUrls=e;this.altasLen=e.length;this.alpha=0;this.clear();if(t){this.loadCount=0;this.boStart=true;for(var i=0;i<this.altasLen;i++){var n=r.AniView.BASE+r.AniView.FILE_NAME.SKILL+"/"+this.altasUrls[i]+".atlas";this.loadAtlas(n,new Laya.Handler(this,this.loadComplete,[this.altasUrls[i],i]))}}};i.prototype.loadComplete=function(t,e){if(t!=this.altasUrls[e]){return}this.loadCount++;if(this.loadCount==this.altasLen){this.event(i.EVENTS.ATLAS_COMPLETE);this.aniUrl=r.AniView.BASE+r.AniView.FILE_NAME.SKILL+"/"+this.aniName+".ani";this.loadAnimation(this.aniUrl,Laya.Handler.create(this,this.aniLoaded,[this.aniUrl]))}};i.prototype.aniLoaded=function(t){if(t!=this.aniUrl){return}this.play(0,this.loop);this.alpha=1;this.event(i.EVENTS.ANI_COMPLETE)};i.EVENTS={ATLAS_COMPLETE:"atlas_complete",ANI_COMPLETE:"ani_complete"};return i}(Laya.Animation);r.AniAltasView=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.quedingbtn.clickHandler=new Laya.Handler(this,this.onBtnClose);this.label01.text="获得以下物品：";this.labeltitle.text=app.getLang("奖励展示")};e.prototype.onBtnClose=function(){app.ViewManager.toggleDialog(e,-1,0)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource;this.daojulist.array=t};e.SINGLE_KEY="game.AwardListView";return e}(ui.alert.alert05UI);t.AwardListView=e})(common||(common={}));var common;(function(t){var e=function(){function t(t,e){if(e===void 0){e=true}this._shp=new Laya.Sprite;var i=t.width+8;this._shp.x=-4;this._shp.x=-4;t.mask=this._shp;this._r=i/2;this._boClock=e}t.prototype.setProgress=function(t){t=t>=1?.999:t;t=t<0?0:t;if(this._boClock){this.changeGraphics(360*t)}else{this.changeGraphics(360*(1-t))}};t.prototype.changeGraphics=function(t){var e=this._shp;e.graphics.clear();e.graphics.drawPie(this._r,this._r,this._r,-90,270-t,"#ffffff")};return t}();t.CdMask=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(a){__extends(t,a);function t(t,e,i,n,r){if(r===void 0){r=0}var o=a.call(this)||this;o._list=t;o._list.repeatX=0;o._box=e;o._size=i;o._gap=n;o._pianX=r;o._list.spaceX=n;return o}Object.defineProperty(t.prototype,"array",{get:function(){return this._arr},set:function(t){this._arr=t;this._list.array=t;var e=t.length;var i=e*this._size+(e-1)*this._gap;if(i*this._list.scaleX<this._box.width){this._list.hScrollBarSkin="";this._list.width=i}else{this._list.hScrollBarSkin=" ";this._list.width=this._box.width}this._list.x=(this._box.width-this._list.width*this._list.scaleX)/2+this._pianX},enumerable:true,configurable:true});t.prototype.activeSelect=function(){this._list.selectEnable=true;this._list.selectHandler=new Laya.Handler(this,this.onSelect)};t.prototype.onSelect=function(t){if(this._lastSelectCell){this._lastSelectCell.setSelect(false)}var e=this._list.getCell(t);if(e){e.setSelect(true);this._lastSelectCell=e}if(this.selectHandler){this.selectHandler.run()}};t.prototype.getSelectItemVo=function(){if(!this._list.selectedItem){return this.initItemVoData}return this._list.selectedItem};t.prototype.setSelectItemVo=function(t,e){var i=this._list.getCell(e);if(i){i.setSelect(true);this._lastSelectCell=i;this.initItemVoData=t}};return t}(Laya.EventDispatcher);t.CenterLayoutMediator=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(a){__extends(t,a);function t(t,e,i,n,r){if(r===void 0){r=0}var o=a.call(this)||this;o._list=t;o._list.repeatY=0;o._box=e;o._size=i;o._gap=n;o._pianY=r;o._list.spaceY=n;return o}Object.defineProperty(t.prototype,"array",{get:function(){return this._arr},set:function(t){this._list.array=t;this._arr=t;var e=t.length;var i=e*this._size+(e-1)*this._gap;if(i*this._list.scaleX<this._box.height){this._list.vScrollBarSkin="";this._list.height=i}else{this._list.vScrollBarSkin=" ";this._list.height=this._box.height}this._list.y=(this._box.height-this._list.height*this._list.scaleX)/2+this._pianY},enumerable:true,configurable:true});t.prototype.activeSelect=function(){this._list.selectEnable=true;this._list.selectHandler=new Laya.Handler(this,this.onSelect)};t.prototype.onSelect=function(t){if(this._lastSelectCell){this._lastSelectCell.setSelect(false)}var e=this._list.getCell(t);if(e){e.setSelect(true);this._lastSelectCell=e}if(this.selectHandler){this.selectHandler()}};t.prototype.getSelectItemVo=function(){if(!this._list.selectedItem){return this.initItemVoData}return this._list.selectedItem};t.prototype.setSelectItemVo=function(t,e){var i=this._list.getCell(e);if(i){i.setSelect(true);this._lastSelectCell=i;this.initItemVoData=t}};return t}(Laya.EventDispatcher);t.CenterLayoutVMediator=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(o){__extends(t,o);function t(t,e,i,n){var r=o.call(this)||this;r.imgCenter=n;r.imgOut=t;r.itemClz=e;r.radius=i;r.itemArr=[];return r}t.prototype.setCount=function(t,e){if(e===void 0){e=true}this.count=t;var i=2*Math.PI/this.count;var n;if(t%2==0){n=-Math.PI/2-Math.PI/t}else{n=-Math.PI/2}var r=Math.max(this.count,this.itemArr.length);for(var o=0;o<r;o++){if(o<this.count){if(!this.itemArr[o]){this.itemArr[o]=new this.itemClz}var a=void 0;if(e){a=i*o+n}else{a=-i*o+n}this.itemArr[o].x=this.imgOut.pivotX+Math.cos(a)*this.radius;this.itemArr[o].y=this.imgOut.pivotY+Math.sin(a)*this.radius;this.itemArr[o].init(o);this.imgOut.addChild(this.itemArr[o])}else{this.itemArr[o].removeSelf();this.itemArr[o].beHide()}}};t.prototype.setCount2=function(t,e,i){this.count=t;var n=Math.max(this.count,this.itemArr.length);for(var r=0;r<n;r++){if(r<this.count){if(!this.itemArr[r]){this.itemArr[r]=new this.itemClz}var o=void 0;this.itemArr[r].x=this.imgOut.pivotX+Math.cos(o)*this.radius;this.itemArr[r].y=this.imgOut.pivotY+Math.sin(o)*this.radius;this.itemArr[r].init(r);this.imgOut.addChild(this.itemArr[r])}else{this.itemArr[r].removeSelf();this.itemArr[r].beHide()}}};t.prototype.setJiHuoCount=function(t){for(var e=0;e<t;e++){this.itemArr[e].setBright()}for(var i=t;i<this.count;i++){this.itemArr[i].setDarkness()}};t.prototype.setCenterMove=function(t,e){if(t===void 0){t=false}if(e===void 0){e=1}this._centerR=t;this._centerW=e;Laya.timer.frameLoop(1,this,this.startCenter)};t.prototype.startCenter=function(){var t;if(this._centerR){t=this.imgCenter.rotation+this._centerW;if(t>360){t-=360}}else{t=this.imgCenter.rotation-this._centerW;if(t<0){t+=360}}this.imgCenter.rotation=t};t.prototype.setOutMove=function(t,e){if(t===void 0){t=true}if(e===void 0){e=1}this._outR=t;this._outW=e;Laya.timer.frameLoop(1,this,this.startOut)};t.prototype.startOut=function(){var t;if(this._outR){t=this.imgOut.rotation+this._outW;if(t>360){t-=360}}else{t=this.imgOut.rotation-this._outW;if(t<0){t+=360}}this.imgOut.rotation=t};t.prototype.stopMove=function(){Laya.timer.clearAll(this)};t.prototype.startClose=function(t,e){if(e===void 0){e=true}this.r=this.radius;this.hanlder=t;Laya.timer.frameLoop(1,this,this.doClose,[e])};t.prototype.doClose=function(t){if(t===void 0){t=true}this.r-=1;if(this.r<this.radius/2){this.hanlder.run();Laya.timer.clear(this,this.doClose);return}var e=2*Math.PI/this.count;var i;if(this.count%2==0){i=-Math.PI/2-Math.PI/this.count}else{i=-Math.PI/2}for(var n=0;n<this.count;n++){var r=void 0;if(t){r=e*n+i}else{r=-e*n+i}this.itemArr[n].x=this.imgOut.pivotX+Math.cos(r)*this.r;this.itemArr[n].y=this.imgOut.pivotY+Math.sin(r)*this.r;this.itemArr[n].init(n);this.imgOut.addChild(this.itemArr[n])}};return t}(Laya.EventDispatcher);t.CircleMoveMediator=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this)};e.prototype.setData=function(t){this.shuxing.text=Attributes.getPropName(t.attr1.propId);var e=t.attr0?parseInt(Attributes.getPropValue(t.attr0.propId,t.attr0.value,t.attr0.formula)):0;var i=parseInt(Attributes.getPropValue(t.attr1.propId,t.attr1.value,t.attr1.formula));this.shuzhi.text=e+"";this.jialab.text="+（"+(i-e)+"）";this.shuzhi.x=this.shuxing.x+this.shuxing.textField.textWidth+10;this.jialab.x=this.shuzhi.x+this.shuzhi.textField.textWidth+10};e.SINGLE_KEY="com.ComAttrItem";return e}(ui.touxian.touxianshuxingitemUI);t.ComAttrItem=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setTextColor=function(t){this.txtName.color=t;this.txtValue.color=t};e.prototype.setData=function(t,e){this.txtName.text=e?e+Attributes.getPropName(t.propId):Attributes.getPropName(t.propId);this.txtValue.text="     +"+Attributes.getPropValue(t.propId,t.value,t.formula)};e.SINGLE_KEY="game.ComAttrItem1";return e}(ui.common.commonattr1UI);t.ComAttrItem1=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.onRender=function(t){t.setData(t.dataSource)};e.prototype.setData=function(t){this.shuxing.text=Attributes.getPropName(t.propId);this.shuzhi.color=i.STYLES.GREEN_COLOR_S;this.shuzhi.text="+"+Attributes.getPropValue(t.propId,t.value,t.formula)};e.CommonRender=new Laya.Handler(e,e.onRender);return e}(ui.shizhuang.shizhuangitem4UI);i.ComAttrItem10=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.txtName.text=Attributes.getPropName(t.propId);this.txtValue.text="+"+Attributes.getPropValue(t.propId,t.value,t.formula)};e.SINGLE_KEY="game.ComAttrItem2";return e}(ui.common.commonattr2UI);t.ComAttrItem2=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=t.curAttr;var n=t.nextAttr;this.txtName.text=Attributes.getPropName(n.propId);this.txtValue.text="+0";if(i){this.txtValue.text="+"+Attributes.getPropValue(i.propId,i.value,i.formula)}this.txtNext.text="(+"+Attributes.getPropValue(n.propId,n.value,n.formula)+")";if(e){this.txtNext.visible=n.value>0}else{this.txtNext.visible=n.value>(i?i.value:0)}};e.SINGLE_KEY="game.ComAttrItem3";return e}(ui.common.commonattr3UI);t.ComAttrItem3=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i){if(e===void 0){e=0}if(i===void 0){i=true}this.txtName.text=Attributes.getPropName(t.propId);var n=parseInt(Attributes.getPropValue(t.propId,t.value,t.formula));this.txtValue.text="+"+n;this.imgArrow.visible=i;if(i){this.imgArrow.x=this.txtValue.x+this.txtValue.textField.textWidth+10;if(e){var r=e-n.toString().length;if(r>0){this.imgArrow.x+=r*tip.TipManager.GAPS.GAP_PANEL}}}};e.prototype.setColor=function(t){this.txtName.color=t;this.txtValue.color=t};e.SINGLE_KEY="game.ComAttrItem5";return e}(ui.common.commonattr5UI);t.ComAttrItem5=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.txtValue.text=""};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setTextColor=function(t){this.txtName.color=t};e.prototype.setData=function(t){this.txtName.text=Attributes.getShowLabel(t,"{0} +{1}")};e.SINGLE_KEY="game.ComAttrItem7";return e}(ui.common.commonattr1UI);t.ComAttrItem7=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=t.curAttr;var n=t.nextAttr;this.txtName.text=Attributes.getPropName(n.propId);this.txtValue.text="+0";if(i){this.txtValue.text="+"+Attributes.getPropValue(i.propId,i.value,i.formula)}this.txtNext.text="(+"+Attributes.getPropValue(n.propId,n.value,n.formula)+")";if(e){this.txtNext.visible=n.value>0}else{this.txtNext.visible=n.value>(i?i.value:0)}};e.SINGLE_KEY="game.ComAttrItem9";return e}(ui.common.commonattr9UI);t.ComAttrItem9=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.txtName.text=Attributes.getPropName(t.propId);this.txtValue.text="+"+Attributes.getPropValue(t.propId,t.value,t.formula);this.txtValue.x=this.txtName.x+this.txtName.width+tip.TipManager.GAPS.GAP_ICON};e.SINGLE_KEY="common.ComAttrItemRefining";return e}(ui.common.hulujinlianitem1UI);t.ComAttrItemRefining=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=t.param1.value;var i=Attributes.getPropValue(t.param1.propId,Math.floor(e*(parseInt(t.param2)*1e-4)),t.param1.formula);var n=Attributes.getPropValue(t.param1.propId,Math.floor(e*(parseInt(t.param3)*1e-4)),t.param1.formula);this.txtValue.text="+"+i+"~"+n};e.SINGLE_KEY="common.ComAttrRange";return e}(ui.common.hulujinlianitem2UI);t.ComAttrRange=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.shuxing.itemRender=game.ComAttrItem2;this.shuxing.renderHandler=new Laya.Handler(this,this.onRender)};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.shuxing.array=this.dataSource};e.SINGLE_KEY="game.ComAttrTip";return e}(ui.alert.alert10UI);t.ComAttrTip=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(p){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.parserIcon=function(t,e,i,n,r,o){if(i===void 0){i=""}if(n===void 0){n=false}if(o===void 0){o=1e4}var a=false;var s=app.str2Array(t,"-");var l=parseInt(s[0]);this.parserIconByItemId(l);if(n){var u=p.GridsModel.getIns().hasEnoughItems(t,false,false);if(e){if(r){e.color=u?r[0]:r[1]}else{e.color=u?p.STYLES.DESC_TXT_COLOR_S:p.STYLES.RED_COLOR_S}}a=u}if(e&&s.length>1){e.text=i+p.MoneyModel.format(parseInt(s[1]))}return a};e.prototype.parserIconByItemId=function(t){var e=csv.ItemProxy.getIns().getItemCfgById(t);if(e.type==csv.ItemProxy.TYPES.ZI_YUAN){this.icon.skin=csv.ItemProxy.getItemSmallIcon(t);this.icon.scaleX=this.icon.scaleY=1}else{var i=p.ItemUtil.createVO(t);this.icon.skin=i.getIconUrl();this.icon.scaleX=this.icon.scaleY=.4}};e.prototype.setIconSkin=function(t){this.icon.skin=t};e.SINGLE_KEY="icon.ComMiniIcon";return e}(ui.common.moneyiconUI);p.ComMiniIcon=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(n){__extends(t,n);function t(t,e){if(e===void 0){e=null}var i=n.call(this)||this;i._mouseDown=false;i.intervalTime=0;i._timeOut=-1;i.btn=t;i.callbackHanlder=e;i._mouseDown=false;if(i.btn){i.btn.on(Laya.Event.MOUSE_DOWN,i,i.onMouseDown);i.btn.on(Laya.Event.MOUSE_UP,i,i.onMouseUp);i.btn.on(Laya.Event.MOUSE_OUT,i,i.onMouseOut)}return i}t.prototype.clean=function(){if(this._timeOut>=0){clearTimeout(this._timeOut);this._timeOut=-1}};t.prototype.onMouseDown=function(){var t=this;this._mouseDown=true;this.intervalTime=(new Date).getTime();this._timeOut=setTimeout(function(){t.applyFun()},1e3)};t.prototype.onMouseOut=function(){this.clean();this._mouseDown=false};t.prototype.onMouseUp=function(){this._mouseDown=false;this.clean();if((new Date).getTime()-this.intervalTime<800){this.applyFun()}};t.prototype.applyFun=function(){this.clean();if(this.callbackHanlder){this.callbackHanlder.run()}};t.prototype.actHandler=function(){var t=this;if(this._mouseDown){if(this._timeOut<0){this._timeOut=setTimeout(function(){t.applyFun()},100)}}};return t}(Laya.EventDispatcher);t.CommonButton=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(n){var t=function(e){__extends(i,e);function i(){var t=e.call(this)||this;t.item=new n.MenuItem;t.subItem=new n.MenuItem;t.addChild(t.item);t.addChild(t.subItem);t.item.on(i.MENU_CLICK_EVENT,t,t.onSelectItem);t.subItem.on(i.MENU_CLICK_EVENT,t,t.onSelectItem);return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.onSelectItem=function(t){if(t.subItem&&t.subItem.length>0){this.setMenu(t.subItem,this.subItem);this.showSub()}else{if(this.selectHandler){this.selectHandler(t)}this.hideAll()}};i.prototype.setMenu=function(t,e){if(e===void 0){e=null}if(e==null){e=this.item}e.clean();for(var i=0;i<t.length;i++){e.appendItem(t[i])}};i.prototype.show=function(){this.hideAll();this.item.show();app.ViewManager.toggleView(i,app.AppContainer.flowLayer,1)};i.prototype.showSub=function(){var t=this.subItem.menuArr.length*70;if(this.subItem.menuArr.length<5){t+=21}if(this.item.x+this.item.width+this.subItem.width>Laya.stage.width){this.item.x=this.item.x-this.item.width}this.subItem.show(this.item.x+this.item.width,0,t)};i.prototype.hideAll=function(){this.item.hide();this.subItem.hide();app.ViewManager.toggleView(i,app.AppContainer.flowLayer,-1)};i.SINGLE_KEY="common.CommonMenu";i.MENU_CLICK_EVENT="menuItemClick";return i}(Laya.Sprite);n.CommonMenu=t;var e=function(){function t(){}return t}();n.MenuItemData=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.animationxuanzhong.visible=false;this.yeqianbtn[app.SoundManager.NO_BUTTON_MUSIC]=1};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.vo=t;this.yeqianbtn.label=app.getLang(t.buttonname);if(t.buttonicon==""||t.buttonicon==undefined){this.yeqianimg.skin="res/static/mainlisticon/bg_zhuangbei.png"}else{this.yeqianimg.skin="res/static/mainlisticon/"+t.buttonicon+".png"}this.yeqianbtn.selected=t.boSelect;this.showcirle(false);csv.FunctionsProxy.getIns().tab.bind(this.vo.funcId,new Laya.Handler(this,this.showcirle));for(var e in game.RedDotView.ENUM_TYPE){var i=game.RedDotView.ENUM_TYPE[e];if(game.ClosureManager.hasXin(this.vo.funcId,i)){game.RedDotView.addTo(this,90,10,1,1,i);return}}if(t.boRed){game.RedDotView.addTo(this,90,10)}else{game.RedDotView.removeFrom(this)}};e.prototype.showcirle=function(t){this.animationxuanzhong.visible=t;if(t){this.animationxuanzhong.play()}else{this.animationxuanzhong.stop()}};e.SINGLE_KEY="common.CommonWindowBtn";return e}(ui.main.mainyeqianitemUI);t.CommonWindowBtn=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnyeqian[app.SoundManager.NO_BUTTON_MUSIC]=1};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.vo=t;this.btnyeqian.skin="res/static/mainlisticon/"+t.buttonicon+".png";this.btnyeqian.selected=t.boSelect;if(+t.funcId==csv.FunctionsProxy.ENUMS.HLXD_JINGYING){if(dailytask.DailyTaskModel.getIns().taskMainId>=csv.DungeonProxy.getIns().maxOpenNum-1){this.gray=false;this.mouseEnabled=true}else{this.gray=true;this.mouseEnabled=false}}for(var e in game.RedDotView.ENUM_TYPE){var i=game.RedDotView.ENUM_TYPE[e];if(game.ClosureManager.hasXin(this.vo.funcId,i)){game.RedDotView.addTo(this,90,10,1,1,i);return}}if(t.boRed){game.RedDotView.addTo(this,90,10)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="common.CommonWindowBtn2";return e}(ui.main.mainyeqianitem2UI);t.CommonWindowBtn2=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgname.mouseEnabled=false;this.btnlingyuanlibao[app.SoundManager.NO_BUTTON_MUSIC]=1};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.vo=t;this.btnlingyuanlibao.selected=t.boSelect;var e=this.width;if(t.boSelect){this.imgname.skin="res/static/chongzhihuodong/"+t.buttonicon+"_xuanzhong.png"}else{this.imgname.skin="res/static/chongzhihuodong/"+t.buttonicon+".png"}for(var i in game.RedDotView.ENUM_TYPE){var n=game.RedDotView.ENUM_TYPE[i];if(game.ClosureManager.hasXin(this.vo.funcId,n)){game.RedDotView.addTo(this,e,10,1,1,n);return}}if(t.boRed){game.RedDotView.addTo(this,e,10)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="common.CommonWindowBtn3";return e}(ui.main.maintongyongbg3itemUI);t.CommonWindowBtn3=e})(common||(common={}));var common;(function(t){var c=function(){function t(){}return t}();t.CommonWindowVo=c;var e=function(){function e(t,e,i,n,r,o,a,s){if(s===void 0){s=true}this.fullScreen="fullScreen";this._dataArr=[];this.btnCls=e;this.skin=t;this.skin.boSmallResult=true;this.neibuview=o;this.yeqianlist=n;this.backbtn=r;this.ani1=a;this.labeltitle=i;this.resizeWh=s;this.initialize()}e.prototype.initialize=function(){this.skin.on(Laya.Event.DISPLAY,this,this.onDisplay);this.skin.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);if(this.yeqianlist){this.yeqianlist.itemRender=this.btnCls;this.yeqianlist.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.yeqianlist.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.yeqianlist.selectEnable=true;this.yeqianlist.scrollRectOffY=20}if(this.resizeWh){this.skin.width=Laya.stage.width;this.skin.height=Laya.stage.height}this.backbtn.clickHandler=new Laya.Handler(this,this.onCloseHandler);this.backbtn[app.SoundManager.NO_BUTTON_MUSIC]=1};e.prototype.setTitle=function(t){this.labeltitle.text=t};e.prototype.onCloseHandler=function(){if(!this._selectedVO){return}this.skin.removeSelf();this.skin.isModal&&Laya.Dialog.manager._checkMask()};e.prototype.onDisplay=function(){if(battle.BattleManager.getIns().boMapLoadHide){this.skin.mouseEnabled=true}else{this.skin.mouseEnabled=false;battle.BattleManager.getIns().on(battle.BattleManager.MAP_LOAD_HIDE,this,this.setMouseEnable)}app.ViewManager.showCommoneMask();game.Context.on(game.ContextEvent.FUNCTION_DOT_CHANGE,this,this.dotChange);game.Context.on(game.ContextEvent.FUNCTION_XIN_CHANGE,this,this.dotChange);game.Context.on(game.ContextEvent.FUNCTION_LIMIT_CHANGE,this,this.limitChange);Laya.timer.callLater(this,this.refreshAll);if(this.ani1){this.ani1.play(0,false)}};e.prototype.setMouseEnable=function(){battle.BattleManager.getIns().off(battle.BattleManager.MAP_LOAD_HIDE,this,this.setMouseEnable);this.skin.mouseEnabled=true};e.prototype.onUnDisplay=function(){app.ViewManager.hideCommoneMask();app.SoundManager.getIns().playSound("functionclose");game.Context.off(game.ContextEvent.FUNCTION_DOT_CHANGE,this,this.dotChange);game.Context.off(game.ContextEvent.FUNCTION_XIN_CHANGE,this,this.dotChange);game.Context.off(game.ContextEvent.FUNCTION_LIMIT_CHANGE,this,this.limitChange);this.clearContent();this._selectedIndex=-1;if(this.yeqianlist){this.yeqianlist.scrollTo(0)}if(this._selectedVO){var t=this._selectedVO.funcId;this._selectedVO=null;game.Context.event(game.ContextEvent.DIALOG_CLOSE_COMPLETE,t);game.Context.event(game.ContextEvent.FUNCTION_CLOSE,t)}if(e.callBackFunc){Laya.timer.callLater(this,this.callBack)}game.RoleModel.getIns().uiRoleSelectIndex=null};e.prototype.callBack=function(){game.ClosureManager.callFunction(e.callBackFunc);e.callBackFunc=null};e.prototype.refreshAll=function(t){var e=this.skin.dataSource;var i=game.ClosureManager.getRealFuncID(e[0]);if(+i==csv.FunctionsProxy.ENUMS.TASK_MAIN){if(dailytask.DailyTaskModel.getIns().taskMainId>=csv.DungeonProxy.getIns().maxOpenNum-1){i=csv.FunctionsProxy.ENUMS.HLXD_JINGYING}}this.showFunction(i,e[1])};Object.defineProperty(e.prototype,"common",{get:function(){return},enumerable:true,configurable:true});e.prototype.dotChange=function(t){for(var e=0,i=this._dataArr.length;e<i;e++){var n=this._dataArr[e];if(t==n.funcId){n.boRed=game.ClosureManager.hasDot(n.funcId);if(this.yeqianlist){this.yeqianlist.refresh()}break}}};e.prototype.limitChange=function(t){for(var e=0,i=this._dataArr.length;e<i;e++){var n=this._dataArr[e];if(t==n.funcId){n.boLimit=game.ClosureManager.hasLimit(n.funcId);if(this.yeqianlist){this.yeqianlist.refresh()}break}}};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource);game.Context.event(game.ContextEvent.FUNC_BTN_CHANGE)};e.prototype.onSelectHandler=function(t){var e=this._dataArr[t];if(this._selectedIndex==t){return}var i=game.WindowsResigter.checkFuncOpen(e.funcId);if(i){this._selectedIndex=t;if(e.params){game.ClosureManager.callFunction(e.funcId,true,true,e.params)}else{game.ClosureManager.callFunction(e.funcId,true,true)}}else{if(this.yeqianlist){this.yeqianlist.selectedIndex=this._selectedIndex}}};e.prototype.clearContent=function(){while(this.neibuview.numChildren>0){this.neibuview.removeChildAt(0)}};e.prototype.setSelectIndex=function(t){for(var e=0;e<this._dataLen;++e){this._dataArr[e].boSelect=Boolean(t==e)}this._selectedIndex=t;if(this.yeqianlist){this.yeqianlist.array=this._dataArr;this.yeqianlist.selectedIndex=t}};e.prototype.getSelectFid=function(){if(this._selectedVO){return this._selectedVO.funcId}return 0};e.prototype.isContainFuncID=function(t){var e=this._dataArr;if(e){for(var i=0;i<e.length;i++){if(e[i].funcId==t){return true}}}return false};e.prototype.getFuncBtn=function(t){if(this.yeqianlist){for(var e=0,i=this.yeqianlist.cells.length;e<i;e++){var n=this.yeqianlist.cells[e];if(n&&n.dataSource&&n.dataSource.funcId==t){return n}}}};e.prototype.isSelectFuncID=function(t){if(this._selectedVO){return Boolean(this._selectedVO.funcId==t)}return false};e.prototype.getTabList=function(t){var e=csv.FunctionsProxy.getIns().getCfg(t);var i=app.str2Array(e.closure,"-");var n=parseInt(i[1]);this.addFaBaoBtn(n);var r=csv.WindowProxy.getIns().getFuncs(n);var o=[];for(var a=0,s=r.length;a<s;++a){var l=r[a];if(csv.FunctionsProxy.getIns().isOpen(l)===false){continue}var u=game.WindowsResigter.getFunctionView(l);var p=csv.FunctionsProxy.getIns().getCfg(l);var h=new c;h.funcId=l;h.windowId=n;h.clazz=u&&u.closure;h.index=a;h.buttonname=p.buttonname;h.buttonicon=p.buttonicon;h.windowname=p.windowname;h.boRed=game.ClosureManager.hasDot(h.funcId);h.boLimit=game.ClosureManager.hasLimit(h.funcId);h.boSelect=false;o.push(h)}return o};e.prototype.addFaBaoBtn=function(t){if(this.skin["btnfabao"]){this.skin["btnfabao"].off(Laya.Event.CLICK,this,this.openFabaoTips);this.skin["btnfabao"].visible=false}var e=csv.FaBaoNewProxy.getIns().getFabaotipMap(1);for(var i=0;i<e.length;i++){if(e[i].parm1==t){if(this.skin["btnfabao"]){this.skin["btnfabao"].on(Laya.Event.CLICK,this,this.openFabaoTips);this.skin["btnfabao"].visible=true;return}}}};e.prototype.openFabaoTips=function(){app.ViewManager.toggleDialog(fabaonew.FabaoFunPreview,1,0,{type:1,num:this._windowId})};e.prototype.createTabData=function(t){var e=this.getTabList(t);this._dataArr=e;this._dataLen=e.length;if(e.length<=0){console.warn("funcId: [%d] 没有页签功能开启中",t)}};e.prototype.refreshDataByFuncid=function(t,e){var i=this._dataArr;var n=false;for(var r=0;r<i.length;r++){if(i[r].funcId==t){i[r].params=e;n=true}}if(!n){console.warn("callfunction "+t+" 未能调用成功!")}};e.prototype.showFunction=function(t,e,i){if(e===void 0){e=null}if(i===void 0){i=true}if(e&&e.length==0){e=null}var n=csv.FunctionsProxy.getIns().getCfg(t);var r=app.str2Array(n.closure,"-");this._windowId=parseInt(r[1]);if(n.closure==""){var o=game.WindowsResigter.getFunctionView(t);var a=csv.FunctionsProxy.getIns().getCfg(t);var s=new c;s.funcId=t;s.windowId=0;s.clazz=o&&o.closure;s.index=0;s.buttonname=a.buttonname;s.buttonicon=a.buttonicon;s.windowname=a.windowname;s.boRed=game.ClosureManager.hasDot(s.funcId);s.boLimit=game.ClosureManager.hasLimit(s.funcId);s.boSelect=false;s.params=e;this.fillPanel(s);this._dataArr=[];if(this.yeqianlist){this.yeqianlist.array=this._dataArr;this.yeqianlist.visible=false}this._windowId=csv.WindowProxy.getIns().getCfgByFunId(+t)?csv.WindowProxy.getIns().getCfgByFunId(+t).id:0;if(this._windowId!=0){this.addFaBaoBtn(this._windowId)}return}if(this.yeqianlist){this.yeqianlist.visible=true}if(i){this.createTabData(t)}this.refreshDataByFuncid(t,e);if(game.WindowsResigter.checkRedirectMap(t)){return}var l=this.getIndexByFuncId(t);this.showByIndex(l)};e.prototype.showByIndex=function(t){this.setSelectIndex(t);var e=this._dataArr[t];if(t>3){if(this.yeqianlist){this.yeqianlist.scrollTo(t)}}this.fillPanel(e)};e.prototype.fillPanel=function(t){if(t){if(t.clazz){this._selectedVO=t;if(t.params){app.ViewManager.toggleView(t.clazz,this.neibuview,1,t.params,null,null,-1,t.funcId,true)}else{app.ViewManager.toggleView(t.clazz,this.neibuview,1,null,null,null,-1,t.funcId,true)}}else{manager.FlowManager.instance.flowByStyle1("未注册面板"+t.funcId)}if(this.labeltitle){this.labeltitle.text=app.getLang(t.windowname)}game.Context.event(game.ContextEvent.FUNCTION_OPEN,t.funcId)}app.SoundManager.getIns().playSound("functionopen")};e.prototype.setDots=function(t){var e=this._dataLen;for(var i=0;i<e;i++){var n=this._dataArr[i];n.boRed=Boolean(t.indexOf(n.funcId)!=-1)}if(this.yeqianlist){this.yeqianlist.refresh()}};e.prototype.getVoByFuncId=function(t){var e;if(this._dataArr){var i=this._dataLen;for(var n=0;n<i;n++){var r=this._dataArr[n];if(r.funcId==t){e=r;break}}}return e};e.prototype.getIndexByFuncId=function(t){var e=0;if(this._dataArr){var i=this._dataLen;for(var n=0;n<i;n++){var r=this._dataArr[n];if(r.funcId==t){e=n;break}}}return e};e.prototype.setFuncName=function(t,e){for(var i=0;i<this._dataLen;++i){var n=this._dataArr[i];if(n.funcId==t){n.buttonname=e;break}}if(this.yeqianlist){this.yeqianlist.refresh()}};e.prototype.getIndexByFuncIdForGuide=function(t){var e=-1;if(this._dataArr){var i=this._dataLen;for(var n=0;n<i;n++){var r=this._dataArr[n];if(r){if(r.funcId==t){e=n;break}}}}return e};return e}();t.CommonWindowMK=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgxingxing.skin="public/bg_wujiaoxing1.png"};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){if(e===void 0){e=""}if(t&&t.length>0){this.gray=false;this.imgxingxing.skin="public/"+t+".png"}else if(e.length>0){this.imgxingxing.skin="public/"+e+".png";this.gray=true}else{this.imgxingxing.skin="public/bg_wujiaoxing1.png";this.gray=true}};e.SINGLE_KEY="game.ComStarItem";e.W=36;return e}(ui.common.xingxingitemUI);t.ComStarItem=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.url="";return t}t.prototype.init=function(t){if(this.url==t){return}this.reset();this.url=t;this.temp=new Laya.Templet;this.temp.on(Laya.Event.COMPLETE,this,this.onTempComplete);this.temp.loadAni(t)};t.prototype.onTempComplete=function(){this.skt=this.temp.buildArmature(0);this.addChild(this.skt);this.skt.play(0,true)};t.prototype.reset=function(){this.url="";if(this.temp)this.temp.off(Laya.Event.COMPLETE,this,this.onTempComplete);this.temp=null;if(this.skt){this.skt.stop();this.removeChild(this.skt);this.skt=null}};t.prototype.stop=function(){if(this.skt){this.skt.stop()}this.removeSelf();this.reset()};return t}(Laya.Box);t.CSkt=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.downStateRes="";t.upStateRes="";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);this.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);this.on(Laya.Event.MOUSE_OVER,this,this.onMouseDown);this.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.onMouseUp=function(){this.upState.visible=true;this.downState.visible=false};t.prototype.onMouseDown=function(){this.upState.visible=false;this.downState.visible=true};t.prototype.setButton=function(t,e){this.downStateRes="res/static/"+t;this.upStateRes="res/static/"+e;this.onMouseUp()};t.SINGLE_KEY="game.CustomButton";return t}(ui.common.anniuUI);t.CustomButton=e})(game||(game={}));var game;(function(t){var e=function(){function t(t){this._item=t}t.prototype.playTween=function(t,e,i){this._itemUpY=t;this._itemDownY=e;this._time=i;this.imgTween1()};t.prototype.clearTween=function(){Laya.Tween.clearAll(this._item)};t.prototype.imgTween1=function(){Laya.Tween.to(this._item,{y:this._itemDownY},this._time,null,new Laya.Handler(this,this.imgTween2))};t.prototype.imgTween2=function(){Laya.Tween.to(this._item,{y:this._itemUpY},this._time,null,new Laya.Handler(this,this.imgTween1))};return t}();t.DownUpTweenView=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.onHelpClickHandler=function(t,e,i){var n="";if(i&&!i["type"]){n+=i.run()}tip.TipManager.showHelpInfoTip(e,t+n)};e.register=function(t,e,i){for(var n=0,r=e.length;n<r;n++){var o=e[n];if(o){o.on(Laya.Event.CLICK,this,this.onHelpClickHandler,[app.getLang("func"+t),app.getLang("func"+t+"t"),i])}}};e.registerStr=function(t,e,i){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(o){o.on(Laya.Event.CLICK,this,this.onHelpClickHandler,[app.getLang(i),app.getLang(e)])}}};return e}(Laya.Handler);t.HelperViewHandler=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(t){var e=function(t){__extends(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.daojulist.width=this.daojulist.height=0};r.prototype.onClick=function(t){if(t.target==this.quxiaobtn||t.target==this.quedingbtn){app.ViewManager.toggleDialog(r,-1)}};r.prototype.onDisplay=function(){this.callLater(this.updateLayout)};r.prototype.onUnDisplay=function(){};r.prototype.updateLayout=function(){if(this.dataSource["msg"]){this.label01.text=this.dataSource.msg;this.quxiaobtn.clickHandler=this.dataSource.cancelHandler;this.quedingbtn.clickHandler=this.dataSource.okHandler}if(!!this.dataSource["cancelHandler"]&&!!this.dataSource["okHandler"]){this.quxiaobtn.visible=true;this.quedingbtn.visible=true;this.quxiaobtn.x=100;this.quedingbtn.x=344}else{this.quxiaobtn.visible=false;this.quedingbtn.visible=true;this.quedingbtn.x=221}if(this.dataSource["items"]&&this.dataSource.items.length){this.daojulist.visible=true;this.daojulist.array=this.dataSource.items}else{this.daojulist.visible=false}};r.show=function(t,e,i,n){if(i===void 0){i=undefined}if(n===void 0){n=undefined}app.ViewManager.toggleDialog(r,1,0,{msg:t,items:e,okHandler:i,cancelHandler:n})};r.SINGLE_KEY="game.ItemAlert";return r}(ui.alert.alert03UI);t.ItemAlert=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var items;(function(t){var e=function(t){__extends(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listdaoju.itemRender=i;this.listdaoju.renderHandler=new Laya.Handler(this,this.onItemRender);this.listdaoju.repeatX=4;this.listdaoju.spaceX=20;this.listdaoju.spaceY=20};r.prototype.onItemRender=function(t){t.setData(t.dataSource);if(t.dataSource.itemCfg.type==csv.ItemProxy.TYPES.TEAM_ICON){if(game.Context.aliveTeamAvatars.indexOf(t.dataSource.itemCfg.p1)!=-1){t.gray=true;return}}t.gray=false};r.prototype.onDisplay=function(){this.callLater(this.refreshAll)};r.prototype.onUnDisplay=function(){};r.prototype.refreshAll=function(){var t=this.dataSource[0];var e=game.ItemUtil.parserList(t.itemCfg.p4);if(e.length>8){this.ani2.gotoAndStop(0)}else if(e.length>4){this.ani1.gotoAndStop(0)}else{this.ani2.stop();this.ani1.stop()}this.listdaoju.repeatY=Math.ceil(e.length/4);this.listdaoju.array=e};r.prototype.chooseItem=function(t){var e=this.dataSource[0];var i=this.dataSource[1];var n=new Uint64(t.getItemId(),0);app.ProtocolRequest.UseItemReq(e.getInstId(),i,n);app.ViewManager.toggleDialog(r,-1,0)};r.SINGLE_KEY="game.ItemChooseView";return r}(ui.alert.alert04UI);t.ItemChooseView=e;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.doClick=function(){if(this.data.itemCfg.type==csv.ItemProxy.TYPES.TEAM_ICON){if(game.Context.aliveTeamAvatars.indexOf(this.data.itemCfg.p1)!=-1){manager.FlowManager.instance.flowByStyle1(app.getLang("repeat_error1"));return}}tip.TipManager.showByBtnType(this.data,[tip.TipManager.TIP_BTN_TYPE.CHOOSE_GIFT_BAG])};return e}(grids.GridView);t.ItemChooseGrid=i})(items||(items={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n.cd=200;n.btnLeft=t;n.btnRight=e;n.item=i;n.btnLeft.on(Laya.Event.CLICK,n,n.onLeft);n.btnRight.on(Laya.Event.CLICK,n,n.onRight);n._index=0;return n}t.prototype.onLeft=function(){this.item.leftMove();this.index--;this.clearMouseEnable(this.btnLeft)};t.prototype.onRight=function(){this.item.rightMove();this.index++;this.clearMouseEnable(this.btnRight)};t.prototype.clearMouseEnable=function(t){t.mouseEnabled=false;Laya.timer.once(this.cd,this,this.recoverMouseEnable,[t])};t.prototype.recoverMouseEnable=function(t){t.mouseEnabled=true};Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t;if(this._array){if(this._index==0){this.btnLeft.visible=false}else if(this._array.length==1){this.btnLeft.visible=false}else{this.btnLeft.visible=true}if(this._index==this._array.length-1){this.btnRight.visible=false}else if(this._array.length==1){this.btnRight.visible=false}else{this.btnRight.visible=true}this.item.setData(this.selectData);if(this.selectHandler){this.selectHandler.run()}}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"selectData",{get:function(){return this._array[this._index]},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"array",{get:function(){return this._array},set:function(t){this._array=t},enumerable:true,configurable:true});t.prototype.updataRedList=function(t){i.RedDotView.removeFrom(this.btnLeft);for(var e=0;e<this._index;e++){if(t[e]){i.RedDotView.addTo(this.btnLeft,25,-5,1/this.btnLeft.scaleX,1/this.btnLeft.scaleY);break}}i.RedDotView.removeFrom(this.btnRight);for(var e=this._index+1;e<this._array.length;e++){if(t[e]){i.RedDotView.addTo(this.btnRight,15,-5,1/this.btnRight.scaleX,1/this.btnRight.scaleY);break}}};return t}(Laya.EventDispatcher);i.LeftRightMoveMediator=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(l){var t=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n._showMaxIndex=-1;n.isCellDot=true;n.rendering=false;n._currentIndex=0;n._list=t;n._list.hScrollBarSkin=" ";n._leftButton=e;n._rightButton=i;n._leftButton.clickHandler=Laya.Handler.create(n,n.onLeft,null,false);n._rightButton.clickHandler=Laya.Handler.create(n,n.onRight,null,false);n._list.on(Laya.Event.MOUSE_DOWN,n,n.onScrollDown);if(n._list.scrollBar){n._list.scrollBar.touchScrollEnable=true;n._list.scrollBar.elasticDistance=100;n._list.scrollBar.elasticBackTime=100;n._list.scrollBar.on(Laya.Event.END,n,n.onScrollEnd)}return n}t.prototype.onScrollDown=function(){this._list.on(Laya.Event.MOUSE_MOVE,this,this.onScrollMove);this._list.on(Laya.Event.MOUSE_UP,this,this.onScrollChanged);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onScrollChanged)};t.prototype.onScrollEnd=function(){this._currentIndex=this._list.startIndex;Laya.timer.callLater(this,this.doDotUpdate);Laya.timer.callLater(this,this.updateBtnState)};Object.defineProperty(t.prototype,"list",{get:function(){return this._list},enumerable:true,configurable:true});t.prototype.onScrollMove=function(){this._currentIndex=this._list.startIndex;this.updateBtnState();if(this.dotsParams){this.doDotUpdate()}};t.prototype.onScrollChanged=function(){this._list.off(Laya.Event.MOUSE_MOVE,this,this.onScrollMove);this._list.off(Laya.Event.MOUSE_UP,this,this.onScrollChanged);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onScrollChanged)};t.prototype.setPage=function(){this.onMoveList();this._isChanged=true;Laya.timer.callLater(this,this.render)};Object.defineProperty(t.prototype,"array",{set:function(t){this._list.array=t;this._isChanged=true;Laya.timer.callLater(this,this.render)},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"repeatX",{get:function(){return this._list.repeatX},set:function(t){this._list.repeatX=t;this._isChanged=true;Laya.timer.callLater(this,this.render)},enumerable:true,configurable:true});t.prototype.render=function(){if(this._isChanged){this._isChanged=false;this.updateBtnState();if(this.dotsParams){Laya.timer.callLater(this,this.doDotUpdate)}}};t.prototype.onLeft=function(){this._currentIndex-=this.repeatX;this.onMoveList();this._isChanged=true;Laya.timer.callLater(this,this.render)};t.prototype.onRight=function(){this._currentIndex+=this.repeatX;this.onMoveList();this._isChanged=true;Laya.timer.callLater(this,this.render)};t.prototype.onMoveList=function(){this.rendering=true;this._currentIndex=Math.min(Math.max(this._currentIndex,0),this.list.array.length-this.list.repeatX);this._list.tweenTo(this._currentIndex,350,new Laya.Handler(this,this.onComplete))};t.prototype.onComplete=function(){this.rendering=false;Laya.timer.callLater(this,this.doDotUpdate)};t.prototype.setDots=function(t,e,i){if(t){this.dotsParams={indexes:t,dotX:e,dotY:i};Laya.timer.callLater(this,this.doDotUpdate)}else{this.dotsParams=null;Laya.timer.clear(this,this.doDotUpdate)}};t.prototype.doDotUpdate=function(){if(!this.dotsParams){return}var t=this.dotsParams.indexes;var e=this.dotsParams.dotX;var i=this.dotsParams.dotY;for(var n=0;n<this._list.cells.length;++n){var r=this._list.array.indexOf(this._list.cells[n].dataSource);if(this.isCellDot&&t.indexOf(r)>-1){l.RedDotView.addTo(this._list.cells[n],e?e:this._list.cells[n].width-5,i?i:5)}else{l.RedDotView.removeFrom(this._list.cells[n])}var o=false;var a=false;for(var s=0;s<t.length;++s){if(t[s]<this._list.startIndex){o=true}if(t[s]>=this._list.repeatX+this._list.startIndex){a=true}}if(o){l.RedDotView.addTo(this._leftButton)}else{l.RedDotView.removeFrom(this._leftButton)}if(a){l.RedDotView.addTo(this._rightButton,20)}else{l.RedDotView.removeFrom(this._rightButton)}}};t.prototype.updateBtnState=function(){if(!this._list.array){return}if(this._currentIndex<=0){this._leftButton.visible=false;this._currentIndex=0}else{this._leftButton.visible=true}if(this._currentIndex>=(this._showMaxIndex>=0?this._showMaxIndex:this._list.array.length-this.repeatX)){this._rightButton.visible=false;this._currentIndex=this._showMaxIndex>=0?this._showMaxIndex:this._list.array.length-this.repeatX}else{this._rightButton.visible=true}this.event(Laya.Event.CHANGE)};Object.defineProperty(t.prototype,"currentPage",{get:function(){return Math.ceil(this._currentIndex/this.repeatX)},set:function(t){if(this._currentIndex!=t){this._currentIndex=t*this.list.repeatX;this.onMoveList();this._isChanged=true;Laya.timer.callLater(this,this.render)}},enumerable:true,configurable:true});t.prototype.setSelect=function(t){if(this._list.selectedIndex!=t){this._currentIndex=Math.min(t,this._showMaxIndex>=0?this._showMaxIndex:this._list.array.length-this.repeatX);this._list.scrollTo(t);this._list.selectedIndex=t;this._isChanged=true;Laya.timer.callLater(this,this.render)}};t.prototype.setShowMaxIndex=function(t){this._showMaxIndex=t;this._isChanged=true;Laya.timer.callLater(this,this.render)};return t}(Laya.EventDispatcher);l.ListPageMediator=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(u){__extends(t,u);function t(t,e,i,n,r,o,a,s){if(a===void 0){a=0}if(s===void 0){s=["id","name"]}var l=u.call(this)||this;l.boUp=false;l.keyArr=s;l._list=t;l._btn=e;l._lbl=i;l._list.itemRender=n;l.selectHandler=r;l._list.renderHandler=new Laya.Handler(l,l.onRender);l._list.selectHandler=new Laya.Handler(l,l.onSelect);l._list.ignoreSelectIndex=true;l._list.selectEnable=true;l.maxHeight=a;l.size=o;l._list.on(Laya.Event.CLICK,l,l.stopBubble);l._btn.offAll();l._btn.on(Laya.Event.CLICK,l,l.onBtn);return l}t.prototype.setButtonClick=function(){this._btn.offAll();this._btn.on(Laya.Event.CLICK,this,this.onBtn)};t.prototype.stopBubble=function(t){t.stopPropagation()};t.prototype.onBtn=function(t){t.stopPropagation();this.setState()};t.prototype.onClick=function(t){if(t.target instanceof this._list.itemRender){return}if(t.target==this._btn){return}if(this._mouseX==t.stageX&&this._mouseY==t.stageY){this.setState()}};t.prototype.onRecord=function(t){this._mouseX=t.stageX;this._mouseY=t.stageY};t.prototype.setState=function(){if(this._list.visible==true){this._list.visible=false;this._btn.selected=false;Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onRecord);Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onClick)}else{this._list.visible=true;this._btn.selected=true;Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onRecord);Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onClick)}};t.prototype.onSelect=function(t){if(this._list.selectedItem){this._lbl.text=this._list.selectedItem[this.keyArr[1]];if(this._boNoState){this._boNoState=false}else{this.selectHandler.runWith(this._list.selectedItem[this.keyArr[0]]);this.setState()}}};t.prototype.onRender=function(t,e){t.setData(t.dataSource)};t.prototype.init=function(t){if(t===void 0){t=true}this._list.visible=false;this._btn.selected=false;this._list.selectedIndex=-1;if(t){this._lbl.text=this._list.array[0][this.keyArr[1]]}};Object.defineProperty(t.prototype,"array",{set:function(t){this._list.array=t;var e=t.length;var i=e*this.size+(e-1)*this._list.spaceY;if(this.maxHeight==0){this._list.vScrollBarSkin="";this._list.height=i}else{if(i>this.maxHeight){this._list.vScrollBarSkin=" ";this._list.height=this.maxHeight}else{this._list.vScrollBarSkin="";this._list.height=i}}if(this.boUp){this._list.y=this._lbl.y-20-this._list.height}},enumerable:true,configurable:true});t.prototype.setSelectId=function(t){var e=0;for(var i=0,n=this._list.array.length;i<n;i++){if(t==parseInt(this._list.array[i][this.keyArr[0]])){e=i;break}}this._boNoState=true;this._list.selectedIndex=e};Object.defineProperty(t.prototype,"selectId",{get:function(){var t=0;if(this._list.selectedItem){t=this._list.selectedItem[this.keyArr[0]]}return t},enumerable:true,configurable:true});return t}(Laya.EventDispatcher);t.ListSelectMediator=e})(common||(common={}));var common;(function(t){var e=function(){function t(t,e,i,n){this.isDown=false;this.target=t;this.delay=e;this.callbackDown=i;this.callbackUp=n;if(t){t.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);t.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}}t.prototype.onMouseDown=function(t){if(this.isDown==false){this.isDown=true;if(t.target==this.target){Laya.timer.once(this.delay,this,this.onRunHandler)}}};t.prototype.onRunHandler=function(){if(this.isDown){if(this.callbackDown){this.callbackDown.run()}}};t.prototype.onMouseUp=function(t){if(this.isDown=true){this.isDown=false}if(t.target==this.target){Laya.timer.clear(this,this.onRunHandler);if(this.callbackUp){this.callbackUp.run()}}};return t}();t.LongPressHandler=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(u){__extends(t,u);function t(t,e,i,n,r,o,a,s){if(r===void 0){r=false}if(o===void 0){o=false}var l=u.call(this)||this;l._isGray=r;l._isOffset=o;l._firstButton=i;l._lastButton=n;l._firstButton.on(Laya.Event.CLICK,l,l.onLeft);l._lastButton.on(Laya.Event.CLICK,l,l.onRight);l._uiList=t;l._uiList.itemRender=e;l._uiList.renderHandler=a?a:new Laya.Handler(l,l.onRenderHandler);l._uiList.selectHandler=s?s:new Laya.Handler(l,l.onSelectHandler);l._uiList.selectEnable=true;return l}t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onSelectHandler=function(t){};Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._uiList.selectedIndex},set:function(t){this._uiList.selectedIndex=t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"array",{get:function(){return this._uiList.array},set:function(t){this._uiList.array=t;if(!this._uiList.array||this._uiList.array.length==0){this._firstButton.visible=false;this._lastButton.visible=false;this._uiList.visible=false}else{this._firstButton.visible=true;this._lastButton.visible=true;this._uiList.visible=true}},enumerable:true,configurable:true});t.prototype.scrollTo=function(t){this._uiList.scrollTo(t)};t.prototype.onRefreshList=function(){this._firstButton.disabled=false;this._lastButton.disabled=false;if(this._isGray){if(this._uiList.startIndex==0){this._firstButton.disabled=true}else{this._firstButton.disabled=false}if(this._uiList.startIndex==this._uiList.array.length-this._uiList.repeatY+1){this._lastButton.disabled=true}else{this._lastButton.disabled=false}}if(this._isOffset){}};t.prototype.onLeft=function(){this._uiList.startIndex-=1;if(this._uiList.startIndex<0){this._uiList.startIndex=0}this._uiList.tweenTo(this._uiList.startIndex,350,new Laya.Handler(this,this.onComplete));this.onRefreshList()};t.prototype.onRight=function(){var t=this._uiList.array.length-this._uiList.repeatY+1;this._uiList.startIndex+=1;if(this._uiList.startIndex>t){this._uiList.startIndex=t}this._uiList.tweenTo(this._uiList.startIndex,350,new Laya.Handler(this,this.onComplete));this.onRefreshList()};t.prototype.onComplete=function(){Laya.timer.callLater(this,this.doDotUpdate)};t.prototype.doDotUpdate=function(){};return t}(Laya.EventDispatcher);t.MoveListMediator=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var n=function(){function t(t){this.istouch=false;this.speed=200;this.cur=0;this.s=t;var e=i.Config.getParams(614).split(";");if(!this.everyUpCnt){this.everyUpCnt=parseInt(e[0])}if(!this.upCnt){this.upCnt=parseInt(e[1])}t.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown);t.on(Laya.Event.MOUSE_UP,this,this.onMouseUp);t.on(Laya.Event.MOUSE_OUT,this,this.onMouseUp)}t.prototype.onMouseDown=function(){this.istouch=true;this.speed=1e3/this.everyUpCnt;var t=1e3/this.upCnt;if(this.tween){this.tween.clear()}this.tween=Laya.Tween.to(this,{speed:t},1e3,Laya.Ease.linearNone);Laya.timer.once(this.speed,this,this.ef)};t.prototype.ef=function(){if(this.s&&!this.s.displayedInStage){this.onMouseUp()}if(this.istouch){this.output();Laya.timer.once(this.speed,this,this.ef)}};t.prototype.output=function(){this.cur=Laya.timer.currTimer;this.handler.run()};t.prototype.onMouseUp=function(){this.istouch=false;if(this.tween){this.tween.clear()}};t.prototype.stop=function(){this.istouch=false};return t}();i.LongTouch=n;var t=function(o){__extends(e,o);function e(t,e,i,n){var r=o.call(this)||this;r.btnMinu=t;r.btnAdd=e;r.lblNum=i;r.btnMax=n;r.addEventListeners();r.on(Laya.Event.DISPLAY,r,r.onDisplay);r.on(Laya.Event.UNDISPLAY,r,r.onUnDisplay);return r}e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){this.addLt.stop();this.minLt.stop()};e.prototype.init=function(t,e,i,n){if(t===void 0){t=1}if(e===void 0){e=1}if(i===void 0){i=1}if(n===void 0){n=999}this.currValue=t;this.changeValue=e;this.minValue=i;this.maxValue=n;this.setCurrValue()};Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._maxValue},set:function(t){if(t>999){t=999}else if(t<0){t=0}this._maxValue=t;this.setCurrValue()},enumerable:true,configurable:true});e.prototype.addEventListeners=function(){var t=this;this.btnAdd.on(Laya.Event.CLICK,this,this.clickHandler);this.btnMinu.on(Laya.Event.CLICK,this,this.clickHandler);if(this.btnMax){this.btnMax.on(Laya.Event.CLICK,this,this.clickHandler)}this.addLt=new n(this.btnAdd);this.addLt.handler=new Laya.Handler(this,function(){t.clickByButton(t.btnAdd)});this.minLt=new n(this.btnMinu);this.minLt.handler=new Laya.Handler(this,function(){t.clickByButton(t.btnMinu)})};e.prototype.clickHandler=function(t){var e=t.currentTarget;this.clickByButton(e)};e.prototype.clickByButton=function(t){if(t==this.btnAdd){this.addDell()}else if(t==this.btnMinu){this.minuDell()}else if(t==this.btnMax){this.currValue=this.maxValue}this.setCurrValue();this.event(e.VALUE_CHANGE)};e.prototype.addDell=function(){if(this.currValue>this.maxValue){return}if(this.currValue+this.changeValue>this.maxValue){this.currValue=this.maxValue;return}this.currValue+=this.changeValue};e.prototype.minuDell=function(){if(this.currValue<=this.minValue){return}if(this.currValue-this.changeValue<this.minValue){this.currValue=this.minValue;return}this.currValue-=this.changeValue};e.prototype.setCurrValue=function(){this.lblNum.text=this.currValue.toString();if(this.currValue<=this.minValue){this.btnMinu.mouseEnabled=false}else{this.btnMinu.mouseEnabled=true}if(this.currValue>=this.maxValue){this.btnAdd.mouseEnabled=false}else{this.btnAdd.mouseEnabled=true}};e.VALUE_CHANGE="value_change";return e}(Laya.EventDispatcher);i.NumChoose=t})(game||(game={}));var game;(function(o){var t=function(){function t(){this._flowProps=Attributes.getFlowProps();this._queue=new app.Queue}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.flow=function(t){this._actAttrs=t;Laya.timer.once(300,this,this.updateFlow)};t.prototype.updateFlow=function(){if(this._tempAtts){this.flowProp(this._tempAtts,this._actAttrs)}this._tempAtts=this._actAttrs};t.prototype.flowProp=function(t,e){var i=[];if(o.Context.mainRole.attribute.length>0){for(var n=0;n<e.length;++n){if(this._flowProps.indexOf(n)>-1){if(e[n]!=t[n]){var r=new PropValue;r.propId=n;r.value=e[n]-t[n];i.push(r)}}}}this._queue.queue(new Laya.Handler(this,this.show,[i]),800)};t.prototype.show=function(t){var e=this;for(var i=0,n=t.length;i<n;++i){var r=void 0;if(t[i].value>0){r=this.createLabelAdd();r.text=Attributes.getShowLabel(t[i],"{0} +{1}")}else{r=this.createLabelReduce();r.text=Attributes.getShowLabel(t[i],"{0} {1}")}app.AppContainer.flowLayer.addChild(r);r.x=Laya.stage.width*.5-100;r.y=Laya.stage.height*.5-(i-t.length*.5)*40;r.anchorX=1;r.anchorY=.5;var o=Laya.stage.height*.5-(i-t.length*.5)*30;Laya.Tween.to(r,{y:o-150},700+n*20,Laya.Ease.linearNone,new Laya.Handler(this,function(t){Laya.Tween.to(t,{alpha:0},300,Laya.Ease.linearNone,new Laya.Handler(e,function(){t.removeSelf()}))},[r]),700);r.scaleX=r.scaleY=1.5;Laya.Tween.to(r,{scaleX:1,scaleY:1,y:o},200,Laya.Ease.linearNone,null,i*20)}};t.prototype.createLabelAdd=function(){var t=new Laya.Label;t.color=o.STYLES.GREEN_COLOR_S;t.fontSize=26;t.bold=true;t.font=o.STYLES.FONT;return t};t.prototype.createLabelReduce=function(){var t=new Laya.Label;t.color=o.STYLES.RED_COLOR_S;t.fontSize=26;t.bold=true;t.font=o.STYLES.FONT;return t};t.SINGLE_KEY="game.PropFlowManager";return t}();o.PropFlowManager=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n.selectHandler=i;n.roleList=t;n.roleList.scrollRectOffX=10;n.roleList.scrollRectOffY=10;n.roleList.itemRender=e;n.roleList.renderHandler=new Laya.Handler(n,n.onRenderHandler);n.roleList.selectHandler=new Laya.Handler(n,n.onSelectHandler);n.roleList.selectEnable=true;return n}t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e)};t.prototype.onSelectHandler=function(t){if(this._selectedIndex==t){return}if(t>=0){if(!this._dataArr[t].role){return}if(this.selectCheckHandler){if(this.selectCheckHandler){var e=this.selectCheckHandler.runWith(this._dataArr[t].role);if(e.length>0){manager.FlowManager.instance.flowByStyle1(e);return}}}game.RoleModel.getIns().uiRoleSelectIndex=this._selectedIndex=t;for(var i=0;i<game.Context.TOTAL_ROLE_NUM;i++){if(this._dataArr[i]){this._dataArr[i].select=Boolean(this._selectedIndex==i)}}this.roleList.refresh();if(this.selectHandler){this.selectHandler.run()}}};Object.defineProperty(t.prototype,"selectedRoleUid",{get:function(){var t;if(this._dataArr[this._selectedIndex]&&this._dataArr[this._selectedIndex].role){t=this._dataArr[this._selectedIndex].role.insId}return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"selectedRoleVo",{get:function(){var t;if(this._dataArr[this._selectedIndex]){t=this._dataArr[this._selectedIndex].role}return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:true,configurable:true});t.prototype.setData=function(t,e,i,n){if(t===void 0){t=-1}if(game.RoleModel.getIns().uiRoleSelectIndex==null||game.RoleModel.getIns().uiRoleSelectIndex==undefined){game.RoleModel.getIns().uiRoleSelectIndex=t}else{t=game.RoleModel.getIns().uiRoleSelectIndex}this._selectedIndex=t;this.roleList.selectedIndex=t;this._dataArr=[];for(var r=0;r<game.Context.TOTAL_ROLE_NUM;r++){var o={role:n?n[r]:game.Context.roleList[r],select:Boolean(t==r),boRed:e&&e[r]||false,boXin:i&&i[r]||false};this._dataArr.push(o)}this.roleList.array=this._dataArr;if(this._selectedIndex>3){this.roleList.scrollTo(this._selectedIndex)}else{this.roleList.scrollTo(0)}};t.prototype.setRedArr=function(t){for(var e=0;e<game.Context.TOTAL_ROLE_NUM;e++){this._dataArr[e].boRed=!this._dataArr[e].role?false:t[e]||false}this.roleList.refresh()};t.prototype.setXinArr=function(t){for(var e=0;e<game.Context.TOTAL_ROLE_NUM;e++){this._dataArr[e].boXin=!this._dataArr[e].role?false:t[e]||false}this.roleList.refresh()};return t}(Laya.EventDispatcher);t.RoleListMediator=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n.selectHandler=i;n.roleList=t;n.roleList.scrollRectOffX=10;n.roleList.scrollRectOffY=10;n.roleList.itemRender=e;n.roleList.renderHandler=new Laya.Handler(n,n.onRenderHandler);n.roleList.selectHandler=new Laya.Handler(n,n.onSelectHandler);n.roleList.selectEnable=true;return n}t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e)};t.prototype.onSelectHandler=function(t){if(this._selectedIndex==t){return}if(t>=0){if(!this._dataArr[t].role){return}if(this.selectCheckHandler){if(this.selectCheckHandler){var e=this.selectCheckHandler.runWith(this._dataArr[t].role);if(e.length>0){manager.FlowManager.instance.flowByStyle1(e);return}}}this._selectedIndex=t;for(var i=0;i<game.Context.TOTAL_ROLE_NUM;i++){if(this._dataArr[i]){this._dataArr[i].select=Boolean(this._selectedIndex==i)}}this.roleList.refresh();if(this.selectHandler){this.selectHandler.run()}}};Object.defineProperty(t.prototype,"selectedRoleUid",{get:function(){var t;if(this._dataArr[this._selectedIndex]&&this._dataArr[this._selectedIndex].role){t=this._dataArr[this._selectedIndex].role.insId}return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"selectedRoleVo",{get:function(){var t;if(this._dataArr[this._selectedIndex]){t=this._dataArr[this._selectedIndex].role}return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:true,configurable:true});t.prototype.setData=function(t,e,i){if(t===void 0){t=-1}if(i===void 0){i=false}this._selectedIndex=t;this.roleList.selectedIndex=t;this._dataArr=[];for(var n=0,r=e.length;n<r;n++){var o={role:e[n],select:Boolean(t==n),boRed:false,boOther:i};this._dataArr.push(o)}this.roleList.array=this._dataArr;if(this._selectedIndex>3){this.roleList.scrollTo(this._selectedIndex)}else{this.roleList.scrollTo(0)}game.RoleModel.getIns().uiRoleSelectIndex=this._selectedIndex};t.prototype.setRedArr=function(t){for(var e=0;e<game.Context.TOTAL_ROLE_NUM;e++){this._dataArr[e].boRed=!this._dataArr[e].role?false:t[e]||false}this.roleList.refresh()};return t}(Laya.EventDispatcher);t.RoleListMediator2=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var main;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boMove=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=(Laya.stage.width-this.width)*.5;this.y=Laya.stage.height-500;this.skill01.autoPlay=false;this.skill01.visible=false;this.skill01.on(Laya.Event.COMPLETE,this,this.onAniEnd)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.setData(this.dataSource[0])};t.prototype.setData=function(t){if(this.boMove){return}this.alpha=1;this.boMove=true;var e=t.toString();this.numLen=e.length;this.numArr=[];this.count=0;for(var i=0;i<this.numLen;i++){var n=parseInt(e[i]);if(!this.numArr[i]){this.numArr[i]=[]}for(var r=0;r<=n;r++){this.numArr[i].push(r)}if(n==0){this.numArr[i].push(game.SceneModel.random(2,5));this.numArr[i].push(game.SceneModel.random(6,9));this.numArr[i].push(0);this.count+=4}else{this.count+=n}}this.d1=this.numLen-1;this.d2=0;this.skill01.visible=true;this.skill01.play();var o=1e3/this.count;this.loop();Laya.timer.loop(o,this,this.loop);Laya.timer.once(1300,this,this.stop)};t.prototype.onAniEnd=function(){this.skill01.visible=false};t.prototype.loop=function(){if(!this.numArr[this.d1]){Laya.timer.clear(this,this.loop);return}var t="+";for(var e=0;e<this.numLen;e++){if(e<this.d1){t+="0"}else if(e==this.d1){t+=this.numArr[this.d1][this.d2]}else{var i=this.numArr[e].length;t+=this.numArr[e][i-1]}}this.d2++;var n=this.numArr[this.d1].length;if(this.d2>=n){this.d1--;this.d2=0}this.zhanli.value=t};t.prototype.stop=function(){app.MyTween.to(this,{alpha:0},500,Laya.Ease.quartOut,Laya.Handler.create(this,this.clearAll),500)};t.prototype.clearAll=function(){this.boMove=false;app.ViewManager.toggleView(i.ScoreFlowView,app.AppContainer.flowLayer,-1);this.dataSource[1].run()};t.SINGLE_KEY="main.ScoreFlowView";return t}(ui.main.mianpingfenview1UI);i.ScoreFlowView=t})(main||(main={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(p){var t=function(e){__extends(u,e);function u(){var t=e!==null&&e.apply(this,arguments)||this;t._dataArr=[];return t}u.registFunctionView=function(t,e){this.map[t]={view:e}};u.getFunctionView=function(t){return u.map[t]};u.groupFuncs=function(t,e){this.group[t]=e};u.getIns=function(){return app.Singleton.getInstance(u)};u.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.yeqian.itemRender=i;this.yeqian.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.yeqian.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.yeqian.selectEnable=true;game.Context.on(game.ContextEvent.FUNCTION_DOT_CHANGE,this,this.dotChange);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.SECOND_COMMON_WINDOW_CLOSE,this.backbtn)};u.prototype.onDisplay=function(){game.Context.event(game.ContextEvent.SECOND_WINDOW_OPEN);this.callLater(this.refreshAll)};u.prototype.onUnDisplay=function(){game.Context.event(game.ContextEvent.SECOND_WINDOW_CLOSE);this.clearContent();this._selectedIndex=-1;this.yeqian.scrollTo(0)};u.prototype.refreshAll=function(){this.groupId=this.dataSource[0];var t=this.dataSource[1];var e=u.group[this.groupId];var i=0;this._dataArr=[];for(var n=0,r=e.length;n<r;n++){var o=e[n];if(csv.FunctionsProxy.getIns().isOpen(o)===false){continue}var a=u.getFunctionView(o);var s=csv.FunctionsProxy.getIns().getCfg(o);var l=new p.CommonWindowVo;l.funcId=o;l.windowId=0;l.clazz=a&&a.view;l.index=n;l.buttonname=s.buttonname;l.buttonicon=s.buttonicon;l.windowname=s.windowname;l.boRed=game.ClosureManager.hasDot(l.funcId);l.boLimit=game.ClosureManager.hasLimit(l.funcId);l.boSelect=false;this._dataArr.push(l);if(t==e[n]){i=n}}this._dataLen=this._dataArr.length;this.showByIndex(i)};u.prototype.dotChange=function(t){for(var e=0,i=this._dataArr.length;e<i;e++){var n=this._dataArr[e];if(t==n.funcId){n.boRed=game.ClosureManager.hasDot(n.funcId);this.yeqian.refresh();break}}};u.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};u.prototype.onSelectHandler=function(t){if(this._selectedIndex==t){return}this._selectedIndex=t;this.clearContent();this.showByIndex(t)};u.prototype.clearContent=function(){while(this.neibuview.numChildren>0){this.neibuview.removeChildAt(0)}};u.prototype.setSelectIndex=function(t){for(var e=0;e<this._dataLen;++e){this._dataArr[e].boSelect=Boolean(t==e)}this.yeqian.array=this._dataArr;this._selectedIndex=t;this.yeqian.selectedIndex=t};u.prototype.getSelectFid=function(){if(this._selectedVO){return this._selectedVO.funcId}return 0};u.prototype.isContainFuncID=function(t){var e=this._dataArr;if(e){for(var i=0;i<e.length;i++){if(e[i].funcId==t){return true}}}return false};u.prototype.getFuncBtn=function(t){for(var e=0,i=this.yeqian.cells.length;e<i;e++){var n=this.yeqian.cells[e];if(n&&n.dataSource&&n.dataSource.funcId==t){return n}}};u.prototype.isSelectFuncID=function(t){if(this._selectedVO){return Boolean(this._selectedVO.funcId==t)}return false};u.prototype.showByIndex=function(t){this.setSelectIndex(t);var e=this._dataArr[t];if(t>3){this.yeqian.scrollTo(t)}this.fillPanel(e)};u.prototype.fillPanel=function(t){if(t){if(t.clazz){this._selectedVO=t;app.ViewManager.toggleView(t.clazz,this.neibuview,1)}else{manager.FlowManager.instance.flowByStyle1("未注册面板"+t.funcId)}if(this.labeltitle){this.labeltitle.text=app.getLang(t.windowname)}game.Context.event(game.ContextEvent.FUNCTION_OPEN,t.funcId)}app.SoundManager.getIns().playSound("functionopen")};u.prototype.setDots=function(t){var e=this._dataLen;for(var i=0;i<e;i++){var n=this._dataArr[i];n.boRed=Boolean(t.indexOf(n.funcId)!=-1)}this.yeqian.refresh()};u.prototype.getVoByFuncId=function(t){var e;if(this._dataArr){var i=this._dataLen;for(var n=0;n<i;n++){var r=this._dataArr[n];if(r.funcId==t){e=r;break}}}return e};u.prototype.getBtnByFuncId=function(t){var e=0;if(this._dataArr){var i=this._dataLen;for(var n=0;n<i;n++){var r=this._dataArr[n];if(r.funcId==t){e=n;break}}}this.yeqian.scrollTo(e);return this.getFuncBtn(t)};u.SINGLE_KEY="common.SecondCommonWindow";u.map={};u.group={};u.GROUP_ID={EQUIP:1,RESONATE:2};return u}(ui.main.maintongyongtipsUI);p.SecondCommonWindow=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.vo=t;this.btn.label=app.getLang(t.buttonname);this.btn.selected=t.boSelect;if(t.boRed){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}};return e}(ui.main.maintipyeqianitemUI);p.SecondCommonBtn=i})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var a;(function(t){t[t["ONE"]=0]="ONE";t[t["ALL"]=1]="ALL"})(a=t.SimpleListAniType||(t.SimpleListAniType={}));var e=function(o){__extends(t,o);function t(t,e,i,n){if(n===void 0){n=a.ONE}var r=o.call(this)||this;r.itemHandler=i;r.list=t;r.aniType=n;r.list.itemRender=e;r.list.renderHandler=new Laya.Handler(r,r.onHandler);r._scrollDex=NaN;r.leftHandler=new Laya.Handler(r,r.onLeftEnd);r.aniEndHandler=new Laya.Handler(r,r.onAniEnd);r.showIndex=0;return r}t.prototype.onHandler=function(t,e){t.x=0;t["ani_index"]=e;this.itemHandler.runWith([t,e])};Object.defineProperty(t.prototype,"array",{set:function(t){if(!this.boAni){this.list.array=t}else{this._arr=t}},enumerable:true,configurable:true});t.prototype.scrollTo=function(t){if(!this.boAni){this.list.scrollTo(t)}else{this._scrollDex=t}};t.prototype.setInitAni=function(r,o){var a=this;if(r===void 0){r=300}if(o===void 0){o=50}Laya.timer.callLater(this,function(){a.boAni=true;a.list.mouseEnabled=false;var t=a.list.cells.length;for(var e=0;e<t;e++){var i=a.list.cells[e];var n=(i.height+a.list.spaceY)*3;i.y=i.y+n;Laya.Tween.to(i,{y:i.y-n},r,null,null,e*o)}Laya.timer.once(r+t*o,a,a.onAniEnd)})};t.prototype.setLeftAni=function(t,e,i){if(i===void 0){i=200}this.list.mouseEnabled=false;this.boAni=true;this.leftCell=t;this.leftKey=e;Laya.Tween.to(t,{x:-t.width},i,null,this.leftHandler)};t.prototype.setRightAni=function(t,e){if(e===void 0){e=200}this.leftCell.x=t.width;Laya.Tween.to(t,{x:0},e,null,this.aniEndHandler)};t.prototype.onLeftEnd=function(){this.checkNext()};t.prototype.checkNext=function(){if(this._arr&&this.leftKey!=""&&this._arr[this.leftCell.ani_index]){var t=this._arr[this.leftCell.ani_index][this.leftKey];var e=this.leftCell.dataSource[this.leftKey];if(t==e){this.setRightAni(this.leftCell)}else{this.aniType?this.setAllUpAni(this.leftCell):this.setUpAni(this.leftCell)}}else{this.aniType?this.setAllUpAni(this.leftCell):this.setUpAni(this.leftCell)}};t.prototype.setUpAni=function(t,e,i){if(e===void 0){e=200}if(i===void 0){i=100}this.list.mouseEnabled=false;this.boAni=true;this.showIndex=this.showIndex==0?1:0;var n=t["ani_index"];var r=-1;Laya.Tween.to(this,{x:-t.width},e,null,null,r*i);for(var o=0,a=this.list.cells.length;o<a;o++){var s=this.list.cells[o];if(s&&s["ani_index"]>n){r++;Laya.Tween.to(s,{y:s.y-s.height-this.list.spaceY},e,null,null,r*i)}}Laya.timer.once(e+r*i,this,this.onAniEnd)};t.prototype.setAllUpAni=function(t,e,i){if(e===void 0){e=200}if(i===void 0){i=100}this.list.mouseEnabled=false;this.boAni=true;this.showIndex=this.showIndex==0?1:0;var n=t["ani_index"];Laya.Tween.to(this,{x:-t.width},e,null,null,i);for(var r=0,o=this.list.cells.length;r<o;r++){var a=this.list.cells[r];if(a&&a["ani_index"]>n){Laya.Tween.to(a,{y:a.y-a.height-this.list.spaceY},e,null,null,i)}}Laya.timer.once(e+i,this,this.onAniEnd)};t.prototype.onAniEnd=function(){this.list.mouseEnabled=true;this.boAni=false;if(this._arr){this.list.array=this._arr;this._arr=null}if(!isNaN(this._scrollDex)){this.list.scrollTo(this._scrollDex);this._scrollDex=NaN}};return t}(Laya.EventDispatcher);t.SimpleListAni=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(a){__extends(t,a);function t(t,e,i){var n=a.call(this)||this;n.skinUrl="";n.starArr=t;n.box=e;if(t.length==0&&e){for(var r=0;r<n.starArr.length;r++){var o=new Laya.Image;n.box.addChild(o);n.starArr.push(o)}}n.skinUrl="";return n}Object.defineProperty(t.prototype,"value",{set:function(t){if(t==0){for(var e=0;e<this.starArr.length;e++){this.starArr[e].visible=false}return}var i=Math.floor(t/this.starArr.length)+1;var n=t%this.starArr.length;if(n==0){n=this.starArr.length;i-=1}for(var e=0;e<this.starArr.length;e++){var r="public/bg_wujiaoxing"+i+".png";if(this.skinUrl.length>0){r=this.skinUrl}if(e<n){this.starArr[e].visible=true;this.starArr[e].skin=r;if(this.box){this.starArr[e].x=(this.box.width-36*n)/2+e*36}}else{this.starArr[e].visible=false}}},enumerable:true,configurable:true});t.prototype.setStar=function(t){for(var e=0;e<this.starArr.length;e++){this.starArr[2-e].gray=true;if(e<t){this.starArr[2-e].gray=false}}};t.getStarName=function(t){if(t==0){return""}var e="";var i=Math.floor(t/5)+1;var n=t%5;if(n==0){n=5;i-=1}if(i==1){e=app.getLang("黄{0}星激活",n)}else if(i==2){e=app.getLang("紫{0}星激活",n)}else{e=app.getLang("橙{0}星激活",n)}return e};return t}(Laya.EventDispatcher);t.StarClipMediator=e})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n.liststar=t;n.liststar.boReverseCell=true;n.box=e;n.size=i;n.liststar.itemRender=game.ComStarItem;n.liststar.renderHandler=new Laya.Handler(n,n.onStarRender);return n}t.prototype.onStarRender=function(t){t.setData(t.dataSource,this._icon)};t.prototype.setStar=function(t,e,i){if(i===void 0){i="bg_wujiaoxing1"}this._icon=i;var n=[];for(var r=1;r<=e;r++){if(r<=t){n.push(i)}else{n.push("")}}this.liststar.array=n;if(this.box){var o=n.length;var a=o*this.size+(o-1)*this.liststar.spaceX;this.liststar.width=a;this.liststar.x=(this.box.width-this.liststar.width*this.liststar.scaleX)/2}};return t}(Laya.EventDispatcher);t.StarListMediator=e})(common||(common={}));var game;(function(n){n.STYLES={FONT:"黑体",WHITE:"#ffffff",CHAT_FONT:"#d8e4f2",DESC_TXT_COLOR:"#d8f6f1",GREEN_COLOR:"#06f692",YELLOW_COLOR:"#f6c44c",RED_COLOR:"#e5064c",YELLOW_S_COLOR:"#f6f6a6",BLUE_COLOR:"#56baec",GRAY_COLOR:"#c4daec",ITEM_QUALITY:{1:"#d8f6f1",2:"#06f692",3:"#20d8ff",4:"#ec97ff",5:"#ffc11e",6:"#f55656"},DESC_TXT_COLOR_S:"#567474",GREEN_COLOR_S:"#6bc06b",YELLOW_COLOR_S:"#f0a326",RED_COLOR_S:"#ff0000",YELLOW_YB_COLOR_S:"#cea364",BLUE_BTN_COLOR_S:"#60887e",YELLOW_BTN_COLOR_S:"#d3762e",GRAY_COLOR_S:"#9c9fa9",ITEM_QUALITY_S:{1:"#9cb2a3",2:"#6bc06b",3:"#63a3ec",4:"#9c85dd",5:"#f0a326",6:"#f56f6f"},BLACK_COLOR:"#000000",VIP_COLOR:"#bd8163",WHITE_MATRIX:[1,0,0,0,70,0,1,0,0,70,0,0,1,0,70,0,0,0,1,1],BLACK_MATRIX:[1,0,0,0,-100,0,1,0,0,-100,0,0,1,0,-100,0,0,0,1,0],SHADOW_MATRIX:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5,0],KFXL_QUA:{1:"#6bc06b",2:"#63a3ec",3:"#f0a326"}};var t=function(){function t(){}t.initDesc=function(t,e){var i=new Laya.RichText;i.color=n.STYLES.DESC_TXT_COLOR;i.fontSize=18;i.font=n.STYLES.FONT;i.width=e;i.bold=true;i.leading=10;i.text=t;i.x=0;i.y=0;return i};t.addTextStroke=function(t,e,i){if(e===void 0){e=3}if(i===void 0){i="#567474"}t.stroke=e;t.strokeColor=i};t.removeTextStroke=function(t){t.stroke=0;t.strokeColor=""};return t}();n.MenuHelper=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.zOrder=2e3;this.mouseEnabled=true;this.maskBg=new Laya.Image("res/static/bg_ljiugong.png");this.maskBg.sizeGrid="20,20,20,20";this.addChild(this.maskBg);this.loadigAni=new i.AniView("skill_loading",i.AniView.FILE_NAME.UI);this.loadigAni.on(i.AniView.EVENTS.ANI_COMPLETE,this,this.onAniComplete);this.addChild(this.loadigAni);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.doSelfRemove)};e.prototype.refreshAll=function(){this.width=this.maskBg.width=Laya.stage.width;this.height=this.maskBg.height=Laya.stage.height;this.loadigAni.x=.5*(Laya.stage.width-this.loadigAni.width);this.loadigAni.y=.5*(Laya.stage.height-this.loadigAni.height);Laya.timer.once(1e4,this,this.doSelfRemove)};e.prototype.onAniComplete=function(){this.callLater(this.refreshAll)};e.prototype.doSelfRemove=function(){this.removeSelf()};e.SINGLE_KEY="game.UILoadingView";return e}(Laya.View);i.UILoadingView=t})(game||(game={}));var game;(function(t){var e=function(){function t(){}return t}();t.FuncTabVO=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var scene;(function(a){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.isoType=isometric.IsoType.AVATAR_TYPE;return t}return t}(isometric.IsoSprite);a.BaseTrap=t;var e=function(t){__extends(e,t);function e(){return t.call(this)||this}e.prototype.updateFrame=function(){};e.prototype.cast=function(t,e,i){this.cfg=t;this.p=e;this.area=i;this.useEffArr=[];this._range=[];var n=app.str2Array(this.cfg.hurtrange,";");for(var r=0,o=n.length;r<o;r++){this._range[r]=parseInt(n[r])}this.isoPos=new isometric.Point3D(this.p.x*32,0,this.p.y*32);a.SceneMediator.getInstance().addTrapObj(this);if(this.cfg.warntime){this.playWarning()}else{this.startHurt()}};e.prototype.playWarning=function(){var t=this.addEff(this.cfg.warnurl);t.scaleX=this.cfg.warnscalex/100;t.scaleY=this.cfg.warnscaley/100;t.load(this.cfg.warnurl);t.play();Laya.timer.once(this.cfg.warntime,this,this.onWarningEnd,[t])};e.prototype.onWarningEnd=function(t){this.removeEff(t);this.startHurt()};e.prototype.startHurt=function(){this.playHurt();this.checkHurt();if(this.cfg.hurttime){Laya.timer.loop(this.cfg.hurtcd,this,this.checkHurt);Laya.timer.once(this.cfg.hurttime,this,this.recycle)}};e.prototype.playHurt=function(){if(this.cfg.hurturl!=""){var t=this.addEff(this.cfg.hurturl);t.scaleX=this.cfg.hurtscalex/100;t.scaleY=this.cfg.hurtscaley/100;t.load(this.cfg.hurturl);t.play();if(!this.cfg.hurttime){t.on(Laya.Event.COMPLETE,this,this.recycle)}}};e.prototype.checkHurt=function(){Laya.timer.once(this.cfg.hurtdelay,this,this.dellHurt)};e.prototype.dellHurt=function(){var t=false;var e=role.LeadingRoleView.getIns().vo;if(this._range.length==1){t=game.SceneModel.checkReachPos(e.posX,e.posY,this.p.x,this.p.y,this._range[0])}else if(this._range.length==4){t=game.SceneModel.checkPosInRect(e.posX-this.p.x,e.posY-this.p.y,this._range[0],this._range[1],this._range[2],this._range[3])}if(t){copy.CopyModel.getIns().beHurt(this.cfg.hurtvalue)}};e.prototype.addEff=function(t){var e=Laya.Pool.getItemByClass(t,game.SkillAniView);this.isoDisplay.addChild(e);this.useEffArr.push(e);return e};e.prototype.removeEff=function(t){t.stop();t.removeSelf();t.offAll(Laya.Event.COMPLETE);Laya.Pool.recover(t.aniName,t);if(this.useEffArr){var e=this.useEffArr.indexOf(t);if(e!=-1){this.useEffArr.splice(e,1)}}};e.prototype.clearAll=function(){for(var t=0,e=this.useEffArr.length;t<e;t++){var i=this.useEffArr[t];if(i){i.stop();i.removeSelf();i.offAll(Laya.Event.COMPLETE);Laya.Pool.recover(i.aniName,i)}}this.useEffArr=null;this.area.clearHurt(this);this.area.restorePoint(this.p);this.area=null;Laya.timer.clearAll(this)};e.prototype.recycle=function(){a.SceneMediator.getInstance().removeTrapObj(this);Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="scene.HurtTrap";return e}(t);a.HurtTrap=e})(scene||(scene={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var copy;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgquyukuang.skin="res/static/bg_bingxuehsijie_hong.png"};e.prototype.onClose=function(){app.ViewManager.toggleView(e,app.AppContainer.uiLayer,-1)};e.prototype.onDisplay=function(){this.x=(Laya.stage.width-this.width)/2;this.y=(Laya.stage.height-this.height)/2;var t=app.AppContainer.getScale(this.width,this.height);this.imgquyukuang.scale(t,t);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.Tween.clearAll(this)};e.prototype.refreshAll=function(){this.blink1()};e.prototype.blink1=function(){Laya.Tween.to(this.imgquyukuang,{alpha:0},500,null,new Laya.Handler(this,this.blink2))};e.prototype.blink2=function(){Laya.Tween.to(this.imgquyukuang,{alpha:1},500,null,new Laya.Handler(this,this.onClose))};e.SINGLE_KEY="copy.CopyHurtView";return e}(ui.bingxueshijie.quyuxiaoguoUI);t.CopyHurtView=e})(copy||(copy={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var copy;(function(e){var t=function(t){__extends(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){};i.prototype.createCopy=function(){this.mapdata=csv.MapTrapProxy.getIns().createControl(game.Context.mainRole.mapId);this.hp=this.mapdata.hp;this.setAreas();this.setRelations();this._openedMids=[];this.timeHandlers=[];this.boCopyEnd=false;this.boCopyMove=false};i.prototype.registerSceondTimer=function(t){this.timeHandlers.push(t)};i.prototype.startCopyTime=function(){this.boCopyMove=true;this.loopTime();Laya.timer.loop(1e3,this,this.loopTime);Laya.timer.frameLoop1(1,this,this.updateFrame)};i.prototype.loopTime=function(){if(this.copyLeastTime<0){this.lose()}for(var t=0,e=this.timeHandlers.length;t<e;t++){this.timeHandlers[t].run()}};i.prototype.updateFrame=function(){for(var t=0,e=this.areas.length;t<e;t++){this.areas[t].updateFrame()}};i.prototype.clearAll=function(){role.LeadingRoleView.getIns().cancelAI();role.LeadingRoleView.getIns().stopMove();this.boCopyMove=false;Laya.timer.clear(this,this.updateFrame);Laya.timer.clear(this,this.loopTime);for(var t=0,e=this._openedMids.length;t<e;t++){var i=csv.MapTrapProxy.getIns().getVO(this._openedMids[t]);i.noEffect=false}this._openedMids=null;for(var t=0,e=this.areas.length;t<e;t++){this.areas[t].clearAll()}this.areas=null;this.timeHandlers=null};i.prototype.success=function(){if(this.boCopyEnd){return}this.boCopyEnd=true;this.event(e.CopyModel.COPY_WIN);Laya.timer.clear(this,this.updateFrame);Laya.timer.clear(this,this.loopTime);role.LeadingRoleView.getIns().cancelAI();role.LeadingRoleView.getIns().stopMove();this.boCopyMove=false};i.prototype.lose=function(){if(this.boCopyEnd){return}this.boCopyEnd=true;this.event(e.CopyModel.COPY_LOSE);Laya.timer.clear(this,this.updateFrame);Laya.timer.clear(this,this.loopTime);role.LeadingRoleView.getIns().cancelAI();role.LeadingRoleView.getIns().stopMove();this.boCopyMove=false};Object.defineProperty(i.prototype,"hp",{get:function(){return this._hp},set:function(t){this._hp=t;this.event(i.HP_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"endTime",{get:function(){return this._endTime},set:function(t){this._endTime=t},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"copyTime",{get:function(){return this.mapdata.time-(this.endTime-game.Context.getServerTime())},enumerable:true,configurable:true});Object.defineProperty(i.prototype,"copyLeastTime",{get:function(){return this.endTime-game.Context.getServerTime()},enumerable:true,configurable:true});i.prototype.beHurt=function(t){if(this.hp<=0){return}this.hp-=t;if(this.hp<=0){role.LeadingRoleView.getIns().cancelAI();role.LeadingRoleView.getIns().hideProgressBar();this.lose()}app.ViewManager.toggleView(e.CopyHurtView,app.AppContainer.uiLayer,1)};i.prototype.getRoleSpeed=function(){var t;if(game.Context.mainRole.zuoqiId){t=1}else{t=.8}return t};i.prototype.doMove=function(t,e){var i=role.LeadingRoleView.getIns();if(this.checkIfThroughStopArea(i.vo.posX,i.vo.posY,t,e)){manager.FlowManager.instance.flowByStyle1(app.getLang("该区域暂不可达"));return}var n=new role.ClientMoveAction;n.char=i;n.speed=this.getRoleSpeed();n.target=isometric.IsoUtils.isoToScreen(new isometric.Point3D(t*32,0,e*32));var r=game.SceneModel.getDirByTowPos(i.vo.posX,i.vo.posY,t,e);i.vo.dir=r;i.setMoveAction(n)};i.prototype.beHitBack=function(){this.beHurt(1);var t=role.LeadingRoleView.getIns();var e=Math.PI+(1-t.vo.dir)*Math.PI/4;var i=t.x;var n=t.y;var r=i+Math.cos(e)*64;var o=n+Math.sin(e)*64;var a=isometric.IsoUtils.screenToIso(new Laya.Point(r,o));var s=Math.round(a.x/32);var l=Math.round(a.z/32);if(!this.checkIfStopArea2(s,l)&&scene.SceneMediator.getInstance().checkCanMove(s,l)){app.MyTween.to(t,{x:r,y:o},200,null,Laya.Handler.create(this,function(){t.isoPos=a}));t.vo.posX=s;t.vo.posY=l;scene.SceneMediator.getInstance().setStandPos(t.vo.insId,s,l);return}else{for(var u=1;u<=3;u++){for(var p=t.vo.posX-u;p<=t.vo.posX+u;p+=u){for(var h=t.vo.posY-u;h<=t.vo.posY+u;h+=u){if(p==t.vo.posX&&h==t.vo.posX){continue}if(!this.checkIfStopArea2(p,h)&&scene.SceneMediator.getInstance().checkCanMove(p,h)){a=new isometric.Point3D(p*32,0,h*32);var c=isometric.IsoUtils.isoToScreen(a);app.MyTween.to(t,{x:c.x,y:c.y},200,null,Laya.Handler.create(this,function(){t.isoPos=a}));t.vo.posX=p;t.vo.posY=h;scene.SceneMediator.getInstance().setStandPos(t.vo.insId,p,h);return}}}}}console.log("没有找到点")};i.prototype.pushOpenMid=function(t){this.setMachineOpen(t);this.clearPassArea(t)};i.prototype.clearPassArea=function(t){var e=this.getOpenAreaByMid(t);var i=this.getOpenMidsByMid(e);for(var n=0,r=i.length;n<r;n++){var o=i[n];if(this._openedMids.indexOf(o)==-1){return}}for(var n=0,r=this.areas.length;n<r;n++){var a=this.areas[n];if(a.id==e){a.boClose=true;break}}var s=this.getCloseMidByAid(e);this.setMachineOpen(s);this._openedMids.push(s)};i.prototype.setAreas=function(){this.areas=[];this._areasMap={};if(this.mapdata.areas!=""){var t=app.str2Array(this.mapdata.areas,";","-");for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n.length==1){this.createArea(parseInt(n[0]))}else if(n.length==2){var r=parseInt(n[0]);var o=parseInt(n[1]);for(var a=r;a<=o;a++){this.createArea(a)}}}}if(this.mapdata.traptrigger!=""){var s=app.str2Array(this.mapdata.traptrigger,";","-");for(var e=0,i=s.length;e<i;e++){var l=s[e];var u=parseInt(l[0]);var p=parseInt(l[1]);var h=this._areasMap[u];if(h){h.addTrigger(p)}else{console.log("区域"+u+"不存在")}}}};i.prototype.createArea=function(t){var e=csv.MapTrapProxy.getIns().getArea(t);var i=Laya.Pool.getItemByClass(scene.TrapArea.SINGLE_KEY,scene.TrapArea);i.init(e);this.areas.push(i);this._areasMap[i.id]=i};i.prototype.setRelations=function(){this._areaOpens={};this._areaCloses={};this._openRelation={};this._closeRelation={};if(this.mapdata.openrelation!=""){var t=app.str2Array(this.mapdata.openrelation,";","-");for(var e=0,i=t.length;e<i;e++){var n=t[e];var r=parseInt(n[0]);var o=parseInt(n[1]);this._openRelation[r]=o;if(!this._areaOpens[o]){this._areaOpens[o]=[]}this._areaOpens[o].push(r)}}if(this.mapdata.stoprelation!=""){var a=app.str2Array(this.mapdata.stoprelation,";","-");for(var e=0,i=a.length;e<i;e++){var n=a[e];var r=parseInt(n[0]);var o=parseInt(n[1]);this._closeRelation[r]=o;this._areaCloses[o]=r}}};i.prototype.getOpenAreaByMid=function(t){return this._openRelation[t]};i.prototype.getOpenMidsByMid=function(t){return this._areaOpens[t]};i.prototype.getCloseAreaByMid=function(t){return this._closeRelation[t]};i.prototype.getCloseMidByAid=function(t){return this._areaCloses[t]};i.prototype.checkIfThroughStopArea=function(t,e,i,n){if(!this.areas){return false}for(var r=0,o=this.areas.length;r<o;r++){var a=this.areas[r];if(a.type!=scene.TrapArea.AREA_TYPE.STOP){continue}if(a.isLineIntersectArea(t,e,i,n)){return true}}return false};i.prototype.checkIfStopArea2=function(t,e){if(!this.areas){return false}for(var i=0,n=this.areas.length;i<n;i++){var r=this.areas[i];if(r.type!=scene.TrapArea.AREA_TYPE.STOP){continue}if(r.isInArea(t,e)){return true}}return false};i.prototype.setMachineOpen=function(t){var e=csv.MapTrapProxy.getIns().getVO(t);e.noEffect=true;this._openedMids.push(t);this.event(i.MACHINE_OPEN)};i.SINGLE_KEY="copy.CopyModel";i.HP_CHANGE="hp_change";i.COPY_WIN="copy_win";i.COPY_LOSE="copy_lose";i.MACHINE_OPEN="machine_open";return i}(app.ModelBase);e.CopyModel=t})(copy||(copy={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var copy;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.CopyModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.hechengbtn.clickHandler=new Laya.Handler(this,this._closeView);this.btnleft.clickHandler=new Laya.Handler(this,this._moveLeftList);this.btnright.clickHandler=new Laya.Handler(this,this._moveRightList);this.listfanye.renderHandler=new Laya.Handler(this,this._onYeqianRender);this.listfanye.selectHandler=new Laya.Handler(this,this.onTabSelect);this.centerLayout=new game.CenterLayoutMediator(this.listfanye,this.box,32,this.listfanye.spaceX)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){if(this.dataSource[0]){this.dataSource[0].run()}};e.prototype.refreshAll=function(){this.labeldaojishi.visible=false;this.ruleArr=app.str2Array(this._model.mapdata.rulepic,";");var t=[];for(var e=0,i=this.ruleArr.length;e<i;e++){t.push("res/static/dujiefuben/btn_create_fanye02.png")}this.centerLayout.array=t;this.listfanye.selectedIndex=0;this._updateBtnView();var n=csv.MapTrapProxy.getIns().createControl(game.Context.mainRole.mapId+1);if(n){var r=app.str2Array(n.rulepic,";");for(var e=0;e<r.length;e++){Laya.loader.load("res/static/dujiefuben/"+r[e]+".jpg")}}};e.prototype._closeView=function(){if(this.listfanye.selectedIndex==this.centerLayout.array.length-1){app.ViewManager.toggleDialog(i.CopyRuleView,-1,0)}else{this._moveRightList()}};e.prototype._onYeqianRender=function(t,e){if(e==this.listfanye.selectedIndex){t.skin="res/static/dujiefuben/btn_create_fanye01.png"}else{t.skin="res/static/dujiefuben/btn_create_fanye02.png"}};e.prototype.onTabSelect=function(t){var e=this.ruleArr[t];this.neibudibanimg02.skin="res/static/dujiefuben/"+e+".jpg"};e.prototype._moveLeftList=function(){this.listfanye.selectedIndex-1<=0?this.listfanye.selectedIndex=0:this.listfanye.selectedIndex-=1;this._updateBtnView()};e.prototype._moveRightList=function(){this.listfanye.selectedIndex+1>=this.listfanye.array.length-1?this.listfanye.selectedIndex=this.listfanye.array.length-1:this.listfanye.selectedIndex+=1;this._updateBtnView()};e.prototype._updateBtnView=function(){if(this.centerLayout.array.length==1){this.btnleft.visible=false;this.btnright.visible=false;this.hechengbtn.label=app.getLang("确定");return}if(this.listfanye.selectedIndex==0){this.btnleft.visible=false;this.hechengbtn.label=app.getLang("下一步")}else{this.btnleft.visible=true}if(this.listfanye.selectedIndex==this.centerLayout.array.length-1){this.btnright.visible=false;this.hechengbtn.label=app.getLang("确定")}else{this.btnright.visible=true}};e.SINGLE_KEY="copy.CopyRuleView";return e}(ui.bosszhandou.dujiefubentipUI);i.CopyRuleView=t})(copy||(copy={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var scene;(function(n){var t=function(t){__extends(e,t);function e(){return t.call(this)||this}Object.defineProperty(e.prototype,"boClose",{set:function(t){this._boClose=t;if(this._boClose){this.clearAllHurt();this.clearAllTrigger()}},enumerable:true,configurable:true});e.prototype.init=function(t){this.type=t.type;this.id=t.id;this.data=t;this.boClose=false;this.triggers=[];this.hurts=[];this.points=[];this.usedPoints=[];var e=Math.min(t.x1,t.x2);var i=Math.max(t.x1,t.x2);var n=Math.min(t.y1,t.y2);var r=Math.max(t.y1,t.y2);for(var o=e;o<=i;o++){for(var a=n;a<=r;a++){this.points.push(new Laya.Point(o,a))}}};e.prototype.addTrigger=function(t){var e=csv.MapTrapProxy.getIns().getTrigger(t);var i=Laya.Pool.getItemByClass(n.TrapTrigger.SINGLE_KEY,n.TrapTrigger);i.init(e,this);this.triggers.push(i)};e.prototype.updateFrame=function(){var t=role.LeadingRoleView.getIns();this.inArea=this.isInArea(t.vo.posX,t.vo.posY);for(var e=0,i=this.triggers.length;e<i;e++){this.triggers[e].updateFrame()}};e.prototype.getEmptyPoint=function(t){var e=game.SceneModel.random(0,this.points.length);var i=this.points.splice(e,1)[0];if(i){this.usedPoints.push(i)}return i};e.prototype.restorePoint=function(t){this.points.push(t)};e.prototype.isLineIntersectArea=function(t,e,i,n){if(this._boClose){return false}return game.SceneModel.isLineIntersectRectangle(t,e,i,n,this.data.x1,this.data.y1,this.data.x2,this.data.y2)};e.prototype.isInArea=function(t,e){if(this._boClose){return false}return game.SceneModel.checkPosInRect(t,e,this.data.x1,this.data.y1,this.data.x2,this.data.y2)};e.prototype.clearAllHurt=function(){while(this.hurts.length>0){var t=this.hurts.shift();t.recycle()}this.hurts=[]};e.prototype.clearHurt=function(t){var e=this.hurts.indexOf(t);if(this.hurts.indexOf(t)!=-1){this.hurts.splice(e,1)}};e.prototype.clearAllTrigger=function(){for(var t=0,e=this.triggers.length;t<e;t++){this.triggers[t].clearAll()}this.triggers=[]};e.prototype.clearAll=function(){this.clearAllHurt();this.clearAllTrigger();this.inArea=false;this.boClose=false;Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="scene.TrapArea";e.AREA_TYPE={HURT:1,STOP:2};return e}(Laya.EventDispatcher);n.TrapArea=t})(scene||(scene={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var copy;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._vo=csv.MapTrapProxy.getIns().getVO(t);this._cfg=this._vo.getCfg();this.jiguan.skin="bosszhandou/"+this._cfg.icon+".png";this.lblname.text=app.getLang(this._cfg.namelang);this.setState()};e.prototype.setState=function(){this.gray=!this._vo.noEffect};e.SINGLE_KEY="guaji.TrapMchineIcon";return e}(ui.bosszhandou.dujiefubenitem01UI);t.TrapMchineIcon=e})(copy||(copy={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var scene;(function(n){var t=function(t){__extends(e,t);function e(){return t.call(this)||this}e.prototype.init=function(t,e){this.data=t;this.area=e;this.boTrigger=false};e.prototype.updateFrame=function(){if(this.data.triggertype==1){if(this.area.inArea){this.startTrigger()}else{this.stopTrigger()}}else{if(this.data.triggertime<=copy.CopyModel.getIns().copyTime){this.startTrigger()}}};e.prototype.startTrigger=function(){if(this.boTrigger){return}this.boTrigger=true;this.playTrigger();if(this.data.duration){Laya.timer.once(this.data.duration,this,this.stopLoop);Laya.timer.loop(this.data.interval,this,this.playTrigger)}};e.prototype.stopLoop=function(){Laya.timer.clear(this,this.playTrigger)};e.prototype.playTrigger=function(){for(var t=0;t<this.data.count;t++){Laya.timer.once(this.data.pertime*t,this,this.createPerHurt,null,false)}};e.prototype.createPerHurt=function(){var t=this.area.getEmptyPoint(this.data.randomdis);if(t){var e=csv.MapTrapProxy.getIns().getHurt(this.data.hurtid);var i=Laya.Pool.getItemByClass(n.HurtTrap.SINGLE_KEY,n.HurtTrap);i.cast(e,t,this.area);this.area.hurts.push(i)}};e.prototype.stopTrigger=function(){if(!this.boTrigger){return}this.boTrigger=false};e.prototype.clearAll=function(){Laya.timer.clearAll(this);Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="scene.TrapTrigger";return e}(Laya.EventDispatcher);n.TrapTrigger=t})(scene||(scene={}));var game;(function(t){var e=function(){function t(){}t.SERVER_CONNECT_ERROR="server_connect_error";t.SERVER_CONNECTED="server_connected";t.SERVER_CLOSED="server_closed";t.ENTER_CREATE_ROLE="ENTER_CREATE_ROLE";t.SUCCEED_CREATE_ROLE="SUCCEED_CREATE_ROLE";t.ENTER_WORLD="ENTER_WORLD";t.CHANGE_MAP="CHANGE_MAP";t.MAP_CHANGE_END_FOR_DIALOG_SHOW="MAP_CHANGE_END_FOR_DIALOG_SHOW";t.MAP_LOAD_COMPLETE="MAP_LOAD_COMPLETE";t.FUNCTION_ACTION="FUNCTION_ACTION";t.HP_CHANGE="HP_CHANGE";t.ICONLIST="ICONLIST";t.ASSISTANT_STATE_CHANGE="ASSISTANT_STATE_CHANGE";t.ROLE_AI_STATE_CHANGE="ROLE_AI_STATE_CHANGE";t.FUNCTION_DOT_CHANGE="FUNCTION_DOT_CHANGE";t.FUNCTION_XIN_CHANGE="FUNCTION_XIN_CHANGE";t.FUNCTION_LIMIT_CHANGE="FUNCTION_LIMIT_CHANGE";t.OTHER_FUNCTION_DOT_CHANGE="OTHER_FUNCTION_DOT_CHANGE";t.DIALOG_CLOSE_COMPLETE="DIALOG_CLOSE_COMPLETE";t.LEAD_ROLE_MOVE_END="LEAD_ROLE_MOVE_END";t.LEAD_ROLE_MOVE_START="LEAD_ROLE_MOVE_START";t.FUNCTION_OPEN="FUNCTION_OPEN";t.FUNCTION_CLOSE="FUNCTION_CLOSE";t.SECOND_WINDOW_OPEN="SECOND_WINDOW_OPEN";t.SECOND_WINDOW_CLOSE="SECOND_WINDOW_CLOSE";t.MAINDLG_OPEN="MAINDLG_OPEN";t.MAINDLG_CLOSE="MAINDLG_CLOSE";t.FUNC_BTN_CHANGE="FUNC_BTN_CHANGE";t.BATTLE_TIME_STATE_CHANGE="BATTLE_TIME_STATE_CHANGE";t.CERTIFICATION_SUC="certification_suc";return t}();t.ContextEvent=e})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this.addModule(login.LoginModule);this.addModule(i.AccountModule);this.addModule(i.RoleCreateModule)};e.SINGLE_KEY="game.LoginModuleManager";return e}(i.ModuleManager);i.LoginModuleManager=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){r.Context.on(r.ContextEvent.ENTER_CREATE_ROLE,this,this.onEnterCreateRole);app.ViewManager.regist(role.RoleCreateNewView,"create.atlas")};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.CreateRoleResp,this,this.onCreateRoleResp)};e.prototype.onEnterCreateRole=function(){app.ViewManager.toggleView(role.RoleCreateNewView,app.AppContainer.uiLayer,1)};e.prototype.onCreateRoleResp=function(t,e){if(e.result==1){app.ViewManager.toggleView(role.RoleCreateNewView,app.AppContainer.uiLayer,-1);r.Context.mainRoleId=e.id;r.Context.event(r.ContextEvent.ENTER_WORLD);var i=Laya.LocalStorage.items;for(var n in i){if(n.indexOf(r.AccountModel.accountId)!=-1){Laya.LocalStorage.removeItem(n)}}login.CoverModel.getIns().create_succeed();r.Context.event(r.ContextEvent.SUCCEED_CREATE_ROLE,[e.id.toNumber().toString()])}else if(e.result==6){console.log("创角失败");r.Alert.show(app.getLang("createrole_error_"+e.result),new Laya.Handler(this,function(){window.location.reload()}))}else{console.log("创角失败");r.Alert.show(app.getLang("createrole_error_"+e.result),new Laya.Handler(this,function(){role.RoleCreateNewView.getIns().createAgani()}))}};e.SINGLE_KEY="game.RoleCreateModule";return e}(app.ModuleBase);r.RoleCreateModule=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("name.csv");if(t){this.nameCfg=t.getArray();this.name=[];for(var e=0;e<this.nameCfg.length;e++){var i=this.nameCfg[e];var n=i["name"];if(n!="")this.name.push(n)}}};e.prototype.getRandomName=function(){var t=app.NameParser.nameList;if(!t){t=this.name}return t[Math.floor(t.length*Math.random())]};e.SINGLE_KEY="csv.NameProxy";return e}(app.ModelBase);t.NameProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.roleId=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.stopRotation()};t.prototype.refreshAll=function(){};t.prototype.setIcon=function(t){this.imgRole.skin="create/bg_createtouxiang_"+t+"1.png"};t.prototype.setGray=function(t){this.imgRole.gray=!t};t.prototype.playRotation=function(){this.imgxuanzhong.alpha=1;Laya.timer.frameLoop(1,this,this.loop)};t.prototype.loop=function(){if(this.imgxuanzhong.alpha<=.3){this.fuhao=1}else if(this.imgxuanzhong.alpha>=1){this.fuhao=-1}this.imgxuanzhong.alpha+=.01*this.fuhao};t.prototype.stopRotation=function(){this.imgxuanzhong.alpha=1;Laya.timer.clear(this,this.loop)};t.SINGLE_KEY="role.CharacterItem";return t}(ui.create.createacharacteritem02newUI);t.CharacterItem=e})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._selectIndex=0;t._interval=-1;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.width=Laya.stage.width;this.height=Laya.stage.height;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.UI_LAYER_NUME.ROLE_CREATE;this.createRoleSelect();this.on(Laya.Event.ADDED,this,this.onAdded);this.on(Laya.Event.REMOVED,this,this.onRemoved);this.txtname.on(Laya.Event.CHANGE,this,this.onInputChange);this.txtname.on(Laya.Event.FOCUS,this,gamesdk.onTomatoForceHandler,[this.txtname]);this.touzibtn.clickHandler=Laya.Handler.create(this,this.onRandomHandler,null,false);this.jinrubtn.clickHandler=Laya.Handler.create(this,this.onCreateHandler,null,false);this.box.centerX=this.box.centerY=0;this.boxbg.centerX=this.boxbg.centerY=0;this.boxbg.scaleX=this.boxbg.scaleY=app.AppContainer.getScale(750,1334);this.img.x=20;this.img.y=20+ScreenAdapter.OFFSET_Y;manager.LoadingManager.instance.setJsLoading(false);this.locTime=t.TIME};t.prototype.onRandomHandler=function(){login.CoverModel.getIns().create_role(true);this.changeName()};t.prototype.onInputChange=function(){};t.prototype.onDisplay=function(){gamesdk.onTomatoForceHandler(this.txtname)};t.prototype.onUnDisplay=function(){this.skt&&this.skt.stop()};t.prototype.createRoleSelect=function(){this.createRoleArr=csv.DefclassProxy.getIns().getRebirthRoles(1)};t.prototype.setAvatar=function(t){if(this.skt&&this.skt.parent){this.skt.removeSelf()}else{this.skt=new common.CSkt}this.skt.init(t);this.roleShow.addChild(this.skt)};t.prototype.reSetTime=function(){this.locTime=t.TIME;clearTimeout(this._interval)};t.prototype.onAdded=function(){this.changeName();this.selectChange()};t.prototype.onRemoved=function(){Laya.timer.clearAll(this);clearTimeout(this._interval)};t.prototype.changeName=function(){this.txtname.text=csv.NameProxy.getIns().getRandomName();this.setAutoCount();this.ani2.play(0,false)};t.prototype.selectChange=function(){var t=this.createRoleArr[this._selectIndex];this.nameimg.skin="res/static/create/bg_createname_"+t.createname+"new.png";this.zhujue_yuanshen.skin=app.getLang("res/static/{0}.png",t.createyuanshen);this.ani3.play(0,false);this.roleShow.removeChildAt(0);var e="res/sks/"+this.createRoleArr[this._selectIndex].createrole+".sk";this.setAvatar(e)};t.prototype.checkEnter=function(){if(game.Context.isSubLoaded){this.onCreateHandler()}else{Laya.timer.once(1e3,this,this.checkEnter)}};t.prototype.onCreateHandler=function(){if(!game.Context.isSubLoaded){this.checkEnter();return}gamesdk.c_sendDevicePoint(gamesdk.ELostFunc.CLICK_CREATE_ROLE);this.reSetTime();if(this.txtname.text==""){game.Alert.show(app.getLang("name_is_null"));return}var t=Laya.loader.getRes("res/config/ini.json");var e=this.txtname.text.length;if(e<t.name_min_len||e>t.name_max_len){game.Alert.show(app.getLang("name_is_long"));return}this.onCreateRoleReq()};t.prototype.onCreateRoleReq=function(){app.ProtocolRequest.CreateRoleReq(this.txtname.text)};t.prototype.setAutoCount=function(){var t=this;this.reSetTime();this.timelabel.text=app.getLang("role_create_1",this.locTime);this._interval=setInterval(function(){t.coolDown()},1e3)};t.prototype.coolDown=function(){this.locTime--;this.timelabel.text=app.getLang("role_create_1",this.locTime);if(this.locTime<=0){clearTimeout(this._interval);this.onCreateRoleReq()}};t.prototype.createAgani=function(){this.changeName();this.setAutoCount()};t.SINGLE_KEY="role.RoleCreateNewView";t.TIME=60;return t}(ui.create.createacharacternewUI);t.RoleCreateNewView=e})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(t){var e=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.width=Laya.stage.width;this.height=Laya.stage.height;this.zOrder=app.AppContainer.UI_LAYER_NUME.ROLE_CREATE;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.box.centerX=this.box.centerY=0;this.boxbg.centerX=this.boxbg.centerY=0;this.boxbg.scaleX=this.boxbg.scaleY=app.AppContainer.getScale(750,1334);this.box.scaleX=this.box.scaleY=app.AppContainer.getScale(750,1334);manager.LoadingManager.instance.setJsLoading(false);this.avatars=new avatar.AvatarAnimation;this.weizhi.addChild(this.avatars);this.avatarDatas=new avatar.AvatarData;this.avatarDatas.fileName=game.AniView.FILE_NAME.MONSTER;this.avatarDatas.roleKey="g_chuanshanjia";this.avatars.setAniData(this.avatarDatas);this.avatars.on(Laya.Event.COMPLETE,this,this.avatarPlay,[this.avatars]);this.items=[this.hulu1,this.hulu2,this.hulu3,this.hulu4,this.hulu5,this.hulu6];this.posList=[];for(var t=1;t<=this.items.length;t++){this.posList.push(new Laya.Point(this.items[t-1].x,this.items[t-1].y));this.items[t-1].ditu.skin="res/static/jiesuohulu/bg_caizhaihulu_hulu_"+(t+1)+".png"}this.npcDialog.visible=false;this.huluDialog.visible=false;this.huluDialog2.visible=false;this.huluDialog3.visible=false;this.npcTalkPlay=new talk.TalkPlay(this.npcDialog.wenbtn);this.roleTalkPlay1=new talk.TalkPlay(this.huluDialog.wenbtn);this.roleTalkPlay2=new talk.TalkPlay(this.huluDialog3.wenbtn);this.roleTalkPlay3=new talk.TalkPlay(this.huluDialog2.wenbtn);this.roleTalkPlay=[this.roleTalkPlay1,this.roleTalkPlay2,this.roleTalkPlay3];this.dialogUI=[this.huluDialog,this.huluDialog3,this.huluDialog2];this.ani2.on(Laya.Event.COMPLETE,this,this.onAni2Complete);this.ani3.on(Laya.Event.COMPLETE,this,this.onAni3Complete);this.ani4.on(Laya.Event.COMPLETE,this,this.onAni4Complete);this.jiaoshui2=new game.AniView;this.sashui.addChild(this.jiaoshui2);this.jiaoshui2.on(Laya.Event.COMPLETE,this,this.stopAni,[this.jiaoshui2]);this.jiaoshui2.load("skill_jiaoshui02",game.AniView.FILE_NAME.UI);this.jiaoshui2.visible=false};t.prototype.stopAni=function(t){t.visible=false;t.stop();if(t==this.jiaoshui2){this.ani4.play(0,false)}};t.prototype.playAni=function(t){t.visible=true;t.play(0,false)};t.prototype.onAni2Complete=function(){this.aniEnd=true;this.playStory()};t.prototype.onAni3Complete=function(){this.playAni(this.jiaoshui2)};t.prototype.onAni4Complete=function(){this.onBirth()};t.prototype.onStory=function(){this.playStory()};t.prototype.onBirth=function(){var t=csv.DefclassProxy.getIns().getCfgCreate(game.Context.roleList.length+1);if(t&&dailytask.DailyTaskModel.getIns().taskMainId>=t.value){app.ProtocolRequest.CreateCombatReq();app.ViewManager.toggleView(talk.OtherBirthStoryView,app.AppContainer.zhezhaoLayer,1,[parseInt(t.role)])}};t.prototype.onDisplay=function(){app.SoundManager.getIns().stopMapBgm();this.on(Laya.Event.CLICK,this,this.onStory);game.Context.event(game.ContextEvent.FUNCTION_OPEN);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.off(Laya.Event.CLICK,this,this.onStory);this.off(Laya.Event.CLICK,this,this.onBirth);game.Context.event(game.ContextEvent.FUNCTION_CLOSE);this.onQuite()};t.prototype.onQuite=function(){this.avatars.stop();this.caizhiani.stop();this.ani1.gotoAndStop(0);this.ani2.gotoAndStop(0);this.ani3.gotoAndStop(0);this.ani4.gotoAndStop(0)};t.prototype.refreshAll=function(){Laya.Dialog.closeAll();this.caizhiani.play();for(var t=0;t<this.items.length;t++){this.items[t].visible=true;this.items[t].x=this.posList[t].x;this.items[t].y=this.posList[t].y;if(t<game.Context.roleList.length-1){this.items[t].visible=false}}for(var t=0;t<this.dialogUI.length;t++){this.dialogUI[t].visible=false}this.npcDialog.visible=false;this.initPostion();var e=game.Context.roleList.length+1;var i=csv.DefclassProxy.getIns().getCfgCreate(e);var n=parseInt(i.stories);this.story=[];var r=csv.StoriesProxy.getIns().getGroupByPlotid(n);if(r&&r.length>0){for(var o=0,a=r;o<a.length;o++){var s=a[o];var l=app.str2Array(s.role,";","-");if(l.length>0){this.story.push({words:s.words,roleIndex:parseInt(l[0][0]),pos:l[1],dir:parseInt(l[2][0]),dubin:s.dubin})}}}this.aniEnd=false;this.avatars.setAni(avatar.AvatarAnimation.ANI_ENUMS.RUN,5);this.avatars.play();this.ani2.play(0,false);this.ani3.gotoAndStop(0);this.ani4.gotoAndStop(0)};t.prototype.initPostion=function(){var t=app.AppContainer.getScale(750,1334);this.npcDialog.scaleX=1-t+1;this.npcDialog.scaleY=1-t+1;this.npcDialog.x=550;this.npcDialog.y=850};t.prototype.playStory=function(){if(this.lastChannel){this.lastChannel.stop()}if(!this.aniEnd)return;var t=app.AppContainer.getScale(750,1334);if(this.story&&this.story.length>0){var e=this.story.shift();if(e.roleIndex==1){this.npcTalkPlay.play(e.words);this.npcDialog.visible=true}else{for(var i=0;i<this.dialogUI.length;i++){this.dialogUI[i].visible=false}var n=e.dir-1;this.roleTalkPlay[n].play(e.words);this.dialogUI[n].x=parseInt(e.pos[0]);this.dialogUI[n].scaleX=1-t+1;this.dialogUI[n].scaleY=1-t+1;this.dialogUI[n].y=parseInt(e.pos[1]);this.dialogUI[n].visible=true;this.ani1.play(0,false)}if(e.dubin!=""){this.lastChannel=app.SoundManager.getIns().playCv(e.dubin)}}else{this.npcDialog.visible=false;for(var i=0;i<this.dialogUI.length;i++){this.dialogUI[i].visible=false}this.off(Laya.Event.CLICK,this,this.onStory);this.ani3.play(0,false);app.SoundManager.getIns().playSound("bornwatering")}};t.prototype.avatarPlay=function(t){t.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,5);t.play()};t.SINGLE_KEY="role.RoleCreateView";return t}(ui.huluwajiesuo.huluwachuangjian1UI);t.RoleCreateView=e})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(o){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._startTime=0;return t}t.prototype.init=function(){app.ViewManager.regist(o.DailyTaskView,"richang.atlas","youjian.atlas");app.ViewManager.regist(o.FindResView,"ziyuanzhaohui.atlas");app.ViewManager.regist(o.AnswerView,"jiayuanpaodian.atlas","youjian.atlas");app.ViewManager.regist(o.AnswerLotteryView,"jiayuanpaodian.atlas","youjian.atlas");app.ViewManager.regist(o.HuluDefendView,"shouhuhulu.atlas");app.ViewManager.regist(o.JingyingFightView,"jingyingtiaozhan.atlas");app.ViewManager.regist(o.StageProgressView,"effect/jiayuanpaodian/chuangongzhong.atlas","effect/jiayuanpaodian/chuangongzhongjindutiao.atlas");app.ViewManager.regist(o.YaoDongRwdOwnerView,"wudiyaodong.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.DAILY_TASK,o.DailyTaskView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.DAILY_REFIND,o.FindResView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN,o.ShanshenShilianView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.MIJINGGONG,o.MijingGongView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.BRAVE_CHALLENGE,o.BraveChallengeView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.ELITE_CHALLENGE,o.JingyingFightView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.YAO_DONG,o.YaoDongView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE,o.ShanzhongJiudieView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SHOUHU_HULU,o.HuluDefendView,null,0);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.DAILY_SHOW,o.ActivityShowView);this._model=o.DailyTaskModel.getIns();o.BubbleModel.getIns();o.BubbleModel.getIns().on(o.BubbleModel.KUNGFU_TIME_CHANGE,this._model,this._model.updataLimteRed);game.RoleModel.getIns().on(game.RoleModel.EVENTS.FIVE_CLOCK,this._model,this._model.addDailyShowRed)};t.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.DailyActNtf,this,this.onDailyActNtf);this.addMsgListener(app.ProtocolResponse.DailyActModifyNtf,this,this.onDailyActModifyNtf);this.addMsgListener(app.ProtocolResponse.AwardDailyActAck,this,this.onAwardDailyActAck);this.addMsgListener(app.ProtocolResponse.AwardActPointAck,this,this.onAwardActPointAck);this.addMsgListener(app.ProtocolResponse.BuyDailyNumAck,this,this.onBuyDailyNumAck);this.addMsgListener(app.ProtocolResponse.RoleCDModifyNtf,this,this.onRoleCDModifyNtf);this.addMsgListener(app.ProtocolResponse.HomeRunningActivityIdAck,this,this.onHomeRunningActivityIdAck);this.addMsgListener(app.ProtocolResponse.GuildChampionOpenNotice,this,this.onGuildChampionOpenNotice);this.addMsgListener(app.ProtocolResponse.HomeBubbleDataAck,this,this.onHomeBubbleDataAck);this.addMsgListener(app.ProtocolResponse.HomeQuestionAck,this,this.onHomeQuestionAck);this.addMsgListener(app.ProtocolResponse.HomeAnswerAck,this,this.onHomeAnswerAck);this.addMsgListener(app.ProtocolResponse.HomeLotteryDataAck,this,this.onHomeLotteryDataAck);this.addMsgListener(app.ProtocolResponse.HomeLotteryAck,this,this.onHomeLotteryAck);this.addMsgListener(app.ProtocolResponse.HomeKungDataAck,this,this.onHomeKungDataAck);this.addMsgListener(app.ProtocolResponse.HomeInviteKungListAck,this,this.onHomeInviteKungListAck);this.addMsgListener(app.ProtocolResponse.HomeAcceptKungAck,this,this.onHomeAcceptKungAck);this.addMsgListener(app.ProtocolResponse.HomeStartKungAck,this,this.onHomeStartKungAck);this.addMsgListener(app.ProtocolResponse.HomeFinishKungAck,this,this.onHomeFinishKungAck);this.addMsgListener(app.ProtocolResponse.HomeWorshipInfoAck,this,this.onHomeWorshipInfoAck);this.addMsgListener(app.ProtocolResponse.HomeWorshipStartAck,this,this.onHomeWorshipStartAck);this.addMsgListener(app.ProtocolResponse.HomeWorshipStopAck,this,this.onHomeWorshipStopAck);this.addMsgListener(app.ProtocolResponse.HomeWorshipFinishAck,this,this.onHomeWorshipFinishAck);this.addMsgListener(app.ProtocolResponse.JoinMountGodAck,this,this.onJoinMountGodAck);this.addMsgListener(app.ProtocolResponse.SSSSGradeInfoNtf,this,this.onSSSSGradeInfoNtf);this.addMsgListener(app.ProtocolResponse.SSSSSweapAck,this,this.onSSSSSweapAck);this.addMsgListener(app.ProtocolResponse.MissPalaceAck,this,this.onMissPalaceAck);this.addMsgListener(app.ProtocolResponse.JoinMissPalaceAck,this,this.onJoinMissPalaceAck);this.addMsgListener(app.ProtocolResponse.MissPalaceExpNtf,this,this.onMissPalaceExpNtf);this.addMsgListener(app.ProtocolResponse.TaskTowerNtf,this,this.onTaskTowerNtf);this.addMsgListener(app.ProtocolResponse.TaskTowerAck,this,this.onTaskTowerAck);this.addMsgListener(app.ProtocolResponse.BraveChallengeNtf,this,this.onBraveChallengeNtf);this.addMsgListener(app.ProtocolResponse.BraveChallengeAck,this,this.onBraveChallengeAck);this.addMsgListener(app.ProtocolResponse.EliteChallengeNtf,this,this.onEliteChallengeNtf);this.addMsgListener(app.ProtocolResponse.SweepEliteChallengeAck,this,this.onSweepEliteChallengeAck);this.addMsgListener(app.ProtocolResponse.DailyInspireNtf,this,this.onDailyInspireNtf);this.addMsgListener(app.ProtocolResponse.DailyInspireAck,this,this.onDailyInspireAck);this.addMsgListener(app.ProtocolResponse.GuardInspireNtf,this,this.onGuardInspireNtf);this.addMsgListener(app.ProtocolResponse.GuardPrivateInspireNtf,this,this.onGuardPrivateInspireNtf);this.addMsgListener(app.ProtocolResponse.GuardInspireAck,this,this.onGuardInspireAck);this.addMsgListener(app.ProtocolResponse.ViewRollAwardAck,this,this.onViewRollAwardAck);this.addMsgListener(app.ProtocolResponse.EndlessInfNtf,this,this.onEndlessInfNtf);this.addMsgListener(app.ProtocolResponse.EndlessAwardNtf,this,this.onEndlessAwardNtf);this.addMsgListener(app.ProtocolResponse.TeamInspireAck,this,this.onTeamInspireAck);this.addMsgListener(app.ProtocolResponse.TeamInspireNtf,this,this.onTeamInspireNtf);this.addMsgListener(app.ProtocolResponse.DgnSzjdAck,this,this.onDgnSzjdAck);this.addMsgListener(app.ProtocolResponse.DgnSzjdStepNtf,this,this.onDgnSzjdStepNtf);this.addMsgListener(app.ProtocolResponse.DgnSzjdSweepNtf,this,this.onDgnSzjdSweepNtf);this.addMsgListener(app.ProtocolResponse.SweepDgnSzjdAck,this,this.onSweepDgnSzjdAck);this.addMsgListener(app.ProtocolResponse.ResFindBackDataAck,this,this.onResFindBackDataAck);this.addMsgListener(app.ProtocolResponse.ResFindBackAck,this,this.onResFindBackAck);this.addMsgListener(app.ProtocolResponse.TowerAwardNtf,this,this.onTowerAwardNtf);this.addMsgListener(app.ProtocolResponse.TowerAwardAck,this,this.onTowerAwardAck);this.addMsgListener(app.ProtocolResponse.GuardhuluTimeAck,this,this.onGuardhuluTimeAck)};t.prototype.onGuardhuluTimeAck=function(t,e){if(e.lastTime){var i=util.TimeUtil.getWeekEndTime(e.lastTime);if(game.Context.getServerTime()>e.lastTime+i){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.SHOUHU_HULU)}}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.SHOUHU_HULU)}};t.prototype.onTowerAwardAck=function(t,e){};t.prototype.onTowerAwardNtf=function(t,e){this._model.aid=e.aid};t.prototype.onDailyActNtf=function(t,e){this._model.dellTask(e.adaily);this._model.actnum=e.actnum;this._model.dellAward(e.award);this._model.setCds(e.cdinf)};t.prototype.onDailyActModifyNtf=function(t,e){this._model.changeTask(e.adaily)};t.prototype.onAwardDailyActAck=function(t,e){if(e.result==1){this._model.actnum=e.actnum}};t.prototype.onAwardActPointAck=function(t,e){if(e.result==1){this._model.dellAward(e.award)}};t.prototype.onBuyDailyNumAck=function(t,e){e};t.prototype.onRoleCDModifyNtf=function(t,e){this._model.setCds(e.cdinf)};t.prototype.onDailyInspireNtf=function(t,e){this._model.dellInspire(e.dtype,e.inf);battle.InspireNormalView.gameStartAutoInspire()};t.prototype.onDailyInspireAck=function(t,e){if(e.result==1){this._model.dellInspire(e.dtype,e.inf);manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1505"))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("buff_des_1504"))}};t.prototype.onGuardInspireNtf=function(t,e){this._model.dellGuildInspire(e.inf)};t.prototype.onGuardPrivateInspireNtf=function(t,e){this._model.dellInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SHHL,e.infPlayer)};t.prototype.onGuardInspireAck=function(t,e){if(e.result==1){this._model.dellInspire(csv.DailyTaskProxy.ENUM_ACTIVITY_TYPE.SHHL,e.inf);manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_inspire5"))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_inspire6"))}};t.prototype.onHomeRunningActivityIdAck=function(t,e){this._model.setOpenActivity(e.actIdList)};t.prototype.onGuildChampionOpenNotice=function(t,e){console.log(e);var i=csv.CycleActivityFunction.getIns().getCfg(e.actid);if(i.type==csv.CycleActivityFunction.ENUM.GUILD_PK){Laya.timer.once(2e3,this,function(){app.ProtocolRequest.GuildChampionSessionReq();app.ProtocolRequest.GuildChampionBattleListReq()})}if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.GUILD_PK)){o.DailyTaskModel.getIns().addCycleActivity(i)}};t.prototype.onHomeBubbleDataAck=function(t,e){var i=e.bubbleData[0];o.BubbleModel.getIns().dellBubbleInfo(i)};t.prototype.onHomeQuestionAck=function(t,e){o.BubbleModel.getIns().dellAnswer(e.question);o.BubbleModel.getIns().setCorrectArr(e.rightCount)};t.prototype.onHomeAnswerAck=function(t,e){o.BubbleModel.getIns().dellCorrect(e.success)};t.prototype.onHomeLotteryDataAck=function(t,e){o.BubbleModel.getIns().dellLottery(e.lotteryItem,e.endTime)};t.prototype.onHomeLotteryAck=function(t,e){if(e.success==0){manager.FlowManager.instance.flowByStyle1(app.getLang("question_tips1"))}};t.prototype.onHomeKungDataAck=function(t,e){o.BubbleModel.getIns().kungfuTime=e.count};t.prototype.onHomeInviteKungListAck=function(t,e){o.BubbleModel.getIns().dellKungfuList(e.roleList)};t.prototype.onHomeAcceptKungAck=function(t,e){if(e.success==1){if(e.option==1){manager.FlowManager.instance.flowByStyle1(app.getLang("玩家{0}拒绝了你的传功邀请",e.targetName))}else{Laya.Dialog.closeAll();if(app.ViewManager.DisplayedInStage(friend.HaoYouCaiDanView.SINGLE_KEY)){app.ViewManager.toggleView(friend.HaoYouCaiDanView,app.AppContainer.flowLayer,-1)}var i=e.point[0];o.BubbleModel.getIns().startKungFu(e.targetId,i,e.targetName);app.ViewManager.toggleDialog(o.KungfuView,-1,0);o.BubbleModel.getIns().delteKungFuId(e.targetId)}}};t.prototype.onHomeStartKungAck=function(t,e){if(e.success==1){var i=role.LeadingRoleView.getIns();var n=scene.SceneMediator.getInstance().getViewById(o.BubbleModel.getIns().kungfuRoleId);if(n){i.vo.dir=game.SceneModel.getDirByTowPos(i.vo.posX,i.vo.posY,n.vo.posX,n.vo.posY);n.vo.dir=game.SceneModel.getDirByTowPos(n.vo.posX,n.vo.posY,i.vo.posX,i.vo.posY);i.roleState=role.RoleStateConst.IDLE;n.roleState=role.RoleStateConst.IDLE;i.addBodyEff("skill_chuangongguangxiao");n.addBodyEff("skill_chuangongguangxiao");app.ViewManager.toggleView(o.StageProgressView,app.AppContainer.zhezhaoLayer,1,[role.ProgressBarView.ENUM_TYPE.CHUAN_GONG,game.Config.getIntParams(game.ConfigID.CHUANG_GONG_CD)*1e3,Laya.Handler.create(this,function(){i.removeBodyEff();n.removeBodyEff()})])}}};t.prototype.onHomeFinishKungAck=function(t,e){game.SceneModel.clearAllScreenSp();if(e.success==1){app.ViewManager.toggleDialog(o.KungfuGotView,1,0,e.exp);var i=role.LeadingRoleView.getIns();i.removeBodyEff();var n=scene.SceneMediator.getInstance().getViewById(o.BubbleModel.getIns().kungfuRoleId);if(n){n.removeBodyEff()}}else{var i=role.LeadingRoleView.getIns();i.removeBodyEff();var n=scene.SceneMediator.getInstance().getViewById(o.BubbleModel.getIns().kungfuRoleId);if(n){n.removeBodyEff()}app.ViewManager.toggleView(o.StageProgressView,app.AppContainer.zhezhaoLayer,-1)}};t.prototype.onHomeWorshipInfoAck=function(t,e){o.BubbleModel.getIns().mobaicount=e.worshipCount};t.prototype.onHomeWorshipStartAck=function(t,e){if(e.success==1){game.SceneModel.createAllScreenSp(game.SceneModel.ENUM_ALL_SCREEN.MOBAI,0);var i=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.MO_BAI);if(i){role.LeadingRoleView.getIns().showProgressBar(role.ProgressBarView.ENUM_TYPE.MO_BAI,i.param1)}}};t.prototype.onHomeWorshipStopAck=function(t,e){if(e.success==1){game.SceneModel.clearAllScreenSp();role.LeadingRoleView.getIns().hideProgressBar()}};t.prototype.onHomeWorshipFinishAck=function(t,e){game.SceneModel.clearAllScreenSp();role.LeadingRoleView.getIns().hideProgressBar();o.BubbleModel.getIns().mobaicount=e.worshipCount;var i=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.MO_BAI);if(i){if(e.worshipCount>i.param2){manager.FlowManager.instance.flowByStyle1(app.getLang("今日奖励已领，不再获得奖励"))}}};t.prototype.onJoinMountGodAck=function(t,e){};t.prototype.onSSSSGradeInfoNtf=function(t,e){for(var i=0,n=e.dgngradeInf.length;i<n;i++){var r=e.dgngradeInf[i];this._model.ssslKillNumMap[r.cfg_id]=r.val}};t.prototype.onSSSSSweapAck=function(t,e){if(e.result){app.ViewManager.toggleDialog(o.DgnSweepView,1,0,[csv.DailyTimeProxy.ENUM_TYPE.SSSL,e.cfg_id,e.award])}};t.prototype.onMissPalaceAck=function(t,e){this._model.mjgId=e.mjgid};t.prototype.onJoinMissPalaceAck=function(t,e){if(e.result==1){main.MapMjgControl.getIns().startLvl=e.startlv;main.MapMjgControl.getIns().maxLvl=e.maxlv;if(e.maxlv!=0){app.ViewManager.toggleDialog(o.MijingGongTipView,1,0)}battle.BattleModel.getIns().event(battle.BattleModel.INFO_CHANGE)}};t.prototype.onMissPalaceExpNtf=function(t,e){main.MapMjgControl.getIns().exp=e.addexp.toNumber();battle.BattleModel.getIns().event(o.DailyTaskModel.MJG_EXP_CHANGE)};t.prototype.onTaskTowerNtf=function(t,e){this._model.taskMainId=e.stage};t.prototype.onTaskTowerAck=function(t,e){};t.prototype.onBraveChallengeNtf=function(t,e){this._model.braveChallengeId=e.stage};t.prototype.onBraveChallengeAck=function(t,e){e};t.prototype.onEliteChallengeNtf=function(t,e){this._model.eliteChallengeId=e.stage};t.prototype.onSweepEliteChallengeAck=function(t,e){if(e.result==1){app.ViewManager.toggleDialog(o.JingyingSweepView,1,0)}};t.prototype.onViewRollAwardAck=function(t,e){o.YaoDongModel.getIns().rwdInfo=e.records};t.prototype.onEndlessInfNtf=function(t,e){o.YaoDongModel.getIns().luckInfo=e};t.prototype.onEndlessAwardNtf=function(t,e){if(this._startTime!=e.starttime){this._startTime=e.starttime}if(app.ViewManager.DisplayedInStage(battle.BattleYdLotteryView.SINGLE_KEY)){battle.BattleYdLotteryView.getIns().setData(e)}else{app.ViewManager.toggleView(battle.BattleYdLotteryView,app.AppContainer.uiLayer,1,e)}};t.prototype.onTeamInspireNtf=function(t,e){o.YaoDongModel.getIns().dellInspire(e.inf)};t.prototype.onTeamInspireAck=function(t,e){if(e.result==1){o.YaoDongModel.getIns().dellInspire(e.inf)}};t.prototype.onDgnSzjdSweepNtf=function(t,e){for(var i=0,n=e.sid.length;i<n;i++){var r=e.sid[i];o.ShanzhongJiudieModel.getIns().gradeMap[r.cfg_id]=r.val}};t.prototype.onSweepDgnSzjdAck=function(t,e){if(e.result){app.ViewManager.toggleDialog(o.DgnSweepView,1,0,[csv.DailyTimeProxy.ENUM_TYPE.SZJD,o.ShanzhongJiudieModel.getIns().sweepId,e.award])}};t.prototype.onDgnSzjdAck=function(t,e){};t.prototype.onDgnSzjdStepNtf=function(t,e){o.ShanzhongJiudieModel.getIns().setSzjdInfo(e)};t.prototype.onResFindBackDataAck=function(t,e){this._model.setFindRes(e.actpoint,e.resdata)};t.prototype.onResFindBackAck=function(t,e){if(e.result){this._model.setFindRes(e.actpoint,e.resdata)}};t.SINGLE_KEY="dailytask.DailyTaskModule";return t}(app.ModuleBase);o.DailyTaskModule=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=r.DailyTaskModel.getIns().braveChallengeId;if(parseInt(t.id)==e+1){this.xuanzhong.visible=true}else{this.xuanzhong.visible=false}var i=csv.BossProxy.getIns().getMonsterId(t.monstersetbase);var n=csv.MonsterProxy.getIns().getCfg(i);this.touxiangimg.skin=csv.MonsterProxy.getMonsterHeadUrl(n);this.cengshulab.text=app.getLang("第{0}关",t.id)};e.SINGLE_KEY="dailytask.BraveChallengeItem";return e}(ui.wujintiaozhan.wujintiaozhantouxiangitemUI);r.BraveChallengeItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(h){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.lblNames=[];t.avatars=[];t.avatarDatas=[];t.playcount=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojugezi.itemRender=grids.GridView;this.daojugezi.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.daojugezi,this,96,this.daojugezi.spaceX);this.kaishibtn.on(Laya.Event.CLICK,this,this.onFight);this.lblGoto.on(Laya.Event.LINK,this,this.onHandler)};t.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t)};t.prototype.onFight=function(){if(battle.BattleModel.getIns().checkBattleState(true)){return}if(this.showData){if(game.Context.isRoleReach(true,this.showData.level)){app.ProtocolRequest.BraveChallengeReq(this.gouxuan.selected?1:0)}else{battle.BattleAutoKey.clearAuto(battle.BattleAutoKey.AUTO.BRAVE_CHALLENGE_BATTLE)}}};t.prototype.onDisplay=function(){h.DailyTaskModel.getIns().on(h.DailyTaskModel.BRAVE_CHALLENGE_ID_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){h.DailyTaskModel.getIns().off(h.DailyTaskModel.BRAVE_CHALLENGE_ID_CHANGE,this,this.refreshAll);battle.BattleAutoKey.stopAuto(battle.BattleAutoKey.AUTO.BRAVE_CHALLENGE_BATTLE);for(var t=0,e=this.avatars.length;t<e;t++){this.avatars[t].stop();this.avatars[t].off(Laya.Event.COMPLETE,this,this.avatarPlay)}this.playcount=0};t.prototype.refreshAll=function(){var t=h.DailyTaskModel.getIns().braveChallengeId;var e=csv.DungeonProxy.getIns().getBraveArr(t,2);this.showData=null;for(var i=0;i<2;i++){var n=e[i];if(!n){if(this.avatars[i]){this.avatars[i].removeSelf()}continue}if(!this.avatars[i]){var r=new avatar.AvatarAnimation;r.x=this["weizhi"+(i+1)].x;r.y=this["weizhi"+(i+1)].y;this.addChild(r);this.avatars[i]=r;var o=new avatar.AvatarData;o.fileName=game.AniView.FILE_NAME.MONSTER;this.avatarDatas[i]=o;var a=new Laya.Label;a.autoSize=true;a.fontSize=18;a.color="#dadada";a.bold=false;a.anchorX=.5;a.stroke=2;a.strokeColor="#203c56";r.addChild(a);this.lblNames.push(a)}var s=csv.BossProxy.getIns().getMonsterId(n.monstersetbase);var l=csv.MonsterProxy.getIns().getCfg(s);this.avatarDatas[i].roleKey=l.res;this.avatars[i].setAniData(this.avatarDatas[i]);this.lblNames[i].text=app.getLang(l.monname);if(n.id==t+1){this.showData=n;this.avatars[i].scale(1.2,1.2);this.avatars[i].on(Laya.Event.COMPLETE,this,this.avatarPlay,[this.avatars[i]]);this.avatarPlay(this.avatars[i]);this.lblNames[i].y=-l.hpheight*1.2}else{this.avatars[i].scale(1,1);this.avatars[i].off(Laya.Event.COMPLETE,this,this.avatarPlay);this.avatars[i].setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,6);this.avatars[i].play();this.lblNames[i].y=-l.hpheight}}if(this.showData){this.imgdikuang.visible=this.labelmiaoshu.visible=this.gezi.visible=this.daojugezi.visible=true;this.tongguanimg.visible=false;this.cengshulab.text=app.getLang("bravechallenge_des1",this.showData.id);this.centerLayout.array=csv.DungeonProxy.getIns().getBraveShowAward(this.showData);var u=app.str2Array(this.showData.award_foreshow,";");this.labelmiaoshu.text=app.getLang("bravechallenge_unlock",u[0]);this.gezi.setData(u[1]);if(battle.BattleAutoKey.getAuto(battle.BattleAutoKey.AUTO.BRAVE_CHALLENGE_BATTLE)==1){battle.BattleAutoKey.reStartAuto(battle.BattleAutoKey.AUTO.BRAVE_CHALLENGE_BATTLE)}this.setVip();if(game.Context.isRoleReach(false,this.showData.level)){this.lblGoto.visible=false;this.kaishibtn.visible=this.gouxuan.visible=true}else{this.lblGoto.visible=true;this.kaishibtn.visible=this.gouxuan.visible=false;var p=app.str2Array(this.showData.level,"-");this.lblGoto.text=app.getLang("huluxiongdi_needlevel",p[0],csv.ReBirthProxy.getIns().getLvlDes(p[1]))}}else{this.cengshulab.text=app.getLang("bravechallenge_des1",csv.DungeonProxy.getIns().getBraveLen());this.imgdikuang.visible=this.labelmiaoshu.visible=this.gezi.visible=this.daojugezi.visible=this.kaishibtn.visible=this.gouxuan.visible=this.lblGoto.visible=false;this.tongguanimg.visible=true}};t.prototype.avatarPlay=function(t){if(this.playcount%5==1){t.setAni(avatar.AvatarAnimation.ANI_ENUMS.SKILL_01,6);t.play()}else{t.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,6);t.play()}this.playcount++};t.prototype.setVip=function(){};t.SINGLE_KEY="dailytask.BraveChallengeView";return t}(ui.wujintiaozhan.wujintiaozhanviewUI);h.BraveChallengeView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=a.BubbleModel.getIns();this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-app.AppContainer.UI_LAYER_Y.RIGHT_BOTTOM-5-this.height-ScreenAdapter.OFFSET_BOTTOM};e.prototype.onDisplay=function(){this._model.on(a.BubbleModel.BUBBLE_EXP_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(a.BubbleModel.BUBBLE_EXP_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.labelleijihuodenum.text=game.MoneyModel.format(this._model.totalExp);Laya.timer.loop(1e3,this,this.loopFreshTime);this.loopFreshTime();var t=0;for(var e=0,i=game.Context.roleList.length;e<i;e++){var n=game.Context.roleList[e];var r=csv.LevelProxy.getIns().getBubbleExp(n.level);var o=a.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.PAO_DIAN);t+=r*parseInt(o.param2)}this.labeljingyanmum.text=game.MoneyModel.format(t)};e.prototype.loopFreshTime=function(){var t=this._model.endTime-game.Context.getServerTime();if(t>=0){this.labeltimenum.text=util.TimeUtil.formatTime(t)}else{Laya.timer.clear(this,this.loopFreshTime)}};e.SINGLE_KEY="dailytask.BubbleExpView";return e}(ui.jiayuanpaodian.jingyantongjiviewUI);a.BubbleExpView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.huodebtn2.on(Laya.Event.CLICK,this,this.onBattle)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=i.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.PAO_DIAN)};e.prototype.onBattle=function(){var t=i.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.PAO_DIAN);if(t){role.LeadingRoleView.getIns().aiActMove(t)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("活动未开放"))}};e.SINGLE_KEY="dailytask.BubbleView";return e}(ui.jiayuanpaodian.paodianhuodongbgUI);i.BubbleView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.imgxuhao.skin="jiayuanpaodian/"+e.ABCD[t.index]+".png";this.labeldatidaan.text=t.des;this.imgdaanxuanzhongbg.visible=t.select;this.imgdaanzhengquebg.visible=t.correct};e.SINGLE_KEY="dailytask.AnswerItem";e.ABCD=["bg_dati_a","bg_dati_b","bg_dati_c","bg_dati_d"];return e}(ui.jiayuanpaodian.jiayuanpaodiandatiitemUI);t.AnswerItem=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){if(this.dataSource.state==0){if(i.BubbleModel.getIns().getCorrectNum()>=i.BubbleModel.getIns().joinLotteryNum){var t=i.BubbleModel.getIns().getLotteryDex(this.dataSource);app.ProtocolRequest.HomeLotteryReq(t)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("答对题数不足,无法参与此次抽奖"))}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){if(t.state==0){this.imgdatichoujiang.visible=true;this.imgnew.visible=false;this.itemdaoju.visible=false;this.imgyichoujiang.visible=false}else{this.imgdatichoujiang.visible=false;this.imgnew.visible=false;this.itemdaoju.visible=true;var e=csv.BubbleProxy.getIns().getLotteryCfg(t.index);var i=game.ItemUtil.parserList(e.awards)[0];this.itemdaoju.setData(i);this.imgyichoujiang.visible=Boolean(t.playerName==game.Context.mainRole.playername)}};e.SINGLE_KEY="dailytask.AnswerLotteryItem";return e}(ui.jiayuanpaodian.datichoujiangitem02UI);i.AnswerLotteryItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=game.ItemUtil.parserList(t.awards)[0];this.itemdaoju.setData(e);var i=n.BubbleModel.getIns().getLotteryByIndex(parseInt(t.id));if(i){if(i.state==0){this.labelname.text=app.getLang("dati_lottery_1")}else{this.labelname.text=i.playerName}}};e.SINGLE_KEY="dailytask.AnswerLotteryRareItem";return e}(ui.jiayuanpaodian.datichoujiangitem01UI);n.AnswerLotteryRareItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listchoujiang.itemRender=i.AnswerLotteryItem;this.listchoujiang.renderHandler=new Laya.Handler(this,this.onRender);this.listchoujiang.hScrollBarSkin="";this.listchoujiang.vScrollBarSkin=" ";this.listxiyoujiangli.itemRender=i.AnswerLotteryRareItem;this.listxiyoujiangli.renderHandler=new Laya.Handler(this,this.onRareRender);this._model=i.BubbleModel.getIns()};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onRareRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){app.ProtocolRequest.HomeLotteryDataReq();this._model.on(i.BubbleModel.LOTTERY_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BubbleModel.LOTTERY_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this._model.getLottery();this.listchoujiang.array=t;var e=csv.BubbleProxy.getIns().getRareRwds();this.listxiyoujiangli.array=e;this.setTime()};e.prototype.setTime=function(){var t=this._model.lotteryEndTime-game.Context.getServerTime();if(t<=0){t=0}else{Laya.timer.loop(1e3,this,this.loopFreshTime)}this.labeldaojishi.text=app.getLang("{0}秒后抽奖结束",t)};e.prototype.loopFreshTime=function(){var t=this._model.lotteryEndTime-game.Context.getServerTime();if(t<0){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(e,-1)}else{this.labeldaojishi.text=app.getLang("{0}秒后抽奖结束",t)}};e.SINGLE_KEY="dailytask.AnswerLotteryView";return e}(ui.jiayuanpaodian.datichoujiangviewUI);i.AnswerLotteryView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.SINGLE_KEY="dailytask.AnswerRewardItem";return e}(ui.jiayuanpaodian.datichoujiangitem01UI);t.AnswerRewardItem=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.SINGLE_KEY="dailytask.AnswerRewardView";return e}(ui.jiayuanpaodian.datichoujiangviewUI);t.AnswerRewardView=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.SINGLE_KEY="dailytask.AnswerShowRewardItem";return e}(ui.jiayuanpaodian.datichoujiangitem02UI);t.AnswerShowRewardItem=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(f){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t._selectIndex=-1;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listdatidaan.itemRender=f.AnswerItem;this.listdatidaan.renderHandler=new Laya.Handler(this,this.onHandler);this.listdatidaan.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.listdatidaan.selectEnable=true;this.listdatidaan.vScrollBarSkin=" ";this._model=f.BubbleModel.getIns()};i.prototype.onHandler=function(t,e){t.setData(t.dataSource)};i.prototype.onSelectHandler=function(t,e){if(this.state==1){return}for(var i=0,n=this.listdatidaan.array.length;i<n;i++){this.listdatidaan.array[i].select=Boolean(this.listdatidaan.selectedIndex==i)}this.listdatidaan.refresh()};i.prototype.onDisplay=function(){this._model.on(f.BubbleModel.ANSWER_CHANGE,this,this.refreshAll);this._model.on(f.BubbleModel.ANSWER_CORRECT,this,this.refreshAll);this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){this._model.off(f.BubbleModel.ANSWER_CHANGE,this,this.refreshAll);this._model.off(f.BubbleModel.ANSWER_CORRECT,this,this.refreshAll)};i.prototype.refreshAll=function(){this.listdatidaan.selectedIndex=-1;var t=this._model.getAnswer();if(!t){return}this.answer=t;var e=csv.BubbleProxy.getIns().getCfg(t.id);var i=this._model.getAnswerIndex(t);this.labeldatitimu.text=i+1+"."+app.getLang(e.stem);this.lblProgress.text=app.getLang("当前进度：{0}/{1}",this._model.getCorrectNum(),this._model.getAnswerLen());var n=[];var r=this.answer.answerTime-game.Context.getServerTime();if(r>0){this.state=0;this.imghuida.visible=false;this.setAnswerTime();for(var o=0,a=t.options.length;o<a;o++){var s=t.options[o];var l={index:o,des:s,select:false,correct:false};n.push(l)}}else{this.state=1;var u=this.answer.nextTime-game.Context.getServerTime();if(u>0){this.setNextAnswerTime()}this.imghuida.visible=true;var p=this._model.getAnswerCorrect(this.answer);if(p){this.imghuida.skin="jiayuanpaodian/bg_zhengque.png"}else{this.imghuida.skin="jiayuanpaodian/bg_cuowu.png"}for(var o=0,a=t.options.length;o<a;o++){var s=t.options[o];var l={index:o,des:s,select:this._selectIndex==o,correct:o==this.answer.answerIndex};n.push(l)}}this.listdatidaan.array=n;var h=f.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.DA_TI);if(h){var c=game.ItemUtil.parserList(h.param3);this.itemjiangli.setData(c[i])}};i.prototype.setAnswerTime=function(){this.labeltishi01.visible=false;this.labeltishi02.visible=false;this.labeltishi03.visible=true;var t=this.answer.answerTime-game.Context.getServerTime();this.labeltishi03.text=util.TimeUtil.formatTime(t,false);Laya.timer.loop(1e3,this,this.loopFreshTime)};i.prototype.loopFreshTime=function(){var t=this.answer.answerTime-game.Context.getServerTime();if(t>=0){this.labeltishi03.text=util.TimeUtil.formatTime(t,false)}else{Laya.timer.clear(this,this.loopFreshTime);app.ProtocolRequest.HomeAnswerReq(this.answer.id,this.listdatidaan.selectedIndex);this._selectIndex=this.listdatidaan.selectedIndex;console.log("发送答案",this.listdatidaan.selectedIndex)}};i.prototype.setNextAnswerTime=function(){this.labeltishi01.visible=true;this.labeltishi02.visible=true;this.labeltishi03.visible=false;var t=this.answer.nextTime-game.Context.getServerTime();this.labeltishi02.text=t.toString();Laya.timer.loop(1e3,this,this.loopNextFreshTime)};i.prototype.loopNextFreshTime=function(){var t=this.answer.nextTime-game.Context.getServerTime();if(t>=0){this.labeltishi02.text=t.toString()}else{Laya.timer.clear(this,this.loopNextFreshTime);var e=this._model.getAnswer();if(e){this.refreshAll()}else{app.ViewManager.toggleDialog(i,-1);app.ViewManager.toggleDialog(f.AnswerLotteryView,1,0)}}};i.SINGLE_KEY="dailytask.AnswerView";return i}(ui.jiayuanpaodian.jiayuanpaodiandativiewUI);f.AnswerView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.visible=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.label01.text=app.getLang("chuangong_tips2",this.dataSource)};e.SINGLE_KEY="dailytask.KungfuGetView";return e}(ui.jiayuanpaodian.paodianhuodongtipUI);t.KungfuGetView=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnquxiao.visible=false;this.btnqueding.visible=false;this.quedingbtn.label=app.getLang("确定");this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){this.close()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.label01.text=app.getLang("chuangong_tips1",i.BubbleModel.getIns().kungfuTargetName,game.MoneyModel.format(Uint64.toNumber(this.dataSource)))};e.SINGLE_KEY="dailytask.KungfuGotView";return e}(ui.jiayuanpaodian.paodianhuodongtipUI);i.KungfuGotView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnjujue.on(Laya.Event.CLICK,this,this.onRefuse);this.btntongyi.on(Laya.Event.CLICK,this,this.onAgree)};e.prototype.onAgree=function(){app.ProtocolRequest.HomeAcceptKungReq(this.dataSource.playerID,0)};e.prototype.onRefuse=function(){app.ProtocolRequest.HomeAcceptKungReq(this.dataSource.playerID,1);i.BubbleModel.getIns().delteKungFuId(this.dataSource.playerID)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.labelname.text=t.playerName;this.labellv.text=app.getLang("level_des_1",t.level)};e.SINGLE_KEY="dailytask.KungfuItem";return e}(ui.jiayuanpaodian.chuangongyaoqingitemUI);i.KungfuItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listyaoqing.itemRender=i.KungfuItem;this.listyaoqing.renderHandler=new Laya.Handler(this,this.onRender);this._model=i.BubbleModel.getIns()};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){app.ProtocolRequest.HomeInviteKungListReq(game.Context.mainRoleId);this._model.on(i.BubbleModel.KUNGFU_LIST_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.BubbleModel.KUNGFU_LIST_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.listyaoqing.array=this._model.getKungfuList()};e.SINGLE_KEY="dailytask.KungfuView";return e}(ui.jiayuanpaodian.chuangongyaoqingviewUI);i.KungfuView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.animationman.visible=false;this.animationman.on(Laya.Event.COMPLETE,this,this.onComplete);var t=new Laya.Sprite;t.graphics.drawRect(-100,0,this.boxMask.width+100,this.boxMask.height,1);this.boxMask.mask=t;this.x=(Laya.stage.width-this.width)/2;this.y=Laya.stage.height-app.AppContainer.UI_LAYER_Y.RIGHT_BOTTOM-this.height};t.prototype.onComplete=function(){app.ViewManager.toggleView(t,app.AppContainer.zhezhaoLayer,-1)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.loopFreshTime);this.endHandler=undefined;this.animationchuangongzhong.stop();this.animationman.visible=false};t.prototype.refreshAll=function(){this.setType(this.dataSource[0],this.dataSource[1],this.dataSource[2])};t.prototype.setType=function(t,e,i){this.endHandler=i;this._loopTime=e;this.animationchuangongzhong.play(0,true);this.animationloading.play(0,true);this._startTime=Laya.timer.currTimer;this.loopFreshTime();Laya.timer.frameLoop(1,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=Laya.timer.currTimer-this._startTime;if(t<=this._loopTime){var e=t/this._loopTime;this.barchuangong.value=e;this.animationloading.x=e*this.boxMask.width}else{this.barchuangong.value=1;this.animationloading.x=this.boxMask.width;Laya.timer.clear(this,this.loopFreshTime);if(this.endHandler){this.endHandler.run()}this.animationman.visible=true;this.animationman.play(0,false)}};t.SINGLE_KEY="role.StageProgressView";t.ENUM_TYPE={CHUAN_GONG:1,MO_BAI:2,CAI_JI:3};return t}(ui.jiayuanpaodian.chuangongjinduviewUI);t.StageProgressView=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list.itemRender=grids.GridView;this.list.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.list,this.boxliebiao,100,this.list.spaceX)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=app.str2Array(t.lowlevel,"-");var i=parseInt(e[0]);var n=parseInt(e[1]);if(i==n){this.imgdengji.skin="res/static/common/bg_paiming_jingjichang_"+i+".png";this.lapelpaiming.text="";this.imgbg.skin=rank.RankModel.getRankBgUrl(i)}else{this.imgdengji.skin="";this.lapelpaiming.text=app.getLang("第{0}—{1}名",i,n);this.imgbg.skin=rank.RankModel.getRankBgUrl(0)}this.centerLayout.array=game.ItemUtil.parserList(t.rankaward)};e.SINGLE_KEY="dailytask.HuluDefendAwardItem";return e}(ui.shouhuhulu.shouhuhulujiangliitemUI);t.HuluDefendAwardItem=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i){this.boSelf=i;this.namelab.text=e+". "+game.Context.clearPlayerName(t.uname);this.shuzhilab.text=game.MoneyModel.format(t.hurt.toNumber());if(i){if(Uint64.equal(t.uid,game.Context.mainRoleId)){this.namelab.color=game.STYLES.YELLOW_COLOR}else{this.namelab.color=game.STYLES.DESC_TXT_COLOR}}else{var n=guild.GuildModel.getIns().guildVO?guild.GuildModel.getIns().guildVO.guildInf.guildID:Uint64.ZERO;if(Uint64.equal(t.uid,n)){this.namelab.color=game.STYLES.YELLOW_COLOR}else{this.namelab.color=game.STYLES.DESC_TXT_COLOR}}};e.SINGLE_KEY="battle.HuluDefendHurtRankItem";return e}(ui.bosszhandou.shanghaipaihangitem1UI);t.HuluDefendHurtRankItem=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.paihanglist.itemRender=i.HuluDefendHurtRankItem;this.paihanglist.renderHandler=new Laya.Handler(this,this.onRender);this.x=Laya.stage.width-this.width;this.y=main.MoneyView.getIns().height+5+ScreenAdapter.OFFSET_Y;this._model=boss.BossModel.getIns();this.tabanniu.selectedIndex=0;this.tabanniu.on(Laya.Event.CHANGE,this,this.showRank)};e.prototype.onRender=function(t,e){t.setData(t.dataSource,e+1,this.tabanniu.selectedIndex==1)};e.prototype.onDisplay=function(){this._model.on(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(boss.BossEvent.BOSS_HURT_CHANGE,this,this.refreshAll);boss.BossModel.getIns().clearHurtInfo()};e.prototype.refreshAll=function(){this.showRank()};e.prototype.showRank=function(){var t=[];var e=0;var i=0;var n=boss.BossModel.getIns().getHurtInfo();if(!n){this.paihanglist.array=[];this.wodelab.text="";return}if(this.tabanniu.selectedIndex){e=n.playerhurt.toNumber();for(var r=0,o=n.playerRankinf.length;r<o;r++){var a=n.playerRankinf[r];t.push(a);if(Uint64.equal(a.uid,game.Context.mainRoleId)){i=a.hrank}}this.paihanglist.array=t;if(i){this.wodelab.text=app.getLang("gourddefend_tips13",i,game.MoneyModel.format(e))}else{this.wodelab.text=app.getLang("gourddefend_tips17",game.MoneyModel.format(e))}}else{e=n.selfhurt.toNumber();for(var r=0,o=n.rankinf.length;r<o;r++){var a=n.rankinf[r];t.push(a);var s=guild.GuildModel.getIns().guildVO?guild.GuildModel.getIns().guildVO.guildInf.guildID:Uint64.ZERO;if(Uint64.equal(a.uid,s)){i=a.hrank}}this.paihanglist.array=t;if(i){this.wodelab.text=app.getLang("gourddefend_tips12",i,game.MoneyModel.format(e))}else{this.wodelab.text=app.getLang("gourddefend_tips16",game.MoneyModel.format(e))}}};e.SINGLE_KEY="battle.HuluDefendHurtRankView";return e}(ui.bosszhandou.shouhuhulushanghaipaihangUI);i.HuluDefendHurtRankView=t})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){guild.GuildController.getIns().onGuildInfReq(this.dataSource.uid)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=rank.RankModel.getIns().getRankNum(e,t.uid);this.imgbg.skin=rank.RankModel.getRankBgUrl(i);if(i<=3){this.imgdengji.skin="res/static/common/bg_paiming_jingjichang_"+i+".png";this.lapelpaiming.text=""}else{this.lapelpaiming.text=i.toString();this.imgdengji.skin=""}this.bangpai.text=game.Context.clearPlayerName(t.name);var n=guild.GuildModel.getIns().guildVO?guild.GuildModel.getIns().guildVO.guildInf.guildID:Uint64.ZERO;if(Uint64.equal(t.uid,n)){this.lapelpaiming.color=this.bangpai.color=this.labelshanghai.color=game.STYLES.YELLOW_COLOR_S}else{this.lapelpaiming.color=this.bangpai.color=this.labelshanghai.color=game.STYLES.DESC_TXT_COLOR_S}this.labelshanghai.text=game.MoneyModel.formatZheng(t.value.toNumber())};e.SINGLE_KEY="dailytask.HuluDefendRankItem";return e}(ui.shouhuhulu.shouhuhulujiangliitem2UI);t.HuluDefendRankItem=e;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(t){if(!Uint64.equal(this.dataSource.uid,game.Context.mainRoleId)){rank.RankModel.showRankBtnList(this.dataSource.uid,this.dataSource.name,this.dataSource.totallv,this.dataSource.classskin,this.dataSource.headframeId)}else{if(app.ViewManager.DisplayedInStage(friend.HaoYouCaiDanView.SINGLE_KEY)){app.ViewManager.toggleView(friend.HaoYouCaiDanView,app.AppContainer.flowLayer,-1)}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=rank.RankModel.getIns().getRankNum(e,t.uid);this.imgbg.skin=rank.RankModel.getRankBgUrl(i);if(i<=3){this.imgdengji.skin="res/static/common/bg_paiming_jingjichang_"+i+".png";this.lapelpaiming.text=""}else{this.lapelpaiming.text=i.toString();this.imgdengji.skin=""}this.labelwanjia.text=game.Context.clearPlayerName(t.name);if(Uint64.equal(t.uid,game.Context.mainRoleId)){this.lapelpaiming.color=this.labelwanjia.color=this.labelbangpai.color=this.labelshanghai.color=game.STYLES.YELLOW_COLOR_S}else{this.lapelpaiming.color=this.labelwanjia.color=this.labelbangpai.color=this.labelshanghai.color=game.STYLES.DESC_TXT_COLOR_S}this.labelbangpai.text=game.Context.clearPlayerName(t.gname);this.labelshanghai.text=game.MoneyModel.formatZheng(t.value.toNumber())};e.SINGLE_KEY="dailytask.HuluDefendRankSItem";return e}(ui.shouhuhulu.shouhuhulujiangliitem3UI);t.HuluDefendRankSItem=i})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};Object.defineProperty(t.prototype,"uiState",{set:function(t){this._uiState=t;this.mouseEnabled=false;if(this.currBox){Laya.Tween.to(this.currBox,{y:-this.box.height},100,null,this.upMoveEnd)}},enumerable:true,configurable:true});t.prototype.upEnd=function(){if(this._uiState==1){this.currBox=this.box1;this.showAct()}else if(this._uiState==2){this.currBox=this.box2;this.showAward()}else if(this._uiState==3){this.currBox=this.box3;this.showRank()}Laya.Tween.to(this.currBox,{y:0},100,null,this.downMoveEnd)};t.prototype.downEnd=function(){this.mouseEnabled=true};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);var t=new Laya.Sprite;t.graphics.drawRect(0,0,this.box.width,this.box.height,1);this.box.mask=t;this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.destime.text=app.getLang("gourddefend_tips4");this.listjiangli.itemRender=i.HuluDefendAwardItem;this.listjiangli.renderHandler=new Laya.Handler(this,this.onAwardRender);this.listpaiming.itemRender=i.HuluDefendRankItem;this.listpaiming.renderHandler=new Laya.Handler(this,this.onRankRender);this.listgeren.itemRender=i.HuluDefendRankSItem;this.listgeren.renderHandler=new Laya.Handler(this,this.onRankSRender);this.upMoveEnd=new Laya.Handler(this,this.upEnd);this.downMoveEnd=new Laya.Handler(this,this.downEnd);this.huodebtn2.on(Laya.Event.CLICK,this,this.onBattle);this.btnpaihang.on(Laya.Event.CLICK,this,this.onRank);this.btnjangli.on(Laya.Event.CLICK,this,this.onAward);this.btnhuodong1.on(Laya.Event.CLICK,this,this.onBack);this.btnhuodong2.on(Laya.Event.CLICK,this,this.onBack);this.tab1.selectedIndex=0;this.tab1.on(Laya.Event.CHANGE,this,this.showAward);this.tab2.selectedIndex=0;this.tab2.on(Laya.Event.CHANGE,this,this.showRank);game.HelperViewHandler.registerStr([this.btnwenhao],app.getLang("gourddefend_tips6"),app.getLang("gourddefend_tips7"));this.shuominglab.text=app.getLang("gourddefend_tips3",game.Config.getIntParams(1110))};t.prototype.onBack=function(){this.uiState=1};t.prototype.onBattle=function(){var t=i.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.SHOU_HU);if(!t){manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_tips36"));return}if(guild.GuildModel.getIns().isGuild){if(guild.GuildModel.getIns().guildVO.guildInf.level>=game.Config.getIntParams(1110)){if(battle.BattleModel.getIns().checkBattleState(true)){return}app.ProtocolRequest.GuardhuluChallengeReq(parseInt(t.id))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_tips14"))}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("gourddefend_tips15"))}};t.prototype.onRank=function(){app.ProtocolRequest.GetRankListReq(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL);app.ProtocolRequest.GetRankListReq(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL_S);this.uiState=3};t.prototype.onAward=function(){this.uiState=2};t.prototype.onAwardRender=function(t,e){t.setData(t.dataSource)};t.prototype.onRankRender=function(t,e){t.setData(t.dataSource,rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL)};t.prototype.onRankSRender=function(t,e){t.setData(t.dataSource,rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL_S)};t.prototype.onActChange=function(){if(this._uiState==1){this.showAct()}};t.prototype.onDisplay=function(){this.callLater(this.refreshAll);i.DailyTaskModel.getIns().on(i.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onActChange);rank.RankModel.getIns().on(rank.RankModel.RANK_DATA_CHANGE,this,this.showRank)};t.prototype.onUnDisplay=function(){i.DailyTaskModel.getIns().off(i.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onActChange);rank.RankModel.getIns().off(rank.RankModel.RANK_DATA_CHANGE,this,this.showRank)};t.prototype.refreshAll=function(){if(this.dataSource.length>0){this._uiState=this.dataSource[0]?this.dataSource[0]:1}else{this._uiState=1}if(this._uiState==1){this.box2.y=this.box3.y=-this.box.height;this.box1.y=0;this.currBox=this.box1;this.showAct()}else if(this._uiState==2){this.box1.y=this.box3.y=-this.box.height;this.box2.y=0;this.currBox=this.box2;this.showAward()}else if(this._uiState==3){this.box2.y=this.box1.y=-this.box.height;this.box3.y=0;this.currBox=this.box3;app.ProtocolRequest.GetRankListReq(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL);app.ProtocolRequest.GetRankListReq(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL_S);this.showRank()}};t.prototype.showAct=function(){var t=i.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.SHOU_HU);if(t){this.daojulist.array=game.ItemUtil.parserList(t.awardshow);this.huodebtn2.visible=true;this.labeldaojishi.text="";Laya.timer.clear(this,this.loopFreshTime)}else{var e=csv.ActivityFunction.getIns().getTypeArr(csv.ActivityFunction.ENUM.SHOU_HU);this.daojulist.array=game.ItemUtil.parserList(e[0].awardshow);this.huodebtn2.visible=false;this.startLoop()}};t.prototype.startLoop=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){var t=csv.ActivityFunction.getIns().getNextOpenTime(csv.ActivityFunction.ENUM.SHOU_HU);if(t>=0){this.labeldaojishi.text=app.getLang("gourddefend_tips5",util.TimeUtil.formatTime1(t,true,true,true))}else{Laya.timer.clear(this,this.loopFreshTime)}};t.prototype.showAward=function(){var t=[];var e=csv.ActivityFunction.getIns().shouhuhuluMap[this.tab1.selectedIndex+1];for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.lowlevel=="0-0"){continue}t.push(r)}this.listjiangli.array=t};t.prototype.showRank=function(){if(this.tab2.selectedIndex){var t=rank.RankModel.getIns().getRankInfo(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL_S);if(!t||!t.rankList.length){this.imgno.visible=true;this.box4.visible=false;this.box5.visible=false}else{this.imgno.visible=false;this.box4.visible=false;this.box5.visible=true;this.listgeren.array=t.rankList;if(t.rank){this.labelwode1.text=app.getLang("gourddefend_tips20",t.rank,game.MoneyModel.format(t.rankValue.toNumber()))}else{this.labelwode1.text=app.getLang("gourddefend_tips21")}}}else{var t=rank.RankModel.getIns().getRankInfo(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_SHHL);if(!t||!t.rankList.length){this.imgno.visible=true;this.box4.visible=false;this.box5.visible=false}else{this.imgno.visible=false;this.box4.visible=true;this.box5.visible=false;this.listpaiming.array=t.rankList;if(t.rank){this.labelwode.text=app.getLang("gourddefend_tips18",t.rank,game.MoneyModel.format(t.rankValue.toNumber()))}else{this.labelwode.text=app.getLang("gourddefend_tips19")}}}};t.SINGLE_KEY="dailytask.HuluDefendView";return t}(ui.shouhuhulu.shouhuhulubgUI);i.HuluDefendView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(o){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.playcount=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.avatar=new avatar.AvatarAnimation;this.addChild(this.avatar);this.avatarData=new avatar.AvatarData;this.avatarData.fileName=game.AniView.FILE_NAME.MONSTER;this.lbl=new Laya.Label;this.lbl.autoSize=true;this.lbl.fontSize=18;this.lbl.color="#dadada";this.lbl.bold=false;this.lbl.anchorX=.5;this.lbl.stroke=2;this.lbl.strokeColor="#203c56";this.avatar.addChild(this.lbl)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t,e){var i=o.DailyTaskModel.getIns().eliteChallengeId;if(parseInt(t.id)==i+1){this.xuanzhong.visible=true}else{this.xuanzhong.visible=false}var n=csv.BossProxy.getIns().getMonsterId(t.monstersetbase);var r=csv.MonsterProxy.getIns().getCfg(n);this.avatarData.roleKey=r.res;this.lbl.text=app.getLang(r.monname);this.lbl.y=-r.hpheight;this.avatar.setAniData(this.avatarData);this.avatar.x=this.sprite1.x;this.avatar.y=this.sprite1.y;if(e){this.xuanzhong.visible=true;this.avatar.on(Laya.Event.COMPLETE,this,this.avatarPlay);this.avatarPlay()}else{this.xuanzhong.visible=false;this.avatar.off(Laya.Event.COMPLETE,this,this.avatarPlay);this.avatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,6);this.avatar.play()}};t.prototype.avatarPlay=function(){if(this.playcount%5==1){this.avatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.SKILL_01,6);this.avatar.play()}else{this.avatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,6);this.avatar.play()}this.playcount++};t.prototype.stop=function(){this.avatar.stop();this.avatar.off(Laya.Event.COMPLETE,this,this.avatarPlay);this.playcount=0};t.SINGLE_KEY="dailytask.JingyingFightItem";return t}(ui.jingyingtiaozhan.jingyingtiaozhanitemUI);o.JingyingFightItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojugezi.itemRender=grids.GridView;this.daojugezi.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.daojugezi,this.box,96,this.daojugezi.spaceX);this.itemArr=[this.dizuo1,this.dizuo2,this.dizuo3];this._model=new o.DailyTaskModel;this.btnSweep.on(Laya.Event.CLICK,this,this.onSweep);this.btnquanjusaodang.on(Laya.Event.CLICK,this,this.onSweep);this.kaishibtn.on(Laya.Event.CLICK,this,this.onFight);this.btnpaihangbang.on(Laya.Event.CLICK,this,this.onCheck);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.ELITE_CHALLENGE,[this.buttishi,this.chakanlab])};e.prototype.onCheck=function(){rank.RankModel.showNormalRankView(rank.RankModel.TYPE_ENUM.ENMRANKTYPE_ELITE)};e.prototype.onSweep=function(){o.DailyTimeUtil.buyTime(csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP)};e.prototype.onFight=function(){if(battle.BattleModel.getIns().checkBattleState(true)){return}if(this.showData){if(game.Context.isRoleReach(true,this.showData.level)){app.ProtocolRequest.EliteChallengeReq(this.gouxuan.selected?1:0)}else{battle.BattleAutoKey.clearAuto(battle.BattleAutoKey.AUTO.ELITE_CHALLENGE_BATTLE)}}};e.prototype.onDisplay=function(){o.DailyTaskModel.getIns().on(o.DailyTaskModel.ELITE_CHALLENGE_ID_CHANGE,this,this.refreshAll);boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){o.DailyTaskModel.getIns().off(o.DailyTaskModel.ELITE_CHALLENGE_ID_CHANGE,this,this.refreshAll);boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);battle.BattleAutoKey.stopAuto(battle.BattleAutoKey.AUTO.ELITE_CHALLENGE_BATTLE);for(var t=0,e=this.itemArr.length;t<e;t++){this.itemArr[t].stop()}this.showData=null};e.prototype.refreshAll=function(){var t=o.DailyTaskModel.getIns().eliteChallengeId;var e=csv.DungeonProxy.getIns().getEliteArr(t);for(var i=0;i<this.itemArr.length;i++){var n=e[i];if(parseInt(n.id)==t+1){this.showData=n;this.itemArr[i].setData(n,true)}else{this.itemArr[i].setData(n,false)}}if(this.showData){this.tongguanimg.visible=false;this.cengshulab.text=app.getLang("jiesuan_yongzhe_1",this.showData.id);this.centerLayout.array=game.ItemUtil.parserList(this.showData.award_item);this.labeljiesuo.text=app.getLang(this.showData.extra_award);if(t==0){this.box2.visible=false;this.box1.visible=true;this.box1.x=245}else{this.box2.visible=true;this.box2.x=81;this.box1.visible=true;this.box1.x=384}}else{var n=e[e.length-1];this.centerLayout.array=game.ItemUtil.parserList(n.award_item);this.labeljiesuo.text=app.getLang(n.extra_award);this.tongguanimg.visible=true;this.cengshulab.text=app.getLang("jiesuan_yongzhe_1",t);this.box1.visible=false;this.box2.visible=true;this.box2.x=217}if(battle.BattleAutoKey.getAuto(battle.BattleAutoKey.AUTO.ELITE_CHALLENGE_BATTLE)==1){battle.BattleAutoKey.reStartAuto(battle.BattleAutoKey.AUTO.ELITE_CHALLENGE_BATTLE)}this.setVip();this.setDailyTime()};e.prototype.setVip=function(){};e.prototype.setDailyTime=function(){var t=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP);var e=t.fnum+t.gnum;var i=0;this.boxquanjusaodangmianfei.visible=false;this.boxquanjusaodang.visible=false;game.RedDotView.removeFrom(this.boxquanjusaodangmianfei);var n=csv.DailyTimeProxy.getIns().buytime(csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP);this.labelwebzi.text=app.getLang("elitechallenge_des1",n-t.bnum+e);if(e>0){this.boxquanjusaodangmianfei.visible=true;this.labelmianfei.text=app.getLang("elitechallenge_des2");if(o.DailyTaskModel.getIns().eliteChallengeId>0){game.RedDotView.addTo(this.boxquanjusaodangmianfei)}}else{i=t.bnum;if(n>0){var r=void 0;if(i>=n){r=csv.DailyTimeProxy.getIns().buycost(csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP,n)}else{r=csv.DailyTimeProxy.getIns().buycost(csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP,i+1)}this.labelshuzi.text=r[1];this.boxquanjusaodang.visible=true}else{this.boxquanjusaodangmianfei.visible=true;this.labelmianfei.text=app.getLang("elitechallenge_des3")}}};e.SINGLE_KEY="dailytask.JingyingFightView";return e}(ui.jingyingtiaozhan.jingyingtiaozhanviewnewUI);o.JingyingFightView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=grids.GridView.CommonItemRender;this.xiacengbtn.on(Laya.Event.CLICK,this,this.onSweep)};e.prototype.onSweep=function(){i.DailyTimeUtil.buyTime(csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=i.DailyTaskModel.getIns().eliteChallengeId;var e=csv.DungeonProxy.getIns().getEliteCfg(t);this.tiaozhanlab.text=app.getLang("扫荡层数：");this.shijianlab.text=app.getLang("第{0}关",e.id);this.gezilist.array=game.ItemUtil.parserList(e.clear_item)};e.SINGLE_KEY="dailytask.JingyingSweepView";return e}(ui.jiesuan.saodangjiesuanUI);i.JingyingSweepView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist2.itemRender=grids.GridView;this.gezilist2.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.gezilist2,this,96,10);this.jinrubtn.on(Laya.Event.CLICK,this,this.onClick);this.jiabtn.on(Laya.Event.CLICK,this,this.onAdd);this.vipbtn.on(Laya.Event.CLICK,this,this.onOpenVip)};e.prototype.onOpenVip=function(){boss.BossModel.getIns().onShowVipSwitchView(csv.DailyTimeProxy.ENUM_TYPE.MJG)};e.prototype.onAdd=function(){i.DailyTimeUtil.buyTime(csv.DailyTimeProxy.ENUM_TYPE.MJG)};e.prototype.onClick=function(){if(battle.BattleModel.getIns().checkBattleState(true)){return}if(game.Context.isRoleReach(true,this.dataSource.level)){app.ProtocolRequest.JoinMissPalaceReq()}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=0;var i=csv.DailyTimeProxy.getIns().getCfg(csv.DailyTimeProxy.ENUM_TYPE.MJG);if(csv.DailyTimeProxy.getIns().isCanBuy(csv.DailyTimeProxy.ENUM_TYPE.MJG)){this.jiabtn.visible=true;var n=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.MJG);if(n){e=n.fnum+n.gnum}}else{this.jiabtn.visible=false}this.cishushuzhi.text=e+"/"+i.time;this.centerLayout.array=game.ItemUtil.parserList(t.award_item);if(game.Context.isRoleReach(false,this.dataSource.level)){this.jinrubtn.gray=false}else{this.jinrubtn.gray=true}};e.SINGLE_KEY="dailytask.MijingGongSubTypeView";return e}(ui.jingmigong.jingmigongitem2UI);i.MijingGongSubTypeView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(e,-1,0)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this._startTime=Laya.timer.currTimer;this.guanshu.value=main.MapMjgControl.getIns().maxLvl.toString();this.guanshukaishi.text=app.getLang("本次挑战从第{0}关开始，前{1}关奖励直接获得",main.MapMjgControl.getIns().startLvl,main.MapMjgControl.getIns().startLvl-1);this.quedingbtn.label=app.getLang("确认（{0}s）",battle.BattleConst.BATTLE_RESULT_CLOSE_TIME);this.startLoop()};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=Math.floor((Laya.timer.currTimer-this._startTime)/1e3);if(t<=battle.BattleConst.BATTLE_RESULT_CLOSE_TIME){this.quedingbtn.label=app.getLang("确认（{0}s）",battle.BattleConst.BATTLE_RESULT_CLOSE_TIME-t)}else{Laya.timer.clear(this,this.loopFreshTime);app.ViewManager.toggleDialog(e,-1,0)}};e.SINGLE_KEY="dailytask.MijingGongTipView";return e}(ui.jingmigong.tongjicengshuUI);t.MijingGongTipView=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){if(this.boLv&&!this.boBattle){manager.FlowManager.instance.flowByStyle1(app.getLang("dungeon_mjg_tips5"))}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){if(e===void 0){e=true}var i=csv.DungeonProxy.getIns().getMjgCfg(t);var n=app.str2Array(i.level,"-");var r=parseInt(n[0]);var o=parseInt(n[1]);this.boBattle=e;this.boLv=game.Context.isRoleReach(false,r,o);if(this.boLv){this.ditu.gray=!e;this.guishulab.color=this.renshu.color=game.STYLES.GREEN_COLOR_S}else{this.ditu.gray=true;this.guishulab.color=this.renshu.color=game.STYLES.RED_COLOR_S}this.nianfen.text=app.getLang("迷镜宫{0}层",Math.ceil(i.id/20));this.renshu.text=app.getLang("至少{0}个角色达到",r);this.guishulab.text=csv.ReBirthProxy.getIns().getLvlDes(o)+app.getLang("级")};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.dituxuanzhong.visible=true;this.ditu.visible=false}else{this.dituxuanzhong.visible=false;this.ditu.visible=true}};e.SINGLE_KEY="dailytask.MijingGongTypeView";return e}(ui.jingmigong.jingmigongitem1UI);t.MijingGongTypeView=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boGuide=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.DailyTaskModel.getIns();this.list=new component.SimpleGroupList;this.list.groupRender=i.MijingGongTypeView;this.list.itemRender=i.MijingGongSubTypeView;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.list.boChange=false;this.addChild(this.list);this.list.width=this.xiala.width;this.list.height=this.xiala.height;this.list.x=this.xiala.x;this.list.y=this.xiala.y;game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.MIJINGGONG,[this.btnrule,this.shuoming]);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.MJG_BATTLE,this,this.getGuideItem)};t.prototype.getGuideItem=function(){this.boGuide=true;var t=csv.DungeonProxy.getIns().getMjgShowArr();var e=0;var i;for(var n=0,r=t.length;n<r;n++){var o=t[n];if(!game.Context.isRoleReach(false,o.level)){break}e=n;i=o}this._selectDex=e;var a=t.concat();this.list.dataSource=a;this.list.selectedIndex=e;this.list.scrollToIndex(e);return this.list.getSubItem(i.id,i).jinrubtn};t.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource,this._selectDex==e)};t.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this.boGuide=false};t.prototype.refreshAll=function(){app.ProtocolRequest.MissPalaceReq();this.callLater(this.fillPanel)};t.prototype.fillPanel=function(){if(this.boGuide){return}var t=csv.DungeonProxy.getIns().getMjgShowArr();var e=0;for(var i=0,n=t.length;i<n;i++){var r=t[i];if(!game.Context.isRoleReach(false,r.level)){break}e=i}this._selectDex=e;var o=t.concat();this.list.dataSource=o;this.list.selectedIndex=e;this.list.scrollToIndex(e)};t.SINGLE_KEY="dailytask.MijingGongView";return t}(ui.jingmigong.jingmigongviewUI);i.MijingGongView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqianwangjihuo.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){shop.ShopModel.getIns().openChongZhiShop();app.ViewManager.toggleDialog(i.ShenweiTipView,-1)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.SINGLE_KEY="dailytask.ShenweiTipView";return e}(ui.jingmigong.jingmigonghulushenweitipUI);i.ShenweiTipView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._openWeekMap={};t._openTimesMap={};return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){var t=app.Config.getResById("activityfunction.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray();this.typeMap={};for(var e=0,i=this.cfgArr.length;e<i;e++){var n=this.cfgArr[e];var r=parseInt(n.type);if(!this.typeMap[r]){this.typeMap[r]=[]}this.typeMap[r].push(n)}t=app.Config.getResById("rankingawardgeneral.csv");this.shouhuhuluMap=t.getMapList("type")};t.prototype.getCfg=function(t){return this.cfgMap[t]};t.prototype.getArr=function(){return this.cfgArr};t.prototype.getTypeArr=function(t){return this.typeMap[t]};t.prototype.getOpenWeek=function(t){if(!this._openWeekMap[t]){var e=this.getTypeArr(t);var i=[];for(var n=0,r=e.length;n<r;n++){var o=e[n];if(o.date==""){i=[1,2,3,4,5,6,7];break}else{var a=app.str2Array(o.date,";");for(var s=0;s<a.length;s++){var l=parseInt(a[s]);if(i.indexOf(l)==-1){i.push(l)}}}}this._openWeekMap[t]=i}return this._openWeekMap[t]};t.prototype.checkIsNoticeTime=function(t){this.createOpenTimes(t);var e=util.TimeUtil.getDay();if(e==0){e=7}var i=(e-1)*86400+game.Context.getTodayPassSecond();var n=this._openTimesMap[t][0];return i<n};t.prototype.createOpenTimes=function(t){if(!this._openTimesMap[t]){var e=[];var i=this.getTypeArr(t);for(var n=0,r=i.length;n<r;n++){var o=[];var a=i[n];var s=void 0;if(a.date==""){o=[1,2,3,4,5,6,7]}else{var l=app.str2Array(a.date,";");for(var u=0;u<l.length;u++){var p=parseInt(l[u]);s=Boolean(p==u);if(o.indexOf(p)==-1){o.push(p)}}}var h=app.str2Array(a.opentime,"-");var c=parseInt(h[0])*3600+parseInt(h[1])*60+parseInt(h[2]);for(var f=0,g=o.length;f<g;f++){e.push((o[f]-1)*86400+c)}}e.sort(function(t,e){return t-e});this._openTimesMap[t]=e}};t.prototype.getNextOpenTime=function(t){var e=util.TimeUtil.getDay();if(e==0){e=7}var i=(e-1)*86400+game.Context.getTodayPassSecond();this.createOpenTimes(t);for(var n=0,r=this._openTimesMap[t].length;n<r;n++){var o=this._openTimesMap[t][n];if(i<=o){return o-i}}return this._openTimesMap[t][0]+86400*7-i};t.prototype.getOpenTime=function(t){var e=0;var i=this.getTypeArr(t);for(var n=0;n<i.length;n++){var r=i[n];var o=app.str2Array(r.opentime,"-");e=game.Context.getServerZeroTime()+parseInt(o[0])*3600+parseInt(o[1])*60+parseInt(o[2])}return e};t.prototype.getCloseTime=function(t){var e=0;var i=this.getTypeArr(t);for(var n=0;n<i.length;n++){var r=i[n];var o=app.str2Array(r.closetime,"-");e=game.Context.getServerZeroTime()+parseInt(o[0])*3600+parseInt(o[1])*60+parseInt(o[2])}return e};t.prototype.getOpenDay=function(t){var e=0;var i=this.getTypeArr(t);for(var n=0;n<i.length;n++){var r=i[n];e=r.openday}return e};Object.defineProperty(t.prototype,"isShowActOpenTip",{get:function(){if(csv.MapProxy.isFuncMap()){return true}return false},enumerable:true,configurable:true});t.prototype.isInArea=function(t,e){var i=false;var n=this.getCfg(t);if(parseInt(n.map)==game.Context.mainRole.mapId){if(n.mapregion==""){i=true}else{if(!e){e=game.Context.mainRole}var r=app.str2Array(n.mapregion,";","-");var o=Math.min(r[0][0],r[1][0]);var a=Math.max(r[0][0],r[1][0]);var s=Math.min(r[0][1],r[1][1]);var l=Math.max(r[0][1],r[1][1]);if(e.posX>=o&&e.posX<=a&&e.posY>=s&&e.posY<=l){i=true}}}return i};t.SINGLE_KEY="csv.ActivityFunction";t.ENUM={PAO_DIAN:1,DA_TI:2,CHUAN_GONG:3,JIAO_SHUI:4,SHOU_HU:5,MO_BAI:6,HU_LU_DAO:7,YAO_WANG_FIGHT:8,HULU_PICk:9,GUILD_BOSS:10,KUAFU_BOSS:11};return t}(app.ModelBase);t.ActivityFunction=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(o){var t=function(e){__extends(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;t._boDatiShow=false;t.totalExp=0;t.endTime=0;t._answerList=[];t.correctArr=[];t._lotteryList=[];t.lotteryEndTime=0;t._kungfuTime=0;t.kungfuList=[];t.kungfuTargetName="";return t}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.init=function(){game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.onMapInfoChange);var t=game.Config.getParams(game.ConfigID.ANSWER_LOTTER);this.joinLotteryNum=parseInt(app.str2Array(t,";")[1])};r.prototype.onMapInfoChange=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(t!=csv.MapProxy.MAP_TYPE.HOME){game.Context.off(game.ContextEvent.LEAD_ROLE_MOVE_END,this,this.onActivityCheck);o.DailyTaskModel.getIns().off(o.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onActivityCheck)}else{game.Context.on(game.ContextEvent.LEAD_ROLE_MOVE_END,this,this.onActivityCheck);o.DailyTaskModel.getIns().on(o.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onActivityCheck)}this.onActivityCheck()};r.prototype.onActivityCheck=function(){if(this.checkIfBubble()){app.ViewManager.toggleView(o.BubbleExpView,app.AppContainer.uiBottomLayer,1);app.ProtocolRequest.HomeBubbleDataReq()}else{app.ViewManager.toggleView(o.BubbleExpView,app.AppContainer.uiBottomLayer,-1)}if(this.checkIfOpenDati()){app.ProtocolRequest.HomeQuestionReq();main.MainUIOtherIcon.addRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.DATI)}else{main.MainUIOtherIcon.removeRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.DATI)}if(this.checkIfOpenKungfu()){app.ProtocolRequest.HomeKungDataReq()}};r.prototype.checkIfBubble=function(){var t=false;var e=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(e==csv.MapProxy.MAP_TYPE.HOME){var i=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.PAO_DIAN);if(i&&csv.ActivityFunction.getIns().isInArea(i.id)){t=true}}this.event(r.BUBBLE_OPEN_CHANGE);return t};r.prototype.checkIfShowBubble=function(t){var e=false;var i=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(i==csv.MapProxy.MAP_TYPE.HOME){var n=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.PAO_DIAN);if(n&&csv.ActivityFunction.getIns().isInArea(n.id,t)){e=true}}return e};r.prototype.checkIfOpenDati=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(t==csv.MapProxy.MAP_TYPE.HOME){var e=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.DA_TI);if(e){if(csv.ActivityFunction.getIns().isInArea(parseInt(e.id))){return true}}}this._boDatiShow=false;return false};r.prototype.checkIfOpenKungfu=function(){var t=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.CHUAN_GONG);if(t){if(csv.ActivityFunction.getIns().isInArea(parseInt(t.id))){return true}}return false};r.prototype.checkIfOpenMobai=function(){var t=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.MO_BAI);if(t){if(csv.ActivityFunction.getIns().isInArea(parseInt(t.id))){return true}}return false};r.prototype.showAnswerView=function(){var t=this.getAnswer();if(t){app.ViewManager.toggleDialog(o.AnswerView,1,0)}else{app.ViewManager.toggleDialog(o.AnswerLotteryView,1,0)}};r.prototype.checkKungFuOpen=function(){var t=false;if(this.kungfuTime>=1){return false}var e=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(e==csv.MapProxy.MAP_TYPE.HOME){t=this.checkIfOpenKungfu()}return t};r.prototype.checkKungFuRed=function(){return Boolean(this.kungfuTime<=0)};r.prototype.dellBubbleInfo=function(t){if(t){this.totalExp=t.totalExp.toNumber();this.endTime=t.EndTime}else{this.totalExp=0;this.endTime=0}this.event(r.BUBBLE_EXP_CHANGE)};r.prototype.setCorrectArr=function(t){var e=this._answerList.length;for(var i=0;i<e;i++){var n=Boolean((t>>i&1)==1);this.correctArr.push(n)}};r.prototype.dellCorrect=function(t){if(t==1){var e=this.getAnswer();var i=this._answerList.indexOf(e);this.correctArr[i]=true}this.event(r.ANSWER_CORRECT)};r.prototype.getCorrectNum=function(){var t=0;for(var e=0,i=this.correctArr.length;e<i;e++){if(this.correctArr[e]){t++}}return t};r.prototype.dellAnswer=function(t){this._answerList=t;this.event(r.ANSWER_CHANGE);if(!this._boDatiShow){this.showAnswerView();this._boDatiShow=true}};r.prototype.getAnswerLen=function(){return this._answerList.length};r.prototype.getAnswer=function(){var t;var e=game.Context.getServerTime();for(var i=0,n=this._answerList.length;i<n;i++){var r=this._answerList[i];if(e<r.nextTime){t=r;break}}return t};r.prototype.getAnswerCorrect=function(t){var e=this.getAnswerIndex(t);return this.correctArr[e]};r.prototype.getAnswerIndex=function(t){return this._answerList.indexOf(t)};r.prototype.dellLottery=function(t,e){this._lotteryList=t;this.lotteryEndTime=e;this.event(r.LOTTERY_CHANGE)};r.prototype.getLotteryByIndex=function(t){var e;for(var i=0,n=this._lotteryList.length;i<n;i++){var r=this._lotteryList[i];if(r.index==t){e=r}}return e};r.prototype.getLotteryDex=function(t){return this._lotteryList.indexOf(t)};r.prototype.getLottery=function(){return this._lotteryList};Object.defineProperty(r.prototype,"kungfuTime",{get:function(){return this._kungfuTime},set:function(t){this._kungfuTime=t;this.event(r.KUNGFU_TIME_CHANGE)},enumerable:true,configurable:true});r.prototype.dellKungfuList=function(t){this.kungfuList=t;this.event(r.KUNGFU_LIST_CHANGE)};r.prototype.delteKungFuId=function(t){for(var e=0,i=this.kungfuList.length;e<i;e++){var n=this.kungfuList[e];if(Uint64.equal(n.playerID,t)){this.kungfuList.splice(e,1);break}}this.event(r.KUNGFU_LIST_CHANGE)};r.prototype.getKungfuList=function(){return this.kungfuList};Object.defineProperty(r.prototype,"boKungfu",{get:function(){return Boolean(this.kungfuList.length>0)},enumerable:true,configurable:true});Object.defineProperty(r.prototype,"kungfuRoleId",{get:function(){return this._kungfuRoleId},enumerable:true,configurable:true});r.prototype.startKungFu=function(t,e,i){this._kungfuRoleId=t;this.kungfuTargetName=i;if(e){var n=scene.SceneMediator.getInstance().findPath(game.Context.mainRole.posX,game.Context.mainRole.posY,e.pX,e.pY);if(n.length>1){n.pop();if(n.length>1){n.pop()}}role.LeadingRoleView.getIns().movePath(n,Laya.Handler.create(this,function(){app.ProtocolRequest.HomeStartKungReq(t)}),1)}game.SceneModel.createAllScreenSp(game.SceneModel.ENUM_ALL_SCREEN.KUNGFU,0,app.AppContainer.talkLayer)};Object.defineProperty(r.prototype,"mobaicount",{set:function(t){this._mobaicount=t;var e=false;var i=o.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.MO_BAI);if(i){if(this._mobaicount<i.param2){e=true}}if(e){main.MainUIOtherIcon.addRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.MOBAI)}else{main.MainUIOtherIcon.removeRed(main.MainUIOtherIcon.Enum_OTHER_FUNC.MOBAI)}},enumerable:true,configurable:true});r.SINGLE_KEY="dailytask.BubbleModel";r.BUBBLE_OPEN_CHANGE="bubble_open_change";r.BUBBLE_EXP_CHANGE="bubble_exp_change";r.ANSWER_CHANGE="answer_change";r.ANSWER_CORRECT="answer_correct";r.LOTTERY_CHANGE="lottery_change";r.KUNGFU_TIME_CHANGE="kungfu_time_change";r.KUNGFU_LIST_CHANGE="kungfu_list_change";return r}(app.ModelBase);o.BubbleModel=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("questions.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray();var e=app.Config.getResById("questions_lottery.csv");this.lotteryMap=e.getMap("id");this.lotteryArr=e.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getArr=function(){return this.cfgArr};e.prototype.getLotteryCfg=function(t){return this.lotteryMap[t]};e.prototype.getLotteryArr=function(){return this.lotteryArr};e.prototype.getRareRwds=function(){if(!this._rareRwds){this._rareRwds=[];for(var t=0,e=this.lotteryArr.length;t<e;t++){var i=this.lotteryArr[t];if(i.type=="1"){this._rareRwds.push(i)}}}return this._rareRwds};e.SINGLE_KEY="csv.BubbleProxy";return e}(app.ModelBase);t.BubbleProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(n){var t=function(e){__extends(p,e);function p(){var t=e!==null&&e.apply(this,arguments)||this;t.waits=[];t._aid=0;t._actnum=0;t._tasks=[];t._gotAwards=[];t._openActivityList=[];t.ssslKillNumMap={};t._mjgId=1;t._taskMainId=1;t._braveChallengeId=1;t._eliteChallengeId=1;t._inspiresMap={};t.cdMap={};t.actpoint=0;t._findResMap={};t.boFindFirst=true;return t}p.getIns=function(){return app.Singleton.getInstance(p)};p.prototype.init=function(){};p.prototype.updataDailyRed=function(){var t=this.getAwardRed();if(!t){t=this.getTypeRed(csv.DailyTaskProxy.ENUM_TYPE.DAILY)}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_TASK)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DAILY_TASK)}};p.prototype.updataFightRed=function(){if(this.getTypeRed(csv.DailyTaskProxy.ENUM_TYPE.FIGHT)){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_FIGHT)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DAILY_FIGHT)}};p.prototype.updataLimteRed=function(){if(this.getTypeRed(csv.DailyTaskProxy.ENUM_TYPE.LIMIT)){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_LIMIT)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DAILY_LIMIT)}};p.prototype.addDailyShowRed=function(){var t=game.Context.getServerTime();var e=game.SystemSetModel.getInstance().settingData.data;if(!e[game.SettingType.actShowRed]){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_SHOW);game.SystemSetModel.getInstance().setValueByType(t,game.SettingType.actShowRed)}else{var i=game.Context.getServerZeroTime()+5*3600;if(t>=i){if(i>e[game.SettingType.actShowRed]){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_SHOW);game.SystemSetModel.getInstance().setValueByType(t,game.SettingType.actShowRed)}}else{if(i-e[game.SettingType.actShowRed]>util.TimeUtil.secOneDay){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_SHOW);game.SystemSetModel.getInstance().setValueByType(t,game.SettingType.actShowRed)}}}};p.prototype.removeDailyShowRed=function(){game.SystemSetModel.getInstance().setValueByType(game.Context.getServerTime(),game.SettingType.actShowRed);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DAILY_SHOW)};p.prototype.getTypeRed=function(t){var e=csv.DailyTaskProxy.getIns().getTypeArr(t);for(var i=0,n=e.length;i<n;i++){var r=e[i];if(r.function&&!csv.FunctionsProxy.getIns().isOpen(r.function)){continue}if(this.getActRed(r)){return true}if(t==csv.DailyTaskProxy.ENUM_TYPE.LIMIT){if(this.getActivityRedByType(r.function)){return true}}}return false};p.prototype.sortTypeArr=function(t,e){var i=p.getIns().getActRed(t);var n=p.getIns().getActRed(e);if(i&&n||!i&&!n){var r=parseInt(t.order);var o=parseInt(e.order);if(r>o){return 1}else if(r<o){return-1}else{return 0}}else if(i){return-1}else if(n){return 1}};p.prototype.vanSort3=function(t){t.sort(function(t,e){if(t!=e){if(t.order<e.order){return-1}if(t.order>e.order){return 1}}});var e=[];var i=[];var n=[];var r=[];for(var o=0;o<t.length;o++){var a=t[o];var s=csv.ActivityFunction.getIns().getTypeArr(a.function)[0];if(game.Context.isRoleReach(false,s.role,s.lv)){if(this.isItemAct(a)){if(+a.endshow==0){n.push(a)}else{r.push(a)}}else{e.push(a)}}else{i.push(a)}}return e.sort(this.sortTypeArr).concat(n).concat(r).concat(i)};p.prototype.vanSort=function(t){t.sort(function(t,e){if(t!=e){if(t.order<e.order){return-1}if(t.order>e.order){return 1}}});var e=[];var i=[];var n=[];var r=[];for(var o=0;o<t.length;o++){var a=t[o];if(csv.FunctionsProxy.getIns().isOpen(a.function)){if(this.isItemAct(a)){if(+a.endshow==0){n.push(a)}else{r.push(a)}}else{e.push(a)}}else{i.push(a)}}return e.sort(this.sortTypeArr).concat(n).concat(r).concat(i)};p.prototype.vanSort2=function(t){var e=[];var i=[];var n=[];var r=[];var o=[];var a=[];for(var s=0;s<t.length;s++){var l=t[s];if(csv.FunctionsProxy.getIns().isOpen(l.function)){var u=this.getTask(l.type);var p=parseInt(l.activity_max)/parseInt(l.activity);if(u&&u.actnum<p&&u.dnum>u.actnum){a.push(l)}else{if(l.endshow==0){r.push(l)}else{o.push(l)}}}else{i.push(l)}}return a.concat(e.sort(this.sortTypeArr)).concat(n).concat(r).concat(o).concat(i)};p.prototype.isItemAct=function(t){var e=t.type;var i=this.getTask(e);var n=0;if(i){n=i.actnum}var r=n*t.activity;if(r>=t.activity_max){return true}else{return false}};Object.defineProperty(p.prototype,"aid",{get:function(){return this._aid},set:function(t){this._aid=t;this.event(p.DAILY_ACT_TOWER_AWARD_UPDATE)},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"actnum",{get:function(){return this._actnum},set:function(t){this._actnum=t;this.event(p.DAILY_ACT_NUM_CHANGE);this.updataDailyRed()},enumerable:true,configurable:true});p.prototype.getTask=function(t){var e;for(var i=0,n=this._tasks.length;i<n;i++){var r=this._tasks[i];if(r.dtype==t){e=r;break}}return e};p.prototype.dellTask=function(t){this._tasks=t;this.event(p.DAILY_TASK_CHANGE);this.updataDailyRed();this.updataFightRed();this.updataLimteRed()};p.prototype.changeTask=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];var r=false;for(var o=0,a=this._tasks.length;o<a;o++){var s=this._tasks[o];if(n.dtype==s.dtype){s.actnum=n.actnum;s.dnum=n.dnum;r=true;break}}if(!r){this._tasks.push(n)}var l=csv.DailyTaskProxy.getIns().getActTypeCfg(n.dtype);if(l){var u=parseInt(l.subtype);if(u==csv.DailyTaskProxy.ENUM_TYPE.DAILY){this.updataDailyRed()}else if(u==csv.DailyTaskProxy.ENUM_TYPE.FIGHT){this.updataFightRed()}else if(u==csv.DailyTaskProxy.ENUM_TYPE.LIMIT){this.updataLimteRed()}}else{console.error("changeTask >>>> type:%s不存在",n.dtype)}}this.event(p.DAILY_TASK_CHANGE);this.updataDailyRed();this.updataFightRed();this.updataLimteRed()};p.prototype.getActRed=function(t){var e=this.getTask(parseInt(t.type));var i=parseInt(t.activity_max)/parseInt(t.activity);if(e&&e.actnum<i&&e.dnum>e.actnum){return true}return false};p.prototype.getAwardRed=function(){var t=false;var e=csv.DailyTaskProxy.getIns().getRwdArr();var i=e.length;for(var n=0;n<i;n++){var r=e[n];var o=parseInt(r.activity);if(this.actnum<o){continue}if(this.checkAwardGet(parseInt(r.id))){continue}t=true;break}return t};p.prototype.dellAward=function(t){this._gotAwards=t;this.event(p.DAILY_AWARD_CHANGE);this.updataDailyRed()};p.prototype.checkAwardGet=function(t){if(this._gotAwards.indexOf(t)!=-1){return true}return false};p.prototype.setOpenActivity=function(t){guide.GuideModel.getIns().off(guide.GuideModel.SUPER_GUIDE_STATE_CHANGE,this,this.setOpenActivity);var e=[];for(var i=0,n=t.length;i<n;i++){if(this._openActivityList.indexOf(t[i])==-1){e.push(t[i])}}this._openActivityList=t;for(var i=0,n=e.length;i<n;++i){var r=e[i];this.showTip(r,t)}this.updataLimteRed();this.event(p.OPEN_ACTIVITY_CHANGE)};p.prototype.showTip=function(t,e){var i=csv.ActivityFunction.getIns().getCfg(t);if(!game.Context.isTeamLvReach(i.teamlevel,false)){return}if(i.type==csv.ActivityFunction.ENUM.HULU_PICk&&!hulupick.HuluPickModel.getIns().isShowHuluPickRedDot()){return}if(i.type==csv.ActivityFunction.ENUM.GUILD_BOSS&&!guildboss.GuildBossModel.getIns().isShowNoticeIcon()){return}if(i&&i.popup=="0"){if(i.mapregion==""||!csv.ActivityFunction.getIns().isInArea(t)){if(!guide.GuideModel.getIns().isSuperGuide){this.addActivity(i)}else{guide.GuideModel.getIns().on(guide.GuideModel.SUPER_GUIDE_STATE_CHANGE,this,this.setOpenActivity,[e])}}}if(i.type==csv.ActivityFunction.ENUM.MO_BAI){app.ProtocolRequest.HomeWorshipInfoReq()}if(i.type==csv.ActivityFunction.ENUM.KUAFU_BOSS){boss.BossModel.getIns().initKuafuInfo()}};p.prototype.sortHandler=function(t,e){if(t.priority>e.priority){return-1}if(t.priority<e.priority){return 1}return 0};p.prototype.addCycleActivity=function(t){if(!t)return;game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.onMapChange);this.waits.push(t);this.waits.sort(this.sortHandler);this.showActFuncView()};p.prototype.addActivity=function(t){game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.onMapChange);this.waits.push(t);this.waits.sort(this.sortHandler);this.showActFuncView()};p.prototype.onMapChange=function(){if(!csv.ActivityFunction.getIns().isShowActOpenTip){app.ViewManager.toggleView(n.ActivityFuncOpenView,app.AppContainer.uiLayer,-1)}else{this.showActFuncView()}};p.prototype.showActFuncView=function(){if(csv.ActivityFunction.getIns().isShowActOpenTip){if(!app.ViewManager.DisplayedInStage(n.ActivityFuncOpenView.SINGLE_KEY)){app.ViewManager.toggleView(n.ActivityFuncOpenView,app.AppContainer.uiLayer,1)}}else{app.ViewManager.toggleView(n.ActivityFuncOpenView,app.AppContainer.uiLayer,-1)}};p.prototype.gotoActivity=function(t,e){if(e===void 0){e=false}var i=csv.MapProxy.getIns().getCfg(game.Context.mainRole.mapId);if(i.type==csv.MapProxy.MAP_TYPE.HOME||i.type==csv.MapProxy.MAP_TYPE.GUAJI){if(e){if(t.type==csv.CycleActivityFunction.ENUM.GUILD_PK){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_PK)}}else{if(t.type==csv.ActivityFunction.ENUM.PAO_DIAN){role.LeadingRoleView.getIns().aiActMove(t)}else if(t.type==csv.ActivityFunction.ENUM.SHOU_HU){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.SHOUHU_HULU)}else if(t.type==csv.ActivityFunction.ENUM.CHUAN_GONG){role.LeadingRoleView.getIns().aiActMove(t)}else if(t.type==csv.ActivityFunction.ENUM.HU_LU_DAO){app.ViewManager.toggleDialog(guardisland.ShouhuhuludaoView,1,1)}else if(t.type==csv.ActivityFunction.ENUM.HULU_PICk){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.HULU_PICK)}else if(t.type==csv.ActivityFunction.ENUM.YAO_WANG_FIGHT){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.YAO_WANG_BOSS)}else if(t.type==csv.ActivityFunction.ENUM.GUILD_BOSS){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILDBOSS)}else if(t.type==csv.ActivityFunction.ENUM.KUAFU_BOSS){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.BOSS_KUAFU)}}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("当前正在副本中，退出副本才能前往"))}};p.prototype.getOpenActivityList=function(){return this._openActivityList};p.prototype.checkIfActivityOpen=function(t){return Boolean(this._openActivityList.indexOf(t)!=-1)};p.prototype.getOpenActivityByType=function(t){var e;var i=csv.ActivityFunction.getIns().getTypeArr(t);if(i){for(var n=0,r=i.length;n<r;n++){var o=parseInt(i[n].id);if(this.checkIfActivityOpen(o)){e=i[n];break}}}return e};p.prototype.gotoByType=function(t){var e=n.DailyTaskModel.getIns().getOpenActivityByType(t);if(e){Laya.Dialog.closeAll();n.DailyTaskModel.getIns().gotoActivity(e)}else{manager.FlowManager.instance.flowByStyle1("活动未开始")}};p.prototype.getActivityRedByType=function(t){var e=false;var i=this.getOpenActivityByType(t);if(i){if(i.type==csv.ActivityFunction.ENUM.CHUAN_GONG){if(n.BubbleModel.getIns().checkKungFuRed()){e=true}}else{e=true}}return e};Object.defineProperty(p.prototype,"mjgId",{get:function(){return this._mjgId},set:function(t){if(t==0){t=1}this._mjgId=t;this.event(p.MJG_ID_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"taskMainId",{get:function(){return this._taskMainId},set:function(t){this._taskMainId=t;this.event(p.TASK_MAIN_ID_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"braveChallengeId",{get:function(){return this._braveChallengeId},set:function(t){this._braveChallengeId=t;this.event(p.BRAVE_CHALLENGE_ID_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"eliteChallengeId",{get:function(){return this._eliteChallengeId},set:function(t){this._eliteChallengeId=t;this.event(p.ELITE_CHALLENGE_ID_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"boElitePass",{get:function(){return this._eliteChallengeId>=csv.DungeonProxy.getIns().eliteMax},enumerable:true,configurable:true});p.prototype.dellInspire=function(t,e){this._inspiresMap[t]=e;boss.BossModel.getIns().event(boss.BossEvent.INSPIRE_CHANGE)};p.prototype.getInspire=function(t){return this._inspiresMap[t]||[]};p.prototype.dellGuildInspire=function(t){this._guildInspire=t;boss.BossModel.getIns().event(boss.BossEvent.INSPIRE_CHANGE)};p.prototype.getGuildInspire=function(){return this._guildInspire||[]};p.prototype.setCds=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];this.cdMap[n.flag]=n}this.event(p.DAILY_CD_CHANGE)};p.prototype.getCds=function(t){return this.cdMap[t]};p.prototype.setFindRes=function(t,e){this.actpoint=t;for(var i=0,n=e.length;i<n;i++){var r=e[i];this._findResMap[r.acttype]=r.findbacktime}this.event(p.FIND_RES_CHANGE);this.updataFindRed()};p.prototype.getFindTime=function(t){return this._findResMap[t]|0};p.prototype.updataFindRed=function(){if(this.boFindFirst){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DAILY_REFIND)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DAILY_REFIND)}};p.prototype.clearFindRed=function(){this.boFindFirst=false;game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DAILY_REFIND)};p.SINGLE_KEY="dailytask.DailyTaskModel";p.DAILY_ACT_NUM_CHANGE="daily_act_num_change";p.DAILY_TASK_CHANGE="dailyt_task_change";p.DAILY_AWARD_CHANGE="dailyt_award_change";p.OPEN_ACTIVITY_CHANGE="open_activity_change";p.OPEN_CYCLE_ACTIVITY_CHANGE="open_cycle_activity_change";p.DAILY_CD_CHANGE="daily_cd_change";p.FIND_RES_CHANGE="find_res_change";p.MJG_ID_CHANGE="mjg_id_change";p.MJG_EXP_CHANGE="mjg_exp_change";p.TASK_MAIN_ID_CHANGE="task_main_id_change";p.BRAVE_CHALLENGE_ID_CHANGE="brave_challenge_id_change";p.ELITE_CHALLENGE_ID_CHANGE="elite_challenge_id_change";p.DAILY_ACT_TOWER_AWARD_UPDATE="tower_award_update";p.ENUM_CD={CD_SSSL:1,CD_JJC:2};return p}(app.ModelBase);n.DailyTaskModel=t;var e=function(){function t(){}t.buyTime=function(t){var e=boss.BossModel.getIns().getDailyTime(t);var i=e.fnum+e.gnum;var n=csv.DailyTimeProxy.getIns().getCfg(t);var r=csv.DailyTimeProxy.getIns().buytime(t);var o=0;if(e){switch(t){case csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP:if(i<=0){o=e.bnum;if(o>=r){manager.FlowManager.instance.flowByStyle1(app.getLang("challenge_02"));return}}else{app.ProtocolRequest.SweepEliteChallengeReq();return}break;case csv.DailyTimeProxy.ENUM_TYPE.NINE_TOWER:var a=tower.TowerMonsterModel.getIns().canFreeScouring();if(a==0){manager.FlowManager.instance.flowByStyle1(app.getLang("no_record"));return}var s=tower.TowerMonsterModel.getIns().getAwards();if(s.length==0){manager.FlowManager.instance.flowByStyle1(app.getLang("challenge_05"));return}var l;if(i<=0){o=e.bnum;if(o>=r){manager.FlowManager.instance.flowByStyle1(app.getLang("challenge_02"));return}if(o>=r){l=csv.DailyTimeProxy.getIns().buycost(csv.DailyTimeProxy.ENUM_TYPE.NINE_TOWER,r)}else{l=csv.DailyTimeProxy.getIns().buycost(csv.DailyTimeProxy.ENUM_TYPE.NINE_TOWER,o+1)}if(!game.GridsModel.getIns().hasEnoughItems(l[0]+"-"+l[1],false,true)){return}}if(a<0){var u=csv.ItemProxy.getName(l[0]);game.Alert.show(app.getLang("jiuchongyaota_des1",l[1],u),Laya.Handler.create(this,function(){app.ProtocolRequest.SweepNineTowerReq()}))}else{app.ProtocolRequest.SweepNineTowerReq()}return;default:if(i>=parseInt(n.time)){manager.FlowManager.instance.flowByStyle1(app.getLang("次数已满"));return}o=e.bnum;if(o>=r){manager.FlowManager.instance.flowByStyle1(app.getLang("今日购买次数已满"));return}}}var p=csv.DailyTimeProxy.getIns().buycost(t,o+1);var h=csv.ItemProxy.getName(p[0]);var c=game.GridsModel.getIns().getItemCount(p[0]);if(c<p[1]){manager.FlowManager.instance.flowByStyle1(app.getLang("item_not_enough",h));return}switch(t){case csv.DailyTimeProxy.ENUM_TYPE.ELITE_SWEEP:game.Alert.show(app.getLang("是否花费{0}{1}扫荡？",p[1],h),Laya.Handler.create(this,function(){app.ProtocolRequest.SweepEliteChallengeReq()}));break;default:app.ProtocolRequest.BuyBossDailyReq(t)}};t.checkTime=function(t,e){if(e===void 0){e=false}var i=boss.BossModel.getIns().getDailyTime(t);var n=i.fnum+i.gnum;if(n>0){return true}if(e){manager.FlowManager.instance.flowByStyle1(app.getLang("次数不足，请先购买"))}return false};t.checkDailyTime=function(t,e,i,n){if(n===void 0){n=0}var r=boss.BossModel.getIns().getDailyTime(t);var o=0;if(n){o=fabaonew.FaBaoNewModel.getIns().getPlayMode(n);o-=r.extnum}if(o<0){o=0}var a=r.fnum+r.gnum+o;if(a){i&&i.run()}else{var s=csv.DailyTimeProxy.getIns().buytime(t);if(!s){game.RoleModel.getIns().buyVip();return}if(r.bnum>=s){if(vipcode.VipModel.getIns().vipLvl>=csv.VipProxy.getIns().maxVip){game.Alert.show(app.getLang("shandong_error3"))}else{game.RoleModel.getIns().buyVip()}return}var l=csv.DailyTimeProxy.getIns().buycost(t,r.bnum+1);if(l){if(e){var u=app.getLang("shanzhong_tips6",s-r.bnum,s,l[0],l[1]);game.Alert.show(u,Laya.Handler.create(this,this.onBuy,[t,l[0],l[1],i]),new Laya.Handler)}else{game.Alert.show(app.getLang("shanshen_tips7",l[0],l[1]),Laya.Handler.create(this,this.onBuy,[t,l[0],l[1],i]),new Laya.Handler)}}}};t.onVip=function(){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.VIP)};t.onBuy=function(t,e,i,n){if(game.GridsModel.getIns().getItemCount(e)>=i){boss.BossModel.getIns().onBuyTimesReq(t);n&&n.run()}else{shop.ShopModel.getIns().askChongZhi()}};return t}();n.DailyTimeUtil=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("activity.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray();this.typeMap={};this.actMap={};for(var e=0,i=this.cfgArr.length;e<i;e++){var n=this.cfgArr[e];var r=parseInt(n.subtype);if(!this.typeMap[r]){this.typeMap[r]=[]}this.typeMap[r].push(n);this.actMap[parseInt(n.type)]=n}this.initRwd();this.initActShow()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getActTypeCfg=function(t){return this.actMap[t]};e.prototype.getTypeArr=function(t){var e=this.typeMap[t]||[];var i=[];for(var n=0;n<e.length;n++){var r=e[n];var o=csv.ActivityFunction.getIns().getCfg(r.function);var a=true;if(o){var s=o.closeday||0;if(s!=0&&game.Context.getOpenServerDay()>o.closeday){a=false}}if(a){i.push(r)}}return i};e.prototype.initRwd=function(){var t=app.Config.getResById("activityaward.csv");this.rwdMap=t.getMap("id");this.rwdArr=t.getArray()};e.prototype.getRwdArr=function(){return this.rwdArr};e.prototype.initFindRes=function(){var t=app.Config.getResById("retrieve.csv");this.findMap=t.getMap("type");this.findArr=t.getArray();SortUtil.sortOnArr(this.findArr,["order"],[SortUtil.NUMERIC])};e.prototype.getFindRes=function(t){return this.findMap[t]};e.prototype.getFindArr=function(){var t=[];for(var e=0;e<this.findArr.length;e++){var i=this.findArr[e];if(csv.FunctionsProxy.getIns().isOpen(i.function)){t.push(i)}}return t};e.prototype.initActShow=function(){var t=app.Config.getResById("activityforecast.csv");this.showMap=t.getMap("id");t=app.Config.getResById("activityforecasttime.csv");this.weekArr=t.getArray();this.weekMap={};this.dayMap={};for(var e=0,i=this.weekArr.length;e<i;e++){var n=this.weekArr[e];this.weekMap[n.id]=n;for(var r=1;r<=7;r++){if(!this.dayMap[r]){this.dayMap[r]=[]}this.dayMap[r].push(n["week"+r])}}};e.SINGLE_KEY="csv.DailyTaskProxy";e.ENUM_TYPE={DAILY:1,FIGHT:2,LIMIT:3};e.ENUM_ACTIVITY_TYPE={SSSL:1,MJG:2,JJC:3,STREN:4,YEWAI:5,WORLD:6,DENGLU:8,SKILL:9,PICK:11,PAODIAN:12,ELITE:13,BRAVE:14,MOUNTAIN:15,SHHL:16,YAODONG:17,SZJD:18,JCYT:19,HLD:20,ZJQW:21,KUNGFU:22};return e}(app.ModelBase);t.DailyTaskProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.initSssl();this.initMjg();this.initZxrw();this.initBrave();this.initElite();this.initTrans();this.initSzjd();this.initCwmj()};e.prototype.initSssl=function(){var t=app.Config.getResById("dungeon_sssl.csv");this.ssslMap=t.getMap("id");this.ssslArr=t.getArray()};e.prototype.getSsslCfg=function(t){return this.ssslMap[t]};e.prototype.getSsslArr=function(){return this.ssslArr};e.prototype.canSsslSweep=function(t,e){var i=false;var n=this.getSsslCfg(t);var r=app.str2Array(n.grade_num,";","-");for(var o=0,a=r.length;o<a;o++){var s=r[o];var l=parseInt(s[0]);if(e>=l){if(o==a-1){i=true}}else{break}}return i};e.prototype.getScore=function(t,e){var i=this.getSsslCfg(t);var n="";var r=app.str2Array(i.grade_num,";","-");for(var o=0,a=r.length;o<a;o++){var s=r[o];var l=parseInt(s[0]);if(e>=l){n=s[1]}else{break}}return n};e.prototype.getNextScore=function(t,e){var i=this.getSsslCfg(t);var n=[];var r=app.str2Array(i.grade_num,";","-");for(var o=0,a=r.length;o<a;o++){var s=r[o];var l=parseInt(s[0]);if(e<l){n=s;break}else{if(o==a-1){n=s}}}return n};e.prototype.initMjg=function(){var t=app.Config.getResById("dungeon_mjg.csv");this.mjgMap=t.getMap("id");this.mjgTypeArr=[];this.mjgArr={};this.mjgShowArr=[];var e=t.getArray();for(var i=0,n=e.length;i<n;i++){var r=e[i];if(this.mjgTypeArr.indexOf(r.level)==-1){this.mjgTypeArr.push(r.level)}if(!this.mjgArr[r.level]){this.mjgArr[r.level]=[];this.mjgShowArr.push(r)}this.mjgArr[r.level].push(r)}};e.prototype.getMjgCfg=function(t){return this.mjgMap[t]};e.prototype.getMjgShowArr=function(){return this.mjgShowArr};e.prototype.getLevelMjgArr=function(t){return this.mjgArr[t]};e.prototype.initZxrw=function(){var t=app.Config.getResById("dungeon_zxrw.csv");this.zxrwMap=t.getMap("id");this.zxrwArr=t.getArray();this.zxrwTypeMap=t.getMap("type","id");this.zxrwTypeArr=t.getArray();this.maxOpenNum=this._getMaxOpenNum()};e.prototype.getZxrwCfg=function(t){return this.zxrwMap[t]};e.prototype.getZxrwArr=function(e){return this.zxrwArr.filter(function(t){return t.chapter==e})};e.prototype.getZxrwTypeCfg=function(t,e){return this.zxrwTypeMap[t][e]};e.prototype.getZxrwTypeArr=function(e,i){return this.zxrwTypeArr.filter(function(t){return t.type==e&&t.chapter==i})};e.prototype._getMaxOpenNum=function(){for(var t=0;t<this.zxrwArr.length;t++){if(this.zxrwArr[t].type==2){return this.zxrwArr[t].id}}};e.prototype.initBrave=function(){var t=app.Config.getResById("bravechallenge.csv");this.braveMap=t.getMap("id");this.braveArr=t.getArray()};e.prototype.getBraveCfg=function(t){return this.braveMap[t]};e.prototype.getBraveShowAward=function(t){var e=game.ItemUtil.createVO(8003);e.setCount(t.monsterexp);var i=game.ItemUtil.parserList(t.award_item);i.push(e);return i};e.prototype.getBraveLen=function(){return this.braveArr.length};e.prototype.getBraveArr=function(t,e){var i=this.braveArr.length;var n=[];var r=t+e>i?i:t+e;for(var o=t;o<r;o++){n.push(this.braveArr[o])}if(n.length==0){n.push(this.braveArr[i-1])}return n};e.prototype.checkNextBraveBattle=function(t){var e=this.getBraveCfg(t+1);if(e){if(game.Context.isRoleReach(false,e.level)){return true}}return false};e.prototype.initElite=function(){var t=app.Config.getResById("elitechallenge.csv");this.eliteMap=t.getMap("id");this.eliteArr=t.getArray();this.eliteMax=this.eliteArr.length};e.prototype.getEliteCfg=function(t){return this.eliteMap[t]};e.prototype.getEliteArr=function(t){var e=t+1;var i=this.eliteMax;var n=[];var r;if(e>=i-3){r=i-3}else{r=e-2;if(r<0){r=0}}for(var o=r;o<r+3;o++){n.push(this.eliteArr[o])}return n};e.prototype.checkNextEliteBattle=function(t){var e=this.getEliteCfg(t+1);if(e){if(game.Context.isRoleReach(false,e.level)){return true}}return false};e.prototype.initTrans=function(){var t=app.Config.getResById("transfermap.csv");this.transMap=t.getMap("id");this.transArr=t.getArray()};e.prototype.getTransCfg=function(t){return this.transMap[t]};e.prototype.initSzjd=function(){var t=app.Config.getResById("dungeon_szjd.csv");this.szjdMap=t.getMap("id");this.szjdArr=t.getArray()};e.prototype.getSzjdCfg=function(t){return this.szjdMap[t]};e.prototype.getSzjdArr=function(){return this.szjdArr};e.prototype.getSzjdMaxStep=function(t){var e=this.getSzjdCfg(t);var i=1;if(e){while(e["step"+i]){i+=1}}return i-1};e.prototype.getSzjdScore=function(t,e){var i;var n=this.getSzjdCfg(t);var r=app.str2Array(n.timeshow,";","-");for(var o=0,a=r.length;o<a;o++){var s=r[o];var l=parseInt(s[0]);if(e>l){continue}i=s;break}return i};e.prototype.getSzjdScoreStr=function(t){var e=this.getSzjdCfg(1);var i=app.str2Array(e.timeshow,";","-");return i[t-1][1]};e.prototype.initCwmj=function(){var t=app.Config.getResById("dungeon_cwmj.csv");this.cwmjMap=t.getMap("id");this.cwmjArr=t.getArray()};e.prototype.getCwmjCfg=function(t){return this.cwmjMap[t]};e.prototype.getCwmjArr=function(){return this.cwmjArr};e.SINGLE_KEY="csv.DungeonProxy";e.GRADE={1:"SSS",2:"SS",3:"S",4:"A"};return e}(app.ModelBase);t.DungeonProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.gradeMap={};t._subStepDex=0;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){this.subStepHandler=new Laya.Handler(this,this.playSubStep)};Object.defineProperty(i.prototype,"szjdStage",{get:function(){return this._szjdStage},enumerable:true,configurable:true});i.prototype.setSzjdInfo=function(t){console.log("setSzjdInfo",t);this.szjdStartTime=t.starttime;this.szjdStep=t.step;this.sweepId=this._szjdStage=t.stage;var e=csv.DungeonProxy.getIns().getSzjdCfg(this._szjdStage);if(game.Context.mainRole.mapId!=e.mapid){battle.BattleModel.getIns().battleType=battle.BattleConst.BATTLE_TYPE.DUNGEON_SZJD;game.Context.mainRole.mapId=e.mapid;game.Context.event(game.ContextEvent.CHANGE_MAP,e.mapid);game.Context.on(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.createLeadRole);scene.SceneMediator.getInstance().initScene(e.mapid)}else{this.playStep()}this.event(i.SZJD_STEP_CHANG)};i.prototype.createLeadRole=function(){game.Context.off(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.createLeadRole);var t=csv.DungeonProxy.getIns().getSzjdCfg(this.szjdStage);var e=this.szjdStep+1;var i=t["step"+e];if(!i){return}var n=t["coord"+e];var r=app.str2Array(n,";");var o=parseInt(r[0]);var a=parseInt(r[1]);var s=parseInt(r[2]);var l=game.Context.battleRoleList.length;var u=[];var p=0;for(var h=0;h<l;h++){var c=game.Context.battleRoleList[h];c.boShowHp=true;c.boShowMp=true;c.zuoqiId=0;if(c.boRemoteHero){u.push(c);p++}else{u.unshift(c)}}var f=game.SceneModel.getRolePosList(o,a,s);f=game.SceneModel.lineUpTeam(l,p,f);for(var h=0;h<l;h++){var c=u[h];var g=scene.SceneMediator.getInstance().getViewById(c.insId);var d=f[h];c.pos=d.pos;g=battle.BattleManager.getIns().createRole(c,d.pX,d.pY,d.pDir);g.clearAll();g.initHeadHpMp(false,false);g.refreshView();game.Context.setRoleHp(c.insId)}};Object.defineProperty(i.prototype,"szjdStep",{get:function(){return this._szjdStep},set:function(t){this._szjdStep=t},enumerable:true,configurable:true});i.prototype.playStep=function(){var t=csv.DungeonProxy.getIns().getSzjdCfg(this.szjdStage);var e=this.szjdStep+1;var i=t["step"+e];console.log(i);if(!i){return}this._subStepArr=app.str2Array(i,";","-");var n=false;for(var r=0,o=this._subStepArr.length;r<o;r++){var a=this._subStepArr[r];if(a[0]=="2"){n=true}else if(a[0]=="1"){talk.TalkModel.getIns().createPlotid(a[1])}}if(!n){this._subStepDex=0;this.playSubStep()}};i.prototype.playSubStep=function(){var t=this._subStepArr[this._subStepDex];if(!t){console.log("DgnSzjdStepReq",this.szjdStep+1);app.ProtocolRequest.DgnSzjdStepReq(this.szjdStep+1);return}this._subStepDex++;if(t[0]=="1"){talk.TalkModel.getIns().createPlotid(t[1]);talk.TalkModel.getIns().callBack=this.subStepHandler;talk.TalkModel.getIns().event(talk.TalkModel.STORY_TIGGER,csv.StoriesProxy.ENUM_TIGGER.STEP_SZJD)}else if(t[0]=="3"){this.roleMove(t[1],t[2])}};i.prototype.roleMove=function(t,e){var i=game.Context.battleRoleList.length;var n=[];var r=0;for(var o=0;o<i;o++){var a=game.Context.battleRoleList[o];a.boShowHp=true;a.boShowMp=true;a.zuoqiId=0;if(a.boRemoteHero){n.push(a);r++}else{n.unshift(a)}}var s=game.SceneModel.getRolePosList(t,e);s=game.SceneModel.lineUpTeam(i,r,s);var l;var u;var p;for(var o=0;o<i;o++){var a=n[o];var h=scene.SceneMediator.getInstance().getViewById(a.insId);if(h){l=h.roleVO.posX;u=h.roleVO.posY;p=h.roleVO.dir;h.roleVO.hp=h.roleVO.maxhp}}for(var o=0;o<i;o++){var a=game.Context.battleRoleList[o];var h=scene.SceneMediator.getInstance().getViewById(a.insId);if(!h){h=battle.BattleManager.getIns().createRole(a,l,u,p)}else{h.clearAll();h.initHeadHpMp()}h.refreshView();game.Context.setRoleHp(a.insId)}this.moveNum=0;for(var o=0;o<i;o++){var a=game.Context.battleRoleList[o];var c=s[o];a.pos=c.pos;var h=scene.SceneMediator.getInstance().getViewById(a.insId);var f=new role.PosMoveAction;f.char=h;f.target=isometric.IsoUtils.isoToScreen(new isometric.Point3D(c.pX*32,0,c.pY*32));h.vo.dir=game.SceneModel.getDirByTowPos(h.vo.posX,h.vo.posY,c.pX,c.pY);f.completeHandler=Laya.Handler.create(this,this.onMoveEnd,[h]);h.setMoveAction(f)}};i.prototype.onMoveEnd=function(t){this.moveNum++;t.vo.dir=4;t.updataMount();if(this.moveNum>=game.Context.battleRoleList.length){this.playSubStep()}};i.SINGLE_KEY="dailytask.ShanzhongJiudieModel";i.SZJD_STEP_CHANG="szjd_step_change";return i}(app.ModelBase);t.ShanzhongJiudieModel=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("endless.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray();this.maxRound=this.cfgArr.length;var e=app.Config.getResById("endlessjump.csv");this.jumpMap=e.getMap("id");var i=e.getArray();this.jumpArr=[];for(var n=0,r=i.length;n<r;n++){var o=i[n];var a=app.str2Array(o.second,"-");var s=parseInt(a[0]);var l=parseInt(a[1]);var u=parseInt(o.pass);this.jumpArr.push([s,l,u])}};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getArr=function(){return this.cfgArr};e.prototype.getJump=function(t,e){var i="";for(var n=0,r=this.jumpArr.length;n<r;n++){var o=this.jumpArr[n];var a=o[0];var s=o[1];var l=o[2];if(t>=a&&t<=s){var u=e+l;if(u>this.maxRound){u=this.maxRound}i=app.getLang("endless_3",s,u);break}if(n==r-1){var u=e+l;if(u>this.maxRound){u=this.maxRound}i=app.getLang("endless_3",s,u)}}return i};e.prototype.checkIfJump=function(t){return Boolean(this.maxRound>t)};e.SINGLE_KEY="csv.YaoDongProxy";return e}(app.ModelBase);t.YaoDongProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist2.itemRender=grids.GridView;this.gezilist2.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.gezilist2,this,96,10);this.gezilist2.scrollRectOffX=10;this.gezilist2.scrollRectOffY=10;this.jinrubtn.on(Laya.Event.CLICK,this,this.onClick);this.jiabtn.on(Laya.Event.CLICK,this,this.onAdd)};e.prototype.onAdd=function(){app.ViewManager.toggleDialog(boss.BossBuyTimeTips,1,0,[csv.DailyTimeProxy.ENUM_TYPE.SSSL,"shandong_tips9","shandong_tips10"])};e.prototype.onClick=function(){if(battle.BattleModel.getIns().checkBattleState(true)){return}s.DailyTimeUtil.checkDailyTime(csv.DailyTimeProxy.ENUM_TYPE.SSSL,this.boSweep,Laya.Handler.create(this,this.onHandler),fabaonew.Etask_type.SsslSweepCount)};e.prototype.onHandler=function(){if(this.boSweep){app.ProtocolRequest.SSSSSweapReq(this.dataSource.id)}else{app.ProtocolRequest.JoinMountGodReq(this.dataSource.id)}};e.prototype.onDisplay=function(){s.DailyTaskModel.getIns().on(s.DailyTaskModel.DAILY_CD_CHANGE,this,this.loopCd);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){s.DailyTaskModel.getIns().off(s.DailyTaskModel.DAILY_CD_CHANGE,this,this.loopCd);Laya.timer.clear(this,this.loopCd)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=0;var i=csv.DailyTimeProxy.getIns().getCfg(csv.DailyTimeProxy.ENUM_TYPE.SSSL);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslSweepCount);var r=i.time+n;if(csv.DailyTimeProxy.getIns().isCanBuy(csv.DailyTimeProxy.ENUM_TYPE.SSSL)){this.jiabtn.visible=true;var o=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.SSSL);if(o){n-=o.extnum;if(n<0){n=0}e=o.fnum+o.gnum+n}}else{this.jiabtn.visible=false}this.cishushuzhi.text=e+"/"+r;this.centerLayout.array=game.ItemUtil.parserList(t.award_item);var a=t.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslNeedLevel);if(game.Context.isTeamLvReach(a,false)){this.startCd();this.boSweep=csv.DungeonProxy.getIns().canSsslSweep(t.id,s.DailyTaskModel.getIns().ssslKillNumMap[t.id]|0);if(this.boSweep){this.jinrubtn.label=app.getLang("shanshen_btn2")}else{this.jinrubtn.label=app.getLang("shanshen_btn1")}}else{this.jinrubtn.disabled=true}};e.prototype.startCd=function(){Laya.timer.loop(1e3,this,this.loopCd);this.loopCd()};e.prototype.loopCd=function(){var t=s.DailyTaskModel.getIns().getCds(s.DailyTaskModel.ENUM_CD.CD_SSSL);if(t){var e=t.endTime-game.Context.getServerTime();if(e>0){this.daojishilab.text=util.TimeUtil.formatTime(e,false);if(t.cdlimit==1){this.jinrubtn.disabled=true;this.daojishilab.color=game.STYLES.RED_COLOR_S}else{this.jinrubtn.disabled=false;this.daojishilab.color=game.STYLES.GREEN_COLOR_S}}else{Laya.timer.clear(this,this.loopCd);this.daojishilab.text="";this.jinrubtn.disabled=false;this.daojishilab.color=game.STYLES.GREEN_COLOR_S}}else{this.jinrubtn.disabled=false;this.daojishilab.color=game.STYLES.GREEN_COLOR_S;Laya.timer.clear(this,this.loopCd);this.daojishilab.text=""}};e.SINGLE_KEY="dailytask.ShanshenShilianSubTypeView";return e}(ui.shanshenshilian.shanshenshilianitem2UI);s.ShanshenShilianSubTypeView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=csv.DungeonProxy.getIns().getSsslCfg(t);var n=i.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslNeedLevel);if(t<e){this.renshu.color=game.STYLES.GREEN_COLOR_S;if(o.DailyTaskModel.getIns().ssslKillNumMap[i.id]!=null||o.DailyTaskModel.getIns().ssslKillNumMap[i.id]!=undefined){var r=csv.DungeonProxy.getIns().getScore(i.id,o.DailyTaskModel.getIns().ssslKillNumMap[i.id]);this.pingji.skin="res/static/bg_pingji"+r+".png";if(csv.DungeonProxy.getIns().canSsslSweep(i.id,o.DailyTaskModel.getIns().ssslKillNumMap[i.id]|0)){this.ditu.gray=true;this.mouseEnabled=false;this.renshu.text=app.getLang("shanshen_tips5")}else{this.ditu.gray=false;this.mouseEnabled=true;this.renshu.text=game.Context.getTeamLvLimitDes(n)}}else{this.pingji.skin="";this.ditu.gray=false;this.mouseEnabled=true;this.renshu.text=game.Context.getTeamLvLimitDes(n)}}else if(t==e){this.ditu.gray=false;this.mouseEnabled=true;this.renshu.color=game.STYLES.GREEN_COLOR_S;this.renshu.text=game.Context.getTeamLvLimitDes(n);if(o.DailyTaskModel.getIns().ssslKillNumMap[i.id]!=null||o.DailyTaskModel.getIns().ssslKillNumMap[i.id]!=undefined){var r=csv.DungeonProxy.getIns().getScore(i.id,o.DailyTaskModel.getIns().ssslKillNumMap[i.id]);this.pingji.skin="res/static/bg_pingji"+r+".png"}else{this.pingji.skin=""}}else{this.ditu.gray=false;this.mouseEnabled=false;this.renshu.color=game.STYLES.RED_COLOR_S;this.renshu.text=game.Context.getTeamLvLimitDes(n);this.pingji.skin=""}this.nianfen.text=app.getLang("shanshen_tips0",i.id);if(o.FubenModel.getIns().checkIfNewId(csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN,i.id)){game.RedDotView.addTo(this,this.width-5,5,1,1,1)}else{game.RedDotView.removeFrom(this)}};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.dituxuanzhong.visible=true;this.ditu.visible=false}else{this.dituxuanzhong.visible=false;this.ditu.visible=true}};e.SINGLE_KEY="dailytask.ShanshenShilianTypeView";return e}(ui.shanshenshilian.shanshenshilianitem1UI);o.ShanshenShilianTypeView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.DailyTaskModel.getIns();this.list=new component.SimpleGroupList;this.list.groupRender=i.ShanshenShilianTypeView;this.list.itemRender=i.ShanshenShilianSubTypeView;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.addChild(this.list);this.list.width=this.xiala.width;this.list.height=this.xiala.height;this.list.x=this.xiala.x;this.list.y=this.xiala.y;game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN,[this.btnrule,this.shuoming]);var t=app.str2Array(game.Config.getParams(1004),";");this._upCount=parseInt(t[0]);this._downCount=parseInt(t[1]);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.SSSL_FIGHT,this,this.getGuideItem,300)};t.prototype.getGuideItem=function(t){var e=0;var i=csv.DungeonProxy.getIns().getSsslArr();var n=i.length;for(var r=1;r<n;r++){var o=i[r];var a=o.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslNeedLevel);if(game.Context.isTeamLvReach(a,false)){e=r}else{break}}var s=e-this._upCount;var l=e+1+this._downCount;s=s<0?0:s;l=l>n?n:l;var u=[];for(var r=s;r<l;r++){u.push(i[r])}var p=0;var h;for(var r=0,c=u.length;r<c;r++){var o=u[r];var a=o.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslNeedLevel);if(game.Context.isTeamLvReach(a,false)){p=r;h=o}else{break}}this.list.dataSource=u;this.list.selectedIndex=p;this.list.scrollToIndex(p);return this.list.getSubItem(h.id,h).jinrubtn};t.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource,this.reachId)};t.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);i.FubenModel.getIns().setBoNew(csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN,false)};t.prototype.refreshAll=function(){var t=0;var e=csv.DungeonProxy.getIns().getSsslArr();var i=e.length;for(var n=1;n<i;n++){var r=e[n];var o=r.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslNeedLevel);if(game.Context.isTeamLvReach(o,false)){t=n}else{break}}var a=t-this._upCount;var s=t+1+this._downCount;a=a<0?0:a;s=s>i?i:s;var l=[];for(var n=a;n<s;n++){l.push(e[n])}var u=0;this.reachId=0;for(var n=0,p=l.length;n<p;n++){var r=l[n];var o=r.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslNeedLevel);if(game.Context.isTeamLvReach(o,false)){u=n;this.reachId=r.id}else{break}}this.list.dataSource=l;this.list.selectedIndex=u;this.list.scrollToIndex(u)};t.SINGLE_KEY="dailytask.ShanshenShilianView";return t}(ui.shanshenshilian.shanshenshilianviewUI);i.ShanshenShilianView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=dailytask.ShanzhongJiudieModel.getIns();this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-main.MainBottomView.HEIGHT-chat.ChatMiniView.HEIGHT-30-this.height-ScreenAdapter.OFFSET_BOTTOM};e.prototype.onDisplay=function(){this._model.on(dailytask.ShanzhongJiudieModel.SZJD_STEP_CHANG,this,this.startLoopTime);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(dailytask.ShanzhongJiudieModel.SZJD_STEP_CHANG,this,this.startLoopTime);Laya.timer.clear(this,this.loopFreshTime)};e.prototype.refreshAll=function(){var t=csv.DungeonProxy.getIns().getSzjdCfg(this._model.szjdStage);this._maxTime=t.maxtime;this.startLoopTime()};e.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=game.Context.getServerTime()-this._model.szjdStartTime-game.Config.getIntParams(380);if(t>this._maxTime){Laya.timer.clear(this,this.loopFreshTime);t=this._maxTime}else if(t<0){t=0}var e=csv.DungeonProxy.getIns().getSzjdScore(this._model.szjdStage,t);this.shalab.text=app.getLang("{0}秒内通关可保{1}评价",e[0],e[1]);this.miaoshulab.text=app.getLang("已用时:{0}秒",t);this.score.value=e[1]};e.SINGLE_KEY="battle.ShanzhongJiudieScoreView";e.H=107;return e}(ui.bosszhandou.pingjiaUI);t.ShanzhongJiudieScoreView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=dailytask.ShanzhongJiudieModel.getIns();this.x=Laya.stage.width-this.width;this.y=60+ScreenAdapter.OFFSET_Y};e.prototype.onDisplay=function(){this._model.on(dailytask.ShanzhongJiudieModel.SZJD_STEP_CHANG,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(dailytask.ShanzhongJiudieModel.SZJD_STEP_CHANG,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this._model.szjdStep+1;var e=csv.DungeonProxy.getIns().getSzjdMaxStep(this._model.szjdStage);if(t>e){t=e}this.lbljindu.text=app.getLang("szjd_tips1",t,e);this.lbldes.text=app.getLang("szjd_step"+t)};e.SINGLE_KEY="battle.ShanzhongJiudieStepView";e.WIDTH=240;return e}(ui.bosszhandou.fubenjinduUI);t.ShanzhongJiudieStepView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(l){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist2.itemRender=grids.GridRateView;this.gezilist2.renderHandler=new Laya.Handler(this,this.onRender);this.gezilist2.scrollRectOffX=200;this.gezilist2.scrollRectOffY=100;this.centerLayout=new game.CenterLayoutMediator(this.gezilist2,this,100,this.gezilist2.spaceX);this.jinrubtn.on(Laya.Event.CLICK,this,this.onClick);this.jiabtn.on(Laya.Event.CLICK,this,this.onAdd);this.rateLimits=app.str2Array(game.Config.getParams(1236),";")};e.prototype.onRender=function(t,e){var i=-1;var n="";if(this.rates[e]!=""){i=parseInt(this.rates[e]);var r=fabaonew.FaBaoNewModel.getIns().getPlayModeLv(fabaonew.Etask_type.LihuoDropRate);if(r!=""){var o=app.str2Array(r,"-");i+=parseInt(o[0])/100}for(var a=0,s=this.rateLimits.length;a<s;a++){var l=parseInt(this.rateLimits[a]);var u=parseInt(this.rateLimits[a+1]);if(!isNaN(u)){if(i>=l&&i<u){n=app.getLang("lihuogailv_tips"+(a+1));break}}else if(i>=l){n=app.getLang("lihuogailv_tips"+(a+1));break}}}t.setData(t.dataSource,i,n)};e.prototype.onAdd=function(){app.ViewManager.toggleDialog(boss.BossBuyTimeTips,1,0,[csv.DailyTimeProxy.ENUM_TYPE.SZJD,"shandong_tips9","shandong_tips10"])};e.prototype.onClick=function(){if(battle.BattleModel.getIns().checkBattleState(true)){return}l.DailyTimeUtil.checkDailyTime(csv.DailyTimeProxy.ENUM_TYPE.SZJD,this.boSweep,Laya.Handler.create(this,this.onHandler),fabaonew.Etask_type.SzjdSweepCount)};e.prototype.onHandler=function(){l.ShanzhongJiudieModel.getIns().sweepId=this.dataSource.id;if(this.boSweep){app.ProtocolRequest.SweepDgnSzjdReq()}else{app.ProtocolRequest.DgnSzjdReq()}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.rates=app.str2Array(t.awardprop,";");var e=0;var i=csv.DailyTimeProxy.getIns().getCfg(csv.DailyTimeProxy.ENUM_TYPE.SZJD);var n=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SzjdSweepCount);var r=i.time+n;if(csv.DailyTimeProxy.getIns().isCanBuy(csv.DailyTimeProxy.ENUM_TYPE.SZJD)){this.jiabtn.visible=true;var o=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.SZJD);if(o){n-=o.extnum;if(n<0){n=0}e=o.fnum+o.gnum+n}}else{this.jiabtn.visible=false}this.cishushuzhi.text=e+"/"+r;this.centerLayout.array=game.ItemUtil.parserList(t.award_item);var a=t.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SzjdNeedLevel);if(game.Context.isTeamLvReach(a,false)){this.jinrubtn.gray=false;var s=l.ShanzhongJiudieModel.getIns().gradeMap[t.id];this.boSweep=s==1;if(this.boSweep){this.jinrubtn.label=app.getLang("shanshen_btn2")}else{this.jinrubtn.label=app.getLang("shanshen_btn1")}}else{this.jinrubtn.gray=true}};e.SINGLE_KEY="dailytask.ShanzhongJiudieSubTypeView";return e}(ui.shanzhongjiudie.shanzhongjiudieitem2UI);l.ShanzhongJiudieSubTypeView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=csv.DungeonProxy.getIns().getSzjdCfg(t);var n=i.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SzjdNeedLevel);if(t<e){this.ditu.gray=true;this.renshu.color=game.STYLES.GREEN_COLOR_S;this.renshu.text=app.getLang("shanshen_tips5");var r=a.ShanzhongJiudieModel.getIns().gradeMap[i.id];if(r){var o=csv.DungeonProxy.GRADE[r];this.pingji.skin="res/static/bg_pingji"+o+".png"}else{this.pingji.skin=""}}else if(t==e){this.ditu.gray=false;this.renshu.color=game.STYLES.GREEN_COLOR_S;this.renshu.text=game.Context.getTeamLvLimitDes(n);var r=a.ShanzhongJiudieModel.getIns().gradeMap[i.id];if(r){var o=csv.DungeonProxy.GRADE[r];this.pingji.skin="res/static/bg_pingji"+o+".png"}else{this.pingji.skin=""}}else{this.ditu.gray=true;this.renshu.color=game.STYLES.RED_COLOR_S;this.renshu.text=game.Context.getTeamLvLimitDes(n);this.pingji.skin=""}this.nianfen.text=app.getLang("shanzhong_tips1",i.id);if(a.FubenModel.getIns().checkIfNewId(csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE,i.id)){game.RedDotView.addTo(this,this.width-5,5,1,1,1)}else{game.RedDotView.removeFrom(this)}};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.dituxuanzhong.visible=true;this.ditu.visible=false}else{this.dituxuanzhong.visible=false;this.ditu.visible=true}};e.SINGLE_KEY="dailytask.ShanzhongJiudieTypeView";return e}(ui.shanzhongjiudie.shanzhongjiudieitem1UI);a.ShanzhongJiudieTypeView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.DailyTaskModel.getIns();this.list=new component.SimpleGroupList;this.list.groupRender=i.ShanzhongJiudieTypeView;this.list.itemRender=i.ShanzhongJiudieSubTypeView;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="id";this.list.boOpenOne=true;this.list.onlyOpenSelectIndex=true;this.addChild(this.list);this.list.width=this.xiala.width;this.list.height=this.xiala.height;this.list.x=this.xiala.x;this.list.y=this.xiala.y;game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE,[this.btnrule,this.shuoming]);var t=app.str2Array(game.Config.getParams(1010),";");this._upCount=parseInt(t[0]);this._downCount=parseInt(t[1])};t.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource,this.reachId)};t.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.refreshAll);i.FubenModel.getIns().setBoNew(csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE,false)};t.prototype.refreshAll=function(){var t=0;var e=csv.DungeonProxy.getIns().getSzjdArr();var i=e.length;for(var n=1;n<i;n++){var r=e[n];var o=r.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SzjdNeedLevel);if(game.Context.isTeamLvReach(o,false)){t=n}else{break}}var a=t-this._upCount;var s=t+1+this._downCount;a=a<0?0:a;s=s>i?i:s;var l=[];for(var n=a;n<s;n++){l.push(e[n])}var u=0;this.reachId=0;for(var n=0,p=l.length;n<p;n++){var r=l[n];var o=r.teamlevel-fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SzjdNeedLevel);if(game.Context.isTeamLvReach(o,false)){u=n;this.reachId=r.id}else{break}}this.list.dataSource=l;this.list.selectedIndex=u;this.list.scrollToIndex(u)};t.SINGLE_KEY="dailytask.ShanzhongJiudieView";return t}(ui.shanzhongjiudie.shanzhongjiudieviewUI);i.ShanzhongJiudieView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(r){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.needCloseTick=0;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnshiyong.label=app.getLang("clickgo");this.btnshiyong.on(Laya.Event.CLICK,this,this.onClick);this.btnclose.on(Laya.Event.CLICK,this,this.onClose);this.zOrder=app.AppContainer.UI_LAYER_NUME.TOP};i.prototype.onResize=function(){this.x=(Laya.stage.width-this.width)/2;this.y=Laya.stage.height-this.height-main.NewItemView.OFFSET_Y};i.prototype.onClose=function(){this.waits.shift();this.dellView()};i.prototype.dellView=function(){if(this.waits.length==0){var t=r.DailyTaskModel.getIns();game.Context.off(game.ContextEvent.CHANGE_MAP,t,t.onMapChange);app.ViewManager.toggleView(i,app.AppContainer.uiLayer,-1)}else{this.refreshAll()}};i.prototype.onClick=function(){if(this.waits[0]){r.DailyTaskModel.getIns().gotoActivity(this.waits[0],this.waits[0].cycle==1)}this.onClose()};i.prototype.onDisplay=function(){this.onResize();guide.GuideModel.getIns().boOpen=false;r.DailyTaskModel.getIns().on(r.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onChange);this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){guide.GuideModel.getIns().boOpen=true;Laya.timer.clear(this,this.updateTime);r.DailyTaskModel.getIns().off(r.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onChange);this.clearAni()};i.prototype.clearAni=function(){this.zhunbeizhong.stop();this.jinxingzhong.stop();this.zhunbeizhong.visible=false;this.jinxingzhong.visible=false};i.prototype.updateTime=function(){if(this.needCloseTick<0){this.onClose();return}this.needCloseTick--;Laya.timer.once(1e3,this,this.updateTime)};i.prototype.refreshAll=function(){this.clearAni();if(this.waits&&this.waits.length>0){var t=this.waits[0];this.rukou.skin=t.icon;this.wenben.text=app.getLang(t.tips);this.needCloseTick=0;Laya.timer.clear(this,this.updateTime);var e=false;var i=void 0;if(t.cycle==1){var n=t.desc.split(";");var r=guild.GuildPkModel.getIns().curStatus();if(r==guild.EGuildPkStatus.iS_PREPARING){e=true;i=n[0]}else if(r==guild.EGuildPkStatus.RUNNING){i=n[1]}else if(r==guild.EGuildPkStatus.END){this.onClose();return}this.needCloseTick=guild.GuildPkModel.getIns().getCloseTime();Laya.timer.once(1e3,this,this.updateTime)}else{i=t.desc}if(e){this.zhunbeizhong.play(0,true);this.zhunbeizhong.visible=true}else{this.jinxingzhong.play(0,true);this.jinxingzhong.visible=true}this.labelname.text=i}};i.prototype.onChange=function(){var t=[];for(var e=0,i=this.waits.length;e<i;e++){var n=this.waits[e];if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.GUILD_PK)&&n.cycle){t.push(n)}else{if(r.DailyTaskModel.getIns().checkIfActivityOpen(n.id)){t.push(n)}}}r.DailyTaskModel.getIns().waits=t;this.dellView()};Object.defineProperty(i.prototype,"waits",{get:function(){return r.DailyTaskModel.getIns().waits},enumerable:true,configurable:true});i.SINGLE_KEY="dailytask.ActivityFuncOpenView";return i}(ui.main.huodongkaiqitixingUI);r.ActivityFuncOpenView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var s=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.timelist.itemRender=n;this.timelist.renderHandler=new Laya.Handler(this,this.onRender1);this.missionlist.itemRender=r;this.missionlist.renderHandler=new Laya.Handler(this,this.onRender2);this.chankanbtn.clickHandler=new Laya.Handler(this,this.onCheck)};e.prototype.onRender1=function(t,e){t.setData(t.dataSource)};e.prototype.onRender2=function(t,e){t.setData(t.dataSource)};e.prototype.onCheck=function(){if(this.showEle.checktime&&!this.inTime){manager.FlowManager.instance.flowByStyle1(app.getLang("activityforecast_01",this.showEle.desc));return}if(this.showEle.checkguide){if(!guild.GuildModel.getIns().isGuild){manager.FlowManager.instance.flowByStyle1(app.getLang("activityforecast_02"));return}var t=guild.GuildModel.getIns().guildVO.guildInf.level;if(this.showEle.checkguide>t){manager.FlowManager.instance.flowByStyle1(app.getLang("activityforecast_03",this.showEle.checkguide));return}}game.ClosureManager.callFunctionByNpcOpen(this.showEle.functionid)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){i.DailyTaskModel.getIns().removeDailyShowRed()};e.prototype.refreshAll=function(){var t=game.Context.getServerZeroTime();var e=new Date(t*1e3).getDay();if(e==0){e=7}var i=[];var n=game.Context.getTodayPassSecond();var r;var o;var a;var s;var l=csv.DailyTaskProxy.getIns().dayMap[e];for(var u=0;u<l.length;u++){var p=l[u];if(p){var h=csv.DailyTaskProxy.getIns().showMap[p];var c=app.str2Array(h.timestart,"-");var f=parseInt(c[0])*3600+parseInt(c[1])*60;var g=app.str2Array(h.timeend,"-");var d=parseInt(g[0])*3600+parseInt(g[1])*60;if(n>=f&&n<=d){i.push(h)}if(!r){r=h;o=f}a=h;s=d}}SortUtil.sortOnArr(i,["weight"],[SortUtil.DESCENDING]);if(i[0]){this.fillBanner(i[0],e,true,true)}else{if(n<o){this.fillBanner(r,e,true,true)}else if(n>s){this.fillBanner(a,e,true,true)}}var y=[];for(var m=1;m<=7;m++){var v=t-util.TimeUtil.secOneDay*(e-m);var b=new Date(v*1e3);var _=b.getMonth()+1;var I=b.getDate();y.push({month:_,day:I,week:m,isToday:m==e})}this.missionlist.array=y;if(e==1){this.missionlist.scrollTo(0)}else{this.missionlist.scrollTo(e-2)}this.timelist.array=csv.DailyTaskProxy.getIns().weekArr};e.prototype.fillBanner=function(t,e,i,n){if(n===void 0){n=false}this.showEle=t;this.showWeek=e;this.guanggaoimg.skin="res/static/huodongyugao/"+t.banner+".png";this.timelab.text=app.getLang(t.desc);var r=app.str2Array(t.timestart,"-");var o=parseInt(r[0])*3600+parseInt(r[1])*60;var a=app.str2Array(t.timeend,"-");var s=parseInt(a[0])*3600+parseInt(a[1])*60;var l=game.Context.getTodayPassSecond();if(i&&l>=o&&l<=s){this.inTime=true;this.chankanbtn.label=app.getLang("activityforecast3")}else{this.inTime=false;this.chankanbtn.label=app.getLang("activityforecast2")}if(!n){this.missionlist.refresh()}};e.SINGLE_KEY="dailytask.ActivityShowView";return e}(ui.huodongyugao.huodongyugaoUI);i.ActivityShowView=s;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(i.DailyTaskItem)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.zhanliminglab.text=t.time.replace("-",":")};e.SINGLE_KEY="dailytask.DailyTaskItem";return e}(ui.huodongyugao.huodongyugaoitem1UI);i.ActivityShowItem1=n;var r=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(i.DailyTaskItem)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnArr=[this.huodongbtn1,this.huodongbtn2,this.huodongbtn3,this.huodongbtn4,this.huodongbtn5,this.huodongbtn6,this.huodongbtn7];for(var t=0;t<7;t++){this.btnArr[t].on(Laya.Event.CLICK,this,this.onClick)}this.btnIds=[]};t.prototype.onClick=function(t){t.stopPropagation();var e=t.target;var i=this.btnIds[this.btnArr.indexOf(e)];s.getIns().fillBanner(i,this.week,this.isToday)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t){this.week=t.week;this.isToday=t.isToday;this.zhouyilab.text=util.TimeUtil.getWeekCn(t.week,true);this.shijianlab.text=t.month+"."+t.day;this.imgToday.visible=t.isToday;var e=csv.DailyTaskProxy.getIns().dayMap[t.week];for(var i=0;i<7;i++){var n=e[i];var r=this.btnArr[i];if(n){var o=csv.DailyTaskProxy.getIns().showMap[n];var a=csv.FunctionsProxy.getIns().getCfg(o.functionid);if(parseInt(a.day)>game.Context.getOpenServerDay()){r.visible=false}else{this.btnIds[i]=o;r.label=app.getLang(o.name);r.visible=true;if(t.week==s.getIns().showWeek&&s.getIns().showEle==o){r.skin="public/btn_orange.png";r.labelColors="#d3762e"}else{r.skin="public/btn_green.png";r.labelColors="#60887e"}}}else{r.visible=false}}};t.SINGLE_KEY="dailytask.DailyTaskItem";return t}(ui.huodongyugao.huodongyugaoitem2UI);i.ActivityShowItem2=r})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this._model=i.DailyTaskModel.getIns()};e.prototype.onClick=function(){var t=this._model.checkAwardGet(parseInt(this.dataSource.id));if(t){var e=game.ItemUtil.parserList(this.dataSource.item)[0];tip.TipManager.show(e)}else{var i=parseInt(this.dataSource.activity);if(this._model.actnum>=i){app.ProtocolRequest.AwardActPointReq(parseInt(this.dataSource.id))}else{var e=game.ItemUtil.parserList(this.dataSource.item)[0];tip.TipManager.show(e)}}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.dataSource=t;this.lblPoint.text=t.activity;var e=game.ItemUtil.parserList(t.item)[0];this.daojuimg.skin=e.getIconUrl();this.shuzhi.text=e.count.toString();var i=this._model.checkAwardGet(parseInt(t.id));this.yilingqu.visible=i;this.animationlingqu.visible=false;this.animationlingqu.stop();if(!i){if(this._model.actnum>=parseInt(t.activity)){this.animationlingqu.visible=true;this.animationlingqu.play()}}};e.SINGLE_KEY="dailytask.DailyRewardItem";return e}(ui.richang.richangitem1UI);i.DailyRewardItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.lingqubtn.on(Laya.Event.CLICK,this,this.onGet);this.btngoto.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.CLICK,this,this.openTipsView);this._model=i.DailyTaskModel.getIns()};e.prototype.onGet=function(t){t.stopPropagation();i.DailyTaskView.getIns().playEff();var e=parseInt(this.dataSource.type);app.ProtocolRequest.AwardDailyActReq(e)};e.prototype.onClick=function(t){t.stopPropagation();var e=parseInt(this.dataSource.function);app.ViewManager.toggleDialog(common.CommonWindow,-1,0);game.ClosureManager.callFunction(e)};e.prototype.openTipsView=function(){app.ViewManager.toggleDialog(i.DailyTaskItemTips,1,0,this._itemData)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.btngoto.gray=false};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.imgtubiao.skin=t.res+".png";this._itemData=t;this.btngoto.disabled=false;this.imgleixing.skin="res/static/huoyue/"+t.res2+".png";if(csv.FunctionsProxy.getIns().isOpen(t.function)){this.kaiqibox.visible=true;this.weikaiqilab.visible=false;var e=t.type;var i=this._model.getTask(e);var n=0;var r=0;if(i){n=i.actnum;r=i.dnum}this.cishulab.text=r+"/"+t.number;var o=n*t.activity;this.huoyuelab.text=app.getLang("活跃：{0}/{1}",o,t.activity_max);var a=parseInt(this.dataSource.activity_max)/parseInt(this.dataSource.activity);if(i&&i.actnum<a&&i.dnum>i.actnum){this.btngoto.visible=false;this.lingqubtn.visible=true;this.wancheng.visible=false;game.RedDotView.addTo(this.lingqubtn)}else{game.RedDotView.removeFrom(this.lingqubtn);if(o>=t.activity_max){if(t.endshow==0){this.wancheng.visible=false;this.btngoto.visible=true}else{this.wancheng.visible=true;this.btngoto.visible=false}}else{this.wancheng.visible=false;this.btngoto.visible=true}this.lingqubtn.visible=false}}else{this.kaiqibox.visible=false;this.weikaiqilab.visible=true;this.weikaiqilab.text=csv.FunctionsProxy.getIns().getOpenNotice(t.function)}};e.SINGLE_KEY="dailytask.DailyTaskItem";return e}(ui.richang.richangitem3UI);i.DailyTaskItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=new Laya.Handler(this,this.onCellHandler);this._model=i.DailyTaskModel.getIns()};e.prototype.onCellHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.setitemLab();this.setRwd()};e.prototype.setitemLab=function(){this.biaotitile.text=app.getLang(this.dataSource.name);var t=app.getLang(this.dataSource.timedes);t+="\n"+app.getLang(this.dataSource.typedes);t+="\n"+app.getLang(this.dataSource.needlvdes);t+="\n"+app.getLang(this.dataSource.contentdes);this.wenben1.text=t};e.prototype.setRwd=function(){var t=app.str2Array(this.dataSource.awardshow,"-");var e=t.shift();if(e=="1"){var i=[];for(var n=0;n<t.length;n++){i.push(game.ItemUtil.parserList(t[n])[0])}this.gezilist.array=i;this.gezilist.scrollTo(0);this.chanchuimg.visible=false;this.gezilist.visible=true}else{this.chanchuimg.skin="res/static/huoyue/"+t[0]+".png";this.chanchuimg.visible=true;this.gezilist.visible=false}};e.SINGLE_KEY="dailytask.DailyTaskItemTips";return e}(ui.richang.richangtipUI);i.DailyTaskItemTips=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.richanglist.itemRender=i.DailyTaskItem;this.richanglist.renderHandler=new Laya.Handler(this,this.onTaskRender);this._model=i.DailyTaskModel.getIns();this.rwdArr=[this.rwd1,this.rwd2,this.rwd3,this.rwd4,this.rwd5];this.guangxiao2.visible=false;guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.DAILY_TASK_ACT_GET,this,this.getGuideItemBtn);csv.OtherFuncOpen.register(this.btnzhanling,csv.FunctionsProxy.ENUMS.ZHAN_LIN_MAIN,true,csv.FunctionsProxy.ENUMS.DAILY_TASK)};e.prototype.getGuideItemBtn=function(){var t=csv.DailyTaskProxy.getIns().getTypeArr(csv.DailyTaskProxy.ENUM_TYPE.DAILY);this.richanglist.array=this._model.vanSort(t);this.richanglist.scrollTo(0);var e=this.richanglist.array[0].type;for(var i=0,n=this.richanglist.cells.length;i<n;i++){var r=this.richanglist.cells[i];if(r&&r.dataSource&&r.dataSource.type==e){return r.lingqubtn}}return null};e.prototype.playEff=function(){this.guangxiao2.visible=true;this.guangxiao2.on(Laya.Event.COMPLETE,this,this.onAniEnd);this.guangxiao2.play()};e.prototype.onAniEnd=function(){this.guangxiao2.visible=false;this.guangxiao2.off(Laya.Event.COMPLETE,this,this.onAniEnd)};e.prototype.onTaskRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(i.DailyTaskModel.DAILY_ACT_NUM_CHANGE,this,this.setRwd);this._model.on(i.DailyTaskModel.DAILY_TASK_CHANGE,this,this.setList);this._model.on(i.DailyTaskModel.DAILY_AWARD_CHANGE,this,this.setRwd);boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setList);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.DailyTaskModel.DAILY_ACT_NUM_CHANGE,this,this.setRwd);this._model.off(i.DailyTaskModel.DAILY_TASK_CHANGE,this,this.setList);this._model.off(i.DailyTaskModel.DAILY_AWARD_CHANGE,this,this.setRwd);boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setList)};e.prototype.refreshAll=function(){this.setList();this.setRwd()};e.prototype.setList=function(){var t=csv.DailyTaskProxy.getIns().getTypeArr(csv.DailyTaskProxy.ENUM_TYPE.DAILY);this.richanglist.array=this._model.vanSort(t);this.richanglist.scrollTo(0)};e.prototype.setRwd=function(){var t=csv.DailyTaskProxy.getIns().getRwdArr();var e=t.length;var i=0;var n=this.jindutiao.width/e;var r=0;for(var o=0;o<e;o++){var a=t[o];var s=parseInt(a.activity);if(this._model.actnum<r){}else{if(this._model.actnum>=s){i+=n;r=s}else{var l=this._model.actnum-r;var u=s-r;var p=l/u;i+=n*p;r=s}}this.rwdArr[o].setData(a)}this.jindutiao.value=i/this.jindutiao.width;this.shuzhi.value=this._model.actnum.toString()};e.SINGLE_KEY="dailytask.DailyTaskView";return e}(ui.richang.richangviewUI);i.DailyTaskView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezilist.itemRender=grids.GridView;this.gezilist.renderHandler=grids.GridView.CommonItemRender;this.xiacengbtn.clickHandler=new Laya.Handler(this,this.onFlyBagItem);this.centerLayout=new game.CenterLayoutMediator(this.gezilist,this,98,20)};e.prototype.onFlyBagItem=function(){this.close()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){if(this.dataSource[0]==csv.DailyTimeProxy.ENUM_TYPE.SSSL){this.tiaozhanlab.text=app.getLang("shanshen_tips2",this.dataSource[1]);this.saodangcishu.text=app.getLang("shanshen_tips3")}else if(this.dataSource[0]==csv.DailyTimeProxy.ENUM_TYPE.SZJD){this.tiaozhanlab.text=app.getLang("shanzhong_tips2",this.dataSource[1]);this.saodangcishu.text=app.getLang("shanzhong_tips3")}this.centerLayout.array=this.dataSource[2]};e.SINGLE_KEY="dailytask.DgnSweepView";return e}(ui.jiesuan.shandongtanbaosaodangjiesuanUI);t.DgnSweepView=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.DailyTaskModel.getIns();this.btngoto.on(Laya.Event.CLICK,this,this.onFind)};e.prototype.onFind=function(){if(this._model.actpoint<this.dataSource.cost){manager.FlowManager.instance.flowByStyle1(app.getLang("retrieve_des4"))}else{app.ViewManager.toggleDialog(i.FindResTip,1,0,this.dataSource)}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.imgtubiao.skin=t.res+".png";this.shilianlab.text=app.getLang(t.name);var e=this._model.getFindTime(t.type);this.cishu.text=app.getLang("retrieve_des1",e);this.huoyuelab.text=app.getLang("retrieve_des5",t.cost);if(e){this.btngoto.gray=false;this.btngoto.mouseEnabled=true}else{this.btngoto.gray=true;this.btngoto.mouseEnabled=false}};e.SINGLE_KEY="dailytask.FindResItem";return e}(ui.ziyuanzhaohui.ziyuanzhaohuiitemUI);i.FindResItem=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.DailyTaskModel.getIns();this._numChoose=new game.NumChoose(this.btnjian,this.btnjia,this.labelshu,this.btnzuida);this._numChoose.on(game.NumChoose.VALUE_CHANGE,this,this.onValueChange);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onQuedingClick);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.onCancelClick)};e.prototype.onQuedingClick=function(){app.ProtocolRequest.ResFindBackReq(this.dataSource.type,this._numChoose.currValue);app.ViewManager.toggleDialog(e,-1,0);manager.FlowManager.instance.flowByStyle1(app.getLang("retrieve_des3",app.getLang(this.dataSource.name),this._numChoose.currValue))};e.prototype.onCancelClick=function(){app.ViewManager.toggleDialog(e,-1,0)};e.prototype.onValueChange=function(){this.labelxiaohaoshu.text=(this._numChoose.currValue*this.dataSource.cost).toString()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this._model.getFindTime(this.dataSource.type);this.dataSource=csv.DailyTaskProxy.getIns().getFindRes(this.dataSource.type);this.label.text=app.getLang("retrieve_des3",app.getLang(this.dataSource.name),t);var e=Math.min(t,Math.floor(this._model.actpoint/this.dataSource.cost));this._numChoose.init(1,1,1,e);this.labelxiaohaoshu.text=this.dataSource.cost.toString()};e.SINGLE_KEY="dailytask.FindResTip";return e}(ui.ziyuanzhaohui.ziyuanzhaohuitipUI);i.FindResTip=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.richanglist.itemRender=i.FindResItem;this.richanglist.renderHandler=new Laya.Handler(this,this.onTaskRender);this.btnjiahao.clickHandler=new Laya.Handler(this,this.onGetWay);this._model=i.DailyTaskModel.getIns()};e.prototype.onGetWay=function(){tip.TipManager.showGetWay(game.Config.getParams(914))};e.prototype.onTaskRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){app.ProtocolRequest.ResFindBackDataReq();this._model.clearFindRed();this._model.on(i.DailyTaskModel.FIND_RES_CHANGE,this,this.setList);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.DailyTaskModel.FIND_RES_CHANGE,this,this.setList)};e.prototype.refreshAll=function(){var t=csv.DailyTaskProxy.getIns().getFindArr();this.richanglist.array=t;this.richanglist.scrollTo(0);this.imgtishi.visible=t.length==0;this.labelshuzi.text=this._model.actpoint.toString()};e.prototype.setList=function(){this.richanglist.refresh();this.labelshuzi.text=this._model.actpoint.toString()};e.SINGLE_KEY="dailytask.FindResView";return e}(ui.ziyuanzhaohui.ziyuanzhaohuiviewUI);i.FindResView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var battle;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.jianglilist.itemRender=grids.GridView;this.jianglilist.renderHandler=grids.GridView.CommonItemRender;this.mvplist.itemRender=grids.GridView;this.mvplist.renderHandler=grids.GridView.CommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.YaoDongProxy.getIns().getCfg(this.dataSource);this.setRwd(game.ItemUtil.parserList(t.mvpreward),this.mvplist);this.setRwd(game.ItemUtil.parserList(t.reward),this.jianglilist)};e.prototype.setRwd=function(t,e){var i=[];i=i.concat(t);var n=i.length;if(n<=8){for(var r=n;r<8;r++){i.push(game.GridsModel.EMPTY)}}else{var o=n%5;for(var r=o;r<5;r++){i.push(game.GridsModel.EMPTY)}}e.array=i};e.SINGLE_KEY="battle.YaodongRewardView";return e}(ui.wudiyaodong.wudiyaodongjianglitipUI);t.YaodongRewardView=e})(battle||(battle={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listRwd.itemRender=grids.GridView;this.listRwd.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.listRwd,this.box,96,this.listRwd.spaceX)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.labeltime01.text=t.uname;this.labelxiangxi.text=t.rpoint.toString();var e=[];for(var i=0,n=t.award.length;i<n;i++){var r=t.award[i];var o=game.ItemUtil.createVO(r.itemID);o.setCount(r.value);e.push(o)}this.centerLayout.array=e};e.SINGLE_KEY="dailytask.YaoDongRwdOwnerItem";return e}(ui.wudiyaodong.dajiangjiluitemUI);t.YaoDongRwdOwnerItem=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjuanxianjilu.itemRender=i.YaoDongRwdOwnerItem;this.listjuanxianjilu.renderHandler=new Laya.Handler(this,this.onHandler);this._model=i.YaoDongModel.getIns()};e.prototype.onHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(i.YaoDongModel.RWD_INFO_CHANGE,this,this.refreshAll);app.ProtocolRequest.ViewRollAwardReq();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.YaoDongModel.RWD_INFO_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.listjuanxianjilu.array=this._model.rwdInfo;this.imgtihsi.visible=Boolean(this._model.rwdInfo.length==0)};e.SINGLE_KEY="dailytask.YaoDongRwdOwnerView";return e}(ui.wudiyaodong.dajiangjilutipUI);i.YaoDongRwdOwnerView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.danrenbtn.on(Laya.Event.CLICK,this,this.onSingleEnter);this.zuduibtn.on(Laya.Event.CLICK,this,this.onTeamn);this.singleEnterHandler=new Laya.Handler(this,this.onSingleEnterHandler);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.daojulist.array=game.ItemUtil.parserList(game.Config.getParams(game.ConfigID.YD_SHOW_RWD));this.jiabtn.on(Laya.Event.CLICK,this,this.onAdd);this.shuoming.text=app.getLang("endless_desc1");game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.YAO_DONG,[this.btnrule,this.shuominglab])};e.prototype.onAdd=function(){i.DailyTimeUtil.buyTime(csv.DailyTimeProxy.ENUM_TYPE.YAO_DONG)};e.prototype.onSingleEnter=function(){if(battle.BattleModel.getIns().checkBattleState(true)){return}game.Alert.show(app.getLang("endless_1"),this.singleEnterHandler)};e.prototype.onSingleEnterHandler=function(){if(i.DailyTimeUtil.checkTime(csv.DailyTimeProxy.ENUM_TYPE.YAO_DONG,true)){app.ProtocolRequest.JoinEndlessReq(0)}};e.prototype.onTeamn=function(){if(i.DailyTimeUtil.checkTime(csv.DailyTimeProxy.ENUM_TYPE.YAO_DONG,true)){team.TeamModel.getIns().openTeam(csv.FunctionsProxy.ENUMS.YAO_DONG)}};e.prototype.onDisplay=function(){boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime)};e.prototype.refreshAll=function(){if(!team.TeamModel.getIns().hasTeam){this.zuduibtn.x=382;this.danrenbtn.visible=true}else{this.danrenbtn.visible=false;this.zuduibtn.x=242}this.setDailyTime()};e.prototype.setDailyTime=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.YAO_DONG;var e=boss.BossModel.getIns().getDailyTime(t);var i=csv.DailyTimeProxy.getIns().getCfg(t);var n=parseInt(i.time);var r=e.fnum+e.gnum;this.shuliangimg.text=r+"/"+n};e.SINGLE_KEY="dailytask.YaoDongView";return e}(ui.wudiyaodong.wudiyaodongbgUI);i.YaoDongView=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=o.DanFangModel.getIns();app.ViewManager.regist(o.DanFangMainView,"danfang.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.REFINE_HOUSE,o.DanFangMainView,null,6)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.AlchemistNtf,this,this.onAlchemistNtf);this.addMsgListener(app.ProtocolResponse.PrescriptionNtf,this,this.onPrescriptionNtf);this.addMsgListener(app.ProtocolResponse.RefineDataNtf,this,this.onRefineDataNtf);this.addMsgListener(app.ProtocolResponse.RefineStartResp,this,this.onRefineStartResp);this.addMsgListener(app.ProtocolResponse.BreakRefineResp,this,this.onBreakRefineResp);this.addMsgListener(app.ProtocolResponse.GetRefineAwardResp,this,this.onGetRefineAwardResp);this.addMsgListener(app.ProtocolResponse.EveryRefineNtf,this,this.onEveryRefineNtf)};e.prototype.onAlchemistNtf=function(t,e){if(this._model.lv&&this._model.lv!=e.lv){this._model.event(o.DanFangModel.EVENTS.UPDATE_LEVEL)}this._model.lv=e.lv;this._model.exp=e.exp;this._model.times=e.times};e.prototype.onPrescriptionNtf=function(t,e){this._model.pidArr=e.pid;this._model.newpid=e.newpid};e.prototype.onRefineDataNtf=function(t,e){this._model.cfgId=e.cfgId;if(e.cfgId){this._model.selectDanFangCfgId=e.cfgId}this._model.mnum=e.mnum;this._model.tnum=e.tnum;this._model.endtime=e.endtime;if(e.addexp-this._model.addexp>0){this._model.event(o.DanFangModel.EVENTS.SHOW_ADDEXP,e.addexp-this._model.addexp)}this._model.addexp=e.addexp;this._model.failnum=e.failnum;this._model.award=e.award;var i;if(!i){i=csv.NpcProxy.getIns().getNpcVO(7007).control}if(i){if(this._model.cfgId!=0&&this._model.endtime==0){var n=csv.AlchemyPrescriptionProxy.getIns().getCfg(this._model.cfgId);var r=game.ItemUtil.parserList(n.res)[0];i.isShowQiPao(true,r.getIconUrl(),function(){app.ViewManager.toggleDialog(o.LianZhiJieShuTip,1)})}else{i.isShowQiPao(false,"",function(){app.ViewManager.toggleDialog(o.LianZhiJieShuTip,1)})}}this._model.event(o.DanFangModel.EVENTS.UPDATE_MAIN_VIEW)};e.prototype.onRefineStartResp=function(t,e){if(e.ret==1){this._model.getSelectItem();this._model.event(o.DanFangModel.EVENTS.UPDATE_MAIN_VIEW);app.ViewManager.toggleDialog(o.LianDanShuLiangTip,-1)}};e.prototype.onBreakRefineResp=function(t,e){if(e.ret==1){app.ViewManager.toggleDialog(o.LianZhiJieShuTip,1)}};e.prototype.onGetRefineAwardResp=function(t,e){};e.prototype.onEveryRefineNtf=function(t,e){this._model.itemId=e.itemId;this._model.event(o.DanFangModel.EVENTS.SHOW_GAILV_TEXIAO)};e.SINGLE_KEY="danfang.DanFangModule";return e}(app.ModuleBase);o.DanFangModule=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("alchemy_exp.csv");this.cfgMap=t.getMap("lv");this.cfgArr=t.getArray();this.helpArr=[];for(var e=0;e<this.cfgArr.length;e++){if(e>0){this.helpArr.push(this.cfgArr[e])}}};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.AlchemyExpProxy";return e}(app.ModelBase);t.AlchemyExpProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("alchemy_list.csv");this.cfgPreidMap=t.getMap("preid");this.cfgMap=t.getMap("id");this.arrMap=t.getMapList("realm");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getTabArr=function(){var t=[];for(var e=0;e<this.cfgArr.length;e++){var i=this.cfgArr[e];if(i.state==1){t.push(this.cfgArr[e])}}return t};e.SINGLE_KEY="csv.AlchemyListProxy";return e}(app.ModelBase);t.AlchemyListProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("alchemy_prescription.csv");this.cfgMap=t.getMap("id");this.cfgItemMap=t.getMap("itemid");this.cfgPreMap=t.getMapList("preid")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.AlchemyPrescriptionProxy";return e}(app.ModelBase);t.AlchemyPrescriptionProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(t){var e=function(t){__extends(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){};i.prototype.getMaxQuItemVo=function(t){var e=t.split(";");for(var i=e.length-1;i>=0;i--){var n=game.ItemUtil.parserList(e[i])[0];if(game.GridsModel.getIns().hasEnoughItems(n)){return n}}return game.ItemUtil.parserList(e[0])[0]};i.prototype.isSubTypeRed=function(t){if(this.pidArr.indexOf(t.preid)==-1){return false}var e=game.GridsModel.getIns().hasEnoughItems(t.cost2);if(e&&this.times>0){var i=t.cost1.split(";");for(var n=0;n<i.length;n++){if(game.GridsModel.getIns().hasEnoughItems(i[n])){return true}}}return false};i.prototype.toFixed=function(t){if(t%1==0){return t.toString()}return t.toFixed(1)};i.prototype.isAllRedTip=function(){var t=csv.AlchemyListProxy.getIns().getTabArr();for(var e=0;e<t.length;e++){if(i.getIns().isSubTypeRed(t[e])){return true}}return false};i.prototype.getSelectItem=function(){if(this.selectDanFangCfgId){var t=csv.AlchemyPrescriptionProxy.getIns().getCfg(this.selectDanFangCfgId);this.selectDanFangItem=csv.AlchemyListProxy.getIns().cfgPreidMap[t.preid]}};i.SINGLE_KEY="danfang.DanFangModel";i.EVENTS={UPDATE_MAIN_VIEW:"UPDATE_MAIN_VIEW",SELEVT_DANFANGITEM_OK:"SELEVT_DANFANGITEM_OK",DAOJUPINZHI_SELECT_OK:"DAOJUPINZHI_SELECT_OK",UPDATE_LEVEL:"UPDATE_LEVEL",SHOW_GAILV_TEXIAO:"SHOW_GAILV_TEXIAO",SHOW_ADDEXP:"SHOW_ADDEXP"};return i}(app.ModelBase);t.DanFangModel=e})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.setRed);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.setRed);this.off(Laya.Event.CLICK,this,this.onClick)};e.prototype.setRed=function(){if(this._value&&i.DanFangModel.getIns().isSubTypeRed(this._value)){game.RedDotView.addTo(this,this.width-15,8)}else{game.RedDotView.removeFrom(this)}};e.prototype.updateLayout=function(){};e.prototype.setData=function(t){if(!t)return;this._value=t;this.btnName.text=this._value.typename;this.setRed();if(i.DanFangModel.getIns().pidArr.indexOf(parseInt(t.preid))==-1){this.di.skin="danfang/bg_jiaobiaohong.png"}else{this.di.skin="danfang/bg_jiaobiaolv.png"}this.jiaobiao.skin="danfang/bg_jiaobiao_"+t.danfanglv+".png"};e.prototype.onClick=function(){i.DanFangXuanZeView.getIns().updataView(this.dataSource.id)};e.prototype.setSelectState=function(t){this.selectState=t;this.setSelect()};e.prototype.setSelect=function(){this.btnyeqian.selected=this.imgxuanzhong.visible=Boolean(this.selectState==component.SimpleGroupList.SELECTED)};e.SINGLE_KEY="danfang.DanFangSubTypeItem";return e}(ui.danfang.danfangxuanzeyeqianitemUI);i.DanFangSubTypeItem=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.setRed)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.setRed)};e.prototype.updateLayout=function(){};e.prototype.setData=function(t){if(!t)return;this._value=t;this.labelname.text=yuanshencode.YuanshenModel.getIns().getBigRealm(parseInt(this._value));this.setRed()};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.btnxiala.scaleY=-1}else{this.btnxiala.scaleY=1}};e.prototype.setRed=function(){var t=false;var e=csv.AlchemyListProxy.getIns().arrMap[this._value];for(var i=0;i<e.length;i++){if(n.DanFangModel.getIns().isSubTypeRed(e[i])){t=true;break}}if(t){game.RedDotView.addTo(this,this.width-48,8)}else{game.RedDotView.removeFrom(this)}};e.SINGLE_KEY="danfang.DanFangTypeItem";return e}(ui.danfang.danfangxuanzeyeqianitem2UI);n.DanFangTypeItem=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.DanFangModel.getIns();this.list=new component.SimpleGroupList;this.list.groupRender=i.DanFangTypeItem;this.list.itemRender=i.DanFangSubTypeItem;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="realm";this.list.boOpenOne=true;this.list.width=185;this.list.height=724;this.listyeqian.addChild(this.list);this.sjCost=new common.CostList(this.boxxiaohao1,this.boxxiaohao);this._maxNum=game.Config.getIntParams(966);this.btnxuanze.clickHandler=new Laya.Handler(this,this.onbtnxuanzeClick);this.labelqianwang.on(Laya.Event.LINK,this,this.onHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.DANFANG_SELECT,this,this.getGuideItem,500);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.DANFANG_COMFIRM,this.btnxuanze)};e.prototype.getGuideItem=function(t,e){this.updateLayout();var i=csv.AlchemyListProxy.getIns().getTabArr();var n=0;var r;for(var o=0,a=i.length;o<a;o++){var s=i[o];if(t==s.realm&&e==s.preid){n=o;r=s;break}}this.list.selectedIndex=n;this.list.mouseEnabled=true;if(r){return this.list.getSubItem(r.realm,r)}return null};e.prototype.onHandler=function(t){if(guild.GuildModel.getIns().isGuild==false){return manager.FlowManager.instance.flowByStyle1(app.getLang("family_tip_2"))}else{var e=this._itemVo.itemCfg.clientget.split("-")[2];game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_SHOP,true,false,e)}};e.prototype.onDisplay=function(){this._selectItem=null;game.Context.event(game.ContextEvent.FUNCTION_OPEN);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){game.Context.event(game.ContextEvent.FUNCTION_CLOSE);this._selectItem=null};e.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onbtnxuanzeClick=function(){if(this._selectItem){this._model.selectDanFangItem=this._selectItem;this._model.event(i.DanFangModel.EVENTS.SELEVT_DANFANGITEM_OK);this.close()}};e.prototype.updateLayout=function(){var t=csv.AlchemyListProxy.getIns().getTabArr();this.list.dataSource=t;var e=0;var i=1;var n=1;var r=yuanshencode.YuanshenModel.getIns().getYuanshenmMaxLvWa();if(r){n=parseInt(r.bigrealm)}for(var o=0;o<t.length;o++){if(parseInt(t[o].realm)==n){e=o;i=parseInt(t[o].id);break}}this.list.selectedIndex=e;this.list.scrollToIndex(e);this.updataView(i)};e.prototype.updataView=function(t){this._selectItem=csv.AlchemyListProxy.getIns().getCfg(t);if(this._selectItem){var e=this._selectItem;this.leixing.text=app.getLang("alchemytype_"+e.type);var i=game.ItemUtil.parserList(e.preid)[0];this._itemVo=i;this.labeldanfangmingzi1.text=e.typename;this.daoju1.skin=i.getIconUrl();this.labelmiaoshu.text=app.getLang(e.desc);if(parseInt(e.type)==6){this.RTyaoqiu.text=app.getLang("alchemydesc_pet_"+e.realm)}else{this.RTyaoqiu.text=app.getLang("alchemydesc01",yuanshencode.YuanshenModel.getIns().getBigRealm(parseInt(e.realm)))}var n=e.effect2.split(";");var r="";if(e.type==1){for(var o=0;o<n.length;o++){if(o>0){r+="-"}r+=game.ItemUtil.parserList(n[o])[0].itemCfg.p1}this.RTxiaoguo.text=app.getLang("alchemydesc02",e.effect,r)}else if(e.type==2){for(var o=0;o<n.length;o++){if(o>0){r+="-"}r+=game.ItemUtil.parserList(n[o])[0].itemCfg.p1+"%"}this.RTxiaoguo.text=app.getLang("alchemydesc11",e.effect,r)}else if(e.type==6){this.RTxiaoguo.text=app.getLang("alchemydesc02",e.effect,game.ItemUtil.parserList(n[0])[0].itemCfg.p1)}else{var a=game.ItemUtil.parserList(n[0])[0].itemCfg.p4.split("-");this.RTxiaoguo.text=app.getLang("alchemydesc02",e.effect,a[a.length-1])}var s=yuanshencode.YuanshenModel.getIns().elixirdata;var l=0;for(var o=0;o<s.length;o++){l+=s[o].grass}var u=l+"/"+this._maxNum;if(e.type==1){this.labelfuyongcishu.text=app.getLang("alchemydesc03",u);if(l<this._maxNum){this.labelfuyongcishu.color="#6bc06b"}else{this.labelfuyongcishu.color=game.STYLES.RED_COLOR}}else{this.labelfuyongcishu.text=""}var p=this._model.getMaxQuItemVo(e.cost1);this.xiaohao.setData(p);this.xiaohao.showBagCount(-1);var h=game.GridsModel.getIns().getItemCount(p.getItemId());this.xiaohaottxt.text=h+"/"+p.count;if(h>=p.count){this.xiaohaottxt.color="#567474"}else{this.xiaohaottxt.color=game.STYLES.RED_COLOR}this.sjCost.array=game.ItemUtil.parserList(e.cost2);if(this._model.pidArr.indexOf(parseInt(e.preid))==-1){this.btnxuanze.visible=false;this.tishi.visible=false;this.labelqianwang.visible=true;this.labelqianwang.text=app.getLang("alchemyaccess",i.getName())}else{this.btnxuanze.visible=true;this.labelqianwang.visible=false;this.tishi.visible=false}}};e.SINGLE_KEY="danfang.DanFangXuanZeView";return e}(ui.danfang.danfangxuanzeviewUI);i.DanFangXuanZeView=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.xuanzhong.visible=false;this.daoju.showBagCount(-1);this.miaoshu.mouseEnabled=this.labelshulinag.mouseEnabled=false;this.di.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){};e.prototype.onClick=function(){if(this._vo){i.DanFangModel.getIns().event(i.DanFangModel.EVENTS.DAOJUPINZHI_SELECT_OK,this._vo);app.ViewManager.toggleDialog(i.DaoJuXuanZeTip,-1)}};e.prototype.setData=function(t){if(!t)return;this._vo=game.ItemUtil.parserList(t)[0];this.daoju.setData(this._vo);this.miaoshu.text=this._vo.getName();this.labelshulinag.text="X"+game.GridsModel.getIns().getItemCount(this._vo.getItemId())+""};e.SINGLE_KEY="danfang.DaoJuXuanZeCell";return e}(ui.danfang.daojuxuanzeitemUI);i.DaoJuXuanZeCell=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listliebiao.itemRender=i.DaoJuXuanZeCell;this.listliebiao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.updateLayout=function(){if(i.DanFangModel.getIns().selectDanFangItem){this.listliebiao.array=i.DanFangModel.getIns().selectDanFangItem.cost1.split(";")}};e.SINGLE_KEY="danfang.DaoJuXuanZeTip";return e}(ui.danfang.daojuxuanzetipUI);i.DaoJuXuanZeTip=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.btnjia.clickHandler=new Laya.Handler(this,this.onBtnjiaClick);this.btnjian.clickHandler=new Laya.Handler(this,this.onBtnjianClick);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onQuedingbtnClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onBtnjiaClick=function(){var t=parseInt(this.labelshuliang.text);t++;this.labelshuliang.text=t+"";this.updataBtn()};e.prototype.onBtnjianClick=function(){var t=parseInt(this.labelshuliang.text);t--;this.labelshuliang.text=t+"";this.updataBtn()};e.prototype.onQuedingbtnClick=function(){if(o.DanFangModel.getIns().selectDanFangItem){var t=parseInt(this.labelshuliang.text);var e=this.dataSource;var i=game.ItemUtil.parserList(o.DanFangModel.getIns().selectDanFangItem.cost2)[0];app.ProtocolRequest.RefineStartReq(o.DanFangModel.getIns().selectDanFangItem.preid,t,[e.getItemId(),i.getItemId()])}};e.prototype.updateLayout=function(){if(o.DanFangModel.getIns().selectDanFangItem.cost2){var t=this.dataSource;var e=csv.AlchemyPrescriptionProxy.getIns().cfgPreMap[o.DanFangModel.getIns().selectDanFangItem.preid][0];this.daoju.skin=game.ItemUtil.parserList(e.res)[0].getIconUrl();var i=game.ItemUtil.parserList(o.DanFangModel.getIns().selectDanFangItem.cost2)[0];var n=game.GridsModel.getIns().getItemCount(t.getItemId())/t.count;var r=game.GridsModel.getIns().getItemCount(i.getItemId())/i.count;this._numMax=Math.min(n,r);this._numMax=Math.min(this._numMax,o.DanFangModel.getIns().times);this._numMax=parseInt(this._numMax);if(this._numMax<=1){this._numMax=1}this.labelshuliang.text=this._numMax+"";this.updataBtn()}};e.prototype.updataBtn=function(){var t=parseInt(this.labelshuliang.text);this.btnjian.gray=false;this.btnjia.gray=false;this.btnjia.mouseEnabled=true;this.btnjian.mouseEnabled=true;if(t>=this._numMax){this.btnjia.gray=true;this.btnjia.mouseEnabled=false;this.labelshuliang.text=this._numMax+""}if(t<=1){this.btnjian.gray=true;this.btnjian.mouseEnabled=false;this.labelshuliang.text="1"}};e.SINGLE_KEY="danfang.LianDanShuLiangTip";return e}(ui.danfang.liandanshuliangtishiUI);o.LianDanShuLiangTip=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.jiacheng.itemRender=ui.danfang.dengjiitemUI;this.jiacheng.renderHandler=new Laya.Handler(this,this.onCell);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onCell=function(t){t.dengji.text=t.dataSource.desc;t.pingji.text=yuanshencode.YuanshenModel.getIns().getBigRealm(parseInt(t.dataSource.jingjie));var e=t.dataSource.danyaoqua.split("-");var i="";for(var n=0;n<e.length;n++){if(n>0)i+="/";i+=app.getLang("alchemy_qua_"+e[n])}t.pingzhi.text=i;t.gailv.text=t.dataSource.type2+"%";if(r.DanFangModel.getIns().lv>=parseInt(t.dataSource.lv)){t.dengji.gray=t.pingji.gray=t.pingzhi.gray=t.gailv.gray=false}else{t.dengji.gray=t.pingji.gray=t.pingzhi.gray=t.gailv.gray=true}if(r.DanFangModel.getIns().lv==parseInt(t.dataSource.lv)){t.di.visible=true}else{t.di.visible=false}};e.prototype.updateLayout=function(){this.mingxi.text=app.getLang("alchemyhelp",game.Config.getParams(1131));var t=csv.AlchemyExpProxy.getIns().helpArr;this.jiacheng.array=t;var e=r.DanFangModel.getIns().lv;if(e==0||e==1){this.jiacheng.scrollTo(0)}else{var i=csv.AlchemyExpProxy.getIns().getCfg(e+1);if(!i){this.jiacheng.scrollTo(t.length-1)}else{this.jiacheng.scrollTo(e-2)}}};e.SINGLE_KEY="danfang.LianDanShuLiangView";return e}(ui.danfang.liandanshuliangUI);r.LianDanShuLiangView=t})(danfang||(danfang={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var danfang;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listdaoju.itemRender=grids.GridView;this.listdaoju.renderHandler=grids.GridView.CommonItemRender;this.btnqueren.clickHandler=new Laya.Handler(this,this.onBtnquerenClick);this.labeljingyanzhi.visible=false;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onBtnquerenClick=function(){this.close()};e.prototype.onDisplay=function(){app.SoundManager.getIns().playSound("get");this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.close=function(){t.prototype.close.call(this);app.ProtocolRequest.GetRefineAwardReq()};e.prototype.updateLayout=function(){var t=i.DanFangModel.getIns().award;this.listdaoju.array=t.sort(this.onSort);var e=i.DanFangModel.getIns().mnum-i.DanFangModel.getIns().failnum;this.labelxinxi.text=app.getLang("alchemydesc06")+":"+e+"/"+i.DanFangModel.getIns().mnum;this.labeljingyanzhi.text=app.getLang("alchemydesc07")+":"+i.DanFangModel.getIns().addexp;if(i.DanFangModel.getIns().tnum==1&&i.DanFangModel.getIns().failnum==1){this.labeltishi.visible=true}else{this.labeltishi.visible=false}};e.prototype.onSort=function(t,e){var i=game.ItemUtil.parserList(t.itemID)[0];var n=game.ItemUtil.parserList(e.itemID)[0];if(i.getQuality()>n.getQuality()){return-1}else if(i.getQuality()<n.getQuality()){return 1}else{return 0}};e.SINGLE_KEY="danfang.LianZhiJieShuTip";return e}(ui.danfang.lianzhijieshutipUI);i.LianZhiJieShuTip=t})(danfang||(danfang={}));var CountDownView=game.CountDownView;var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.DIANFENCESHI,r.DianFenCeShiMainView,null,6)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.PeakNtf,this,this.onPeakNtf);this.addMsgListener(app.ProtocolResponse.ModifyPeakNtf,this,this.onModifyPeakNtf);this.addMsgListener(app.ProtocolResponse.PeakTaskNtf,this,this.onPeakTaskNtf);this.addMsgListener(app.ProtocolResponse.ChargePeakAck,this,this.onChargePeakAck);this.addMsgListener(app.ProtocolResponse.TestPeakAck,this,this.onTestPeakAck);this.addMsgListener(app.ProtocolResponse.AwardTestAck,this,this.onAwardTestAck);this.addMsgListener(app.ProtocolResponse.FinishPeakTaskAck,this,this.onFinishPeakTaskAck);this.addMsgListener(app.ProtocolResponse.PeakTestNtf,this,this.onPeakTestNtf);this.addMsgListener(app.ProtocolResponse.TupoTestAck,this,this.onTupoTestAck);this.addMsgListener(app.ProtocolResponse.OpenPeakAck,this,this.onOpenPeakAck)};e.prototype.updataRedTip=function(){Laya.timer.callLater(this,this.updataRed)};e.prototype.updataRed=function(){if(r.DianFenCeShiModel.getIns().isMianIconRed()){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.DIANFENCESHI)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.DIANFENCESHI)}};e.prototype.onPeakNtf=function(t,e){r.DianFenCeShiModel.getIns().peakArr=e.peak;this.updataRedTip()};e.prototype.onModifyPeakNtf=function(t,e){var i=false;for(var n=0;n<r.DianFenCeShiModel.getIns().peakArr.length;n++){if(r.DianFenCeShiModel.getIns().peakArr[n].pid==e.mpeak[0].pid){r.DianFenCeShiModel.getIns().peakArr[n].testa=e.mpeak[0].testa;r.DianFenCeShiModel.getIns().peakArr[n].award=e.mpeak[0].award;r.DianFenCeShiModel.getIns().peakArr[n].exp=e.mpeak[0].exp;i=true;break}}if(!i){r.DianFenCeShiModel.getIns().peakArr.push(e.mpeak[0])}r.DianFenCeShiModel.getIns().event(r.DianFenCeShiModel.EVENTS.UPDATE_MAIN_VIEW);this.updataRedTip()};e.prototype.onPeakTaskNtf=function(t,e){r.DianFenCeShiModel.getIns().getPeakTaskArr(e.ptask);r.DianFenCeShiModel.getIns().event(r.DianFenCeShiModel.EVENTS.UPDATE_TASK_VIEW);this.updataRedTip()};e.prototype.onChargePeakAck=function(t,e){if(e.result==1){r.DianFenCeShiModel.getIns().event(r.DianFenCeShiModel.EVENTS.ZHULIN_RESP)}};e.prototype.onTestPeakAck=function(t,e){if(e.result==1){app.ViewManager.toggleDialog(r.DianFenCeShiTip2,1,0)}};e.prototype.onAwardTestAck=function(t,e){};e.prototype.onFinishPeakTaskAck=function(t,e){};e.prototype.onPeakTestNtf=function(t,e){r.DianFenCeShiModel.getIns().testrd=e.testrd;r.DianFenCeShiModel.getIns().event(r.DianFenCeShiModel.EVENTS.UPDATE_COUNT)};e.prototype.onTupoTestAck=function(t,e){if(e.result==1){app.ViewManager.toggleDialog(r.DianFenCeShiTip4,-1)}};e.prototype.onOpenPeakAck=function(t,e){if(e.result==1){r.DianFenCeShiModel.getIns().event(r.DianFenCeShiModel.EVENTS.OPEN_NEXT)}};e.SINGLE_KEY="dianfenceshi.DianFenCeShiModule";return e}(app.ModuleBase);r.DianFenCeShiModule=t})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getNowZhuZiData=function(){var t=0;var e;for(var i=0;i<this.peakArr.length;i++){if(this.peakArr[i].pid>t){e=this.peakArr[i];t=this.peakArr[i].pid}}return e};e.prototype.getZhuZiData=function(t){for(var e=0;e<this.peakArr.length;e++){if(this.peakArr[e].pid==t){return this.peakArr[e]}}return null};e.prototype.getPeakTaskArr=function(t){this.peakTaskArr=t;this.peakTaskArr=this.lingJiangPaiXu(this.peakTaskArr)};e.prototype.lingJiangPaiXu=function(t){if(!t){return t}var e=[];var i=[];var n=[];var r=[];var o;for(o=0;o<t.length;o++){if(t[o].questSate==2){i.push(t[o])}else if(t[o].questSate==1){n.push(t[o])}else if(t[o].questSate==3){r.push(t[o])}}for(o=0;o<i.length;o++){e.push(i[o])}for(o=0;o<n.length;o++){e.push(n[o])}for(o=0;o<r.length;o++){e.push(r[o])}return e};e.prototype.getTestrdCount=function(t){for(var e=0;e<this.testrd.length;e++){if(t==this.testrd[e].peaktype){return this.testrd[e].peakcount}}return 0};e.prototype.isMianIconRed=function(){var t=this.isAllTaskRed();var e=this.isAllBaoXiangRed();var i=this.isCeShiRed();var n=this.isJieSuoRed();if(t||e||i||n){return true}return false};e.prototype.isJieSuoRed=function(){var t=this.getNowZhuZiData();if(t&&t.testa==2&&t.pid!=7){return true}return false};e.prototype.isTaskRed=function(t){for(var e=0;e<this.peakTaskArr.length;e++){if(this.peakTaskArr[e].questIndex==t){if(this.peakTaskArr[e].questSate==2){return true}}}return false};e.prototype.isAllTaskRed=function(){if(!this.peakTaskArr)return false;for(var t=0;t<this.peakTaskArr.length;t++){if(this.peakTaskArr[t].questSate==2){return true}}return false};e.prototype.isBaoXiangRed=function(t,e){for(var i=0;i<this.peakArr.length;i++){if(this.peakArr[i].pid==t){var n=this.peakArr[i];var r=csv.PeakProxy.getIns().getCfg(e);var o=r.boxaura.split("-");var a=new ByteStatus;var s=new Laya.Byte;s.writeByte(n.award);a.init(0,s);var l=a.read(0);var u=a.read(1);var p=a.read(2);if(e==1&&l==0){if(n.exp>=parseInt(o[0])){return true}}if(e==2&&u==0){if(n.exp>=parseInt(o[1])){return true}}if(e==3&&p==0){if(n.exp>=parseInt(o[2])){return true}}}}return false};e.prototype.isAllBaoXiangRed=function(){for(var t=1;t<8;t++){for(var e=1;e<4;e++){if(this.isBaoXiangRed(t,e)){return true}}}return false};e.prototype.isCeShiRed=function(){var t=this.getNowZhuZiData();if(t.testa==1){return true}return false};e.SINGLE_KEY="dianfenceshi.DianFenCeShiModel";e.EVENTS={UPDATE_MAIN_VIEW:"UPDATE_MAIN_VIEW",UPDATE_TASK_VIEW:"UPDATE_TASK_VIEW",UPDATE_COUNT:"UPDATE_COUNT",OPEN_NEXT:"OPEN_NEXT",ZHULIN_RESP:"ZHULIN_RESP"};return e}(app.ModelBase);t.DianFenCeShiModel=e})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("peak.csv");this.cfgMap=t.getMap("id")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.PeakProxy";return e}(app.ModelBase);t.PeakProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("peak_task.csv");this.cfgMap=t.getMap("id")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.PeakTaskProxy";return e}(app.ModelBase);t.PeakTaskProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("peak_test.csv");this.cfgMap=t.getMap("id")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.PeakTestProxy";return e}(app.ModelBase);t.PeakTestProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.renwulist.repeatX=1;this.renwulist.repeatY=3;this.renwulist.itemRender=ui.dianfengtianfu.dianfengtianfu_dianfuceshiitemUI;this.renwulist.renderHandler=new Laya.Handler(this,this.onCell);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.DIANFENCESHI_GET,this,this.getGuideItemBtn,500);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.DIANFENCESHI_SUB_GLOSE,this.backbtn)};e.prototype.getGuideItemBtn=function(){var t=this.renwulist.getCell(0);if(t){return t.btnchongzhi}return null};e.prototype.onDisplay=function(){i.DianFenCeShiModel.getIns().on(i.DianFenCeShiModel.EVENTS.UPDATE_TASK_VIEW,this,this.onUpdataView);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){i.DianFenCeShiModel.getIns().off(i.DianFenCeShiModel.EVENTS.UPDATE_TASK_VIEW,this,this.onUpdataView)};e.prototype.onUpdataView=function(){var t=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.ZHULINGZHI));this.dangqianlab.text=app.getLang("dianfeng_lingqi_1",t);this.renwulist.array=i.DianFenCeShiModel.getIns().peakTaskArr;this.renwulist.refresh()};e.prototype.onCell=function(t){var e=t.dataSource;var i=csv.PeakTaskProxy.getIns().getCfg(e.questIndex);t.renwuminglab.text=i.name;t.gezilist.itemRender=grids.GridView;t.gezilist.renderHandler=grids.GridView.CommonItemRender;t.gezilist.array=game.ItemUtil.parserList(i.reward);if(i.progress==1){if(e.questSate!=1){t.numlab.text="1/1"}else{t.numlab.text="0/1"}}else{if(e.num>parseInt(i.condition)){t.numlab.text=i.condition+"/"+i.condition}else{t.numlab.text=e.num+"/"+i.condition}}game.RedDotView.removeFrom(t.btnchongzhi);t.btnchongzhi.visible=true;if(e.questSate==1){t.imgyilingqu.visible=false;t.btnchongzhi.label=app.getLang("button_name8")}else if(e.questSate==2){t.imgyilingqu.visible=false;t.btnchongzhi.label=app.getLang("huodong_text03");game.RedDotView.addTo(t.btnchongzhi)}else{t.imgyilingqu.visible=true;t.btnchongzhi.visible=false}t.btnchongzhi.clickHandler=new Laya.Handler(this,this.onBtnClick,[e,i])};e.prototype.onBtnClick=function(t,e){if(t.questSate==1){if(parseInt(e.functionid)==csv.FunctionsProxy.ENUMS.REFINE_HOUSE){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.REFINE_HOUSE,true,false,"1")}else{game.ClosureManager.callFunction(parseInt(e.functionid))}}else{app.ProtocolRequest.FinishPeakTaskReq(e.id)}};e.prototype.updateLayout=function(){var t=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.ZHULINGZHI));this.dangqianlab.text=app.getLang("dianfeng_lingqi_1",t);this.renwulist.array=i.DianFenCeShiModel.getIns().peakTaskArr;if(i.DianFenCeShiModel.getIns().isAllTaskRed()){this.renwulist.scrollTo(0)}};e.SINGLE_KEY="dianfenceshi.DianFenCeShiTaskView";return e}(ui.dianfengtianfu.dianfengtianfu_dianfengceshiUI);i.DianFenCeShiTaskView=t})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.onQuxiaobtnClick);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onQuedingbtnClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onQuxiaobtnClick=function(){this.close()};e.prototype.onQuedingbtnClick=function(){this.close();app.ProtocolRequest.TestPeakReq()};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){var t=i.DianFenCeShiModel.getIns().getNowZhuZiData();var e=csv.PeakTestProxy.getIns().getCfg(t.pid);this.label02.text=app.getLang("dianfeng_tishi_2",e.consume)};e.SINGLE_KEY="dianfenceshi.DianFenCeShiTip1";return e}(ui.dianfengtianfu.dianfengtianfutip1UI);i.DianFenCeShiTip1=t})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.onQuxiaobtnClick);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onQuedingbtnClick);this.barjindutiao.visible=this.barjindutiao1.visible=true;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){o.DianFenCeShiModel.getIns().on(o.DianFenCeShiModel.EVENTS.UPDATE_COUNT,this,this.updateLayout);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){o.DianFenCeShiModel.getIns().off(o.DianFenCeShiModel.EVENTS.UPDATE_COUNT,this,this.updateLayout)};e.prototype.onQuxiaobtnClick=function(){if(this._isLingQu){this.close();app.ProtocolRequest.AwardTestReq()}else{this.close();app.ViewManager.toggleDialog(o.DianFenCeShiTip3,1,0,[this._itemVo,this._nextItemVo,this._moneyNum])}};e.prototype.onQuedingbtnClick=function(){this.close();app.ViewManager.toggleDialog(o.DianFenCeShiTip4,1,0,[this._itemVo,this._nextItemVo,this._moneyNum])};e.prototype.updateLayout=function(){this.lab1.text=app.getLang("dianfeng_ceshi_1",game.Context.mainRole.playername);var t=o.DianFenCeShiModel.getIns().getNowZhuZiData();var e=csv.PeakTestProxy.getIns().getCfg(t.pid);var i=game.ItemUtil.parserList(e.reward);this.daoju1.lab1.text=i[0].getName();this.daoju2.lab1.text=i[1].getName();this.daoju3.lab1.text=i[2].getName();this.daoju1.daoju.setData(i[0]);this.daoju2.daoju.setData(i[1]);this.daoju3.daoju.setData(i[2]);var n=o.DianFenCeShiModel.getIns().getTestrdCount(e.titletype);var r=e.titleaura.split("-");this.lab4.text=n+"/"+r[1];this.lab6.text=n+"/"+r[2];this.daoju1.xuanzzhong.visible=false;this.daoju2.xuanzzhong.visible=false;this.daoju3.xuanzzhong.visible=false;if(n>=parseInt(r[2])){this.quedingbtn.visible=false;this.quxiaobtn.x=232;this._isLingQu=true;this.daoju3.xuanzzhong.visible=true;this.barjindutiao.value=this.barjindutiao1.value=1}else{if(n>=parseInt(r[1])){this._itemVo=i[1];this._nextItemVo=i[2];this._moneyNum=(parseInt(r[2])-n)*parseInt(e.upcost);this.daoju2.xuanzzhong.visible=true;this.barjindutiao.value=1;this.barjindutiao1.value=(n-parseInt(r[1]))/parseInt(r[2])}else{this._itemVo=i[0];this._nextItemVo=i[1];this._moneyNum=(parseInt(r[1])-n)*parseInt(e.upcost);this.daoju1.xuanzzhong.visible=true;this.barjindutiao.value=n/parseInt(r[1]);this.barjindutiao1.value=0}this.quedingbtn.visible=true;this.quxiaobtn.x=100;this.quedingbtn.x=354;this._isLingQu=false}};e.SINGLE_KEY="dianfenceshi.DianFenCeShiTip2";return e}(ui.dianfengtianfu.dianfengtianfutip2UI);o.DianFenCeShiTip2=t})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.onQuxiaobtnClick);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onQuedingbtnClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onQuxiaobtnClick=function(){this.close();app.ProtocolRequest.AwardTestReq()};e.prototype.onQuedingbtnClick=function(){this.close();app.ViewManager.toggleDialog(i.DianFenCeShiTip4,1,0,[this._itemVo,this._nextItemVo,this._moneyNum])};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){this._itemVo=this.dataSource[0];this._nextItemVo=this.dataSource[1];this._moneyNum=this.dataSource[2];this.daoju.setData(this._itemVo)};e.SINGLE_KEY="dianfenceshi.DianFenCeShiTip3";return e}(ui.dianfengtianfu.dianfengtianfutip3UI);i.DianFenCeShiTip3=t})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.onQuxiaobtnClick);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onQuedingbtnClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onQuxiaobtnClick=function(){this.close()};e.prototype.onQuedingbtnClick=function(){var t=game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.GOLD);if(t>=this._moneyNum){app.ProtocolRequest.TupoTestReq()}else{shop.ShopModel.getIns().askChongZhi()}};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){this._itemVo=this.dataSource[0];this._nextItemVo=this.dataSource[1];this._moneyNum=this.dataSource[2];this.daoju1.setData(this._itemVo);this.daoju2.setData(this._nextItemVo);this.lab2.text=app.getLang("dianfeng_tupo_1",this._moneyNum)};e.SINGLE_KEY="dianfenceshi.DianFenCeShiTip4";return e}(ui.dianfengtianfu.dianfengtianfutip4UI);t.DianFenCeShiTip4=e})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){var t=parseInt(this.dataSource[0]);var e=parseInt(this.dataSource[1]);var i=csv.PeakProxy.getIns().getCfg(t);var n=i.reward.split(";");var r=n[e].split("|");var o=[];for(var a=0;a<r.length;a++){var s=game.ItemUtil.parserList(r[a])[0];o.push(s)}this.daojulist.array=o};e.SINGLE_KEY="dianfenceshi.DianFenCeShiTip5";return e}(ui.dianfengtianfu.dianfengtianfutip5UI);t.DianFenCeShiTip5=e})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dianfenceshi;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.jindutiao.mouseEnabled=false;this._mask=new Laya.Image;this._mask.visible=false;this._mask.anchorX=0;this._mask.anchorY=1;this._mask.width=200;this._mask.x=0;this._mask.y=830;this._mask.sizeGrid="9,9,11,9";this._mask.skin="public/bg_jiugong_zhezhao2.png";this.jindutiao.mask=this._mask;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){this.jindutiao.stop();this.jindutiao.visible=false};e.prototype.setMaskHeight=function(t){t=t<1?t:1;if(t==0){this.jindutiao.stop();this.jindutiao.visible=false}else{this.jindutiao.play();this.jindutiao.visible=true;this._mask.height=830*t}};e.prototype.updateLayout=function(){};e.SINGLE_KEY="dianfenceshi.DianFenCeShiZhuZiCell";return e}(ui.dianfengtianfu.dianfengtianfuitem1UI);t.DianFenCeShiZhuZiCell=e})(dianfenceshi||(dianfenceshi={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(n.ReBirthSuccessView,"dujie.atlas");app.ViewManager.regist(n.ReBirthTeamView,"dujie.atlas");app.ViewManager.regist(n.ReBirthScheduleView,"dujie.atlas");app.ViewManager.regist(n.ShangXiangTeXiaoView);app.ViewManager.regist(n.DuJieRightTopView,"bosszhandou.atlas");app.ViewManager.regist(copy.CopyRuleView,"bosszhandou.atlas");game.Context.on(n.ReBirthModule.REBIRTH_OPENED,this,this.onRedDotChange)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.TransfListNtf,this,this.onTransfListNtf);this.addMsgListener(app.ProtocolResponse.RoleTransfAck,this,this.onRoleTransfAck);this.addMsgListener(app.ProtocolResponse.RoleFinishTransfAck,this,this.onRoleFinishTransfAck);this.addMsgListener(app.ProtocolResponse.TransfChangeNoti,this,this.onTransfChangeNoti)};e.prototype.onTransfChangeNoti=function(t,e){n.ReBirthModel.getIns().onTransfChange(e.uid,e.transf)};e.prototype.onRoleFinishTransfAck=function(t,e){if(e.result){}};e.prototype.onRoleTransfAck=function(t,e){if(e.result){}};e.prototype.onTransfListNtf=function(t,e){n.ReBirthModel.getIns().updateRoleTransData(e.roletranf)};e.prototype.onRedDotChange=function(){var t=false;var e=n.ReBirthModel.getIns().getRedDotArr();for(var i=0;i<e.length;i++){if(e[i]){t=true;break}}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.REBIRTH)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.REBIRTH)}};e.SINGLE_KEY="rebirth.ReBirthModule";e.REBIRTH_OPENED="rebirth.ReBirthOpened";return e}(app.ModuleBase);n.ReBirthModule=t})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.onTransfChange=function(t,e){var i=t.toString();if(game.Context.roleMap[i]){game.Context.roleMap[i].transf=e}};e.prototype.updateRoleTransData=function(t){this.roletranf=t};e.prototype.getRedDotArr=function(){var t=[];for(var e=0;e<game.Context.TOTAL_ROLE_NUM;e++){t[e]=false;if(game.Context.roleList[e]&&game.Context.roleRebirth(game.Context.roleList[e].insId)>=0){t[e]=true}}return t};e.SINGLE_KEY="rebirth.ReBirthModel";return e}(app.ModelBase);t.ReBirthModel=e})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("transfer.csv");this.cfgMap=t.getMap("id");this.array=t.getArray()};e.prototype.getList=function(){return this.array};e.prototype.getMax=function(){return this.array.length};e.prototype.isMax=function(t){return t==this.getMax()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getCopyMap=function(t){};e.prototype.getTransIcon=function(t){if(t>=1){var e=csv.ReBirthProxy.getIns().getCfg(t);return"res/static/main/"+e.title+".png"}return""};e.prototype.getLvlDes=function(t){var e;for(var i=0,n=this.array.length;i<n;i++){var r=this.array[i];if(t<=r.level){break}e=r}if(e){return app.getLang(e.name)+(t-e.level)}return t.toString()};e.prototype.getTransLvl=function(t){var e;for(var i=0,n=this.array.length;i<n;i++){var r=this.array[i];if(t<=r.level){break}e=r}if(e){return t-e.level}return t};e.prototype.getTransIdByLvl=function(t){var e;for(var i=0,n=this.array.length;i<n;i++){var r=this.array[i];if(t<=r.level){break}e=r}if(e){return e.id}return 0};e.SINGLE_KEY="csv.ReBirthProxy";return e}(app.ModelBase);t.ReBirthProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=copy.CopyModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.x=Laya.stage.width-this.width;this.y=50+ScreenAdapter.OFFSET_Y;this.btntishi.clickHandler=new Laya.Handler(this,this.showRule);this.list.itemRender=copy.TrapMchineIcon;this.list.renderHandler=new Laya.Handler(this,this.onHandler);this.centerLayout=new game.CenterLayoutMediator(this.list,this.box,56,this.list.spaceX);this._timerHandler=new Laya.Handler(this,this.refrshTime)};e.prototype.onHandler=function(t,e){t.setData(t.dataSource)};e.prototype.showRule=function(){app.ViewManager.toggleDialog(copy.CopyRuleView,1,0,[null])};e.prototype.onDisplay=function(){this._model.registerSceondTimer(this._timerHandler);this._model.on(copy.CopyModel.MACHINE_OPEN,this,this.setMachineIcon);this._model.on(copy.CopyModel.HP_CHANGE,this,this.setHp);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(copy.CopyModel.MACHINE_OPEN,this,this.setMachineIcon);this._model.on(copy.CopyModel.HP_CHANGE,this,this.setHp);this._model.off(copy.CopyModel.HP_CHANGE,this,this.setHp)};e.prototype.refreshAll=function(){this.setHp();this.setMachineIcon()};e.prototype.refrshTime=function(){};e.prototype.setHp=function(){this.labelshengyuxueliang.text=app.getLang("剩余血量："+this._model.hp)};e.prototype.setMachineIcon=function(){if(this._model.mapdata.showmachine==""){this.centerLayout.array=[]}else{var t=app.str2Array(this._model.mapdata.showmachine,";");this.centerLayout.array=t}};e.SINGLE_KEY="rebirth.DuJieRightTopView";return e}(ui.bosszhandou.dujiefubenitemUI);t.DuJieRightTopView=e})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(b){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.setpW=Math.floor(this.jindutiao.width/6);this.addChild(this.mask);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnConfirm.clickHandler=new Laya.Handler(this,this.onConfirm);this.steps=[];for(var t=1;t<=7;t++){this.steps.push(this["renwu"+t]);this["renwu"+t].setSelected(false);this["renwu"+t].setName(app.getLang("任务{0}",t))}};t.prototype.onConfirm=function(){app.ViewManager.toggleDialog(t,-1,0)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){var t=this._dataSource[0];var e=this._dataSource[1];var i=game.Context.roleRebirth(t.insId);var n=b.ReBirthModel.getIns().roletranf;var r=0;for(var o in n){if(n[o].rolepos==e){r=n[o].quest;break}}var a=game.TaskModel.getIns().getTaskData(r);if(i>=0&&r>0){var s=csv.TaskProxy.getIns().getCfg(r);var l=game.TaskModel.getIns().getTaskGroupIndex(r);var u=csv.ReBirthProxy.getIns().getCfg(t.transf+1);var p=app.str2Array(u.taskid,"-");this.jindutiao.width=this.setpW*(p.length-1);this.txtTitle.text=app.getLang("transfer_11",l);this.txtName.text=app.getLang("transfer_11",l);this.txtDesc.text=s?s.name:"";if(a){var h=a.getNum();var c='{0}<span color="{1}">{2}</span>';var f=app.str2Array(s.param,"-");var g=f[1]?f[1]:1;var d=a.data.questSate==1;if(a.cfg.subtype==60&&a.data.questSate==1){h=game.GridsModel.getIns().getItemCount(parseInt(f[0]));d=h<parseInt(f[1])}var y=app.getLang(c,s.name,game.STYLES.RED_COLOR_S,"("+h+"/"+g+")");var m=app.getLang(c,s.name,game.STYLES.GREEN_COLOR_S,"("+g+"/"+g+")");this.txtDesc.text=d?y:m;for(var o=0;o<this.steps.length;o++){this.steps[o].visible=false}for(var o=1;o<=p.length;o++){this.steps[o-1].visible=true;this.steps[o-1].setSelected(o<=l)}var v=1/(p.length-1);if(a.data.questSate==2||a.data.questSate==3){this.jindutiao.value=v*l}else{this.jindutiao.value=v*(l-1);this.steps[l-1].setSelected(false)}}}};t.SINGLE_KEY="rebirth.ReBirthScheduleView";return t}(ui.dujie.dujierenwutipnewUI);b.ReBirthScheduleView=t})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.width=Laya.stage.width;this.height=Laya.stage.height;this.zOrder=app.AppContainer.UI_LAYER_NUME.ROLE_CREATE;this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.box.centerX=this.box.centerY=0;this.boxbg.centerX=this.boxbg.centerY=0;this.boxbg.scaleX=this.boxbg.scaleY=app.AppContainer.getScale(750,1334);this.animationchenggong01.on(Laya.Event.COMPLETE,this,this.onEffectComplete);this.animationfaguang.on(Laya.Event.COMPLETE,this,this.onEffectComplete2)};t.prototype.onEffectComplete=function(){this.animationchenggong01.visible=false;this.animationchenggong01.stop();this.animationchenggong02.play(0,true);this.animationchenggong02.visible=true;this.animationfaguang.play(0,true);this.animationfaguang.visible=true};t.prototype.onEffectComplete2=function(){this.animationfaguang.stop();this.animationfaguang.visible=false;this.onRebirtPayStop()};t.prototype.onClickHandler=function(){this.off(Laya.Event.CLICK,this,this.onClickHandler);app.ViewManager.toggleView(i.ReBirthSuccessView,app.AppContainer.uiLayer,-1);app.ProtocolRequest.DujieResultSyn(1)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.rebirthPlay.stop();this.animationbg.stop();this.animationchenggong01.stop();this.animationchenggong02.stop();this.animationfaguang.stop();this.animationchenggong01.visible=false;this.animationchenggong02.visible=false;this.animationfaguang.visible=false;this.skt&&this.skt.stop();this.rebirthPlay.visible=false;this.skt.removeSelf()};t.prototype.onRebirtPayStop=function(){this.imghuluwa.visible=false;var t="res/sks/"+csv.DefclassProxy.getIns().getCfg(this.dataSource[1]).createname+".sk";this.setAvatar(t);this.on(Laya.Event.CLICK,this,this.onClickHandler)};t.prototype.refreshAll=function(){this.imghuluwa.skin="res/static/dujiejiesuan/bg_dujiechenggong_huluwa_0"+this.dataSource[1]+".png";this.rebirthPlay.play(0,false);this.imghuluwa.visible=true;this.animationbg.play(0,true);this.animationchenggong01.play(0,false);this.animationchenggong01.visible=true;this.animationchenggong02.visible=false};t.prototype.setAvatar=function(t){if(this.skt&&this.skt.parent){this.skt.removeSelf()}else{this.skt=new common.CSkt;this.skt.x=this.spritelonggu.x;this.skt.y=this.spritelonggu.y}this.skt.init(t);this.addChild(this.skt)};t.SINGLE_KEY="rebirth.ReBirthSuccessView";return t}(ui.dujie.dujiechenggongviewnewUI);i.ReBirthSuccessView=t})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.label.text=app.getLang("前路凶猛，不如多叫点人来帮忙");this.quxiaobtn.label=app.getLang("单人进入");this.quedingbtn.label=app.getLang("组队进入");this.quxiaobtn.clickHandler=new Laya.Handler(this,this.onQuestDgnReq);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onTeamEnter)};t.prototype.onQuestDgnReq=function(){app.ProtocolRequest.QuestDgnReq(parseInt(this.dataSource[0]),0)};t.prototype.onTeamEnter=function(){team.TeamModel.getIns().openTeam(csv.FunctionsProxy.ENUMS.REBIRTH)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.label.valign="center"};t.SINGLE_KEY="rebirth.ReBirthTeamView";return t}(ui.alert.alert01UI);t.ReBirthTeamView=e})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._recordY=this.dianwo.y};e.prototype.onDisplay=function(){guide.GuideModel.getIns().boOpen=false;this.callLater(this.refreshAll);this.dianwo.y=this._recordY;this.dianwo.scale(.75,.75);this.dianwo.x=111;this.animationxiang.x=110;this.imgxiang.scale(1.5,1.5);this.imgxiang.x=104;this.imgxiang.y=-14;this.imgxianglu.scale(1.5,1.5);this.imgxianglu.x=-20;this.imgxianglu.on(Laya.Event.CLICK,this,this._shangxiang)};e.prototype.onUnDisplay=function(){guide.GuideModel.getIns().boOpen=true;Laya.Tween.clearAll(this.dianwo);this.imgxianglu.off(Laya.Event.CLICK,this,this._shangxiang)};e.prototype.refreshAll=function(){this.imgxiang.visible=false;this.dianwo.visible=true;this.animationxiang.visible=false;this._setPos();this._imgTween1();game.SceneModel.createAllScreenSp(6,.5,app.AppContainer.uiLayer,9998);this.zOrder=9999};e.prototype._setPos=function(){var t=csv.NpcProxy.getIns().getNpcVO(2006);var e=t.getCfg();var i=isometric.IsoUtils.isoToScreen(new isometric.Point3D(e.x1*32,0,e.y1*32));i=scene.SceneMediator.getInstance().isoWorld.localToGlobal(i);this.x=i.x-this.width/2;this.y=i.y-this.height/2};e.prototype._shangxiang=function(){var t=this;this.dianwo.visible=false;Laya.Tween.clearAll(this.dianwo);var e=r.ReBirthModel.getIns().quest;var i=game.TaskModel.getIns().getTaskData(e);var n=game.GridsModel.getIns().hasEnoughItems(game.ItemUtil.parserList(i.cfg.param)[0],false,false);if(n){this.imgxiang.visible=true;this.animationxiang.visible=true;this.animationxiang.play(0,false);Laya.timer.once(1e3,this,function(){app.ViewManager.toggleView(r.ShangXiangTeXiaoView,app.AppContainer.uiLayer,-1);game.SceneModel.clearAllScreenSp();t._godEffect()});app.ProtocolRequest.SubQuestItemReq(e,[]);this.imgxianglu.off(Laya.Event.CLICK,this,this._shangxiang)}else{game.Alert.show(app.getLang("dujie_msion1"));app.ViewManager.toggleView(r.ShangXiangTeXiaoView,app.AppContainer.uiLayer,-1);game.SceneModel.clearAllScreenSp()}};e.prototype._godEffect=function(){var t=this;var e=csv.NpcProxy.getIns().getNpcVO(2006);var i=scene.SceneMediator.getInstance().getViewById(e.insId);if(i){if(!this.effect){this.effect=Laya.Pool.getItemByClass("shenxiangfaguang",Laya.Animation);this.effect.interval=200}this.effect.loadAtlas("res/atlas/ani/ui/skill_shenxiangfaguang.atlas");this.effect.play();this.effect.x=-200;this.effect.y=-400;i.addChild(this.effect);Laya.timer.once(1e3,this,function(){t.effect.removeSelf();game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.REBIRTH)})}};e.prototype._imgTween1=function(){Laya.Tween.to(this.dianwo,{y:this._recordY-2},600,null,new Laya.Handler(this,this._imgTween2))};e.prototype._imgTween2=function(){Laya.Tween.to(this.dianwo,{y:this._recordY+4},1200,null,new Laya.Handler(this,this._imgTween1))};e.SINGLE_KEY="rebirth.ShangXiangTeXiaoView";return e}(ui.dujie.dujiexiangluviewUI);r.ShangXiangTeXiaoView=t})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var rebirth;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setSelected=function(t){this.imgSelected.visible=t};e.prototype.setName=function(t){this.txtName.text=t};e.SINGLE_KEY="rebirth.TaskFlagView";return e}(ui.dujie.dujieitem3newUI);t.TaskFlagView=e})(rebirth||(rebirth={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=r.EquipModel.getIns();app.ViewManager.regist(r.RoleMainView,"zhuangbei.atlas");app.ViewManager.regist(r.EquipQianghuaView,"zhuangbei.atlas");app.ViewManager.regist(r.EquipJinlianView,"zhuangbei.atlas");app.ViewManager.regist(r.RoleEquipFumoView,"zhuangbei.atlas");app.ViewManager.regist(r.RoleEquipXuexiTuzhiView,"zhuangbei.atlas");app.ViewManager.regist(r.RoleEquipFumoTuzhiView,"zhuangbei.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.ZHUANGBEI_FUMO,r.RoleEquipFumoView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.EQUIP_WEAR,r.RoleMainView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.EQUIP_WEAR,this._model,this._model.updataMainRoleRed);fabaonew.FaBaoNewModel.getIns().on(fabaonew.FabaoNewEvent.TASK_VALUE_CHANGE,this,this.onFabaoChange);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.EQUIP_QIANGHUA,r.EquipQianghuaView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.EQUIP_QIANGHUA,this._model,this._model.updataQianghuaRed);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.EQUIP_BAOSHI,r.EquipBaoshiView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.EQUIP_BAOSHI,this._model,this._model.updataBaoshiRed);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.EQUIP_CUILIAN,r.EquipCuilianView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.EQUIP_CUILIAN,this._model,this._model.updataCuilianRed);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.EQUIP_JINGLIAN,r.EquipJinlianView);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.EQUIP_JINGLIAN,this._model,this._model.updataJinglianRed);common.SecondCommonWindow.groupFuncs(common.SecondCommonWindow.GROUP_ID.EQUIP,[csv.FunctionsProxy.ENUMS.EQUIP_QIANGHUA,csv.FunctionsProxy.ENUMS.EQUIP_BAOSHI,csv.FunctionsProxy.ENUMS.EQUIP_CUILIAN,csv.FunctionsProxy.ENUMS.EQUIP_JINGLIAN]);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.RESONATE_QIANGHUA,r.EquipResonate1View);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.RESONATE_CUILIAN,r.EquipResonate2View);common.SecondCommonWindow.registFunctionView(csv.FunctionsProxy.ENUMS.RESONATE_BAOSHI,r.EquipResonate3View);common.SecondCommonWindow.groupFuncs(common.SecondCommonWindow.GROUP_ID.RESONATE,[csv.FunctionsProxy.ENUMS.RESONATE_QIANGHUA,csv.FunctionsProxy.ENUMS.RESONATE_BAOSHI,csv.FunctionsProxy.ENUMS.RESONATE_CUILIAN])};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.EquipStrenAck,this,this.onEquipStrenAck);this.addMsgListener(app.ProtocolResponse.EquipJlAck,this,this.onEquipJlAck);this.addMsgListener(app.ProtocolResponse.EquipclAck,this,this.onEquipclAck);this.addMsgListener(app.ProtocolResponse.EquipGemAck,this,this.onEquipGemAck);this.addMsgListener(app.ProtocolResponse.EquipGemLvAck,this,this.onEquipGemLvAck);this.addMsgListener(app.ProtocolResponse.FmPeifangNtf,this,this.onFmPeifangNtf);this.addMsgListener(app.ProtocolResponse.ModifyFmPeifangNtf,this,this.onModifyFmPeifangNtf)};e.prototype.onFmPeifangNtf=function(t,e){for(var i=0;i<e.fminf.length;i++){var n=e.fminf[i];this._model.setPeifangMap(n)}this._model.event(r.EquipModel.EVENT_FUMO_DATA_UPADTE)};e.prototype.onModifyFmPeifangNtf=function(t,e){for(var i=0;i<e.fminf.length;i++){var n=e.fminf[i];this._model.setPeifangMap(n)}this._model.event(r.EquipModel.EVENT_FUMO_DATA_UPADTE)};e.prototype.onEquipStrenAck=function(t,e){this._model.boQianghuaEnd=true;if(e.result==1){app.SoundManager.getIns().playSound("equipup");this._model.event(r.EquipEvent.QIANG_HUA_SUCCESS);this._model.setResonates1()}else{this._model.event(r.EquipEvent.QIANG_HUA_FAILE)}};e.prototype.onEquipGemAck=function(t,e){if(e.result==1){this._model.setResonates3();this._model.event(r.EquipEvent.BAOSHI_DELL_BACK)}};e.prototype.onEquipGemLvAck=function(t,e){if(e.result==1){manager.EffectManager.playStageEffect("skill_shengjichenggong");this._model.setResonates3()}};e.prototype.onEquipJlAck=function(t,e){if(e.result==1){app.SoundManager.getIns().playSound("equipup");this._model.event(r.EquipEvent.JINGLIAN_SUCCESS,e)}};e.prototype.onEquipclAck=function(t,e){if(e.result==1){app.SoundManager.getIns().playSound("equipup");this._model.event(r.EquipEvent.CUILIAN_SUCCESS);this._model.setResonates2()}};e.prototype.onFabaoChange=function(t){if(t==fabaonew.Etask_type.EquipLow){this._model.updataMainRoleRed()}};e.SINGLE_KEY="equip.EquipModule";return e}(app.ModuleBase);r.EquipModule=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("attribute_level.csv");var e=t.getArray();this.lvlMap={};this.cfgMap={};this.randomMap={};for(var i=0,n=e.length;i<n;i++){var r=e[i];this.cfgMap[r.id]=r;var o=app.str2Array(r.attr,"-");var a=new PropValue;a.propId=parseInt(o[0]);a.flag=parseInt(o[1]);a.formula=parseInt(o[2]);a.value=parseInt(o[3]);this.lvlMap[r.id]=a;var s=app.str2Array(r.attrshow,"-");var l=Attributes.getPropValue(a.propId,parseInt(s[3]),a.formula);var u=Attributes.getPropValue(a.propId,parseInt(s[4]),a.formula);this.randomMap[r.id]="("+l+"—"+u+")"}};e.prototype.getProp=function(t){return this.lvlMap[t]};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getQua=function(t){return this.cfgMap[t].qua};e.prototype.boSpecial=function(t){return this.cfgMap[t].special==1};e.prototype.getRandom=function(t){return this.randomMap[t]};e.SINGLE_KEY="csv.AttributeLevelProxy";return e}(app.ModelBase);t.AttributeLevelProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(p){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.roleResonates={};t.boQianghuaEnd=true;t.clickSelectFumoIndex=-1;t.initSelFumoIndex=-1;t.clickSelectXuexiFumoIndex=-1;t.initSelXuexiFumoIndex=-1;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this.initAllPeifangMap()};t.prototype.updataSecondFuns=function(){this.updataQianghuaRed(true);this.updataJinglianRed(true);this.updataCuilianRed(true);this.updataBaoshiRed(true)};t.prototype.initResonates=function(t){var e=game.GridsModel.getIns().getGridByType(t).itemList;this.roleResonates[t]={};this.roleResonates[t][csv.EquipProxy.RESONATE.QIANGHUA]=csv.EquipProxy.getIns().getResonate1Ids(e);this.roleResonates[t][csv.EquipProxy.RESONATE.CUILIAN]=csv.EquipProxy.getIns().getResonate2Ids(e);this.roleResonates[t][csv.EquipProxy.RESONATE.BAOSHI]={};for(var i=1;i<=p.EquipStatic.BAOSHI_NUM;++i){this.roleResonates[t][csv.EquipProxy.RESONATE.BAOSHI][i]=csv.EquipProxy.getIns().getResonate3Ids(e,i)}};t.prototype.refreshRoleResonates=function(t){this.setResonates1(t);this.setResonates2(t);this.setResonates3(t)};t.prototype.setResonates1=function(t){if(!t){t=this.flag}if(t==game.GridsModel.BAG_ITEM){return}var e=game.GridsModel.getIns().getGridByType(t).itemList;var i=csv.EquipProxy.getIns().getResonate1Ids(e);var n=this.getResonates(t,csv.EquipProxy.RESONATE.QIANGHUA);if(n.length<i.length){var r=i[i.length-1];var o=csv.EquipProxy.getIns().resonateMap[r];p.EquipSuccessTip.add(app.getLang("zhuangbei_gongming7",o.condition[0],o.condition[1]),Attributes.getShowLabels(o.attr),"title_qianghuagongming")}this.roleResonates[t][csv.EquipProxy.RESONATE.QIANGHUA]=i;this.event(p.EquipEvent.RESONATE_CHANGE)};t.prototype.setResonates2=function(t){if(!t){t=this.flag}if(t==game.GridsModel.BAG_ITEM){return}var e=game.GridsModel.getIns().getGridByType(t).itemList;var i=csv.EquipProxy.getIns().getResonate2Ids(e);var n=this.getResonates(t,csv.EquipProxy.RESONATE.CUILIAN);if(n.length<i.length){var r=i[i.length-1];var o=csv.EquipProxy.getIns().resonateMap[r];var a=parseInt(o.condition[1]);var s=app.getLang("cuilian_grade"+csv.EquipProxy.getIns().getGradeByCuilianGrade(a)+"_1");var l=csv.EquipProxy.getIns().getGradeByCuilianLv(a);if(l){p.EquipSuccessTip.add(app.getLang("zhuangbei_gongming8",o.condition[0],s,l),Attributes.getShowLabels(o.attr),"title_cuiliangongming")}else{p.EquipSuccessTip.add(app.getLang("zhuangbei_gongming11",o.condition[0],s),Attributes.getShowLabels(o.attr),"title_cuiliangongming")}}this.roleResonates[t][csv.EquipProxy.RESONATE.CUILIAN]=i;this.event(p.EquipEvent.RESONATE_CHANGE)};t.prototype.setResonates3=function(t){if(!t){t=this.flag}if(t==game.GridsModel.BAG_ITEM){return}var e=game.GridsModel.getIns().getGridByType(t).itemList;for(var i=1;i<=p.EquipStatic.BAOSHI_NUM;++i){var n=csv.EquipProxy.getIns().getResonate3Ids(e,i);var r=this.getResonates(t,csv.EquipProxy.RESONATE.BAOSHI,i);if(r.length<n.length){var o=n[n.length-1];var a=csv.EquipProxy.getIns().resonateMap[o];p.EquipSuccessTip.add(app.getLang("zhuangbei_gongming9",a.condition[1],a.condition[2],app.getLang("baoshi_type_"+a.condition[0])),Attributes.getShowLabels(a.attr),"title_baoshigongming")}this.roleResonates[t][csv.EquipProxy.RESONATE.BAOSHI][i]=n}this.event(p.EquipEvent.RESONATE_CHANGE)};t.prototype.getResonates=function(t,e,i){if(!this.roleResonates[t]||!this.roleResonates[t][e]){return[]}if(i){if(!this.roleResonates[t][e][i]){return[]}return this.roleResonates[t][e][i]}return this.roleResonates[t][e]};Object.defineProperty(t.prototype,"equipVo",{get:function(){var t=game.GridsModel.getIns().getGridByType(this.flag).itemList;for(var e=0,i=t.length;e<i;++e){if(t[e]&&t[e]instanceof items.EquipVO){if(Uint64.equal(t[e].getInstId(),this.insId)){return t[e]}}}return null},enumerable:true,configurable:true});t.prototype.getEquipStrenState=function(t){var e=3;for(var i=0,n=game.Context.roleList.length;i<n;i++){var r=game.GridsModel.EquipEnums[i];for(var o=1;o<=p.EquipStatic.EQUIP_NUM;o++){var a=csv.LeadStrongerProxy.getIns().getEquip(t,o);if(!a){continue}var s=game.GridsModel.getIns().getEquipByTypeAndPos(r,o);if(s){var l=s.getQuality();var u=s.grade;if(u<a.equipgrade){if(e>1){e=1}}else if(u==a.equipgrade){if(l<a.qua){if(e>2){e=2}}}}else{return 0}}}return e};t.prototype.getEquipLvlState=function(t,e){var i=0;for(var n=0,r=game.Context.roleList.length;n<r;n++){var o=game.GridsModel.EquipEnums[n];for(var a=1;a<=p.EquipStatic.EQUIP_NUM;a++){var s=game.GridsModel.getIns().getEquipByTypeAndPos(o,a);if(s){i+=s.strenLv}}}if(i>=t){return 2}if(i>=e){return 1}return 0};t.prototype.getLowestWearEquip=function(t,e){var i;for(var n=0,r=game.Context.roleList.length;n<r;n++){if(e>game.Context.roleList[n].level){continue}var o=game.GridsModel.EquipEnums[n];var a=game.GridsModel.getIns().getEquipByTypeAndPos(o,t);if(a){if(!i){i=a}else{if(!items.EquipVO.compare(i,a)){i=a}}}else{i=undefined;break}}return i};t.prototype.getOneKeyWearList=function(t){var e=[];for(var i=1;i<=p.EquipStatic.EQUIP_NUM;i++){if(i>=4&&i<=6&&game.Context.teamLv<game.Config.getIntParams(1149)){continue}var n=this.getBestEquip(t,i);if(n){var r=game.GridsModel.EquipEnums[t-1];var o=game.GridsModel.getIns().getEquipByTypeAndPos(r,i);if(o){if(items.EquipVO.compare(o,n)){e.push(n)}}else{e.push(n)}}}return e};t.prototype.getBestEquip=function(t,e){var i=game.Context.roleList[t-1].level;var n=game.GridsModel.getIns().getBagEquipsByPosWithoutExpired(e);var r;for(var o=0,a=n.length;o<a;o++){var s=n[o];if(i<s.equipLimitLvl){continue}if(!r){r=s}else{if(items.EquipVO.compare(r,s)){r=s}}}return r};t.prototype.updataMainRoleRed=function(){var t=false;for(var e=1,i=game.Context.roleList.length;e<=i;++e){if(this.getWearRoleRed(e)||this.getQianghuaRed(e)||this.getJinglianRed(e)||this.getCuilianRed(e)||this.getBaoshiRed(e)){t=true;break}}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.EQUIP_WEAR)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.EQUIP_WEAR)}};t.prototype.getWearRoleRedArr=function(){var t=[];for(var e=1,i=game.Context.roleList.length;e<=i;++e){var n=this.getWearRoleRed(e)||this.getQianghuaRed(e)||this.getJinglianRed(e)||this.getCuilianRed(e)||this.getBaoshiRed(e);t.push(n)}return t};t.prototype.getWearRoleRed=function(t){var e=false;for(var i=1;i<=p.EquipStatic.EQUIP_NUM;i++){if(this.checkWearReach(t,i)){e=true;break}}if(!e&&chouka.ChouKaModel.getIns().checkRoleHasRedZhuLingOrNinYun(t)){e=true}if(!e){for(var n=1;n<=p.EquipStatic.FABAO_NUM;n++){if(!e){var r=this.checkNewFaboWear(t,n);if(r){e=true;break}}}}return e};t.prototype.getPeiyangByPos=function(t,e){if(this.getQianghuaRedByPos(t,e)){return true}if(this.getJinglianRedByPos(t,e)){return true}if(this.getCuilianRedByPos(t,e)){return true}if(this.getBaoshiRedByPos(t,e)){return true}return false};t.prototype.getPeiyangByEquipVo=function(t){var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){return false}if(this.getQianghuaRedByEquipVo(t)){return true}if(this.getJinglianRedByEquipVo(t)){return true}if(this.getCuilianRedByEquipVo(t)){return true}if(this.getBaoshiRedByEquipVo(t)){return true}return false};t.prototype.checkWearReach=function(t,e){if(e>=4&&e<=6&&game.Context.teamLv<game.Config.getIntParams(1149)){return false}var i=false;var n=game.GridsModel.EquipEnums[t-1];var r=game.GridsModel.getIns().getEquipByTypeAndPos(n,e);var o=game.GridsModel.getIns().getBagEquipsByPosWithoutExpired(e);var a=o.length;var s=game.Context.roleList[t-1].level;if(r){for(var l=0;l<a;l++){var u=o[l];if(s<u.equipLimitLvl){continue}if(items.EquipVO.compare(r,u)){i=true;break}}}else{for(var l=0;l<a;l++){var p=o[l];if(s>=p.equipLimitLvl){i=true;break}}}return i};t.prototype.checkEquipReplace=function(t,e){var i=false;var n=game.GridsModel.EquipEnums[t-1];var r=game.GridsModel.getIns().getEquipByTypeAndPos(n,e);var o=game.GridsModel.getIns().getBagEquipsByPosWithoutExpired(e);var a=o.length;var s=game.Context.roleList[t-1].level;if(r){for(var l=0;l<a;l++){var u=o[l];if(s<u.equipLimitLvl){continue}if(items.EquipVO.compare(r,u)){i=true;break}}}return i};t.prototype.checkNewFaboWear=function(t,e){var i=false;var n=csv.ChouKaProxy.getIns().getLockLv(e);if(game.Context.roleList[t-1].level<n){return false}var r=chouka.ChouKaModel.getIns().getEquipData(t,e);if(r){}else{if(chouka.ChouKaModel.getIns().getEnableBagListByRoleIndex(t,null,true).hasDress){i=true}}return i};t.prototype.updataQianghuaRed=function(t){if(t===void 0){t=false}if(!t){if(!app.ViewManager.DisplayedInStage(common.SecondCommonWindow.SINGLE_KEY)){return}if(common.SecondCommonWindow.getIns().groupId!=common.SecondCommonWindow.GROUP_ID.EQUIP){return}}var e=this.getQianghuaRedByEquipVo(this.equipVo);if(e){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.EQUIP_QIANGHUA)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.EQUIP_QIANGHUA)}};t.prototype.getQianghuaRed=function(t){var e=false;for(var i=1;i<=p.EquipStatic.EQUIP_NUM;i++){if(this.getQianghuaRedByPos(t,i)){e=true;break}}return e};t.prototype.getQianghuaRedByPos=function(t,e){if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.EQUIP_QIANGHUA)===false){return false}var i=game.GridsModel.EquipEnums[t-1];var n=game.GridsModel.getIns().getEquipByTypeAndPos(i,e);if(n){return this.getQianghuaRedByEquipVo(n)}return false};t.prototype.getQianghuaRedByEquipVo=function(t){var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){return false}var i=t.equipCfg.strengthen_max;if(t.refineLv){i+=csv.EquipProxy.getIns().getRefine(t.pos,t.grade,t.refineLv).strengthen_add}if(t.strenLv<i){var n=csv.EquipProxy.getIns().getStren(t.getItemId(),t.strenLv+1);if(game.GridsModel.getIns().hasEnoughItems(n.cost_money)&&game.GridsModel.getIns().hasEnoughItems(n.intensifyexpend)){return true}}return false};t.prototype.getWearStrenLv=function(){var t=0;for(var e=1,i=game.Context.roleList.length;e<=i;++e){var n=game.GridsModel.EquipEnums[e-1];var r=game.GridsModel.getIns().getGridByType(n);for(var o=0;o<r.itemList.length;++o){var a=r.itemList[o];t+=a.strenLv}}return t};t.prototype.getRoleIndexByWeStrenLv=function(t){var e;var i;for(var n=1,r=game.Context.roleList.length;n<=r;++n){var o=game.GridsModel.EquipEnums[n-1];var a=game.GridsModel.getIns().getGridByType(o);for(var s=0;s<a.itemList.length;++s){var l=a.itemList[s];if(l.strenLv>=t){return[n,l.pos]}if(!e){e=n;i=l.pos}}}return[e,i]};t.prototype.getCanStrenRoleIndex=function(){var t;var e;for(var i=1,n=game.Context.roleList.length;i<=n;++i){var r=game.GridsModel.EquipEnums[i-1];var o=game.GridsModel.getIns().getGridByType(r);for(var a=0;a<o.itemList.length;++a){var s=o.itemList[a];if(this.getQianghuaRedByEquipVo(s)){return[i,s.pos]}if(!t){t=i;e=s.pos}}}return[t,e]};t.prototype.updataJinglianRed=function(t){if(t===void 0){t=false}if(!t){if(!app.ViewManager.DisplayedInStage(common.SecondCommonWindow.SINGLE_KEY)){return}if(common.SecondCommonWindow.getIns().groupId!=common.SecondCommonWindow.GROUP_ID.EQUIP){return}}var e=false;if(this.flag!=-1){e=this.getJinglianRedByEquipVo(this.equipVo)}if(e){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.EQUIP_JINGLIAN)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.EQUIP_JINGLIAN)}};t.prototype.getJinglianRed=function(t){var e=false;for(var i=1;i<=p.EquipStatic.EQUIP_NUM;i++){if(this.getJinglianRedByPos(t,i)){e=true;break}}return e};t.prototype.getJinglianRedByPos=function(t,e){if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.EQUIP_JINGLIAN)===false){return false}var i=game.GridsModel.EquipEnums[t-1];var n=game.GridsModel.getIns().getEquipByTypeAndPos(i,e);if(n){return this.getJinglianRedByEquipVo(n)}return false};t.prototype.getJinglianRedByEquipVo=function(t){var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){return false}var i=csv.EquipProxy.getIns().getRefine(t.pos,t.grade,t.refineLv+1);if(i){if(game.GridsModel.getIns().hasEnoughItems(i.cost_money)&&game.GridsModel.getIns().hasEnoughItems(i.cost)){return true}}return false};t.prototype.updataCuilianRed=function(t){if(t===void 0){t=false}if(!t){if(!app.ViewManager.DisplayedInStage(common.SecondCommonWindow.SINGLE_KEY)){return}if(common.SecondCommonWindow.getIns().groupId!=common.SecondCommonWindow.GROUP_ID.EQUIP){return}}var e=false;if(this.flag!=-1){e=this.getCuilianRedByEquipVo(this.equipVo)}if(e){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.EQUIP_CUILIAN)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.EQUIP_CUILIAN)}};t.prototype.getCuilianRed=function(t){var e=false;for(var i=1;i<=p.EquipStatic.EQUIP_NUM;i++){if(this.getCuilianRedByPos(t,i)){e=true;break}}return e};t.prototype.getCuilianRedByPos=function(t,e){if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.EQUIP_CUILIAN)===false){return false}var i=game.GridsModel.EquipEnums[t-1];var n=game.GridsModel.getIns().getEquipByTypeAndPos(i,e);if(n){return this.getCuilianRedByEquipVo(n)}return false};t.prototype.getCuilianRedByEquipVo=function(t){var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){return false}for(var i=1;i<=3;i++){if(this.getCuilianRedsByEquipVoAndSubPos(t,i)){return true}}return false};t.prototype.getCuilianRedsByEquipVoAndSubPos=function(t,e){var i=t.quench[e-1];if(i>=t.equipCfg.cuilian_max){return false}var n;if(i){n=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,i)}else{n=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,i+1)}if(n["attribute"+e]==""){return false}var r=csv.EquipProxy.getIns().getCuilianAlive(n,e,t);if(r!=""){return false}var o;if(i){o=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,i+1)}else{o=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,2)}if(csv.EquipProxy.getIns().getCuilianCondition(o,e,t)!=""){return false}return game.GridsModel.getIns().hasEnoughItems(o.cost_money)&&game.GridsModel.getIns().hasEnoughItems(o.cost)};t.prototype.updataBaoshiRed=function(t){if(t===void 0){t=false}if(!t){if(!app.ViewManager.DisplayedInStage(common.SecondCommonWindow.SINGLE_KEY)){return}if(common.SecondCommonWindow.getIns().groupId!=common.SecondCommonWindow.GROUP_ID.EQUIP){return}}var e=false;if(this.flag!=-1){e=this.getBaoshiRedByEquipVo(this.equipVo)}if(e){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.EQUIP_BAOSHI)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.EQUIP_BAOSHI)}};t.prototype.getBaoshiRed=function(t){var e=false;for(var i=1;i<=p.EquipStatic.EQUIP_NUM;i++){if(this.getBaoshiRedByPos(t,i)){e=true;break}}return e};t.prototype.getBaoshiRedByPos=function(t,e){if(csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.EQUIP_BAOSHI)===false){return false}var i=game.GridsModel.EquipEnums[t-1];var n=game.GridsModel.getIns().getEquipByTypeAndPos(i,e);if(n){return this.getBaoshiRedByEquipVo(n)}return false};t.prototype.getBaoshiRedByEquipVo=function(t){var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){return false}for(var i=1;i<=3;i++){if(this.getBaoshiRedsByEquipVoAndSubPos(t,i)){return true}}return false};t.prototype.getBaoshiRedsByEquipVoAndSubPos=function(t,e){if(e>t.equipCfg.gem_num){return false}var i=csv.EquipProxy.getIns().getBaoshiOpenLv(e);if(t.strenLv<i){return false}var n=t.gem[e];if(n==null||n==undefined){return this.getGemWearRed(t,e)}else{if(this.getGemUplvl(n)){return true}}return false};t.prototype.getGemWearRed=function(t,e){var i=[];for(var n=1;n<=3;n++){if(n==e){continue}if(t.gem[n]){i.push(csv.EquipProxy.getIns().getBaoshiType(t.gem[n]))}}var r=game.GridsModel.getIns().getBagItemsByItemType(csv.ItemProxy.TYPES.BAOSHI);for(var o=0,a=r.length;o<a;o++){var s=csv.EquipProxy.getIns().getBaoshiType(r[o].getItemId());if(i.indexOf(s)==-1){return true}}return false};t.prototype.getGemUplvl=function(t){var e=false;var i=csv.HechengProxy.getIns().getCostUpInfo(t);if(i){var n=i[2];if(n.team_level&&game.Context.teamLv<n.team_level){return false}var r=i[1]-1;var o=game.GridsModel.getIns().getItemCount(t);if(o>=r){e=true}}return e};t.prototype.initselIndex=function(t){if(this.initSelFumoIndex!=-1){if(this.initSelFumoIndex>t){this.initSelFumoIndex=t}}else{this.initSelFumoIndex=t}return this.initSelFumoIndex==-1?1:this.initSelFumoIndex};t.prototype.initselXuejiIndex=function(t){if(this.initSelXuexiFumoIndex!=-1){if(this.initSelXuexiFumoIndex>t){this.initSelXuexiFumoIndex=t}}else{this.initSelXuexiFumoIndex=t}return this.initSelXuexiFumoIndex==-1?1:this.initSelXuexiFumoIndex};t.prototype.initAllPeifangMap=function(){this._peifangMap={};var t=csv.EquipProxy.getIns().getEquipFumoCfgArr();for(var e=0;e<t.length;e++){var i=t[e];this._peifangMap[i.id]={};this._peifangMap[i.id].id=i.id;this._peifangMap[i.id].isStudy=false;this._peifangMap[i.id].cfg=csv.EquipProxy.getIns().getEquipFumoCfgMap(i.id);this._peifangMap[i.id].lvCfg=null;this._peifangMap[i.id].net=null}};t.prototype.setPeifangMap=function(t){if(!this._peifangMap[t.fid].isStudy){this._peifangMap[t.fid].isStudy=true}this._peifangMap[t.fid].net=t;this._peifangMap[t.fid].lvCfg=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(t.fid,t.flv)};t.prototype.getPeifangMap=function(){return this._peifangMap};t.prototype.getPeifangArr=function(){var t=[];for(var e in this._peifangMap){t.push(this._peifangMap[e])}return t};t.prototype.getPeifangArrByPos=function(t){var e=[];var i=this.getPeifangArr();for(var n=0;n<i.length;n++){if(i[n].cfg.equiptype==t){e.push(i[n])}}return e};t.prototype.getProStr=function(t,e,i){if(i===void 0){i=1}var n="";var r=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(t,e==0?1:e);var o=r.showpro.split(";");var a=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(t,e+1);if(i==2){var s=+o[0].split("-")[1];if(o.length==1){n=app.getLang(r.showdesc+"_a",s)}else{var l=+o[1].split("-")[1];n=app.getLang(r.showdesc+"_a",s,l/100)}return n}if(e==0){var s=+o[0].split("-")[1];if(o.length==1){n=app.getLang(r.showdesc,s)}else{var l=+o[1].split("-")[1];n=app.getLang(r.showdesc,s,l/100)}return n}if(a){var u=a.showpro.split(";");var s=+o[0].split("-")[1];var p=+u[0].split("-")[1];var h=p-s;if(o.length==1){n=app.getLang(r.showdesc,s+"(+"+h+")")}else{var c=+u[1].split("-")[1];var l=+o[1].split("-")[1];var f=c-s;n=app.getLang(r.showdesc,s+"(+"+h+")",l/100+"(+"+f/100+")")}}else{var s=+o[0].split("-")[1];if(o.length==1){n=app.getLang(r.showdesc,s)}else{var l=+o[1].split("-")[1];n=app.getLang(r.showdesc,s,l/100)}}return n};t.SINGLE_KEY="equip.EquipModel";t.EVENT_FUMO_LEVEL_UP="EVENT_FUMO_LEVEL_UP";t.EVENT_FUMO_DATA_UPADTE="EVENT_FUMO_DATA_UPADTE";return t}(app.ModelBase);p.EquipModel=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(c,t);function c(){return t!==null&&t.apply(this,arguments)||this}c.getIns=function(){return app.Singleton.getInstance(c)};c.prototype.init=function(){var t=app.Config.getResById("equip.csv");this.equipMap=t.getMap("equipid");this.initSmelt();this.initStren();this.initRefine();this.initCuilian();this.initBaoshi();this.initResonate();this.initEquipFumo()};c.prototype.initEquipFumo=function(){var t=app.Config.getResById("peifang.csv");this.peifangMap=t.getMap("id");this.peifangArr=t.getArray();var e=app.Config.getResById("peifang_update.csv");this.peifangLvMap=e.getMap("magicid","level")};c.prototype.getEquipFumoCfgMap=function(t){return this.peifangMap[t]};c.prototype.getEquipFumoCfgArr=function(){return this.peifangArr};c.prototype.getEquipFumoLvCfgMap=function(t,e){return this.peifangLvMap[t][e]};c.prototype.initSmelt=function(){var t=app.Config.getResById("smelt.csv");this.smeltMap=t.getMap("type")};c.prototype.getEquip=function(t){return this.equipMap[t]};c.prototype.initStren=function(){var t=app.Config.getResById("equip_strengthen.csv");this.strenMap=t.getMapList("equip","intensifylv");this.strenSmeltMap={}};c.prototype.getStren=function(t,e){if(this.strenMap[t]&&this.strenMap[t][e]){return this.strenMap[t][e][0]}return null};c.prototype.getStrenSmeltCost=function(t,e){if(!this.strenSmeltMap[t]){this.strenSmeltMap[t]={};var i=[];var n=[];var r=this.strenMap[t];for(var o in r){var a=r[o][0];i.push(a.cost_money);n.push(a.intensifyexpend);var s=game.ItemUtil.hebingItemsByStr(i);s=game.ItemUtil.discountItemsByStr(s,this.smeltMap[c.RETURE_TYPE.QIANGHUA].return_money);var l=game.ItemUtil.hebingItemsByStr(n);l=game.ItemUtil.discountItemsByStr(l,this.smeltMap[c.RETURE_TYPE.QIANGHUA].return_item);this.strenSmeltMap[t][a.intensifylv]=s.concat(l)}}return this.strenSmeltMap[t][e]};c.prototype.initRefine=function(){var t=app.Config.getResById("equip_refining.csv");this.refineMap=t.getMapList("equippart","equipgrade");this.refineSmeltMap={}};c.prototype.getRefines=function(t,e){if(this.refineMap[t]&&this.refineMap[t][e]){return this.refineMap[t][e]}return[]};c.prototype.getRefine=function(t,e,i){if(this.refineMap[t]&&this.refineMap[t][e]){return this.refineMap[t][e][i-1]}return null};c.prototype.getRefineMax=function(t,e){if(this.refineMap[t]&&this.refineMap[t][e]){return this.refineMap[t][e].length}return 0};c.prototype.getRefineSmeltCost=function(t,e,i){var n=t+"_"+e;if(!this.refineSmeltMap[n]){this.refineSmeltMap[n]={};var r=[];var o=[];var a=this.getRefines(t,e);for(var s=0,l=a.length;s<l;++s){var u=a[s];r.push(u.cost_money);o.push(u.cost);var p=game.ItemUtil.hebingItemsByStr(r);p=game.ItemUtil.discountItemsByStr(p,this.smeltMap[c.RETURE_TYPE.JINLIAN].return_money);var h=game.ItemUtil.hebingItemsByStr(o);h=game.ItemUtil.discountItemsByStr(h,this.smeltMap[c.RETURE_TYPE.JINLIAN].return_item);this.refineSmeltMap[n][u.level]=p.concat(h)}}return this.refineSmeltMap[n][i]};c.prototype.getAddRefineDes=function(t){var e;var i=app.str2Array(t.attr_add,"-");if(i.length==2){e=csv.SkillProxy.getIns().getCfg(parseInt(i[0]),parseInt(i[1])).explain}else{var n=new PropValue;n.propId=parseInt(i[0]);n.flag=parseInt(i[1]);n.formula=parseInt(i[2]);n.value=parseInt(i[3]);e=Attributes.getShowLabel(n,"{0}+{1}")}return e};c.prototype.getAllAddRefineDes=function(t,e,i,n){if(n===void 0){n=1}var r=[];for(var o=n;o<=i;o++){var a=this.getRefine(t,e,o);if(a.attr_add==""){continue}r.push(this.getAddRefineDes(a))}return r};c.prototype.initCuilian=function(){var t=app.Config.getResById("equip_quenching.csv");var e=t.getArray();this.cuilianMap={};this.cuilianMaxGrade={};this.cuilianGradeMatchLv={};this.cuilianSmeltMap={};for(var i=0,n=e.length;i<n;i++){var r=e[i];if(!this.cuilianMap[r.equippart]){this.cuilianMap[r.equippart]={};this.cuilianMaxGrade[r.equippart]={}}if(!this.cuilianMap[r.equippart][r.equipgrade]){this.cuilianMap[r.equippart][r.equipgrade]=[];this.cuilianMaxGrade[r.equippart][r.equipgrade]={}}this.cuilianMap[r.equippart][r.equipgrade].push(r);this.cuilianMaxGrade[r.equippart][r.equipgrade][r.grade]=r.level;this.cuilianGradeMatchLv[r.index]=r}};c.prototype.getCuilian=function(t,e,i){if(this.cuilianMap[t]&&this.cuilianMap[t][e]){return this.cuilianMap[t][e][i-1]}return null};c.prototype.getCuilianShowExtAddEle=function(t,e,i,n){var r;if(this.cuilianMap[t]&&this.cuilianMap[t][e]){var o=this.cuilianMap[t][e];for(var a=0,s=o.length;a<s;a++){var l=o[a];if(l.level==0&&l["attribute"+i]!=""){if(l.index>n){r=l;break}r=l}}}return r};c.prototype.getCuilianExtAddArr=function(t,e,i,n){var r=[];if(this.cuilianMap[t]&&this.cuilianMap[t][e]){var o=this.cuilianMap[t][e];for(var a=0,s=o.length;a<s;a++){var l=o[a];if(l.level==0&&l["attribute"+i]!=""){var u=Attributes.decode(l["attribute"+i]).baseList;if(u.length>1){u.splice(0,1);r.push({ele:l,props:u})}}}}return r};c.prototype.getCuilianSmeltCost=function(t,e,i){var n=t+"_"+e;if(!this.cuilianSmeltMap[n]){this.cuilianSmeltMap[n]={};var r=[];var o=[];var a=this.cuilianMap[t][e];for(var s=0,l=a.length;s<l;++s){var u=a[s];if(u.cost_money!=""){r.push(u.cost_money)}o.push(u.cost);var p=game.ItemUtil.hebingItemsByStr(r);p=game.ItemUtil.discountItemsByStr(p,this.smeltMap[c.RETURE_TYPE.CUILIAN].return_money);var h=game.ItemUtil.hebingItemsByStr(o);h=game.ItemUtil.discountItemsByStr(h,this.smeltMap[c.RETURE_TYPE.CUILIAN].return_item);this.cuilianSmeltMap[n][u.index]=p.concat(h)}}return this.cuilianSmeltMap[n][i]};c.prototype.getMaxCuilianGradeLv=function(t){return this.cuilianMaxGrade[t.equippart][t.equipgrade][t.grade]};c.prototype.getGradeByCuilianGrade=function(t){return this.cuilianGradeMatchLv[t].grade};c.prototype.getGradeByCuilianLv=function(t){return this.cuilianGradeMatchLv[t].level};c.prototype.checkCuilianStates=function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i];if(r[0]=="1"){if(e.strenLv<parseInt(r[1])){return false}}else{var o=parseInt(r[1]);if(e.quench[o-1]<parseInt(r[2])){return false}}}return true};c.prototype.getCuilianAlive=function(t,e,i){var n=app.str2Array(t["condition"+e],";","-");for(var r=0,o=n.length;r<o;r++){var a=n[r];if(a[0]=="1"){if(i.strenLv<parseInt(a[1])){return app.getLang("cuilian_text3",a[1])}}}return""};c.prototype.getCuilianCondition=function(t,e,i){var n=app.str2Array(t["condition"+e],";","-");for(var r=0,o=n.length;r<o;r++){var a=n[r];if(a[0]=="2"){var s=parseInt(a[1]);var l=parseInt(a[2]);if(i.quench[s-1]<l){var u=this.getCuilian(i.pos,i.grade,l);var p=void 0;if(u.level){p=app.getLang("cuilian_grade"+u.grade,u.level)}else{p=app.getLang("cuilian_grade"+u.grade+"_1")}return s==1?app.getLang("cuilian_tupo1",p):app.getLang("cuilian_tupo2",p)}}}return""};c.prototype.initBaoshi=function(){var t=app.Config.getResById("equipgem.csv");this.baoshiMap=t.getMap("id");t=app.Config.getResById("equipgemopen.csv");var e=t.getArray();this.baoshiOpen={};for(var i=0;i<e.length;i++){var n=e[i];this.baoshiOpen[n.sort]=n.strengthen_level}};c.prototype.getBaoshi=function(t){return this.baoshiMap[t]};c.prototype.getBaoshiAttr=function(t){var e=Attributes.decode(this.getBaoshi(t).attr);return Attributes.getShowLabel(e.baseList[0],"{0}+{1}")};c.prototype.getBaoshiType=function(t){return this.getBaoshi(t).type};c.prototype.getBaoshiOpenLv=function(t){if(this.baoshiOpen[t])return this.baoshiOpen[t];return 0};c.prototype.initResonate=function(){var t=app.Config.getResById("resonate.csv");var e=t.getArray();this.resonateMap={};this.resonate1=[];this.resonate2=[];this.resonate3={};for(var i=0,n=e.length;i<n;i++){var r=e[i];var o=app.str2Array(r.condition,"-");var a=Attributes.decode(r.attr).baseList;var s={id:r.id,condition:o,attr:a};if(r.type==c.RESONATE.QIANGHUA){this.resonate1.push(s)}else if(r.type==c.RESONATE.CUILIAN){this.resonate2.push(s)}else{var l=o[0];if(!this.resonate3[l]){this.resonate3[l]=[]}s["type"]=l;this.resonate3[l].push(s)}this.resonateMap[r.id]=s}};c.prototype.getResonate1Ids=function(t){var e=[];var i=this.resonate1;for(var n=0,r=i.length;n<r;++n){var o=i[n];var a=parseInt(o.condition[0]);var s=parseInt(o.condition[1]);var l=0;for(var u=0,p=t.length;u<p;++u){var h=t[u];if(h.strenLv>=s){l++}}if(l>=a){e.push(o.id)}}return e};c.prototype.getResonate2Ids=function(t){var e=[];var i=this.resonate2;for(var n=0,r=i.length;n<r;++n){var o=i[n];var a=parseInt(o.condition[0]);var s=parseInt(o.condition[1]);var l=0;for(var u=0,p=t.length;u<p;++u){var h=t[u];for(var c=0,f=h.quench.length;c<f;++c){var g=h.quench[c];if(g>=s){l++}}}if(l>=a){e.push(o.id)}}return e};c.prototype.getResonate3Ids=function(t,e){var i=[];var n=this.resonate3[e];if(!n){return[]}for(var r=0,o=n.length;r<o;++r){var a=n[r];var s=parseInt(a.condition[1]);var l=parseInt(a.condition[2]);var u=0;for(var p=0,h=t.length;p<h;++p){var c=t[p];for(var f in c.gem){var g=c.gem[f];if(e!=this.getBaoshiType(g)){continue}var d=csv.ItemProxy.getIns().getItemCfgById(g);if(d.level>=l){u++}}}if(u>=s){i.push(a.id)}}return i};c.prototype.getTotalResonate=function(t){var e=[];var i=t.length;if(i){var n=csv.EquipProxy.getIns().resonateMap[t[i-1]];e=n.attr}return Attributes.getShowLabels(e,"{0}+{1}")};c.SINGLE_KEY="csv.EquipProxy";c.RETURE_TYPE={QIANGHUA:1,CUILIAN:2,JINLIAN:3};c.CUILIAN_GRADE_ICON=["","zhuangbei/bg_cuilian_gezi_1.png","zhuangbei/bg_cuilian_gezi_2.png","zhuangbei/bg_cuilian_gezi_3.png","zhuangbei/bg_cuilian_gezi_4.png","zhuangbei/bg_cuilian_gezi_5.png"];c.RESONATE={QIANGHUA:1,CUILIAN:2,BAOSHI:3};return c}(app.ModelBase);t.EquipProxy=e})(csv||(csv={}));var equip;(function(t){var e=function(){function t(){}t.ROLE_MAIN_ATTRIBUTE_SHOW=[2,4,1];t.FABAO_NUM=2;t.EQUIP_NUM=6;t.HULU_NUM=2;t.SOUL_NUM=6;t.SIXBOX_NUM=7;t.BAOSHI_NUM=8;return t}();t.EquipStatic=e;var i=function(){function t(){}t.QIANG_HUA_SUCCESS="qiang_hua_success";t.QIANG_HUA_FAILE="qiang_hua_faile";t.JINGLIAN_SUCCESS="jinglian_success";t.CUILIAN_SUCCESS="cuilian_success";t.BAOSHI_DELL_BACK="baoshi_dell_back";t.RESONATE_CHANGE="resonate_change";return t}();t.EquipEvent=i})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list.itemRender=i;this.list.renderHandler=new Laya.Handler(this,this.onRender)};e.prototype.onRender=function(t,e){t.setData(t.dataSource);t.gezi.clickHandler=new Laya.Handler(this,this.onClickHandler,[t.dataSource])};e.prototype.onClickHandler=function(t){};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.type=t;this.biaotiname.text=app.getLang("baoshi_type_"+t);this.list.array=e;this.list.height=Math.ceil(e.length/this.list.repeatX)*(180+this.list.spaceY);this.height=this.list.height+this.list.y};e.prototype.getH=function(){return this.height};e.SINGLE_KEY="equip.EquipBaoshiBagItem";return e}(ui.zhuangbei.baoshibeibaoitem2UI);r.EquipBaoshiBagItem=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){if(r.EquipBaoshiBagView.getIns().selectItem==this){return}var t=r.EquipModel.getIns().equipVo;var e=csv.EquipProxy.getIns().getBaoshiType(this.gemid);for(var i=1;i<=3;i++){if(i==r.EquipBaoshiBagView.getIns().position){continue}if(t.gem[i]){var n=csv.EquipProxy.getIns().getBaoshiType(t.gem[i]);if(n==e){manager.FlowManager.instance.flowByStyle1(app.getLang("equip_gemtips5"));return}}}if(r.EquipBaoshiBagView.getIns().selectItem){r.EquipBaoshiBagView.getIns().selectItem.setSelect(false)}this.setSelect(true)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.getInsId=function(){return this.dataSource.getInstId()};e.prototype.setData=function(t){this.gezi.setData(t);this.gemid=t.getItemId();this.baoshiname.text=app.getLang(t.getName());this.shuzh.text=csv.EquipProxy.getIns().getBaoshiAttr(this.gemid);this.imgxiang.visible=r.EquipBaoshiBagView.getIns().gemid==this.gemid;this.setSelect(r.EquipBaoshiBagView.getIns().gemid==this.gemid)};e.prototype.setSelect=function(t){this.xuanzhongimg.visible=t;if(t){r.EquipBaoshiBagView.getIns().selectid=this.gemid;r.EquipBaoshiBagView.getIns().selectItem=this}};e.SINGLE_KEY="equip.EquipBaoshiBagGridView";return e}(ui.zhuangbei.baoshibeibaoitem1UI);r.EquipBaoshiBagGridView=i})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(g){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(e.prototype,"selectid",{get:function(){return this._selectid},set:function(t){this._selectid=t;if(this._selectid==this.gemid){this.xiexiabtn.visible=true;this.btnchuan.visible=false}else{this.xiexiabtn.visible=false;this.btnchuan.visible=true}},enumerable:true,configurable:true});e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.baglist.vScrollBarSkin="";this.baglist.vScrollBar.isVertical=true;this.baglist.vScrollBar.elasticBackTime=600;this.baglist.vScrollBar.elasticDistance=200;this.tuijian.itemRender=ui.common.commonattr11UI;this.tuijian.renderHandler=new Laya.Handler(this,this.onTuiJianHandler);this.btnchuan.on(Laya.Event.CLICK,this,this.onWear);this.xiexiabtn.on(Laya.Event.CLICK,this,this.onUnload);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BAOSHI_SELECT,this,this.getGuideItem,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BAOSHI_WEAR,this.btnchuan)};e.prototype.getGuideItem=function(t){var e=0;var i=csv.EquipProxy.getIns().getBaoshiType(t);for(var n=0;n<this.baglist.numChildren;n++){var r=this.baglist.getChildAt(n);if(r.type==i){e=r.y;this.baglist.scrollTo(0,e);for(var o=0,a=r.list.cells.length;o<a;o++){var s=r.list.cells[o];if(s.gemid==t){return s}}}}return null};e.prototype.onWear=function(){var t=g.EquipModel.getIns().equipVo;app.ProtocolRequest.EquipGemReq(t.flag,t.getInstId(),this.position,this.selectItem.getInsId());app.ViewManager.toggleDialog(e,-1,0)};e.prototype.onUnload=function(){var t=g.EquipModel.getIns().equipVo;app.ProtocolRequest.EquipGemReq(t.flag,t.getInstId(),this.position,Uint64.ZERO)};e.prototype.onTuiJianHandler=function(t,e){t.attr.text=t.dataSource;t.hitArea=new Laya.Rectangle(0,0,t.attr.contextWidth,t.attr.contextHeight)};e.prototype.onHandler=function(t){Laya.Dialog.closeAll();chat.ChatStatic.dellLink(t)};e.prototype.onDisplay=function(){this.tuijian.on(Laya.Event.LINK,this,this.onHandler);g.EquipModel.getIns().on(g.EquipEvent.BAOSHI_DELL_BACK,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.tuijian.off(Laya.Event.LINK,this,this.onHandler);g.EquipModel.getIns().off(g.EquipEvent.BAOSHI_DELL_BACK,this,this.refreshAll)};e.prototype.refreshAll=function(){this.selectid=null;this.selectItem=null;this.btnchuan.visible=false;this.xiexiabtn.visible=false;while(this.baglist.numChildren>0){var t=this.baglist.removeChildAt(0);Laya.Pool.recover(g.EquipBaoshiBagItem.SINGLE_KEY,t)}this.position=this.dataSource[0];this.gemid=g.EquipModel.getIns().equipVo.gem[this.position];var e=game.GridsModel.getIns().getBagItemsByItemType(csv.ItemProxy.TYPES.BAOSHI);if(e.length>0){var i=0;this.tuijianBox.visible=false;var n={};var r=0;for(var o=0,a=e.length;o<a;o++){var s=e[o].getItemId();var l=game.ItemUtil.createVO(s,e[o].serverData,e[o].flag);var u=csv.EquipProxy.getIns().getBaoshiType(s);if(!n[u]){n[u]=[]}if(this.gemid&&s==this.gemid){l.setCount(l.count+1);r=u}n[u].push(l)}if(this.gemid&&!r){var l=game.ItemUtil.createVO(this.gemid);r=csv.EquipProxy.getIns().getBaoshiType(this.gemid);if(!n[r]){n[r]=[]}n[r].push(l)}var p=0;for(var u=1;u<=9;u++){var h=n[u];if(h){var t=Laya.Pool.getItemByClass(g.EquipBaoshiBagItem.SINGLE_KEY,g.EquipBaoshiBagItem);h=h.sort(items.ItemVO.BAOSHI_SORT_RULE);t.setData(u,h);t.y=i;if(u==r){p=i}this.baglist.addChild(t);i+=t.getH()}}this.baglist.scrollTo(0,p)}else{var c=csv.ItemProxy.getIns().getBagTuiByID(2022);if(c){this.tuijianBox.visible=true;var f=app.getLang(c.access).split("\n");this.tuijian.array=f}else{this.tuijianBox.visible=false}}};e.SINGLE_KEY="equip.EquipBaoshiBagView";return e}(ui.zhuangbei.baoshibeibaotipsUI);g.EquipBaoshiBagView=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.hechengbtn.on(Laya.Event.CLICK,this,this.onHecheng);this._model=i.EquipModel.getIns()};e.prototype.onHecheng=function(){var t=i.EquipModel.getIns().equipVo;app.ProtocolRequest.EquipGemLvReq(t.flag,t.getInstId(),this.position)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.position=t;var e=this._model.equipVo;if(t<=e.equipCfg.gem_num){this.b.visible=true;var i=csv.EquipProxy.getIns().getBaoshiOpenLv(t);if(e.strenLv<i){this.gezi.setData(this.position,0,1);this.box.visible=false;this.weilab.text=app.getLang("equip_gemtips3",i)}else{var n=e.gem[t];if(n==null||n==undefined){this.box.visible=false;this.gezi.setData(this.position,0,0);this.weilab.text=app.getLang("equip_gemtips1");if(this._model.getBaoshiRedsByEquipVoAndSubPos(e,t)){game.RedDotView.addTo(this.gezi.jiahaobtn)}else{game.RedDotView.removeFrom(this.gezi.jiahaobtn)}}else{this.box.visible=true;var r=game.ItemUtil.createVO(n);this.gezi.setData(this.position,r,0);this.weilab.text="";this.mingzi.text=app.getLang(r.getName());this.shuzhi.text=csv.EquipProxy.getIns().getBaoshiAttr(r.getItemId());if(this._model.getGemUplvl(r.getItemId())){this.hechengbtn.visible=true;game.RedDotView.addTo(this.hechengbtn)}else{this.hechengbtn.visible=false;game.RedDotView.removeFrom(this.hechengbtn)}}}}else{this.b.visible=false}};return e}(ui.zhuangbei.zhuangbeibaoshiitem2UI);i.EquipBaoshiItem=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezi.clickHandler=new Laya.Handler(this,this.onChange);this.jiahaobtn.mouseEnabled=false};e.prototype.onChange=function(){app.ViewManager.toggleDialog(i.EquipBaoshiBagView,1,0,[this.position])};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i){this.position=t;if(i){this.gezi.mouseEnabled=false;this.gezi.setData(game.GridsModel.EMPTY);this.genghuanbtn.visible=false;this.jiahaobtn.visible=false;this.suobox.visible=true}else{this.gezi.mouseEnabled=true;if(e instanceof items.ItemVO){this.gezi.setData(e);this.vo=e;this.genghuanbtn.visible=true;this.jiahaobtn.visible=false;this.suobox.visible=false}else{this.gezi.setData(game.GridsModel.EMPTY);this.genghuanbtn.visible=false;this.jiahaobtn.visible=true;this.suobox.visible=false}}};return e}(ui.zhuangbei.zhuangbeibaoshiitem3UI);i.EquipBaoshiGridView=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=a.EquipModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.baoshilist.itemRender=a.EquipBaoshiItem;this.baoshilist.renderHandler=new Laya.Handler(this,this.onRender);this._baoshiIcons=[this.kongwei1,this.kongwei2,this.kongwei3];this.lrMediator=new game.LeftRightMoveMediator(this.btnLeft,this.btnRight,this.img);this.lrMediator.selectHandler=new Laya.Handler(this,this.equipChange);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_BAOSHI_SELECT,this,this.getGuideItem)};e.prototype.getGuideItem=function(t){if(this.baoshilist.cells[t-1]){return this.baoshilist.cells[t-1].gezi}return null};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.equipChange=function(){this._model.insId=this.lrMediator.selectData.getInstId();this.setEquip();this._model.updataSecondFuns()};e.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.equipChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.equipChange)};e.prototype.refreshAll=function(){var t=this._model.equipVo;var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){this.lrMediator.array=[t];this.lrMediator.index=0}else{var i=[];var n=0;for(var r=1;r<=a.EquipStatic.EQUIP_NUM;r++){var o=game.GridsModel.getIns().getEquipByTypeAndPos(t.flag,r);if(o){i.push(o);if(o==t){n=i.length-1}}}this.lrMediator.array=i;this.lrMediator.index=n}this.setEquip()};e.prototype.setEquip=function(){this.baoshitishi.visible=false;var t=this._model.equipVo;this.labelmingc.text=app.getLang(t.getName());this.labelmingc.color=game.STYLES.ITEM_QUALITY[t.getQuality()];var e=[];for(var i=1;i<=3;i++){if(i<=t.equipCfg.gem_num){this._baoshiIcons[i-1].visible=true;this._baoshiIcons[i-1].setData(i);e.push(i)}else{this._baoshiIcons[i-1].visible=false}}this.baoshilist.array=e;if(e.length){this.baoshitishi.visible=false}else{this.baoshitishi.visible=true}};e.prototype.setEquipRed=function(){var t=[];var e=this._model.equipVo;for(var i=1;i<=a.EquipStatic.EQUIP_NUM;i++){var n=game.GridsModel.getIns().getEquipByTypeAndPos(e.flag,i);if(n){t.push(this._model.getBaoshiRedByEquipVo(n))}}this.lrMediator.updataRedList(t)};e.SINGLE_KEY="equip.EquipBaoshiView";return e}(ui.zhuangbei.zhuangbeibaoshitipsUI);a.EquipBaoshiView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=a.EquipModel.getIns().equipVo;this.visible=true;var i=csv.EquipProxy.getIns().getBaoshiOpenLv(t);if(e.strenLv<i){this.baoshiimg.skin="res/static/bg_daoju_yuan_suo.png"}else{var n=e.gem[t];if(n){this.baoshiimg.skin=csv.ItemProxy.getUrl(n)}else{this.baoshiimg.skin=""}}};e.prototype.beHide=function(){this.visible=false};return e}(ui.zhuangbei.zhuangbeibaoshiitem1UI);a.EquipBaoshiIcon=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgArr=[this.pingji1,this.pingji2,this.pingji3,this.pingji4,this.pingji5,this.pingji6,this.pingji7];this._model=i.EquipModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.position=t;var e=this._model.equipVo;var i=e.quench[this.position-1];var n="attribute"+this.position;var r=csv.EquipProxy.getIns().getCuilian(e.pos,e.grade,i);var o=csv.EquipProxy.getIns().getCuilian(e.pos,e.grade,i+1);var a;var s;if(i){s=r;a=csv.EquipProxy.getIns().getMaxCuilianGradeLv(r)}else{s=o;a=csv.EquipProxy.getIns().getMaxCuilianGradeLv(o)}this.baoshi.setData(s.grade);if(s.level){this.wenben1.text=app.getLang("cuilian_shuxing"+this.position)+":"+app.getLang("cuilian_grade"+s.grade,s.level)}else{this.wenben1.text=app.getLang("cuilian_shuxing"+this.position)+":"+app.getLang("cuilian_grade"+s.grade+"_1")}for(var l=1;l<=7;l++){var u=this.imgArr[l-1];if(l<=a){u.visible=true}else{u.visible=false}if(l<=s.level){u.skin="zhuangbei/bg_cuilian_lv_di1.png"}else{u.skin="zhuangbei/bg_cuilian_lv_di.png"}}if(i>=e.equipCfg.cuilian_max){this.shuxingbox.visible=false;this.shuzhi.visible=true;this.shuzhi.txtName.text=Attributes.getShowLabel(Attributes.decode(r[n]).baseList[0],"{0} +{1}");this.lbljiesuo.text=""}else{var p=csv.EquipProxy.getIns().getCuilianAlive(s,this.position,e);this.lbljiesuo.text=p;if(p==""){this.shuxingbox.visible=true;this.shuzhi.visible=false;if(!r){var h=Attributes.decode(o[n]);this.shuxing3.txtName.text=Attributes.getShowLabel(Attributes.changeAttributesToZero(h)[0],"{0} +{1}");this.shuxing.txtName.text=Attributes.getShowLabel(h.baseList[0],"{0} +{1}")}else{this.shuxing3.txtName.text=Attributes.getShowLabel(Attributes.decode(r[n]).baseList[0],"{0} +{1}");this.shuxing.txtName.text=Attributes.getShowLabel(Attributes.decode(o[n]).baseList[0],"{0} +{1}")}}else{this.shuxingbox.visible=false;this.shuzhi.visible=false}}if(this._model.getCuilianRedsByEquipVoAndSubPos(e,this.position)){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}};e.prototype.setSelect=function(t){this.xuanzhongimg.visible=t};return e}(ui.zhuangbei.zhuangbeicuiliantipitem1UI);i.EquipCuilianItem=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=a.EquipModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.cuilianlist.itemRender=a.EquipCuilianItem;this.cuilianlist.renderHandler=new Laya.Handler(this,this.onCuilianRender);this.cuilianlist.selectHandler=new Laya.Handler(this,this.onCuilianSelect);this.cuilianlist.selectEnable=true;this.cuilianlist.scrollRectOffX=50;this.cuilianlist.scrollRectOffY=50;this.clayout=new game.CenterLayoutMediator(this.cuilianlist,this.box,190,this.cuilianlist.spaceX);this.listgezi1.itemRender=game.CostItem;this.listgezi1.renderHandler=game.CostItem.RENDER_HANDLER;this.listgezi1.scrollRectOffX=50;this.listgezi1.scrollRectOffY=50;this.centerLayout=new game.CenterLayoutMediator(this.listgezi1,this.shengjibox,100,this.listgezi1.spaceX);this.lrMediator=new game.LeftRightMoveMediator(this.btnLeft,this.btnRight,this.img);this.lrMediator.selectHandler=new Laya.Handler(this,this.equipSelect);this.butjinhua.on(Laya.Event.CLICK,this,this.onCuilian);this.wenhao.on(Laya.Event.CLICK,this,this.onShowTip)};e.prototype.onShowTip=function(){var t=this._model.equipVo;var e=this.clayout.array[this.cuilianlist.selectedIndex];tip.TipManager.showEquipCuilianTip(t,e)};e.prototype.onCuilian=function(){var t=this.clayout.getSelectItemVo();if(!game.GridsModel.getIns().hasEnoughItems(this._cost2,false,true,true)){return}if(game.GridsModel.getIns().hasEnoughItems(this._cost1,false,true,true)){var e=this._model.equipVo;app.ProtocolRequest.EquipclReq(e.getInstId(),t,e.flag)}else{app.ProtocolRequest.ActLimitedBuyTriggerRpt(xianshimiaosha.LimitedBuytEventType.kLimitedBuytEventTypeQuench)}};e.prototype.onCuilianRender=function(t,e){t.setData(t.dataSource);t.setSelect(this.cuilianlist.selectedIndex==e)};e.prototype.onCuilianSelect=function(){this.setCost()};e.prototype.equipSelect=function(){this._model.insId=this.lrMediator.selectData.getInstId();this.setEquip();this._model.updataSecondFuns()};e.prototype.equipChange=function(){this.cuilianlist.refresh();this.setCost()};e.prototype.onSuccess=function(){};e.prototype.onDisplay=function(){this._model.on(a.EquipEvent.CUILIAN_SUCCESS,this,this.onSuccess);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.equipChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(a.EquipEvent.CUILIAN_SUCCESS,this,this.onSuccess);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.equipChange)};e.prototype.refreshAll=function(){var t=this._model.equipVo;var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){this.lrMediator.array=[t];this.lrMediator.index=0}else{var i=[];var n=0;for(var r=1;r<=a.EquipStatic.EQUIP_NUM;r++){var o=game.GridsModel.getIns().getEquipByTypeAndPos(t.flag,r);if(o){i.push(o);if(o==t){n=i.length-1}}}this.lrMediator.array=i;this.lrMediator.index=n}this.setEquip()};e.prototype.setEquip=function(){var t=this._model.equipVo;this.labelmingc.text=app.getLang(t.getName());this.labelmingc.color=game.STYLES.ITEM_QUALITY[t.getQuality()];var e=[];var i=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,1);if(!i){this.qianghuashangxianimg.visible=true;this.box.visible=false}else{this.qianghuashangxianimg.visible=false;this.box.visible=true;for(var n=1;n<=3;n++){if(i["attribute"+n]==""){continue}e.push(n)}this.clayout.array=e;this.cuilianlist.selectedIndex=0;this.setCost()}};e.prototype.setCost=function(){var t=this._model.equipVo;var e=this.clayout.array[this.cuilianlist.selectedIndex];var i=t.quench[e-1];this.shuoming.text="";this.imgbg.visible=this.wenhao.visible=false;if(this._model.getCuilianRedsByEquipVoAndSubPos(t,e)){game.RedDotView.addTo(this.butjinhua)}else{game.RedDotView.removeFrom(this.butjinhua)}var n=csv.EquipProxy.getIns().getCuilianShowExtAddEle(t.pos,t.grade,e,i);if(n){var r=Attributes.decode(n["attribute"+e]).baseList[1];if(r){this.imgbg.visible=this.wenhao.visible=true;this.shuoming.text=app.getLang("cuilian_text_16",app.getLang("cuilian_grade"+n.grade+"_1"))+Attributes.getShowLabel(r,"{0} +{1}")}}if(i>=t.equipCfg.cuilian_max){this.shengjibox.visible=false;this.imgyimanji.visible=true;this.tupolab.text=""}else{var o=void 0;if(i){o=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,i+1)}else{o=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,2)}var a=csv.EquipProxy.getIns().getCuilianAlive(o,e,t);if(a!=""){this.imgyimanji.visible=false;this.shengjibox.visible=false;this.tupolab.text=a}else if(o){this.imgyimanji.visible=false;var s=csv.EquipProxy.getIns().getCuilianCondition(o,e,t);this.tupolab.text=s;if(s==""){this.shengjibox.visible=true;this._cost1=this.centerLayout.array=game.ItemUtil.parserList(o.cost);this._cost2=game.ItemUtil.parserList(o.cost_money)[0];var l=game.GridsModel.getIns().getItemCount(this._cost2.getItemId());game.ItemShowUtil.showType4(this.huobi,this._cost2.count,l);var u=(this.shengjibox.width-(this.huobiimg.width+this.huobi.contextWidth+5))/2;this.huobiimg.x=u;this.huobi.x=u+this.huobiimg.width+5;var p=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,i);if(p&&p.grade!=o.grade){this.butjinhua.label=app.getLang("cuilian_button2")}else{this.butjinhua.label=app.getLang("cuilian_button1")}}else{this.shengjibox.visible=false}}}};e.prototype.setEquipRed=function(){var t=[];var e=this._model.equipVo;for(var i=1;i<=a.EquipStatic.EQUIP_NUM;i++){var n=game.GridsModel.getIns().getEquipByTypeAndPos(e.flag,i);if(n){t.push(this._model.getCuilianRedByEquipVo(n))}}this.lrMediator.updataRedList(t)};e.SINGLE_KEY="equip.EquipCuilianView";return e}(ui.zhuangbei.zhuangbeicuiliantipsUI);a.EquipCuilianView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.anchorX=this.anchorY=.5};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.jihuoani.stop()};e.prototype.refreshAll=function(){};e.prototype.init=function(t){this.visible=true;var e=a.EquipModel.getIns().equipVo;var i=e.quench[t];var n;if(i){n=csv.EquipProxy.getIns().getCuilian(e.pos,e.grade,i)}else{n=csv.EquipProxy.getIns().getCuilian(e.pos,e.grade,1)}this.setData(n.grade)};e.prototype.setData=function(t){this.tu1.skin=csv.EquipProxy.CUILIAN_GRADE_ICON[t];this.jihuoani.source="uieffect/ui_cuilianjihuo"+t+".ani";this.jihuoani.play()};e.prototype.beHide=function(){this.visible=false};return e}(ui.zhuangbei.zhuangbeicuiliantipitem2UI);a.EquipCuilianIcon=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listshuxing1.itemRender=a.EquipPropItem;this.listshuxing2.itemRender=a.EquipPropUpItem;this.listgezi2.itemRender=a.EquipPropItem;this.listshuxing1.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listshuxing2.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listgezi2.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.vLayout1=new game.CenterLayoutVMediator(this.listshuxing1,this.qianghuabox1,20,this.listshuxing1.spaceY);this.vLayout2=new game.CenterLayoutVMediator(this.listshuxing2,this.qianghuabox1,20,this.listshuxing2.spaceY);this.vLayout3=new game.CenterLayoutVMediator(this.listgezi2,this.qianghuabox1,20,this.listgezi2.spaceY);this.listshuxing1.scrollRectOffX=this.listshuxing2.scrollRectOffX=this.listgezi2.scrollRectOffX=20;this.listshuxing1.scrollRectOffY=this.listshuxing2.scrollRectOffY=this.listgezi2.scrollRectOffY=20;this.listgezi1.itemRender=game.CostItem;this.listgezi1.renderHandler=game.CostItem.RENDER_HANDLER;this.listgezi1.scrollRectOffX=50;this.listgezi1.scrollRectOffY=50;this.centerLayout=new game.CenterLayoutMediator(this.listgezi1,this.shengjibox,100,this.listgezi1.spaceX);this.listxingjie.itemRender=i;this.listxingjie.renderHandler=new Laya.Handler(this,this.onStarRender);this.starLayout=new game.CenterLayoutMediator(this.listxingjie,this.star,i.W,this.listxingjie.spaceX);this._model=a.EquipModel.getIns();this.lrMediator=new game.LeftRightMoveMediator(this.btnLeft,this.btnRight,this.img);this.lrMediator.selectHandler=new Laya.Handler(this,this.equipChange);this.butjinhua.on(Laya.Event.CLICK,this,this.onJinlian)};e.prototype.onShowTip=function(){var t=this._model.equipVo;tip.TipManager.showEquipJinglianTip(t)};e.prototype.onJinlian=function(){if(!game.GridsModel.getIns().hasEnoughItems(this._cost2,false,true,true)){return}if(game.GridsModel.getIns().hasEnoughItems(this._cost1,false,true,true)){var t=this._model.equipVo;app.ProtocolRequest.EquipJlReq(t.getInstId(),t.flag)}else{app.ProtocolRequest.ActLimitedBuyTriggerRpt(xianshimiaosha.LimitedBuytEventType.kLimitedBuytEventTypeRefine)}};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onStarRender=function(t,e){t.setData(t.dataSource)};e.prototype.equipChange=function(){this._model.insId=this.lrMediator.selectData.getInstId();this.setEquip();this._model.updataSecondFuns()};e.prototype.onSuccess=function(){};e.prototype.onDisplay=function(){this._model.on(a.EquipEvent.JINGLIAN_SUCCESS,this,this.onSuccess);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.equipChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(a.EquipEvent.JINGLIAN_SUCCESS,this,this.onSuccess);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.equipChange)};e.prototype.refreshAll=function(){var t=this._model.equipVo;var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){this.lrMediator.array=[t];this.lrMediator.index=0}else{var i=[];var n=0;for(var r=1;r<=a.EquipStatic.EQUIP_NUM;r++){var o=game.GridsModel.getIns().getEquipByTypeAndPos(t.flag,r);if(o){i.push(o);if(o==t){n=i.length-1}}}this.lrMediator.array=i;this.lrMediator.index=n}this.setEquip()};e.prototype.setEquip=function(){var t=this._model.equipVo;var e=[];var i=csv.EquipProxy.getIns().getRefineMax(t.pos,t.grade);for(var n=1;n<=i;n++){e.push(n<=t.refineLv?1:2)}this.starLayout.array=e;this.labelmingc.text=app.getLang(t.getName());this.labelmingc.color=game.STYLES.ITEM_QUALITY[t.getQuality()];var r=t.equipCfg.strengthen_max;var o=csv.EquipProxy.getIns().getRefine(t.pos,t.grade,t.refineLv);var a=csv.EquipProxy.getIns().getRefine(t.pos,t.grade,t.refineLv+1);if(t.refineLv){r+=o.strengthen_add}this.dengjilab.text=app.getLang("equip_strengthentips1",t.strenLv,r);if(!o&&!a){this.xiabox.visible=false;this.qianghuashangxianimg.visible=true}else{this.xiabox.visible=true;this.qianghuashangxianimg.visible=false;if(!a){this.shengjibox.visible=false;this.qianghuabox1.visible=false;this.qianghuabox2.visible=true;this.imgyimanji.visible=true;var s=new PropValue;s.propId=Attributes.STREN_MAX_LV;s.flag=0;s.formula=0;s.value=t.equipCfg.strengthen_max+o.strengthen_add;var l=Attributes.decode(o.attr).baseList;l.unshift(s);this.vLayout3.array=l}else{this.shengjibox.visible=true;this.qianghuabox1.visible=true;this.qianghuabox2.visible=false;this.imgyimanji.visible=false;var u=new PropValue;u.propId=Attributes.STREN_MAX_LV;u.flag=0;u.formula=0;var p=new PropValue;p.propId=Attributes.STREN_MAX_LV;p.flag=0;p.formula=0;var h=void 0;var c=void 0;if(!o){u.value=t.equipCfg.strengthen_max;p.value=t.equipCfg.strengthen_max+a.strengthen_add;var f=Attributes.decode(a.attr);h=Attributes.changeAttributesToZero(f);c=f.baseList}else{u.value=t.equipCfg.strengthen_max+o.strengthen_add;p.value=t.equipCfg.strengthen_max+a.strengthen_add;h=Attributes.decode(o.attr).baseList;c=Attributes.decode(a.attr).baseList}h.unshift(u);c.unshift(p);this.vLayout1.array=h;this.vLayout2.array=c;this._cost1=this.centerLayout.array=game.ItemUtil.parserList(a.cost);this._cost2=game.ItemUtil.parserList(a.cost_money)[0];var g=game.GridsModel.getIns().getItemCount(this._cost2.getItemId());game.ItemShowUtil.showType4(this.huobi,this._cost2.count,g);var d=(this.shengjibox.width-(this.huobiimg.width+this.huobi.contextWidth+5))/2;this.huobiimg.x=d;this.huobi.x=d+this.huobiimg.width+5}}if(this._model.getJinglianRedByEquipVo(t)){game.RedDotView.addTo(this.butjinhua)}else{game.RedDotView.removeFrom(this.butjinhua)}};e.prototype.setEquipRed=function(){var t=[];var e=this._model.equipVo;for(var i=1;i<=a.EquipStatic.EQUIP_NUM;i++){var n=game.GridsModel.getIns().getEquipByTypeAndPos(e.flag,i);if(n){t.push(this._model.getJinglianRedByEquipVo(n))}}this.lrMediator.updataRedList(t)};e.SINGLE_KEY="equip.EquipJinlianView";return e}(ui.zhuangbei.zhuangbeijinliantipsUI);a.EquipJinlianView=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.imgxingxing.skin="public/bg_jinglian_"+t+".png"};e.SINGLE_KEY="equip.EquipJinlianStar";e.W=40;return e}(ui.common.jinglianxingxingUI);a.EquipJinlianStar=i})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.shuxing.text=Attributes.getPropName(t.propId);if(t.propId==Attributes.STREN_MAX_LV){this.shuzhi.text=Attributes.getPropValue(t.propId,t.value,t.formula)}else{this.shuzhi.text="+"+Attributes.getPropValue(t.propId,t.value,t.formula)}this.jiantou.visible=false};e.SINGLE_KEY="equip.EquipPropItem";return e}(ui.zhuangbei.zhuangbeiitem3UI);t.EquipPropItem=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.jinengname.text=Attributes.getPropName(t.propId);this.shuzhi1.text=Attributes.getPropValue(t.propId,t.value,t.formula);if(e){this.shuzhi2.text="+"+Attributes.getPropValue(e.propId,e.value-t.value,e.formula)}else{this.shuzhi2.text=""}this.shuzhi2.color=game.STYLES.GREEN_COLOR_S};e.SINGLE_KEY="equip.EquipPropUp2Item";return e}(ui.zhuangbei.zhuangbeiitem8UI);t.EquipPropUp2Item=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.shuxing.text=Attributes.getPropName(t.propId);if(t.propId==Attributes.STREN_MAX_LV){this.shuzhi.text=Attributes.getPropValue(t.propId,t.value,t.formula)}else{this.shuzhi.text="+"+Attributes.getPropValue(t.propId,t.value,t.formula)}this.shuxing.color=game.STYLES.GREEN_COLOR_S;this.shuzhi.color=game.STYLES.GREEN_COLOR_S;this.jiantou.visible=true};e.SINGLE_KEY="equip.EquipPropUpItem";return e}(ui.zhuangbei.zhuangbeiitem3UI);t.EquipPropUpItem=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(l){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listshuxing1.itemRender=l.EquipPropItem;this.listshuxing2.itemRender=l.EquipPropUpItem;this.listgezi2.itemRender=l.EquipPropItem;this.listshuxing1.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listshuxing2.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listgezi2.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.vLayout1=new game.CenterLayoutVMediator(this.listshuxing1,this.qianghuabox1,20,this.listshuxing1.spaceY);this.vLayout2=new game.CenterLayoutVMediator(this.listshuxing2,this.qianghuabox1,20,this.listshuxing2.spaceY);this.vLayout3=new game.CenterLayoutVMediator(this.listgezi2,this.qianghuabox1,20,this.listgezi2.spaceY);this.listgezi1.itemRender=game.CostItem;this.listgezi1.renderHandler=game.CostItem.RENDER_HANDLER;this.listshuxing1.scrollRectOffX=this.listshuxing2.scrollRectOffX=this.listgezi1.scrollRectOffX=20;this.listshuxing1.scrollRectOffY=this.listshuxing2.scrollRectOffY=this.listgezi1.scrollRectOffY=20;this.centerLayout=new game.CenterLayoutMediator(this.listgezi1,this.shengjibox,100,this.listgezi1.spaceX);this.stars=new common.StarListMediator(this.listxingjie,this.star,game.ComStarItem.W);this._model=l.EquipModel.getIns();this.lrMediator=new game.LeftRightMoveMediator(this.btnLeft,this.btnRight,this.img);this.lrMediator.selectHandler=new Laya.Handler(this,this.equipChange);this.butjinhua.on(Laya.Event.MOUSE_DOWN,this,this.onQianghua);this.butjinhua.on(Laya.Event.MOUSE_OUT,this,this.onCancleQianghua);this.butjinhua.on(Laya.Event.MOUSE_UP,this,this.onCancleQianghua);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_STREN,this.butjinhua);this.yijian.on(Laya.Event.CLICK,this,this.onOneKeyQianghua);this.jihuoani.on(Laya.Event.COMPLETE,this,this.onJihuo)};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onQianghua=function(){Laya.timer.loop(300,this,this.loopQianghua);this.loopQianghua()};e.prototype.loopQianghua=function(){if(this._model.boQianghuaEnd){if(game.GridsModel.getIns().hasEnoughItems(this._cost2,false,true,true)&&game.GridsModel.getIns().hasEnoughItems(this._cost1,false,true,true)){this._model.boQianghuaEnd=false;var t=this._model.equipVo;app.ProtocolRequest.EquipStrenReq(t.flag,t.getInstId());return}this.onCancleQianghua()}};e.prototype.onCancleQianghua=function(){Laya.timer.clear(this,this.loopQianghua);this.boOneKey=false};e.prototype.onOneKeyQianghua=function(){this.boOneKey=true;this.loopQianghua()};e.prototype.onJihuo=function(){this.jihuoani.visible=false};e.prototype.onSuccess=function(){if(this.boOneKey){Laya.timer.once(100,this,this.loopQianghua)}this.jihuoani.visible=true;this.jihuoani.play(0,false);var t=this._model.equipVo;var e=csv.EquipProxy.getIns().getCuilian(t.pos,t.grade,1);if(e){for(var i=1;i<=3;i++){var n=app.str2Array(e["condition"+i],";","-");for(var r=0,o=n.length;r<o;r++){var a=n[r];if(a[0]=="1"&&t.strenLv==parseInt(a[1])){if(!this.boOneKey){this.onCancleQianghua()}l.EquipSuccessTip.add(app.getLang("equip_strengthentips7",t.strenLv),app.getLang("cuilian_jiesuo",app.getLang("cuilian_shuxing"+i)),"title_tanchuang_clkwjs")}}}}for(var i=1;i<=t.equipCfg.gem_num;i++){var s=csv.EquipProxy.getIns().getBaoshiOpenLv(i);if(t.strenLv==s){if(!this.boOneKey){this.onCancleQianghua()}l.EquipSuccessTip.add(app.getLang("equip_strengthentips7",s),app.getLang("equip_gemtips4",i),"title_qianghuagongming")}}};e.prototype.equipChange=function(){this._model.insId=this.lrMediator.selectData.getInstId();this.setEquip();this._model.updataSecondFuns()};e.prototype.onDisplay=function(){this._model.boQianghuaEnd=true;this._model.on(l.EquipEvent.QIANG_HUA_SUCCESS,this,this.onSuccess);this._model.on(l.EquipEvent.QIANG_HUA_FAILE,this,this.onCancleQianghua);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.equipChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(l.EquipEvent.QIANG_HUA_SUCCESS,this,this.onSuccess);this._model.off(l.EquipEvent.QIANG_HUA_FAILE,this,this.onCancleQianghua);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.equipChange);this.onCancleQianghua()};e.prototype.refreshAll=function(){var t=this._model.equipVo;var e=game.GridsModel.EquipEnums.indexOf(t.flag);if(e==-1){this.lrMediator.array=[t];this.lrMediator.index=0}else{var i=[];var n=0;for(var r=1;r<=l.EquipStatic.EQUIP_NUM;r++){var o=game.GridsModel.getIns().getEquipByTypeAndPos(t.flag,r);if(o){i.push(o);if(o==t){n=i.length-1}}}this.lrMediator.array=i;this.lrMediator.index=n}this.setEquip()};e.prototype.setEquip=function(){var t=this._model.equipVo;this.stars.setStar(t.star,t.star);this.labelmingc.text=app.getLang(t.getName());this.labelmingc.color=game.STYLES.ITEM_QUALITY[t.getQuality()];var e=t.equipCfg.strengthen_max;if(t.refineLv){e+=csv.EquipProxy.getIns().getRefine(t.pos,t.grade,t.refineLv).strengthen_add}this.dengjilab.text=app.getLang("equip_strengthentips1",t.strenLv,e);var i=csv.EquipProxy.getIns().getStren(t.getItemId(),t.strenLv);var n=csv.EquipProxy.getIns().getStren(t.getItemId(),t.strenLv+1);if(t.strenLv>=e){this.onCancleQianghua();this.shengjibox.visible=false;var r=csv.EquipProxy.getIns().getRefine(t.pos,t.grade,t.refineLv+1);if(r){this.qianghuashangxianimg.visible=true;this.qianghuabox1.visible=true;this.qianghuabox2.visible=false;this.vLayout1.array=Attributes.decode(i.intensifyprop).baseList;this.vLayout2.array=Attributes.decode(n.intensifyprop).baseList}else{this.qianghuabox1.visible=false;this.qianghuabox2.visible=true;this.imgyimanji.visible=true;this.qianghuashangxianimg.visible=false;this.vLayout3.array=Attributes.decode(i.intensifyprop).baseList}}else{this.shengjibox.visible=true;this.qianghuabox1.visible=true;this.qianghuabox2.visible=false;this.imgyimanji.visible=false;this.qianghuashangxianimg.visible=false;if(!i){var o=Attributes.decode(n.intensifyprop);this.vLayout1.array=Attributes.changeAttributesToZero(o);this.vLayout2.array=o.baseList}else{this.vLayout1.array=Attributes.decode(i.intensifyprop).baseList;this.vLayout2.array=Attributes.decode(n.intensifyprop).baseList}this._cost1=this.centerLayout.array=game.ItemUtil.parserList(n.intensifyexpend);this._cost2=game.ItemUtil.parserList(n.cost_money)[0];var a=game.GridsModel.getIns().getItemCount(this._cost2.getItemId());game.ItemShowUtil.showType4(this.huobi,this._cost2.count,a);var s=(this.shengjibox.width-(this.huobiimg.width+this.huobi.contextWidth+5))/2;this.huobiimg.x=s;this.huobi.x=s+this.huobiimg.width+5}if(this._model.getQianghuaRedByEquipVo(t)){game.RedDotView.addTo(this.butjinhua);game.RedDotView.addTo(this.yijian)}else{game.RedDotView.removeFrom(this.butjinhua);game.RedDotView.removeFrom(this.yijian)}};e.prototype.setEquipRed=function(){var t=[];var e=this._model.equipVo;for(var i=1;i<=l.EquipStatic.EQUIP_NUM;i++){var n=game.GridsModel.getIns().getEquipByTypeAndPos(e.flag,i);if(n){t.push(this._model.getQianghuaRedByEquipVo(n))}}this.lrMediator.updataRedList(t)};e.SINGLE_KEY="equip.EquipQianghuaView";return e}(ui.zhuangbei.zhuangbeiqianghuatipsUI);l.EquipQianghuaView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.skin=t.getIconUrl()};e.prototype.leftMove=function(){};e.prototype.rightMove=function(){};return e}(Laya.Image);l.EquipIcon=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.shuxingliebiao.itemRender=s.EquipResonate1Item;this.shuxingliebiao.renderHandler=new Laya.Handler(this,this.onRender);this.shuominglab.text=app.getLang("zhuangbei_gongming4")};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.EquipProxy.getIns().resonate1;var e=0;var i=s.EquipModel.getIns().getResonates(s.RoleMainView.getIns().roleFlag,csv.EquipProxy.RESONATE.QIANGHUA);for(var n=0,r=t.length;n<r;n++){var o=t[n];var a=i.indexOf(o.id);if(a==i.length-1){e=n-1}}this.shuxingliebiao.array=t;this.shuxingliebiao.scrollTo(e)};e.SINGLE_KEY="equip.EquipResonate1View";return e}(ui.zhuangbei.gongmingxiaoguotipsUI);s.EquipResonate1View=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.shuxingliebiao.itemRender=s.EquipResonate2Item;this.shuxingliebiao.renderHandler=new Laya.Handler(this,this.onRender);this.shuominglab.text=app.getLang("zhuangbei_gongming5")};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.EquipProxy.getIns().resonate2;var e=0;var i=s.EquipModel.getIns().getResonates(s.RoleMainView.getIns().roleFlag,csv.EquipProxy.RESONATE.CUILIAN);for(var n=0,r=t.length;n<r;n++){var o=t[n];var a=i.indexOf(o.id);if(a==i.length-1){e=n-1}}this.shuxingliebiao.array=t;this.shuxingliebiao.scrollTo(e)};e.SINGLE_KEY="equip.EquipResonate2View";return e}(ui.zhuangbei.gongmingxiaoguotipsUI);s.EquipResonate2View=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list=new component.SimpleGroupList;this.list.startY=4;this.list.groupRender=i;this.list.itemRender=r;this.list.itemRenderHandler=new Laya.Handler(this,this.onSubTypeRenderHandler);this.list.groupRenderHandler=new Laya.Handler(this,this.onTypeRenderHandler);this.list.vScrollBarSkin=" ";this.list.groupKey="type";this.list.boOpenOne=true;this.addChild(this.list);this.list.width=this.weizhi.width;this.list.height=this.weizhi.height;this.list.x=this.weizhi.x;this.list.y=this.weizhi.y;this.shuominglab.text=app.getLang("zhuangbei_gongming6")};e.prototype.onTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onSubTypeRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=[];for(var e=1;e<=n.EquipStatic.BAOSHI_NUM;++e){t=t.concat(csv.EquipProxy.getIns().resonate3[e])}this.list.array=t};e.SINGLE_KEY="equip.EquipResonate3View";return e}(ui.zhuangbei.baoshigongmingtipsUI);n.EquipResonate3View=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.labeltiaomu.text=app.getLang("zhuangbei_baoshigongming"+t)};e.prototype.setArrow=function(t){if(t==component.SimpleGroupList.OPEN){this.imgjiantou.scaleY=-1}else{this.imgjiantou.scaleY=1}};e.SINGLE_KEY="equip.EquipResonat3Title";return e}(ui.zhuangbei.baoshigongmingitem1UI);n.EquipResonat3Title=i;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.model=n.EquipModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.refreshAll=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){this.wenzilab1.text=app.getLang("zhuangbei_gongming9",t.condition[1],t.condition[2],app.getLang("baoshi_type_"+t.condition[0]));this.wenzilab2.text=Attributes.getShowLabels(t.attr,"{0}+{1}");var e=n.EquipModel.getIns().getResonates(n.RoleMainView.getIns().roleFlag,csv.EquipProxy.RESONATE.BAOSHI,parseInt(t.condition[0]));var i=e.indexOf(t.id);if(i==-1){this.dangqianimg.visible=false;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.GRAY_COLOR_S;this.ditu.gray=true}else if(i==e.length-1){this.dangqianimg.visible=true;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.DESC_TXT_COLOR_S;this.ditu.gray=false}else{this.dangqianimg.visible=false;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.DESC_TXT_COLOR_S;this.ditu.gray=false}};e.SINGLE_KEY="equip.EquipResonate3Item";return e}(ui.zhuangbei.baoshigongmingitem2UI);n.EquipResonate3Item=r})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.model=a.EquipModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.refreshAll=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){this.wenzilab1.text=app.getLang("zhuangbei_gongming7",t.condition[0],t.condition[1]);this.wenzilab2.text=Attributes.getShowLabels(t.attr,"{0}+{1}");var e=a.EquipModel.getIns().getResonates(a.RoleMainView.getIns().roleFlag,csv.EquipProxy.RESONATE.QIANGHUA);var i=e.indexOf(t.id);if(i==-1){this.dangqianimg.visible=false;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.GRAY_COLOR_S;this.ditu.gray=true}else if(i==e.length-1){this.dangqianimg.visible=true;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.DESC_TXT_COLOR_S;this.ditu.gray=false}else{this.dangqianimg.visible=false;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.DESC_TXT_COLOR_S;this.ditu.gray=false}};return e}(ui.zhuangbei.gongmingxiaoguoitem1UI);a.EquipResonate1Item=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){var e=parseInt(t.condition[1]);var i=app.getLang("cuilian_grade"+csv.EquipProxy.getIns().getGradeByCuilianGrade(e)+"_1");var n=csv.EquipProxy.getIns().getGradeByCuilianLv(e);if(n){this.wenzilab1.text=app.getLang("zhuangbei_gongming8",t.condition[0],i,n)}else{this.wenzilab1.text=app.getLang("zhuangbei_gongming11",t.condition[0],i)}this.wenzilab2.text=Attributes.getShowLabels(t.attr,"{0}+{1}");var r=a.EquipModel.getIns().getResonates(a.RoleMainView.getIns().roleFlag,csv.EquipProxy.RESONATE.CUILIAN);var o=r.indexOf(t.id);if(o==-1){this.dangqianimg.visible=false;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.GRAY_COLOR_S;this.ditu.gray=true}else if(o==r.length-1){this.dangqianimg.visible=true;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.DESC_TXT_COLOR_S;this.ditu.gray=false}else{this.dangqianimg.visible=false;this.wenzilab1.color=this.wenzilab2.color=game.STYLES.DESC_TXT_COLOR_S;this.ditu.gray=false}};return e}(t);a.EquipResonate2Item=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.weizhi.vScrollBarSkin="";this.weizhi.vScrollBar.isVertical=true;this.weizhi.vScrollBar.elasticBackTime=600;this.weizhi.vScrollBar.elasticDistance=200;this.tujing.itemRender=ui.common.commonattr11UI;this.tujing.renderHandler=new Laya.Handler(this,this.onTuiJianHandler);this.listCustom=new list.JListCustom;guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_SELECT,this,this.getGuideItemBtn,500)};e.prototype.getGuideItemBtn=function(t,e){var i=this.listCustom.getItemView(new Laya.Handler(this,this.onCheck,[t]));if(i){return i}return this.listCustom.getRowCol(1,e-1)};e.prototype.onCheck=function(t,e){if(e.equipVo.getItemId()==t){return true}};e.prototype.onTuiJianHandler=function(t,e){t.attr.text=t.dataSource};e.prototype.onHandler=function(t){Laya.Dialog.closeAll();chat.ChatStatic.dellLink(t)};e.prototype.onDisplay=function(){this.tujing.on(Laya.Event.LINK,this,this.onHandler);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.tujing.off(Laya.Event.LINK,this,this.onHandler)};e.prototype.refreshAll=function(){this.roleFlag=this.dataSource[0];var t=game.GridsModel.EquipEnums.indexOf(this.roleFlag);var e=this.dataSource[1];this.listCustom.init(this.weizhi);this.listCustom.clear();if(e.length>0){this.wuimg.visible=false;var i=[];for(var n=0,r=e.length;n<r;n++){var o=game.ItemUtil.createVO(e[n].getItemId(),e[n].serverData,e[n].flag);o.compareVo=this.dataSource[2];if(t!=-1){o.compareRolelv=game.Context.roleList[t].level}i.push(o)}i.sort(items.EquipVO.SORT_RULE);var a=[i[0]];var s=i[0].grade;var l=[];for(var n=1,r=i.length;n<r;n++){var u=i[n];if(s==u.grade){a.push(u)}else{l.push({grade:s,arr:a});s=u.grade;a=[u]}}l.push({grade:s,arr:a});for(var n=0;n<l.length;n++){var p=l[n];this.listCustom.split([p.grade],bag.EquipTitle,40);var h=[];for(var c=0;c<p.arr.length;c++){var f=new y;f.equipVo=p.arr[c];f.flag=this.roleFlag;h.push(f)}this.listCustom.split(h,m,120,0,5)}this.listCustom.end()}else{this.wuimg.visible=true}var g=csv.ItemProxy.getIns().getBagTuijian(this.roleFlag);if(g){var d=app.getLang(g.access).split("\n");this.tujing.array=d}};e.SINGLE_KEY="equip.EquipSelectBagView2";return e}(ui.zhuangbei.zhuangbeidaojuxuanzetipUI);t.EquipSelectBagView2=e;var y=function(){function t(){}return t}();var m=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="EquipSelectNode";t.check=true;return t}t.prototype.createNode=function(t){var e=this.list[t];var i=Laya.Pool.getItemByClass(this.clsKey,ui.zhuangbei.zhuangbeixuanzeitemUI);i.x=t*118;i.y=this.y;i.gezi.setData(e.equipVo);i.gezi.clickHandler=new Laya.Handler(this,this.onClickHandler,[e]);i.yizhuangbeiimg.visible=Boolean(e.equipVo.flag!=game.GridsModel.BAG_ITEM);return i};t.prototype.onClickHandler=function(t){if(t.equipVo.compareVo==game.GridsModel.EMPTY){if(t.equipVo.flag==game.GridsModel.BAG_ITEM){tip.TipManager.showByBtnType(t.equipVo,[tip.TipManager.TIP_BTN_TYPE.WEAR],null,t.flag+"")}else{tip.TipManager.showByBtnType(t.equipVo,[tip.TipManager.TIP_BTN_TYPE.REPLACE],null,t.flag+"")}}else{if(items.EquipVO.checkCanJicheng(t.equipVo.compareVo,t.equipVo)){tip.TipManager.showByBtnType(t.equipVo,[tip.TipManager.TIP_BTN_TYPE.REPLACE_ZHIJIE,tip.TipManager.TIP_BTN_TYPE.REPLACE_JICHENG],null,t.flag+"")}else{tip.TipManager.showByBtnType(t.equipVo,[tip.TipManager.TIP_BTN_TYPE.REPLACE],null,t.flag+"")}}};return t}(list.RowMoveBaseNode);t.EquipSelectNode=m})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.gezi.setData(t);this.yizhuangbeiimg.visible=Boolean(t.flag!=game.GridsModel.BAG_ITEM)};e.SINGLE_KEY="equip.EquipSelectGridView";return e}(ui.zhuangbei.zhuangbeixuanzeitemUI);t.EquipSelectGridView=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(e){__extends(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.bg01.width=Laya.stage.width};i.prototype.onDisplay=function(){this.callLater(this.refreshAll)};i.prototype.close=function(){if(i.desArr.length>0){var t=i.desArr.shift();this.tiaozhanlab1.text=t.title;this.xiaoguolab.text=t.content;this.titleimg.skin="res/static/tanchuang/"+t.url+".png"}else{e.prototype.close.call(this)}};i.prototype.refreshAll=function(){this.tiaozhanlab1.text=this.dataSource[0];this.xiaoguolab.text=this.dataSource[1];this.titleimg.skin="res/static/tanchuang/"+this.dataSource[2]+".png"};i.prototype.onUnDisplay=function(){};i.add=function(t,e,i){this.desArr.push({title:t,content:e,url:i});this.show()};i.show=function(){if(app.ViewManager.DisplayedInStage(i.SINGLE_KEY)){return}var t;if(this.desArr.length>0){t=this.desArr.shift()}app.ViewManager.toggleDialog(i,1,0,[t.title,t.content,t.url])};i.SINGLE_KEY="jihuoma.EquipSuccessTip";i.desArr=[];return i}(ui.zhuangbei.zhuangbeijinglianjihuoUI);t.EquipSuccessTip=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(r){var t=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.getIns=function(){return app.Singleton.getInstance(n)};n.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist1.itemRender=grids.GridView;this.daojulist1.renderHandler=grids.GridView.CommonItemRender;this.daojulist2.itemRender=grids.GridView;this.daojulist2.renderHandler=grids.GridView.CommonItemRender};n.prototype.onDisplay=function(){this.callLater(this.refreshAll)};n.prototype.onUnDisplay=function(){n.equipArr=null;n.awards=null};n.prototype.refreshAll=function(){this.daojulist1.array=n.equipArr;this.daojulist2.array=n.awards};n.pushList=function(t,e){if(!n.equipArr){n.equipArr=[]}var i=game.GridsModel.getIns().getVOByInsId(t);n.equipArr.push(i);if(!n.awards){n.awards=[]}n.awards=n.awards.concat(e);if(app.ViewManager.DisplayedInStage(r.EquipTransfResultView.SINGLE_KEY)){r.EquipTransfResultView.getIns().refreshAll()}else{app.ViewManager.toggleDialog(r.EquipTransfResultView,1,0)}};n.SINGLE_KEY="equip.EquipTransfResultView";return n}(ui.zhuangbei.jichengjieguoalertUI);r.EquipTransfResultView=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(i){var t=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.getIns=function(){return app.Singleton.getInstance(n)};n.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.liebiao.itemRender=e;this.liebiao.renderHandler=new Laya.Handler(this,this.onRender);this.anniu1.clickHandler=new Laya.Handler(this,this.onWear);this.queding.clickHandler=new Laya.Handler(this,this.onTransf);game.HelperViewHandler.registerStr([this.anniu2,this.shuominglab],"jicheng_help_title","jicheng_help_desc")};n.prototype.onWear=function(){for(var t=0,e=this.dataSource[0].length;t<e;t++){var i=this.dataSource[0][t];game.ItemUtil.equip(i,this.dataSource[1])}app.ViewManager.toggleDialog(n,-1,0)};n.prototype.onTransf=function(){for(var t=0,e=this.dataSource[0].length;t<e;t++){var i=this.dataSource[0][t];game.ItemUtil.transf(i,this.dataSource[1])}app.ViewManager.toggleDialog(n,-1,0)};n.prototype.onRender=function(t,e){t.setData(t.dataSource)};n.prototype.onDisplay=function(){this.callLater(this.refreshAll)};n.prototype.onUnDisplay=function(){};n.prototype.refreshAll=function(){this.liebiao.array=this.dataSource[0];this.liebiao.scrollTo(0)};n.SINGLE_KEY="equip.EquipTransfView";return n}(ui.zhuangbei.zhuangbeijichengUI);i.EquipTransfView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(i.EquipSelectBagItem)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.daoju1.setData(t.compareVo);this.daoju2.setData(t);this.wenben.text=app.getLang("equip_pos_"+t.equipCfg.equippart)};e.SINGLE_KEY="equip.EquipTransItem";return e}(ui.zhuangbei.zhuangbeijichengitemUI);i.EquipTransItem=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.DefclassProxy.getIns().getCfg(this.dataSource[0]);this.label04.text=app.getLang(t.position);this.label05.text=app.getLang(t.target);this.label07.text=app.getLang(t.preattr);this.label09.text=app.getLang(t.professional)};e.SINGLE_KEY="equip.ProfTipView";return e}(ui.zhuangbei.zhiyetexingtipUI);t.ProfTipView=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.showTip)};e.prototype.showTip=function(t){app.ViewManager.toggleView(i.RoleDeatilAttibuteTip,app.AppContainer.flowLayer,1,[this.dataSource[2],t.stageX-50,t.stageY-20])};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.jueseshuxing.text=this.dataSource[0];this.jueseshuxingshuzi.text=this.dataSource[1]};return e}(ui.zhuangbei.jueseshuxingitemUI);i.RoleDeatilAttibuteItem=t})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.maskSp=new Laya.Sprite;this.maskSp.alpha=.3;this.maskSp.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,game.STYLES.BLACK_COLOR);this.addChildAt(this.maskSp,0);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){app.ViewManager.toggleView(e,app.AppContainer.flowLayer,-1)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.jueseshuxing.x=27+(this.dataSource[6]?this.dataSource[6]:0);this.jueseshuxing.y=21+(this.dataSource[4]?this.dataSource[4]:0);this.jueseshuxing.text=this.dataSource[0];this.imgbg.width=this.jueseshuxing.width+55+(this.dataSource[5]?this.dataSource[5]:0);this.imgbg.height=this.dataSource[3]?this.dataSource[3]:60;var t=this.dataSource[1];var e=this.dataSource[2]-this.height;if(t<0){t=0}else if(t>Laya.stage.width-this.imgbg.width){t=Laya.stage.width-this.imgbg.width}if(e<0){e=0}else if(e>Laya.stage.height-this.imgbg.height){e=Laya.stage.height-this.imgbg.height}this.x=t;this.y=e;this.maskSp.x=-this.x;this.maskSp.y=-this.y;this.hitArea=new Laya.Rectangle(-this.x,-this.y,Laya.stage.width,Laya.stage.height)};e.SINGLE_KEY="role.RoleDeatilAttibuteTip";return e}(ui.zhuangbei.jueseshuxingtipUI);t.RoleDeatilAttibuteTip=e})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(I){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.labelArr=[];t.titleArr=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.mouseEnabled=true;this.mouseThrough=false;this.weizhipanel.vScrollBarSkin="";this.weizhipanel.vScrollBar.isVertical=true;this.weizhipanel.vScrollBar.elasticBackTime=0;this.weizhipanel.vScrollBar.elasticDistance=0};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.clear()};t.prototype.refreshAll=function(){this.currH=0;var t=this.dataSource;this.labeltitle01.text=t.getName();this.labeltitle02.text=t.level+app.getLang("级");this.setAttribute()};t.prototype.setAttribute=function(){var t=this.dataSource;var e=csv.AttributesProxy.getIns().getShowArr();for(var i=0,n=e.length;i<n;i++){var r=e[i];var o=Laya.Pool.getItemByClass("RoleDetailTitleItem",I.RoleDetailTitleItem);this.titleArr.push(o);o.y=this.currH;o.dataSource=r.name;this.weizhipanel.addChild(o);this.currH+=o.height;this.currH+=10;var a=app.str2Array(r.attrlist,";","-");var s=a.length;var l=parseInt(a[s-1][0]);var u=[];for(var p=1;p<=l;p++){var h=void 0;for(var c=0;c<s;c++){if(p==parseInt(a[c][0])){h=a[c];break}}if(h){var f=parseInt(h[0]);var g=parseInt(h[1]);var d=parseInt(h[2]);u.push([f,g,d])}else{u.push([p,0,0])}}for(var y=0,m=u.length;y<m;y++){var h=u[y];var g=h[1];var v=Boolean(y%2==0);if(g!=0){var b=new PropValue;b.propId=g;b.flag=0;b.formula=h[2];if(t.attribute&&t.attribute[g]){b.value=t.attribute[g]}else{b.value=0}var _=Laya.Pool.getItemByClass("RoleDeatilAttibuteItem",I.RoleDeatilAttibuteItem);_.y=this.currH;if(g==2){_.dataSource=[app.getLang("攻击:"),app.getLang("{0}~{1}",t.attribute[3],b.value),csv.AttributesProxy.getIns().getCfg(b.propId).des]}else{_.dataSource=[Attributes.getPropName(b.propId)+":",Attributes.getPropValue(b.propId,b.value,b.formula),csv.AttributesProxy.getIns().getCfg(b.propId).des]}this.weizhipanel.addChild(_);this.labelArr.push(_);if(v){_.x=37}else{_.x=297}}if(!v){this.currH+=18;this.currH+=10}else{if(y==m-1){this.currH+=18;this.currH+=10}}}}};t.prototype.clear=function(){while(this.labelArr.length>0){var t=this.labelArr.shift();t.x=0;t.y=0;if(t&&t.parent){t.parent.removeChild(t);Laya.Pool.recover("RoleDeatilAttibuteItem",t)}}while(this.titleArr.length>0){var e=this.titleArr.shift();if(e&&e.parent){e.parent.removeChild(e);Laya.Pool.recover("RoleDetailTitleItem",e)}}};t.SINGLE_KEY="role.RoleDetailAttributeView";return t}(ui.zhuangbei.juesexiangxishuxingUI);I.RoleDetailAttributeView=t})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var role;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.titlelab.text=this.dataSource};return e}(ui.zhuangbei.jueseshuxingtitleitemUI);t.RoleDetailTitleItem=e})(role||(role={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgjiahao.on(Laya.Event.CLICK,this,this.onAdd)};e.prototype.onAdd=function(){if(this.jihuotexiao.visible){app.ViewManager.toggleView(role.RoleCreateView,app.AppContainer.talkLayer,1)}else{game.RoleModel.getIns().onShowRoleUnlockView()}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this._role=t.role;if(this._role){this.labelnum.visible=true;this.bgshuzi.visible=true;this.labelnum.text=this._role.level.toString();this.imglock.visible=false;this.imgjiahao.visible=false;this.imgtouxiang.visible=true;this.imgtouxiang.skin=this._role.getHeadIconUrl();this.chuzhanimg.visible=this._role.infight==1;if(this._role.tupoLv){var i=csv.LevelProxy.getIns().getHuluStyle(this._role.tupoLv);this.hulu.hulu.skin=csv.LevelProxy.HULU_ICONS[i.grade];this.dengji.text=this._role.tupoLv.toString();this.hulu.visible=true;this.dengji.visible=true}else{this.hulu.visible=false;this.dengji.visible=false}}else{this.labelnum.visible=false;this.bgshuzi.visible=false;this.imgtouxiang.visible=false;this.imglock.visible=true;this.imgjiahao.visible=false;this.chuzhanimg.visible=false;this.hulu.visible=false;this.dengji.visible=false;var n=game.Context.roleList.length;if(n==e){this.imglock.visible=false;this.imgjiahao.visible=true}}this.imgxuanzhong.visible=t.select;if(t.boXin){game.RedDotView.addTo(this,121,7,1,1,game.RedDotView.ENUM_TYPE.XIN)}else if(t.boRed){game.RedDotView.addTo(this,121,7)}else{game.RedDotView.removeFrom(this)}this.checkAni(e)};e.prototype.checkAni=function(t){this.jihuotexiao.stop();this.jihuotexiao.visible=false;if(game.Context.roleList.length==t){if(game.RoleModel.getIns().checkAddRoleCondiion(t+1)){this.jihuotexiao.play();this.jihuotexiao.visible=true}}};e.SINGLE_KEY="equip.RoleItem";return e}(ui.zhuangbei.zhuangbeiitem1UI);t.RoleItem=e})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(h){var t=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this._model=h.EquipModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.chuandaibtn.clickHandler=new Laya.Handler(this,this.onChuandai);this.xiangxi.clickHandler=new Laya.Handler(this,this.showResonate);this.btnzhudongfabao.clickHandler=new Laya.Handler(this,this.openFabaoTip);this.roleMediator=new common.RoleListMediator(this.itemxuanze.xuanzelist,h.RoleItem,new Laya.Handler(this,this.roleSelectChange));this.fabaoArr=[];for(var t=1;t<=h.EquipStatic.FABAO_NUM;t++){var e=this["fabao"+t];e.position=t;this.fabaoArr.push(e)}this.equipArr=[];for(var t=1;t<=h.EquipStatic.EQUIP_NUM;t++){var e=this["zhuangbei"+t];e.position=t;this.equipArr.push(e);this.equipArr[t-1].setData(game.GridsModel.EMPTY)}this.huluArr=[];for(var t=1;t<=2;t++){var e=this["hulu"+t];e.position=t+6;e.setData(game.GridsModel.LOCKED);this.huluArr.push(e)}guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_WEAR,this.chuandaibtn);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_WEAR_SELECT,this,this.getGuideItemBtn);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_ROLE_SELECT,this,this.getGuideItemBtn2,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_LV_ROLE_SELECT,this,this.getGuideItemBtn3,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_LV_SELECT,this,this.getGuideItemBtn4,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_STREN_ROLE_SELECT,this,this.getGuideItemBtn5,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.EQUIP_STREN_SELECT,this,this.getGuideItemBtn6,300)};t.prototype.getGuideItemBtn=function(t){return this.equipArr[t-1]};t.prototype.getGuideItemBtn2=function(t){this.itemxuanze.xuanzelist.scrollTo(0);if(this.itemxuanze.xuanzelist.selectedIndex==t-1){return"complete"}else{var e=this.itemxuanze.xuanzelist.cells[t-1];if(e){return e}}return null};t.prototype.getGuideItemBtn3=function(t){var e=this._model.getRoleIndexByWeStrenLv(t);var i=e[0];this.itemxuanze.xuanzelist.scrollTo(0);if(this.itemxuanze.xuanzelist.selectedIndex==i-1){return"complete"}else{var n=this.itemxuanze.xuanzelist.cells[i-1];if(n){return n}}return null};t.prototype.getGuideItemBtn4=function(t){var e=this._model.getRoleIndexByWeStrenLv(t);var i=e[1];return this.equipArr[i-1]};t.prototype.getGuideItemBtn5=function(){var t=this._model.getCanStrenRoleIndex();var e=t[0];this.itemxuanze.xuanzelist.scrollTo(0);if(this.itemxuanze.xuanzelist.selectedIndex==e-1){return"complete"}else{var i=this.itemxuanze.xuanzelist.cells[e-1];if(i){return i}}return null};t.prototype.getGuideItemBtn6=function(){var t=this._model.getCanStrenRoleIndex();var e=t[1];return this.equipArr[e-1]};t.prototype.showResonate=function(){this.roleFlag=game.GridsModel.EquipEnums[this.roleMediator.selectedIndex];app.ViewManager.toggleDialog(common.SecondCommonWindow,1,0,[common.SecondCommonWindow.GROUP_ID.RESONATE])};t.prototype.openFabaoTip=function(){app.ViewManager.toggleDialog(fabaonew.FabaoFWaPreview,1,0,this.roleMediator.selectedIndex+1)};t.prototype.onChuandai=function(){var t=this._model.getOneKeyWearList(this.roleMediator.selectedIndex+1);var e=game.GridsModel.EquipEnums[this.roleMediator.selectedIndex];var i=[];var n=[];var r=[];for(var o=0,a=t.length;o<a;o++){var s=t[o];var l=game.GridsModel.getIns().getEquipByTypeAndPos(e,s.pos);if(l){if(items.EquipVO.checkCanJicheng(l,s)){s.compareVo=l;r.push(s)}else{n.push(s)}}else{i.push(s)}}for(var o=0,a=i.length;o<a;o++){var s=i[o];game.ItemUtil.equip(s,e)}for(var o=0,a=n.length;o<a;o++){var s=n[o];game.ItemUtil.equip(s,e)}if(r.length){app.ViewManager.toggleDialog(h.EquipTransfView,1,0,[r,e])}};t.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshEquip);game.RoleModel.getIns().on(game.RoleModel.EVENTS.SCORE_UPDATE,this,this.setScore);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.setOneKey);fabaonew.FaBaoNewModel.getIns().on(fabaonew.FaBaoNewModel.EVENT_DRESS_EQUIP,this,this.refreshEquip);game.Context.on(game.ContextEvent.SECOND_WINDOW_OPEN,this,this.onSecondOpen);game.Context.on(game.ContextEvent.SECOND_WINDOW_CLOSE,this,this.onSecondClose);this._model.on(h.EquipEvent.RESONATE_CHANGE,this,this.setResonate);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshEquip);game.RoleModel.getIns().off(game.RoleModel.EVENTS.SCORE_UPDATE,this,this.setScore);game.RoleModel.getIns().off(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.setOneKey);fabaonew.FaBaoNewModel.getIns().off(fabaonew.FaBaoNewModel.EVENT_DRESS_EQUIP,this,this.refreshEquip);game.Context.off(game.ContextEvent.SECOND_WINDOW_OPEN,this,this.onSecondOpen);game.Context.off(game.ContextEvent.SECOND_WINDOW_CLOSE,this,this.onSecondClose);this._model.off(h.EquipEvent.RESONATE_CHANGE,this,this.setResonate);this.skt&&this.skt.stop();this.boIgonre=false};t.prototype.onSecondOpen=function(){this.boIgonre=true};t.prototype.onSecondClose=function(){this.boIgonre=false;this.refreshEquip()};t.prototype.refreshEquip=function(){if(this.boIgonre){return}this.roleMediator.setRedArr(this._model.getWearRoleRedArr());this.setEquips();this.setEquipRed();this.setFabao()};t.prototype.refreshAll=function(){if(this.dataSource&&this.dataSource.length==1){this.roleMediator.setData(Number(this.dataSource[0]),this._model.getWearRoleRedArr())}else{var t=0;var e=this._model.getWearRoleRedArr();for(var i=0;i<e.length;i++){if(e[i]){t=i;break}}this.roleMediator.setData(t,e)}this.setAvatar();this.setEquips();this.setFabao();this.setEquipRed();this.setScore();this.setRoleName();this.setOneKey();this.setResonate()};t.prototype.roleSelectChange=function(){this.setAvatar();this.setEquips();this.setFabao();this.setEquipRed();this.setScore();this.setOneKey();this.setRoleName();this.setResonate()};t.prototype.setFabao=function(){var t=this.roleMediator.selectedRoleVo;for(var e=0;e<2;e++){if(t.level<csv.ChouKaProxy.getIns().getLockLv(e+1)){this.fabaoArr[e].setData(game.GridsModel.LOCKED,t.prof)}else{var i=chouka.ChouKaModel.getIns().getEquipData(t.prof,e+1);if(i){var n=chouka.ChouKaModel.getIns().getFabaoByEquip(i.magicCfgID);this.fabaoArr[e].setData(n,t.prof)}else{this.fabaoArr[e].setData(null,t.prof)}}}};t.prototype.setAvatar=function(){var t;var e=skin.SkinModel.getIns().getEquipSkinId(this.roleMediator.selectedIndex+1);var i=csv.SkinProxy.getIns().getCfg(e);var n;if(i){t=i.modelres;n=i.scale/100}else{t=csv.DefclassProxy.getIns().getCfg(this.roleMediator.selectedRoleVo.prof).model;n=.6}if(this.skt&&this.skt.parent){this.skt.removeSelf()}else{this.skt=new common.CSkt}this.skt.init(role.RoleVO.getSkinSkt(t));this.skt.scale(n,n);this.weizhi.addChild(this.skt)};t.prototype.setEquips=function(){var t=game.GridsModel.EquipEnums[this.roleMediator.selectedIndex];for(var e=1;e<=h.EquipStatic.EQUIP_NUM;e++){if(e>=4&&e<=6&&game.Context.teamLv<game.Config.getIntParams(1149)){this.equipArr[e-1].setData(game.GridsModel.LOCKED,t)}else{var i=game.GridsModel.getIns().getEquipByTypeAndPos(t,e);if(i){this.equipArr[e-1].setData(i,t)}else{this.equipArr[e-1].setData(game.GridsModel.EMPTY,t)}}}};t.prototype.setEquipRed=function(){var t=false;for(var e=1;e<=h.EquipStatic.EQUIP_NUM;e++){var i=this._model.checkWearReach(this.roleMediator.selectedIndex+1,e);var n=this._model.getPeiyangByPos(this.roleMediator.selectedIndex+1,e);this.equipArr[e-1].setRed(i||n);t=t||i}if(t){game.RedDotView.addTo(this.chuandaibtn)}else{game.RedDotView.removeFrom(this.chuandaibtn)}};t.prototype.setRoleName=function(){var t=game.Context.roleList[this.roleMediator.selectedIndex];this.namelab.text=t.getName()};t.prototype.setScore=function(){var t=game.Context.roleList[this.roleMediator.selectedIndex];this.zhanliclip.value=t.score+""};t.prototype.setOneKey=function(){this.chuandaibtn.visible=Boolean(game.Context.teamLv>=game.Config.getIntParams(1138))};t.prototype.setResonate=function(){var t=game.Context.roleList[this.roleMediator.selectedIndex];var e=game.GridsModel.EquipEnums[t.prof-1];var i=this._model.getResonates(e,csv.EquipProxy.RESONATE.QIANGHUA);if(i.length){this.shuzhi2.color=game.STYLES.DESC_TXT_COLOR_S;this.shuzhi2.text=csv.EquipProxy.getIns().getTotalResonate(i)}else{this.shuzhi2.color=game.STYLES.GRAY_COLOR_S;var n=csv.EquipProxy.getIns().resonate1[0];this.shuzhi2.text=app.getLang("zhuangbei_gongming7",n.condition[0],n.condition[1])}i=this._model.getResonates(e,csv.EquipProxy.RESONATE.CUILIAN);if(i.length){this.shuzhi4.color=game.STYLES.DESC_TXT_COLOR_S;this.shuzhi4.text=csv.EquipProxy.getIns().getTotalResonate(i)}else{this.shuzhi4.color=game.STYLES.GRAY_COLOR_S;var n=csv.EquipProxy.getIns().resonate2[0];var r=parseInt(n.condition[1]);var o=app.getLang("cuilian_grade"+csv.EquipProxy.getIns().getGradeByCuilianGrade(r)+"_1");var a=csv.EquipProxy.getIns().getGradeByCuilianLv(r);if(a){this.shuzhi4.text=app.getLang("zhuangbei_gongming8",n.condition[0],o,a)}else{this.shuzhi4.text=app.getLang("zhuangbei_gongming11",n.condition[0],o)}}var s=[this.shuzhi6,this.shuzhi7,this.shuzhi8];var l=0;for(var u=1;u<=h.EquipStatic.BAOSHI_NUM;++u){i=this._model.getResonates(e,csv.EquipProxy.RESONATE.BAOSHI,u);if(i.length){s[l].color=game.STYLES.DESC_TXT_COLOR_S;s[l].text=csv.EquipProxy.getIns().getTotalResonate(i);l++}}if(l<3){s[l].color=game.STYLES.GRAY_COLOR_S;s[l].text=app.getLang("zhuangbei_gongming10")}for(var p=l+1;p<3;p++){s[p].text=""}};t.SINGLE_KEY="equip.RoleMainView";return t}(ui.zhuangbei.renwu1viewUI);h.RoleMainView=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.position=1;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.dianji.on(Laya.Event.CLICK,this,this.clickHandler);this._model=i.EquipModel.getIns()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t,e){this.zhiding.visible=false;this._selIndex=-1;if(this._model.clickSelectFumoIndex!=-1){if(this._model.clickSelectFumoIndex==this.position){this.zhiding.visible=true;this._selIndex=this.position;i.RoleEquipFumoView.getIns().updateFumoView(this.position)}}else{if(this._model.initSelFumoIndex==this.position){this.zhiding.visible=true;this._selIndex=this.position;i.RoleEquipFumoView.getIns().updateFumoView(this.position)}}if(this._model.initSelFumoIndex==-1&&this._selIndex==-1){i.RoleEquipFumoView.getIns().updateFumoView(-1)}this.zhuangbei.setData(t,e);this.zhuangbei.jiahao.visible=false};t.prototype.setRed=function(t){if(t){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}};t.prototype.clickHandler=function(){this._model.clickSelectFumoIndex=this.position;i.RoleEquipFumoView.getIns().setEquips();i.RoleEquipFumoView.getIns().updateFumoView(this.position)};return t}(ui.zhuangbei.fumoitem2UI);i.RoleEquipFumoItem=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.position=1;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.dianji.on(Laya.Event.CLICK,this,this.clickHandler);this._model=i.EquipModel.getIns()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t,e){if(e===void 0){e=false}this.zhiding.visible=false;this._selIndex=-1;if(this._model.clickSelectXuexiFumoIndex!=-1){if(this._model.clickSelectXuexiFumoIndex==this.position){this.zhiding.visible=true;this._selIndex=this.position;i.RoleEquipXuexiTuzhiView.getIns().updateLowView(this.position)}}else{if(this._model.initSelXuexiFumoIndex==this.position){this.zhiding.visible=true;this._selIndex=this.position;i.RoleEquipXuexiTuzhiView.getIns().updateLowView(this.position)}}if(this._model.initSelXuexiFumoIndex==-1&&this._selIndex==-1){i.RoleEquipXuexiTuzhiView.getIns().updateLowView(-1)}this.img.skin="zhuangbei/bg_zhuangbei_buwei_"+this.position+".png";this.setRed(e)};t.prototype.setRed=function(t){if(t){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}};t.prototype.clickHandler=function(){this._model.clickSelectXuexiFumoIndex=this.position;i.RoleEquipXuexiTuzhiView.getIns().setEquips();i.RoleEquipXuexiTuzhiView.getIns().updateLowView(this.position)};return t}(ui.zhuangbei.fumoitemUI);i.RoleEquipFumoPeifangItem=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listxuanze.selectEnable=true;this.listxuanze.renderHandler=new Laya.Handler(this,this.onCellHandler);this.listxuanze.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.ronglianbtn.clickHandler=new Laya.Handler(this,this.onClickHandler);this._model=i.EquipModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this._selTempIndex=0};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this._selTempIndex=this.listxuanze.selectedIndex=0;this.listxuanze.array=this._model.getPeifangArrByPos(this.dataSource[0]);this._updateLvLowView()};e.prototype.onCellHandler=function(t,e){if(this._selTempIndex==e){t.selected=true}else{t.selected=false}t.label=app.getLang(t.dataSource.cfg.name)};e.prototype.onSelectHandler=function(t){this._selTempIndex=t;this._updateLvLowView(t)};e.prototype.onClickHandler=function(){i.RoleEquipFumoView.getIns().updateCizhuiView(this._itemData);app.ViewManager.toggleDialog(e,-1,0)};e.prototype._updateLvLowView=function(t){if(t===void 0){t=this._selTempIndex}var e=this._itemData=this._model.getPeifangArrByPos(this.dataSource[0])[t];this.tishi.labelmiaoshu2.visible=false;this.tishi.imgjiantou.visible=false;this.ronglianbtn.visible=true;if(e.isStudy){var i=this.dataSource[1];if(i.fid==e.id&&i.flv>=e.lvCfg.level){this.ronglianbtn.visible=false;this.labelyimanji.text=app.getLang("fumo_tips_6");this.labelyimanji.visible=true}else{this.labelyimanji.text=app.getLang("fumo_tips_5");this.ronglianbtn.visible=true;this.labelyimanji.visible=false}this.tishi.labelzhuangbei.text="配方等级："+e.lvCfg.level;this.tishi.labelmiaoshu.text=this._model.getProStr(e.id,e.lvCfg.level)}else{this.labelyimanji.visible=true;this.ronglianbtn.visible=false;this.tishi.labelzhuangbei.text="配方等级：0";this.tishi.labelmiaoshu.text=this._model.getProStr(e.id,0)}};e.SINGLE_KEY="share.RoleEquipFumoTuzhiView";return e}(ui.zhuangbei.zhuangbeifumoxuanzetipsUI);i.RoleEquipFumoTuzhiView=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(r){var t=function(i){__extends(t,i);function t(){var t=i!==null&&i.apply(this,arguments)||this;t._equipPos=1;t._isHavePeifang=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this._model=r.EquipModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnfumo.clickHandler=new Laya.Handler(this,this.onClickFumo);this.btnpeifang.clickHandler=new Laya.Handler(this,this.onClickOpenStudyFumoView);game.HelperViewHandler.registerStr([this.btnwenhao,this.labelrishi3],"func86t","func413");this.listxiaohao.itemRender=game.CostItem;this.listxiaohao.renderHandler=game.CostItem.RENDER_HANDLER;this.listxiaohao.scrollRectOffX=20;this.listxiaohao.scrollRectOffY=20;this.centerLayout=new game.CenterLayoutMediator(this.listxiaohao,this.boxxiaohao,100,this.listxiaohao.spaceX);this.roleMediator=new common.RoleListMediator(this.itemxuanze.xuanzelist,r.RoleItem,new Laya.Handler(this,this.roleSelectChange));this.equipArr=[];for(var t=1;t<=r.EquipStatic.EQUIP_NUM;t++){var e=this["zhuangbei"+t];e.position=e.zhuangbei.position=t;this.equipArr.push(e)}};t.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshEquip);this.cizhui2.imgjia.on(Laya.Event.CLICK,this,this.onClickOpenFumoSelectView);this.cizhui2.btnchongzhi.on(Laya.Event.CLICK,this,this.onClickOpenFumoSelectView);this._model.initSelFumoIndex=-1;this._model.clickSelectFumoIndex=-1;this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshEquip);this.cizhui2.imgjia.off(Laya.Event.CLICK,this,this.onClickOpenFumoSelectView);this.cizhui2.btnchongzhi.off(Laya.Event.CLICK,this,this.onClickOpenFumoSelectView);this.boIgonre=false};t.prototype.refreshEquip=function(){if(this.boIgonre){return}this.roleMediator.setRedArr(this._model.getWearRoleRedArr());this.setEquips();this._peifangBtnRed()};t.prototype.refreshAll=function(){if(this.dataSource&&this.dataSource.length==1){this.roleMediator.setData(Number(this.dataSource[0]),this._model.getWearRoleRedArr())}else{var t=0;var e=this._model.getWearRoleRedArr();for(var i=0;i<e.length;i++){if(e[i]){t=i;break}}this.roleMediator.setData(t,e)}this.setEquips();this._peifangBtnRed()};t.prototype.roleSelectChange=function(){this.setEquips()};t.prototype.setEquips=function(){var t=game.GridsModel.EquipEnums[this.roleMediator.selectedIndex];for(var e=1;e<=r.EquipStatic.EQUIP_NUM;e++){if(e>=4&&e<=6&&game.Context.teamLv<game.Config.getIntParams(1149)){this.equipArr[e-1].setData(game.GridsModel.LOCKED,t)}else{var i=game.GridsModel.getIns().getEquipByTypeAndPos(t,e);if(i){this._model.initselIndex(e);this.equipArr[e-1].setData(i,t)}else{this.equipArr[e-1].setData(game.GridsModel.EMPTY,t)}}}};t.prototype.setEquipRed=function(){var t=false;for(var e=1;e<=r.EquipStatic.EQUIP_NUM;e++){var i=this._model.checkWearReach(this.roleMediator.selectedIndex+1,e);var n=this._model.getPeiyangByPos(this.roleMediator.selectedIndex+1,e);this.equipArr[e-1].setRed(i||n);t=t||i}if(t){}else{}};t.prototype.updateFumoView=function(t){this._equipPos=t;var e=game.GridsModel.EquipEnums[this.roleMediator.selectedIndex];var i=this._eqeuipVo=game.GridsModel.getIns().getEquipByTypeAndPos(e,t);if(i){var n=game.Config.getParams(2025);var r=n.split(";");if(i.itemCfg.qua<+r[0]||this.sumCuilianArr(i.quench)<+r[1]){this.clientViewBox(false);this.labelrishi1.visible=true;this.labelrishi1.text=app.getLang("fumo_tips_1")}else{if(i.fid){this.labelrishi1.visible=false;this.clientViewBox(true);this.updateCizhuiView(i,this.cizhui1,true);this.updateCizhuiView(i,this.cizhui2,false);var o=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(i.fid,i.flv);this.centerLayout.array=this._cost1=game.ItemUtil.parserList(o.fumocost)}else{this.clientViewBox(true);this.labelrishi1.visible=false;this.cizhui1.visible=false;this.imgjiantou.visible=false;this.updateCizhuiView(i,this.cizhui2,false);this.labelrishi2.text=app.getLang("fumo_tips_3")}this.boxxiaohao.visible=false}}else{this.clientViewBox(false);this.labelrishi1.visible=true;this.labelrishi1.text=app.getLang("fumo_tips_2")}};t.prototype.clientViewBox=function(t){this.cizhui1.visible=t;this.cizhui2.visible=t;this.labelrishi2.visible=t;this.imgjiantou.visible=t;this.boxxiaohao.visible=t};t.prototype.updateCizhuiView=function(t,e,i){if(e===void 0){e=this.cizhui2}if(i===void 0){i=true}this._isHavePeifang=false;if(i){e["labelmiaoshu"].visible=true;e["labelzhuangbei"].visible=true;e["btnchongzhi"].visible=false;e["imgjia"].visible=false;if(t instanceof items.EquipVO){var n=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(t.fid,t.flv);e["labelzhuangbei"].text="配方等级："+n.level;e["labelmiaoshu"].text=this._model.getProStr(t.fid,n.level)}else{this._isHavePeifang=true;this._fumoPeifangCfg=t;e["btnchongzhi"].visible=true;e["labelzhuangbei"].text="配方等级："+t.lvCfg.level;e["labelmiaoshu"].text=this._model.getProStr(t.id,t.lvCfg.level);this.centerLayout.array=this._cost1=game.ItemUtil.parserList(t.lvCfg.fumocost);this.boxxiaohao.visible=true;this.labelrishi2.visible=false}}else{e["labelmiaoshu"].visible=false;e["labelzhuangbei"].visible=false;e["btnchongzhi"].visible=false;e["imgjia"].visible=true}};t.prototype.onClickOpenFumoSelectView=function(){app.ViewManager.toggleDialog(r.RoleEquipFumoTuzhiView,1,0,[this._equipPos,this._eqeuipVo])};t.prototype.onClickFumo=function(){if(!this._isHavePeifang){manager.FlowManager.instance.flowByStyle1("无法附魔")}else{if(game.GridsModel.getIns().hasEnoughItems(this._cost1,false,true,true)){if(this._eqeuipVo.itemCfg.qua>=this._fumoPeifangCfg.cfg.rankneed&&this.sumCuilianArr(this._eqeuipVo.quench)>=this._fumoPeifangCfg.cfg.cuilianneed){app.ProtocolRequest.EquipFmReq(this._eqeuipVo.getInstId(),this._fumoPeifangCfg.id,this._eqeuipVo.flag)}else{manager.FlowManager.instance.flowByStyle1("fumo_tips_1")}}}};t.prototype.onClickOpenStudyFumoView=function(){app.ViewManager.toggleDialog(r.RoleEquipXuexiTuzhiView,1,0)};t.prototype.sumCuilianArr=function(t){var e=0;for(var i=0;i<t.length;i++){e+=t[i]}return e};t.prototype._peifangBtnRed=function(){game.RedDotView.removeFrom(this.btnpeifang);for(var t=1;t<=r.EquipStatic.EQUIP_NUM;t++){var e=this._model.getPeifangArrByPos(t);for(var i=0;i<e.length;i++){var n=game.ItemUtil.parserList(e[t].cost);if(game.GridsModel.getIns().hasEnoughItems(n,false,false)){game.RedDotView.addTo(this.btnpeifang);return}}}};t.SINGLE_KEY="equip.RoleEquipFumoView";return t}(ui.zhuangbei.zhuangbeifumoviewUI);r.RoleEquipFumoView=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var equip;(function(r){var t=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listxuanze.selectEnable=true;this.listxuanze.renderHandler=new Laya.Handler(this,this.onCellHandler);this.listxuanze.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.ronglianbtn.clickHandler=new Laya.Handler(this,this.onClickHandler);this._model=r.EquipModel.getIns();this.equipArr=[];for(var t=1;t<=r.EquipStatic.EQUIP_NUM;t++){var e=this["zhuangbei"+t];e.position=t;this.equipArr.push(e)}this.listgezi1.itemRender=game.CostItem;this.listgezi1.renderHandler=game.CostItem.RENDER_HANDLER;this.listgezi1.scrollRectOffX=20;this.listgezi1.scrollRectOffY=20;this.centerLayout=new game.CenterLayoutMediator(this.listgezi1,this.boxxiaohao,100,this.listgezi1.spaceX)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll);this._model.on(r.EquipModel.EVENT_FUMO_DATA_UPADTE,this,this._updateLvStudyView);this._model.initSelXuexiFumoIndex=-1;this._model.clickSelectXuexiFumoIndex=-1;this._selTempIndex=0};t.prototype.onUnDisplay=function(){this._model.off(r.EquipModel.EVENT_FUMO_DATA_UPADTE,this,this._updateLvStudyView)};t.prototype.refreshAll=function(){this.setEquips()};t.prototype.setEquips=function(){for(var t=1;t<=r.EquipStatic.EQUIP_NUM;t++){var e=this._model.getPeifangArrByPos(t);for(var i=0;i<e.length;i++){var n=game.ItemUtil.parserList(e[t].cost);if(game.GridsModel.getIns().hasEnoughItems(n,false,false)){this._model.initselXuejiIndex(t);this.equipArr[t-1].setData(t,true)}else{this.equipArr[t-1].setData(t,false)}}}};t.prototype.updateLowView=function(t){this._selPos=t;this._selTempIndex=this.listxuanze.selectedIndex=0;this.updateBtnArrView(t)};t.prototype.updateBtnArrView=function(t){this.listxuanze.array=this._model.getPeifangArrByPos(t);this._updateLvStudyView(0)};t.prototype.onCellHandler=function(t,e){if(this._selTempIndex==e){t.selected=true}else{t.selected=false}game.RedDotView.removeFrom(t);var i=this._model.getPeifangArrByPos(this._selPos)[e];var n;if(!i.isStudy){n=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(i.id,1)}else{n=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(i.id,i.net.flv+1)}if(n){var r=game.ItemUtil.parserList(n.cost);if(game.GridsModel.getIns().hasEnoughItems(r,false,false)){game.RedDotView.addTo(t)}}t.label=app.getLang(t.dataSource.cfg.name)};t.prototype.onSelectHandler=function(t){this._selTempIndex=t;this._updateLvStudyView(t)};t.prototype._updateLvStudyView=function(t){if(t===void 0){t=this._selTempIndex}this.huobiimg.visible=false;this.huobi.visible=false;var e=this._itemData=this._model.getPeifangArrByPos(this._selPos)[t];if(e.isStudy){var i=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(e.id,e.net.flv);var n=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(e.id,e.net.flv+1);this.labelxiaohao.text=app.getLang("fumo_desctitle_4");this.ronglianbtn.label="升级";if(n){this.tishi.labelmiaoshu2.visible=true;this.tishi.imgjiantou.visible=true;this.boxxiaohao.visible=true;this.labelyimanji.visible=false;this.tishi.labelzhuangbei.text="配方等级："+e.lvCfg.level;this.tishi.labelmiaoshu2.text=e.lvCfg.level+1;this.tishi.labelmiaoshu.text=this._model.getProStr(e.id,e.lvCfg.level);this._cost1=this.centerLayout.array=game.ItemUtil.parserList(n.cost)}else{this.tishi.labelmiaoshu2.visible=false;this.tishi.imgjiantou.visible=false;this.boxxiaohao.visible=false;this.labelyimanji.visible=true;this.tishi.labelzhuangbei.text="配方等级："+e.lvCfg.level;this.tishi.labelmiaoshu.text=this._model.getProStr(e.id,e.lvCfg.level)}}else{this.labelxiaohao.text=app.getLang("fumo_desctitle_3");this.tishi.labelmiaoshu2.visible=true;this.tishi.imgjiantou.visible=true;this.boxxiaohao.visible=true;this.labelyimanji.visible=false;this.ronglianbtn.label="学习";this.tishi.labelzhuangbei.text="配方等级：0";this.tishi.labelmiaoshu2.text="1";var i=csv.EquipProxy.getIns().getEquipFumoLvCfgMap(e.id,1);this.tishi.labelmiaoshu.text=this._model.getProStr(e.id,0);this._cost1=this.centerLayout.array=game.ItemUtil.parserList(i.cost)}};t.prototype.onClickHandler=function(){if(game.GridsModel.getIns().hasEnoughItems(this._cost1,false,true,true)){app.ProtocolRequest.UpdatePeifangReq(this._itemData.id);manager.EffectManager.playStageEffect("skill_shengjichenggong")}};t.SINGLE_KEY="share.RoleEquipXuexiTuzhiView";return t}(ui.zhuangbei.zhuangbeifumotipsUI);r.RoleEquipXuexiTuzhiView=t})(equip||(equip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(c){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=c.FaBaoNewModel.getIns();app.ViewManager.regist(c.FabaoListNewView,"fabao.atlas");app.ViewManager.regist(c.FaBaoLangHuanGeView,"fabao.atlas");app.ViewManager.regist(c.FabaosuipianView,"fabao.atlas");app.ViewManager.regist(c.FaBaoTuJianView,"fabao.atlas");app.ViewManager.regist(c.FabaozhulingtipView,"fabao.atlas");app.ViewManager.regist(c.FaBaoNingYunView,"fabao.atlas","chouka.atlas");app.ViewManager.regist(c.FabaosuipianzhuanhuanView,"fabao.atlas");app.ViewManager.regist(c.Fabaoxuanzesuipiantip,"fabao.atlas");app.ViewManager.regist(c.FaBaoGongMingLuView,"fabao.atlas");app.ViewManager.regist(c.FaBaoShuXingHuiZongView,"fabao.atlas","chongwu.atlas");app.ViewManager.regist(c.WuxinglingtaiView,"fabao.atlas");app.ViewManager.regist(c.LingtaiqianghuaTip,"fabao.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FABAONEW,c.FabaoListNewView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FABAOLANGHUANGE,c.FaBaoLangHuanGeView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FABAOBAG,c.FabaosuipianView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FABAOTUJIAN,c.FaBaoTuJianView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FABAO_GONGMING,c.FaBaoGongMingLuView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FA_BAO_SHU_XING,c.FaBaoShuXingHuiZongView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FABAO_LINGTAI,c.WuxinglingtaiView);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onItemChange);this._model.on(c.FaBaoNewModel.EVENT_FABAONEW_UPDATA,this,this.onUpDataNewTip)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.MagicDataAck,this,this.onMagicDataAck);this.addMsgListener(app.ProtocolResponse.MagicUpLevelAck,this,this.onMagicUpLevelAck);this.addMsgListener(app.ProtocolResponse.MagicLayAck,this,this.onMagicLayAck);this.addMsgListener(app.ProtocolResponse.MagicLayBuyAck,this,this.onMagicLayBuyAck);this.addMsgListener(app.ProtocolResponse.MagicWearAck,this,this.onMagicWearAck);this.addMsgListener(app.ProtocolResponse.MagicUpStarAck,this,this.onMagicUpStarAck);this.addMsgListener(app.ProtocolResponse.MagicResonanceInfoAck,this,this.onMagicResonanceInfoAck);this.addMsgListener(app.ProtocolResponse.MagicResonanteAck,this,this.onMagicResonanteAck);this.addMsgListener(app.ProtocolResponse.MagicAddExtNtf,this,this.onMagicAddExtNtf);this.addMsgListener(app.ProtocolResponse.ModifyMagicAddExtNtf,this,this.onModifyMagicAddExtNtf);this.addMsgListener(app.ProtocolResponse.MagicAlmightyPieceAck,this,this.onMagicAlmightyPieceAck);this.addMsgListener(app.ProtocolResponse.MagicLingtaiNtf,this,this.onMagicLingtaiNtf);this.addMsgListener(app.ProtocolResponse.UpMagicLingtaiAck,this,this.onUpMagicLingtaiAck);this.addMsgListener(app.ProtocolResponse.DongfuMagicLayResp,this,this.onDongfuMagicLayResp)};e.prototype.onDongfuMagicLayResp=function(t,e){};e.prototype.onMagicLingtaiNtf=function(t,e){this._model.ltlist=e.ltlist;this._model.checkLingTaiRed()};e.prototype.onUpMagicLingtaiAck=function(t,e){if(e.success==1){this._model.saveLingTai(e.ltype,e.lv);if(app.ViewManager.DisplayedInStage(c.LingtaiqianghuaTip)){c.LingtaiqianghuaTip.getIns().refreshView()}if(app.ViewManager.DisplayedInStage(c.WuxinglingtaiView)){c.WuxinglingtaiView.getIns().onRefshHandler()}this._model.checkLingTaiRed()}};e.prototype.onMagicAlmightyPieceAck=function(t,e){if(e.success==1){this._model.event(c.FaBaoNewModel.EVENT_PIECE_UPDATE)}};e.prototype.onMagicAddExtNtf=function(t,e){this._model.addext=e.addext};e.prototype.onModifyMagicAddExtNtf=function(t,e){this._model.pushExtAttr(e.addext)};e.prototype.onMagicResonanteAck=function(t,e){if(e.success==1){this._model.event(c.FaBaoNewModel.EVENT_FABAOGONGMING_SUC)}};e.prototype.onMagicResonanceInfoAck=function(t,e){this._model.updateGongMingInfo(e)};e.prototype.onMagicUpStarAck=function(t,e){if(e.success==1){this._model.parseTaskType(new Laya.Handler(this._model,this._model.saveStar,[e]));game.RoleModel.getIns().updateScroe();this._model.event(c.FaBaoNewModel.EVENT_STAR_UP,e);this._model.updataFaBaoRed();this._model.updataGongMingRed();app.SoundManager.getIns().playSound("cheer");c.FaBaoNewModel.getIns().cal()}};e.prototype.onMagicWearAck=function(t,e){if(e.success==1){var i=false;for(var n=0;n<this._model.magicEquiped.length;n++){var r=this._model.magicEquiped[n];if(r.combatPos==e.combatPos&&r.index==e.index){if(e.magicCfgID==0){this._model.magicEquiped.splice(n,1);i=true;break}}}if(i==false){if(e.magicCfgID!=0){var o=false;for(var n=0;n<this._model.magicEquiped.length;n++){var r=this._model.magicEquiped[n];if(r.combatPos==e.combatPos&&r.index==e.index){r.magicCfgID=e.magicCfgID;o=true}}if(o==false){var a=new MagicEquipUnitData;a.combatPos=e.combatPos;a.index=e.index;a.magicCfgID=e.magicCfgID;this._model.magicEquiped.push(a)}}}equip.EquipModel.getIns().updataMainRoleRed();this._model.event(c.FaBaoNewModel.EVENT_DRESS_EQUIP);c.FaBaoNewModel.getIns().cal()}};e.prototype.onItemChange=function(){this._model.updataFaBaoRed();this._model.checkLingTaiRed()};e.prototype.onUpDataNewTip=function(){if(this._model.newMagicIds.length>0){game.ClosureManager.addXin(csv.FunctionsProxy.ENUMS.FABAONEW)}else{game.ClosureManager.removeXin(csv.FunctionsProxy.ENUMS.FABAONEW)}};Object.defineProperty(e.prototype,"chouModel",{get:function(){return chouka.ChouKaModel.getIns()},enumerable:true,configurable:true});e.prototype.isAnyShow=function(){var t=[];t.push(chouka.ChouKaLianBaoView.SINGLE_KEY,chouka.ChouKaLianBaoUpView.SINGLE_KEY,chouka.MyLianbaoviewStyle1.SINGLE_KEY,chouka.MyLianbaoviewStyle2.SINGLE_KEY);if(this.chouModel.isStartReqesutDaily){return 1024}for(var e=0;e<t.length;e++){var i=t[e];if(app.ViewManager.DisplayedInStage(i)){return e}}return-1};e.prototype.checkIfShowByGetType=function(t){if(!this.checkType){this.checkType=app.str2Array(game.Config.getParams(2003),";")}return this.checkType.indexOf(t.toString())==-1};e.prototype.onMagicDataAck=function(t,e){var i=false;if(!this._model.magicList){}else{for(var n=0;n<e.magicList.length;n++){if(e.magicList[n].active==1&&this._model.oldActiveIds.indexOf(e.magicList[n].magicCfgID)==-1){this._model.newMagicIds.push(e.magicList[n].magicCfgID);this._model.event(c.FaBaoNewModel.EVENT_FABAONEW_UPDATA)}}var r=this._model.oldActiveIds;var o=[];for(var a=0;a<e.magicList.length;a++){var s=e.magicList[a].magicCfgID;if(e.magicList[a].active==1&&r.indexOf(s)==-1){o.push(s)}}if(o.length>0){var l=false;for(var a=0;a<o.length;a++){if(csv.ChouKaProxy.getIns().getBaseCfg(o[a]).roleshow==1){game.RoleModel.getIns().newGujianIds.push(o[a]);i=true}}var u=this.isAnyShow();if(u!=-1){l=true}if(!l){var p=new DailyDrawResp;p.result=1;p.reward=[];for(var a=0;a<o.length;a++){var h=new DailyDrawData;h.status=1;h.itemnum=1;h.itemid=o[a];if(this.checkIfShowByGetType(e.getType)){p.reward.push(h)}}if(app.ViewManager.DisplayedInStage(synthesis.HechengControlView.SINGLE_KEY)){app.ViewManager.toggleDialog(synthesis.HechengControlView,-1)}if(p.reward.length){chouka.ChouKaModel.getIns().showTips(p,"onMagicDataAck",false)}}}}this._model.magicList=e.magicList;this._model.parseTaskType(new Laya.Handler(this,this.callAct,[e,i]));this._model.updataGongMingRed()};e.prototype.callAct=function(t,e){this._model.initMagicCfgList();game.RoleModel.getIns().updateScroe();this._model.magicEquiped=t.magicEquiped;this._model.magicLayList=t.magicLay;Laya.timer.callLater(this,this.showLangHuangeRedTip);this._model.updataFaBaoRed();c.FaBaoNewModel.getIns().event(c.FaBaoNewModel.EVENT_DATA_UPADTE);c.FaBaoNewModel.getIns().cal();if(e){game.RoleModel.getIns().onGuajianRedDotChange()}csv.FunctionsProxy.getIns().ismacInit=true;csv.FunctionsProxy.getIns().initFunctions()};e.prototype.onMagicUpLevelAck=function(t,e){if(e.success==1){var i=chouka.ChouKaModel.getIns();this._model.parseTaskType(new Laya.Handler(i,i.saveLvData,[e]));game.RoleModel.getIns().updateScroe();c.FaBaoNewModel.getIns().event(c.FaBaoNewModel.EVENT_LEVEL_UP,e);this._model.updataFaBaoRed();app.SoundManager.getIns().playSound("cheer");c.FaBaoNewModel.getIns().cal()}if(app.ViewManager.DisplayedInStage(c.FabaozhulingtipView)){var n=c.FabaozhulingtipView.getIns().isCanZhuling();if(c.FaBaoNewModel.getIns().isStartOneKey&&n){app.ProtocolRequest.MagicUpLevelReq(n)}else{c.FaBaoNewModel.getIns().isStartOneKey=false}}};e.prototype.onMagicLayAck=function(t,e){if(e.success==1){var i=c.FaBaoNewModel.getIns().getMagicLayCfg(e.layid,e.site);i.magicCfgID=e.magicCfgID;app.ViewManager.toggleDialog(c.LangHuanGeSelectView,-1);Laya.timer.callLater(this,this.showLangHuangeRedTip);this._model.event(c.FabaoNewEvent.LANGHUANGE_UPDATE);c.FaBaoNewModel.getIns().cal()}};e.prototype.onMagicLayBuyAck=function(t,e){if(e.success==1){var i=c.FaBaoNewModel.getIns().getMagicLayCfg(e.layid,e.site);i.unlock=1;Laya.timer.callLater(this,this.showLangHuangeRedTip);this._model.event(c.FabaoNewEvent.LANGHUANGE_UPDATE)}};e.prototype.showLangHuangeRedTip=function(){if(this._model.isFangZhiFaBaoRedTip()){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FABAOLANGHUANGE)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FABAOLANGHUANGE)}};e.SINGLE_KEY="fabaonew.FaBaoModule";return e}(app.ModuleBase);c.FaBaoNewModule=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("magic_lay.csv");this.cfgMapList=t.getMapList("layid")};e.prototype.getListByLayid=function(t){return this.cfgMapList[t]};e.prototype.getMapList=function(){return this.cfgMapList};e.prototype.getMagicLayCfg=function(t,e){var i=this.getListByLayid(t);for(var n=0;n<i.length;n++){if(e==parseInt(i[n].site)){return i[n]}}return null};e.SINGLE_KEY="csv.FaBaoNewLayProxy";return e}(app.ModelBase);t.FaBaoNewLayProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(g){var t=function(e){__extends(u,e);function u(){var t=e!==null&&e.apply(this,arguments)||this;t.oldActiveIds=[];t.newMagicIds=[];t.totalLv=0;t.totalStar=0;t.totalActiveCnt=0;t.isStartOneKey=false;t.taskValue={};return t}u.getIns=function(){return app.Singleton.getInstance(u)};u.prototype.init=function(){this.magicCfgList=[];this.magicCfgMap={};for(var t=0;t<csv.ChouKaProxy.getIns().magic_baseList.length;t++){var e=new g.FaBaoNewVo;e.cfg=csv.ChouKaProxy.getIns().magic_baseList[t];e.isActive=e.level=e.star=0;this.magicCfgList.push(e);this.magicCfgMap[e.cfg.id]=e}this.wuxingColor=app.getLang("lingtai_06").split(";")};u.prototype.sortLingTai=function(t,e){if(t.lv>e.lv){return 1}else if(t.lv<e.lv){return-1}return 0};u.prototype.getWuXingZhilingLv=function(){if(this.ltlist){var t=[];for(var e=0;e<this.ltlist.length;e++){var i=this.ltlist[e];if(i.lv>0){t.push(i)}}t.sort(this.sortLingTai);if(t.length>=5){return t[0].lv}}return 0};u.prototype.saveLingTai=function(t,e){var i=false;if(this.ltlist){for(var n=0;n<this.ltlist.length;n++){var r=this.ltlist[n];if(r.ltype==t){r.lv=e;i=true}}}if(!i){if(!this.ltlist){this.ltlist=[]}var r=new LingtaiRd;r.ltype=t;r.lv=e;this.ltlist.push(r)}};u.prototype.getLingTaiLv=function(t){if(this.ltlist){for(var e=0;e<this.ltlist.length;e++){var i=this.ltlist[e];if(i.ltype==t){return i.lv}}}return 0};u.prototype.zeroPercentage=function(t){var e=csv.FaBaoNewProxy.getIns().magic_lingtaiTypeLv[t][1];var i=Attributes.decode(e.param).baseList[0];return Attributes.getPropValue(i.propId,0,i.formula)};u.prototype.getExt3Value=function(t,e){if(this.addext){for(var i=0;i<this.addext.length;i++){var n=this.addext[i];if(n.atype==t&&n.param==e){return n.val}}}return 0};u.prototype.getExt2Value=function(t){if(this.addext){for(var e=0;e<this.addext.length;e++){var i=this.addext[e];if(i.atype==t){return i.val}}}return 0};u.prototype.addExtVo=function(t){if(!t){return}if(!this.addext){this.addext=[]}var e=false;for(var i=0;i<this.addext.length;i++){var n=this.addext[i];if(csv.MagicidSkillObj.is2Param(t.atype)){if(n.atype==t.atype){n.val=t.val;e=true}}else{if(n.atype==t.atype&&n.param==t.param){n.val=t.val;e=true}}}if(!e){this.addext.push(t)}};u.prototype.pushExtAttr=function(t){for(var e=0;e<t.length;e++){this.addExtVo(t[e])}};u.prototype.initMagicCfgList=function(){game.RoleModel.getIns().aliveGuajianIds=[];for(var t=0;t<this.magicList.length;t++){for(var e=0;e<this.magicCfgList.length;e++){if(this.magicList[t].magicCfgID==this.magicCfgList[e].cfg.id){this.magicCfgList[e].isActive=1;this.magicCfgList[e].star=this.magicList[t].star;this.magicCfgList[e].level=this.magicList[t].level;if(this.oldActiveIds.indexOf(this.magicList[t].magicCfgID)==-1){this.oldActiveIds.push(this.magicList[t].magicCfgID)}if(csv.ChouKaProxy.getIns().getBaseCfg(this.magicList[t].magicCfgID).roleshow==1){game.RoleModel.getIns().aliveGuajianIds.push(this.magicList[t].magicCfgID)}}}}};u.prototype.getItemSocre=function(t){var e=0;var i=csv.FaBaoNewProxy.getIns().magic_updateMap[t.cfg.id];if(i){var n=i[t.level];if(n){e+=n.addbattery}}var r=csv.FaBaoNewProxy.getIns().magic_star[t.cfg.id];if(r){var o=r[t.star];if(o){e+=o.addbattery}}return e};u.prototype.getSocre=function(){var t=0;if(this.magicList){for(var e=0;e<this.magicList.length;e++){for(var i=0;i<this.magicCfgList.length;i++){if(this.magicList[e].magicCfgID==this.magicCfgList[i].cfg.id){if(this.magicCfgList[i].isActive==1){t+=this.getItemSocre(this.magicCfgList[i])}}}}}return t};u.prototype.getMagicCfgById=function(t){return this.magicCfgMap[t]};u.prototype.getHaveFabaoByWuxing=function(t){var e=[];for(var i=0;i<this.magicList.length;i++){var n=g.FaBaoNewModel.getIns().getMagicCfgById(this.magicList[i].magicCfgID);if(n.cfg.supportelements==t){e.push(n)}}return e};u.prototype.getBaseListByShowType=function(t,e,i,n,r){var o=[];var a=[];for(var s=0;s<this.magicCfgList.length;s++){if(i||this.magicCfgList[s].isActive){if(this.magicCfgList[s].cfg.bookshow==0){continue}var l=this.magicCfgList[s].cfg;if(t==1&&l.supportelements==e){o.push(this.magicCfgList[s])}else if(t==2&&csv.ChouKaProxy.getIns().getQuality(l.id)==e){o.push(this.magicCfgList[s])}else if(t==3&&l.type==e){o.push(this.magicCfgList[s])}}}for(var s=0;s<o.length;s++){var l=o[s].cfg;var u=l.tag_1.split(";").map(Number);if(n==0||u.indexOf(n)!=-1){var p=l.tag_2.split(";").map(Number);if(r==0||p.indexOf(r)!=-1){a.push(o[s])}}}a.sort(this.sortQuaAndId);return a};u.prototype.sortQuaAndId=function(t,e){var i=csv.ChouKaProxy.getIns().getQuality(t.cfg.id);var n=csv.ChouKaProxy.getIns().getQuality(e.cfg.id);if(i>n){return-1}else if(i<n){return 1}else{if(parseInt(t.cfg.id)>parseInt(e.cfg.id)){return 1}else if(parseInt(t.cfg.id)<parseInt(e.cfg.id)){return-1}else{return 0}}};u.prototype.getBaseTypeArr=function(t){var e=[];for(var i=0;i<this.magicCfgList.length;i++){var n=this.magicCfgList[i].cfg;if(t==1&&e.indexOf(n.supportelements)==-1){e.push(n.supportelements)}else if(t==2&&e.indexOf(csv.ChouKaProxy.getIns().getQuality(n.id))==-1){e.push(csv.ChouKaProxy.getIns().getQuality(n.id))}else if(t==3&&e.indexOf(n.type)==-1){e.push(n.type)}}switch(t){case 1:e.sort(this.sortX);break;case 2:e.sort(this.sortD);break;case 3:e.sort(this.sortX);break}return e};u.prototype.sortD=function(t,e){if(parseInt(t)>parseInt(e)){return-1}if(parseInt(t)<parseInt(e)){return 1}return 0};u.prototype.sortX=function(t,e){if(parseInt(t)>parseInt(e)){return 1}if(parseInt(t)<parseInt(e)){return-1}return 0};u.prototype.getMagicLayArr=function(t){var e=[];for(var i=0;i<this.magicLayList.length;i++){if(this.magicLayList[i].layid==t&&this.magicLayList[i].magicCfgID){var n={};n.data=this.magicLayList[i];n.id=this.magicCfgMap[this.magicLayList[i].magicCfgID].cfg.id;e.push(n)}}e.sort(this.magicLayListSort);return e};u.prototype.magicLayListSort=function(t,e){var i=csv.ChouKaProxy.getIns().getQuality(t.id);var n=csv.ChouKaProxy.getIns().getQuality(e.id);if(i>n){return-1}else if(i<n){return 1}else{if(parseInt(t.id)>parseInt(e.id)){return 1}else if(parseInt(t.id)<parseInt(e.id)){return-1}else{return 0}}};u.prototype.getMagicLayCfg=function(t,e){for(var i=0;i<this.magicLayList.length;i++){if(this.magicLayList[i].layid==t&&this.magicLayList[i].site==e){return this.magicLayList[i]}}return null};u.prototype.getNextMagicLayCfg=function(t){for(var e=0;e<this.magicLayList.length;e++){if(this.magicLayList[e].layid==t&&!this.magicLayList[e].magicCfgID){return this.magicLayList[e]}}return null};u.prototype.getLangHuanGeSelectArr=function(t){var e=[];for(var i=0;i<this.magicList.length;i++){var n=this.magicCfgMap[this.magicList[i].magicCfgID];if(parseInt(n.cfg.layid)==t){var r=0;for(var o=0;o<this.magicLayList.length;o++){if(parseInt(n.cfg.id)!=this.magicLayList[o].magicCfgID){r++}}if(r==this.magicLayList.length){e.push(n)}}}e.sort(this.pingfenSort);return e};u.prototype.getLangHuanGeRangRuArr=function(t){var e=[];for(var i=0;i<this.magicCfgList.length;i++){var n=this.magicCfgList[i];if(parseInt(n.cfg.layid)==t){e.push(n)}}e.sort(this.cfgIdSort);return e};u.prototype.pingfenSort=function(t,e){if(t.cfg.point>e.cfg.point){return-1}if(t.cfg.point<e.cfg.point){return 1}return 0};u.prototype.cfgIdSort=function(t,e){if(t.cfg.id>e.cfg.id){return-1}if(t.cfg.id<e.cfg.id){return 1}return 0};u.prototype.getActionList=function(){var t=[];var e=csv.ChouKaProxy.getIns().specialprogroupMap;for(var i in e){if(i!=""){var n=e[i];var r=[];for(var o=0;o<n.length;o++){var a=this.getMagicCfgById(n[o].id);if(a.isActive==1){r.push(a)}}if(r.length>0){t.push(csv.MagicidProxy.getIns().getSkillAll(r,"typedes",false))}}}return t};u.prototype.getBaseAttrList=function(t){var e=csv.ChouKaProxy.getIns().magic_baseList;var i=csv.ChouKaProxy.getIns().magic_skill;var n=[];for(var r=0;r<e.length;r++){var o=e[r];if(o.prorole!=""&&o.prorole.indexOf(t.toString())!=-1){var a=this.getMagicCfgById(o.id);var s=o.id;if(a&&a.isActive==1&&i[s]&&i[s][a.level]&&i[s][a.level][a.star]){var l=csv.MagicidProxy.getIns().getSkillParam(s,a.level,a.star);if(l){for(var u=0;u<l.attrlist.length;u++){var p=l.attrlist[u];if(p.type==g.EPlayType.Add){n=n.concat(p.getSumPro())}else{var h=Attributes.decode(p.attr);n=n.concat(h.baseList)}}}}}}var c=Attributes.hebingAttributes(n);var f=[];for(var r=0;r<c.length;r++){if(c[r].value!=0){f.push(c[r])}}return f};u.prototype.getWuXin=function(){var t=Attributes.decode(csv.FaBaoNewProxy.getIns().starDefaultAttr).baseList;var e=csv.ChouKaProxy.getIns().magic_baseList;for(var i=0;i<e.length;i++){var n=e[i];var r=this.getMagicCfgById(n.id);if(r&&r.isActive==1){var o=csv.FaBaoNewProxy.getIns().getStarAttr(r.cfg.id,r.star);var a=Attributes.decode(o);t=t.concat(a.baseList)}}return Attributes.hebingAttributes(t)};u.prototype.getXiaoGuoData=function(t){var e=[];for(var i=0;i<this.magicLayList.length;i++){if(this.magicLayList[i].layid==t&&this.magicLayList[i].magicCfgID){var n=this.magicCfgMap[this.magicLayList[i].magicCfgID];e.push(n)}}if(e.length==0){return""}else{return csv.MagicidProxy.getIns().getSkillAll(e,"specialdes",true)}};u.prototype.saveStar=function(t){for(var e=0;e<this.magicList.length;e++){if(this.magicList[e].magicCfgID==t.magicCfgID){this.magicList[e].star=t.newStar;this.magicCfgMap[t.magicCfgID].star=t.newStar;break}}};u.prototype.updateGongMingInfo=function(t){this.actMagicResonaceArr=t.magicResonace;this.magicResonateList=[];var e=csv.MagicResonateProxy.getIns().getInitArr();for(var i=0;i<e.length;i++){var n=void 0;if(t.magicResonace&&t.magicResonace.length>0){for(var r=0;r<t.magicResonace.length;r++){if(t.magicResonace[r].id==Number(e[i].resonateid)){n=csv.MagicResonateProxy.getIns().getCfgByStage(t.magicResonace[r].id,t.magicResonace[r].stage);break}}}if(!n){n=e[i]}this.magicResonateList.push(n)}this.magicResonateList.sort(function(t,e){if(t.stage>e.stage){return 1}else if(t.stage<e.stage){return-1}else{return 0}});var o=[];var a=[];var s=[];for(var r=0;r<this.magicResonateList.length;r++){if(this.canGongMing(this.magicResonateList[r])){o.push(this.magicResonateList[r])}else if(this.isActGongMing(this.magicResonateList[r].resonateid)>0){a.push(this.magicResonateList[r])}else{s.push(this.magicResonateList[r])}}this.magicResonateList=o.concat(a).concat(s);Laya.timer.callLater(this,this.updataGongMingRed);this.event(u.EVENT_FABAOGONGMINGLU_UPDATE)};u.prototype.isActGongMing=function(t){if(!this.actMagicResonaceArr){return 0}for(var e=0;e<this.actMagicResonaceArr.length;e++){if(this.actMagicResonaceArr[e].id==t){return 1}}return 0};u.prototype.updataGongMingRed=function(){if(!this.magicResonateList){return}var t=false;for(var e=0;e<this.magicResonateList.length;e++){if(this.canGongMing(this.magicResonateList[e])){t=true;break}}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FABAO_GONGMING)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FABAO_GONGMING)}};u.prototype.getCurGongMingCfg=function(t){for(var e=0;e<this.magicResonateList.length;e++){if(this.magicResonateList[e].resonateid==t){return this.magicResonateList[e]}}return null};u.prototype.isFangZhiFaBaoRedTip=function(){for(var t=0;t<this.magicLayList.length;t++){var e=this.magicLayList[t];if(e.unlock==1&&e.magicCfgID==0){var i=this.getLangHuanGeSelectArr(e.layid);if(i.length>0){return true}}}return false};u.prototype.isFangZhiFaBaoYeQianRedTip=function(t){for(var e=0;e<this.magicLayList.length;e++){var i=this.magicLayList[e];if(i.unlock==1&&i.magicCfgID==0&&i.layid==t){var n=this.getLangHuanGeSelectArr(t);if(n.length>0){return true}}}return false};u.prototype.updataFaBaoRed=function(){if(!this.magicList)return;var t=false;for(var e=0;e<this.magicList.length;e++){var i=this.magicCfgMap[this.magicList[e].magicCfgID];if(chouka.ChouKaModel.getIns().isCanNinYun(i)||chouka.ChouKaModel.getIns().isCanZhuLing(i)){t=true;break}}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FABAONEW)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FABAONEW)}if(this.checkSys()){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FABAOBAG)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FABAOBAG)}};u.prototype.checkLingTaiRed=function(){var t=false;for(var e=0;e<5;e++){var i=this.getLevelUpLingTaiStatus(e+1);if(i==g.EFabaoLingTai.Normal){t=true;break}}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FABAO_LINGTAI)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FABAO_LINGTAI)}};u.prototype.checkSys=function(){var t=game.GridsModel.getIns().getGridByType(game.GridsModel.BAG_FaBao);for(var e=0;e<t.itemList.length;e++){var i=t.itemList[e];var n=i.itemCfg.p1;var r=this.getMagicCfgById(n);if(r&&r.isActive){}else{if(this.canSynthesis(i)==1){return true}}}};u.prototype.getOwnFaBaoNum=function(t){var e=0;var i=this.isActGongMing(t.resonateid)>0?t.stage+1:1;var n=csv.MagicResonateProxy.getIns().getCfgByStage(t.resonateid,i);if(n){var r=n.requirement.split(";");var o=void 0;for(var a=0;a<r.length;a++){var s=parseInt(r[a].split("-")[0]);var l=parseInt(r[a].split("-")[1]);o=u.getIns().getMagicCfgById(l);if(o.isActive>0&&o.star>=s){e++}}}return e};u.prototype.getGongmingXiaoguoArr=function(t){var e=1;var i=csv.MagicResonateProxy.getIns().getCfgByStage(t,e);var n=[];var r=[];while(i){r.push(app.getLang(i.resonatedesc));e++;i=csv.MagicResonateProxy.getIns().getCfgByStage(t,e)}return r};u.prototype.isEnoughGongMing=function(t){var e=this.isActGongMing(t.resonateid)>0?t.stage+1:1;var i=this.getOwnFaBaoNum(t);var n=csv.MagicResonateProxy.getIns().getCfgByStage(t.resonateid,e);return n&&i>=Number(n.magicnum)};u.prototype.canGongMing=function(t){var e=this.isActGongMing(t.resonateid)>0?t.stage+1:1;var i=csv.MagicResonateProxy.getIns().getCfgByStage(t.resonateid,e);if(i){var n=this.isEnoughGongMing(t);var r=game.GridsModel.getIns().hasEnoughItems(i.cost);return n&&r}return false};u.prototype.canSynthesis=function(t){var e=g.FaBaoNewModel.getIns().getNeed(t.itemCfg.p1);if(e){var i=e.synthesis_materials1.split("-")[1];if(t.count>=i){return 1}}return-1};u.prototype.getNeed=function(t){var e=csv.HechengProxy.getIns().getArr(csv.HechengProxy.ENUM.FABAO);for(var i=0;i<e.length;i++){var n=e[i];if(n.synthesis_item==t){return n}}return null};u.prototype.isFabaoEquip=function(t){for(var e=0;e<this.magicLayList.length;e++){if(this.magicLayList[e].magicCfgID==t){return true}}return false};u.prototype.islayUp=function(t){for(var e=0;e<this.magicLayList.length;e++){var i=this.magicLayList[e];if(i.magicCfgID==t&&i.unlock==1){return true}}return false};u.prototype.getLevelUpLingTaiStatus=function(t){var e=this.getLingTaiLv(t);var i=e+1;var n=csv.FaBaoNewProxy.getIns().magic_lingtaiTypeLv[t][i];if(!n){return g.EFabaoLingTai.IsMax}else{var r=n.cost.split(";");for(var o=0;o<r.length;o++){var a=r[o];var s=a.split("-");var l=parseInt(s[0]);var u=parseInt(s[1]);var p=game.GridsModel.getIns().getItemCount(l);if(p<u){return g.EFabaoLingTai.ItemNotEnough}}}return g.EFabaoLingTai.Normal};u.prototype.getUseList=function(){var t=[];if(this.magicList){for(var e=0;e<this.magicList.length;e++){for(var i=0;i<this.magicCfgList.length;i++){if(this.magicList[e].magicCfgID==this.magicCfgList[i].cfg.id){var n=this.magicCfgList[i];var r=false;if(n.isActive==1){if(n.cfg.type==g.EFabaoNewType.FangZhi){if(this.islayUp(n.cfg.id)){r=true}}else{r=true}}if(r){t.push(n.cfg.id)}}}}}return t};u.prototype.cal=function(){for(var t=0;t<csv.FaBaoNewProxy.getIns().magicweapon_passive.length;t++){var e=csv.FaBaoNewProxy.getIns().magicweapon_passive[t];this.calNewValue(e.type)}var i=0;var n=0;this.totalActiveCnt=0;for(var r=0;r<this.magicCfgList.length;r++){if(this.magicCfgList[r].isActive==1){i+=this.magicCfgList[r].level;n+=this.magicCfgList[r].star;this.totalActiveCnt++}}this.totalLv=i;this.totalStar=n};Object.defineProperty(u.prototype,"allLvStar",{get:function(){return this.totalStar+this.totalLv},enumerable:true,configurable:true});u.prototype.parse=function(t,e,i){var n=i.split(";");for(var r=0;r<n.length;r++){var o=n[r].split("-");var a=parseFloat(o[0]);if(a==t){var s=parseFloat(o[1]);var l=csv.FaBaoNewProxy.getIns().passiveMap;if(l[a]&&l[a][s]){var u=l[a][s];var p=this.taskValue[t];p.push(u.showparam,s)}}}};u.prototype.calNewValue=function(t){var e=this.getUseList();var i=csv.MagicidProxy.maxAttrCnt;this.taskValue[t]=new h;for(var n=0;n<e.length;n++){var r=e[n];var o=this.getMagicCfgById(e[n]);var a=csv.ChouKaProxy.getIns().magic_skill;if(o&&o.isActive==1&&a[r]&&a[r][o.level]&&a[r][o.level][o.star]){var s=a[r][o.level][o.star];for(var l=0;l<i;l++){var u=l+1;var p=s["type_"+u];if(p==g.EPlayType.PlayMode){this.parse(t,s,s["param_"+u])}}}}this.taskValue[t].parse()};u.prototype.getPlayMode=function(t){var e=this.taskValue[t];if(e&&e.isNumber){return e.realValue}return 0};u.prototype.getPlayModeLv=function(t){var e=this.taskValue[t];if(e){return e.getByLv()}return""};u.prototype.getFbValue=function(t){var e=this.taskValue[t];if(e){if(e.isNumber){return e.realValue}else{return e.getByLv()}}};u.prototype.printfEffect=function(){var t="";t+="##############\n";for(var e in g.Etask_type){var i=parseInt(e);if(!isNaN(i)){var n=this.getFbValue(i);t+="------------\x3e"+i+":["+n+"]\n"}}console.log(t)};u.prototype.parseTaskType=function(t){var e={};if(!this.magicLayList){t.run()}else{for(var i in g.Etask_type){var n=parseInt(i);e[n]=this.getFbValue(n)}var r={};t.run();for(var i in g.Etask_type){var n=parseInt(i);if(!isNaN(n)){r[n]=this.getFbValue(n);if(e[n]!=r[n]){console.log("法宝被动效果 _type:"+n,e[n],r[n]);this.event(g.FabaoNewEvent.TASK_VALUE_CHANGE,[n])}}}}};u.prototype.fabaoYuanshenRedDot=function(t){var e=yuanshencode.YuanshenModel.getIns().getDongfuNetItemData(t);var i=csv.YuanshenProxy.getIns().getHoleCfgMapItem(t);var n=i.magicput.split(";");for(var r=0;r<n.length;r++){var o=g.FaBaoNewModel.getIns().getMagicCfgById(+n[r]);if(o.isActive){if(!e.magicLay[r]){return true}}}return false};u.SINGLE_KEY="fabaonew.FaBaoNewModel";u.EVENT_LEVEL_UP="EVENT_LEVEL_UP";u.EVENT_DATA_UPADTE="EVENT_DATA_UPADTE";u.EVENT_DRESS_EQUIP="EVENT_DRESS_EQUIP";u.EVENT_STAR_UP="EVENT_STAR_LEVEL";u.EVENT_PIECE_UPDATE="EVENT_PIECE_UPDATE";u.EVENT_FABAOGONGMINGLU_UPDATE="EVENT_FABAOGONGMINGLU_UPDATE";u.EVENT_FABAOGONGMING_SUC="EVENT_FABAOGONGMING_SUC";u.EVENT_FABAONEW_UPDATA="EVENT_FABAONEW_UPDATA";u.EVENT_FABAO_YUANSHEN_UPDATE="EVENT_FABAO_YUANSHEN_UPDATE";return u}(app.ModelBase);g.FaBaoNewModel=t;var e=function(){function t(){}t.LANGHUANGE_UPDATE="LANGHUANGE_UPDATE";t.TASK_VALUE_CHANGE="TASK_VALUE_CHANGE";return t}();g.FabaoNewEvent=e;var o=function(){function t(){}return t}();var a=function(){function t(){this.list=[];this.str=""}t.prototype.add=function(t,e){var i=false;for(var n=0;n<this.list.length;n++){if(this.list[n].type==t){this.list[n].value+=e;i=true}}if(!i){var r=new o;r.value=e;r.type=t;this.list.push(r)}};t.prototype.getStr=function(){var t="";for(var e=0;e<this.list.length;e++){t+=this.list[e].type+"-"+this.list[e].value;if(e<this.list.length-1){t+=";"}}return t};return t}();var h=function(){function t(){this.lvMap={};this.isNumber=false}t.prototype.push=function(t,e){if(t.indexOf(";")>=0||t.indexOf("-")>=0){if(!this.lvMap[e]){this.lvMap[e]=new a}var i=t.split(";");for(var n=0;n<i.length;n++){if(i[n].length>0){var r=i[n].split("-");this.lvMap[e].add(parseInt(r[0]),parseInt(r[1]))}}}else{if(!this.lvMap[e]){this.lvMap[e]=0}this.isNumber=true;this.lvMap[e]+=parseInt(t)}};t.prototype.getValue=function(){if(this.isNumber){var t=0;for(var e in this.lvMap){t+=this.lvMap[e]}return t}return 0};t.prototype.parse=function(){if(this.isNumber){this.realValue=this.getValue()}else{var t=new a;for(var e in this.lvMap){var i=this.lvMap[e];i.str=i.getStr();for(var n=0;n<i.list.length;n++){var r=i.list[n];t.add(r.type,r.value)}}this.allStr=t.getStr()}};t.prototype.getByLv=function(){return this.allStr};return t}()})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.starDefaultAttr="122-0-0-0;123-0-0-0;124-0-0-0;125-0-0-0;126-0-0-0";t.allPowerfulPiece=59201;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){var t=app.Config.getResById("magic_update.csv");this.magic_updateMap=t.getMap("magicid","level");t=app.Config.getResById("magic_star.csv");this.magic_star=t.getMap("magicid","star");t=app.Config.getResById("magicweapon_passive.csv");this.passiveMap=t.getMap("type","level");this.magicweapon_passive=t.getArray();t=app.Config.getResById("magic_lingtai.csv");this.magic_lingtaiTypeLv=t.getMap("type","level");t=app.Config.getResById("magic_ties.csv");this.fabaotipMap=t.getMapList("type");this.fabaotipFunMap=t.getMap("type","parm1");this.fabaotipArr=t.getArray()};t.prototype.getFabaotipMap=function(t){return this.fabaotipMap[t]};t.prototype.getItemIdByQua=function(t){if(!this.itemMap){this.itemMap={};var e=game.Config.getParams(2013).split(";");for(var i=0;i<e.length;i++){var n=e[i].split("-");this.itemMap[parseInt(n[0])]=parseInt(n[1])}}return this.itemMap[t]};t.prototype.add=function(t,e){var i=t.split("-");var n=e.split("-");var r=i[0]+"-0-0-"+(parseInt(i[3])+parseInt(n[3]))+"";return r};t.prototype.addAttr=function(t,e){var i=t.split(";");var n=e.split(";");var r="";for(var o=0;o<i.length;o++){r+=this.add(i[o],n[o])+";"}if(r.length>0){r=r.substr(0,r.length-1)}return r};t.prototype.getStarAttr=function(t,e){var i=csv.ChouKaProxy.getIns().getBaseCfg(t);var n=this.magic_star[t];var r="";if(n&&n[e]){r=n[e].addelements}else{r=this.starDefaultAttr}return this.addAttr(r,i.baseelements)};t.prototype.getMagicStarMapitem=function(t,e){return this.magic_star[t][e]};t.SINGLE_KEY="csv.FaBaoNewProxy";return t}(app.ModelBase);t.FaBaoNewProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("magic_resonate.csv");this.cfgMap=t.getMapList("stage");this.cfgMapList=t.getMap("resonateid","stage")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getCfgByStage=function(t,e){if(this.cfgMapList[t]){return this.cfgMapList[t][e]}return null};e.prototype.getInitArr=function(){var t=[];t=this.getCfg(1);return t};e.SINGLE_KEY="csv.MagicResonateProxy";return e}(app.ModelBase);t.MagicResonateProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.baglist.itemRender=grids.GridView;this.baglist.renderHandler=grids.GridView.CommonItemRenderWithBtn;this.baglist.hScrollBarSkin="";this.baglist.vScrollBarSkin=" ";this.baglist.scrollRectOffX=10;this.baglist.scrollRectOffY=5;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.baglist.scrollTo(0);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.updateLayout);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){this.baglist.scrollTo(0);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.updateLayout)};e.prototype.updateLayout=function(){var t=game.GridsModel.getIns().getGridByType(game.GridsModel.BAG_FaBao);var e=t.itemList.length;var i=[];i=i.concat(t.itemList);for(var n=e;n<t.openSize;n++){i.push(game.GridsModel.EMPTY)}this.baglist.array=i;this.numlabel.text=e+"/"+t.openSize};e.SINGLE_KEY="fabaonew.FaBaoBagView";return e}(ui.fabao2.fabaobeibaoviewUI);t.FaBaoBagView=e})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listfabao.itemRender=i.FabaoFJiguanshouListPreviewItem;this.listfabao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listfabao.vScrollBarSkin=""};e.getIns=function(){return app.Singleton.getInstance(i.FabaoFunPreview)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.listfabao.array=this.dataSource;if(this.listfabao.array.length==0){this.imgtishi.visible=true}else{this.imgtishi.visible=false}};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.openView=function(){};return e}(ui.guaji.fabaoxuanzetipsUI);i.FabaoFJiguanshouListPreview=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=n.FaBaoNewModel.getIns()};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){this._vo=t;var e=csv.FaBaoNewProxy.getIns().getMagicStarMapitem(t.cfg.id,t.star);this.fabao.clickHandler=new Laya.Handler(this,this.onSelectHandler);this.fabao.updateStarLevel(t.star,t.level,t.cfg);if(e){this.labelshuzhi.text=app.getLang("效率+"+e.jiguanadd/100+"%")}else{this.labelshuzhi.text=app.getLang("效率+"+t.cfg.jiguanadd/100+"%")}};e.prototype.onSelectHandler=function(){var t=game.ItemUtil.parserList(this._vo.cfg.id)[0];var e;var i={};i.source=n.EFabaoSource.TuJian;e=chouka.ChouKaModel.getIns().fabaoShowTips(this._vo,[tip.TipManager.TIP_BTN_TYPE.FABAO_JIGUANSHOU_EQUIP]);e.itemvo=t;tip.TipManager.showByBtnType(t,[tip.TipManager.TIP_BTN_TYPE.FABAO_JIGUANSHOU_EQUIP])};return e}(ui.yuanshen.fabaodaojuitem2UI);n.FabaoFJiguanshouListPreviewItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(l){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=l.FaBaoNewModel.getIns()};e.getIns=function(){return app.Singleton.getInstance(l.FabaoFunPreview)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);chart.ChartModel.getIns().on(chart.ChartEvent.EVENT_DATA_NTF,this,this.refreshAll)};e.prototype.onUnDisplay=function(){chart.ChartModel.getIns().off(chart.ChartEvent.EVENT_DATA_NTF,this,this.refreshAll)};e.prototype.refreshAll=function(){this._vo=this._model.tempJiguanshouId=this.dataSource;this.titleimg.text=app.getLang("magic_put_title1");this.labeltishi1.text=app.getLang("magic_put_desc2");this.labeltishi.text=app.getLang("magic_put_desc4",this.sumFabaoLinqi());this.touxiang.jiguanname.skin="guaji/bg_tiangongpu_title"+this.dataSource+".png";this.touxiang.touxiangimg.skin="res/static/guajiditu/jiguanshou_touxiang_"+this.dataSource+".png";this.updateFabaoItemArr()};e.prototype.updateFabaoItemArr=function(){for(var t=1;t<6;t++){var e=this._model.getHaveFabaoByWuxing(t);this["gezi"+t].setData(t,e,this.dataSource)}};e.prototype.sumFabaoLinqi=function(){var t=0;var e=[];var i=chart.ChartModel.getIns().chartDatas;for(var n=0;n<i.length;n++){var r=i[n].magicLay;for(var o=0;o<r.length;o++){if(r[o]!=0){e.push(r[o])}}}for(var n=0;n<e.length;n++){var a=l.FaBaoNewModel.getIns().getMagicCfgById(e[n]);if(a){var s=csv.FaBaoNewProxy.getIns().getMagicStarMapitem(e[n],a.star);if(s){t+=s.jiguanadd/100}else{t+=a.cfg.jiguanadd/100}}}return Math.ceil(t)};return e}(ui.guaji.fabaofangzhitipsUI);l.FabaoFJiguanshouPreview=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.boxwuxing.on(Laya.Event.CLICK,this,this.openFabaoListView);this._model=a.FaBaoNewModel.getIns()};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t,e,i){this._wuxingId=t;this._fabaoArr=this.selectFabao(e);var n=this.getJiguanshouFabaoById(i);if(n){game.RedDotView.removeFrom(this.imgdi);this.fabao.visible=true;this.boxwuxing.visible=false;var r=a.FaBaoNewModel.getIns().getMagicCfgById(n);var o=csv.FaBaoNewProxy.getIns().getMagicStarMapitem(n,r.star);this.fabao.fabao.clickHandler=new Laya.Handler(this,this.openFabaoListView);this.fabao.fabao.updateStarLevel(r.star,r.level,r.cfg);if(o){this.fabao.labelshuzhi.text=app.getLang("效率+"+o.jiguanadd/100+"%")}else{this.fabao.labelshuzhi.text=app.getLang("效率+"+r.cfg.jiguanadd/100+"%")}}else{if(this._fabaoArr.length!=0){game.RedDotView.addTo(this.imgdi)}this.fabao.visible=false;this.boxwuxing.visible=true;this.fabao.fabao.clickHandler=new Laya.Handler(this,this.openFabaoListView);this.imgshuxing.skin="guaji/bg_wuxing_"+t+".png"}};e.prototype.getJiguanshouFabaoById=function(t){var e=chart.ChartModel.getIns().chartDatas;for(var i=0;i<e.length;i++){if(e[i].id==t){return e[i].magicLay[this._wuxingId-1]}}return null};e.prototype.getAllFabaoIdArr=function(){var t=[];var e=chart.ChartModel.getIns().chartDatas;for(var i=0;i<e.length;i++){var n=e[i].magicLay;for(var r=0;r<n.length;r++){if(!n[i]){t.push(n[i])}}}return t};e.prototype.selectFabao=function(t){var e=[];var i=this.getAllFabaoIdArr();for(var n=0;n<t.length;n++){if(i.indexOf(t[n].cfg.id)==-1){e.push(t[n])}}return e};e.prototype.openFabaoListView=function(){this._model.tempJiguanshouPos=this._wuxingId;app.ViewManager.toggleDialog(a.FabaoFJiguanshouListPreview,1,0,this._fabaoArr)};return e}(ui.guaji.fabaodaojuitem3UI);a.FabaoFJiguanshouPreviewItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listliebiao.itemRender=r.FabaoFunPreviewItem;this.listliebiao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listliebiao.vScrollBarSkin=""};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.FaBaoNewProxy.getIns().fabaotipFunMap[this.dataSource.type][this.dataSource.num].magicid.split(";");t=t.sort(function(t,e){var i=r.FaBaoNewModel.getIns().getMagicCfgById(+t);var n=r.FaBaoNewModel.getIns().getMagicCfgById(+e);if(i.isActive&&n.isActive){return+t-+e}if(i.isActive){return-1}if(n.isActive){return 1}if(!i.isActive&&!n.isActive){return+t-+e}});this.listliebiao.array=t};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.openView=function(){};return e}(ui.fabao2.shejifabaotipUI);r.FabaoFunPreview=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){this._id=t;var e=n.FaBaoNewModel.getIns().getMagicCfgById(+t);this._vo=e;this.itemdaoju.clickHandler=new Laya.Handler(this,this.onSelectHandler);this.itemdaoju.updateStarLevel(e.star,e.level,e.cfg);this.labelname.text=app.getLang("shortdesc_"+t);if(e.isActive){this.itemdaoju.gray=false}else{this.itemdaoju.gray=true}};e.prototype.onSelectHandler=function(){var t=game.ItemUtil.parserList(this._id)[0];var e;if(!this._vo.isActive){var i={};t.ext=i;i.star=this._vo.cfg.star+1;i.level=this._vo.cfg.level;if(chouka.ChouKaModel.getIns().isSpecial(this._id)){i.star=0;i.level=0}i.source=n.EFabaoSource.TuJian;e=chouka.ChouKaModel.getIns().fabaoShowTips(this._vo,[]);e.itemvo=t;tip.TipManager.showByBtnType(t)}else{var i={};i.source=n.EFabaoSource.TuJian;e=chouka.ChouKaModel.getIns().fabaoShowTips(this._vo,[]);e.itemvo=t;tip.TipManager.showByBtnType(t)}};return e}(ui.fabao2.shejifabaoitemUI);n.FabaoFunPreviewItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listzhanshi.itemRender=r.FaBaoLieBiaoItemTipShow;this.listzhanshi.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listzhanshi.vScrollBarSkin=""};e.getIns=function(){return app.Singleton.getInstance(r.FabaoFunPreview)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=[];var e=csv.FaBaoNewProxy.getIns().fabaotipFunMap[3][this.dataSource].magicid.split(";");for(var i=0;i<e.length;i++){var n=r.FaBaoNewModel.getIns().getMagicCfgById(+e[i]);t.push(n)}this.listzhanshi.array=t};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.openView=function(){app.ViewManager.toggleDialog(r.FabaoFWaPreview,1,0,1)};return e}(ui.fabao2.zhuanshuzhanshitipUI);r.FabaoFWaPreview=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listfabao.itemRender=o.FabaoFYuanshenPreviewItem;this.listfabao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listfabao.vScrollBarSkin=""};e.getIns=function(){return app.Singleton.getInstance(o.FabaoFunPreview)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);yuanshencode.YuanshenModel.getIns().on(yuanshencode.YuanshenModel.UPDATE_YUANSHEN_DATA,this,this.refreshAll)};e.prototype.onUnDisplay=function(){yuanshencode.YuanshenModel.getIns().off(yuanshencode.YuanshenModel.UPDATE_YUANSHEN_DATA,this,this.refreshAll)};e.prototype.refreshAll=function(){this._vo=yuanshencode.YuanshenModel.getIns().getDongfuNetItemData(this.dataSource);this.titleimg.text=app.getLang("magic_put_title1");this.imgdongfu.skin="res/static/yuanshen/bg_xiulian_banner0"+this._vo.id+".png";this.labeltishi1.text=app.getLang("magic_put_desc1");var t=csv.YuanshenProxy.getIns().getHoleCfgMapItem(this._vo.id);var e=t.magicput.split(";");this.listfabao.array=e;this.labeltishi3.text=app.getLang("magic_put_desc6",this.sumFabaoLinqi(e))};e.prototype.sumFabaoLinqi=function(t){var e=0;for(var i=0;i<t.length;i++){var n=o.FaBaoNewModel.getIns().getMagicCfgById(+t[i]);if(n.isActive){if(this._vo.magicLay[i]){var r=csv.FaBaoNewProxy.getIns().getMagicStarMapitem(+t[i],n.star);if(r){e+=r.holeadd/100}else{e+=n.cfg.holeadd/100}}}}return e.toFixed(1)};e.prototype.onRenderHandler=function(t,e){t.setData(+t.dataSource,this._vo,e)};e.prototype.openView=function(){};return e}(ui.yuanshen.fabaofangzhitipsUI);o.FabaoFYuanshenPreview=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=o.FaBaoNewModel.getIns()};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t,e,i){var n=o.FaBaoNewModel.getIns().getMagicCfgById(+t);this._id=t;this._vo=n;this._index=i;this._fabaoLay=e.magicLay;this._dongfuData=e;var r=csv.FaBaoNewProxy.getIns().getMagicStarMapitem(+t,n.star);this.fabao.clickHandler=new Laya.Handler(this,this.onSelectHandler);this.fabao.updateStarLevel(n.star,n.level,n.cfg);this.fabao.gezi.qianghualv.visible=false;game.RedDotView.removeFrom(this.fabao);if(n.isActive){if(e.magicLay[i]){this.fabao.gray=false;this.fabao.gezi.gray=false;this.fabao.jiahao.gray=false;this.fabao.jiahao.visible=false;if(r){this.labelshuzhi.text=app.getLang("magic_put_tips1",r.holeadd/100)}else{this.labelshuzhi.text=app.getLang("magic_put_tips1",n.cfg.holeadd/100)}this.imgdi.visible=true}else{this.fabao.gray=false;game.RedDotView.addTo(this.fabao);this.fabao.gezi.gray=true;this.fabao.jiahao.gray=false;this.fabao.jiahao.visible=true;this.labelshuzhi.text="";this.imgdi.visible=false}}else{this.fabao.gray=true;this.fabao.jiahao.visible=false;this.labelshuzhi.text="";this.imgdi.visible=false}};e.prototype.onSelectHandler=function(){var t=game.ItemUtil.parserList(this._id)[0];var e;this._model.tempHoleId=this._dongfuData.id;this._model.tempFabaoIndex=this._index+1;var i={};i.source=o.EFabaoSource.TuJian;if(this._vo.isActive){if(this._fabaoLay[this._index]){e=chouka.ChouKaModel.getIns().fabaoShowTips(this._vo,[]);e.itemvo=t;tip.TipManager.showByBtnType(t,[])}else{e=chouka.ChouKaModel.getIns().fabaoShowTips(this._vo,[tip.TipManager.TIP_BTN_TYPE.FABAO_YUANSHEN_EQUIP]);e.itemvo=t;tip.TipManager.showByBtnType(t,[tip.TipManager.TIP_BTN_TYPE.FABAO_YUANSHEN_EQUIP])}}else{e=chouka.ChouKaModel.getIns().fabaoShowTips(this._vo,[]);e.itemvo=t;tip.TipManager.showByBtnType(t,[])}};return e}(ui.yuanshen.fabaodaojuitem2UI);o.FabaoFYuanshenPreviewItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this.on(Laya.Event.CLICK,this,this.onClickHandler)};e.prototype.onUnDisplay=function(){this.off(Laya.Event.CLICK,this,this.onClickHandler);this.clearTween()};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.imgname.skin="res/static/fabao/"+t.name+".png";var e=o.FaBaoNewModel.getIns().isActGongMing(t.resonateid)>0;var i=e?t.stage+1:1;var n=csv.MagicResonateProxy.getIns().getCfgByStage(t.resonateid,i);var r=o.FaBaoNewModel.getIns().getOwnFaBaoNum(t);if(n){this.labelshuliang.text=r+"/"+t.magicnum;this.chengse.visible=false;this.chengse.stop()}else{this.chengse.visible=true;this.chengse.play()}if(o.FaBaoNewModel.getIns().isActGongMing(t.resonateid)>0){this.imggongminglu.gray=this.imgname.gray=false;this.imgjiaobiao.skin="fabao/"+t.stagepic+".png";this.boxshuliang.visible=false}else{this.imggongminglu.gray=this.imgname.gray=true;this.imgjiaobiao.skin="";this.boxshuliang.gray=r<t.magicnum;this.boxshuliang.visible=true}if(o.FaBaoNewModel.getIns().canGongMing(t)){game.RedDotView.addTo(this,this.width-5,5)}else{game.RedDotView.removeFrom(this)}};e.prototype.imgTween=function(){};e.prototype.clearTween=function(){};e.prototype.onClickHandler=function(){app.ViewManager.toggleDialog(o.FaBaoGongMingView,1,0,this._data.resonateid)};e.SINGLE_KEY="fabaonew.FaBaoGongMingListItem";return e}(ui.fabao2.gongmingluitemUI);o.FaBaoGongMingListItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.fabaoliebiao.vScrollBarSkin=" "};e.prototype.onDisplay=function(){s.FaBaoNewModel.getIns().on(s.FaBaoNewModel.EVENT_FABAOGONGMINGLU_UPDATE,this,this.onUpdateList);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){s.FaBaoNewModel.getIns().off(s.FaBaoNewModel.EVENT_FABAOGONGMINGLU_UPDATE,this,this.onUpdateList)};e.prototype.refreshAll=function(){app.ProtocolRequest.MagicResonanceInfoReq()};e.prototype.onUpdateList=function(){while(this.fabaoliebiao.numChildren){this.fabaoliebiao.removeChildAt(0)}if(this.fabaoliebiao.numChildren<=0){var t=0;var e=s.FaBaoNewModel.getIns().magicResonateList;var i=Math.ceil(e.length/3);if(i<4){i=4}var n=new l;var r=i*231;for(var o=0;o<i;o++){var a=new Laya.Image;a.skin="res/static/fabao/bg_huojia.png";a.height=231;a.y+=o*a.height;a.zOrder=100;n.addChild(a)}n.setData(e,r);n.y=t;this.fabaoliebiao.addChild(n);t+=r;n.scrollRect=new Laya.Rectangle(0,0,640,t);this.fabaoliebiao.scrollRect=new Laya.Rectangle(0,0,640,t)}this.fabaoliebiao.scrollTo(0,0)};e.SINGLE_KEY="fabaonew.FaBaoGongMingLuView";return e}(ui.fabao2.gongmingluviewUI);s.FaBaoGongMingLuView=t;var l=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listdaoju.zOrder=1e3;this.huojia.visible=false;this.listdaoju.y=0;this.listdaoju.itemRender=s.FaBaoGongMingListItem;this.listdaoju.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listdaoju.vScrollBarSkin="";this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.onSucceedHander=function(){this.listdaoju.refresh()};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.setData=function(t,e){this.listdaoju.height=e;this.height=e;this.listdaoju.array=t};return e}(ui.fabao2.gongmingluzhanshiitemUI)})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(p){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btngongming.clickHandler=new Laya.Handler(this,this.onClickBtn);this.listgongming.renderHandler=new Laya.Handler(this,this.onAttrisRender);this._isActCount=0;this._needCountArr=[6,5,4,3];this._fabaoViewArr=[new ui.fabao2.fabaogongmingitem1UI,new ui.fabao2.fabaogongmingitem2UI,new ui.fabao2.fabaogongmingitem3UI,new ui.fabao2.fabaogongmingitem4UI];this.onGongmingEffComplete()};e.prototype.onDisplay=function(){p.FaBaoNewModel.getIns().on(p.FaBaoNewModel.EVENT_FABAOGONGMINGLU_UPDATE,this,this.onUpdateData);p.FaBaoNewModel.getIns().on(p.FaBaoNewModel.EVENT_FABAOGONGMING_SUC,this,this.onGongmingSuc);this.daojiu7.gongming.on(Laya.Event.COMPLETE,this,this.onGongmingEffComplete);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){p.FaBaoNewModel.getIns().off(p.FaBaoNewModel.EVENT_FABAOGONGMINGLU_UPDATE,this,this.onUpdateData);p.FaBaoNewModel.getIns().off(p.FaBaoNewModel.EVENT_FABAOGONGMING_SUC,this,this.onGongmingSuc);this.daojiu7.gongming.off(Laya.Event.COMPLETE,this,this.onGongmingEffComplete);this.off(Laya.Event.CLICK,this,this.onShowItemTips)};e.prototype.onUpdateData=function(){this.callLater(this.refreshAll)};e.prototype.refreshAll=function(){var t=this.dataSource;this._data=p.FaBaoNewModel.getIns().getCurGongMingCfg(t);this._isActCount=0;if(this._data){var e=p.FaBaoNewModel.getIns().isActGongMing(this._data.resonateid)>0?this._data.stage+1:1;var i=csv.MagicResonateProxy.getIns().getCfgByStage(this._data.resonateid,e);var n=i?i.requirement.split(";"):this._data.requirement.split(";");while(this.box.numChildren>0){this.box.removeChildAt(0)}for(var r=0;r<this._needCountArr.length;r++){if(this._needCountArr[r]==n.length){this.box.addChild(this._fabaoViewArr[r]);this.updateFabaoViewData(n);break}}if(p.FaBaoNewModel.getIns().isActGongMing(this._data.resonateid)>0){this.daojiu7.imgjiaobiao.skin="fabao/bg_jiaobiao_stage"+this._data.stage+".png"}else{this.daojiu7.imgjiaobiao.skin=""}this.daojiu7.wenzimiaoshu.text=app.getLang(this._data.name);if(i){this.boxxiaohao.visible=true;this.yimanjilabel.visible=false;this.updateCostData();if(p.FaBaoNewModel.getIns().isEnoughGongMing(this._data)){this.daojiu7.lvse.visible=true;this.daojiu7.lvse.play()}else{this.daojiu7.lvse.visible=false;this.daojiu7.lvse.stop()}}else{this.boxxiaohao.visible=false;this.yimanjilabel.visible=true;this.daojiu7.lvse.visible=true;this.daojiu7.lvse.play()}var o=p.FaBaoNewModel.getIns().getGongmingXiaoguoArr(this._data.resonateid);this.listgongming.array=o}};e.prototype.updateFabaoViewData=function(t){for(var e=0;e<t.length;e++){var i=parseInt(t[e].split("-")[0]);var n=parseInt(t[e].split("-")[1]);var r=p.FaBaoNewModel.getIns().getMagicCfgById(n);var o=this._needCountArr.indexOf(t.length);var a=this._fabaoViewArr[o]["daoju"+(e+1)];var s=game.ItemUtil.parserList(n)[0];a.daojumg.skin=s.getIconUrl();if(!a){console.log("")}a.on(Laya.Event.CLICK,this,this.onShowItemTips,[n]);if(r.isActive){a.box2.visible=true;a.box1.gray=false;var l=chouka.ChouKaModel.getIns().isAwaken(n);if(l){a.imgjiaobiao.skin="res/static/fabao/bg_jiaobiao_juexing.png"}else{a.imgjiaobiao.skin=""}var u=new common.StarListMediator(a.liststar,a.boxxing,game.ComStarItem.W);u.setStar(r.star,r.star);if(r.star>=i){this._isActCount++;a.xiaoyuan.visible=true;a.xiaoyuan.play();this._fabaoViewArr[o]["xian"+(e+1)].visible=true;this._fabaoViewArr[o]["xian"+(e+1)].play()}else{a.xiaoyuan.visible=false;a.xiaoyuan.stop();this._fabaoViewArr[o]["xian"+(e+1)].visible=false;this._fabaoViewArr[o]["xian"+(e+1)].stop()}}else{a.box2.visible=false;a.box1.gray=true;this._fabaoViewArr[o]["xian"+(e+1)].visible=false;this._fabaoViewArr[o]["xian"+(e+1)].stop();a.xiaoyuan.visible=false;a.xiaoyuan.stop()}}};e.prototype.onShowItemTips=function(t){var e=game.ItemUtil.createVO(t);tip.TipManager.showByBtnType(e)};e.prototype.onAttrisRender=function(t,e){var i=t.dataSource;var n="";var r=csv.MagicResonateProxy.getIns().getCfgByStage(this._data.resonateid,e+1);var o=p.FaBaoNewModel.getIns().isActGongMing(this._data.resonateid)>0;if(o&&this._data.stage>e){n="("+app.getLang("resonatecondition_0")+")";t.labelmiaoshu.color=game.STYLES.GREEN_COLOR_S}else{n="("+app.getLang(r.resonatecondition)+")";t.labelmiaoshu.color=game.STYLES.GRAY_COLOR_S}var a=o?this._data.stage:0;if(a==e){t.imgtishi.visible=true}else{t.imgtishi.visible=false}t.labelmiaoshu.text=n+i};e.prototype.updateCostData=function(){var t=p.FaBaoNewModel.getIns().isActGongMing(this._data.resonateid)>0?this._data.stage+1:1;var e=csv.MagicResonateProxy.getIns().getCfgByStage(this._data.resonateid,t);if(e){var i=game.ItemUtil.parserList(e.cost)[0];this.xiaohao.gezi.setData(i);this.xiaohao.gezi.shuzi.text="";game.ItemShowUtil.showType4(this.xiaohao.shuzhi,i.count,game.GridsModel.getIns().getItemCount(i.getItemId()));this.xiaohao.imgjiaobiao.visible=this.xiaohao.btnjiahao.visible=false}};e.prototype.onClickBtn=function(){var t=p.FaBaoNewModel.getIns().isActGongMing(this._data.resonateid)>0?this._data.stage+1:1;var e=csv.MagicResonateProxy.getIns().getCfgByStage(this._data.resonateid,t);if(!game.GridsModel.getIns().hasEnoughItems(e.cost,false,true)){return}if(!p.FaBaoNewModel.getIns().isEnoughGongMing(this._data)){manager.FlowManager.instance.flowByStyle1(app.getLang("resonatetips_1"));return}app.ProtocolRequest.MagicResonateReq(this._data.resonateid)};e.prototype.onGongmingSuc=function(){this.daojiu7.gongming.visible=true;this.daojiu7.gongming.play();manager.EffectManager.playStageEffect("skill_gongmingchenggong")};e.prototype.onGongmingEffComplete=function(){this.daojiu7.gongming.visible=false;this.daojiu7.gongming.stop()};e.SINGLE_KEY="fabaonew.FaBaoGongMingView";return e}(ui.fabao2.fabaogongmingtipUI);p.FaBaoGongMingView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(h){var c=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listdaoju.zOrder=1e3;this.huojia.visible=false;this.listdaoju.itemRender=h.LangHuanGeItem;this.listdaoju.renderHandler=new Laya.Handler(this,this.onRenderHandler)};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.setData=function(t,e){this.listdaoju.height=e;this.height=e;this.listdaoju.array=t};return e}(ui.fabao2.huojiaitemUI);var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listyeqian.itemRender=ui.fabao2.langhuangeyeqianitemUI;this.listyeqian.renderHandler=new Laya.Handler(this,this.onYeQianHandler);this.listyeqian.selectEnable=true;this.btnchaxun.clickHandler=new Laya.Handler(this,this.onbtnchaxunClick);this.btnxiaoguozonglan.clickHandler=new Laya.Handler(this,this.onbtnxiaoguozonglanClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout);h.FaBaoNewModel.getIns().on(h.FabaoNewEvent.LANGHUANGE_UPDATE,this,this.onUpdateView)};e.prototype.onUnDisplay=function(){h.FaBaoNewModel.getIns().off(h.FabaoNewEvent.LANGHUANGE_UPDATE,this,this.onUpdateView)};e.prototype.onbtnchaxunClick=function(){app.ViewManager.toggleDialog(h.LanHuanGeFangRuView,1,0,[this._selectIndex])};e.prototype.onbtnxiaoguozonglanClick=function(){app.ViewManager.toggleDialog(h.LangHuanGeXiaoGuoView,1,0,[this._selectIndex])};e.prototype.onUpdateView=function(){this.listyeqian.refresh()};e.prototype.onYeQianHandler=function(t){t.btnyeqian.label=app.getLang(t.dataSource[0].tagpic);if(h.FaBaoNewModel.getIns().isFangZhiFaBaoYeQianRedTip(parseInt(t.dataSource[0].layid))){game.RedDotView.addTo(t.btnyeqian,t.btnyeqian.width,10)}else{game.RedDotView.removeFrom(t.btnyeqian)}if(parseInt(t.dataSource[0].layid)==this.listyeqian.selectedIndex+1){if(game.Context.teamLv>=parseInt(t.dataSource[0].needteamlevel)){this._selectIndex=this.listyeqian.selectedIndex;t.btnyeqian.selected=true;this.showView()}else{this.listyeqian.selectedIndex=this._selectIndex;manager.FlowManager.instance.flowByStyle1(app.getLang("magic_lay_unlock",t.dataSource[0].needteamlevel))}}else{t.btnyeqian.selected=false}if(game.Context.teamLv>=parseInt(t.dataSource[0].needteamlevel)){t.btnyeqian.gray=false}else{t.btnyeqian.gray=true}};e.prototype.showView=function(){while(this.fabaoliebiao.numChildren){this.fabaoliebiao.removeChildAt(0)}if(this.fabaoliebiao.numChildren<=0){var t=0;var e=this.listyeqian.selectedIndex+1;var i=h.FaBaoNewModel.getIns().getMagicLayArr(e);var n=csv.FaBaoNewLayProxy.getIns().getListByLayid(e);this.labelfangzhi.text=app.getLang("magic_lay_title",i.length+"/"+n.length);var r=h.FaBaoNewModel.getIns().getNextMagicLayCfg(e);if(r){var o={};o.data=r;o.id=0;i.push(o)}var a=new c;var s=Math.ceil(i.length/3);if(s<3){s=3}var l=s*230;for(var u=0;u<s;u++){var p=new Laya.Image;p.skin="res/static/fabao/bg_huojia.png";p.height=230;p.y+=u*p.height;p.zOrder=100;a.addChild(p)}a.setData(i,l);a.y=t;this.fabaoliebiao.addChild(a);t+=l;this.fabaoliebiao.scrollRect=new Laya.Rectangle(0,0,640,t)}this.fabaoliebiao.scrollTo(0,0)};e.prototype.updateLayout=function(){var t=csv.FaBaoNewLayProxy.getIns().getMapList();var e=[];for(var i in t){e.push(t[i])}this.listyeqian.array=e;var n=0;for(var r=0;r<e.length;r++){if(h.FaBaoNewModel.getIns().isFangZhiFaBaoYeQianRedTip(parseInt(e[r][0].layid))){n=r}}this.listyeqian.selectedIndex=n};e.SINGLE_KEY="fabaonew.FaBaoLangHuanGeView";return e}(ui.fabao2.langhuangeviewUI);h.FaBaoLangHuanGeView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.CLICK,this,this.onClick);this.stars=new common.StarListMediator(this.liststar,this.boxStar,game.ComStarItem.W);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onItemChange);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.onItemChange);this.jueXingEffect=false};Object.defineProperty(e.prototype,"jueXingEffect",{set:function(t){if(t){this.fabaojuexing.visible=t;this.fabaojuexing.play(0,true)}else{this.fabaojuexing.visible=t;this.fabaojuexing.stop()}},enumerable:true,configurable:true});e.prototype.updateLayout=function(){};e.prototype.onItemChange=function(){this.updataRedTip()};e.prototype.noFullClick=function(t){t=chouka.ChouKaModel.getIns().fabaoShowTips(this._value,[tip.TipManager.TIP_BTN_TYPE.NIN_YUN,tip.TipManager.TIP_BTN_TYPE.ZHU_NIN,tip.TipManager.TIP_BTN_TYPE.SHOW]);var e={};e.source=n.EFabaoSource.Liebiao;t.itemvo.ext=e;tip.TipManager.showByBtnType(t.itemvo,t.btnList,t.reds);if(this.bg_new.visible){this.bg_new.visible=false;game.RedDotView.removeFrom(this.bg_new);for(var i=0;i<n.FaBaoNewModel.getIns().newMagicIds.length;i++){if(parseInt(this._value.cfg.id)==n.FaBaoNewModel.getIns().newMagicIds[i]){n.FaBaoNewModel.getIns().newMagicIds.splice(i,1);n.FaBaoNewModel.getIns().event(n.FaBaoNewModel.EVENT_FABAONEW_UPDATA)}}}};e.prototype.onClick=function(){if(this._value){var t=game.ItemUtil.parserList(this._value.cfg.id)[0];var e=void 0;if(this._isFull){var i={};t.ext=i;i.star=this._value.cfg.star+1;i.level=this._value.cfg.level;if(chouka.ChouKaModel.getIns().isSpecial(this._value.cfg.id)){i.star=0;i.level=0}i.source=n.EFabaoSource.TuJian;e=chouka.ChouKaModel.getIns().fabaoShowTips(this._value,[]);e.itemvo=t;tip.TipManager.showByBtnType(e.itemvo,e.btnList,e.reds)}else{this.noFullClick(e)}}};e.prototype.setRed=function(t){if(n.FaBaoNewModel.getIns().newMagicIds.indexOf(parseInt(t.cfg.id))!=-1){this.bg_new.visible=true;game.RedDotView.addTo(this.bg_new,22,10,1,1,game.RedDotView.ENUM_TYPE.XIN)}else{this.bg_new.visible=false;game.RedDotView.removeFrom(this.bg_new)}};e.prototype.setData=function(t,e){if(t){this._value=t;this._isFull=e;var i=0;var n=0;this.te.skin=chouka.ChouKaModel.getIns().getSpecIcon(t.cfg.id);this.te.visible=true;this.jueXingEffect=false;if(e){i=this._value.cfg.star;n=this._value.cfg.level;this.imgjuexing.visible=true;this.bg_new.visible=false;game.RedDotView.removeFrom(this.bg_new)}else{i=this._value.star;n=this._value.level;if(chouka.ChouKaModel.getIns().isAwaken(parseInt(t.cfg.id))){this.jueXingEffect=true;this.imgjuexing.visible=true}else{this.imgjuexing.visible=false}this.setRed(t)}var r=t.cfg;if(i){this.boxStar.visible=true;this.stars.setStar(i,r.star)}else{this.boxStar.visible=false}if(n){this.clipshuzi.visible=true;this.clipshuzi.value="+"+n}else{this.clipshuzi.visible=false}this.imgfabao.skin=csv.ChouKaProxy.getIns().getRes(r);this.leibie.skin=csv.ChouKaProxy.getIns().getTypeIcon(r);var o=game.ItemUtil.parserList(r.id)[0];this.labeltitle.text=o.getHTMLName();if(t.isActive){this.imgfabao.gray=false;this.clipshuzi.gray=false;this.leibie.gray=false;this.boxStar.gray=false;this.imgjuexing.gray=false;this.te.gray=false;this.setEffect(o)}else{this.imgjuexing.gray=true;this.imgfabao.gray=true;this.clipshuzi.gray=true;this.leibie.gray=true;this.boxStar.gray=true;this.te.gray=true;this.lanse.stop();this.lanse.visible=false;this.zise.stop();this.zise.visible=false;this.chengse.stop();this.chengse.visible=false}if(parseInt(t.cfg.specialtype)){this.imgjuexing.visible=false;this.boxStar.visible=false;this.clipshuzi.visible=false}else{}this.updataRedTip()}};e.prototype.updataRedTip=function(){if(this._value){if(!this._isFull&&(chouka.ChouKaModel.getIns().isCanNinYun(this._value)||chouka.ChouKaModel.getIns().isCanZhuLing(this._value))){game.RedDotView.addTo(this,this.width-5,5)}else{game.RedDotView.removeFrom(this)}}};e.prototype.setEffect=function(t){switch(t.getQuality()){case 3:this.lanse.play(0,true);this.lanse.visible=true;this.zise.stop();this.zise.visible=false;this.chengse.stop();this.chengse.visible=false;break;case 4:this.lanse.stop();this.lanse.visible=false;this.zise.play(0,true);this.zise.visible=true;this.chengse.stop();this.chengse.visible=false;break;case 5:this.lanse.stop();this.lanse.visible=false;this.zise.stop();this.zise.visible=false;this.chengse.play(0,true);this.chengse.visible=true;break}};e.SINGLE_KEY="fabaonew.FaBaoLieBiaoItem";return e}(ui.fabao2.fabaoliebiaonewitemUI);n.FaBaoLieBiaoItem=t;var e=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.setData=function(t){e.prototype.setData.call(this,t,false)};t.prototype.setRed=function(t){};t.prototype.updataRedTip=function(){};t.prototype.noFullClick=function(t){t=chouka.ChouKaModel.getIns().fabaoShowTips(this._value,[]);var e={};e.source=n.EFabaoSource.Chat;t.itemvo.ext=e;tip.TipManager.showByBtnType(t.itemvo,t.btnList)};return t}(t);n.FaBaoLieBiaoItemShow=e;var i=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.setData=function(t){e.prototype.setData.call(this,t,false)};t.prototype.setRed=function(t){};t.prototype.updataRedTip=function(){};t.prototype.noFullClick=function(t){t=chouka.ChouKaModel.getIns().fabaoShowTips(this._value,[]);var e={};e.source=n.EFabaoSource.Chat;t.itemvo.ext=e;tip.TipManager.showByBtnType(t.itemvo,t.btnList)};t.prototype.onClick=function(){if(this._value){var t=game.ItemUtil.parserList(this._value.cfg.id)[0];var e=void 0;if(!this._value.isActive){var i={};t.ext=i;i.star=this._value.cfg.star+1;i.level=this._value.cfg.level;if(chouka.ChouKaModel.getIns().isSpecial(this._value.cfg.id)){i.star=0;i.level=0}i.source=n.EFabaoSource.TuJian;e=chouka.ChouKaModel.getIns().fabaoShowTips(this._value,[]);e.itemvo=t;tip.TipManager.showByBtnType(e.itemvo)}else{var i={};i.source=n.EFabaoSource.TuJian;e=chouka.ChouKaModel.getIns().fabaoShowTips(this._value,[]);e.itemvo=t;tip.TipManager.showByBtnType(t)}}};return t}(t);n.FaBaoLieBiaoItemTipShow=i})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(p){var o=function(){function t(t,e,i,n,r){this.arrowBtnlist=n;this._list=e;this.btn=t;this.handler=i;this.img=new Laya.Image;t.parent.addChild(this.img);this.img.x=t.x;this.img.y=t.y;this.img.width=t.width;this.img.height=t.height;if(r){r.on(Laya.Event.CLICK,this,this.onClick)}else{this.img.hitArea=new Laya.Rectangle(0,0,this.img.width,this.img.height);this.img.on(Laya.Event.CLICK,this,this.onClick)}t.mouseEnabled=false;this.setSelect(false);this._list.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)}t.prototype.onUnDisplay=function(){this.hideAll()};t.prototype.hideAll=function(){for(var t=0;t<this.arrowBtnlist.length;t++){this.arrowBtnlist[t].setSelect(false)}};t.prototype.onClick=function(t){this.hideAll();this.handler.runWith(t);this.setSelect(this._list.visible)};t.prototype.setSelect=function(t){this.btn.skin=t?"public/btn_xiala1.png":"public/btn_xiala.png"};return t}();p.ArrowBtn=o;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){};e.prototype.setLabel=function(t,e){this.imgjin.skin="res/static/fabao/"+t+".png";this.label.text=" "+e};return e}(ui.fabao2.fabaotujianshuxiangitemUI);var l=function(){function t(){}return t}();var u=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="fabaonew.FaBaoItem1";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,n);e.x=t*e.width;e.y=this.y;var i=this.list[t];e.setLabel(i.skinurl,i.str);return e};return t}(list.RowMoveBaseNode);var h=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.check=true;t.clsKey="fabaonew.FaBaoLieBiaoItem";return t}t.prototype.createNode=function(t){var e=20;var i=Laya.Pool.getItemByClass(this.clsKey,p.FaBaoLieBiaoItem);i.x=28+t*(i.width+e);i.y=this.y;i.setData(this.list[t],false);return i};return t}(list.RowMoveBaseNode);var t=function(r){__extends(t,r);function t(){var t=r!==null&&r.apply(this,arguments)||this;t.listCustom=new list.JListCustom;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){r.prototype.initialize.call(this);this.daoju.vScrollBarSkin=" ";this.labelfenlei3.text=app.getLang("tag_title_3");this.listxiala3.itemRender=ui.fabao2.fabaoxuanzexialalitemUI;this.listxiala3.repeatX=1;this.listxiala3.repeatY=3;this.listxiala3.renderHandler=new Laya.Handler(this,this.onSeletListRender3);this.listxiala3.selectEnable=true;this.listxiala3.selectHandler=new Laya.Handler(this,this.onSeletListSelected3);this.listxiala3.hScrollBarSkin=" ";this.listxiala3.array=[app.getLang("magiclisttag1"),app.getLang("magiclisttag2"),app.getLang("magiclisttag3")];this.labelfenlei.text=app.getLang("tag_title_1");this.listxiala.itemRender=ui.fabao2.fabaoxuanzexialalitemUI;this.listxiala.repeatX=1;this.listxiala.renderHandler=new Laya.Handler(this,this.onSeletListRender);this.listxiala.selectEnable=true;this.listxiala.selectHandler=new Laya.Handler(this,this.onSeletListSelected);this.listxiala.hScrollBarSkin=" ";var t=game.Config.getParams(1227).split(";");var e=[];for(var i=0;i<t.length;i++){var n={};n.data=app.getLang("tag_1_"+t[i]);n.type=t[i];e.push(n)}this.listxiala.repeatY=t.length;this.listxiala.array=e;this.labelfenlei2.text=app.getLang("tag_title_2");this.listxiala2.itemRender=ui.fabao2.fabaoxuanzexialalitemUI;this.listxiala2.repeatX=1;this.listxiala2.renderHandler=new Laya.Handler(this,this.onSeletListRender2);this.listxiala2.selectEnable=true;this.listxiala2.selectHandler=new Laya.Handler(this,this.onSeletListSelected2);this.listxiala2.hScrollBarSkin=" ";t=game.Config.getParams(1228).split(";");e=[];for(var i=0;i<t.length;i++){var n={};n.data=app.getLang("tag_2_"+t[i]);n.type=t[i];e.push(n)}this.listxiala2.repeatY=t.length;this.listxiala2.array=e;this.labetiaojian.text=app.getLang("magicgetwaytip");this.labetiaojian.on(Laya.Event.LINK,this,this.onHandler);this.on(Laya.Event.CLICK,this,this.hideList);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_SELECT,this,this.getGuideItem);this.arrowlist=[];this.arrowlist.push(new o(this.btnxiala,this.listxiala,new Laya.Handler(this,this.onShowList),this.arrowlist));this.arrowlist.push(new o(this.btnxiala2,this.listxiala2,new Laya.Handler(this,this.onShowList2),this.arrowlist));this.arrowlist.push(new o(this.btnxiala3,this.listxiala3,new Laya.Handler(this,this.onShowList3),this.arrowlist))};t.prototype.onHandler=function(t){Laya.Dialog.closeAll();chat.ChatStatic.dellLink(t)};t.prototype.getGuideItem=function(t){return this.listCustom.getItemView(new Laya.Handler(this,this.onCheck,[t]))};t.prototype.onCheck=function(t,e){if(e.cfg.id==t){return true}};t.prototype.onDisplay=function(){p.FaBaoNewModel.getIns().on(p.FaBaoNewModel.EVENT_LEVEL_UP,this,this.onSucceedHander);p.FaBaoNewModel.getIns().on(p.FaBaoNewModel.EVENT_STAR_UP,this,this.onSucceedHander);this.callLater(this.updateLayout)};t.prototype.onSucceedHander=function(){this.showList(this.daoju.vScrollBar.value)};t.prototype.onUnDisplay=function(){p.FaBaoNewModel.getIns().off(p.FaBaoNewModel.EVENT_LEVEL_UP,this,this.onSucceedHander);p.FaBaoNewModel.getIns().off(p.FaBaoNewModel.EVENT_STAR_UP,this,this.onSucceedHander);this.listCustom.clear();this.listxiala3.visible=false;this.listxiala3.selectedIndex=-1;this.listxiala2.visible=false;this.listxiala2.selectedIndex=-1;this.listxiala.visible=false;this.listxiala.selectedIndex=-1;this.hideList()};t.prototype.hideList=function(){this.listxiala3.visible=false;this.listxiala2.visible=false;this.listxiala.visible=false;for(var t=0;t<this.arrowlist.length;t++){this.arrowlist[t].setSelect(false)}};t.prototype.onSeletListRender3=function(t){if(this.listxiala3.selectedIndex!=-1){t.shuxing.text=t.dataSource;t.shuliang.text=""}};t.prototype.onSeletListRender2=function(t){if(this.listxiala2.selectedIndex!=-1){t.shuxing.text=t.dataSource.data;var e=0;var i=parseInt(t.dataSource.type);for(var n=0;n<p.FaBaoNewModel.getIns().magicList.length;n++){var r=p.FaBaoNewModel.getIns().magicCfgMap[p.FaBaoNewModel.getIns().magicList[n].magicCfgID];var o=r.cfg.tag_2.split(";").map(Number);if(i!=0&&o.indexOf(i)!=-1){var a=r.cfg.tag_1.split(";").map(Number);if(this.listxiala.selectedIndex==0||a.indexOf(this.listxiala.selectedIndex)!=-1){e++}}}if(e){t.shuliang.text=e+""}else{t.shuliang.text=""}}};t.prototype.onSeletListRender=function(t){if(this.listxiala.selectedIndex!=-1){t.shuxing.text=t.dataSource.data;var e=0;var i=parseInt(t.dataSource.type);for(var n=0;n<p.FaBaoNewModel.getIns().magicList.length;n++){var r=p.FaBaoNewModel.getIns().magicCfgMap[p.FaBaoNewModel.getIns().magicList[n].magicCfgID];var o=r.cfg.tag_1.split(";").map(Number);if(i!=0&&o.indexOf(i)!=-1){var a=r.cfg.tag_2.split(";").map(Number);if(this.listxiala2.selectedIndex==0||a.indexOf(this.listxiala2.selectedIndex)!=-1){e++}}}if(e){t.shuliang.text=e+""}else{t.shuliang.text=""}}};t.prototype.onShowList3=function(t){t.stopPropagation();if(this.listxiala3.visible==true){this.listxiala3.visible=false}else{this.hideList();this.listxiala3.visible=true}};t.prototype.onShowList2=function(t){t.stopPropagation();if(this.listxiala2.visible==true){this.listxiala2.visible=false}else{this.hideList();this.listxiala2.visible=true;this.listxiala2.refresh()}};t.prototype.onShowList=function(t){t.stopPropagation();if(this.listxiala.visible==true){this.listxiala.visible=false}else{this.hideList();this.listxiala.visible=true;this.listxiala.refresh()}};t.prototype.onSeletListSelected3=function(){if(this.listxiala3.selectedIndex!=-1){this.labelwenben3.text=this.listxiala3.selectedItem;this.listxiala3.visible=false;this.showList()}};t.prototype.onSeletListSelected2=function(){if(this.listxiala2.selectedIndex!=-1){this.labelwenben2.text=this.listxiala2.selectedItem.data;this.listxiala2.visible=false;this.showList()}};t.prototype.onSeletListSelected=function(){if(this.listxiala.selectedIndex!=-1){this.labelwenben.text=this.listxiala.selectedItem.data;this.listxiala.visible=false;this.showList()}};t.prototype.showList=function(t){if(t===void 0){t=0}if(this.listxiala.selectedIndex==-1||this.listxiala2.selectedIndex==-1||this.listxiala3.selectedIndex==-1){return}this.listCustom.init(this.daoju);this.listCustom.clear();var e=this.listxiala3.selectedIndex+1;var i=p.FaBaoNewModel.getIns().getBaseTypeArr(e);var n=0;for(var r=0;r<i.length;r++){var o=p.FaBaoNewModel.getIns().getBaseListByShowType(e,i[r],false,this.listxiala.selectedIndex,this.listxiala2.selectedIndex);if(o.length==0){continue}n+=o.length;var a=p.FaBaoNewModel.getIns().getBaseListByShowType(e,i[r],true,this.listxiala.selectedIndex,this.listxiala2.selectedIndex);var s=new l;s.skinurl="magiclisttag"+e+"_"+i[r];s.str=app.getLang("({0}/{1})",o.length,a.length);o.sort(this.onSort);this.listCustom.split([s],u,44);this.listCustom.split(o,h,220,0,3)}this.listCustom.end(t);if(n==0){this.imgtishi.visible=true}else{this.imgtishi.visible=false}};t.prototype.onSort=function(t,e){var i=parseInt(t.cfg.id);var n=parseInt(e.cfg.id);var r=p.FaBaoNewModel.getIns().newMagicIds.indexOf(i);var o=p.FaBaoNewModel.getIns().newMagicIds.indexOf(n);var a=game.ItemUtil.parserList(i)[0];var s=game.ItemUtil.parserList(n)[0];var l=a.getQuality();var u=s.getQuality();if(r>o){return-1}else if(r<o){return 1}else{if(l>u){return-1}else if(l<u){return 1}else{if(i>n){return-1}else if(i<n){return 1}else{return 0}}}};t.prototype.updateLayout=function(){this.listxiala3.selectedIndex=2;this.listxiala.selectedIndex=0;this.listxiala2.selectedIndex=0};t.SINGLE_KEY="fabaonew.FabaoListNewView";return t}(ui.fabao2.fabaoliebiaonewviewUI);p.FabaoListNewView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var o;(function(t){t[t["Locked"]=1]="Locked";t[t["Dressed"]=2]="Dressed";t[t["Empty"]=3]="Empty"})(o||(o={}));var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.position=1;t._roleIndex=0;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this._model=i.FaBaoNewModel.getIns();this.gezi.mouseEnabled=false;this.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._modelCk=chouka.ChouKaModel.getIns()};t.prototype.clear=function(){this.imgte.visible=false;this.imgzhuang.visible=false;this.shengjiani.visible=this.tihuanani.visible=false;this.shengjiani.stop();this.tihuanani.stop();this.daoju.skin="";this.jiahao.visible=false;this.xuanzhong.visible=false;this.imgjiaobiao.visible=false;this.gezi.qianghualv.visible=false;this.gezi.locktip=true;for(var t=0;t<5;t++){var e=this.gezi["xing"+(t+1)];e.visible=false}game.RedDotView.removeFrom(this)};t.prototype.onClick=function(){if(this.clickHandler){this.clickHandler.runWith(this._curData)}};t.prototype.selectBagItemUpdate=function(t,e,i){this.setData(t,e);this.xuanzhong.visible=i;this.imgzhuang.visible=chouka.ChouKaModel.getIns().isEquip(t.cfg.id,e)};t.prototype.updateStarLevel=function(t,e,i){this.clear();this.imgjiaobiao.visible=true;this.imgjiaobiao.skin=csv.ChouKaProxy.getIns().getTypeIcon(i);this.imgte.visible=true;this.imgte.skin=chouka.ChouKaModel.getIns().getSpecIcon(i.id);this.gezi.setData(i.id);for(var n=0;n<5;n++){var r=this.gezi["xing"+(n+1)];if(n<t){r.visible=true}else{r.visible=false}}if(e>0){this.gezi.qianghualv.visible=true;this.gezi.qianghualv.value="+"+e.toString()}};t.prototype.onDisplay=function(){};t.prototype.onUnDisplay=function(){};t.prototype.setData=function(t,e,i){if(i===void 0){i=false}this.boOther=i;if(!this.clickHandler){this.clickHandler=new Laya.Handler(this,this.onClickHandler)}this.clear();this._roleIndex=e;if(t==game.GridsModel.LOCKED){this.gezi.setData(game.GridsModel.LOCKED);this.daoju.skin="";this._curStatus=o.Locked}else{if(t){this._curStatus=o.Dressed;this._curData=t;this.imgjiaobiao.visible=true;this.imgjiaobiao.skin=csv.ChouKaProxy.getIns().getTypeIcon(this._curData.cfg);this.imgte.visible=true;this.imgte.skin=chouka.ChouKaModel.getIns().getSpecIcon(this._curData.cfg.id);this.gezi.setData(this._curData.cfg.id);for(var n=0;n<5;n++){var r=this.gezi["xing"+(n+1)];if(n<this._curData.star){r.visible=true}else{r.visible=false}}if(this._curData.level>0){this.gezi.qianghualv.visible=true;this.gezi.qianghualv.value="+"+this._curData.level.toString()}if(!i&&chouka.ChouKaModel.getIns().isZhuLingOrNinYun(this._curData)){game.RedDotView.addTo(this)}}else{this.daoju.skin="zhuangbei/bg_zhuangbei_buwei_fb.png";this.jiahao.visible=!i;this._curStatus=o.Empty;this.gezi.setData(game.GridsModel.EMPTY);if(!i&&chouka.ChouKaModel.getIns().getEnableBagListByRoleIndex(this._roleIndex,null,true).hasDress){game.RedDotView.addTo(this)}}}};t.prototype.onClickHandler=function(){if(this.boOther){if(this._curStatus==o.Dressed){var t=chouka.ChouKaModel.getIns().fabaoShowTips(this._curData,[]);chouka.ChouKaModel.getIns().mShowTips(t.itemvo,t.btnList,this._roleIndex,this.position,t.reds)}return}if(this._curStatus==o.Locked){manager.FlowManager.instance.flowByStyle1(app.getLang("magiclisttag3_11",csv.ChouKaProxy.getIns().getLockLv(this.position)))}else{if(this._curStatus==o.Empty){this._modelCk.openSelectBag(this._roleIndex,this.position,[tip.TipManager.TIP_BTN_TYPE.FABAO_EQUIP])}else if(this._curStatus==o.Dressed){var t=chouka.ChouKaModel.getIns().fabaoShowTips(this._curData,[tip.TipManager.TIP_BTN_TYPE.FABAO_NEW_REPLACE,tip.TipManager.TIP_BTN_TYPE.ZHU_NIN,tip.TipManager.TIP_BTN_TYPE.NIN_YUN,tip.TipManager.TIP_BTN_TYPE.FABAO_NEW_UNLOAD]);chouka.ChouKaModel.getIns().mShowTips(t.itemvo,t.btnList,this._roleIndex,this.position,t.reds)}}};return t}(ui.fabao2.fabaodaojuitem1UI);i.FaBaoNewItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.jiahao.visible=false;this.daoju.visible=false;this.xuanzhong.visible=false;this.shengjiani.stop();this.shengjiani.visible=false;this.tihuanani.stop();this.tihuanani.visible=false;this.imgzhuang.visible=false;this.gezi.locktip=true;this.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onClick=function(){if(this._value){var t=game.ItemUtil.parserList(this._value.cfg.id)[0];var e={};t.ext=e;e.extendData=this._ext;tip.TipManager.showByBtnType(t,[tip.TipManager.TIP_BTN_TYPE.LANG_HUAN_EQUIP])}};e.prototype.updateLayout=function(){};e.prototype.setData=function(t,e){if(!t)return;this._value=t;this._ext=e;var i=game.ItemUtil.parserList(t.cfg.id)[0];this.gezi.setData(i);this.imgjiaobiao.skin=csv.ChouKaProxy.getIns().getTypeIcon(t.cfg);this.gezi.qianghualv.value="+"+t.level;for(var n=0;n<5;n++){var r=this.gezi["xing"+(n+1)];if(n<t.star){r.visible=true}else{r.visible=false}}this.imgte.visible=true;this.imgte.skin=chouka.ChouKaModel.getIns().getSpecIcon(t.cfg.id)};e.SINGLE_KEY="fabaonew.FaBaoNewItemCell";return e}(ui.fabao2.fabaodaojuitem1UI);t.FaBaoNewItemCell=e})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.jiahao.visible=false;this.daoju.visible=false;this.xuanzhong.visible=false;this.shengjiani.stop();this.shengjiani.visible=false;this.tihuanani.stop();this.tihuanani.visible=false;this.imgzhuang.visible=false;this.gezi.locktip=true;this.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onClick=function(){if(this._value){var t=game.ItemUtil.parserList(this._value.cfg.id)[0];var e={};t.ext=e;e.star=this._value.cfg.star;e.level=this._value.cfg.level;tip.TipManager.showByBtnType(t)}};e.prototype.setData=function(t){if(!t)return;this._value=t;var e=game.ItemUtil.parserList(t.cfg.id)[0];this.gezi.setData(e);this.imgjiaobiao.skin=csv.ChouKaProxy.getIns().getTypeIcon(t.cfg);if(t.cfg.level>0){this.gezi.qianghualv.value="+"+t.cfg.level}else{this.gezi.qianghualv.value=""}if(chouka.ChouKaModel.getIns().isSpecial(t.cfg.id)){this.imgte.visible=true;for(var i=0;i<5;i++){var n=this.gezi["xing"+(i+1)];n.visible=false}}else{this.imgte.visible=false;for(var i=0;i<5;i++){var n=this.gezi["xing"+(i+1)];n.visible=true}}if(t.isActive){this.gray=false}else{this.gray=true}};e.prototype.updateLayout=function(){};e.SINGLE_KEY="fabaonew.FaBaoNewItemCell1";return e}(ui.fabao2.fabaodaojuitem1UI);t.FaBaoNewItemCell1=e})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(m){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._curTime=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwuxing.itemRender=m.FabaoWuxingShuXingQiuItemView;this.listwuxing.renderHandler=new Laya.Handler(this,this.onWuXingQiuHandler);this._xingList=[];this._colorlist=app.getLang("wuxing_color").split("-");this._xingList.push(this.xing1);this._xingList.push(this.xing2);this._xingList.push(this.xing3);this._xingList.push(this.xing4);this._xingList.push(this.xing5);this._listxiaohao=[];this._listxiaohao.push(new i(this.xiaohao1));this._listxiaohao.push(new i(this.xiaohao2));this._listxiaohao.push(new i(this.xiaohao3));this.btnjihuoshengxing.clickHandler=new Laya.Handler(this,this.onStarHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_NINGYUN_CLOSE,this.backbtn);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_NINGYUN_COMFIRM,this.btnjihuoshengxing,null,300);this.imgdaoju.on(Laya.Event.CLICK,this,this.onTipsHandler);this.labelList=[];this.labelList.push(new m.LabelTempLabel(this.labelzhudong,this.xiaoguo));this.labelList.push(new m.LabelTempLabel(this.labelningyun,this.shanghaijiacheng))};t.prototype.onTipsHandler=function(){tip.TipManager.show(game.ItemUtil.createVO(csv.FaBaoNewProxy.getIns().allPowerfulPiece),true)};t.prototype.onWuXingQiuHandler=function(t,e){t.setData(t.dataSource,this.fabao.cfg.supportelements==e+1,e)};t.prototype.check=function(){for(var t=0;t<this._listxiaohao.length;t++){var e=this._listxiaohao[t];if(e.pieceTipVo.enable&&!e.checkOpenTips()){return true}}return false};t.prototype.onStarHandler=function(){if(this.fabao.star<this.maxStar){var t=csv.FaBaoNewProxy.getIns().magic_star[this.fabao.cfg.id][this.fabao.star+1];var e=t.cost;var i=e.split(";");for(var n=0;n<i.length;n++){if(game.GridsModel.getIns().hasEnoughItems(i[n],undefined,undefined,true)==false){return}}}var r=[];if(this.check()){return}for(var n=0;n<this._listxiaohao.length;n++){var o=this._listxiaohao[n];r=r.concat(o.pieceTipVo.getItemList())}if(Laya.timer.currTimer-this._curTime<1e3){return}this._curTime=Laya.timer.currTimer;app.ProtocolRequest.MagicUpStarReq(this.fabao.cfg.id,r)};t.prototype.onRenderHander=function(t,e){var i=t.dataSource;var n=i.split(";");var r=n[0].split("-");t.txtName.text=app.getLang(csv.AttributesProxy.getIns().getCfg(r[0]).key);var o=this.fabao.cfg.supportelements;t.txtValue01.text=r[3];if(n.length>1){t.txtValue02.visible=true;t.txtValue02.color=game.STYLES.GREEN_COLOR_S;var a=n[1].split("-");t.txtValue02.text=" (+"+(parseInt(a[3])-parseInt(r[3]))+")"}else{t.txtValue02.visible=false}t.txtName.color=t.txtValue01.color=o-1==e?this._colorlist[e]:"#567474"};t.prototype.refreshMoneyAll=function(){var t=game.GridsModel.getIns().getItemCount(csv.FaBaoNewProxy.getIns().allPowerfulPiece);this.shuzhi2.text=game.MoneyModel.format(t)};t.prototype.onDisplay=function(){game.Context.event(game.ContextEvent.SECOND_WINDOW_OPEN);game.Context.event(game.ContextEvent.FUNCTION_OPEN);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.refreshMoneyAll);for(var t=0;t<this._listxiaohao.length;t++){this._listxiaohao[t].pieceTipVo.clear()}m.FaBaoNewModel.getIns().on(m.FaBaoNewModel.EVENT_STAR_UP,this,this.onSucceedHander);m.FaBaoNewModel.getIns().on(m.FaBaoNewModel.EVENT_PIECE_UPDATE,this,this.onRefresh);this.callLater(this.onRefresh)};t.prototype.onFabaoZhuling=function(){this.fabaozhuling.visible=false};t.prototype.onSucceedHander=function(t){if(t.success==1&&this.fabao.cfg.id==t.magicCfgID){this.fabaozhuling.visible=true;this.fabaozhuling.once(Laya.Event.COMPLETE,this,this.onFabaoZhuling);this.fabaozhuling.play(0,false);if(chouka.ChouKaModel.getIns().isAwaken(t.magicCfgID)){manager.EffectManager.playStageEffect("skill_juexingchenggong");this.onRefresh()}else{manager.EffectManager.playStageEffect("skill_shengxingchenggong");this.playStarAnim(t.newStar);this.onRefresh()}}};t.prototype.onplayStarAnimEnd=function(t){t.run()};t.prototype.playStarAnim=function(t,e){this.shengxingchenggong.visible=true;this.shengxingchenggong.x=this._xingList[t-1].x;this.shengxingchenggong.once(Laya.Event.COMPLETE,this,this.onplayStarAnimEnd,[e]);this.shengxingchenggong.play(0,false);return this.shengxingchenggong.count*Laya.timer.delta};t.prototype.updateAttr=function(t){var e=t.cfg.id;var i=csv.FaBaoNewProxy.getIns().getStarAttr(e,t.star).split(";");var n=[];if(t.star<this.maxStar){var r=csv.FaBaoNewProxy.getIns().getStarAttr(e,t.star+1);n=r.split(";")}var o=[];if(n.length>0){for(var a=0;a<i.length;a++){o.push(i[a]+";"+n[a])}}else{o=i}return o};Object.defineProperty(t.prototype,"maxStar",{get:function(){var t=this.fabao.cfg.star;if(this.isJueXing){return t+1}return t},enumerable:true,configurable:true});t.prototype.onRefresh=function(){this.refreshMoneyAll();var t=this.dataSource[0];var e=m.FaBaoNewModel.getIns().magicCfgMap[t.getItemId()];if(e.isActive&&e.star>=e.cfg.star){this.isJueXing=true}else{this.isJueXing=false}this.labelyimanxing.visible=false;this.labelyijuexing.visible=false;this.shengxingchenggong.stop();this.shengxingchenggong.visible=false;if(this.isJueXing){this.btnjihuoshengxing.label=app.getLang("tip_btn_55");this.labeltitle.text=app.getLang("magiclisttag3_13")}else{this.btnjihuoshengxing.label=app.getLang("tip_btn_46");this.labeltitle.text=app.getLang("magiclisttag3_12")}var i=chouka.ChouKaModel.getIns().getFabaoByEquip(t.itemCfg.id);this.fabao=i;this.labelname.text=t.getName();this.labelname.color=game.STYLES.ITEM_QUALITY[t.itemCfg.qua];this.imgfabao.skin=csv.ChouKaProxy.getIns().getRes(i.cfg);this.imgleixing.skin=csv.ChouKaProxy.getIns().getTypeIcon(i.cfg);var n=csv.ChouKaProxy.getIns().getQuality(i.cfg.id);this.imgpizhi.skin="res/static/chouka/bg_fabaopinzhi_0"+(n-1)+".png";this.setStar(i.star);var r=this.updateAttr(i);this.listwuxing.array=r;this.imgleixing.skin=chouka.ChouKaModel.getIns().getTypeImg(i.cfg.id);var o=false;var a=csv.MagicidProxy.getIns().getSkillParam(this.fabao.cfg.id,this.fabao.level,this.fabao.star);if(i.star<this.maxStar){var s=csv.MagicidProxy.getIns().getSkillParam(i.cfg.id,i.level,i.star+1);a.sub(s);if(this._xingList[i.star]){this.huxiguang.x=this._xingList[i.star].x;o=true}}else{this.huxiguang.visible=false;this.huxiguang.stop()}if(o){this.huxiguang.visible=true;this.huxiguang.play(0,true)}else{this.huxiguang.visible=false;this.huxiguang.stop()}m.LabelTempLabel.setNingyunEffect(this.labelList,a);if(i.star<this.maxStar){var l=chouka.ChouKaModel.getIns().isCanNinYun(e);this.boxcailiaoxiaohao.visible=true;var u=csv.FaBaoNewProxy.getIns().magic_star[i.cfg.id][i.star+1];var p=game.ItemUtil.parserList(u.cost);for(var h=0;h<this._listxiaohao.length;h++){var c=this._listxiaohao[h];c.skin.visible=false;c.pieceTipVo.enable=false}var f=[];if(u.specialcost!=""){f=u.specialcost.split(";")}for(var h=0;h<this._listxiaohao.length;h++){var g=p[h];var d=this._listxiaohao[h];if(g){d.skin.visible=true;d.setData(g)}else{if(f.length>0){var y=f.shift();d.skin.visible=true;d.setSpecialcost(y,l)}}}}else{this.boxcailiaoxiaohao.visible=false;if(this.isJueXing){this.labelyijuexing.visible=true}else{this.labelyimanxing.visible=true}}this.playByQua(t.itemCfg.qua);if(this.isJueXing){if(chouka.ChouKaModel.getIns().isAwaken(this.fabao.cfg.id)){this.juexing.visible=true;this.juexing.play(0,true);this.boxjuexing.visible=true;this.boxjuexing.gray=false}else{this.juexing.stop();this.juexing.visible=false;this.boxjuexing.visible=true;this.boxjuexing.gray=true}}else{this.juexing.stop();this.juexing.visible=false;this.boxjuexing.visible=false}};t.prototype.setStar=function(t){for(var e=0;e<this._xingList.length;e++){var i=this._xingList[e];if(e<t){i.skin="public/bg_wujiaoxing1.png"}else{i.skin="public/bg_wujiaoxing7.png"}}};t.prototype.playByQua=function(t){var e=[this.lanse,this.zise,this.chengse];for(var i=0;i<e.length;i++){var n=e[i];if(t-3==i){n.visible=true;n.play(0,true)}else{n.visible=false;n.stop()}}};t.prototype.onUnDisplay=function(){game.Context.event(game.ContextEvent.SECOND_WINDOW_CLOSE);game.Context.event(game.ContextEvent.FUNCTION_CLOSE);m.FaBaoNewModel.getIns().off(m.FaBaoNewModel.EVENT_STAR_UP,this,this.onSucceedHander);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.refreshMoneyAll);m.FaBaoNewModel.getIns().off(m.FaBaoNewModel.EVENT_PIECE_UPDATE,this,this.onRefresh);this.playByQua(0);this.huxiguang.stop();this.huxiguang.visible=true;this.shengxingchenggong.stop();this.shengxingchenggong.visible=false};t.SINGLE_KEY="fabaonew.FaBaoNingYunView";return t}(ui.fabao2.fabaoningyuntipUI);m.FaBaoNingYunView=t;var l=function(){function t(){}Object.defineProperty(t.prototype,"totalCnt",{get:function(){return this.pieceNeedCnt*this.one_need},enumerable:true,configurable:true});return t}();m.AllPowerfullVo=l;var i=function(){function t(t){this._needCnt=0;this.pieceTipVo=new m.PieceTipVo;this.skin=t;this.skin.on(Laya.Event.CLICK,this,this.onClickHandler);this.skin.btnjiahao1.clickHandler=new Laya.Handler(this,this.onPowerHandler)}t.prototype.openTips=function(){app.ViewManager.toggleDialog(m.Fabaoxuanzesuipiantip,1,0,[this._specialcost,this])};t.prototype.onClickHandler=function(){if(this._specialcost){this.openTips()}};t.prototype.setPlus=function(t){this.skin.btnjiahao1.visible=t};t.prototype.checkOpenTips=function(){var t=this.pieceTipVo;if(t.total>=this._needCnt){return true}this.openTips();return false};t.prototype.clear=function(){this._specialcost=null;this.pieceTipVo.clear();this.skin.gezi.setData(game.GridsModel.EMPTY);this.skin.gezi.clickHandler=undefined;this.skin.imgjiaobiao.visible=false;this.skin.btnjiahao.visible=false;this.skin.shuzhi.visible=false;this.setPlus(false);game.RedDotView.removeFrom(this.skin)};t.prototype.updateCnt=function(){if(this._specialcost){this.skin.shuzhi.visible=true;var t=this.pieceTipVo;this.skin.shuzhi.text=t.total+"/"+this._needCnt;if(t.total>=this._needCnt){this.skin.shuzhi.color=game.STYLES.GREEN_COLOR_S;this.skin.btnjiahao.visible=false}else{this.skin.shuzhi.color=game.STYLES.RED_COLOR_S;this.skin.btnjiahao.visible=true}}};t.prototype.setData=function(t){this._itemVo=t;this.clear();this.pieceTipVo.enable=false;this.skin.gezi.setData(t);var e=game.GridsModel.getIns().getItemCount(t.getItemId());var i=game.STYLES.GREEN_COLOR_S;if(e<t.count){i=game.STYLES.RED_COLOR_S}this.skin.shuzhi.visible=true;this.skin.shuzhi.color=i;this.skin.shuzhi.text=game.MoneyModel.format(e)+"/"+t.count;this.vo=this.getAllPower();this.setPlus(this.vo.showPlus)};t.prototype.getAllPower=function(){var t=game.GridsModel.getIns().getItemCount(this._itemVo.getItemId());var e=this.allPowerfull(this._itemVo.count-t);return e};t.prototype.onPowerHandler=function(){app.ViewManager.toggleDialog(n,1,0,[this.vo])};t.prototype.allPowerfull=function(t){var e=new l;var i=false;if(t>0){if(this._itemVo.itemCfg.type==csv.ItemProxy.TYPES.FA_BAO_PIECE){var n=csv.ItemProxy.getIns().itemCfgMap[csv.FaBaoNewProxy.getIns().allPowerfulPiece];if(n&&n.p4.length>0){var r=n.p4.split(";");var o=0;for(var a=0;a<r.length;a++){var s=r[a].split("-");if(parseInt(s[0])==this._itemVo.itemCfg.qua){o=parseInt(s[1]);break}}if(o>0){e.one_need=o;e.all_need=this._itemVo.count;e.pieceNeedCnt=t;e.needItemCfgid=this._itemVo.itemCfg.id;e.powerfullCfg=n;if(game.GridsModel.getIns().hasEnoughItems(n.id+"-"+e.totalCnt)){i=true}}}}}e.showPlus=i;return e};t.prototype.setSpecialcost=function(t,e){this.clear();this.pieceTipVo.enable=true;this._specialcost=t;var i=t.split("-");this._needCnt=parseInt(i[1]);var n=parseInt(i[0]);this.skin.gezi.img.skin=csv.ChouKaProxy.getIns().getJueXinIcon(n);this.skin.gezi.gezibg.skin=tip.TipManager.getQualityIcon(n);this.updateCnt();this.pieceTipVo.parse(t);if(e&&this.pieceTipVo.isHasCost()){game.RedDotView.addTo(this.skin)}};return t}();m.NingYunXiaoHaoItem=i;var e=function(){function t(t){this.arr=["bg_wuwei_jin","bg_wuwei_mu","bg_wuwei_shui","bg_wuwei_huo","bg_wuwei_tu"];t.wenzidi.removeSelf();t.labelshuliang.removeSelf();this.ani=t.xuanzhong;this.img=t.shuxing}t.prototype.setData=function(t,e,i){this.img.skin="public/bg_wuxing_"+(t+1)+".png";if(i){this.ani.visible=true;this.ani.play(0,true)}else{this.ani.visible=false;this.ani.stop()}};return t}();var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.close);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onEnter)};Object.defineProperty(e.prototype,"vo",{get:function(){return this.dataSource[0]},enumerable:true,configurable:true});e.prototype.onEnter=function(){app.ProtocolRequest.MagicAlmightyPieceReq(this.vo.needItemCfgid,this.vo.pieceNeedCnt);this.close()};e.prototype.onDisplay=function(){this.callLater(this.onCallLater)};e.prototype.onCallLater=function(){var t=this.vo;this.label01.text=app.getLang("suipianzhuanhuan_tips1",t.one_need);this.labeltishi.text=app.getLang("suipianzhuanhuan_tips2",t.all_need,t.pieceNeedCnt,t.totalCnt);this.daoju1.setData(game.ItemUtil.parserList(t.powerfullCfg.id+"-"+t.totalCnt)[0]);this.daoju2.setData(game.ItemUtil.parserList(t.needItemCfgid+"-"+t.pieceNeedCnt)[0])};e.SINGLE_KEY="fabaonew.FabaosuipianzhuanhuanView";return e}(ui.fabao2.fabaosuipianzhuanhuanUI);m.FabaosuipianzhuanhuanView=n})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.baglist.itemRender=i.FaBaoNewItem;this.baglist.renderHandler=new Laya.Handler(this,this.onFabaoRenderHandler)};e.prototype.onDisplay=function(){t.prototype.onDisplay.call(this)};e.prototype.onUnDisplay=function(){t.prototype.onUnDisplay.call(this)};e.prototype.onFabaoRenderHandler=function(t,e){var i=t.dataSource;var n=i.data;var r=this.dataSource[8];t.selectBagItemUpdate(n,r,i.select);t.clickHandler=new Laya.Handler(this,this.onSelectHandler)};e.SINGLE_KEY="fabaonew.EquipSelectBagView";return e}(equip.EquipSelectBagView);i.FabaoSelectBagView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.wuxinView=new o(this.wuxing);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.walist.itemRender=r;this.walist.renderHandler=new Laya.Handler(this,this.onWalistHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.CHECK_WUXING_TU,this);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.CHECK_WUXIGN_MU,this);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_WUXING_CHECK_SELECT,this,this.getGuideItemBtn,300)};e.prototype.getGuideItemBtn=function(t){for(var e=0,i=this.walist.cells.length;e<i;e++){var n=this.walist.cells[e];if(n.dataSource&&n.dataSource.index==t){n.cancleClic();return n.listshuxing}}return null};e.prototype.onWalistHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.onCalllater)};e.prototype.onCalllater=function(){this.labelwa.text=app.getLang("magic_pro_title2");this.wuxinView.parse();this._dataArr=[];for(var t=0;t<game.Context.TOTAL_ROLE_NUM;t++){var e={role:game.Context.roleList[t],index:t+1};this._dataArr.push(e)}this.walist.array=this._dataArr};e.prototype.onUnDisplay=function(){};return e}(ui.fabao2.fabaoshuxinghuizongviewUI);i.FaBaoShuXingHuiZongView=t;var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t,e){this.shuxing.text=app.getLang("Prop"+t);this.labelshuzi.text=e.toString();var i="";switch(t){case 1:i="chongwu/bg_shuxingtubiao_1.png";break;case 78:i="chongwu/bg_shuxingtubiao_2.png";break;case 4:i="chongwu/bg_shuxingtubiao_4.png";break}this.imgtubiao.skin=i};return e}(ui.fabao2.wawushuxingitem2UI);var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.imgxuanzhong.visible=false;this.model=i.FaBaoNewModel.getIns();this.listshuxing.itemRender=n;this.listshuxing.renderHandler=new Laya.Handler(this,this.onListShu)};e.prototype.getValue=function(t){var e=this.prolist;for(var i=0;i<e.length;i++){if(e[i].propId==t){return e[i].value}}return 0};e.prototype.onListShu=function(t,e){var i=t.dataSource;var n=this.getValue(i);t.setData(i,n)};e.prototype.onClick=function(){if(!this.gray){app.ViewManager.toggleDialog(a,1,0,[this.id],null,null,false)}};e.prototype.setData=function(t){var e=t.role;this.id=t.index;var i=csv.DefclassProxy.getIns().getCfg(t.index);this.imgjiaobiao.skin="fabao/bg_jiaobiao_"+i.model+".png";this.imghead.skin=role.RoleVO.getHeadIconUrl(t.index);if(e){this.gray=false;this.boxweihuode.visible=false;this.prolist=this.model.getBaseAttrList(this.id);this.listshuxing.array=[1,78,4]}else{this.gray=true;this.boxweihuode.visible=true;this.listshuxing.array=[]}this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.cancleClic=function(){this.off(Laya.Event.CLICK,this,this.onClick)};return e}(ui.fabao2.washuxingitemUI);var e=function(){function t(t,e){this.bar=t;this.label=e}t.prototype.setValue=function(t,e){if(e==0){this.bar.value=0}else{this.bar.value=t/e}this.label.text=t.toString()};return t}();var o=function(){function t(t){this.barList=[];this.skin=t;this.barList.push(new e(this.skin.jindutiao1,this.skin.shuzhi1));this.barList.push(new e(this.skin.jindutiao2,this.skin.shuzhi2));this.barList.push(new e(this.skin.jindutiao3,this.skin.shuzhi3));this.barList.push(new e(this.skin.jindutiao4,this.skin.shuzhi4));this.barList.push(new e(this.skin.jindutiao5,this.skin.shuzhi5));this.skin.namelab.text=app.getLang("magic_pro_title1");this.model=i.FaBaoNewModel.getIns()}t.prototype.getMaxValue=function(t){var e=0;for(var i=0;i<t.length;i++){var n=t[i];if(n.value>e){e=n.value}}return e};t.prototype.parse=function(){var t=this.model.getWuXin();var e=this.getMaxValue(t);for(var i=0;i<t.length;i++){var n=t[i];this.barList[i].setValue(n.value,e)}};return t}();var a=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.base_title=new TipTitleView;t.teshu_title=new TipTitleView;t.lblList=[];t.no1=new ui.fabao2.xiangxishuxinglabelUI;t.no2=new ui.fabao2.xiangxishuxinglabelUI;t.currH=0;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.model=i.FaBaoNewModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list=new Laya.List;this.list.repeatX=2;this.list.spaceY=10;this.list.itemRender=ui.common.commonattr1UI;this.list.renderHandler=new Laya.Handler(this,this.onCommonRender);this.weizhipanel.vScrollBarSkin=" "};t.prototype.onCommonRender=function(t,e){var i=t.dataSource;t.txtName.text=Attributes.getPropName(i.propId);t.txtValue.text=Attributes.getPropValue(i.propId,i.value,i.formula)};t.prototype.onDisplay=function(){this.callLater(this.onCalllater)};t.prototype.clear=function(){this.weizhipanel.scrollTo(0,0);this.currH=0;this.base_title.removeSelf();this.list.removeSelf();this.teshu_title.removeSelf();this.no1.removeSelf();this.no2.removeSelf();this.clearLbs()};t.prototype.onCalllater=function(){var t=this.dataSource[0];var e=csv.DefclassProxy.getIns().getCfg(t);this.labeltitle01.text=app.getLang(e.rolename);this.clear();this.labeltishi.text=app.getLang("magic_pro_desc3");var i=150;var n=20;var r=30;this.base_title.dataSource=app.getLang("magic_pro_title3");this.base_title.titlelabel.color=game.STYLES.DESC_TXT_COLOR_S;this.base_title.x=(this.weizhipanel.width-this.base_title.width)/2;this.base_title.y=this.currH;this.weizhipanel.addChild(this.base_title);this.currH+=this.base_title.height+n;var o=this.model.getBaseAttrList(t);if(o.length>0){this.list.array=o;this.list.x=(this.weizhipanel.width-this.list.width)/2;this.list.y=this.currH;this.weizhipanel.addChild(this.list);this.list.height=Math.ceil(o.length/2)*r;this.currH+=this.list.height+n}else{this.no1.txtName.text=app.getLang("magic_pro_desc4");this.weizhipanel.addChild(this.no1);this.no1.height=i;this.no1.txtName.centerY=.5;this.no1.x=(this.weizhipanel.width-this.no1.width)/2;this.no1.y=this.currH;this.currH+=this.no1.height}this.teshu_title.dataSource=app.getLang("magic_pro_title4");this.teshu_title.titlelabel.color=game.STYLES.DESC_TXT_COLOR_S;this.teshu_title.x=(this.weizhipanel.width-this.teshu_title.width)/2;this.teshu_title.y=this.currH;this.weizhipanel.addChild(this.teshu_title);this.currH+=this.teshu_title.height+n;var a=this.model.getActionList();if(a.length>0){for(var s=0;s<a.length;s++){var l=this.teshu_title.width;var u=tip.TipManager.createRichDescLabel(a[s],game.STYLES.DESC_TXT_COLOR_S,20,"left",true,l);u.x=this.teshu_title.x;u.y=this.currH;this.currH+=u.contextHeight+25;this.lblList.push(u);u.hitArea=new Laya.Rectangle(0,0,u.contextWidth,u.contextHeight);this.weizhipanel.addChild(u)}}else{this.no2.txtName.text=app.getLang("magic_pro_desc4");this.no2.x=(this.weizhipanel.width-this.no2.width)/2;this.no2.y=this.currH;this.no2.height=i;this.no2.txtName.centerY=.5;this.weizhipanel.addChild(this.no2)}};t.prototype.clearLbs=function(){while(this.lblList.length>0){var t=this.lblList.pop();t.removeSelf();Laya.Pool.recover("TipRichText",t)}};t.prototype.onUnDisplay=function(){this.clear()};return t}(ui.fabao2.juesexiangxishuxingUI)})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(n){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._itemList=[];t.clsKey="Fabaosuipianitem2";t.listCustom=new list.JListCustom;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=n.FaBaoNewModel.getIns()};t.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.updateLayout);this.callLater(this.onRefreshHandler)};t.prototype.updateLayout=function(){this.onRefreshHandler()};t.prototype.enableListSort=function(t,e){if(t.getQuality()>e.getQuality()){return-1}else if(t.getQuality()<e.getQuality()){return 1}if(t.getItemId()>e.getItemId()){return 1}else if(t.getItemId()<e.getItemId()){return-1}return 0};t.prototype.disableListSort=function(t,e){var i=n.FaBaoNewModel.getIns().canSynthesis;if(i(t)>i(e)){return-1}else if(i(t)<i(e)){return 1}if(t.getQuality()>e.getQuality()){return-1}else if(t.getQuality()<e.getQuality()){return 1}if(t.getItemId()>e.getItemId()){return 1}else if(t.getItemId()<e.getItemId()){return-1}return 0};t.prototype.getHasList=function(t){var e=[];var i=[];for(var n=0;n<t.length;n++){var r=t[n];var o=r.itemCfg.p1;var a=this._model.getMagicCfgById(o);if(a&&a.isActive){e.push(r)}else{i.push(r)}}e.sort(this.enableListSort);i.sort(this.disableListSort);return[e,i]};t.prototype.onRefreshHandler=function(){var t=game.GridsModel.getIns().getGridByType(game.GridsModel.BAG_FaBao);var e=this.clsKey;while(this._itemList.length>0){var i=this._itemList.shift();i.x=0;i.y=0;if(i&&i.parent){i.parent.removeChild(i);Laya.Pool.recover(e,i)}}var n=this.getHasList(t.itemList);var r=n[0];var o=n[1];this.listCustom.init(this.baglist);this.listCustom.clear();if(o.length>0){this.listCustom.split([app.getLang("magic_bag_2")],a,30);this.listCustom.split(o,s,120,0,5)}if(r.length>0){this.listCustom.split([app.getLang("magic_bag_1")],a,30);this.listCustom.split(r,s,120,0,5)}this.listCustom.end();if(r.length<=0&&o.length<=0){this.wuzhuangbeiimg.visible=true}else{this.wuzhuangbeiimg.visible=false}};t.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.updateLayout)};return t}(ui.fabao2.fabaosuipianviewUI);n.FabaosuipianView=t;var r;(function(t){t[t["Nothing"]=0]="Nothing";t[t["isActive"]=1]="isActive";t[t["NotCanHecheng"]=2]="NotCanHecheng";t[t["CanHecheng"]=3]="CanHecheng"})(r||(r={}));var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=n.FaBaoNewModel.getIns();this.gezi.clickHandler=new Laya.Handler(this,this.onShowTip);this.gezi.showBagCount(-1)};e.prototype.onShowTip=function(){switch(this._statusType){case r.CanHecheng:if(this._costCfg){app.ViewManager.toggleDialog(synthesis.HechengControlView,1,0,this._costCfg)}break;case r.NotCanHecheng:case r.isActive:tip.TipManager.show(this.itemVo,true);break}};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){game.RedDotView.removeFrom(this);this.itemVo=t;this.gezi.setData(t);this._statusType=r.Nothing;var e=0;var i=this._model.getMagicCfgById(t.itemCfg.p1);if(i&&i.isActive){this._statusType=r.isActive}this._costCfg=this._model.getNeed(t.itemCfg.p1);if(this._costCfg){e=this._costCfg.synthesis_materials1.split("-")[1]}var n=t.count;this.shuzhi.text=n+"/"+e;if(n>=e){this.jindutiao.value=1;if(this._statusType!=r.isActive){this._statusType=r.CanHecheng;game.RedDotView.addTo(this)}}else{this.jindutiao.value=n/e;if(this._statusType!=r.isActive){this._statusType=r.NotCanHecheng}}};return e}(ui.fabao2.fabaosuipianitem2UI);var o=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){this.titlelab.text=t};return e}(ui.zhuangbei.jueseshuxingtitleitemUI);var a=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="Suipiantitle";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,o);e.setData(this.list[t]);e.x=0;e.y=this.y;return e};return t}(list.RowMoveBaseNode);var s=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="Fabaosuipianitem2";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,i);e.setData(this.list[t]);e.x=t*118;e.y=this.y;return e};return t}(list.RowMoveBaseNode)})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(s){var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){};e.prototype.setLabel=function(t){this.label.visible=false;this.imgjin.skin="res/static/fabao/"+t+".png"};return e}(ui.fabao2.fabaotujianshuxiangitemUI);var a=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="fabaonew.FBTJItem1";return t}t.prototype.createNode=function(t){var e=Laya.Pool.getItemByClass(this.clsKey,i);e.setLabel(this.list[t]);e.y=this.y;return e};return t}(list.RowMoveBaseNode);var l=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.clsKey="fabaonew.FaBaoLieBiaoItem";return t}t.prototype.createNode=function(t){var e=20;var i=Laya.Pool.getItemByClass(this.clsKey,s.FaBaoLieBiaoItem);i.x=28+t*(i.width+e);i.y=this.y;i.setData(this.list[t],true);return i};return t}(list.RowMoveBaseNode);var t=function(r){__extends(o,r);function o(){var t=r!==null&&r.apply(this,arguments)||this;t.listCustom=new list.JListCustom;return t}o.getIns=function(){return app.Singleton.getInstance(o)};o.prototype.initialize=function(){r.prototype.initialize.call(this);this.daoju.vScrollBarSkin=" ";this.labelfenlei3.text=app.getLang("tag_title_3");this.listxiala3.itemRender=ui.fabao2.fabaoxuanzexialalitemUI;this.listxiala3.repeatX=1;this.listxiala3.repeatY=3;this.listxiala3.renderHandler=new Laya.Handler(this,this.onSeletListRender3);this.listxiala3.selectEnable=true;this.listxiala3.selectHandler=new Laya.Handler(this,this.onSeletListSelected3);this.listxiala3.hScrollBarSkin=" ";this.listxiala3.array=[app.getLang("magiclisttag1"),app.getLang("magiclisttag2"),app.getLang("magiclisttag3")];this.labelfenlei.text=app.getLang("tag_title_1");this.listxiala.itemRender=ui.fabao2.fabaoxuanzexialalitemUI;this.listxiala.repeatX=1;this.listxiala.renderHandler=new Laya.Handler(this,this.onSeletListRender);this.listxiala.selectEnable=true;this.listxiala.selectHandler=new Laya.Handler(this,this.onSeletListSelected);this.listxiala.hScrollBarSkin=" ";var t=game.Config.getParams(1227).split(";");var e=[];for(var i=0;i<t.length;i++){var n={};n.data=app.getLang("tag_1_"+t[i]);n.type=t[i];e.push(n)}this.listxiala.repeatY=t.length;this.listxiala.array=e;this.labelfenlei2.text=app.getLang("tag_title_2");this.listxiala2.itemRender=ui.fabao2.fabaoxuanzexialalitemUI;this.listxiala2.repeatX=1;this.listxiala2.renderHandler=new Laya.Handler(this,this.onSeletListRender2);this.listxiala2.selectEnable=true;this.listxiala2.selectHandler=new Laya.Handler(this,this.onSeletListSelected2);this.listxiala2.hScrollBarSkin=" ";t=game.Config.getParams(1228).split(";");e=[];for(var i=0;i<t.length;i++){var n={};n.data=app.getLang("tag_2_"+t[i]);n.type=t[i];e.push(n)}this.listxiala2.repeatY=t.length;this.listxiala2.array=e;this.on(Laya.Event.CLICK,this,this.hideList);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.arrowlist=[];this.arrowlist.push(new s.ArrowBtn(this.btnxiala,this.listxiala,new Laya.Handler(this,this.onShowList),this.arrowlist));this.arrowlist.push(new s.ArrowBtn(this.btnxiala2,this.listxiala2,new Laya.Handler(this,this.onShowList2),this.arrowlist));this.arrowlist.push(new s.ArrowBtn(this.btnxiala3,this.listxiala3,new Laya.Handler(this,this.onShowList3),this.arrowlist))};o.prototype.onDisplay=function(){this.callLater(this.updateLayout)};o.prototype.onUnDisplay=function(){this.listCustom.clear();this.listxiala3.visible=false;this.listxiala3.selectedIndex=-1;this.listxiala2.visible=false;this.listxiala2.selectedIndex=-1;this.listxiala.visible=false;this.listxiala.selectedIndex=-1;this.hideList()};o.prototype.hideList=function(){this.listxiala3.visible=false;this.listxiala2.visible=false;this.listxiala.visible=false;for(var t=0;t<this.arrowlist.length;t++){this.arrowlist[t].setSelect(false)}};o.prototype.onSeletListRender3=function(t){if(this.listxiala3.selectedIndex!=-1){t.shuxing.text=t.dataSource;t.shuliang.text=""}};o.prototype.onSeletListRender2=function(t){if(this.listxiala2.selectedIndex!=-1){t.shuxing.text=t.dataSource.data;var e=0;var i=parseInt(t.dataSource.type);for(var n=0;n<s.FaBaoNewModel.getIns().magicCfgList.length;n++){var r=s.FaBaoNewModel.getIns().magicCfgList[n];if(r.cfg.bookshow==0){continue}var o=r.cfg.tag_2.split(";").map(Number);if(i!=0&&o.indexOf(i)!=-1){var a=r.cfg.tag_1.split(";").map(Number);if(this.listxiala.selectedIndex==0||a.indexOf(this.listxiala.selectedIndex)!=-1){e++}}}if(e){t.shuliang.text=e+""}else{t.shuliang.text=""}}};o.prototype.onSeletListRender=function(t){if(this.listxiala.selectedIndex!=-1){t.shuxing.text=t.dataSource.data;var e=0;var i=parseInt(t.dataSource.type);for(var n=0;n<s.FaBaoNewModel.getIns().magicCfgList.length;n++){var r=s.FaBaoNewModel.getIns().magicCfgList[n];if(r.cfg.bookshow==0){continue}var o=r.cfg.tag_1.split(";").map(Number);if(i!=0&&o.indexOf(i)!=-1){var a=r.cfg.tag_2.split(";").map(Number);if(this.listxiala2.selectedIndex==0||a.indexOf(this.listxiala2.selectedIndex)!=-1){e++}}}if(e){t.shuliang.text=e+""}else{t.shuliang.text=""}}};o.prototype.onShowList3=function(t){t.stopPropagation();if(this.listxiala3.visible==true){this.listxiala3.visible=false}else{this.hideList();this.listxiala3.visible=true}};o.prototype.onShowList2=function(t){t.stopPropagation();if(this.listxiala2.visible==true){this.listxiala2.visible=false}else{this.hideList();this.listxiala2.visible=true;this.listxiala2.refresh()}};o.prototype.onShowList=function(t){t.stopPropagation();if(this.listxiala.visible==true){this.listxiala.visible=false}else{this.hideList();this.listxiala.visible=true;this.listxiala.refresh()}};o.prototype.onSeletListSelected3=function(){if(this.listxiala3.selectedIndex!=-1){this.labelwenben3.text=this.listxiala3.selectedItem;this.listxiala3.visible=false;this.showList()}};o.prototype.onSeletListSelected2=function(){if(this.listxiala2.selectedIndex!=-1){this.labelwenben2.text=this.listxiala2.selectedItem.data;this.listxiala2.visible=false;this.showList()}};o.prototype.onSeletListSelected=function(){if(this.listxiala.selectedIndex!=-1){this.labelwenben.text=this.listxiala.selectedItem.data;this.listxiala.visible=false;this.showList()}};o.prototype.showList=function(){if(this.listxiala.selectedIndex==-1||this.listxiala2.selectedIndex==-1||this.listxiala3.selectedIndex==-1){return}this.listCustom.init(this.daoju);this.listCustom.clear();var t=this.listxiala3.selectedIndex+1;var e=s.FaBaoNewModel.getIns().getBaseTypeArr(t);var i=0;for(var n=0;n<e.length;n++){var r=s.FaBaoNewModel.getIns().getBaseListByShowType(t,e[n],true,this.listxiala.selectedIndex,this.listxiala2.selectedIndex);if(r.length==0){continue}i+=r.length;this.listCustom.split(["magiclisttag"+t+"_"+e[n]],a,44,0);this.listCustom.split(r,l,220,o.ItemGAP,3)}this.listCustom.end();if(i==0){this.imgtishi.visible=true}else{this.imgtishi.visible=false}};o.prototype.updateLayout=function(){this.listxiala3.selectedIndex=2;this.listxiala.selectedIndex=0;this.listxiala2.selectedIndex=0};o.SINGLE_KEY="fabaonew.FaBaoTuJianView";o.ItemGAP=0;return o}(ui.fabao2.fabaotujianviewUI);s.FaBaoTuJianView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.model=chouka.ChouKaModel.getIns();this.on(Laya.Event.UNDISPLAY,this,this.onUndisplay)};e.prototype.onUndisplay=function(){this.stopAnim()};e.prototype.stopAnim=function(){this.zhuzitexiao.visible=false;this.zhuzitexiao.stop()};e.prototype.setData=function(t,e,i){var n=t.split(";");var r=this.model.getAttrValue(n[0]);var o;if(n[1]!=undefined){o=this.model.getAttrValue(n[1])}if(o!=undefined&&o>r){this.labelshuzi.text=r+"<span color='"+game.STYLES.GREEN_COLOR_S+"'>(+"+(o-r)+")</span>"}else{this.labelshuzi.text=r.toString()}if(e){this.zhuzitexiao.visible=true;this.zhuzitexiao.play(0,true)}else{this.stopAnim()}this.zhuzi.skin="res/static/wuxingzhandou/bg_wuxing_zhandou_wx"+(i+1)+".png"};return e}(ui.fabao2.fabaowuxingshuxingqiuUI);t.FabaoWuxingShuXingQiuItemView=e})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(l){var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnyijianxuanze.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btnyijianxuanze]);this.btrnliketianjia.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btrnliketianjia]);this.listliebiao.itemRender=i;this.listliebiao.renderHandler=new Laya.Handler(this,this.onRenderHandler)};Object.defineProperty(e.prototype,"pieceTipVo",{get:function(){return this.xiaohao.pieceTipVo},enumerable:true,configurable:true});e.prototype.onRenderHandler=function(t){t.setData(t.dataSource,this.xiaohao)};e.prototype.onClickHandler=function(t){switch(t){case this.btnyijianxuanze:this.xiaohao.pieceTipVo.oneKeyCalculate();this.updateList();this.xiaohao.updateCnt();break;case this.btrnliketianjia:if(this.xiaohao.pieceTipVo.total<=0){manager.FlowManager.instance.flowByStyle1(app.getLang("magiclisttag3_15"));return}this.close();this.xiaohao.updateCnt();break}};e.prototype.onDisplay=function(){this.callLater(this.onRefresh)};e.prototype.onUnDisplay=function(){};e.prototype.onRefresh=function(){var t=this.dataSource[0];this.xiaohao=this.dataSource[1];var e=app.getLang("magiclisttag3_type"+this.pieceTipVo.qua);this.labelmiaoshu.text=app.getLang("magiclisttag3_14",e);this.daoju.setData(game.GridsModel.EMPTY);var i=this.pieceTipVo.qua;this.daoju.img.skin=csv.ChouKaProxy.getIns().getJueXinIcon(i);this.daoju.gezibg.skin=tip.TipManager.getQualityIcon(i);this.updateList()};e.prototype.updateList=function(){this.listliebiao.array=this.pieceTipVo.list;this.refreshNeedCnt()};e.prototype.refreshNeedCnt=function(){this.labelshuliang.text=this.pieceTipVo.total+"/"+this.pieceTipVo.needCnt;if(this.pieceTipVo.needCnt<=this.pieceTipVo.total){this.labelshuliang.color=game.STYLES.GREEN_COLOR_S}else{this.labelshuliang.color=game.STYLES.RED_COLOR_S}};e.SINGLE_KEY="fabaonew.Fabaoxuanzesuipiantip";return e}(ui.fabao2.fabaoxuanzesuipiantipUI);l.Fabaoxuanzesuipiantip=n;var t=function(){function t(){this.list=[];this.enable=false}Object.defineProperty(t.prototype,"total",{get:function(){var t=0;for(var e=0;e<this.list.length;e++){t+=this.list[e].cnt}return t},enumerable:true,configurable:true});t.prototype.isEnough=function(){return this.total>=this.needCnt};t.prototype.getTotalExtend=function(t){var e=0;for(var i=0;i<this.list.length;i++){if(this.list[i]!=t){e+=this.list[i].cnt}}var n=this.needCnt-e;if(n<0){return 0}return n};t.prototype.clear=function(){while(this.list.length>0){this.list.pop()}};t.prototype.getItemList=function(){var t=[];if(this.enable){for(var e=0;e<this.list.length;e++){var i=this.list[e];if(i.cnt>0){var n=new ItemData;n.itemID=i.itemVo.getItemId();n.value=i.cnt;t.push(n)}}}return t};t.prototype.getList=function(t){var e=[];for(var i=0;i<t.length;i++){var n=t[i];if(n.getQuality()==this.qua){var r=n.itemCfg.p1;var o=l.FaBaoNewModel.getIns().magicCfgMap[r];if(o.isActive==1){var a=false;if(o.star>=o.cfg.star){a=true}if(a){var s=new c;s.itemVo=n;e.push(s)}}}}return e};t.prototype.isHasCost=function(){this.oneKeyCalculate();var t=this.isEnough();this.resetCntToZero();return t};t.prototype.resetCntToZero=function(){for(var t=0;t<this.list.length;t++){this.list[t].cnt=0}};t.prototype.oneKeyCalculate=function(){this.resetCntToZero();var t=0;for(var e=0;e<this.list.length;e++){var i=this.list[e];var n=i.itemVo.count;if(t>=this.needCnt){break}else if(t<this.needCnt){}if(t+n>this.needCnt){var r=this.needCnt-t;this.setCnt(i,r);break}this.setCnt(i,n);t+=n}};t.prototype.setCnt=function(t,e){t.cnt=e};t.prototype.parse=function(t){var e=t.split("-");var i=parseInt(e[0]);var n=parseInt(e[1]);this.qua=i;this.needCnt=n;var r=game.GridsModel.getIns().getGridByType(game.GridsModel.BAG_FaBao);this.list=this.getList(r.itemList);var o=game.GridsModel.getIns().getGridByType(game.GridsModel.BAG_ITEM);var a=o.itemList;var s=csv.FaBaoNewProxy.getIns().getItemIdByQua(this.qua);var l=[];for(var u=0;u<a.length;u++){var p=a[u];if(p.itemCfg.id==s){var h=new c;h.itemVo=p;l.push(h)}}this.list=this.list.concat(l)};return t}();l.PieceTipVo=t;var c=function(){function t(){this.cnt=0}return t}();var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.huakuai.changeHandler=new Laya.Handler(this,this.onSliderChange,[this.huakuai]);this.huakuai.showLabel=false};e.prototype.onSliderChange=function(t){var e=t.value;var i=this._xiaohao.pieceTipVo.getTotalExtend(this._data);if(e>i){t.value=i;return}this.shuliang.text=e+"/"+this._data.itemVo.count;this._xiaohao.pieceTipVo.setCnt(this._data,e);n.getIns().refreshNeedCnt();this._xiaohao.updateCnt()};e.prototype.refresh=function(){var t=this._data.cnt;this.shuliang.text=t+"/"+this._data.itemVo.count;this.huakuai.value=t};e.prototype.setData=function(t,e){this._data=t;this._xiaohao=e;this.huakuai.max=t.itemVo.count;this.daoju.setData(t.itemVo);var i=t.itemVo;this.wenben.text=i.getName();this.wenben.color=game.STYLES.ITEM_QUALITY[i.getQuality()];this.refresh()};return e}(ui.fabao2.fabaosuipianitemUI)})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(a){var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.gezi.showBagCount(-1);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onDisplay=function(){};e.prototype.onClick=function(){if(this._costCfg){app.ViewManager.toggleDialog(synthesis.HechengControlView,1,0,this._costCfg)}};e.prototype.onUnDisplay=function(){};e.prototype.canHc=function(t){var e=t.synthesis_materials1.split("-");var i=game.GridsModel.getIns().getItemCount(parseInt(e[0]));if(i>=parseInt(e[1])){return true}};e.prototype.setData=function(t){this._costCfg=undefined;this.imgjiaobiao.visible=false;this.gezi.setData(t);this.gezi.locktip=false;var e=game.GridsModel.getIns().getItemCount(t.itemCfg.id);var i=game.STYLES.GREEN_COLOR_S;if(t.count>e){i=game.STYLES.RED_COLOR_S;var n=csv.HechengProxy.getIns().getArr(csv.HechengProxy.ENUM.ITEM);for(var r=0;r<n.length;r++){var o=n[r];if(o.synthesis_item==t.itemCfg.id){if(this.canHc(o)){this._costCfg=o;this.imgjiaobiao.visible=true;this.gezi.locktip=true;break}}}}else{}this.shuzhi.color=i;this.shuzhi.text=game.MoneyModel.format(e)+"/"+t.count};return e}(ui.common.xiaohaoitemUI);var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};Object.defineProperty(e.prototype,"model",{get:function(){return a.FaBaoNewModel.getIns()},enumerable:true,configurable:true});e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listxiaohao.itemRender=i;this.listxiaohao.renderHandler=new Laya.Handler(this,this.onListXiaoHandler);this.btnjihuoshengxing.clickHandler=new Laya.Handler(this,this.onZhuLingHandler);this.btnyijianzhuling.clickHandler=new Laya.Handler(this,this.onOneKey);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_ZHULIN_COMFIRM,this.btnjihuoshengxing,null,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.FABAO_ZHULIN_CLOSE,this.backbtn);this.labelList=[];this.labelList.push(new a.LabelTempLabel(this.labelwenben4,this.labelwenben3));this.labelList.push(new a.LabelTempLabel(this.labelwenben5,this.labelwenben6))};e.prototype.onOneKey=function(){if(this.model.isStartOneKey){return}var t=this.isCanZhuling(true);if(t){this.model.isStartOneKey=true;this.onZhuLingHandler()}else{this.model.isStartOneKey=false}};e.prototype.playByQua=function(t){var e=[this.lanse,this.zise,this.chengse];for(var i=0;i<e.length;i++){var n=e[i];if(t-3==i){n.visible=true;n.play(0,true)}else{n.visible=false;n.stop()}}};e.prototype.isCanZhuling=function(t){var e=this.getInfo(this._itemCfg.id,this.fabao.level);if(e.isFull){return}else{var i=e.nextCfg.cost;var n=i.split(";");for(var r=0;r<n.length;r++){if(game.GridsModel.getIns().hasEnoughItems(n[r],undefined,undefined,t)==false){return}}}if(game.Context.teamLv<e.nextCfg.needteamlevel){if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("magiclisttag3_9",e.nextCfg.needteamlevel))}return}return this._baseCfg.id};e.prototype.onZhuLingHandler=function(){var t=this.isCanZhuling(true);if(t){app.ProtocolRequest.MagicUpLevelReq(t)}};e.prototype.onListXiaoHandler=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){game.Context.event(game.ContextEvent.SECOND_WINDOW_OPEN);a.FaBaoNewModel.getIns().on(a.FaBaoNewModel.EVENT_LEVEL_UP,this,this.onLevelUp);game.GridsModel.getIns().on(game.GridsModel.EVENTS.UPDATE,this,this.onRefresh);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onRefresh);this.callLater(this.onRefresh)};e.prototype.onLevelUp=function(t){if(t.success==1){manager.EffectManager.playStageEffect("skill_zhulingchenggong");this.onRefresh()}};e.prototype.getInfo=function(t,e){var i={};i.curLevel=e;var n=csv.FaBaoNewProxy.getIns().magic_updateMap[t];var r=csv.ChouKaProxy.getIns().getBaseCfg(t);i.curCfg=n[e];i.nextCfg=n[e+1];if(e>=r.level){i.isFull=true}else{i.nextLevel=e+1}return i};e.prototype.onRefresh=function(){this._itemVo=this.dataSource;this._itemCfg=this._itemVo.itemCfg;this.fabao=chouka.ChouKaModel.getIns().getFabaoByEquip(this._itemCfg.id);this._baseCfg=csv.ChouKaProxy.getIns().getBaseCfg(this._itemCfg.id);this.labelname.text=this._itemVo.getName();this.labelname.color=game.STYLES.ITEM_QUALITY[this._itemCfg.qua];this.imgfabao.skin=csv.ChouKaProxy.getIns().getRes(this._baseCfg);var t=csv.ChouKaProxy.getIns().getQuality(this._baseCfg.id);this.imgpizhi.skin="res/static/chouka/bg_fabaopinzhi_0"+(t-1)+".png";this.imgleixing.skin=csv.ChouKaProxy.getIns().getTypeIcon(this._baseCfg);var e=this.getInfo(this._itemCfg.id,this.fabao.level);var i=csv.MagicidProxy.getIns().getSkillParam(this.fabao.cfg.id,this.fabao.level,this.fabao.star);if(e.isFull){this.labelshuzi1.text="";this.labelwenben1.text=app.getLang("magic_txt01");this.labelshuzi3.text=e.curLevel.toString();this.jiantou.visible=false;this.labelshuzi2.visible=false;this.yimanjilabel.visible=true;this.boxxiaohao.visible=false;this.boxbenjitisheng.visible=true}else{this.labelwenben1.text=app.getLang("magic_txt02");this.labelshuzi1.text=e.curLevel.toString();this.labelshuzi3.text="";this.yimanjilabel.visible=false;this.jiantou.visible=true;this.labelshuzi2.visible=true;this.boxbenjitisheng.visible=true;this.boxxiaohao.visible=true;this.labelshuzi2.text=e.nextLevel.toString();this.labeldengji.text=app.getLang("magiclisttag3_9",e.nextCfg.needteamlevel);var n=game.STYLES.GREEN_COLOR_S;if(game.Context.teamLv<e.nextCfg.needteamlevel){n=game.STYLES.RED_COLOR_S;this.labeldengji.visible=true}else{this.labeldengji.visible=false}this.labeldengji.color=n;var r=e.nextCfg.cost;this.listxiaohao.array=game.ItemUtil.parserList(r);var o=csv.MagicidProxy.getIns().getSkillParam(this.fabao.cfg.id,e.nextLevel,this.fabao.star);i.sub(o)}a.LabelTempLabel.setNingyunEffect(this.labelList,i);this.playByQua(this._itemVo.itemCfg.qua)};e.prototype.onUnDisplay=function(){this.model.isStartOneKey=false;game.Context.event(game.ContextEvent.SECOND_WINDOW_CLOSE);a.FaBaoNewModel.getIns().off(a.FaBaoNewModel.EVENT_LEVEL_UP,this,this.onLevelUp);game.GridsModel.getIns().off(game.GridsModel.EVENTS.UPDATE,this,this.onRefresh);game.MoneyModel.getIns().off(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onRefresh);this.playByQua(0)};e.SINGLE_KEY="fabaonew.FabaozhulingtipView";return e}(ui.fabao2.fabaozhulingtipUI);a.FabaozhulingtipView=t})(fabaonew||(fabaonew={}));var fabaonew;(function(t){var e=function(){function t(t,e){this.imgHeght=57;this.title=t;this.desc=e}t.prototype.reset=function(){this.title.skin="";this.desc.text=""};Object.defineProperty(t.prototype,"curHeight",{get:function(){return this.desc.contextHeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"curY",{get:function(){return this.title.y},set:function(t){this.title.y=t-8;this.desc.y=t},enumerable:true,configurable:true});t.setNingyunEffect=function(t,e){var i=0;var n=0;if(e.isInitiative){var r=t[i];if(e.attrlist.length>=i+1){r.title.skin="res/static/chouka/bg_title_02.png";r.desc.text=e.attrlist[i].desc;n=r.curY+r.curHeight;i++}}var o="";for(var a=i;a<e.attrlist.length;a++){o+=e.attrlist[a].desc+"<br>"}if(o!=""){var r=t[i];r.title.skin="res/static/chouka/bg_title_03.png";r.desc.text=o;i++}for(var a=0;a<t.length;a++){var r=t[a];if(a>=i){r.reset()}else{n=r.curY+r.curHeight}if(t[a+1]){var s=t[a+1];s.curY=r.curY+r.curHeight+10}}return n};return t}();t.LabelTempImage=e})(fabaonew||(fabaonew={}));var fabaonew;(function(t){var e=function(){function t(t,e){this.title=t;this.desc=e}t.prototype.reset=function(){this.title.text="";this.desc.text=""};Object.defineProperty(t.prototype,"curHeight",{get:function(){return this.title.textField.height+this.desc.contextHeight},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"curY",{get:function(){return this.title.y},set:function(t){this.title.y=t;this.desc.y=this.title.y+this.title.textField.height},enumerable:true,configurable:true});t.setNingyunEffect=function(t,e){var i=0;if(e.isInitiative){var n=t[i];if(n&&e.attrlist.length>=i+1){n.title.text=app.getLang("magiclisttag3_17")+"：";n.desc.text=e.attrlist[i].desc;i++}}var r="";for(var o=i;o<e.attrlist.length;o++){r+=e.attrlist[o].desc+"<br>"}if(r!=""){var n=t[i];if(n){n.title.text=app.getLang("magiclisttag3_18")+"：";n.desc.text=r;i++}}for(var o=0;o<t.length;o++){var n=t[o];if(o>=i&&n){n.reset()}if(t[o+1]){var a=t[o+1];if(n){a.curY=n.curY+n.curHeight+10}}}};return t}();t.LabelTempLabel=e})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.stars=new common.StarListMediator(this.liststar,this.boxStar,game.ComStarItem.W);this.btnjia.clickHandler=new Laya.Handler(this,this.onBtnJiaClick);this.imgsuo.on(Laya.Event.CLICK,this,this.onImgSuoClick);this.boxfabaozhanshi.on(Laya.Event.CLICK,this,this.onBoxClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onBtnJiaClick=function(){if(this._value){var t={};t.extendData=this._value;app.ViewManager.toggleDialog(r.LangHuanGeSelectView,1,0,t)}};e.prototype.onImgSuoClick=function(){if(this._value){var t="";var e=csv.FaBaoNewLayProxy.getIns().getMagicLayCfg(this._value.layid,this._value.site);var i=game.ItemUtil.parserList(e.cost)[0];if(i){if(game.GridsModel.getIns().hasEnoughItems(i)){t=app.getLang("magic_lay_cost2",i.count+i.getName())}else{t=app.getLang("magic_lay_cost1",i.count+i.getName())}game.Alert.show(t,new Laya.Handler(this,this.onOkHandler,[this._value.layid,this._value.site]),new Laya.Handler)}}};e.prototype.onOkHandler=function(t,e){if(this._value){var i=csv.FaBaoNewLayProxy.getIns().getMagicLayCfg(this._value.layid,this._value.site);var n=game.ItemUtil.parserList(i.cost)[0];if(n){if(game.GridsModel.getIns().hasEnoughItems(n)){app.ProtocolRequest.MagicLayBuyReq(t,e)}else{this.callLater(this.chongzhi)}}}};e.prototype.chongzhi=function(){shop.ShopModel.getIns().askChongZhi()};e.prototype.onBoxClick=function(){if(this._value){var t=game.ItemUtil.parserList(this._value.magicCfgID)[0];var e={};t.ext=e;e.extendData=this._value;tip.TipManager.showByBtnType(t,[tip.TipManager.TIP_BTN_TYPE.LANG_HUAN_REPLACE,tip.TipManager.TIP_BTN_TYPE.LANG_HUAN_UPDOWN])}};e.prototype.updateLayout=function(){};e.prototype.setData=function(t){if(!t)return;this._value=t.data;game.RedDotView.removeFrom(this.btnjia);if(this._value.magicCfgID){this.boxfabaozhanshi.visible=true;this.btnjia.visible=false;this.imgsuo.visible=false;var e=r.FaBaoNewModel.getIns().getMagicCfgById(this._value.magicCfgID);if(e){var i=e.cfg;if(e.star){this.boxStar.visible=true;this.stars.setStar(e.star,e.cfg.star)}else{this.boxStar.visible=false}if(e.level){this.clipshuzi.visible=true;this.clipshuzi.value="+"+e.level}else{this.clipshuzi.visible=false}if(chouka.ChouKaModel.getIns().isAwaken(this._value.magicCfgID)){this.juexing.visible=true}else{this.juexing.visible=false}this.imgfabao.skin=csv.ChouKaProxy.getIns().getRes(i);this.leibie.skin=csv.ChouKaProxy.getIns().getTypeIcon(i);var n=game.ItemUtil.parserList(i.id)[0];this.labeltitle.text=n.getHTMLName();this.setEffect(n);if(parseInt(e.cfg.specialtype)){this.juexing.visible=false;this.boxStar.visible=false;this.clipshuzi.visible=false;this.te.visible=true}else{this.te.visible=false}}}else{this.te.visible=false;this.boxfabaozhanshi.visible=false;this.lanse.stop();this.lanse.visible=false;this.zise.stop();this.zise.visible=false;this.chengse.stop();this.chengse.visible=false;if(this._value.unlock){this.btnjia.visible=true;this.imgsuo.visible=false;if(r.FaBaoNewModel.getIns().isFangZhiFaBaoYeQianRedTip(this._value.layid)){game.RedDotView.addTo(this.btnjia,this.btnjia.width,-10)}}else{this.btnjia.visible=false;this.imgsuo.visible=true}}};e.prototype.setEffect=function(t){switch(t.getQuality()){case 3:this.lanse.play(0,true);this.lanse.visible=true;this.zise.stop();this.zise.visible=false;this.chengse.stop();this.chengse.visible=false;break;case 4:this.lanse.stop();this.lanse.visible=false;this.zise.play(0,true);this.zise.visible=true;this.chengse.stop();this.chengse.visible=false;break;case 5:this.lanse.stop();this.lanse.visible=false;this.zise.stop();this.zise.visible=false;this.chengse.play(0,true);this.chengse.visible=true;break}};e.SINGLE_KEY="fabaonew.LangHuanGeItem";return e}(ui.fabao2.langhuangeitemUI);r.LangHuanGeItem=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listbeibao.itemRender=n.FaBaoNewItemCell;this.listbeibao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listbeibao.vScrollBarSkin=" ";this.listbeibao.spaceX=15;this.listbeibao.scrollRectOffY=10;this._gameCfg=game.Config.getIntParams(971);this.tujing.itemRender=ui.common.commonattr11UI;this.tujing.renderHandler=new Laya.Handler(this,this.onTuiJianHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.tujing.on(Laya.Event.LINK,this,this.onHandler);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){this.tujing.off(Laya.Event.LINK,this,this.onHandler)};e.prototype.onHandler=function(t){Laya.Dialog.closeAll();chat.ChatStatic.dellLink(t)};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource,this._ext)};e.prototype.onTuiJianHandler=function(t,e){t.attr.text=t.dataSource};e.prototype.updateLayout=function(){this._ext=this.dataSource.extendData;var t=n.FaBaoNewModel.getIns().getLangHuanGeSelectArr(this._ext.layid);if(t.length){this.tujingBox.visible=false;this.listbeibao.visible=true;this.listbeibao.array=t}else{this.listbeibao.visible=false;var e=csv.ItemProxy.getIns().getBagTuiByID(this._gameCfg);if(e){this.tujingBox.visible=true;var i=app.getLang(e.access).split("\n");this.tujing.array=i}else{this.tujingBox.visible=false}}};e.SINGLE_KEY="fabaonew.LangHuanGeSelectView";return e}(ui.fabao2.fabaodaojuxuanzetipUI);n.LangHuanGeSelectView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){var t=parseInt(this.dataSource[0]);var e=i.FaBaoNewModel.getIns().getXiaoGuoData(t+1);if(e!=""){this.labelmiaoshu.text=e}else{this.labelmiaoshu.text=app.getLang("magic_lay_desc")}};e.SINGLE_KEY="fabaonew.LangHuanGeXiaoGuoView";return e}(ui.fabao2.xiaoguozonglanUI);i.LangHuanGeXiaoGuoView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listbeibaokuang01.itemRender=i.FaBaoNewItemCell1;this.listbeibaokuang01.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.updateLayout=function(){var t=parseInt(this.dataSource[0]);this.listbeibaokuang01.array=i.FaBaoNewModel.getIns().getLangHuanGeRangRuArr(t+1)};e.SINGLE_KEY="fabaonew.LanHuanGeFangRuView";return e}(ui.fabao2.langhuangebeibaotipUI);i.LanHuanGeFangRuView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.imgjiaobiao.visible=false;this.btnjiahao.visible=false;this.btnjiahao1.visible=false};e.prototype.setData=function(t){var e=t.split("-");var i=parseInt(e[0]);var n=parseInt(e[1]);var r=game.ItemUtil.createVO(i);r.setCount(n);this.gezi.setData(r);var o=game.GridsModel.getIns().getItemCount(i);if(o>=n){this.shuzhi.color=game.STYLES.GREEN_COLOR_S}else{this.shuzhi.color=game.STYLES.RED_COLOR_S}this.shuzhi.text=o+"/"+n};return e}(ui.common.xiaohaoitemUI);t.LingTaiItemView=e})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.model=i.FaBaoNewModel.getIns();this.proxy=csv.FaBaoNewProxy.getIns();this.guwubtn.clickHandler=new Laya.Handler(this,this.onQiangHuaHandler);this.closebtn1.clickHandler=new Laya.Handler(this,this.onCloseHandler);this.backbtn1.clickHandler=new Laya.Handler(this,this.onCloseHandler);this.itemlist.renderHandler=new Laya.Handler(this,this.onItemHander);this.itemlist.itemRender=i.LingTaiItemView};e.prototype.onItemHander=function(t,e){t.setData(t.dataSource)};e.prototype.onCloseHandler=function(){app.ViewManager.toggleDialog(e,-1)};e.prototype.onQiangHuaHandler=function(){var t=this.model.getLevelUpLingTaiStatus(this.type);if(t==i.EFabaoLingTai.Normal){app.ProtocolRequest.UpMagicLingtaiReq(this.type)}else if(t==i.EFabaoLingTai.ItemNotEnough){manager.FlowManager.instance.flowByStyle1(app.getLang("lingtai_05"))}};e.prototype.onDisplay=function(){this.callLater(this.onCallterHandler)};e.prototype.refreshView=function(){this.onCallterHandler()};e.prototype.onCallterHandler=function(){var t=this.dataSource[0];this.type=t;this.imgjiantou1.visible=this.imglv2.visible=this.imgjiantou2.visible=false;this.labeltisheng2.text="";this.imgwuxing.skin="fabao/bg_wuxingda_"+this.type+".png";var e=this.model.getLingTaiLv(this.type);this.lv=e;this.labelwuxingshuxing.text=app.getLang("lingtai_03").substr(t-1,1)+app.getLang("lingtai_04");this.labelwuxingshuxing.color=this.model.wuxingColor[t-1];if(e<=0){this.guwubtn.label=app.getLang("lingtai_01")}else{this.guwubtn.label=app.getLang("lingtai_02")}this.clipdengji1.value=e.toString();var i=e+1;var n=this.proxy.magic_lingtaiTypeLv[t][e];var r;if(n){var o=Attributes.decode(n.param).baseList[0];r=Attributes.getPropValue(o.propId,o.value,o.formula)}else{r=this.model.zeroPercentage(t)}this.labeltisheng.text=r;var a=this.proxy.magic_lingtaiTypeLv[t][i];if(!a){this.imgtishi.visible=true;this.itemlist.visible=false;this.guwubtn.visible=false;this.clipdengji2.visible=false}else{this.imgtishi.visible=false;this.clipdengji2.visible=true;this.clipdengji2.value=i.toString();var s=Attributes.decode(a.param).baseList[0];this.labeltisheng2.text=Attributes.getPropValue(s.propId,s.value,s.formula);this.imgjiantou1.visible=this.imglv2.visible=this.imgjiantou2.visible=true;var l=a.cost.split(";");this.itemlist.visible=true;this.itemlist.width=100*l.length;this.itemlist.array=l;this.guwubtn.visible=true}};e.prototype.onUnDisplay=function(){};e.SINGLE_KEY="fabaonew.LingtaiqianghuaTip";return e}(ui.fabao2.lingtaiqianghuatipUI);i.LingtaiqianghuaTip=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(n){var t=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.wuxingList=[];for(var t=0;t<5;t++){var e=t+1;this.wuxingList.push(new n.WuXingTaiItemView(this["wuxing"+e],e))}this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.FABAO_LINGTAI,[this.btntishi,this.labelshuoming])};t.prototype.onDisplay=function(){this.stopAnim();this.callLater(this.onRefshHandler)};t.prototype.stopAnim=function(){this.wucaishi.visible=false;this.wucaishi.stop()};t.prototype.onUnDisplay=function(){this.stopAnim()};t.prototype.onRefshHandler=function(){for(var t=0;t<this.wuxingList.length;t++){var e=this.wuxingList[t];e.refresh()}this.wuxingzhiling.refresh();if(this.wuxingzhiling.isLocked()){this.stopAnim()}else{this.wucaishi.visible=true;this.wucaishi.play(0,true)}};t.SINGLE_KEY="fabaonew.WuxinglingtaiView";return t}(ui.fabao2.wuxinglingtaiviewUI);n.WuxinglingtaiView=t})(fabaonew||(fabaonew={}));var fabaonew;(function(a){var t=function(){function t(t,e){this.model=a.FaBaoNewModel.getIns();this.proxy=csv.FaBaoNewProxy.getIns();this.skin=t;this.type=e;this.skin.on(Laya.Event.CLICK,this,this.onClickHandler)}t.prototype.onClickHandler=function(){app.ViewManager.toggleDialog(a.LingtaiqianghuaTip,1,0,[this.type])};t.prototype.refresh=function(){var t=this.type;this.skin.zhuzi.skin="fabao/bg_wuxingda_"+this.type+".png";var e=this.model.getLingTaiLv(this.type);this.skin.clipshuzi.value=e.toString();if(e<=0){this.skin.boxweijiesuo.visible=true;this.skin.labelshuzi.visible=false;this.skin.zhuzi.gray=true;this.skin.clipshuzi.visible=false;this.skin.imgdengji.visible=false}else{this.skin.clipshuzi.visible=true;this.skin.imgdengji.visible=true;this.skin.boxweijiesuo.visible=false;this.skin.labelshuzi.visible=true;this.skin.zhuzi.gray=false;var i=this.proxy.magic_lingtaiTypeLv[t][e];var n=void 0;if(i){var r=Attributes.decode(i.param).baseList[0];n=Attributes.getPropValue(r.propId,r.value,r.formula)}else{n=this.model.zeroPercentage(t)}this.skin.labelshuzi.text=app.getLang("lingtai_03").substr(t-1,1)+app.getLang("lingtai_04")+n;this.skin.labelshuzi.color=this.model.wuxingColor[t-1]}var o=this.model.getLevelUpLingTaiStatus(this.type);if(o==a.EFabaoLingTai.Normal){game.RedDotView.addTo(this.skin)}else{game.RedDotView.removeFrom(this.skin)}};return t}();a.WuXingTaiItemView=t})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fabaonew;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.model=i.FaBaoNewModel.getIns()};e.prototype.refresh=function(){var t=this.model.getWuXingZhilingLv();if(t<=0){this.boxdengji.visible=false;this.boxweijiesuo.visible=true;this.labelweijiesuo.text=app.getLang("magic_lingtai_desc3");this.labelshuzi.text="";this.gray=true}else{this.boxdengji.visible=true;this.boxweijiesuo.visible=false;this.clipshuzi.value=t.toString();this.gray=false;var e=csv.FaBaoNewProxy.getIns().magic_lingtaiTypeLv[6][t];if(e){var i=csv.StatusProxy.getIns().getCfg(parseInt(e.param));if(i){this.labelshuzi.text=i.name}}}};e.prototype.isLocked=function(){return this.boxdengji.visible==false};return e}(ui.fabao2.wuxingzhilingitemUI);i.WuxingZhiLingItemView=t})(fabaonew||(fabaonew={}));var fabaonew;(function(t){var e=function(){function i(){}i.create=function(t){var e=new i;e.isActive=t.active;e.level=t.level;e.star=t.star;e.cfg=csv.ChouKaProxy.getIns().getBaseCfg(t.magicCfgID);return e};return i}();t.FaBaoNewVo=e})(fabaonew||(fabaonew={}));var fabaonew;(function(t){var e;(function(t){t[t["Liebiao"]=1]="Liebiao";t[t["Chat"]=2]="Chat";t[t["TuJian"]=3]="TuJian"})(e=t.EFabaoSource||(t.EFabaoSource={}));var i;(function(t){t[t["Job"]=1]="Job";t[t["Add"]=2]="Add";t[t["Scene"]=3]="Scene";t[t["PlayMode"]=4]="PlayMode"})(i=t.EPlayType||(t.EPlayType={}));var n;(function(t){t[t["ShangShengExp"]=3]="ShangShengExp";t[t["EquipLow"]=31]="EquipLow";t[t["MingJing"]=34]="MingJing";t[t["SevenColorMountainCount"]=35]="SevenColorMountainCount";t[t["SsslBuyCount"]=41]="SsslBuyCount";t[t["SsslSweepCount"]=42]="SsslSweepCount";t[t["SsslNeedLevel"]=43]="SsslNeedLevel";t[t["SzjdBuyCount"]=46]="SzjdBuyCount";t[t["SzjdSweepCount"]=47]="SzjdSweepCount";t[t["SzjdNeedLevel"]=48]="SzjdNeedLevel";t[t["ShangZhongJiuDie"]=45]="ShangZhongJiuDie";t[t["ShangDongTangBaoEquip"]=51]="ShangDongTangBaoEquip";t[t["ShangHaiYiShouAck"]=56]="ShangHaiYiShouAck";t[t["BOSS_WOLRD"]=57]="BOSS_WOLRD";t[t["Open_ShanghaiYiShou"]=59]="Open_ShanghaiYiShou";t[t["LianDangLangSe"]=64]="LianDangLangSe";t[t["LianDangExp"]=66]="LianDangExp";t[t["DongFuLingQu"]=67]="DongFuLingQu";t[t["ShuXingDangEffect"]=69]="ShuXingDangEffect";t[t["PoJingSucceed"]=70]="PoJingSucceed";t[t["SevenColorMountain"]=78]="SevenColorMountain";t[t["BossCaveResetTime"]=50]="BossCaveResetTime";t[t["BossCaveNeedLevel"]=52]="BossCaveNeedLevel";t[t["BossCaveBattleTime"]=54]="BossCaveBattleTime";t[t["BossWorldNeedLevel"]=77]="BossWorldNeedLevel";t[t["YaoWangNeedLevel"]=79]="YaoWangNeedLevel";t[t["SubMinjiValue"]=80]="SubMinjiValue";t[t["EquipPropNum"]=81]="EquipPropNum";t[t["SmeltJlsDouble"]=82]="SmeltJlsDouble";t[t["LihuoDropRate"]=83]="LihuoDropRate"})(n=t.Etask_type||(t.Etask_type={}));var r;(function(t){t[t["ZhuDong"]=1]="ZhuDong";t[t["BeiDong"]=2]="BeiDong";t[t["FangZhi"]=3]="FangZhi"})(r=t.EFabaoNewType||(t.EFabaoNewType={}));var o;(function(t){t[t["Normal"]=0]="Normal";t[t["ItemNotEnough"]=1]="ItemNotEnough";t[t["IsMax"]=2]="IsMax"})(o=t.EFabaoLingTai||(t.EFabaoLingTai={}));var a=function(){function t(){}Object.defineProperty(t.prototype,"hasDress",{get:function(){return this.dress!=undefined},enumerable:true,configurable:true});return t}();t.FaoBaoSearchVo=a})(fabaonew||(fabaonew={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.FateDataAck,this,this.onFateDataAck);this.addMsgListener(app.ProtocolResponse.FateDrawAck,this,this.onFateDrawAck);this.addMsgListener(app.ProtocolResponse.FateGiftAck,this,this.onFateGiftAck)};e.prototype.init=function(){app.ViewManager.regist(i.FatePoolMainView,"vip.atlas");this._model=i.FatePoolModel.getIns();game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FATE_POOL,i.FatePoolMainView);game.GridsModel.getIns().on(game.GridsModel.EVENTS.ITEM_UPDATE,this,this._model.updateRedActs)};e.prototype.onFateDataAck=function(t,e){this._model.netData=e;this._model.event(i.FateEvent.FATE_EVENT_UPDATE_DATA);this._model.updateRedActs()};e.prototype.onFateDrawAck=function(t,e){if(e.success==1){this._model.netData.fatePoint=e.fatePoint;this._model.event(i.FateEvent.FATE_EVENT_UPDATE_DATA)}this._model.updateRedActs()};e.prototype.onFateGiftAck=function(t,e){if(e.success==1){this._model.netData.vecGift=e.vecGift;this._model.event(i.FateEvent.FATE_EVENT_UPDATE_DATA)}this._model.updateRedActs()};e.SINGLE_KEY="fatepool.FatePoolModule";return e}(app.ModuleBase);i.FatePoolModule=t;var e=function(){function t(){}t.FATE_EVENT_UPDATE_DATA="FATE_EVENT_UPDATE_DATA";t.EVENT_RED_CHECK="EVENT_RED_CHECK";return t}();i.FateEvent=e})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(t){var o=function(){function t(){}return t}();t.FatePoolVo=o;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.getNowFateItem=function(){var t=this.getFateShowPoolArr();if(this.netData){for(var e=0;e<t.length;e++){if(this.netData.curStage==t[e].cfg.showtype){return t[e]}}}return t[0]};e.prototype.getFateAwardArr=function(){var t=[];var e=csv.FatePoolProxy.getIns().getFateAwardCfgArr();for(var i=0;i<e.length;i++){if(this.netData.vecGift.indexOf(e[i].id)==-1){t.push(e[i])}}return t};e.prototype.getFateShowPoolArr=function(){var t=[];var e=csv.FatePoolProxy.getIns().getFatePoolMap();for(var i in e){var n=e[i][0];var r=new o;r.id=n.id;r.cfg=n;r.state=this.netData?this.isHaveFateItem(n.showtype):false;t.push(r)}return t};e.prototype.fateHaveNum=function(){var e=0;var t=this.getFateShowPoolArr();t.map(function(t){if(t.state){e++}});return e};e.prototype.isHaveFateItem=function(t){if(this.netData.curStage>t){return true}else if(this.netData.curStage==t&&this.netData.curStageFinished==1){return true}return false};e.prototype.getFatePreViewArr=function(){var t=[];var e={};var i=csv.FatePoolProxy.getIns().getFateMapByShowTypeMap(this.netData.curStage);for(var n=0;n<i.length;n++){var r=i[n].poolid;if(e[r]){e[r].push(i[n])}else{e[r]=[i[n]]}}for(var o in e){t.push(e[o])}return t};e.prototype.updateRedActs=function(){var e=this;var t=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(1);if(this.netData){var i=false;var n=t.gachalimit;if(game.GridsModel.getIns().hasEnoughItems(t.cost,false,false,false)&&this.netData.todayDrawCount<n&&!this.isHaveFateItem(this.netData.curStage)){i=true}var r=this.getFateAwardArr();r.map(function(t){if(e.netData.totalDrawCount>=t.limit){i=true}});if(i){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FATE_POOL)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FATE_POOL)}}else{if(game.GridsModel.getIns().hasEnoughItems(t.cost,false,false,false)){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FATE_POOL)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FATE_POOL)}}};e.SINGLE_KEY="fatepool.FatePoolModel";return e}(app.ModelBase);t.FatePoolModel=e})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("fate_gacha.csv");this._fateGaiLvMap=t.getMap("gachatype");this._fateGaiLvArr=t.getArray();var e=app.Config.getResById("fate_fuzeng.csv");this._fateAwardMap=e.getMap("id");this._fateAwardArr=e.getArray();var i=app.Config.getResById("fate_pool.csv");this._fatePoolArr=i.getArray();this._fateMapByShowTypeIdMap=i.getMapList("showtype")};e.prototype.getFateGaiLvCfgArr=function(){return this._fateGaiLvArr};e.prototype.getFateGaiLvCfgMapItem=function(t){return this._fateGaiLvMap[t]};e.prototype.getFateAwardCfgMapItem=function(t){return this._fateAwardMap[t]};e.prototype.getFateAwardCfgArr=function(){return this._fateAwardArr};e.prototype.getFatePoolCfgArr=function(){return this._fatePoolArr};e.prototype.getFateMapByShowTypeMap=function(t){return this._fateMapByShowTypeIdMap[t]};e.prototype.getFatePoolMap=function(){return this._fateMapByShowTypeIdMap};e.SINGLE_KEY="csv.FatePoolProxy";return e}(app.ModelBase);t.FatePoolProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemdaoju.itemRender=grids.GridView;this.itemdaoju.renderHandler=new Laya.Handler(this,this.onItemRender);this.btnlingqu.clickHandler=new Laya.Handler(this,this.onLingquHandler);this._model=i.FatePoolModel.getIns()};e.prototype.onItemRender=function(t){t.setData(t.dataSource)};e.prototype.onLingquHandler=function(){app.ProtocolRequest.FateGiftReq(this._data.id)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){this._data=t;this.barcishu.value=this._model.netData.totalDrawCount/t.limit>=1?t.limit:this._model.netData.totalDrawCount/t.limit;this.labelnum.text=(this._model.netData.totalDrawCount>=t.limit?t.limit:this._model.netData.totalDrawCount)+"/"+t.limit;this.itemdaoju.array=game.ItemUtil.parserList(t.reward);if(this._model.netData.totalDrawCount>=t.limit){game.RedDotView.addTo(this.btnlingqu);this.btnlingqu.visible=true;this.imgweiwancheng.visible=false}else{this.btnlingqu.visible=false;this.imgweiwancheng.visible=true}};return e}(ui.tianmingchi.tianmingchifuzengitemUI);i.FateAwardItem=t})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this._model=i.FatePoolModel.getIns()};e.prototype.onItemRender=function(t){t.setData(t.dataSource)};e.prototype.onClick=function(){var t=game.ItemUtil.parserList(this._data.cfg.itme)[0];t.ext={};var e=t.ext;var i=csv.ChouKaProxy.getIns().getBaseCfg(t.itemCfg.id);if(i){e.level=i.level;e.star=i.star+1;if(chouka.ChouKaModel.getIns().isSpecial(i.id)){e.level=0;e.star=0}e.source=fabaonew.EFabaoSource.TuJian}tip.TipManager.show(t)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){this._data=t;this.labeltitle.text=app.getLang(t.cfg.p2);this.imgname.skin=t.cfg.p1+".png";this.imgfabao.skin=t.cfg.show+".png";if(t.state){this.animationfabao.visible=true;this.animationfabao.play(0,true);this.ani1.play();this.gray=false}else{this.animationfabao.visible=false;this.gray=true;this.animationfabao.stop()}};return e}(ui.tianmingchi.tianmingchijiangchiitemUI);i.FatePoolItem=t})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listfuzeng.repeatX=1;this.listfuzeng.itemRender=i.FateAwardItem;this.listfuzeng.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listfabao.itemRender=i.FatePoolItem;this.listfabao.renderHandler=new Laya.Handler(this,this.onRenderHandler1);this._model=i.FatePoolModel.getIns();this.btnjiangliyulan.on(Laya.Event.CLICK,this,this.openPreview);this.btnchouqu01.on(Laya.Event.CLICK,this,this.chouKa1);this.btnchouqu02.on(Laya.Event.CLICK,this,this.chouKa2);this.btnyeqian01.on(Laya.Event.CLICK,this,this._updateFateChoukaView);this.btnyeqian02.on(Laya.Event.CLICK,this,this._updatePoolView);this.btnyeqian03.on(Laya.Event.CLICK,this,this._updateAwardView);this.boxmoney.on(Laya.Event.CLICK,this,this._openTips1);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.FATE_POOL,[this.btnwenhao02])};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.onDisplay=function(){this.imgfabao.skin="";this._uIndex=1;this.callLater(this.refreshAll);this.updateTime();Laya.timer.loop(1e3,this,this.updateTime);this._model.on(i.FateEvent.FATE_EVENT_UPDATE_DATA,this,this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.timer.clearAll(this);this._model.off(i.FateEvent.FATE_EVENT_UPDATE_DATA,this,this.refreshAll)};e.prototype.refreshAll=function(){var e=this;if(this._uIndex==1){this._updateFateChoukaView()}else if(this._uIndex==2){this._updatePoolView()}else{this._updateAwardView()}var t=this._model.getFateAwardArr();t.map(function(t){if(e._model.netData.totalDrawCount>=t.limit){game.RedDotView.addTo(e.btnyeqian03);return}})};e.prototype._updateFateChoukaView=function(){this._uIndex=1;this.btnyeqian01.selected=true;this.btnyeqian02.selected=false;this.btnyeqian03.selected=false;this.box01.visible=true;this.box02.visible=false;this.box03.visible=false;var t=this._model.getNowFateItem();this.imgfabao.skin=t.cfg.show+".png";this.imgname.skin=t.cfg.showname+".png";this.imgmiaoshu.skin=t.cfg.showexplain+".png";this.barfabao.value=this._model.netData.fatePoint/+t.cfg.limit;this.labeljindu.text=this._model.netData.fatePoint+"/"+t.cfg.limit;var e=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(1).cost;var i=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(2).cost;var n=e.split("-");var r=i.split("-");this.btnchouqu01.label="抽取"+n[1]+"次";this.btnchouqu02.label="抽取"+r[1]+"次";this.labelmoneynum02.text=n[1];if(!game.GridsModel.getIns().hasEnoughItems(e,false,false,false)){this.labelmoneynum02.color=game.STYLES.RED_COLOR_S}else{this.labelmoneynum02.color=game.STYLES.WHITE}this.labelmoneynum03.text=r[1];if(!game.GridsModel.getIns().hasEnoughItems(i,false,false,false)){this.labelmoneynum03.color=game.STYLES.RED_COLOR_S}else{this.labelmoneynum03.color=game.STYLES.WHITE}this.imgmoney02.parserIconByItemId(+n[0]);this.imgmoney03.parserIconByItemId(+n[0]);var o=game.ItemUtil.createVO(+n[0]);this.imgmoney01.skin=o.getIconUrl();this.imgmoney01.scaleX=this.imgmoney01.scaleY=.4;this.labelmoneynum01.text=game.GridsModel.getIns().getItemCount(+n[0]).toString();this.animationfabao.play(0,true);this.ani1.play();if(this._model.isHaveFateItem(this._model.netData.curStage)){this.imgyihuode.visible=true;this.btnchouqu01.disabled=true;this.btnchouqu02.disabled=true;this.labeltip02.text=app.getLang("fatename_tishi_4")}else{this.imgyihuode.visible=false;this.btnchouqu01.disabled=false;this.btnchouqu02.disabled=false;this.labeltip02.text=app.getLang("fatename_tishi_3")}game.RedDotView.removeFrom(this.btnchouqu01);game.RedDotView.removeFrom(this.btnchouqu02);game.RedDotView.removeFrom(this.btnyeqian01);var a=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(1);var s=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(2);var l=a.gachalimit;if(this._model.isHaveFateItem(this._model.netData.curStage)){return}if(this._model.netData.todayDrawCount>=l){return}if(game.GridsModel.getIns().hasEnoughItems(a.cost,false,false,false)){game.RedDotView.addTo(this.btnchouqu01);game.RedDotView.addTo(this.btnyeqian01)}if(game.GridsModel.getIns().hasEnoughItems(s.cost,false,false,false)&&l-this._model.netData.todayDrawCount>=5){game.RedDotView.addTo(this.btnchouqu02)}};e.prototype._updatePoolView=function(){this._uIndex=2;this.btnyeqian01.selected=false;this.btnyeqian02.selected=true;this.btnyeqian03.selected=false;this.box01.visible=false;this.box02.visible=true;this.box03.visible=false;var t=this._model.getFateShowPoolArr();this.labelyishouji.text=app.getLang("已收集："+this._model.fateHaveNum()+"/"+t.length);this.listfabao.array=t};e.prototype._updateAwardView=function(){game.RedDotView.removeFrom(this.btnyeqian03);this._uIndex=3;this.btnyeqian01.selected=false;this.btnyeqian02.selected=false;this.btnyeqian03.selected=true;this.box01.visible=false;this.box02.visible=false;this.box03.visible=true;this.listfuzeng.array=this._model.getFateAwardArr();this.listfuzeng.scrollTo(0)};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onRenderHandler1=function(t,e){t.setData(t.dataSource)};e.prototype.updateTime=function(){var t=this._model.netData.nextRefresh-game.Context.getServerTime();this.labeltime.text="至宝刷新倒计时："+util.TimeUtil.sec2Str(t)};e.prototype.openPreview=function(){app.ViewManager.toggleDialog(i.FatePoolPreview,1,0)};e.prototype.chouKa1=function(){var t=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(1);var e=t.gachalimit;var i=t.cost;if(this._model.netData.todayDrawCount>=e){manager.FlowManager.instance.flowByStyle1(app.getLang("fatename_tishi_1"));return}if(!game.GridsModel.getIns().hasEnoughItems(i,false,false,true)){return}app.ProtocolRequest.FateDrawReq(1)};e.prototype.chouKa2=function(){var t=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(2);var e=t.gachalimit;var i=t.cost;if(this._model.netData.todayDrawCount>=e||e-this._model.netData.todayDrawCount<5){manager.FlowManager.instance.flowByStyle1(app.getLang("fatename_tishi_1"));return}if(!game.GridsModel.getIns().hasEnoughItems(i,false,false,true)){return}app.ProtocolRequest.FateDrawReq(2)};e.prototype._openTips1=function(){var t=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(1).cost;var e=game.ItemUtil.parserList(t)[0];tip.TipManager.show(e,true,true)};return e}(ui.tianmingchi.tianmingchiviewUI);i.FatePoolMainView=t})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjiangli.itemRender=i.FatePoolPreviewItem;this.listjiangli.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listjiangli.vScrollBarSkin="";this._model=i.FatePoolModel.getIns()};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.FatePoolProxy.getIns().getFateGaiLvCfgMapItem(1).gachalimit;this.labeltishi.text="今日抽取次数："+this._model.netData.todayDrawCount+"/"+t;this.listjiangli.array=this._model.getFatePreViewArr()};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e)};e.prototype.openView=function(){app.ViewManager.toggleDialog(huodong.ZhouLiBaoview,1,0)};return e}(ui.tianmingchi.tianmingchijiangliyulantipUI);i.FatePoolPreview=t})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listdaoju.itemRender=i.FatePoolPreviewItem2;this.listdaoju.renderHandler=new Laya.Handler(this,this.onItemRender);this.listdaoju.repeatY=2;this._model=i.FatePoolModel.getIns()};e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.onItemRender=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t,e){this.labeltitle.text=app.getLang("fatename_grade"+t[0].poolid,t[0].probability+"%");if(e==0){this.listdaoju.array=[null,t[0]]}else{this.listdaoju.array=t;this.y-=130}};return e}(ui.tianmingchi.tianmingchijiangliyulanitem01UI);i.FatePoolPreviewItem=t})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fatepool;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.FatePoolModel.getIns()};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.setData=function(t){if(t){this.visible=true;this._data=t;var e=game.ItemUtil.parserList(t.itme)[0];this.labelname.text=e.itemCfg.namedispaly;this.itemdaoju.setData(e)}else{this.visible=false;this.itemdaoju.setData(null)}};return e}(ui.tianmingchi.tianmingchijiangliyulanitem02UI);i.FatePoolPreviewItem2=t})(fatepool||(fatepool={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var forum;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.ForumFabaoView,"pinglun.atlas");app.ViewManager.regist(i.ForumGuankaView,"pinglun.atlas")};e.prototype.initCommands=function(){this._model=i.ForumModel.getIns();this.addMsgListener(app.ProtocolResponse.PostCommentAck,this,this.onPostCommentAck);this.addMsgListener(app.ProtocolResponse.PostLikeAck,this,this.onPostLikeAck);this.addMsgListener(app.ProtocolResponse.GetCommentListAck,this,this.onGetCommentListAck);this.addMsgListener(app.ProtocolResponse.GetVerifyDataAck,this,this.onGetVerifyDataAck)};e.prototype.onPostCommentAck=function(t,e){if(e.result){manager.FlowManager.instance.flowByStyle1(app.getLang("discuss_commit_5"));this._model.setForumCommentState(e.type,e.param,1);app.ProtocolRequest.GetVerifyDataReq(e.type,e.param);app.ViewManager.toggleDialog(i.ForumPostView,-1,0)}};e.prototype.onPostLikeAck=function(t,e){if(e.result){this._model.updataForumInfo(e.type,e.param,e.roleid)}};e.prototype.onGetCommentListAck=function(t,e){if(e.result){this._model.dellForumInfo(e)}};e.prototype.onGetVerifyDataAck=function(t,e){if(e.result){this._model.dellVerifyForumInfo(e)}};e.SINGLE_KEY="forum.FaBaoModule";return e}(app.ModuleBase);i.ForumModule=t})(forum||(forum={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var forum;(function(t){var e;(function(t){t[t["GUANKA"]=1]="GUANKA";t[t["FABAO"]=2]="FABAO"})(e=t.FORUM_TYPE||(t.FORUM_TYPE={}));var i=function(t){__extends(s,t);function s(){return t!==null&&t.apply(this,arguments)||this}s.getIns=function(){return app.Singleton.getInstance(s)};s.prototype.init=function(){this.forumMap={};this.forumStateMap={};this.forumTotalMap={};this.verifyForumMap={};for(var t in e){this.forumMap[t]={};this.forumStateMap[t]={};this.forumTotalMap[t]={};this.verifyForumMap[t]={}}};s.prototype.dellForumInfo=function(t){var e=this.forumMap[t.type][t.param];if(!e){e=[]}this.forumTotalMap[t.type][t.param]=t.total;this.forumStateMap[t.type][t.param]=t.commented;var i=t.start-1;for(var n=0,r=t.data.length;n<r;n++){e[i+n]=t.data[n]}this.forumMap[t.type][t.param]=e;this.event(s.EVENT.INIT)};s.prototype.updataForumInfo=function(t,e,i){var n=this.forumMap[t][e];if(n){for(var r=0,o=n.length;r<o;r++){var a=n[r];if(Uint64.equal(a.roleid,i)){a.like+=1;a.liked=1;break}}this.event(s.EVENT.REFRESH)}};s.prototype.setForumCommentState=function(t,e,i){this.forumStateMap[t][e]=i;this.event(s.EVENT.STATE_CHANGE)};s.prototype.getForumCommentState=function(t,e){return this.forumStateMap[t][e]|0};s.prototype.getForumCommentTotal=function(t,e){return this.forumTotalMap[t][e]|0};s.prototype.getForumInfo=function(t,e){if(this.forumMap[t][e]){return this.forumMap[t][e]}return[]};s.prototype.clearForumInfo=function(t,e){this.forumMap[t][e]=[];this.verifyForumMap[t][e]=[];this.forumStateMap[t][e]=0;this.forumTotalMap[t][e]=0};s.prototype.dellVerifyForumInfo=function(t){this.verifyForumMap[t.type][t.param]=t.data[0];this.event(s.EVENT.VERIFY)};s.prototype.getOpenVerifyForumInfo=function(t,e){return this.verifyForumMap[t][e]};s.SINGLE_KEY="fabaonew.ForumModel";s.EVENT={INIT:"init",REFRESH:"refresh",VERIFY:"verify",STATE_CHANGE:"state_change"};return s}(app.ModelBase);t.ForumModel=i})(forum||(forum={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var forum;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.handler=new Laya.Handler(this,this.setState);this.mediator=new r.ForumMediator(this.pinglunlist,this.btnjihuoshengxing,this.pinglunimg,this.handler)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){this.mediator.clearAll()};e.prototype.updateLayout=function(){var t=this.dataSource[0];this.mediator.setData(r.FORUM_TYPE.FABAO,t);var e=fabaonew.FaBaoNewModel.getIns().getMagicCfgById(t);this.te.skin=chouka.ChouKaModel.getIns().getSpecIcon(e.cfg.id);this.te.visible=true;var i=e.cfg;var n=game.ItemUtil.parserList(i.id)[0];this.labelname.text=n.getHTMLName();this.imgfabao.skin=csv.ChouKaProxy.getIns().getRes(i);this.leibie.skin=csv.ChouKaProxy.getIns().getTypeIcon(i)};e.prototype.setState=function(t){if(t==2){var e=this.dataSource[0];var i=fabaonew.FaBaoNewModel.getIns().getMagicCfgById(e);if(i.isActive){this.btnjihuoshengxing.visible=true;this.bukepinglunlab.visible=false}else{this.btnjihuoshengxing.visible=false;this.bukepinglunlab.visible=true;this.bukepinglunlab.text=app.getLang("discuss_look_3")}}else if(t==1){this.bukepinglunlab.visible=true;this.btnjihuoshengxing.visible=false;this.bukepinglunlab.text=app.getLang("discuss_look_4")}else{this.btnjihuoshengxing.visible=true;this.bukepinglunlab.visible=false}};e.SINGLE_KEY="forum.ForumFabaoView";return e}(ui.pinglun.pinglun_fabaoUI);r.ForumFabaoView=t})(forum||(forum={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var forum;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.handler=new Laya.Handler(this,this.setState);this.mediator=new i.ForumMediator(this.pinglunlist,this.btnjihuoshengxing,this.pinglunimg,this.handler)};e.prototype.onDisplay=function(){this.pinglunlist.scrollTo(0);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){var t=this.dataSource[0];var e=csv.MonsterBookProxy.getIns().getChapter(t);if(!e){e=csv.MonsterBookProxy.getIns().getChapter(1)}this.fubenimg.skin="res/static/shanhaixiangyaolu/"+e.chapterpic+".png";this.labelname.text=app.getLang("bg_bossguanqia_name"+t);this.mediator.setData(i.FORUM_TYPE.GUANKA,t)};e.prototype.setState=function(t){if(t==2){var e=this.dataSource[0];if(e){this.btnjihuoshengxing.visible=true;this.bukepinglunlab.visible=false}else{this.btnjihuoshengxing.visible=false;this.bukepinglunlab.visible=true;this.bukepinglunlab.text=app.getLang("discuss_look_3")}}else if(t==1){this.bukepinglunlab.visible=true;this.btnjihuoshengxing.visible=false;this.bukepinglunlab.text=app.getLang("discuss_look_4")}else{this.btnjihuoshengxing.visible=true;this.bukepinglunlab.visible=false}};e.SINGLE_KEY="forum.ForumGuankaView";return e}(ui.pinglun.pinglun_fubenUI);i.ForumGuankaView=t})(forum||(forum={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var forum;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.ForumModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zhanimg.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){app.ProtocolRequest.PostLikeReq(this.type,this.param,this.dataSource.roleid);this.ani1.play(0,false)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i){this.type=e;this.param=i;if(t instanceof ForumData){this.imgbg.skin="public/bg_jiugong_04new.png";this.kuangdi.skin=csv.MyTeamProxy.getIns().getTeamIcon(t.simpleteamavatar);this.kuang.skin=csv.HeadFrameProxy.getIns().getIcon(t.headframeId);this.labeltime01.text=t.name;this.lbltime.x=this.labeltime01.x+this.labeltime01.width+10;this.pingjianeirong.text=t.comment;this.numlab.text=t.like==0?"":t.like.toString();if(t.liked){this.zhanimg.mouseEnabled=false;this.zhanimg.skin="pinglun/bg_pinglun_dianzhan1.png"}else{this.zhanimg.mouseEnabled=true;this.zhanimg.skin="pinglun/bg_pinglun_dianzhan2.png"}this.jia.visible=true;this.zhanimg.visible=true;this.shenghelab.visible=false}else if(t instanceof ForumRawData){this.imgbg.skin="public/bg_jiugong_04new1.png";this.kuangdi.skin=csv.MyTeamProxy.getIns().getTeamIcon(game.Context.teamAvatar);this.kuang.skin=csv.HeadFrameProxy.getIns().getIcon(game.RoleModel.getIns().headFrameId);this.labeltime01.text=game.Context.mainRole.playername;this.lbltime.x=this.labeltime01.x+this.labeltime01.width+10;this.pingjianeirong.text=t.comment;this.zhanimg.visible=false;this.numlab.text="";this.jia.visible=false;this.shenghelab.visible=true}var n=game.Context.getServerZeroTime()-t.time;if(n>0){this.lbltime.text=util.TimeUtil.formatDate(t.time,true,true)}else{this.lbltime.text=app.getLang("discuss_look_6")}};e.SINGLE_KEY="forum.ForumItem";return e}(ui.pinglun.pinglun_fabaoitemUI);i.ForumItem=t})(forum||(forum={}));var forum;(function(r){var t=function(){function t(t,e,i,n){this.model=r.ForumModel.getIns();this.list=t;this.btn=e;this.img=i;this.handler=n;this.list.itemRender=r.ForumItem;this.list.renderHandler=new Laya.Handler(this,this.onHandler);this.list.scrollBar.on(Laya.Event.END,this,this.onScrollBarChange);this.list.scrollBar.isVertical=true;this.list.scrollBar.elasticBackTime=600;this.list.scrollBar.elasticDistance=200;this.btn.on(Laya.Event.CLICK,this,this.onClick)}t.prototype.onHandler=function(t,e){t.setData(t.dataSource,this.type,this.param)};t.prototype.onClick=function(){app.ViewManager.toggleDialog(r.ForumPostView,1,0,[this.type,this.param])};t.prototype.onScrollBarChange=function(){if(this.list.scrollBar.value>=this.list.scrollBar.max){if(this.info.length<this.total){app.ProtocolRequest.GetCommentListReq(this.type,this.param,this.info.length+1)}}};t.prototype.setData=function(t,e){this.type=t;this.param=e;this.info=this.model.getForumInfo(this.type,this.param);this.btn.visible=this.info.length!=0;this.list.array=this.info;this.list.scrollTo(0);app.ProtocolRequest.GetVerifyDataReq(this.type,this.param);app.ProtocolRequest.GetCommentListReq(this.type,this.param,1);this.model.on(r.ForumModel.EVENT.INIT,this,this.initList);this.model.on(r.ForumModel.EVENT.REFRESH,this,this.refreshList);this.model.on(r.ForumModel.EVENT.VERIFY,this,this.verifyChange);this.model.on(r.ForumModel.EVENT.STATE_CHANGE,this,this.refreshState)};t.prototype.initList=function(){this.total=this.model.getForumCommentTotal(this.type,this.param);this.commoned=this.model.getForumCommentState(this.type,this.param);this.info=this.model.getForumInfo(this.type,this.param);var t=this.model.getOpenVerifyForumInfo(this.type,this.param);var e=[];if(t){e.push(t)}e=e.concat(this.info);this.list.array=e;this.img.visible=e.length==0;this.handler.runWith(this.commoned);this.model.on(r.ForumModel.EVENT.VERIFY,this,this.verifyChange)};t.prototype.verifyChange=function(){if(this.info){var t=this.model.getOpenVerifyForumInfo(this.type,this.param);var e=[];if(t){e.push(t)}e=e.concat(this.info);this.list.array=e;this.img.visible=e.length==0;this.list.scrollTo(0)}};t.prototype.refreshList=function(){this.list.refresh()};t.prototype.refreshState=function(){this.commoned=this.model.getForumCommentState(this.type,this.param);this.handler.runWith(this.commoned)};t.prototype.clearAll=function(){this.model.off(r.ForumModel.EVENT.INIT,this,this.initList);this.model.off(r.ForumModel.EVENT.REFRESH,this,this.refreshList);this.model.off(r.ForumModel.EVENT.VERIFY,this,this.initList);this.model.off(r.ForumModel.EVENT.STATE_CHANGE,this,this.refreshState);this.model.clearForumInfo(this.type,this.param)};t.SINGLE_KEY="fabaonew.ForumMediator";return t}();r.ForumMediator=t})(forum||(forum={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var forum;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.cd=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onPost);this.mission.on(Laya.Event.INPUT,this,this.onShuruCheck)};t.prototype.onShuruCheck=function(){var t=this.mission.text;if(t.length>game.Config.getIntParams(1238)){if(Laya.timer.currTimer-this.cd>2e3){manager.FlowManager.instance.flowByStyle1(app.getLang("discuss_commit_6",game.Config.getIntParams(1238)));this.cd=Laya.timer.currTimer}this.mission.text=t.slice(0,game.Config.getIntParams(1238))}this.shuoming.text=app.getLang("discuss_commit_3",game.Config.getIntParams(1238)-this.mission.text.length)};t.prototype.onPost=function(){var t=this.mission.text;if(t==""){return}if(t.indexOf("&")!=-1){return}t=t.replace(/\n/g,"");app.ProtocolRequest.PostCommentReq(this.type,this.param,t)};t.prototype.onDisplay=function(){this.callLater(this.updateLayout)};t.prototype.onUnDisplay=function(){};t.prototype.updateLayout=function(){this.type=this.dataSource[0];this.param=this.dataSource[1];this.mission.text="";this.shuoming.text=app.getLang("discuss_commit_3",game.Config.getIntParams(1238))};t.SINGLE_KEY="forum.ForumPostView";return t}(ui.pinglun.pinglun_tianjiaUI);t.ForumPostView=e})(forum||(forum={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(n.HaoYouView,"haoyou.atlas");app.ViewManager.regist(n.SiLiaoView,"haoyou.atlas");app.ViewManager.regist(n.HeiMingDanView,"haoyou.atlas");app.ViewManager.regist(n.HaoYouShengQingView,"haoyou.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.HAOYOU,n.HaoYouView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.HEIMINGDAN,n.HeiMingDanView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.SILIAO,n.SiLiaoView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FRIEND_APPLY_LIST,n.HaoYouShengQingView)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.FriendApplyListAck,this,this.onFriendApplyListAck);this.addMsgListener(app.ProtocolResponse.FriendListDataAck,this,this.onFriendListDataAck);this.addMsgListener(app.ProtocolResponse.friendListAcceptAck,this,this.onfriendListAcceptAck);this.addMsgListener(app.ProtocolResponse.friendSearchAck,this,this.onfriendSearchAck);this.addMsgListener(app.ProtocolResponse.FriendStateListAck,this,this.onFriendStateListAck);this.addMsgListener(app.ProtocolResponse.BlackListDataAck,this,this.onBlackListDataAck);this.addMsgListener(app.ProtocolResponse.BlackListDelAck,this,this.onBlackListDelAck);this.addMsgListener(app.ProtocolResponse.BlackListAddAck,this,this.onBlackListAddAck);this.addMsgListener(app.ProtocolResponse.friendListAddAck,this,this.onfriendListAddAck)};e.prototype.onfriendListAddAck=function(t,e){if(e.success){manager.FlowManager.instance.flowByStyle1(app.getLang("friend_tips1"))}};e.prototype.onFriendApplyListAck=function(t,e){n.FriendModel.getIns().applyList=e.applyList;n.FriendModel.getIns().event(n.FriendEvent.EVENT.SHENGQING_CHANGE)};e.prototype.onFriendStateListAck=function(t,e){var i=e.changeList[0];n.FriendModel.getIns().friendStateChange(i)};e.prototype.onFriendListDataAck=function(t,e){n.FriendModel.getIns().friendDataUpdate(e.friendList)};e.prototype.onfriendListAcceptAck=function(t,e){if(e.success==1){if(e.type==1){n.FriendModel.getIns().event(n.FriendEvent.EVENT.SHENGQING_CHANGE);manager.FlowManager.instance.flowByStyle1(app.getLang("friend_13",e.newFriend[0].playerName),null,game.STYLES.GREEN_COLOR_S)}}};e.prototype.onfriendSearchAck=function(t,e){n.FriendModel.getIns().searchList=e.searchList;app.ViewManager.toggleDialog(n.SouSuoView,1)};e.prototype.onBlackListDataAck=function(t,e){n.FriendModel.getIns().heimingdanDataList=e.blackList;n.FriendModel.getIns().event(n.FriendEvent.EVENT.HEIMINGDAN_CHANGE)};e.prototype.onBlackListAddAck=function(t,e){if(e.success==1){}};e.prototype.onBlackListDelAck=function(t,e){if(e.success==1){}};e.SINGLE_KEY="friend.FriendModule";return e}(app.ModuleBase);n.FriendModule=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.btnjujue.clickHandler=new Laya.Handler(this,this.onBtnjujueClick);this.btntongyi.clickHandler=new Laya.Handler(this,this.onBtntongyiClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onBtnjujueClick=function(){app.ProtocolRequest.friendListAcceptReq(this._data.playerID,0)};e.prototype.onBtntongyiClick=function(){if(i.FriendModel.getIns().isFriend(this._data.playerID)){manager.FlowManager.instance.flowByStyle1(app.getLang("friend_14"));return}if(i.FriendModel.getIns().containsBlackList(this._data.playerID)){manager.FlowManager.instance.flowByStyle1(app.getLang("friend_15"));return}app.ProtocolRequest.friendListAcceptReq(this._data.playerID,1)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){};e.prototype.setData=function(t){if(!t){return}this._data=t;this.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(t.simpleteamavatar);this.labelname.text=t.playerName;this.labelzhanli.text=app.getLang("guild_1",t.swordScore.toNumber());var e=csv.ReBirthProxy.getIns().getTransIdByLvl(t.firstLevel);var i=csv.ReBirthProxy.getIns().getTransIcon(e);if(i==""){i=csv.DefclassProxy.getIns().getNameRes(t.classSkin)}this.imgzhezhao.skin=i;this.labellv.text=csv.ReBirthProxy.getIns().getTransLvl(t.firstLevel)+"";this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(t.headframeId)};e.SINGLE_KEY="friend.HaoYouShengQingCell";return e}(ui.haoyou.haoyoushenqingitemUI);i.HaoYouShengQingCell=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this)};t.prototype.onDisplay=function(){this.callLater(this.updateLayout)};t.prototype.onUnDisplay=function(){};t.prototype.setData=function(t){e.prototype.setData.call(this,t);this.imgqipao.visible=false;this.labelnum.visible=false};t.prototype.onClick=function(){i.FriendModel.getIns().setFriendMenu([i.FriendConst.MENU.chakan,i.FriendConst.MENU.dellahei],this.data.playerID,this.data.playerName,this.data.level,this.data.classSkin,this.data.headframeId)};t.SINGLE_KEY="friend.HeiMingDanCell";return t}(i.HaoYouCell);i.HeiMingDanCell=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.labelduihua.text="";this.labelduihua.style.lineHeight=25;this.content.scrollRect=new Laya.Rectangle(0,0,this.content.width,this.content.height);this.on(Laya.Event.CLICK,this,this.onShowMenu);this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(0)};e.prototype.setData=function(t,e){this.uid=t.uid;this.rolenName=t.name;this.level=t.level;this.classSkin=t.classSkin;this.headframeId=t.headframeId;var i=JSON.parse(t.chatmsg).t;i=chat.ChatLine.dellBiaoqing(i,45,45);i=chat.ChatLine.dellJsonInfo(i,t,true)[1];this.labelduihua.text=i;chat.ChatLine.addImag(this.labelduihua,45,45);this.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(t.simpleteamavatar);this.labelname.text=t.name;var n=game.Context.getServerTime()-t.chatTime;var r=Math.floor(n/(3600*24));if(r>0){this.labeltime.text=app.getLang("offline_day",r)}else{this.labeltime.text=util.TimeUtil.formatDate(t.chatTime)}this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(t.headframeId);chat.ChatStatic.dellGuajian(this.list,t.magicPlugin,30,t.uid);this.list.x=this.labelname.x+this.labelname.width;var o=csv.ChatBubbleProxy.getIns().getCfg(t.simplebubbleid);this.imgbg.sizeGrid=o.sizegrid;this.imgbg.skin=csv.ChatBubbleProxy.getIns().getBubbleIcon(o.id)};e.prototype.onShowMenu=function(){var t=[];t.push(i.FriendConst.MENU.chakan);if(i.FriendModel.getIns().containsBlackList(this.uid)==false){if(i.FriendModel.getIns().isFriend(this.uid)){t.push(i.FriendConst.MENU.del)}else{t.push(i.FriendConst.MENU.haoyou)}t.push(i.FriendConst.MENU.lahei)}t.push(i.FriendConst.MENU.qiecuo);i.FriendModel.getIns().setFriendMenu(t,this.uid,this.rolenName,this.level,this.classSkin,this.headframeId)};e.SINGLE_KEY="friend.SiLiaoAlertCell01";return e}(ui.haoyou.siliaoitem01UI);i.SiLiaoAlertCell01=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.labelduihua.text="";this.labelduihua.style.lineHeight=25;this.content.scrollRect=new Laya.Rectangle(0,0,this.content.width,this.content.height);this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(0)};e.prototype.setData=function(t,e){var i=JSON.parse(t.chatmsg).t;i=chat.ChatLine.dellBiaoqing(i,45,45);i=chat.ChatLine.dellJsonInfo(i,t,true)[1];this.labelduihua.text=i;chat.ChatLine.addImag(this.labelduihua,45,45);this.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(t.simpleteamavatar);this.labelname.text=t.name;var n=game.Context.getServerTime()-t.chatTime;var r=Math.floor(n/(3600*24));if(r>0){this.labeltime.text=app.getLang("offline_day",r)}else{this.labeltime.text=util.TimeUtil.formatDate(t.chatTime)}if(Uint64.equal(t.uid,game.Context.mainRoleId)){this.labelname.text=app.getLang("我")}this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(t.headframeId);chat.ChatStatic.dellGuajian(this.list,t.magicPlugin,30);this.list.x=this.labelname.x+this.labelname.width;var o=csv.ChatBubbleProxy.getIns().getCfg(t.simplebubbleid);this.imgbg.sizeGrid=o.sizegrid;this.imgbg.skin=csv.ChatBubbleProxy.getIns().getBubbleIcon(o.id)};e.SINGLE_KEY="friend.SiLiaoAlertCell02";return e}(ui.haoyou.siliaoitem02UI);t.SiLiaoAlertCell02=e})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.labelduihua.text="";this.labelduihua.style.lineHeight=25;this.content.scrollRect=new Laya.Rectangle(0,0,this.content.width,this.content.height);this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(0)};e.prototype.onDisplay=function(){chat.ChatModel.getIns().on(chat.ChatModel.CHAT_SILIAO_CHANGE,this,this.onChatChange);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){chat.ChatModel.getIns().off(chat.ChatModel.CHAT_SILIAO_CHANGE,this,this.onChatChange)};e.prototype.updateLayout=function(){};e.prototype.setData=function(t){var e=t.resp;this._data=e;this._targetName=t.targetName;var i=new Uint64;i.fromString10(t.target);this._target=i;this.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(e.simpleteamavatar);this.labelname.text=e.name;this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(e.headframeId);var n=JSON.parse(e.chatmsg).t;n=chat.ChatLine.dellBiaoqing(n);n=chat.ChatLine.dellJsonInfo(n,e,true)[1];this.labelduihua.innerHTML=n;chat.ChatLine.addImag(this.labelduihua,45,45);if(e.level){this.setLevel(e.level,e.classSkin,e.headframeId)}var r=chat.ChatModel.getIns().getMsgCount(Uint64.format(this._data.uid));game.RedDotView.removeFrom(this.imgtouxiang);if(t.flag==0){game.RedDotView.addTo(this.imgtouxiang)}if(Uint64.equal(this._data.uid,game.Context.mainRoleId)){this.labelname.text=t.targetName;var o=game.Context.getLocalStorageKey("chat");var a=o[t.target];if(a){this.setLevel(a.ulevel,a.uprof,a.headframeId)}}else{this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(e.headframeId)}};e.prototype.setLevel=function(t,e,i){this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(i)};e.prototype.onClick=function(){var t=[this._data.uid,this._data.name];if(Uint64.equal(this._data.uid,game.Context.mainRoleId)){t=[this._target,this._targetName]}chat.ChatModel.getIns().showSiLiaoAlert(t)};e.prototype.onChatChange=function(t){if(this._data){if(Uint64.equal(t.resp.uid,this._data.uid)){var e=JSON.parse(t.resp.chatmsg).t;e=chat.ChatLine.dellBiaoqing(e);e=chat.ChatLine.dellJsonInfo(e,t.resp,true)[1];this.labelduihua.innerHTML=e;chat.ChatLine.addImag(this.labelduihua)}}};e.SINGLE_KEY="friend.SiLiaoCell";return e}(ui.haoyou.siliaoitem03UI);t.SiLiaoCell=e})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this)};e.SINGLE_KEY="friend.SouSuoCell";return e}(t.HaoYouCell);t.SouSuoCell=e})(friend||(friend={}));var friend;(function(t){var e=function(){function t(){}t.MENU={siliao:1,chakan:2,haoyou:3,lahei:4,del:5,dellahei:6,qiecuo:7,kungfu:8,team_kick:9,team_change:10,jubao:11};return t}();t.FriendConst=e;var i=function(){function t(){}return t}();t.friendMenuData=i})(friend||(friend={}));var friend;(function(t){var e=function(){function t(){}t.EVENT={SHENGQING_CHANGE:"SHENGQING_CHANGE",SHENGQING_BTN_CLICK:"SHENGQING_BTN_CLICK",HAOYOU_CHANGE:"HAOYOU_CHANGE",HEIMINGDAN_CHANGE:"HEIMINGDAN_CHANGE"};return t}();t.FriendEvent=e})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(u){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.applyList=[]};e.getCommonTypeArr=function(t,e){if(e===void 0){e=0}var i=[];i.push(friend.FriendConst.MENU.chakan);if(!csv.MapProxy.isInKuaFuMap()&&e!=chat.ChatModel.CHANNEL.KUAFU){i.unshift(friend.FriendConst.MENU.siliao);if(friend.FriendModel.getIns().containsBlackList(t)==false){if(friend.FriendModel.getIns().isFriend(t)){i.push(friend.FriendConst.MENU.del)}else{i.push(friend.FriendConst.MENU.haoyou)}i.push(friend.FriendConst.MENU.lahei)}else{i.push(friend.FriendConst.MENU.dellahei)}}i.push(friend.FriendConst.MENU.qiecuo);if(friend.FriendModel.getIns().containsBlackList(t)==false&&game.JuBaoModel.getIns().enableJuable==true){i.push(friend.FriendConst.MENU.jubao)}return i};e.prototype.setFriendMenu=function(t,e,i,n,r,o){if(Uint64.equal(game.Context.mainRole.insId,e)){return}friend.HaoYouCaiDanView.getIns().menuArr=[];for(var a=0;a<t.length;a++){var s=parseInt(t[a]);var l=new u.friendMenuData;l.type=s;friend.HaoYouCaiDanView.getIns().menuArr.push(l);friend.HaoYouCaiDanView.getIns().menuRoleUid=e;friend.HaoYouCaiDanView.getIns().menuRoleName=i;friend.HaoYouCaiDanView.getIns().level=n;friend.HaoYouCaiDanView.getIns().prof=r;friend.HaoYouCaiDanView.getIns().headframeId=o}if(app.ViewManager.DisplayedInStage(friend.HaoYouCaiDanView.SINGLE_KEY)){friend.HaoYouCaiDanView.getIns().reset()}else{app.ViewManager.toggleView(friend.HaoYouCaiDanView,app.AppContainer.flowLayer,1)}};e.prototype.getOnlineNumWithBlack=function(){return this.getOnlineNum(this.heimingdanDataList)};e.prototype.getOnlineNumWithFriend=function(){return this.getOnlineNum(this.haoyouDataList)};e.prototype.getOnlineNum=function(t){var e=0;for(var i=0;i<t.length;i++){if(t[i].logoutTime==0){e++}}return e};e.prototype.getOnlineString=function(t){var e=util.TimeUtil.getTimeArr(parseInt(t));if(parseInt(e.day)>0){return app.getLang("online_1",e.day)}else if(parseInt(e.hour)>0){return app.getLang("online_2",e.hour)}else if(parseInt(e.minute)>0){return app.getLang("online_3",e.minute)}else if(parseInt(e.second)>0){return app.getLang("online_4",e.second)}};e.prototype.isFriend=function(t){if(this.haoyouDataList){for(var e=0;e<this.haoyouDataList.length;e++){if(Uint64.equal(this.haoyouDataList[e].playerID,t)){return true}}}return false};e.prototype.friendDataUpdate=function(t){t.sort(this.sortFriend);this.haoyouDataList=t;this.event(u.FriendEvent.EVENT.HAOYOU_CHANGE)};e.prototype.friendStateChange=function(t){for(var e=0,i=this.haoyouDataList;e<i.length;e++){var n=i[e];if(n.playerID==t.playerID){n=t;this.event(u.FriendEvent.EVENT.HAOYOU_CHANGE);break}}};e.prototype.containsBlackList=function(t){if(this.heimingdanDataList){for(var e=0,i=this.heimingdanDataList;e<i.length;e++){var n=i[e];if(Uint64.equal(n.playerID,t)){return true}}}return false};e.prototype.containsFridenList=function(t){if(this.haoyouDataList){for(var e=0,i=this.haoyouDataList;e<i.length;e++){var n=i[e];if(Uint64.equal(n.playerID,t)){return true}}}return false};e.prototype.sortFriend=function(t,e){if(t.logoutTime==0&&e.logoutTime>0)return-1;if(t.logoutTime>0&&e.logoutTime==0)return 1;if(t.logoutTime==0){if(t.level>e.level)return-1;if(t.level<e.level)return 1}else{if(t.logoutTime<e.logoutTime)return-1;if(t.logoutTime>e.logoutTime)return 1}return 0};e.prototype.getApplyList=function(){var t=[];for(var e=0;e<this.applyList.length;e++){if(this.isFriend(this.applyList[e].playerID))continue;t.push(this.applyList[e])}return t};e.SINGLE_KEY="friend.FriendModel";return e}(app.ModelBase);u.FriendModel=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.clip=new Laya.Clip;this.clip.autoPlay=true;this.clip.interval=120;this.addChild(this.clip)};e.prototype.onClick=function(t){t.stopPropagation();i.FriendModel.getIns().event(chat.ChatBiaoqingView.BIAOQING_SELECT,this.dataSource.key)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.clip.skin="res/biaoqing/"+t.res+".png";this.clip.clipX=t.clipx;this.clip.clipY=t.clipy;this.clip.width=t.width;this.clip.height=t.height;this.clip.x=(this.width-this.clip.width)/2;this.clip.y=(this.height-this.clip.height)/2};e.SINGLE_KEY="friend.FriendChatBiaoQingItem";return e}(ui.liaotian.biaoqingitemUI);i.FriendChatBiaoQingItem=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listcaozuo.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onStage)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){Laya.stage.off(Laya.Event.CLICK,this,this.onStage)};e.prototype.onRenderHandler=function(t){var e=t.dataSource;switch(e.type){case i.FriendConst.MENU.siliao:t.label=app.getLang("friend_1");t.clickHandler=new Laya.Handler(this,this.siliaoHandler);break;case i.FriendConst.MENU.chakan:t.label=app.getLang("friend_2");t.clickHandler=new Laya.Handler(this,this.chakanHandler);break;case i.FriendConst.MENU.haoyou:t.label=app.getLang("friend_3");t.clickHandler=new Laya.Handler(this,this.addFriendHandler);break;case i.FriendConst.MENU.lahei:t.label=app.getLang("friend_4");t.clickHandler=new Laya.Handler(this,this.laheiHandler);break;case i.FriendConst.MENU.del:t.label=app.getLang("friend_5");t.clickHandler=new Laya.Handler(this,this.delFriendHandler);break;case i.FriendConst.MENU.dellahei:t.label=app.getLang("friend_11");t.clickHandler=new Laya.Handler(this,this.delLaHeiHandler);break;case i.FriendConst.MENU.qiecuo:t.label=app.getLang("label_qiecuo");t.clickHandler=new Laya.Handler(this,this.delQiecuoHandler);break;case i.FriendConst.MENU.kungfu:t.label=app.getLang("label_kungfu");t.clickHandler=new Laya.Handler(this,this.delKungfuHandler);break;case i.FriendConst.MENU.team_kick:t.label=app.getLang("label_team_kick");t.clickHandler=new Laya.Handler(this,this.delTeamKickHandler);break;case i.FriendConst.MENU.team_change:t.label=app.getLang("label_team_change");t.clickHandler=new Laya.Handler(this,this.delTeamChangeHandler);break;case i.FriendConst.MENU.jubao:t.label=app.getLang("report1");t.clickHandler=new Laya.Handler(this,this.jubaoHandler);break}};e.prototype.siliaoHandler=function(){chat.ChatModel.getIns().showSiLiaoAlert([this.menuRoleUid,this.menuRoleName,this.level,this.prof,this.headframeId])};e.prototype.chakanHandler=function(){game.OtherRoleModel.getIns().reOpenFuncId=game.WindowsResigter.getSelectFuncID();Laya.Dialog.manager.closeAll();Laya.timer.once(200,this,this.laterCall)};e.prototype.laterCall=function(){app.ProtocolRequest.GetShowPlayerReq(this.menuRoleUid)};e.prototype.addFriendHandler=function(){var t=game.Config.getIntParams(game.ConfigID.FRIENDS_LIMIT);if(csv.MapProxy.isInKuaFuMap()){manager.FlowManager.instance.flowByStyle1(app.getLang("跨服场景中不能加好友"));return}if(i.FriendModel.getIns().haoyouDataList.length>=t){manager.FlowManager.instance.flowByStyle1(app.getLang("friend_12"))}else{app.ProtocolRequest.friendListAddReq(this.menuRoleUid)}};e.prototype.laheiHandler=function(){game.Alert.show(app.getLang("friend_7",this.menuRoleName),new Laya.Handler(this,this.onOKLaHeiHandler),new Laya.Handler)};e.prototype.onOKLaHeiHandler=function(){app.ProtocolRequest.BlackListAddReq(this.menuRoleUid)};e.prototype.delFriendHandler=function(){game.Alert.show(app.getLang("friend_6",this.menuRoleName),new Laya.Handler(this,this.onOKDelHandler),new Laya.Handler)};e.prototype.onOKDelHandler=function(){app.ProtocolRequest.friendListDelReq(this.menuRoleUid)};e.prototype.delLaHeiHandler=function(){app.ProtocolRequest.BlackListDelReq(0,this.menuRoleUid)};e.prototype.delQiecuoHandler=function(){if(battle.BattleModel.getIns().checkQiecuoState(true)){return}var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(t==csv.MapProxy.MAP_TYPE.WORLD_BOSS_OUT){app.ProtocolRequest.ChargePkReq(this.menuRoleUid,1)}else{app.ProtocolRequest.ChargePkReq(this.menuRoleUid,0)}};e.prototype.delKungfuHandler=function(){app.ProtocolRequest.HomeImpartKungReq(this.menuRoleUid)};e.prototype.delTeamKickHandler=function(){app.ProtocolRequest.TeamExitReq(this.menuRoleUid)};e.prototype.delTeamChangeHandler=function(){app.ProtocolRequest.TeamChangeCaptainReq(this.menuRoleUid)};e.prototype.jubaoHandler=function(){var t={};t.menuRoleUid=this.menuRoleUid;t.menuRoleName=this.menuRoleName;app.ViewManager.toggleDialog(game.JubaoView,1,1,t)};e.prototype.updateLayout=function(){this.listcaozuo.array=this.menuArr;this.updataWH();this.updataXY()};e.prototype.reset=function(){this.listcaozuo.array=this.menuArr;this.updataWH();this.updataXY()};e.prototype.updataXY=function(){var t=Laya.stage.mouseX;var e=Laya.stage.mouseY;if(t<0){t=0}else if(t>Laya.stage.width-this.imgtipsbg.width){t=Laya.stage.width-this.imgtipsbg.width}if(e<0){e=0}else if(e>Laya.stage.height-this.imgtipsbg.height){e=Laya.stage.height-this.imgtipsbg.height}this.x=t;this.y=e;this.hitArea=new Laya.Rectangle(-this.x,-this.y,Laya.stage.width,Laya.stage.height)};e.prototype.updataWH=function(){this.imgtipsbg.height=this.menuArr.length*70+20};e.prototype.onStage=function(){if(app.ViewManager.DisplayedInStage(i.HaoYouCaiDanView.SINGLE_KEY)){app.ViewManager.toggleView(i.HaoYouCaiDanView,app.AppContainer.flowLayer,-1)}};e.SINGLE_KEY="friend.HaoYouCaiDanView";return e}(ui.haoyou.haoyoucaozuoliebiaoviewUI);i.HaoYouCaiDanView=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listsiliao.itemRender=i.HaoYouShengQingCell;this.listsiliao.renderHandler=new Laya.Handler(this,this.onListRenderHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){i.FriendModel.getIns().on(i.FriendEvent.EVENT.SHENGQING_CHANGE,this,this.updateLayout);i.FriendModel.getIns().on(i.FriendEvent.EVENT.HAOYOU_CHANGE,this,this.updateLayout);this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){i.FriendModel.getIns().off(i.FriendEvent.EVENT.SHENGQING_CHANGE,this,this.updateLayout);i.FriendModel.getIns().off(i.FriendEvent.EVENT.HAOYOU_CHANGE,this,this.updateLayout)};e.prototype.updateLayout=function(){this.listsiliao.array=i.FriendModel.getIns().getApplyList()};e.prototype.onListRenderHandler=function(t){t.setData(t.dataSource)};e.SINGLE_KEY="friend.HaoYouShengQingView";return e}(ui.haoyou.haoyoushenqingviewnewUI);i.HaoYouShengQingView=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.zhuangbeilist.itemRender=i.HaoYouCell;this.zhuangbeilist.renderHandler=new Laya.Handler(this,this.onListRenderHandler);this.zhuangbeilist.array=[];this._model=i.FriendModel.getIns();this.btnchazhao.clickHandler=new Laya.Handler(this,this.onBtnChaZhaoClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.labelname.on(Laya.Event.FOCUS,this,gamesdk.onTomatoForceHandler,[this.labelname])};e.prototype.onDisplay=function(){gamesdk.onTomatoForceHandler(this.labelname);i.FriendModel.getIns().on(i.FriendEvent.EVENT.HAOYOU_CHANGE,this,this.onFriendChange);app.ProtocolRequest.FriendListDataReq();this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){i.FriendModel.getIns().off(i.FriendEvent.EVENT.HAOYOU_CHANGE,this,this.onFriendChange)};e.prototype.onInputFocus=function(){};e.prototype.onBtnChaZhaoClick=function(){if(this.labelname.text.length>0){app.ProtocolRequest.friendSearchReq(this.labelname.textField.text)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("请输入名字加好友"))}};e.prototype.onFriendChange=function(){var t=game.Config.getIntParams(game.ConfigID.FRIENDS_LIMIT);this.labelhaoyoushu.text=app.getLang("friend_8")+this._model.haoyouDataList.length+"/"+t;this.zhuangbeilist.array=this._model.haoyouDataList};e.prototype.onListRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.updateLayout=function(){};e.SINGLE_KEY="friend.HaoYouView";return e}(ui.haoyou.haoyouviewUI);i.HaoYouView=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listheimingdan.itemRender=i.HeiMingDanCell;this.listheimingdan.renderHandler=new Laya.Handler(this,this.onListRenderHandler);this.listheimingdan.array=[];this._model=i.FriendModel.getIns();this.btnshanchu.clickHandler=new Laya.Handler(this,this.onBtnShanChuClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.imgwanjia.visible=false};e.prototype.onDisplay=function(){i.FriendModel.getIns().on(i.FriendEvent.EVENT.HEIMINGDAN_CHANGE,this,this.onHeiMingDanChange);app.ProtocolRequest.BlackListDataReq();this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){i.FriendModel.getIns().on(i.FriendEvent.EVENT.HEIMINGDAN_CHANGE,this,this.onHeiMingDanChange)};e.prototype.updateLayout=function(){};e.prototype.onBtnShanChuClick=function(){app.ProtocolRequest.BlackListDelReq(1,Uint64.format(0))};e.prototype.onListRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.onHeiMingDanChange=function(){this.labelheimingdan.text=app.getLang("friend_9")+this._model.heimingdanDataList.length;this.listheimingdan.array=this._model.heimingdanDataList;this.imgwanjia.visible=this._model.heimingdanDataList&&this._model.heimingdanDataList.length<=0};e.SINGLE_KEY="friend.HeiMingDanView";return e}(ui.haoyou.heimingdanviewUI);i.HeiMingDanView=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._chatMsgTotalHeight=0;t.myPattern=/<br>/gi;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.labelduihua.text="";this.btnfasong.clickHandler=new Laya.Handler(this,this.sendMsg);this.btnbiaoqing.on(Laya.Event.CLICK,this,this.showBiaoqing);this.panelsiliao.vScrollBarSkin="";this.panelsiliao.vScrollBar.isVertical=true;this.panelsiliao.vScrollBar.elasticBackTime=600;this.panelsiliao.vScrollBar.elasticDistance=200;this.panelsiliao.vScrollBar.changeHandler=new Laya.Handler(this,this.onStartDrag);this.on(Laya.Event.CLICK,this,this.onClick);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._chatBiaoqing=new ui.liaotian.biaoqingviewUI;this._chatBiaoqing.chongwulist.itemRender=i.FriendChatBiaoQingItem;this._chatBiaoqing.chongwulist.renderHandler=new Laya.Handler(this,this.onRender);var t=csv.BiaoqingProxy.getIns().getBiaoqingByType(1);this._chatBiaoqing.chongwulist.array=t;this._chatBiaoqing.visible=false;this.addChild(this._chatBiaoqing)};t.prototype.onRender=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){i.FriendModel.getIns().on(chat.ChatBiaoqingView.BIAOQING_SELECT,this,this.addBiaoqing);chat.ChatModel.getIns().on(chat.ChatModel.CHAT_SILIAO_CHANGE,this,this.appendChatLine);this.callLater(this.updateLayout)};t.prototype.onUnDisplay=function(){i.FriendModel.getIns().off(chat.ChatBiaoqingView.BIAOQING_SELECT,this,this.addBiaoqing);chat.ChatModel.getIns().off(chat.ChatModel.CHAT_SILIAO_CHANGE,this,this.appendChatLine)};t.prototype.updateLayout=function(){this._uid=Uint64.format(this.dataSource[0]);if(Uint64.equal(this._uid,Uint64.ZERO)){this._uid=new Uint64(this.dataSource[0].low,this.dataSource[0].high)}this.labelname.text=this.dataSource[1];this.clean();this.setChatLines();game.Context.event(t.ON_READED,this._uid);chat.ChatModel.getIns().hasUnReadMsg()};t.prototype.clean=function(){while(this.panelsiliao.numChildren>0){var t=this.panelsiliao.removeChildAt(0);var e="friend.SiLiaoAlertCell01";if(t instanceof i.SiLiaoAlertCell01){e="friend.SiLiaoAlertCell01"}else if(t instanceof i.SiLiaoAlertCell02){e="friend.SiLiaoAlertCell02"}Laya.Pool.recover(e,t)}};t.prototype.setChatLines=function(){this._chatMsgTotalHeight=5;var t=chat.ChatModel.getIns().getSiLiaoChatLineArr(this.panelsiliao.width,this._uid);for(var e in t){var i=t[e];i.y=this._chatMsgTotalHeight;this._chatMsgTotalHeight+=i.height;this.panelsiliao.addChild(i)}if(!this.checkboxon.selected){this.layout()}};t.prototype.appendChatLine=function(t){var e=chat.ChatModel.getIns().appendChatLine(t,this.panelsiliao.width);e.y=this._chatMsgTotalHeight;this._chatMsgTotalHeight+=e.height;this.panelsiliao.addChild(e);if(!this.checkboxon.selected){this.layout()}chat.ChatModel.getIns().hasUnReadMsg()};t.prototype.onStartDrag=function(){if(this.panelsiliao.vScrollBar.value<=0){this.checkboxon.selected=true}else{this.checkboxon.selected=false}};t.prototype.layout=function(){this.panelsiliao.vScrollBar.max=this.panelsiliao.contentHeight;this.panelsiliao.vScrollBar.value=this.panelsiliao.vScrollBar.max};t.prototype.sendMsg=function(){var t=this.labelduihua.text;t=t.replace(this.myPattern,"");if(t==""){manager.FlowManager.instance.flowByStyle1(app.getLang("fail_to_send"));this.labelduihua.text="";return}if(t.indexOf("&")!=-1){this.labelduihua.text="";return}var e={t:t};var i=JSON.stringify(e);chat.ChatModel.getIns().sendMsg(chat.ChatModel.CHANNEL.SILIAO,this._uid,i,this.labelname.text);this.labelduihua.text="";var n=game.Context.getLocalStorageKey("chat");if(!n){n={}}n[this._uid.toString10()]={uid:this._uid.toString10(),uname:this.dataSource[1],ulevel:this.dataSource[2],uprof:this.dataSource[3],headframeid:this.dataSource[4]};game.Context.setLocalStorageKey("chat",n)};t.prototype.showBiaoqing=function(t){t.stopPropagation();this._chatBiaoqing.x=this.btnbiaoqing.x-this._chatBiaoqing.width/2;this._chatBiaoqing.y=this.btnbiaoqing.y-this._chatBiaoqing.height-5;this._chatBiaoqing.visible=true};t.prototype.onClick=function(t){this.hideBiaoqing()};t.prototype.hideBiaoqing=function(){this._chatBiaoqing.visible=false};t.prototype.addBiaoqing=function(t){var e=this.labelduihua.text;e+=t;this.labelduihua.text=e};t.SINGLE_KEY="friend.SiLaioAlert";t.ON_READED="onReadSiLaioMsg";return t}(ui.haoyou.siliaoview01UI);i.SiLaioAlert=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listsiliao.itemRender=i.SiLiaoCell;this.listsiliao.renderHandler=new Laya.Handler(this,this.onListRenderHandler);this.listsiliao.array=[]};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.updateLayout=function(){var t=chat.ChatModel.getIns().getAllPM();this.labellianxiren.text=app.getLang("最近联系人：{0}/{1}",t.length,t.length);this.listsiliao.array=t};e.prototype.onListRenderHandler=function(t){t.setData(t.dataSource)};e.SINGLE_KEY="friend.SiLiaoView";return e}(ui.haoyou.siliaoviewUI);i.SiLiaoView=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var friend;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.listsousuo.itemRender=i.SouSuoCell;this.listsousuo.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.updateLayout)};e.prototype.onUnDisplay=function(){};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.updateLayout=function(){this.listsousuo.array=i.FriendModel.getIns().searchList;this.imgsousuo.visible=this.listsousuo.array.length<=0};e.SINGLE_KEY="friend.SouSuoView";return e}(ui.haoyou.sousuoviewUI);i.SouSuoView=t})(friend||(friend={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=i.FubenModel.getIns();csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.INITED,this,this.onFuncInit);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.ADD,this,this.onFuncOpen);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.onTeamLvChange);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.onTeamLvChange);fabaonew.FaBaoNewModel.getIns().on(fabaonew.FabaoNewEvent.TASK_VALUE_CHANGE,this,this.onLimitLvChange)};e.prototype.initCommands=function(){};e.prototype.onFuncInit=function(){this._model.initAllFuncs()};e.prototype.onFuncOpen=function(t){if(this._model.funcList.indexOf(t.id)!=-1){this._model.checkAllFuncs()}if(t.id==csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN){this._model.checkSsslRed()}else if(t.id==csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE){this._model.checkSzjdRed()}};e.prototype.onTeamLvChange=function(){this._model.checkAllFuncs()};e.prototype.onLimitLvChange=function(t){var e=this._model.minLimitLvType.indexOf(t);if(e!=-1){this._model.checkIsNew(this._model.funcList[e])}else{if(t==fabaonew.Etask_type.SsslSweepCount){this._model.checkSsslRed()}else if(t==fabaonew.Etask_type.SzjdSweepCount){this._model.checkSzjdRed()}}};e.SINGLE_KEY="dailytask.FubenModule";return e}(app.ModuleBase);i.FubenModule=t})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var dailytask;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.currListMap={};t.currNewListMap={};t._boNewMap={};return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){};t.prototype.checkSsslRed=function(){var t=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.SSSL);var e=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SsslSweepCount);e-=t.extnum;if(e<0){e=0}if(t.fnum+t.gnum+e>0){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN)}};t.prototype.checkSzjdRed=function(){var t=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.SZJD);var e=fabaonew.FaBaoNewModel.getIns().getPlayMode(fabaonew.Etask_type.SzjdSweepCount);e-=t.extnum;if(e<0){e=0}if(t.fnum+t.gnum+e>0){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE)}};t.prototype.updataNew=function(){var t={};for(var e=0;e<this.funcList.length;e++){var i=this.funcList[e];var n=csv.FunctionsProxy.getIns().getCfg(i).newlink;if(!n){n=i}if(!t[n]){t[n]=this.getBoNew(this.funcList[e])}}for(var r in t){if(t[r]){game.ClosureManager.addXin(parseInt(r))}else{game.ClosureManager.removeXin(parseInt(r))}}};t.prototype.initAllFuncs=function(){this.funcList=[csv.FunctionsProxy.ENUMS.BOSS_CAVE,csv.FunctionsProxy.ENUMS.BOSS_WOLRD,csv.FunctionsProxy.ENUMS.MOUNTAIN_NEW,csv.FunctionsProxy.ENUMS.SHANSHEN_SHILIAN,csv.FunctionsProxy.ENUMS.SHANZHONG_JIUDIE,csv.FunctionsProxy.ENUMS.FUMO_EARTH];this.funcDataList=[csv.BossProxy.getIns().getCaveBoss(),csv.BossProxy.getIns().getBossArrByType(csv.BossProxy.ENUM.BOSS_WORLD),csv.MountainProxy.getIns().getArr(),csv.DungeonProxy.getIns().getSsslArr(),csv.DungeonProxy.getIns().getSzjdArr(),csv.FumoEarthProxy.getIns().cfgArr];this.minLimitLvType=[fabaonew.Etask_type.BossCaveNeedLevel,fabaonew.Etask_type.BossWorldNeedLevel,fabaonew.Etask_type.SevenColorMountain,fabaonew.Etask_type.SsslNeedLevel,fabaonew.Etask_type.SzjdNeedLevel,null];for(var t=0;t<this.funcList.length;t++){this.initCurrList(this.funcList[t],this.funcDataList[t])}};t.prototype.checkAllFuncs=function(){for(var t=0;t<this.funcList.length;t++){this.checkIsNew(this.funcList[t])}};t.prototype.checkIfNewId=function(t,e){return this.currNewListMap[t]&&this.currNewListMap[t].indexOf(e)!=-1};t.prototype.initCurrList=function(t,e){if(!this.currListMap[t]){this.currListMap[t]=[];if(!csv.FunctionsProxy.getIns().isOpen(t)){return}var i=e.length;var n=this.funcList.indexOf(t);for(var r=0;r<i;r++){var o=e[r];var a=o.teamlevel|o.teamlv;if(this.minLimitLvType[n]){a-=fabaonew.FaBaoNewModel.getIns().getPlayMode(this.minLimitLvType[n])}if(game.Context.isTeamLvReach(a,false)){this.currListMap[t].push(o.id)}else{break}}}};t.prototype.setBoNew=function(t,e){this._boNewMap[t]=e;if(!e){this.currNewListMap[t]=[]}this.updataNew()};t.prototype.getBoNew=function(t){return this._boNewMap[t]};t.prototype.checkIsNew=function(t){if(!csv.FunctionsProxy.getIns().isOpen(t)){return}var e=this.funcList.indexOf(t);var i=this.funcDataList[e];var n=[];var r=i.length;for(var o=0;o<r;o++){var a=i[o];var s=a.teamlevel|a.teamlv;if(this.minLimitLvType[e]){s-=fabaonew.FaBaoNewModel.getIns().getPlayMode(this.minLimitLvType[e])}if(game.Context.isTeamLvReach(s,false)){n.push(a.id)}else{break}}if(this.currListMap[t].length<n.length){this.currNewListMap[t]=[];this.setBoNew(t,true);for(var o=this.currListMap[t].length;o<n.length;o++){this.currNewListMap[t].push(n[o])}this.currListMap[t]=n}};t.SINGLE_KEY="dailytask.FubenModel";return t}(app.ModelBase);t.FubenModel=e})(dailytask||(dailytask={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fulicode;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.QianDaoView,"qiandao.atlas","youjian.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.QIAN_DAO,i.QianDaoView);this._model=i.QianDaoModel.getIns();this._model.on(i.QianDaoEvent.QianDao_CHANGE,this,this.onRedDotChange);game.RoleModel.getIns().on(game.RoleModel.EVENTS.LEVEL_CHANGE,this,this.onRedDotChange);game.RoleModel.getIns().on(game.RoleModel.EVENTS.TEAM_LEVEL_CHANGE,this,this.onRedDotChange)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.SignNtf,this,this.onSignNtf);this.addMsgListener(app.ProtocolResponse.SignAck,this,this.onSignAck);this.addMsgListener(app.ProtocolResponse.SignDaysAck,this,this.onSignDaysAck)};e.prototype.onSignNtf=function(t,e){this._model.updateData(e);this._model.event(i.QianDaoEvent.QianDao_CHANGE)};e.prototype.onSignAck=function(t,e){this._model.event(i.QianDaoEvent.QianDao_CHANGE)};e.prototype.onSignDaysAck=function(t,e){this._model.event(i.QianDaoEvent.QianDao_CHANGE)};e.prototype.onRedDotChange=function(){Laya.timer.callLater(this,this.onUpdateRedDot)};e.prototype.onUpdateRedDot=function(){this._model.checkRedDot()};e.SINGLE_KEY="fulicode.FuLiDaTingModule";return e}(app.ModuleBase);i.FuLiDaTingModule=t})(fulicode||(fulicode={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fulicode;(function(t){var e=function(){function t(){}t.QianDao_CHANGE="qiandao_change";return t}();t.QianDaoEvent=e;var r=function(){function t(){}return t}();t.QianDaoVo=r;var o;(function(t){t[t["CAN_GET"]=1]="CAN_GET";t[t["DONT_CAN_GET"]=2]="DONT_CAN_GET";t[t["GETTED"]=3]="GETTED"})(o=t.LinQuState||(t.LinQuState={}));var a;(function(t){t[t["CAN_SIGN"]=1]="CAN_SIGN";t[t["CAN_BUSIGN"]=2]="CAN_BUSIGN";t[t["DONT_CAN_SIGN_AND_BUSIGN"]=3]="DONT_CAN_SIGN_AND_BUSIGN";t[t["SIGNED"]=4]="SIGNED";t[t["CAN_BUSIGN_SHOW"]=5]="CAN_BUSIGN_SHOW"})(a=t.QianDaoState||(t.QianDaoState={}));var i=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.cellSelectIndex=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this.buqianCostVo=game.ItemUtil.parserList(game.Config.getParams(255))[0]};t.prototype.updateData=function(t){this._signdays=t.signdays;this._signflag=t.signflag;this._supplesign=t.supplesign;this._addsign=t.addsign};t.prototype.getQianDaoTabArr=function(){var t=[];var e=csv.QianDaoProxy.getIns().getAddQianDaoArr();for(var i=0;i<e.length;i++){var n=new r;n.id=parseInt(e[i].id);n.data=e[i];n.state=this.getTabState(n.id);t.push(n)}return t};t.prototype.getTabState=function(t){if(t<=this._signdays){for(var e=0;e<this._addsign.length;e++){if(t==this._addsign[e]){return o.GETTED}}return o.CAN_GET}return o.DONT_CAN_GET};t.prototype.getQianDaoCellArr=function(){var t=[];var e=csv.QianDaoProxy.getIns().getQianDaoArr();for(var i=0;i<e.length;i++){var n=new r;n.id=parseInt(e[i].id);n.data=e[i];n.state=this.getCellState(n.id);n.vipData={vipNum:e[i].viprate==""?"":e[i].viprate.split("-")[0],times:e[i].viprate==""?"":e[i].viprate.split("-")[1]};t.push(n)}return t};t.prototype.getCellState=function(t){if(t<=this._signdays){return a.SIGNED}else if(this._signflag==0&&t==this._signdays+1){return a.CAN_SIGN}else if(this._supplesign>0){if(this._signflag==0&&(t>=this._signdays+2&&t<=this.signdays+this._supplesign)){return a.CAN_BUSIGN}else if(this._signflag==1&&(t>=this._signdays+1&&t<=this.signdays+this._supplesign))if(t==this._signdays+1){return a.CAN_BUSIGN_SHOW}return a.CAN_BUSIGN}return a.DONT_CAN_SIGN_AND_BUSIGN};Object.defineProperty(t.prototype,"signdays",{get:function(){return this._signdays},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"signflag",{get:function(){return this._signflag},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"supplesign",{get:function(){return this._supplesign},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"addsign",{get:function(){return this._addsign},enumerable:true,configurable:true});t.prototype.checkRedDot=function(){var t=false;var e=this.getQianDaoCellArr();var i=this.getQianDaoTabArr();for(var n=0;n<e.length;n++){if(e[n].state==a.CAN_SIGN){t=true;game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.QIAN_DAO);break}else{if(!t){game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.QIAN_DAO);t=false}}}for(var n=0;n<i.length;n++){if(i[n].state==o.CAN_GET){t=true;game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.QIAN_DAO);break}else{if(!t){game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.QIAN_DAO);t=false}}}};t.SINGLE_KEY="fulicode.QianDaoModel";return t}(app.ModelBase);t.QianDaoModel=i})(fulicode||(fulicode={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.initAddUpSign();this.initSign()};e.prototype.initAddUpSign=function(){var t=app.Config.getResById("addupsign.csv");this.addqiandaoMap=t.getMap("id");this.addqiandaoArr=t.getArray()};e.prototype.getAddQianDaoCell=function(t){return this.addqiandaoMap[t]};e.prototype.getAddQianDaoArr=function(){return this.addqiandaoArr};e.prototype.initSign=function(){var t=app.Config.getResById("sign.csv");this.qiandaoMap=t.getMap("id");this.qiandaoArr=t.getArray()};e.prototype.getQianDaoCell=function(t){return this.qiandaoMap[t]};e.prototype.getQianDaoArr=function(){return this.qiandaoArr};e.SINGLE_KEY="csv.QianDaoProxy";return e}(app.ModelBase);t.QianDaoProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fulicode;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.imgxuanzhong.visible=false};e.prototype.setData=function(t){this.labelname.text="第"+t.id+"天";if(t.state==i.QianDaoState.DONT_CAN_SIGN_AND_BUSIGN||t.data.state==i.QianDaoState.SIGNED){this.itemdaoju.mouseEnabled=true}else{this.itemdaoju.mouseEnabled=false}if(t.vipData.vipNum==""||t.vipData.times==""){this.jiaobiaoimg.visible=false}else{this.jiaobiaoimg.visible=true;this.jiaobiaoimg.skin="res/static/qiandao/"+t.data.res+".png"}if(t.state==i.QianDaoState.CAN_SIGN){this.tishiani.visible=true;this.tishiani.play();game.RedDotView.addTo(this.itemdaoju)}else{this.tishiani.visible=false;this.tishiani.stop();game.RedDotView.removeFrom(this.itemdaoju)}var e=this._tempData=game.ItemUtil.parserList(t.data.reward)[0];game.ItemShowUtil.showType3(e,this.itemdaoju);this.lingquimg.visible=t.state==i.QianDaoState.SIGNED?true:false;this.buqian.visible=t.state==i.QianDaoState.CAN_BUSIGN_SHOW?true:false};e.prototype.onClick=function(){var t=this.dataSource.state;i.QianDaoModel.getIns().cellSelectIndex=this.dataSource.id;if(t==i.QianDaoState.CAN_SIGN){app.ProtocolRequest.SignReq()}else if(t==i.QianDaoState.CAN_BUSIGN_SHOW){game.Alert.show(app.getLang("是否消耗{1}{0}补签？",i.QianDaoModel.getIns().buqianCostVo.getName(),i.QianDaoModel.getIns().buqianCostVo.count),Laya.Handler.create(this,function(){if(!game.GridsModel.getIns().hasEnoughItems(i.QianDaoModel.getIns().buqianCostVo)){manager.FlowManager.instance.flowByStyle1(app.getLang("{0}不足",i.QianDaoModel.getIns().buqianCostVo.getName()));return}app.ProtocolRequest.SignReq()}))}else if(t==i.QianDaoState.CAN_BUSIGN){tip.TipManager.show(this._tempData)}};e.SINGLE_KEY="fulicode.QianDaoCellItem";return e}(ui.qiandao.qiandaoitem1UI);i.QianDaoCellItem=t})(fulicode||(fulicode={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fulicode;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._netData=t;if(t.state==i.LinQuState.DONT_CAN_GET){this.gezi.mouseEnabled=true}else{this.gezi.mouseEnabled=false}this.labelnum.visible=false;if(t.state==i.LinQuState.CAN_GET){this.imglingqu.skin=""}else if(t.state==i.LinQuState.GETTED){this.imglingqu.skin="public/bg_s_yilingqu.png"}if(t.state==i.LinQuState.CAN_GET){this.tishiani.visible=true;this.tishiani.play()}else{this.tishiani.visible=false;this.tishiani.stop()}this.imglan.skin="res/static/qiandao/"+t.data.res+".png";this.imglingqu.visible=t.state==i.LinQuState.DONT_CAN_GET?false:true;this.labeltianshu.text="第"+t.id+"天";var e=game.ItemUtil.parserList(t.data.reward)[0];game.ItemShowUtil.showType3(e,this.gezi,false)};e.prototype.onClick=function(){var t=this.dataSource.state;if(t==i.LinQuState.CAN_GET){app.ProtocolRequest.SignDaysReq(this._netData.id)}else if(t==i.LinQuState.DONT_CAN_GET){}else if(t==i.LinQuState.GETTED){console.log("已经领取")}};e.SINGLE_KEY="fulicode.QianDaoTabItem";return e}(ui.qiandao.qiandaoitem2UI);i.QianDaoTabItem=t})(fulicode||(fulicode={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fulicode;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.xuanzelist.itemRender=i.QianDaoTabItem;this.xuanzelist.renderHandler=new Laya.Handler(this,this.onDailyTabHandler);this.gezilist.itemRender=i.QianDaoCellItem;this.gezilist.renderHandler=new Laya.Handler(this,this.onDailyCellHandler);this._model=i.QianDaoModel.getIns();this._model.cellList=this.gezilist;guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.QIANDAO,this,this.getGuideItem,300)};e.prototype.getGuideItem=function(t){this.gezilist.scrollTo(0);return this.gezilist.cells[0]};e.prototype.onDailyTabHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDailyCellHandler=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this._model.on(i.QianDaoEvent.QianDao_CHANGE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.off(i.QianDaoEvent.QianDao_CHANGE,this,this.refreshAll)};e.prototype.refreshAll=function(){this.setListConfig();this.jindutiao.value=this.setPrBarValue(this._model.signdays);this.cishu1.text=this._model.signdays+"";this.cishu2.text=this._model.supplesign+"";if(this.dataSource.length>0){this.setTabList(this.dataSource[0]);this.setCellList(this._dataSource[0])}else{this.setTabList();this.setCellList()}};e.prototype.setTabList=function(t){this.xuanzelist.array=this._model.getQianDaoTabArr()};e.prototype.setCellList=function(t){this.gezilist.array=this._model.getQianDaoCellArr();this._scrollToFun();if(i.QianDaoModel.getIns().cellSelectIndex&&i.QianDaoModel.getIns().cellSelectIndex>16){this.gezilist.scrollTo(i.QianDaoModel.getIns().cellSelectIndex?i.QianDaoModel.getIns().cellSelectIndex:0)}};e.prototype._scrollToFun=function(){var e=this;this.gezilist.array.map(function(t){if(t.state==i.QianDaoState.CAN_BUSIGN_SHOW||t.state==i.QianDaoState.CAN_SIGN){e.gezilist.scrollTo(t.id-1)}})};e.prototype.setListConfig=function(){this.gezilist.repeatY=4;this.gezilist.vScrollBarSkin=""};e.prototype.setPrBarValue=function(t){var e=0;if(t>=7){e+=.25}if(t>=14){e+=.25}if(t>=21){e+=.25}if(t>=28){e+=.25}return e};e.SINGLE_KEY="fulicode.QianDaoView";return e}(ui.qiandao.qiandaobgUI);i.QianDaoView=t})(fulicode||(fulicode={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fumo;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(a.FumoEarthView,"qiseshan.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.FUMO_EARTH,a.FumoEarthView)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.FmbkInfoNtf,this,this.onFmbkInfoNtf);this.addMsgListener(app.ProtocolResponse.FmbkSweepAck,this,this.onFmbkSweepAck)};e.prototype.onFmbkInfoNtf=function(t,e){a.FumoEarthModel.getIns().fumoId=e.fmbkId};e.prototype.onFmbkSweepAck=function(t,e){if(e.success){var i=a.FumoEarthModel.getIns().fumoId;var n=e.num;var r=game.ItemUtil.parserList(csv.FumoEarthProxy.getIns().getCfg(i).clear_item);for(var o=0;o<r.length;o++){r[o].setCount(r[o].count*n)}app.ViewManager.toggleDialog(boss.BossSweepView,1,0,[i,n,r,csv.DailyTimeProxy.ENUM_TYPE.FUMO])}};e.SINGLE_KEY="fumo.FumoEarthModule";return e}(app.ModuleBase);a.FumoEarthModule=t})(fumo||(fumo={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fumo;(function(t){var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t._fumoId=0;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){};Object.defineProperty(i.prototype,"fumoId",{get:function(){return this._fumoId},set:function(t){this._fumoId=t;this.event(i.ID_CHANGE)},enumerable:true,configurable:true});i.prototype.onUpdateRedDot=function(){var t=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.FUMO);if(t&&t.fnum+t.gnum>0){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.FUMO_EARTH)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.FUMO_EARTH)}};i.SINGLE_KEY="fumo.FumoEarthModel";i.ID_CHANGE="id_change";return i}(app.ModelBase);t.FumoEarthModel=e})(fumo||(fumo={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("fumobaoku_mountain.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.FumoEarthProxy";return e}(app.ModelBase);t.FumoEarthProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fumo;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnChallenge.on(Laya.Event.CLICK,this,this.onBattle);this.btnQuick.on(Laya.Event.CLICK,this,this.onSweepOnce);this.btnFast.on(Laya.Event.CLICK,this,this.onSweepTimes)};e.prototype.onBattle=function(){app.ProtocolRequest.FmbkChallengeReq()};e.prototype.onSweepOnce=function(){var t=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.FUMO);if(t&&t.fnum+t.gnum>0){app.ProtocolRequest.FmbkSweepReq(1)}else{var e=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.FUMO,vipcode.VipModel.getIns().vipLvl);var i=csv.DailyTimeProxy.getIns().buycost(csv.DailyTimeProxy.ENUM_TYPE.FUMO,t.bnum+1);var n=app.getLang("mountain_tips20",e-t.bnum,e);if(i){game.Alert.show(n+app.getLang("shanshen_tips6",i[0],i[1]),Laya.Handler.create(this,this.onBuy,[i[0],i[1]]),new Laya.Handler)}}};e.prototype.onBuy=function(t,e){if(game.GridsModel.getIns().getItemCount(t)>=e){if(boss.BossModel.getIns().onBuyTimesReq(csv.DailyTimeProxy.ENUM_TYPE.FUMO)){app.ProtocolRequest.FmbkSweepReq(1)}}else{shop.ShopModel.getIns().askChongZhi()}};e.prototype.onSweepTimes=function(){var t=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.FUMO);app.ProtocolRequest.FmbkSweepReq(t.fnum+t.gnum)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.txtNum.value=t.id.toString();this.dituxuanzhong.visible=false;if(game.Context.teamLv<t.teamlevel){this.setState("no-level");this.txtTips.text=app.getLang("fumobaoku_tips4",t.teamlevel)}else if(i.FumoEarthModel.getIns().fumoId<t.id-1){this.setState("no-level");this.txtTips.text=app.getLang("fumobaoku_tips11")}else if(i.FumoEarthModel.getIns().fumoId==t.id-1){this.dituxuanzhong.visible=true;this.setState("battle")}else if(i.FumoEarthModel.getIns().fumoId==t.id){var e=boss.BossModel.getIns().getDailyTime(csv.DailyTimeProxy.ENUM_TYPE.FUMO);if(e&&e.fnum+e.gnum>1){this.setState("sweep-times");this.btnFast.label=app.getLang("shandong_btn2",e.fnum+e.gnum)}else{this.setState("sweep-once")}}else{this.setState("complete")}this.txtLev.text=app.getLang("fumobaoku_tips3",t.reconmmend);this.grid0.setData(game.ItemUtil.parserList(t.award_item)[0]);this.grid1.setData(game.ItemUtil.parserList(t.clear_item)[0]);if(dailytask.FubenModel.getIns().checkIfNewId(csv.FunctionsProxy.ENUMS.FUMO_EARTH,t.id)){game.RedDotView.addTo(this,this.width-5,5,1,1,1)}else{game.RedDotView.removeFrom(this)}};e.prototype.setState=function(t){switch(t){case"no-level":this.txtTips.visible=true;this.btnChallenge.visible=false;this.btnFast.visible=false;this.btnQuick.visible=false;this.tongguanimg.visible=false;this.grid0.visible=this.grid1.visible=true;this.saodangbox.x=324;break;case"battle":this.txtTips.visible=false;this.btnChallenge.visible=true;this.btnFast.visible=false;this.btnQuick.visible=false;this.tongguanimg.visible=false;this.shoutongbox.visible=this.saodangbox.visible=true;this.saodangbox.x=324;break;case"sweep-once":this.txtTips.visible=false;this.btnChallenge.visible=false;this.btnFast.visible=false;this.btnQuick.y=62;this.btnQuick.visible=true;this.tongguanimg.visible=false;this.shoutongbox.visible=false;this.saodangbox.visible=true;this.saodangbox.x=260;break;case"sweep-times":this.txtTips.visible=false;this.btnChallenge.visible=false;this.btnFast.visible=true;this.btnQuick.y=29;this.btnQuick.visible=true;this.tongguanimg.visible=false;this.shoutongbox.visible=false;this.saodangbox.visible=true;this.saodangbox.x=260;break;case"complete":this.txtTips.visible=false;this.btnChallenge.visible=false;this.btnFast.visible=false;this.btnQuick.visible=false;this.tongguanimg.visible=true;this.shoutongbox.visible=false;this.saodangbox.visible=true;this.saodangbox.x=260;break}};e.SINGLE_KEY="fumo.FumoEarthItem";return e}(ui.fumozhidi.fumozhidiitemUI);i.FumoEarthItem=t})(fumo||(fumo={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var fumo;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.xiala.itemRender=r.FumoEarthItem;this.xiala.renderHandler=new Laya.Handler(this,this.onRender);this.jiahaobtn.on(Laya.Event.CLICK,this,this.onAddTime)};e.prototype.onAddTime=function(){app.ViewManager.toggleDialog(boss.BossBuyTimeTips,1,0,[csv.DailyTimeProxy.ENUM_TYPE.FUMO,"shandong_tips9","mountain_tips9"])};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){boss.BossModel.getIns().on(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){boss.BossModel.getIns().off(boss.BossEvent.BOSS_DAILY_TIME_CHANGE,this,this.setDailyTime)};e.prototype.refreshAll=function(){this.xiala.array=csv.FumoEarthProxy.getIns().cfgArr;var t=0;var e=r.FumoEarthModel.getIns().fumoId;if(this.dataSource[0]&&this.dataSource[0].length>0){e=parseInt(this.dataSource[0])-1}for(var i=0,n=this.xiala.array.length;i<n;i++){if(e==this.xiala.array[i].id){t=i;break}}this.xiala.scrollTo(t);this.setDailyTime()};e.prototype.setDailyTime=function(){var t=csv.DailyTimeProxy.ENUM_TYPE.FUMO;var e=boss.BossModel.getIns().getDailyTime(t);var i=csv.DailyTimeProxy.getIns().getCfg(t);this.cishu.text=e.fnum+e.gnum+"/"+i.time;this.xiala.refresh()};e.SINGLE_KEY="fumo.FumoEarthView";return e}(ui.fumozhidi.fumozhidiviewUI);r.FumoEarthView=t})(fumo||(fumo={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gaiming;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=n.GaiMingModel.getIns();game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GAI_MING,n.GaiMingView2,null,6)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.ChangeNameResp,this,this.onChangeNameResp);this.addMsgListener(app.ProtocolResponse.ChangeHuluNameAck,this,this.onChangeHuluNameAck);this.addMsgListener(app.ProtocolResponse.ChangeNameNoti,this,this.onChangeNameNoti);this.addMsgListener(app.ProtocolResponse.ChangeNameCDNtf,this,this.onChangeNameCDNtf)};e.prototype.onChangeNameResp=function(t,e){if(e.ret==1){var i=role.LeadingRoleView.getIns();i.updatePlayerName();app.ViewManager.toggleDialog(n.GaiMingView2,-1,0);manager.FlowManager.instance.flowByStyle1(app.getLang("改名成功"))}};e.prototype.onChangeHuluNameAck=function(t,e){this._model.event(n.GaiMingEvent.OTHER_NAME_CHANGE,e)};e.prototype.onChangeNameNoti=function(t,e){if(Uint64.equal(e.objId,game.Context.mainRole.insId)){game.Context.mainRole.playername=e.name;this._model.event(n.GaiMingEvent.MAIN_NAME_CHANGE,e)}};e.prototype.onChangeNameCDNtf=function(t,e){this._model.endCd=e.renamecd};e.SINGLE_KEY="gaiming.GaiMingModule";return e}(app.ModuleBase);n.GaiMingModule=t})(gaiming||(gaiming={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gaiming;(function(t){var e=function(){function t(){}t.MAIN_NAME_CHANGE="MAIN_NAME_CHANGE";t.OTHER_NAME_CHANGE="OTHER_NAME_CHANGE";return t}();t.GaiMingEvent=e;var i=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.endCd=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){};t.SINGLE_KEY="gaiming.GaiMingModel";return t}(app.ModelBase);t.GaiMingModel=i})(gaiming||(gaiming={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gaiming;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._selectIndex=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};t.prototype.onDisplay=function(){var t=app.str2Array(game.Config.getParams(1),";");this.quming.maxChars=+t[1];this.quxiaobtn.on(Laya.Event.CLICK,this,this.closeView);this.quedingbtn.on(Laya.Event.CLICK,this,this.checkChange);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.shurutishi.visible=false;this._selectIndex=this.dataSource[0];this._selectLang();this.quming.prompt=app.getLang("createrole_nameerror_3");this.quming.promptColor=game.STYLES.GRAY_COLOR_S;this.quming.text=""};t.prototype._selectLang=function(){if(this._selectIndex==0){this.shuoming.text=app.getLang("createrole_nameerror_2");this.labelmoney.visible=true;this.itemmoney.visible=true;var t=game.Config.getParams(913);this.itemmoney.parserIconByItemId(+t.split("-")[0]);this.labelmoney.text="1"}else{this.shuoming.text=app.getLang("createrole_nameerror_1");this.labelmoney.visible=false;this.itemmoney.visible=false}};t.prototype.onRandomHandler=function(){this.changeName()};t.prototype.changeName=function(){this.quming.text=csv.NameProxy.getIns().getRandomName()};t.prototype.checkChange=function(){if(this.quming.text==""){game.Alert.show(app.getLang("name_is_null"));return}this.closeView();if(this._selectIndex==0){var t=game.Config.getParams(1229);if(!game.GridsModel.getIns().hasEnoughItems(t,false,true,true)){return}game.Alert.show(app.getLang("您确定要把名字改成"+this.quming.text),new Laya.Handler(this,this._bigWaChangeName),new Laya.Handler(this,null))}else{}};t.prototype._bigWaChangeName=function(){app.ProtocolRequest.ChangeNameReq(this.quming.text)};t.prototype.onInputChange=function(){};t.prototype.closeView=function(){app.ViewManager.toggleDialog(t,-1,0)};t.SINGLE_KEY="gaiming.GaiMingMainView";return t}(ui.alert.gaiming1UI);t.GaiMingView=e})(gaiming||(gaiming={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gaiming;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.shaizi.clickHandler=Laya.Handler.create(this,this.onRandomHandler,null,false);this._model=i.GaiMingModel.getIns();this.quedingbtn.on(Laya.Event.CLICK,this,this.checkChange)};e.prototype.onDisplay=function(){var t=app.str2Array(game.Config.getParams(1),";");this.quming.maxChars=+t[1];this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.shurutishi.visible=false;this._selectLang();this.quming.prompt=app.getLang("createrole_nameerror_3");this.quming.promptColor=game.STYLES.GRAY_COLOR_S;this.quming.text="";Laya.timer.clearAll(this);this._updateCdBtn()};e.prototype._selectLang=function(){this.labelmoney.visible=true;this.itemmoney.visible=true;var t=game.Config.getParams(913);var e=game.Config.getParams(1282);this.itemmoney.parserIconByItemId(+t.split("-")[0]);this.daoju.parserIconByItemId(+e);this.labelmoney.text=t.split("-")[1]+""};e.prototype._updateCdBtn=function(){if(this._model.endCd!=0&&game.Context.getServerTime()<this._model.endCd){this.quedingbtn.mouseEnabled=false;this.quedingbtn.gray=true;this.quedingbtn.labelSize=20;this._updateCdTime();Laya.timer.loop(1e3,this,this._updateCdTime)}else{this.quedingbtn.label=app.getLang("确定");this.quedingbtn.labelSize=26;this.quedingbtn.mouseEnabled=true;this.quedingbtn.gray=false}};e.prototype._updateCdTime=function(){var t=this._model.endCd-game.Context.getServerTime();if(t>0){this.quedingbtn.label=util.TimeUtil.sec2Str(t)}else{this.quedingbtn.label=app.getLang("确定");this.quedingbtn.labelSize=26;this.quedingbtn.mouseEnabled=true;this.quedingbtn.gray=false;Laya.timer.clearAll(this)}};e.prototype.onRandomHandler=function(){this.changeName()};e.prototype.changeName=function(){this.quming.text=csv.NameProxy.getIns().getRandomName()};e.prototype.checkChange=function(){if(this.quming.text==""){game.Alert.show(app.getLang("name_is_null"));return}var t=game.Config.getParams(1282);if(game.GridsModel.getIns().hasEnoughItems(t+"-1",false,true,false)){game.Alert.show(app.getLang("rename_tips1",t,"1",this.quming.text),new Laya.Handler(this,this._bigWaChangeName),new Laya.Handler(this,null));return}else{var e=game.Config.getParams(913);var i=e.split("-");if(!game.GridsModel.getIns().hasEnoughItems(e,false,true,false)){return}game.Alert.show(app.getLang("rename_tips1",i[0],i[1],this.quming.text),new Laya.Handler(this,this._bigWaChangeName),new Laya.Handler(this,null))}};e.prototype._bigWaChangeName=function(){app.ProtocolRequest.ChangeNameReq(this.quming.text)};e.prototype.closeView=function(){app.ViewManager.toggleDialog(e,-1,0)};e.SINGLE_KEY="gaiming.GaiMingView2";return e}(ui.alert.gaiming2UI);i.GaiMingView2=t})(gaiming||(gaiming={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.GardenView,"lingzhiyuan3.atlas","effect/main/skill_UI_kuang2.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GARDEN_ENTER,i.GardenView,null,0);game.FuncDotAdapter.registRedFunc(csv.FunctionsProxy.ENUMS.GARDEN_ENTER,i.GardenModel.getIns(),i.GardenModel.getIns().updataGardenRed);game.GridsModel.getIns().on(game.GridsModel.EVENTS.ITEM_UPDATE,this,this.onSeedChange);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.ADD,this,this.onFuncOpen)};e.prototype.onFuncOpen=function(t){if(t.id==csv.FunctionsProxy.ENUMS.FARM){i.GardenModel.getIns().onFuncOpen=true;i.GardenModel.getIns().event(i.GardenModel.GARDEN_OPENED)}};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.Arboretum2Ntf,this,this.onArboretum2Ntf);this.addMsgListener(app.ProtocolResponse.Arboretum2PlantNtf,this,this.onArboretum2PlantNtf);this.addMsgListener(app.ProtocolResponse.Arboretum2PlantAck,this,this.onArboretum2PlantAck);this.addMsgListener(app.ProtocolResponse.Arboretum2WaterAck,this,this.onArboretum2WaterAck);this.addMsgListener(app.ProtocolResponse.Arboretum2FricendListAck,this,this.onArboretum2FricendListAck);this.addMsgListener(app.ProtocolResponse.Arboretum2FriendAck,this,this.onArboretum2FriendAck);this.addMsgListener(app.ProtocolResponse.Arboretum2GuardUpLvAck,this,this.onArboretum2GuardUpLvAck);this.addMsgListener(app.ProtocolResponse.Arboretum2StewardInfoNtf,this,this.onArboretum2StewardInfoNtf);this.addMsgListener(app.ProtocolResponse.Arboretum2StewardSetNtf,this,this.onArboretum2StewardSetNtf);this.addMsgListener(app.ProtocolResponse.Arboretum2RewardAck,this,this.onArboretum2RewardAck);this.addMsgListener(app.ProtocolResponse.Arboretum2SetPetAck,this,this.onArboretum2SetPetAck)};e.prototype.onArboretum2SetPetAck=function(t,e){if(e.success){i.GardenModel.getIns().setPetID(e.petID);i.GardenModel.getIns().event(i.GardenModel.GARDEN_PETS_CHANGE)}};e.prototype.onArboretum2RewardAck=function(t,e){if(e.rewardList.length>0){var i=game.ItemUtil.getAwardItem([],e.rewardList);app.ViewManager.toggleDialog(bag.AwardView,1,0,i);var n=0;for(var r=0;r<i.length;r++){n+=csv.GardenProxy.getIns().getExp(i[r].getItemId())}if(n>0){manager.FlowManager.instance.flowByStyle1(app.getLang("arboretum_des27",n))}}};e.prototype.onArboretum2StewardInfoNtf=function(t,e){i.GardenModel.getIns().stewardInfos=e.info};e.prototype.onArboretum2StewardSetNtf=function(t,e){if(e.success){}};e.prototype.onArboretum2GuardUpLvAck=function(t,e){if(e.success){i.GardenModel.getIns().event(i.GardenModel.GARDEN_GUARD_EXP_UPDATE)}};e.prototype.onArboretum2FriendAck=function(t,e){i.GardenModel.getIns().onFriendUpdate(e);i.GardenModel.getIns().event(i.GardenModel.GARDEN_PLAYER_CHANGE)};e.prototype.onArboretum2FricendListAck=function(t,e){i.GardenModel.getIns().friendlist=e.Mypet;i.GardenModel.getIns().event(i.GardenModel.GARDEN_FRIENDLIST)};e.prototype.onArboretum2WaterAck=function(t,e){if(e.success){i.GardenModel.getIns().event(i.GardenModel.GARDEN_WATER_SUCCESS,e.playerId)}};e.prototype.onArboretum2PlantAck=function(t,e){if(e.success){if(e.type==1){}i.GardenModel.getIns().event(i.GardenModel.GARDEN_ACT_SUCCESS,[e.type,e.spaceIndex])}};e.prototype.onArboretum2PlantNtf=function(t,e){i.GardenModel.getIns().plants=e.info;i.GardenModel.getIns().updataGardenRed();i.GardenModel.getIns().event(i.GardenModel.GARDEN_PLANTINFO_UPDATE)};e.prototype.onArboretum2Ntf=function(t,e){i.GardenModel.getIns().onArboretumUpdate(e.info[0]);i.GardenModel.getIns().updataGardenRed();i.GardenModel.getIns().event(i.GardenModel.GARDEN_SPACE_UPDATE)};e.prototype.onSeedChange=function(t,e){if(e&&csv.ItemProxy.SUB_TYPES.SEED==csv.ItemProxy.getSubType(e)){i.GardenModel.getIns().event(i.GardenModel.GARDEN_SEEDCOUNT_CHANGE)}};e.SINGLE_KEY="garden.GardenModule";return e}(app.ModuleBase);i.GardenModule=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(t){var e=t[0];this.space=e;var i=t[1];var n=t[2];this.items=[];var r;for(var o=0;o<5;o++){this.items[o]=[];var a=4*(o+1);for(var s=0;s<4;s++){r=new l(a,e["item"+a],i["item"+a],n["item"+a]);a--;this.items[o].push(r)}}e.on(Laya.Event.CLICK,this,this.onSpaceClick);t[1].mouseEnabled=false;t[2].mouseEnabled=false};e.prototype.c2sUnLock=function(){if(this.selectedItem){var t=s.GardenModel.getIns().unlockedSpace.length;var e=csv.GardenProxy.getIns().getUnlockVO(t+1);if(e&&game.GridsModel.getIns().hasEnoughItems(e)){app.ProtocolRequest.Arboretum2PlantReq(1,this.selectedItem.spaceID,[])}}};e.prototype.c2sPlant=function(t,e){if(this.selectedItem){var i=new ItemData;i.itemID=t;i.value=e;app.ProtocolRequest.Arboretum2PlantReq(2,this.selectedItem.spaceID,[i])}};e.prototype.c2sWater=function(){app.ProtocolRequest.Arboretum2WaterReq(Uint64.ZERO)};e.prototype.c2sGetPlant=function(){if(this.selectedItem){var t=s.GardenModel.getIns().getEndTime(this.selectedItem.data.spaceIndex,0);var e=t-game.Context.getServerTime();if(e>0){manager.FlowManager.instance.flowByStyle1(app.getLang("该灵植尚未成熟，不可进行收获"))}else{t=s.GardenModel.getIns().getEndTime(this.selectedItem.data.spaceIndex);e=t-game.Context.getServerTime();if(e>0){game.Alert.show(app.getLang("灵植尚未完全成熟，是否确认收获？"),Laya.Handler.create(this,this.onGetPlant),new Laya.Handler)}else{this.onGetPlant()}}}};e.prototype.onGetPlant=function(){app.ProtocolRequest.Arboretum2PlantReq(3,this.selectedItem.spaceID,[])};e.prototype.c2sDel=function(){if(this.selectedItem){game.Alert.show(app.getLang("是否确认铲除该灵植植株？"),Laya.Handler.create(this,this.onDelCallBack),new Laya.Handler)}};e.prototype.onDelCallBack=function(){app.ProtocolRequest.Arboretum2PlantReq(4,this.selectedItem.spaceID,[])};e.prototype.c2sShifei=function(t){if(this.selectedItem){app.ProtocolRequest.Arboretum2PlantReq(5,this.selectedItem.spaceID,t)}};e.prototype.onSuccessShifei=function(t){if(this.selectedItem){this.selectedItem.playAni();if(t.length>0){manager.FlowManager.instance.flowByStyle1(t)}}};e.prototype.autoClick=function(){var t;for(var e=0;e<this.items.length;e++){for(var i=this.items[e].length-1;i>=0;i--){var n=this.items[e][i];if(s.GardenModel.getIns().unlockedSpace.indexOf(n.spaceID)>=0){if(!n.data||n.data.seedId==0){t=n;break}}}if(t){if(this.selectedItem){this.selectedItem.setSelected(false)}t.onSpaceClickHanlder();this.selectedItem=t;break}}};e.prototype.onSpaceClick=function(t){if(s.GardenModel.getIns().canClick()){var e=242;var i=this.space.globalToLocal(new Laya.Point(t.stageX,t.stageY));var n=i.y-e;var r=Math.floor(i.x/184-n/92);var o=Math.floor(i.x/184+n/92);if(this.items[r]){var a=this.items[r][o];if(a){if(this.selectedItem){this.selectedItem.setSelected(false)}a.onSpaceClickHanlder();this.selectedItem=a}}}};e.prototype.refreshAll=function(t){if(t){this.cleanSpace()}for(var e=0;e<5;e++){for(var i=0;i<4;i++){this.items[e][i].updataView()}}};e.prototype.cleanSpace=function(){for(var t=0;t<5;t++){for(var e=0;e<4;e++){this.items[t][e].setSelected(false)}}this.selectedItem=null};e.prototype.cleanCoolDown=function(){for(var t=0;t<5;t++){for(var e=0;e<4;e++){this.items[t][e].cleanCoolDown()}}};return e}(app.ModelBase);s.EarthController=t;var l=function(){function t(t,e,i,n){this.spaceID=t;this.itemSpace=e;this.itemSpace.shifeichenggong.on(Laya.Event.COMPLETE,this,this.stopAni);this.itemSpace.shifeichenggong.stop();this.itemSpace.shifeichenggong.visible=false;this.itemSpace.ani1.gotoAndStop(0);this.itemPlant=i;this.itemTime=n;this.setSelected(false);this.updataView()}t.prototype.playAni=function(){this.itemSpace.shifeichenggong.play(0,false);this.itemSpace.shifeichenggong.visible=true};t.prototype.stopAni=function(){this.itemSpace.shifeichenggong.stop();this.itemSpace.shifeichenggong.visible=false};t.prototype.updataView=function(){this.data=s.GardenModel.getIns().getSpaceInfoByID(this.spaceID);this._isLocked=s.GardenModel.getIns().isLocked(this.spaceID);this.itemTime.visible=false;this.itemPlant.visible=false;this.itemTime.labeldaojishi.text="";var t=this.itemSpace.imgxuanzhong.visible;if(!this._isLocked){this.itemSpace.ani1.gotoAndStop(1);if(this.data){var e=s.GardenModel.getIns().getNextState(this.data.spaceIndex);if(this.data.seedId>0){if(this.data.plantTime>0){this.itemTime.visible=true}if(e.curIndex>=0){this.itemPlant.imgzhongzi.skin="res/icon/garden/"+e.ele.state1+".png";this.itemTime.labeldaojishi.color=game.STYLES.ITEM_QUALITY[e.qua]}else{this.itemPlant.imgzhongzi.skin="res/icon/garden/"+e.ele.state1+".png";this.itemTime.labeldaojishi.color=game.STYLES.ITEM_QUALITY[1]}var i=s.GardenModel.getIns().getEndTime(this.spaceID)-game.Context.getServerTime();if(i>0){this.itemTime.labeldaojishi.text=util.TimeUtil.sec2Str(i,false,4,false,true);Laya.timer.loop(1e3,this,this.coolDown)}else{this.curState=e.curIndex;this.itemPlant.imgzhongzi.skin="res/icon/garden/"+e.ele.state2+".png";this.itemTime.labeldaojishi.text=app.getLang("arboretum_des9")}this.itemPlant.visible=true}}}else{this.itemSpace.ani1.gotoAndStop(0)}this.itemSpace.imgxuanzhong.visible=t};t.prototype.onSpaceClickHanlder=function(){this.setSelected(true);if(this._isLocked){var t=s.GardenModel.getIns().unlockedSpace.length;var e=csv.GardenProxy.getIns().getUnlocklv(t+1);if(s.GardenModel.getIns().guardLv>=e){app.ViewManager.toggleDialog(s.UnLockTips,1,0,[this.spaceID]);s.GardenView.getIns().hideSeedList()}else{manager.FlowManager.instance.flowByStyle1(app.getLang("请先提升守护灵等级至"+e))}}else if(this.data&&this.data.plantTime>0){var i=[tip.TipManager.TIP_BTN_TYPE.GARDEN_58,tip.TipManager.TIP_BTN_TYPE.GARDEN_57,tip.TipManager.TIP_BTN_TYPE.GARDEN_56];var n=game.ItemUtil.createVO(this.data.seedId);app.ViewManager.toggleDialog(tip.TipSixBoxMediator,1,0,[tip.TipsPlantView,this.data,i,new Laya.Handler(this,this.selectHandler)]);s.GardenView.getIns().hideSeedList()}else{s.GardenView.getIns().showSeedList()}};t.prototype.selectHandler=function(t){if(t==tip.TipManager.TIP_BTN_TYPE.GARDEN_56){s.GardenView.getIns().earth.c2sDel()}else if(t==tip.TipManager.TIP_BTN_TYPE.GARDEN_57){if(this.data){app.ViewManager.toggleDialog(s.PlantShifeiView,1,0,[this.data])}}else if(t==tip.TipManager.TIP_BTN_TYPE.GARDEN_58){s.GardenView.getIns().earth.c2sGetPlant()}};t.prototype.setSelected=function(t){this.itemSpace.imgxuanzhong.visible=t};t.prototype.coolDown=function(){if(!this.data){this.cleanCoolDown();return}var t=s.GardenModel.getIns().getNextState(this.data.spaceIndex);var e=s.GardenModel.getIns().getEndTime(this.spaceID)-game.Context.getServerTime();if(this.data.seedId>0){if(e>=0){if(t.curIndex!=this.curState){this.curState=t.curIndex;this.itemPlant.imgzhongzi.skin="res/icon/garden/"+t.ele.state1+".png";this.itemTime.labeldaojishi.color=game.STYLES.ITEM_QUALITY[t.qua]}this.itemTime.labeldaojishi.text=util.TimeUtil.sec2Str(e,false,4,false,true)}else{this.itemTime.labeldaojishi.text=app.getLang("arboretum_des9");this.curState=t.curIndex;this.itemPlant.imgzhongzi.skin="res/icon/garden/"+t.ele.state2+".png";this.cleanCoolDown()}}else{this.cleanCoolDown()}};t.prototype.cleanCoolDown=function(){this.curState=null;Laya.timer.clear(this,this.coolDown)};return t}();s.EarthItem=l})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(o){var i=function(){function t(){}return t}();o.FriendData=i;var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.reddotFriendChecked=false;return t}Object.defineProperty(t.prototype,"onFuncOpen",{get:function(){return this._onFuncOpen},set:function(t){this._onFuncOpen=t;if(t){Laya.LocalStorage.setItem(game.AccountModel.accountId+"_onFuncOpen","1")}else{Laya.LocalStorage.setItem(game.AccountModel.accountId+"_onFuncOpen","0")}},enumerable:true,configurable:true});t.prototype.checkIsHusheng=function(t){for(var e=0;e<this.pets.length;e++){if(Uint64.equal(t,this.pets[e])){return true}}return false};t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this._onFuncOpen=Laya.LocalStorage.getItem(game.AccountModel.accountId+"_onFuncOpen")=="1"?true:false;this.friendData=new i;this.helpLimit=game.Config.getIntParams(1120);this.waterCount=0;this.guardExp=0;this.guardLv=1;this.playerId=Uint64.ZERO;this.plants=[];this.friendlist=[];this.unlockedSpace=[];this.helpCount=0;this.helpedCount=0;this.plants=this.initplantInfo();this.friendData.plantList=this.initplantInfo();this.stewardInfos=[];this.pets=[]};t.prototype.getGuardBuffDesc=function(t,e){if(e===void 0){e=0}var i="";var n=csv.GardenProxy.getIns().getEarthNum(t);var r=csv.GardenProxy.getIns().getPetSpaceNum(t);var o=[n,r];var a=game.STYLES.DESC_TXT_COLOR_S;var s=[];if(e>0){s=[csv.GardenProxy.getIns().getEarthNum(e),csv.GardenProxy.getIns().getPetSpaceNum(e)]}for(var l=0;l<2;l++){if(s.length>0){if(o[l]-s[l]>0){a=game.STYLES.GREEN_COLOR_S}else{a=game.STYLES.DESC_TXT_COLOR_S}}i+=app.getLang("arboretum_levelup"+(l+1),a,o[l])}return i};t.prototype.c2sSetPetReq=function(t,e){app.ProtocolRequest.Arboretum2SetPetReq(t,e)};t.prototype.setPetID=function(t){this.pets=t};t.prototype.inGuarding=function(t){var e=false;for(var i=0,n=this.pets;i<n.length;i++){var r=n[i];if(Uint64.equal(t,r)){e=true;break}}return e};t.prototype.getGrowTime=function(t,e,i){if(e===void 0){e=-1}if(i===void 0){i=true}return this.getEndTime(t,e,i)-this.getStartTime(t)};t.prototype.getCoolTime=function(){var t=0;var e=0;for(var i=0;i<this.plants.length;i++){if(this.plants[i].seedId>0){var n=this.getEndTime(this.plants[i].spaceIndex);if(n-game.Context.getServerTime()<=0){t=1;e=this.getGrowTime(this.plants[i].spaceIndex);break}if(t==0||n>0&&n<t){t=n;e=this.getGrowTime(this.plants[i].spaceIndex)}}}return{t:t,total:e}};t.prototype.isNull=function(t){var e=true;var i=this.plants;if(!Uint64.equal(Uint64.ZERO,this.playerId)){i=this.friendData.plantList}for(var n=0;n<i.length;n++){if(i[n].seedId>0){e=false;break}}if(e){if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("arboretum_des19"))}}else{e=true;for(var n=0;n<i.length;n++){if(i[n].seedId>0){var r=this.getEndTime(i[n].spaceIndex)-game.Context.getServerTime();if(r>0){e=false;break}}}if(e){if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("arboretum_des18"))}}}return e};t.prototype.getStewardInfos=function(){return this.stewardInfos};t.prototype.getStewardInfo=function(t){var e;for(var i=0;i<this.stewardInfos.length;i++){if(this.stewardInfos[i].seedId==t){e=this.stewardInfos[i];break}}return e};t.prototype.initplantInfo=function(){var t=[];var e;for(var i=0;i<20;i++){e=new Arboretum2PlantInfo;e.spaceIndex=i+1;e.seedId=0;e.fertilizerAddTime=0;e.OtherAddTime=0;e.guardAddTime=0;t.push(e)}return t};t.prototype.isLocked=function(t){var e=true;if(this.isSelf()){if(!o.GardenModel.getIns().onFuncOpen&&csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FARM)){var i=csv.GardenProxy.getIns().getUnlockVO(t);e=i&&this.unlockedSpace.indexOf(t)==-1}else{e=true}}else{e=this.friendData.unlockedSpace.indexOf(t)==-1}return e};t.prototype.onArboretumUpdate=function(t){this.playerId=Uint64.ZERO;this.unlockedSpace=t.unlockedSpace;this.helpCount=t.helpCount;this.helpedCount=t.helpedCount;this.waterCount=t.waterCount;this.guardLv=t.guardLv;this.guardExp=t.GuardExp;this.pets=t.petID};t.prototype.onFriendUpdate=function(t){this.resetFriendData();this.playerId=t.objPlayer;this.friendData.objPlayer=t.objPlayer;this.friendData.playerClass=t.playerClass;this.friendData.playerName=t.playerName;this.friendData.canHelpCount=t.canHelpCount;this.friendData.unlockedSpace=t.unlockedSpace;this.friendData.lv=t.lv;this.friendData.exp=t.exp;this.friendData.battleScore=t.battleScore;this.friendData.headframeId=t.headframeId;for(var e=0;e<t.plantList.length;e++){this.updateplantInfo(t.plantList[e])}};t.prototype.updateplantInfo=function(t){for(var e=0;e<this.friendData.plantList.length;e++){if(t.spaceIndex==this.friendData.plantList[e].spaceIndex){this.friendData.plantList[e]=t;break}}};t.prototype.resetFriendData=function(){var t;for(var e=0;e<20;e++){t=this.friendData.plantList[e];t.seedId=0;t.fertilizerAddTime=0;t.OtherAddTime=0;t.guardAddTime=0}};t.prototype.isSelf=function(){return Uint64.equal(Uint64.ZERO,this.playerId)};t.prototype.canClick=function(){return this.isSelf()&&csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FARM,true)&&!o.GardenModel.getIns().onFuncOpen};t.prototype.getSpaceInfoByID=function(t){var e;var i;if(this.isSelf()){i=this.plants}else{i=this.friendData.plantList}for(var n=0;n<i.length;n++){if(i[n].spaceIndex==t){e=i[n];break}}return e};t.prototype.getStartTime=function(t){var e=this.getSpaceInfoByID(t);return e.plantTime};t.prototype.getEndTime=function(t,e,i){if(e===void 0){e=-1}if(i===void 0){i=true}var n=this.getSpaceInfoByID(t);var r=0;if(n.seedId>0){var o=csv.GardenProxy.getIns().getSeedList(n.seedId);if(e==-1){e=o.length-1}var a=e+1;for(var s=0;s<a;s++){if(o[s]){r+=o[s].growtime}}}var l=n.fertilizerAddTime+n.OtherAddTime+n.guardAddTime;var u=n.plantTime+r;if(i){u-=l}return u};t.prototype.getNextState=function(t,e){if(e===void 0){e=0}var i=this.getSpaceInfoByID(t);var n=csv.GardenProxy.getIns().getSeedList(i.seedId);var r=n.length;for(var o=0;o<n.length;o++){var a=this.getEndTime(t,o)-e;if(a-game.Context.getServerTime()>0){r=o;break}}var s=r-1;var l=n[s]?n[s].type:1;var u=n[r]?n[r]:n[n.length-1];return{curIndex:s,ele:u,cur:n[s],qua:l}};t.prototype.updataGardenRed=function(){var t=false;game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GARDEN_ENTER);game.ClosureManager.removeXin(csv.FunctionsProxy.ENUMS.GARDEN_ENTER,game.RedDotView.ENUM_TYPE.SHOU);game.ClosureManager.removeXin(csv.FunctionsProxy.ENUMS.GARDEN_ENTER,game.RedDotView.ENUM_TYPE.KONG);var e=csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.FARM);if(e){t=this.reddotPlant();if(!t){t=this.reddotWaterTime();if(!t){t=this.reddotGuard()}if(!t){t=this.reddotFriend()}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GARDEN_ENTER)}}}};t.prototype.reddotFriend=function(){return this.helpCount==0&&!this.reddotFriendChecked};t.prototype.reddotGuard=function(){var t=false;if(this.isSelf()){var e=o.GardenModel.getIns().guardLv;var i=csv.GardenProxy.getIns().getPatronCfg(e);if(i.upexp>0&&o.GardenModel.getIns().guardExp>=i.upexp){if(i.costitem&&i.costitem.length>0){if(game.GridsModel.getIns().hasEnoughItems(i.costitem)){t=true}}else{t=true}}}return t};t.prototype.reddotWaterTime=function(){return this.waterCount==0};t.prototype.reddotPlant=function(){var t=false;for(var e=0;e<this.plants.length;e++){var i=o.GardenModel.getIns().getEndTime(this.plants[e].spaceIndex);var n=i-game.Context.getServerTime();if(n<=0){t=true;game.ClosureManager.addXin(csv.FunctionsProxy.ENUMS.GARDEN_ENTER,game.RedDotView.ENUM_TYPE.SHOU);break}}if(!t){for(var e=0;e<this.unlockedSpace.length;e++){var r=o.GardenModel.getIns().getSpaceInfoByID(this.unlockedSpace[e]);if(!r||r.seedId==0){t=true;game.ClosureManager.addXin(csv.FunctionsProxy.ENUMS.GARDEN_ENTER,game.RedDotView.ENUM_TYPE.KONG)}}}return t};t.SINGLE_KEY="garden.GardenModel";t.GARDEN_SPACE_UPDATE="gardenArboretum2PlantSpaceUpdate";t.GARDEN_PLANTINFO_UPDATE="gardenArboretum2PlantInfoUpdate";t.GARDEN_GUARD_EXP_UPDATE="gardenArboretum2GuardExpUpdate";t.GARDEN_WATER_SUCCESS="gardenArboretum2ShifeiSuccess";t.GARDEN_FRIENDLIST="gardenArboretum2Fridends";t.GARDEN_PLAYER_CHANGE="gardenArboretum2PlayerChange";t.GARDEN_ACT_SUCCESS="gardenArboretum2ActSuccess";t.GARDEN_SEEDCOUNT_CHANGE="gardenArboretum2SeedChange";t.GARDEN_OPENED="gardenFuncOpen";t.GARDEN_PETS_CHANGE="gardenArboretum2SetPetAck";return t}(app.ModelBase);o.GardenModel=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("garden.csv");this.cfgMap=t.getMap("id");this.spaceMap=app.Config.getResById("arboretum_space.csv").getMap("id");this.spaceArray=app.Config.getResById("arboretum_space.csv").getMapList("lv");this.growMap=app.Config.getResById("arboretum_grow.csv").getMapList("seedid");this._allGrows=app.Config.getResById("arboretum_grow.csv").getArray();t=app.Config.getResById("arboretum_patron.csv");this.patronMap=t.getMap("lv");this._maxLevel=Object.keys(this.patronMap).length;this.waterMap=app.Config.getResById("arboretum_water.csv").getMap("id");this.helpMap=app.Config.getResById("arboretum_help.csv").getMap("id");this.petPositionMap=app.Config.getResById("arboretum_newpetspace.csv").getArray();this.wuXingMap=app.Config.getResById("arboretum_wuxing.csv").getMapList("wuxingtype");this.limitMap=app.Config.getResById("arboretum_limit.csv").getMap("seedid")};e.prototype.getEarthNum=function(t){var e=Object.keys(this.spaceArray);var i=0;for(var n=0;n<e.length;n++){if(t<parseInt(e[n])){break}i+=this.spaceArray[e[n]].length}return i};e.prototype.getPetSpaceNum=function(t){var e=this.getUnLockArray();var i=0;for(var n=e.length-1;n>=0;n--){if(t>=e[n].lv){i=e[n].id;break}}return i};e.prototype.getWuXingCfgByType=function(t,e){var i=this.wuXingMap[t];var n="";if(i&&i.length>0){for(var r=i.length-1;r>=0;r--){if(e>=i[r].wuxingvalue){n=i[r].guardtype;break}}}return n};e.prototype.getUnLockArray=function(){return this.petPositionMap};e.prototype.getHelpCfg=function(t){if(t===void 0){t=1}var e=game.ItemUtil.parserList(this.helpMap[t].preview);return e};e.prototype.getWaterCfg=function(t){var e=this.getTotalTime();if(t>e){t=e}return this.waterMap[t]};e.prototype.getPatronCfg=function(t){return this.patronMap[t]};e.prototype.getTotalTime=function(){return csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.GARDEN_WATER_TIME,vipcode.VipModel.getIns().vipLvl)};e.prototype.getSeedList=function(t){return this.growMap[t]?this.growMap[t]:[]};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getUnlocklv=function(t){return this.spaceMap[t].lv};e.prototype.getUnlockVO=function(t){var e=this.spaceMap[t].unlockitem;var i;if(e&&e.length>0){i=game.ItemUtil.parserList(e)[0]}return i};e.prototype.getPlantDesc=function(t){return t?app.getLang("arboretum_"+t.plantdesc):""};e.prototype.getExp=function(t){var e=0;for(var i=0;i<this._allGrows.length;i++){var n=parseInt(app.str2Array(this._allGrows[i].item,"-")[0]);if(t==n){var r=this._allGrows[i].seedid;if(this.limitMap[r]&&garden.GardenModel.getIns().guardLv>=this.limitMap[r]){continue}e=this._allGrows[i].harvestexp;break}}return e};e.SINGLE_KEY="csv.GardenProxy";return e}(app.ModelBase);t.GardenProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(t){this._roleInfoView=t[0];this._moneyView=t[1];this._moneyView.imgmoneyicon01.on(Laya.Event.CLICK,this,this.onTipShow,[game.MoneyModel.MONEY_ENUM.SILVER]);this._moneyView.labelmoneynum01.on(Laya.Event.CLICK,this,this.onTipShow,[game.MoneyModel.MONEY_ENUM.SILVER]);this._moneyView.imgmoneyicon02.on(Laya.Event.CLICK,this,this.onTipShow,[game.MoneyModel.MONEY_ENUM.GOLD]);this._moneyView.labelmoneynum02.on(Laya.Event.CLICK,this,this.onTipShow,[game.MoneyModel.MONEY_ENUM.GOLD]);this._roleInfoView.boxVip.visible=false;this._roleInfoView.btnzengyi.visible=false;this._roleInfoView.animationvip.visible=false;this._roleInfoView.animationvip.stop();this._roleInfoView.animationfly.visible=false;this._roleInfoView.animationfly.stop()};e.prototype.onTipShow=function(t){var e;if(game.MoneyModel.MONEY_ENUM.GOLD==t){shop.ShopModel.getIns().openChongZhiShop()}else if(game.MoneyModel.MONEY_ENUM.SILVER==t){e=game.ItemUtil.createVO(8e3)}if(e){tip.TipManager.show(e,true)}};e.prototype.refreshAll=function(){this.onUpdateMoney();this.onUpdateRole()};e.prototype.onUpdateMoney=function(){if(i.GardenModel.getIns().isSelf()){this._moneyView.labelmoneynum01.text=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.SILVER));this._moneyView.labelmoneynum02.text=game.MoneyModel.format(game.MoneyModel.getIns().getMoney(game.MoneyModel.MONEY_ENUM.GOLD));this._moneyView.visible=true}else{this._moneyView.visible=false}};e.prototype.onUpdateRole=function(){if(i.GardenModel.getIns().isSelf()){this._roleInfoView.labelnumlv.text=game.Context.teamLv.toString();var t=csv.MyTeamProxy.getIns().getTeamMaxExp(game.Context.teamLv);this._roleInfoView.barhp.value=game.Context.teamExp/t;this._roleInfoView.shuzhi.text=Math.floor(this._roleInfoView.barhp.value*100)+"%";this._roleInfoView.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(game.Context.teamAvatar);this._roleInfoView.imgframe.skin=game.RoleModel.getIns().getHeadFrameIcon();this._roleInfoView.labelname.text=game.Context.clearPlayerName(game.Context.mainRole.playername);this._roleInfoView.clipzhandouli.value=game.Context.score.toString()}else{var e=i.GardenModel.getIns().friendData;if(e){this._roleInfoView.labelnumlv.text=e.lv.toString();var t=csv.MyTeamProxy.getIns().getTeamMaxExp(e.lv);this._roleInfoView.barhp.value=e.exp.toNumber()/t;this._roleInfoView.shuzhi.text=Math.floor(this._roleInfoView.barhp.value*100)+"%";this._roleInfoView.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(e.playerClass);this._roleInfoView.imgframe.skin=e.headframeId>0?csv.HeadFrameProxy.getIns().getIcon(e.headframeId):"";this._roleInfoView.labelname.text=game.Context.clearPlayerName(e.playerName);this._roleInfoView.clipzhandouli.value=e.battleScore.toString10()}}};e.SINGLE_KEY="garden.GardenRoleInfo";return e}(app.ModelBase);i.GardenRoleInfo=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist.vScrollBarSkin=" ";this.daojulist.scrollBar.elasticBackTime=600;this.daojulist.scrollBar.elasticDistance=200;this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.centerLayout=new game.CenterLayoutMediator(this.daojulist,this,98,10)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.centerLayout.array=csv.GardenProxy.getIns().getHelpCfg()};e.SINGLE_KEY="garden.GardenAwardView";return e}(ui.lingzhiyuan3.jiangliyulanUI);t.GardenAwardView=e})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){this.btnbaifang.clickHandler=new Laya.Handler(this,this.onClickHandler)};e.prototype.onClickHandler=function(){n.getIns().onChangeGarden(this._data.playerId)};e.prototype.setData=function(t,e,i){this._data=t;this.xuanzhong.visible=e;this.wenben.text=t.playername;this.touxiang.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(t.classSkin);this.jiaoshui.visible=t.canHelpCount>0;this.labelmiaoshu.text=app.getLang("arboretum_des30",game.Config.getIntParams(1133)/60);this.touxiang.labeldengji.text=t.lv+"";this.touxiang.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(t.headframeId);if(i){this.btnbaifang.label=app.getLang("arboretum_des3");if(t.logoutTime>0){this.touxiang.imgtouxiang.gray=true;this.labelmiaoshu.text=util.TimeUtil.getOfflineDay(t.logoutTime)}else{this.touxiang.imgtouxiang.gray=false;this.labelmiaoshu.text=app.getLang("online_5")}}else{this.btnbaifang.label=app.getLang("arboretum_des11");this.labelmiaoshu.text=app.getLang("arboretum_des30",game.Config.getIntParams(1133)/60)}};return e}(ui.lingzhiyuan3.haoyouliebiaoitemUI);i.GardenHaoYouItem=t;var n=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._boLink=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.tabBtn.on(Laya.Event.CHANGE,this,this.onShow);this.listhaoyou.vScrollBarSkin=" ";this.listhaoyou.scrollBar.elasticBackTime=600;this.listhaoyou.scrollBar.elasticDistance=200;this.listhaoyou.itemRender=i.GardenHaoYouItem;this.listhaoyou.renderHandler=new Laya.Handler(this,this.onItemRender);this.labelmiaoshu1.text=app.getLang("仅记录最近进行照料的{0}位访客",game.Config.getIntParams(1137));this.btnjiangli.clickHandler=new Laya.Handler(this,this.onShowView);this.tabBtn.selectedIndex==1;this.labellianjie.text=app.getLang("arboretum_des31");this.labellianjie.on(Laya.Event.CLICK,this,this.onClick);this.labellianjie.on(Laya.Event.LINK,this,this.onHandler);this.updateView()};t.prototype.onClick=function(t){if(this._boLink){t.stopPropagation();this._boLink=false}};t.prototype.onHandler=function(t){this._boLink=true;chat.ChatStatic.dellLink(t)};t.prototype.onShowView=function(){app.ViewManager.toggleDialog(i.GardenAwardView,1,0)};t.prototype.onShow=function(){if(this.tabBtn.selectedIndex==0){this.showHaoyou()}else{this.showGuset()}};t.prototype.onItemRender=function(t,e){var i=this.tabBtn.selectedIndex==0;t.setData(t.dataSource,this.listhaoyou.selectedIndex==e,i)};t.prototype.onChangeGarden=function(t){app.ProtocolRequest.Arboretum2FriendReq(t)};t.prototype.onDisplay=function(){i.GardenModel.getIns().on(i.GardenModel.GARDEN_FRIENDLIST,this,this.updateView);i.GardenModel.getIns().on(i.GardenModel.GARDEN_PLAYER_CHANGE,this,this.onChange);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){i.GardenModel.getIns().off(i.GardenModel.GARDEN_FRIENDLIST,this,this.updateView);i.GardenModel.getIns().off(i.GardenModel.GARDEN_PLAYER_CHANGE,this,this.onChange);this.tabBtn.selectedIndex=1};t.prototype.refreshAll=function(){this.tabBtn.selectedIndex=0;this.labelmiaoshu.text=app.getLang("今日可获得照料奖励次数：{0}/{1}",i.GardenModel.getIns().helpLimit-i.GardenModel.getIns().helpCount,i.GardenModel.getIns().helpLimit)};t.prototype.onChange=function(){app.ViewManager.toggleView(main.ModuleLoadView,app.AppContainer.zhezhaoLayer,1);this.close()};t.prototype.updateView=function(){var t=i.GardenModel.getIns().friendlist;if(t&&t.length>0){this.imgtishi1.visible=false;this.imgtishi2.visible=false}else{if(this.tabBtn.selectedIndex==0){this.imgtishi1.visible=true}else{this.imgtishi1.visible=false}this.imgtishi2.visible=!this.imgtishi1.visible}this.labellianjie.visible=this.imgtishi1.visible;this.listhaoyou.array=t;this.labelmiaoshu1.visible=this.tabBtn.selectedIndex==1;this.imgtishi.visible=this.tabBtn.selectedIndex==1;this.btnjiangli.visible=this.tabBtn.selectedIndex==0;this.labelmiaoshu.visible=this.tabBtn.selectedIndex==0};t.prototype.showGuset=function(){app.ProtocolRequest.Arboretum2FriendListReq(2)};t.prototype.showHaoyou=function(){app.ProtocolRequest.Arboretum2FriendListReq(1)};t.SINGLE_KEY="garden.GardenHaoYouView";return t}(ui.lingzhiyuan3.haoyouliebiaoUI);i.GardenHaoYouView=n})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onClick);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.LIZHI_WATER_COMFIRM,this.quedingbtn,null,300)};e.prototype.onClick=function(){var t=csv.GardenProxy.getIns().getWaterCfg(a.GardenModel.getIns().waterCount+1);if(a.GardenModel.getIns().isNull(true)){}else if(t&&game.GridsModel.getIns().hasEnoughItems(t.param1,false,true)){app.SoundManager.getIns().playSound("watering");a.GardenView.getIns().earth.c2sWater()}};e.prototype.onDisplay=function(){a.GardenModel.getIns().on(a.GardenModel.GARDEN_WATER_SUCCESS,this,this.onSuccess);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){a.GardenModel.getIns().off(a.GardenModel.GARDEN_WATER_SUCCESS,this,this.onSuccess);if(this.icons){for(var t=0,e=this.icons.length;t<e;t++){this.icons[t].removeSelf();this.icons[t].off(Laya.Event.CLICK,game.Alert,game.Alert.onShowTips)}this.icons=null}};e.prototype.onSuccess=function(t){if(Uint64.equal(t,Uint64.ZERO)){manager.FlowManager.instance.flowByStyle1(app.getLang("arboretum_des10",util.TimeUtil.formatTime(this.param)));a.GardenView.getIns().playAni(false);this.close()}};e.prototype.refreshAll=function(){var t=a.GardenModel.getIns().waterCount+1;var e=csv.GardenProxy.getIns().getWaterCfg(t);if(e){if(e&&e.param1.length>0){this.labelmiaoshu1.text=app.getLang("arboretum_des26",app.str2Array(e.param1,"-")[0],app.str2Array(e.param1,"-")[1]);this.icons=game.Alert.addImag(this.labelmiaoshu1)}else{this.labelmiaoshu1.text=app.getLang("arboretum_des32")}var i=csv.GardenProxy.getIns().getPatronCfg(a.GardenModel.getIns().guardLv);var n=app.str2Array(i.guardtype,";","-");var r=0;for(var o=0;o<n.length;o++){if(n[o][0]=="4"){r=parseInt(n[o][1]);break}}this.param=e.param2+r*60;this.labelmiaoshu2.text=app.getLang("arboretum_des33",util.TimeUtil.formatTime(this.param));this.labelmiaoshu3.text=app.getLang("arboretum_des34",a.GardenModel.getIns().waterCount,csv.GardenProxy.getIns().getTotalTime())}};e.SINGLE_KEY="garden.GardenJiaoshuiTips";return e}(ui.lingzhiyuan3.lingzhiyuantishiUI);a.GardenJiaoshuiTips=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(r){var i=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.haverstLv=0;return t}t.prototype.initialize=function(){this.gouxian.on(Laya.Event.CLICK,this,this.onChkChange);this.gouxian2.on(Laya.Event.CLICK,this,this.onChkhaverstLv);this.btnxiala.on(Laya.Event.CLICK,this,this.onShowList)};t.prototype.setArrow=function(t){if(t){this.btnxiala.scaleY=-1}else{this.btnxiala.scaleY=1}};t.prototype.onShowList=function(t){t.stopPropagation();var e=this.toParentPoint(new Laya.Point(this.listbg.x,this.listbg.y));r.GardenPetView.getIns().onShowList(this,e.x,e.y)};t.prototype.onChkChange=function(){app.ProtocolRequest.Arboretum2StewardSetReq(this.data.seedId,this.gouxian.selected?1:0,this.haverstLv)};t.prototype.onChkhaverstLv=function(){if(this.gouxian2.selected){if(this.haverstLv==0){var t=csv.GardenProxy.getIns().getSeedList(this.data.seedId);this.haverstLv=t[t.length-1].type}}else{this.haverstLv=0}app.ProtocolRequest.Arboretum2StewardSetReq(this.data.seedId,this.gouxian.selected?1:0,this.haverstLv)};t.prototype.setData=function(t){this.setArrow(false);this.data=t;var e=game.ItemUtil.parserList(t.seedId+"-1")[0];this.gouxian.selected=t.autoPlant==1;this.gouxian2.selected=t.haverstLv!=0;this.daoju.setData(e);this.labelname.text=e.getName();this.labelshengyu.text=app.getLang("剩余{0}",game.GridsModel.getIns().getItemCount(t.seedId));var i=csv.GardenProxy.getIns().getSeedList(t.seedId);if(t.haverstLv>0){this.labelzhongziming.color=game.STYLES.ITEM_QUALITY[t.haverstLv]}else{var n=i[i.length-1].type;this.labelzhongziming.color=game.STYLES.ITEM_QUALITY[n]}e=game.ItemUtil.parserList(i[0].item)[0];this.labelzhongziming.text=e.getName()};return t}(ui.lingzhiyuan3.shouhulingitemUI);r.GuardItem=i;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onHide);this.tab.on(Laya.Event.CHANGE,this,this.onShow);this.btnshiyong.clickHandler=new Laya.Handler(this,this.onUseItemHandler);this.texiao.on(Laya.Event.COMPLETE,this,this.onEnd);this.texiao.stop();this.texiao.visible=false;this.listliebiao.itemRender=i;this.listliebiao.renderHandler=new Laya.Handler(this,this.onItemRender);this.listxiala.itemRender=ui.lingzhiyuan3.xuanzexialalitemUI;this.listxiala.renderHandler=new Laya.Handler(this,this.onXialaItemRender);this.listxiala.selectEnable=true;this.listxiala.selectHandler=new Laya.Handler(this,this.onChange);game.HelperViewHandler.registerStr([this.btnbangzhu],"func_helpt","arboretum_help");this.labelmiaoshu1.color=game.STYLES.DESC_TXT_COLOR_S;this.labelmiaoshu2.color=game.STYLES.DESC_TXT_COLOR_S;guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.LIZHI_MANAGER_UP,this.btnshiyong);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.LIZHI_MANAGER_BACK,this.backbtn)};e.prototype.onChange=function(){var t=this.listxiala.selectedItem.type;this.selectItem.haverstLv=t;if(this.selectItem.gouxian2.selected){app.ProtocolRequest.Arboretum2StewardSetReq(this.selectItem.data.seedId,this.selectItem.gouxian.selected?1:0,t)}this.selectItem.setArrow(false);this.onHide()};e.prototype.onXialaItemRender=function(t,e){var i=t.dataSource;var n=game.ItemUtil.parserList(i.item)[0];t.shuxing.color=game.STYLES.ITEM_QUALITY[i.type];t.shuxing.text=n.getName();if(this.listxiala.selectedIndex==e){this.selectItem.labelzhongziming.color=game.STYLES.ITEM_QUALITY[i.type];this.selectItem.labelzhongziming.text=n.getName();this.selectItem.haverstLv=i.type}};e.prototype.onItemRender=function(t){t.setData(t.dataSource)};e.prototype.onEnd=function(){this.texiao.visible=false};e.prototype.onUseItemHandler=function(){var t=r.GardenModel.getIns().guardLv;var e=csv.GardenProxy.getIns().getPatronCfg(t);if(r.GardenModel.getIns().guardExp>=e.upexp){app.ProtocolRequest.Arboretum2GuardUpLvlReq()}else{manager.FlowManager.instance.flowByStyle1(app.getLang("守护升级经验不足"))}};e.prototype.onShow=function(){if(this.tab.selectedIndex==0){this.ani1.gotoAndStop(0)}else{this.ani1.gotoAndStop(1)}};e.prototype.onDisplay=function(){this.listxiala.visible=false;this.isLevUp=false;this.tab.selectedIndex=0;r.GardenModel.getIns().on(r.GardenModel.GARDEN_GUARD_EXP_UPDATE,this,this.onExpUpdate);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){r.GardenModel.getIns().off(r.GardenModel.GARDEN_GUARD_EXP_UPDATE,this,this.onExpUpdate);if(this.isLevUp){r.GardenView.getIns().playAni(true)}};e.prototype.onExpUpdate=function(){this.texiao.play(0,false);this.texiao.visible=true;this.isLevUp=true;this.refreshAll()};e.prototype.onHide=function(){this.listxiala.visible=false};e.prototype.onShowList=function(t,e,i){this.selectItem=t;var n=csv.GardenProxy.getIns().getSeedList(t.data.seedId);this.listxiala.repeatY=n.length;this.listxiala.array=n;this.listxiala.x=e+4;this.listxiala.y=i+110;this.listxiala.visible=!this.listxiala.visible;this.selectItem.setArrow(this.listxiala.visible)};e.prototype.refreshAll=function(){var t=r.GardenModel.getIns().guardLv;this.labeldengji.text=app.getLang("zuoqi_11")+t;var e=csv.GardenProxy.getIns().getPatronCfg(t);this.ani2.gotoAndStop(0);if(e){if(e.costitem&&e.costitem.length>0){var i=game.ItemUtil.parserList(e.costitem)[0];game.ItemShowUtil.showType5(i,this.xiaohao.gezi,this.xiaohao.shuzhi);this.xiaohao.gezi.shuzi.text="";this.ani2.gotoAndStop(0);if(e.guardtype.length==0){this.ani2.gotoAndStop(4)}}else{if(e.guardtype.length>0){this.ani2.gotoAndStop(2)}else{this.ani2.gotoAndStop(3)}}var n=csv.GardenProxy.getIns().getPatronCfg(t+1);if(!n){this.ani2.gotoAndStop(1)}this.labelshuzhi.text=r.GardenModel.getIns().guardExp+"/"+e.upexp;this.bar.value=r.GardenModel.getIns().guardExp/e.upexp;this.labelshengjitishi.text=app.getLang("arboretum_des17",e.upexp);game.RedDotView.removeFrom(this.btnshiyong);this.btnshiyong.disabled=true;if(r.GardenModel.getIns().guardExp>=e.upexp){if(e.costitem&&e.costitem.length>0){if(game.GridsModel.getIns().hasEnoughItems(e.costitem)){game.RedDotView.addTo(this.btnshiyong);this.btnshiyong.disabled=false}}else{game.RedDotView.addTo(this.btnshiyong);this.btnshiyong.disabled=false}}this.labelmiaoshu1.text=r.GardenModel.getIns().getGuardBuffDesc(e.lv);if(n){this.labelmiaoshu2.text=r.GardenModel.getIns().getGuardBuffDesc(n.lv,e.lv)}else{this.labelmiaoshu2.text=""}}this.listliebiao.array=r.GardenModel.getIns().getStewardInfos()};e.SINGLE_KEY="garden.GardenPetView";return e}(ui.lingzhiyuan3.shouhulingivew1UI);r.GardenPetView=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(c){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.getGuardBuffDesc=function(t){var e="";if(t.length>0){var i=app.str2Array(t,";","-");var n=game.STYLES.GREEN_COLOR_S;var r=game.STYLES.GREEN_COLOR_S;var o=0;var a=0;for(var s=0;s<i.length;s++){o=parseInt(i[s][1]);a=parseInt(i[s][2]);if(parseInt(i[s][0])==2||parseInt(i[s][0])==3){a*=.01}else{o/=60}if(i[s].length>2){e+=app.getLang("arboretum_patron0"+i[s][0],n,a,r,o)}else{e+=app.getLang("arboretum_patron0"+i[s][0],n,o)}}}return e};e.prototype.refreshAll=function(){var t=c.GardenModel.getIns().pets;var e="";var i;var n={};if(t.length>0){var r={};for(var o=0;o<t.length;o++){if(!Uint64.equal(t[o],Uint64.ZERO)){i=pet.PetModel.getIns().getPetVOByInstId(t[o]);var a=i.getWuXingType();var s=i.getValueWuXing();if(!r[a]){r[a]=s}else{r[a]+=s}}}for(var l in r){var u=app.str2Array(csv.GardenProxy.getIns().getWuXingCfgByType(parseInt(l),r[l]),";","-");for(var p=0;p<u.length;p++){if(n[u[p][0]]){n[u[p][0]][0]+=parseInt(u[p][1]);if(u[p][2]&&u[p][2]>0){n[u[p][0]][1]+=parseInt(u[p][2])}}else{if(u[p][2]&&u[p][2]>0){n[u[p][0]]=[parseInt(u[p][1]),parseInt(u[p][2])]}else{n[u[p][0]]=[parseInt(u[p][1])]}}}}for(var h in n){if(n[h].length>1){e+=this.getGuardBuffDesc(h+"-"+n[h][0]+"-"+n[h][1])}else{e+=this.getGuardBuffDesc(h+"-"+n[h][0])}}}if(e.length==0){this.labeltiaojian.text=app.getLang("arboretum_wuxingtips")}else{this.labeltiaojian.text=e}};e.SINGLE_KEY="garden.PetBuffView";return e}(ui.lingzhiyuan3.hushengxiaoguotipUI);c.PetBuffView=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(i){var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.listshuxing.renderHandler=new Laya.Handler(this,this.onAttrRender);this.btnshangzhen.clickHandler=new Laya.Handler(this,this.onClick)};e.prototype.onDisplay=function(){i.GardenModel.getIns().on(i.GardenModel.GARDEN_PETS_CHANGE,this,this.onStateUpdate)};e.prototype.onUnDisplay=function(){i.GardenModel.getIns().off(i.GardenModel.GARDEN_PETS_CHANGE,this,this.onStateUpdate)};e.prototype.onClick=function(){if(util.TimeUtil.checkIntervalTime(true,500)){r.getIns().onC2sSetPetReq(this.data.instid)}};e.prototype.onStateUpdate=function(){if(i.GardenModel.getIns().inGuarding(this.data.instid)){this.ani1.gotoAndStop(0)}else if(this.data.isBattle()){this.ani1.gotoAndStop(2)}else{this.ani1.gotoAndStop(1)}};e.prototype.onAttrRender=function(t){var e=t.dataSource;var i=Attributes.decode(csv.PetProxy.getIns().getBaseAttr(e.rand)).baseList[0];t.shuxing.text=app.getLang(Attributes.getPropName(i.propId));var n=this.data.getPropValue(e);var r=parseInt(csv.PetProxy.getIns().getTalent(i.propId));var o=this.data.getPropValue(e,0,r);t.labelshuzi.text=n+"";t.labelshuzhi.text=e.val+"/"+r;t.jindutiao.value=e.val/r};e.prototype.setData=function(t){this.data=t;this.shuxingimg.skin="res/static/bg_sx_"+t.petCfg.supportelements+".png";this.laneldengji.text=app.getLang("zuoqi_11")+t.plevel;this.pinzhikuangimg.skin=tip.TipManager.getQualityIcon(t.qua);this.daojuimg.skin="res/icon/item/pet_"+t.petid+".png";var e=t.petCfg?app.getLang(t.petCfg.namelang):"";this.labelmingzi.text=e;this.labelmingzi.color=game.STYLES.ITEM_QUALITY[t.qua];this.listshuxing.array=t.prop;var i=csv.SkillProxy.getIns().getSkillByKey(t.skillId+"-"+t.getSkillLevel());this.miaoshu1.text=app.getLang("技能名字:"+i.name);this.miaoshu2.text=app.getLang("辅助技能:"+this.data.getaddattr());this.onStateUpdate()};return e}(ui.lingzhiyuan3.xuanzexianshouitemUI);i.PetChoiceitemRender=n;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listxuanze.itemRender=n;this.listxuanze.renderHandler=new Laya.Handler(this,this.onListRenderHandler);this.listxuanze.scrollRectOffX=10;this.listxuanze.scrollRectOffY=10;this.selectorClass=new pet.SelectorClass(this.listyeqian1,new Laya.Handler(this,this.showList),this.xuanze1,this.xuanze2,this.xuanze3);this.on(Laya.Event.CLICK,this,this.hideMenu);this.xuanze3.labelmiaoshu2.text=app.getLang("magiclisttag2");this.selectorClass.param3=1};e.prototype.onC2sSetPetReq=function(t){i.GardenModel.getIns().c2sSetPetReq(this.dataSource[0],t);this.close()};e.prototype.onListRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.hideMenu=function(){this.listyeqian1.visible=false;this.selectorClass.resetBtn()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.xuanze1.labelmiaoshu2.text=app.getLang("pettag_1_0");this.xuanze2.labelmiaoshu2.text=app.getLang("pettag_1_0");this.selectorClass.param1=0;this.selectorClass.param2=0;this.xuanze3.labelmiaoshu2.text=app.getLang("magiclisttag"+this.selectorClass.param3);this.hideMenu();this.showList()};e.prototype.showList=function(){var t=pet.PetModel.getIns().getBaseTypeArr(this.selectorClass.param3);var e=[];for(var i=0;i<t.length;i++){var n=pet.PetModel.getIns().getBaseListByShowType(this.selectorClass.param3,t[i],this.selectorClass.param1,this.selectorClass.param2);if(n.length==0){continue}e=e.concat(n)}this.listxuanze.array=e};e.SINGLE_KEY="garden.PetChoicesView";return e}(ui.lingzhiyuan3.xuanzexianshoutipsUI);i.PetChoicesView=r})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(p){var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnjia.clickHandler=new Laya.Handler(this,this.onAdd);this.btnjian.clickHandler=new Laya.Handler(this,this.onless);this.btnzuida.clickHandler=new Laya.Handler(this,this.onMax);this.xuanzhong.visible=false};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){this.daoju.hideStaticEffect()};e.prototype.onMax=function(){if(this.count>0&&this.curValue!=this.count){var t=p.PlantShifeiView.getIns().checkFull();if(!t){var e=p.PlantShifeiView.getIns().getMaxCount(this.p1,this.count,this.id);if(e>0){this.curValue=e;this.onChange()}else{manager.FlowManager.instance.flowByStyle1(app.getLang("不可以再继续叠加了"))}}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("已经达到最大值"))}};e.prototype.onAdd=function(){if(this.curValue<this.count){var t=p.PlantShifeiView.getIns().checkFull();if(!t){this.curValue+=1;this.onChange()}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("已经达到最大值"))}};e.prototype.onless=function(){if(this.curValue>0){this.curValue-=1;this.onChange()}};e.prototype.onChange=function(){p.PlantShifeiView.getIns().onAddTimeChange();this.shuzi.text=this.curValue+"";if(this.curValue>0){this.daoju.setStaticEffect()}else{this.daoju.hideStaticEffect()}};e.prototype.setData=function(t,e){this.id=t.id;this.p1=t.p1;this.count=game.GridsModel.getIns().getItemCount(t.id);this.curValue=0;this.shuzi.text=this.curValue+"";this.daoju.setData(t.id+"-"+this.count);if(this.count>0){this.daoju.shuzi.text=this.count+""}else{this.daoju.shuzi.text=""}if(this.count>0){this.ani1.gotoAndStop(0)}else{this.ani1.gotoAndStop(1)}this.miaoshu.text=app.getLang("每个道具加速{0}",util.TimeUtil.sec2Str(t.p1,false,4,false,true));this.xuanzhong.visible=e};e.prototype.getAddTime=function(){return this.p1*this.curValue};return e}(ui.lingzhiyuan3.shifeiitemUI);p.PlantShifeiItem=i;var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.tipStr="";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.w=472;this.listshifei.itemRender=i;this.listshifei.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.btnshiyong.clickHandler=new Laya.Handler(this,this.onClick)};t.prototype.onClick=function(){var t=this.listshifei.array.length;var e=0;var i,n,r=[];for(var o=0;o<t;o++){i=this.listshifei.getCell(o);if(i.curValue>0){n=new ItemData;n.itemID=i.id;n.value=i.curValue;r.push(n);e+=i.getAddTime()}}this.tipStr="";if(r.length>0){p.GardenView.getIns().earth.c2sShifei(r);var a=p.GardenModel.getIns().getNextState(this.dataSource[0].spaceIndex).ele;var s=csv.ItemProxy.getName(app.str2Array(a.item,"-")[0]);this.tipStr=app.getLang("arboretum_des8",s,util.TimeUtil.sec2Str(e,false,4,false,true))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("尚未选择施肥灵物，无法使用"))}};t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,this.listshifei.selectedIndex==e)};t.prototype.onDisplay=function(){p.GardenModel.getIns().on(p.GardenModel.GARDEN_ACT_SUCCESS,this,this.onSuccess);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){p.GardenModel.getIns().off(p.GardenModel.GARDEN_ACT_SUCCESS,this,this.onSuccess);this.cleanCoolDown()};t.prototype.onSuccess=function(t,e){if(t==5){this.close();p.GardenView.getIns().earth.onSuccessShifei(this.tipStr)}};t.prototype.refreshAll=function(){var t=csv.ItemProxy.getIns().getListByType(csv.ItemProxy.TYPES.GARDEN);this.listshifei.array=t.sort(this.sort);this.curState=null;this.zhongzi.imgmiao.skin="";this.labelmiaoshu4.text="";this.updateProgress(0);this.refreshView()};t.prototype.updateProgress=function(t){this._addtime=t;var e=this.dataSource[0];var i=csv.GardenProxy.getIns().getSeedList(e.seedId);var n=p.GardenModel.getIns().getNextState(e.spaceIndex,t);if(n.curIndex>=0){this.xuetiao1.skin="lingzhiyuan3/bg_xuetiao_"+i[n.curIndex].type+".png";if(n.curIndex-1>=0){this.xuetiao2.skin="lingzhiyuan3/bg_xuetiao_"+i[n.curIndex-1].type+".png"}else{this.xuetiao2.skin="lingzhiyuan3/bg_xuetiao_1.png"}this.xuetiao2.visible=true}else{this.xuetiao1.skin="lingzhiyuan3/bg_xuetiao_1.png";this.xuetiao2.visible=false}var r,o,a;var s=e.fertilizerAddTime+e.OtherAddTime+e.guardAddTime;o=game.Context.getServerTime()-e.plantTime+s+t;a=p.GardenModel.getIns().getEndTime(e.spaceIndex,n.curIndex+1,false)-e.plantTime;var l=0;if(n.curIndex>=0){l=p.GardenModel.getIns().getEndTime(e.spaceIndex,n.curIndex,false)-e.plantTime}if(a-l==0){r=1}else{r=(o-l)/(a-l);if(r>1){r=1}}this.xuetiao1.width=this.w*r;this.touming1.visible=false};t.prototype.sort=function(t,e){if(t.qua>e.qua)return-1;if(e.qua>t.qua)return 1;return 0};t.prototype.getMaxCount=function(t,e,i){var n=0;var r=this.listshifei.array;var o;var a=0;for(var s=0,l=r.length;s<l;s++){o=this.listshifei.getCell(s);if(i==o.id){continue}a+=o.getAddTime()}var u=p.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex)-a;for(var s=1;s<=e;s++){n++;if(u-t*s-game.Context.getServerTime()<=0){break}}return n};t.prototype.checkFull=function(){var t=false;var e=this.listshifei.array;var i;var n=0;for(var r=0,o=e.length;r<o;r++){i=this.listshifei.getCell(r);n+=i.getAddTime()}var a=p.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex)-n-game.Context.getServerTime();if(a<=0){t=true}if(t){manager.FlowManager.instance.flowByStyle1(app.getLang("不可以再继续叠加了"))}return t};t.prototype.onAddTimeChange=function(){var t=this.listshifei.array;var e;var i=0;for(var n=0,r=t.length;n<r;n++){e=this.listshifei.getCell(n);i+=e.getAddTime()}this.labelmiaoshu4.text=app.getLang("加速：{0}",util.TimeUtil.sec2Str(i,false,4,false,true));this.updateProgress(i);this.refreshView()};t.prototype.coolDown=function(){var t=p.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex)-this._addtime-game.Context.getServerTime();var e=p.GardenModel.getIns().getNextState(this.dataSource[0].spaceIndex,this._addtime);if(t>0){var i="arboretum_des23";if(this.curState!=e.curIndex){this.curState=e.curIndex;this.zhongzi.imgmiao.skin="res/icon/garden/"+e.ele.state1+".png";this.labelmiaoshu.color=game.STYLES.ITEM_QUALITY[e.qua];if(e.curIndex>=0){this.labelmiaoshu.text=app.getLang("arboretum_des21",csv.GardenProxy.getIns().getPlantDesc(e.cur))}else{this.labelmiaoshu.color=game.STYLES.ITEM_QUALITY[1];this.labelmiaoshu.text=app.getLang("arboretum_des21",app.getLang("arboretum_des20"))}}if(e.ele){this.labelmiaoshu3.color=game.STYLES.ITEM_QUALITY[e.ele.type];this.labelmiaoshu3.text=app.getLang("arboretum_des22",csv.GardenProxy.getIns().getPlantDesc(e.ele));this.labelmiaoshu2.text=app.getLang(i,util.TimeUtil.sec2Str(t,false,4,false,true))}else{this.labelmiaoshu3.text=""}t=p.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex,e.curIndex+1)-this._addtime-game.Context.getServerTime();this.labelmiaoshu2.text=app.getLang(i,util.TimeUtil.sec2Str(t,false,4,false,true));if(this._addtime==0){this.updateProgress(0)}}else{this.labelmiaoshu2.text="";this.curState=null;this.zhongzi.imgmiao.skin="res/icon/garden/"+e.cur.state2+".png";this.labelmiaoshu.color=game.STYLES.ITEM_QUALITY[e.qua];this.labelmiaoshu.text=app.getLang("arboretum_des21",csv.GardenProxy.getIns().getPlantDesc(e.cur));this.labelmiaoshu3.text=app.getLang("arboretum_des25");this.labelmiaoshu2.text=app.getLang("arboretum_des24")}};t.prototype.refreshView=function(){var t=p.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex)-this._addtime-game.Context.getServerTime();var e=p.GardenModel.getIns().getNextState(this.dataSource[0].spaceIndex,this._addtime);Laya.timer.clear(this,this.coolDown);if(t>0){var i="arboretum_des23";if(this.curState!=e.curIndex){this.curState=e.curIndex;this.zhongzi.imgmiao.skin="res/icon/garden/"+e.ele.state1+".png";this.labelmiaoshu.color=game.STYLES.ITEM_QUALITY[e.qua];if(e.curIndex>=0){this.labelmiaoshu.text=app.getLang("arboretum_des21",csv.GardenProxy.getIns().getPlantDesc(e.cur))}else{this.labelmiaoshu.color=game.STYLES.ITEM_QUALITY[1];this.labelmiaoshu.text=app.getLang("arboretum_des21",app.getLang("arboretum_des20"))}}if(e.ele){this.labelmiaoshu3.color=game.STYLES.ITEM_QUALITY[e.ele.type];this.labelmiaoshu3.text=app.getLang("arboretum_des22",csv.GardenProxy.getIns().getPlantDesc(e.ele));this.labelmiaoshu2.text=app.getLang(i,util.TimeUtil.sec2Str(t,false,4,false,true))}else{this.labelmiaoshu3.text=""}t=p.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex,e.curIndex+1)-this._addtime-game.Context.getServerTime();this.labelmiaoshu2.text=app.getLang(i,util.TimeUtil.sec2Str(t,false,4,false,true));Laya.timer.loop(1e3,this,this.coolDown)}else{this.labelmiaoshu2.text="";this.curState=null;this.zhongzi.imgmiao.skin="res/icon/garden/"+e.cur.state2+".png";this.labelmiaoshu.color=game.STYLES.ITEM_QUALITY[e.qua];this.labelmiaoshu.text=app.getLang("arboretum_des21",csv.GardenProxy.getIns().getPlantDesc(e.cur));this.labelmiaoshu3.text=app.getLang("arboretum_des25");this.labelmiaoshu2.text=app.getLang("arboretum_des24")}};t.prototype.cleanCoolDown=function(){Laya.timer.clear(this,this.coolDown)};t.SINGLE_KEY="garden.PlantShifeiView";return t}(ui.lingzhiyuan3.shifeilingzhitipUI);p.PlantShifeiView=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var tip;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._txtTime=null;this.clear();this.cleanCoolDown()};e.prototype.refreshAll=function(){this.daojubox.scrollTo(0,0);this.currH=0;this.currH+=r.TipManager.TIP_INIT_GAP;this._seedList=csv.GardenProxy.getIns().getSeedList(this.dataSource[0].seedId);var t=garden.GardenModel.getIns().getNextState(this.dataSource[0].spaceIndex);if(t.curIndex>=0){this.tipData=game.ItemUtil.parserList(t.cur.item)[0]}else{this.tipData=game.ItemUtil.parserList(t.ele.seedid)[0]}this.callHandler=this.dataSource[1];this.daojuimg.skin=this.tipData.getIconUrl();this.pinzhiimg.skin=r.TipManager.getTipIcon(this.tipData.getQuality());this.pinzhikuangimg.skin=r.TipManager.getQualityIcon(this.tipData.getQuality());this.namelabel.color=game.STYLES.ITEM_QUALITY[this.tipData.getQuality()];this.namelabel.text=this.tipData.getName();this.xianzhilabel.color=game.STYLES.DESC_TXT_COLOR;this.xianzhilabel.text=app.getLang("拥有数量：{0}",game.GridsModel.getIns().getItemCount(this.tipData.getItemId()));this.addPlantTime();var e=app.getLang(csv.ItemProxy.getItemDes(this.tipData.getItemId()),game.MoneyModel.format(this.tipData.getSpecialNum()));this.addDesc(e);this.currH+=r.TipManager.GAPS.GAP_BOTTOM;this.addGrowpLevel();this.updateBg();this.imgEye.visible=false};e.prototype.addPlantTime=function(){if(this.tipData.itemCfg){var t=this.createLabel(game.STYLES.YELLOW_COLOR,this.daojubox,22);var e=garden.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex)-game.Context.getServerTime();var i=garden.GardenModel.getIns().getStartTime(this.dataSource[0].spaceIndex);if(e>0){t.text=app.getLang("当前种植时长：{0}",util.TimeUtil.sec2Str(game.Context.getServerTime()-i,false,4,false,true));Laya.timer.loop(1e3,this,this.coolDown)}else{t.text=app.getLang("arboretum_des9")}t.y=this.currH;this.currH+=t.height;this.currH+=r.TipManager.GAPS.GAP_BOTTOM;this._txtTime=t}};e.prototype.addGrowpLevel=function(){var t=garden.GardenModel.getIns().getNextState(this.dataSource[0].spaceIndex);for(var e=0;e<this._seedList.length;e++){var i=this.createLabel(game.STYLES.ITEM_QUALITY[this._seedList[e].type],this.daojubox,22,t.curIndex==e);var n=game.ItemUtil.parserList(this._seedList[e].item)[0].getName();i.text=n+util.TimeUtil.sec2Str(this._seedList[e].growtime,false,4,false,true);i.y=this.currH;this.currH+=this._txtTime.height;this.currH+=r.TipManager.GAPS.GAP_V_LABLE}};e.prototype.coolDown=function(){var t=garden.GardenModel.getIns().getEndTime(this.dataSource[0].spaceIndex)-game.Context.getServerTime();if(t<0){this.cleanCoolDown()}var e=garden.GardenModel.getIns().getStartTime(this.dataSource[0].spaceIndex);this._txtTime.text=app.getLang("当前种植时长：{0}",util.TimeUtil.sec2Str(game.Context.getServerTime()-e,false,4,false,true))};e.prototype.cleanCoolDown=function(){Laya.timer.clear(this,this.coolDown)};e.SINGLE_KEY="garden.TipsPlantView";return e}(r.TipItemView);r.TipsPlantView=t})(tip||(tip={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var garden;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.close);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onOkHandler)};e.prototype.onOkHandler=function(){var t=i.GardenModel.getIns().unlockedSpace.length;var e=csv.GardenProxy.getIns().getUnlockVO(t+1);if(game.GridsModel.getIns().hasEnoughItems(e,false,true)){i.GardenView.getIns().earth.c2sUnLock()}};e.prototype.onDisplay=function(){i.GardenModel.getIns().on(i.GardenModel.GARDEN_ACT_SUCCESS,this,this.onSuccess);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){i.GardenModel.getIns().off(i.GardenModel.GARDEN_ACT_SUCCESS,this,this.onSuccess)};e.prototype.onSuccess=function(t,e){if(t==1){this.close()}};e.prototype.refreshAll=function(){var t=i.GardenModel.getIns().unlockedSpace.length;var e=csv.GardenProxy.getIns().getUnlockVO(t+1);if(e){this.itemmoney.parserIconByItemId(e.getItemId());this.txtTitle.text=app.getLang("将消耗：");this.shuoming.text=app.getLang("{0}解锁",e.count)}};e.SINGLE_KEY="garden.UnLockTips";return e}(ui.lingzhiyuan3.tishiUI);i.UnLockTips=t})(garden||(garden={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){var r=this;e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnBackHome.on(Laya.Event.CLICK,this,function(){app.ProtocolRequest.TeleportReq(1)});this.btnCreatRole.on(Laya.Event.CLICK,this,function(){var t=1;if(r.inputProf.text!=""){t=parseInt(r.inputProf.text)}var e={t:"addrole "+t};var i=JSON.stringify(e);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,i)});this.btnSendLvl.on(Laya.Event.CLICK,this,function(){var t=1;if(r.inputRole.text!=""){t=parseInt(r.inputRole.text)}var e=50;if(r.inputLvl.text!=""){e=parseInt(r.inputLvl.text)}var i={t:"setlevel  "+t+" "+e};var n=JSON.stringify(i);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,n)});this.btnSendPet.on(Laya.Event.CLICK,this,function(){var t=1;if(r.inputPetId.text!=""){t=parseInt(r.inputPetId.text)}var e=50;if(r.inputLvl.text!=""){e=parseInt(r.inputLvl.text)}if(e>400){e=400}var i={t:"fetchpet  "+t+" "+e};var n=JSON.stringify(i);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,n)});this.btnGlod.on(Laya.Event.CLICK,this,function(){var t={t:"fetch  8000 100000"};var e=JSON.stringify(t);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,e);t={t:"fetch  8001 100000"};e=JSON.stringify(t);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,e);t={t:"fetch  8002 100000"};e=JSON.stringify(t);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,e)})};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.SINGLE_KEY="gm.Gm2View";return t}(ui.GM.GM3UI);t.Gm2View=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.y=200;this._model=i.GmModel.getIns();this.listSkil.itemRender=i.GmSkillTitleItem;this.listSkil.renderHandler=new Laya.Handler(this,this.onRender);this.listSkil.selectHandler=new Laya.Handler(this,this.onSelect);this.listSkil.selectEnable=true;this.listSkil.hScrollBarSkin="";this.listSkil.vScrollBarSkin=" ";this.listSkil.array=[];this.shuru.text="1001";this.btn1.on(Laya.Event.CLICK,this,this.onSkill)};t.prototype.onRender=function(t,e){t.setData(t.dataSource)};t.prototype.onSelect=function(t){if(this.listSkil.selectedIndex==-1){return}if(this.listSkil.selectedItem){this.shuru.text=this.listSkil.selectedItem.skillid;this.onSkill();this.listSkil.selectedIndex=-1}};t.prototype.onClose=function(){i.GmModel.getIns().boGmBattle=false;this._model.event("GM_BATTLE")};t.prototype.onSkill=function(){var t=csv.SkillProxy.getIns().getCfg(parseInt(this.shuru.text));if(!t){manager.FlowManager.instance.flowByStyle1("技能不存在");return}var e=new battle.AttackVo;e.targetView=scene.SceneMediator.getInstance().getViewById(this._model.battleMonsterVO.insId);e.attackView=scene.SceneMediator.getInstance().getViewById(this._model.battleRoleVO.insId);e.skill=t;e.hps=[];e.buffs=[];e.usetime=0;var i=new EffectHpData;i.effectType=Uint64.fromNumber(5);i.tar=this._model.battleMonsterVO.insId;var n=new Uint64;n.addNumber(100);i.maxhp=n;i.hp=n;i.mp=n;i.maxmp=n;i.hurt=n;i.def=0;e.hps.push(i);e.attackView.addAttack(e)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.listSkil.array=csv.SkillProxy.getIns().getSkillList()};t.SINGLE_KEY="gm.GmBattleView";return t}(ui.GM.GM2UI);i.GmBattleView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=i.GmModel.getIns()};e.prototype.initCommands=function(){Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown)};e.prototype.onKeyDown=function(t){if(t.altKey&&t.shiftKey&&t.ctrlKey&&t.keyCode==49){app.ViewManager.toggleDialog(i.GmView,1,0)}else if(t.altKey&&t.shiftKey&&t.ctrlKey&&t.keyCode==50){app.ViewManager.toggleDialog(i.Gm2View,1,0)}else if(t.altKey&&t.shiftKey&&t.ctrlKey&&t.keyCode==56){app.ViewManager.toggleDialog(i.GmMonView,1,0)}else if(t.altKey&&t.shiftKey&&t.ctrlKey&&t.keyCode==51){app.ViewManager.toggleDialog(i.GmBattleReportView,1,0)}else if(t.altKey&&t.shiftKey&&t.ctrlKey&&t.keyCode==52){app.ViewManager.toggleDialog(i.GmSkillMakerView,1,0)}else if(t.altKey&&t.shiftKey&&t.ctrlKey&&t.keyCode==53){app.ViewManager.toggleDialog(i.SceneSkillMakerView,1,0)}};e.SINGLE_KEY="gm.GmModule";return e}(app.ModuleBase);i.GmModule=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.shuxing.text=app.getLang(t.name)};e.SINGLE_KEY="skill.GmMonItem";return e}(ui.zudui.mubiaofubenitemUI);t.GmMonItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(l){var e=laya.ui.Button;var t=function(a){__extends(s,a);function s(){var t=a!==null&&a.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}s.getIns=function(){return app.Singleton.getInstance(s)};s.prototype.initialize=function(){a.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.inputH1.on(Laya.Event.INPUT,this,this.onHeightChange);this.inputH2.on(Laya.Event.INPUT,this,this.onHitWidthtChange);this.inputH3.on(Laya.Event.INPUT,this,this.onHitHeightChange);this.inputH4.on(Laya.Event.INPUT,this,this.onHitXChange);this.inputH5.on(Laya.Event.INPUT,this,this.onHitTrunChange);this.inputH6.on(Laya.Event.INPUT,this,this.onScaleChange);this.input7.on(Laya.Event.INPUT,this,this.onIdSelect);this.labelgaodu2.text=app.getLang("点击区域的宽度");this.labelgaodu3.text=app.getLang("点击区域的高度");this.labelgaodu4.text=app.getLang("X轴的偏移量");this.labelgaodu5.text=app.getLang("怪物朝向");this.labelgaodu6.text=app.getLang("设置怪物缩放");this._createBtn();s.isDebug=true;this.view=new role.MonsterView;this.view.centerX=0;this.view.y=this.box.height;this.box.addChild(this.view);var t=csv.BossProxy.getIns().getArr();for(var e=0;e<t.length;e++){var i=csv.BossProxy.getIns().getCfg(t[e].id);csv.BossProxy.getIns().getMonsterId(i.bosssetbase)}this.listMediator=new common.ListSelectMediator(this.list,this.btn,this.lblMon,l.GmMonItem,new Laya.Handler(this,this.onSelectRender),31,300,["id","name"]);this.monArr=[];this.map={};var n=csv.MonsterProxy.getIns().getArr();for(var e=0,r=n.length;e<r;e++){var o=n[e];if(o.monnamecn){if(!this.map[o.monnamecn]){this.map[o.monnamecn]={id:o.monid,name:o.monnamecn,data:o};this.monArr.push(this.map[o.monnamecn])}}else{if(!this.map[o.monname]){this.map[o.monname]={id:o.monid,name:o.monname,data:o};this.monArr.push(this.map[o.monname])}}}this.monArr.sort(function(t,e){return t.name.localeCompare(e.name,"zh-Hans-CN",{sensitivity:"accent"})});this.listMediator.array=this.monArr;this.listMediator.init();this.lblMon.text="选择怪物"};s.prototype.onSelectRender=function(t){for(var e=0,i=this.monArr.length;e<i;e++){var n=this.monArr[e];if(n.id==t){if(this.view&&this.view.parent){this.view.removeSelf()}this.view=new role.MonsterView;this.view.centerX=0;this.view.y=this.box.height;this.box.addChild(this.view);var r=new role.MonsterVO;r.insId=Uint64.initClientUint64();r.hp=100;r.maxhp=100;r.mp=100;r.maxmp=100;r.monsterId=t;r.name=n.name;r.monsterType=role.MonsterVO.ENUM_MONSTER_TYPE.FUBEN_MON;r.setCfgId(t);this.view.init(r);this.view.roleState=role.RoleStateConst.IDLE;this.inputH1.text=n.data.hpheight.toString();this.inputH2.text="190";this.inputH3.text="185";this.inputH4.text="0";var o=csv.BossProxy.getIns().getBosssetbase(t);var a=0;if(o){var s=void 0;var l=csv.BossProxy.getIns().getArr();for(var u=0;u<l.length;u++){if(l[u].bosssetbase==+o){s=l[u].id}}if(s){var p=csv.NpcProxy.getIns().cfgArr;for(var h=0;h<p.length;h++){if(+p[h].param1==s){a=p[h].dir}}}}this.inputH5.text=a+"";this.onHeightChange();this.tempClickHanlder();this.onHitTrunChange();break}}};s.prototype._createBtn=function(){var t=new e("public/btn_green.png");t.label=app.getLang("绘制");t.on(Laya.Event.CLICK,this,this.tempClickHanlder);t.x=600;t.y=280;this.addChild(t)};s.prototype.tempClickHanlder=function(){this.view.drawHitView()};s.prototype.onHeightChange=function(){var t=parseInt(this.inputH1.text);this.view.resetHeadView(t)};s.prototype.onHitWidthtChange=function(){var t=parseInt(this.inputH2.text);this.view.setHitViewWidth(t)};s.prototype.onHitHeightChange=function(){var t=parseInt(this.inputH3.text);this.view.setHitViewHeight(t)};s.prototype.onHitXChange=function(){var t=parseInt(this.inputH4.text);this.view.setHitViewOffX(t)};s.prototype.onHitTrunChange=function(){var t=parseInt(this.inputH5.text);if(t==4||t==5||t==6){this.view.avatar.avatarDisplay.scaleX=-1}else{this.view.avatar.avatarDisplay.scaleX=1}};s.prototype.onScaleChange=function(){var t=Number(this.inputH6.text);this.view.avatar.scale(t,t);this.view.graphics.clear()};s.prototype.onIdSelect=function(){var t=Number(this.input7.text);var e=csv.MonsterProxy.getIns().getCfg(t);if(e){this.onSelectRender(t)}};s.prototype.onDisplay=function(){s.isDebug=true;this.callLater(this.refreshAll)};s.prototype.onUnDisplay=function(){s.isDebug=false};s.prototype.refreshAll=function(){};s.SINGLE_KEY="gm.GmMonView";s.isDebug=false;return s}(ui.GM.GMMonUI);l.GmMonView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblDes.text=t};e.SINGLE_KEY="gm.GmNetItemView";return e}(ui.GM.GmNetItemUI);t.GmNetItemView=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblTiltle.text=t.cmd.toString(16);this.lblTime.text=util.TimeUtil.formatDate(t.time,false,true)};e.prototype.showSelect=function(t){this.imgSelect.visible=t};e.SINGLE_KEY="gm.GmNetTitleView";return e}(ui.GM.GmNetTitleUI);t.GmNetTitleView=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblTiltle.text=t.name};e.SINGLE_KEY="gm.GmSkillTitleItem";return e}(ui.GM.GmSkillTitleUI);t.GmSkillTitleItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(n){var t=function(i){__extends(t,i);function t(){var t=i!==null&&i.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listContent.itemRender=n.GmNetItemView;this.listContent.renderHandler=new Laya.Handler(this,this.onContent);this.listContent.hScrollBarSkin="";this.listContent.vScrollBarSkin=" ";this.listContent.array=[];this.listContentC.itemRender=n.GmNetItemView;this.listContentC.renderHandler=new Laya.Handler(this,this.onContent);this.listContentC.hScrollBarSkin="";this.listContentC.vScrollBarSkin=" ";this.listContentC.array=[];this.listTitle.itemRender=n.GmNetTitleView;this.listTitle.renderHandler=new Laya.Handler(this,this.onTitle);this.listTitle.selectHandler=new Laya.Handler(this,this.onTitleSelect);this.listTitle.selectEnable=true;this.listTitle.hScrollBarSkin="";this.listTitle.vScrollBarSkin=" ";this.listTitleC.itemRender=n.GmNetTitleView;this.listTitleC.renderHandler=new Laya.Handler(this,this.onTitleC);this.listTitleC.selectHandler=new Laya.Handler(this,this.onTitleSelectC);this.listTitleC.selectEnable=true;this.listTitleC.hScrollBarSkin="";this.listTitleC.vScrollBarSkin=" ";this._model=n.GmModel.getIns();this.inputExcept.text="";this.inputSearch.text="";this.inputSearch.on(Laya.Event.INPUT,this,this.refreshAll);this.inputExcept.on(Laya.Event.INPUT,this,this.refreshAll);this.inputSearchC.text="";this.inputSearchC.on(Laya.Event.INPUT,this,this.refreshAll);this.btnClear.on(Laya.Event.CLICK,this._model,this._model.clearAll);this.b1.on(Laya.Event.CLICK,this,this.onSelect);this.b2.on(Laya.Event.CLICK,this,this.onSelect);this.boxsc.visible=true;this.boxcs.visible=false;this.b1.yeqianbtn.selected=true;this.b1.yeqianbtn.label="收包";this.b2.yeqianbtn.selected=false;this.b2.yeqianbtn.label="发包";var t=new Laya.Label(app.Version.CodeVersion);t.fontSize=22;t.color="#FF0000";t.y=0;t.x=0;t.strokeColor="#203c56";t.stroke=2;this.addChild(t);var e=new Laya.Label(app.Version.ResVersion);e.fontSize=22;e.color="#FFF000";e.y=30;e.x=0;e.strokeColor="#203c56";e.stroke=2;this.addChild(e)};t.prototype.onSelect=function(t){if(t.currentTarget==this.b1){this.b1.yeqianbtn.selected=true;this.b2.yeqianbtn.selected=false;this.boxsc.visible=true;this.boxcs.visible=false}else{this.b1.yeqianbtn.selected=false;this.b2.yeqianbtn.selected=true;this.boxsc.visible=false;this.boxcs.visible=true}};t.prototype.onContent=function(t,e){t.setData(t.dataSource)};t.prototype.onTitle=function(t,e){t.setData(t.dataSource);t.showSelect(e==this.listTitle.selectedIndex)};t.prototype.onTitleSelect=function(t){if(this.listTitle.selectedItem){var e=this._model.getObjStr(this.listTitle.selectedItem.obj,0,this.listTitle.selectedItem.cmd,this.listTitle.selectedItem.time);this.listContent.array=e}};t.prototype.onTitleC=function(t,e){t.setData(t.dataSource);t.showSelect(e==this.listTitleC.selectedIndex)};t.prototype.onTitleSelectC=function(t){if(this.listTitleC.selectedItem){var e=this._model.getObjStr(this.listTitleC.selectedItem.obj,0,this.listTitleC.selectedItem.cmd,this.listTitleC.selectedItem.time);this.listContentC.array=e}};t.prototype.onDisplay=function(){n.GmModel.getIns().on("GM_CHANGE",this,this.refreshAll);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){n.GmModel.getIns().off("GM_CHANGE",this,this.refreshAll)};t.prototype.refreshAll=function(){var t=this.inputExcept.text;var e=t.split(",");var i=this.inputSearch.text;var n;if(i!=""){n=i.split(",")}var r=[];for(var o=0,a=this._model.gmArr.length;o<a;o++){var s=this._model.gmArr[o];var l=s.cmd.toString(16);if(e.indexOf(l)==-1&&(!n||n.indexOf(l)!=-1)){r.push(s)}}this.listTitle.array=r;var u=this.inputSearchC.text;var p;if(u!=""){p=u.split(",")}var h=[];for(var o=0,a=this._model.sendGmArr.length;o<a;o++){var s=this._model.sendGmArr[o];var l=s.cmd.toString(16);if(!p||p.indexOf(l)!=-1){h.push(s)}}this.listTitleC.array=h};t.SINGLE_KEY="gm.GmView";return t}(ui.GM.GMUI);n.GmView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.list.itemRender=i.GmBattleDetailItem;this.list.renderHandler=new Laya.Handler(this,this.onContent);this.list.hScrollBarSkin="";this.list.vScrollBarSkin=" ";this.list.array=[]};e.prototype.onContent=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.currVo=this.dataSource;var t;var e="";for(var i=0,n=this.currVo.steps.length;i<n;i++){var r=this.currVo.steps[i];if(r.time==t){e+=this.getStepDes(r)}else{t=r.time;e+=app.getLang("战斗时间：{0}\n",r.time);e+=this.getStepDes(r)}}this.list.array=e.split("\n")};e.prototype.getStepDes=function(t){var e=battle.BattleRecordCenter.getIns().getDes(t.type,t.data,this.currVo.charmap,t.resp);for(var i=0,n=t.states.length;i<n;i++){var r=t.states[i];if(r.boChange){e+=battle.BattleRecordCenter.getIns().getStateDes(r,this.currVo.charmap)}}e+="\n";return e};e.SINGLE_KEY="gm.GmBattleDetail";return e}(ui.GM.GmBattleDetailUI);i.GmBattleDetail=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblDes.text=t};e.SINGLE_KEY="gm.GmBattleDetailItem";return e}(ui.GM.GmBattleDetailItemUI);t.GmBattleDetailItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblname.text=t.bname;this.lblid.text=t.bid.toString()};e.prototype.showSelect=function(t){this.btn.selected=t};e.SINGLE_KEY="gm.GmBattleReportIdItem";return e}(ui.GM.GmBattleReportIDUI);t.GmBattleReportIdItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblstep.text=t.step.toString();if(t.time!=undefined){this.lbltime.text=t.time.toString()}else{this.lbltime.text=""}};e.prototype.showSelect=function(t){this.btn.selected=t};e.SINGLE_KEY="gm.GmBattleReportStepItem";return e}(ui.GM.GmBattleReportStepUI);t.GmBattleReportStepItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(h){var t=function(e){__extends(p,e);function p(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t.viewMap={};t.arrowArr=[];t.hurtArr=[];t.viewMap2={};t.arrowArr2=[];t.hurtArr2=[];t.bei=1;return t}p.getIns=function(){return app.Singleton.getInstance(p)};p.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=battle.BattleRecordCenter.getIns();this.listid.itemRender=h.GmBattleReportIdItem;this.listid.renderHandler=new Laya.Handler(this,this.onIdRender);this.listid.selectHandler=new Laya.Handler(this,this.onIdSelect);this.listid.selectEnable=true;this.listid.hScrollBarSkin=" ";this.listid.array=[];this.liststep.itemRender=h.GmBattleReportStepItem;this.liststep.renderHandler=new Laya.Handler(this,this.onStepRender);this.liststep.selectHandler=new Laya.Handler(this,this.onStepSelect);this.liststep.selectEnable=true;this.liststep.hScrollBarSkin=" ";this.liststep.array=[];this.listTime.itemRender=h.GmBattleTimeItem;this.listTime.renderHandler=new Laya.Handler(this,this.onTimeRender);this.listTime.vScrollBarSkin=" ";this.listTime.array=[];this.textdes.text="";this.btnRecord.on(Laya.Event.CLICK,this,this.onRecord);this.btnCheck.on(Laya.Event.CLICK,this,this.checkDetail);this.btnClear.on(Laya.Event.CLICK,this,this.onClear);this.btnPlay.on(Laya.Event.CLICK,this,this.onPlay);this.btnEnd.on(Laya.Event.CLICK,this,this.onEnd);this.btnContinue.on(Laya.Event.CLICK,this,this.onContinue);this.btnStop.on(Laya.Event.CLICK,this,this.onStop);this.btnTime.on(Laya.Event.CLICK,this,this.onTime);if(h.GmModel.getIns().boRecord){this.btnRecord.label="停止记录"}else{this.btnRecord.label="开始记录"}this.imgSkill=new Laya.Image;this.imgSkill.mouseEnabled=false;this.box.addChild(this.imgSkill);this.imgSkill.anchorX=this.imgSkill.anchorY=.5;this.imgSkill.visible=false;this.box1.visible=true;this.box2.visible=false;this.listTime.visible=false;this.playspeed.type="number";this.playspeed.text="1"};p.prototype.onRecord=function(){h.GmModel.getIns().boRecord=!h.GmModel.getIns().boRecord;if(h.GmModel.getIns().boRecord){this.btnRecord.label="停止记录";var t={t:"gmpropntf  1"};var e=JSON.stringify(t);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,e)}else{this.btnRecord.label="开始记录";var t={t:"gmpropntf  0"};var e=JSON.stringify(t);app.ProtocolRequest.ChattingRequest(chat.ChatModel.CHANNEL.WORLD,game.Context.mainRoleId,e)}};p.prototype.checkDetail=function(){if(this.currVo){app.ViewManager.toggleDialog(h.GmBattleDetail,1,0,this.currVo)}};p.prototype.onClear=function(){this._model.clearAll();this.listid.array=[];this.liststep.array=[];this.textdes.text="";this.clearBattle();this.clearAttact();this.onEnd();this.currVo=null};p.prototype.onRecordChange=function(){this.listid.array=this._model.getBattleArr()};p.prototype.onTimeChange=function(){this.listTime.array=this._model.tArr};p.prototype.onIdRender=function(t,e){t.setData(t.dataSource);t.showSelect(e==this.listid.selectedIndex)};p.prototype.onIdSelect=function(t){this.clearBattle();if(this.listid.selectedItem){this.currVo=this.listid.selectedItem;this.createBattle();this.liststep.array=this.currVo.steps;this.liststep.selectedIndex=0;this.setBattleStep(this.currVo.steps[0])}};p.prototype.onStepRender=function(t,e){t.setData(t.dataSource);t.showSelect(e==this.liststep.selectedIndex)};p.prototype.onStepSelect=function(t){if(this.liststep.selectedItem){this.setBattleStep(this.liststep.selectedItem)}};p.prototype.onTimeRender=function(t,e){t.setData(t.dataSource)};p.prototype.onDisplay=function(){this._model.on(battle.BattleRecordCenter.RECORD_REFRESH,this,this.onRecordChange);this._model.on(battle.BattleRecordCenter.TIME_REFRESH,this,this.onTimeChange);this.callLater(this.refreshAll)};p.prototype.onUnDisplay=function(){this._model.off(battle.BattleRecordCenter.RECORD_REFRESH,this,this.onRecordChange);this._model.off(battle.BattleRecordCenter.TIME_REFRESH,this,this.onTimeChange)};p.prototype.refreshAll=function(){this.listid.array=this._model.getBattleArr()};p.prototype.clearBattle=function(){for(var t in this.viewMap){this.viewMap[t].removeSelf();Laya.Pool.recover(h.GmCharView.SINGLE_KEY,this.viewMap[t]);this.viewMap[t]=null;delete this.viewMap[t]}this.textdes.text=""};p.prototype.createBattle=function(){var t=0;for(var e in this.currVo.camps){t++;var i=this.currVo.camps[e];var n=i.length;for(var r=0;r<n;r++){var o=i[r];var a=Laya.Pool.getItemByClass(h.GmCharView.SINGLE_KEY,h.GmCharView);a.init(o);this.viewMap[o.uid.toString()]=a;var s=r%5;var l=Math.floor(r/5);var u=void 0;if(n>(l+1)*5){u=(this.box.width-5*p.CW)/2}else{u=(this.box.width-(n-l*5)*p.CW)/2}if(t==1){a.y=this.box.height-100-200*l;a.x=75+u+p.CW*s}else{a.y=100+200*l;a.x=75+u+p.CW*s}a.alpha=1;this.box.addChild(a)}}};p.prototype.setBattleStep=function(t){this.clearAttact();this.textdes.text=app.getLang("战斗时间：{0}\n",t.time);this.textdes.text+=this._model.getDes(t.type,t.data,this.currVo.charmap,t.resp);for(var e=0,i=t.states.length;e<i;e++){var n=t.states[e];var r=this.viewMap[n.uid.toString()];if(r){r.updataState(n)}}for(var o in this.viewMap){var r=this.viewMap[o];if(r&&r.data.bosummon){if(t.step<r.data.showstep){r.alpha=0}else if(t.step>=r.data.hidestep){r.alpha=.2}else{r.alpha=1}}}this.setArrows(t.type,t.data)};p.prototype.setArrows=function(t,e){var i="";if(t==1){var n=e;this.setAttack(n.objId,n.tarId);var r=this.viewMap[n.objId.toString()];var o=csv.SkillProxy.getIns().getCfg(n.usekill).skillshow;if(o!=""){this.imgSkill.visible=true;this.imgSkill.skin="zhandou/"+o+".png";this.imgSkill.x=r.x;this.imgSkill.y=r.y-90}}else if(t==2){var n=e;for(var a=0,s=n.hps.length;a<s;a++){var l=n.hps[a];this.setAttack(n.objId,l.tar);this.setEff(l)}}else if(t==3){var u=e;for(var a=0,s=u.length;a<s;a++){var l=u[a];this.setEff(l)}}else if(t==7){var n=e;for(var a=0,s=n.hps.length;a<s;a++){var l=n.hps[a];this.setEff(l)}}return i};p.prototype.setAttack=function(t,e){if(!Uint64.equal(t,e)){var i=Laya.Pool.getItemByClass("GmHurtArrow",h.GmHurtArrow);var n=this.viewMap[t.toString()];var r=this.viewMap[e.toString()];i.setTarget(n.x,n.y,r.x,r.y);this.box.addChild(i);this.arrowArr.push(i)}};p.prototype.setEff=function(t){for(var e=0,i=p.NO_HURT_ARR.length;e<i;e++){if(battle.HurtView.checkType(t.effectType,p.NO_HURT_ARR[e])){return}}var n=Laya.Pool.getItemByClass("battle.HurtView_report",battle.HurtView);n.setData(t.effectType,2,t.hurt.toNumber(),0,t.def==1);var r=this.viewMap[t.tar.toString()];n.x=r.x;n.y=r.y-90;this.box.addChild(n);this.hurtArr.push(n)};p.prototype.clearAttact=function(){this.imgSkill.visible=false;while(this.arrowArr.length>0){var t=this.arrowArr.shift();t.removeSelf();Laya.Pool.recover("GmHurtArrow",t)}while(this.hurtArr.length>0){var e=this.hurtArr.shift();e.removeSelf();Laya.Pool.recover("battle.HurtView_report",e)}};p.prototype.onPlay=function(){if(!this.currVo){manager.FlowManager.instance.flowByStyle1("请先选择一个战斗");return}if(this.boPlaying){manager.FlowManager.instance.flowByStyle1("播放中，请先结束");return}this.box1.visible=false;this.box2.visible=true;this.bei=parseInt(this.playspeed.text);if(!this.imgSkill2){this.imgSkill2=new Laya.Image;this.imgSkill2.mouseEnabled=false;this.box2.addChild(this.imgSkill2);this.imgSkill2.anchorX=this.imgSkill2.anchorY=.5;this.imgSkill2.visible=false}this.createBattle2();this.boPlaying=true;this.currtime=0;this.maxtime=this.currVo.usetime*this.bei;this.progress.value=0;this.steps=this.currVo.steps.concat();this.loopGame();Laya.timer.loop(50*this.bei,this,this.loopGame);this.btnContinue.disabled=true;this.btnStop.disabled=false};p.prototype.onPlayEnd=function(){this.boPlaying=false;Laya.timer.clear(this,this.loopGame);this.btnContinue.disabled=true;this.btnStop.disabled=true;this.clearAttact2()};p.prototype.onEnd=function(){this.boPlaying=false;Laya.timer.clear(this,this.loopGame);this.progress.value=0;this.box1.visible=true;this.box2.visible=false;this.clearAttact2();this.clearRoles()};p.prototype.onContinue=function(){Laya.timer.loop(50*this.bei,this,this.loopGame);this.btnContinue.disabled=true;this.btnStop.disabled=false};p.prototype.onStop=function(){Laya.timer.clear(this,this.loopGame);this.btnContinue.disabled=false;this.btnStop.disabled=true;this.clearAttact2()};p.prototype.onTime=function(){this.listTime.visible=!this.listTime.visible};p.prototype.loopGame=function(){if(this.currtime>this.maxtime){this.onPlayEnd();return}var t=0;var e="";var i=false;while(this.steps[t]&&this.steps[t].time*this.bei<=this.currtime){if(!i){this.clearAttact2();i=true}e+=battle.BattleRecordCenter.getIns().getDes(this.steps[t].type,this.steps[t].data,this.currVo.charmap,this.steps[t].resp);this.setBattleStep2(this.steps[t]);t++}if(i){this.texttimedes.text=e;this.steps.splice(0,t)}this.progress.value=this.currtime/this.maxtime;this.currtime+=50*this.bei};p.prototype.createBattle2=function(){var t=0;for(var e in this.currVo.camps){t++;var i=this.currVo.camps[e];var n=i.length;for(var r=0;r<n;r++){var o=i[r];var a=Laya.Pool.getItemByClass(h.GmCharView.SINGLE_KEY,h.GmCharView);a.init(o);this.viewMap2[o.uid.toString()]=a;var s=r%5;var l=Math.floor(r/5);var u=void 0;if(n>(l+1)*5){u=(this.boxloop.width-5*120)/2}else{u=(this.boxloop.width-(n-l*5)*120)/2}if(t==1){a.y=this.boxloop.height-100-200*l;a.x=75+u+120*s}else{a.y=100+200*l;a.x=75+u+120*s}this.boxloop.addChild(a)}}};p.prototype.setBattleStep2=function(t){for(var e=0,i=t.states.length;e<i;e++){var n=t.states[e];var r=this.viewMap2[n.uid.toString()];if(r){r.updataState(n)}}this.setArrows2(t.type,t.data)};p.prototype.setArrows2=function(t,e){var i="";if(t==1){var n=e;this.setAttack(n.objId,n.tarId);var r=this.viewMap2[n.objId.toString()];var o=csv.SkillProxy.getIns().getCfg(n.usekill).skillshow;if(o!=""){this.imgSkill2.visible=true;this.imgSkill2.skin="zhandou/"+o+".png";this.imgSkill2.x=r.x;this.imgSkill2.y=r.y-90}}else if(t==2){var n=e;for(var a=0,s=n.hps.length;a<s;a++){var l=n.hps[a];this.setAttack2(n.objId,l.tar);this.setEff2(l)}}else if(t==3){var u=e;for(var a=0,s=u.length;a<s;a++){var l=u[a];this.setEff2(l)}}else if(t==7){var n=e;for(var a=0,s=n.hps.length;a<s;a++){var l=n.hps[a];this.setEff(l)}}return i};p.prototype.setAttack2=function(t,e){if(!Uint64.equal(t,e)){var i=Laya.Pool.getItemByClass("GmHurtArrow",h.GmHurtArrow);var n=this.viewMap2[t.toString()];var r=this.viewMap2[e.toString()];i.setTarget(n.x,n.y,r.x,r.y);this.box2.addChild(i);this.arrowArr2.push(i)}};p.prototype.setEff2=function(t){for(var e=0,i=p.NO_HURT_ARR.length;e<i;e++){if(battle.HurtView.checkType(t.effectType,p.NO_HURT_ARR[e])){return}}var n=Laya.Pool.getItemByClass("battle.HurtView_report",battle.HurtView);n.setData(t.effectType,2,t.hurt.toNumber(),0,t.def==1);var r=this.viewMap2[t.tar.toString()];n.x=r.x;n.y=r.y-90;this.box2.addChild(n);this.hurtArr2.push(n)};p.prototype.clearAttact2=function(){if(this.imgSkill2){this.imgSkill2.visible=false}while(this.arrowArr2.length>0){var t=this.arrowArr2.shift();t.removeSelf();Laya.Pool.recover("GmHurtArrow",t)}while(this.hurtArr2.length>0){var e=this.hurtArr2.shift();e.removeSelf();Laya.Pool.recover("battle.HurtView_report",e)}};p.prototype.clearRoles=function(){for(var t in this.viewMap2){this.viewMap2[t].removeSelf();Laya.Pool.recover(h.GmCharView.SINGLE_KEY,this.viewMap2[t]);this.viewMap2[t]=null;delete this.viewMap2[t]}};p.SINGLE_KEY="gm.GmBattleReportView";p.CW=180;p.NO_HURT_ARR=[battle.HurtView.EFFECT_ENUM.SKILL_HP_RECOVER,battle.HurtView.EFFECT_ENUM.PASSIVE_HP_RECOVER,battle.HurtView.EFFECT_ENUM.FUZHOU_HP_RECOVER,battle.HurtView.EFFECT_ENUM.OUT_SIDE_FUNC_HP_RECOVER,battle.HurtView.EFFECT_ENUM.TRIGMASTER_HP_RECOVER,battle.HurtView.EFFECT_ENUM.SKILL_MP_RECOVER,battle.HurtView.EFFECT_ENUM.PASSIVE_MP_RECOVER,battle.HurtView.EFFECT_ENUM.OUT_SIDE_FUNC_MP_RECOVER,battle.HurtView.EFFECT_ENUM.TRIGMASTER_MP_RECOVER];return p}(ui.GM.GmBattleReportUI);h.GmBattleReportView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.lblid.text=t.bid.toString();this.lblclient.text=t.client.toString();this.lblServer.text=t.server.toString();this.lbltotalclient.text=t.totalClient.toString();this.lbltotalserver.text=t.totalServer.toString()};e.SINGLE_KEY="gm.GmBattleTimeItem";return e}(ui.GM.GmBattleTimeUI);t.GmBattleTimeItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){var e=csv.StatusProxy.getIns().getCfg(t.buffId,t.level);this.lblname.text=app.getLang(e.name)};e.SINGLE_KEY="gm.GmCharBuffItem";return e}(ui.GM.GmBuffUI);t.GmCharBuffItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.anchorX=this.anchorY=.5;this.listbuff.itemRender=i.GmCharBuffItem;this.listbuff.renderHandler=new Laya.Handler(this,this.onRender);this.listbuff.hScrollBarSkin="";this.listbuff.vScrollBarSkin=" "};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.onRender=function(t,e){t.setData(t.dataSource)};e.prototype.refreshAll=function(){};e.prototype.init=function(t){this.data=t;this.uid=t.uid;this.lblname.text=t.name;this.lblpos.text=t.pos.toString();this.lblhp.text=t.hp+"/"+t.maxhp;this.lblmp.text=t.mp+"/"+t.maxmp;this.listbuff.array=[]};e.prototype.updataState=function(t){this.lblhp.text=t.hp+"/"+t.maxhp;this.lblmp.text=t.mp+"/"+t.maxmp;this.listbuff.array=t.buffs;this.gray=t.hp==0};e.SINGLE_KEY="gm.GmCharView";return e}(ui.GM.GmCharItemUI);i.GmCharView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.skin="public/bg_jiantou_xia.png";t.sizeGrid="4,0,16,0";t.pivot(10,0);t.alpha=.7;return t}t.prototype.setTarget=function(t,e,i,n){this.x=t;this.y=e;var r=Math.atan2(n-e,i-t);this.rotation=r/Math.PI*180-90;this.height=game.SceneModel.getDisByTowPoint(t,e,i,n)};return t}(Laya.Image);t.GmHurtArrow=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnminu.on(Laya.Event.CLICK,this,this.onRemove);this._data=new skill.StageSkillBoomVo};e.prototype.onRemove=function(){this.clearAll();this.recover();this.removeHandler.runWith(this)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.lblBoomUrl.text=this._data.boomurl;this.lblX.text=this._data.x.toString();this.lblY.text=this._data.y.toString();this.lblScaleX.text=this._data.scaleX.toString();this.lblScaleY.text=this._data.scaleY.toString();this.minAngle.text=this._data.minAngle.toString();this.maxAngle.text=this._data.maxAngle.toString();this.lblMinDisX.text=this._data.mindisX.toString();this.lblMaxDisX.text=this._data.maxdisX.toString();this.lblMinDisY.text=this._data.mindisY.toString();this.lblMaxDisY.text=this._data.maxdisY.toString();this.lblDuration.text=this._data.duration.toString();this.lblNum.text=this._data.num.toString();this.lblStartDelay.text=this._data.startdelay.toString();this.music.text=this._data.music};e.prototype.getData=function(){this._data.boomurl=this.lblBoomUrl.text;this._data.x=this.lblX.text==""?0:Number(this.lblX.text);this._data.y=this.lblY.text==""?0:Number(this.lblY.text);this._data.scaleX=this.lblScaleX.text==""?1:Number(this.lblScaleX.text);this._data.scaleY=this.lblScaleY.text==""?1:Number(this.lblScaleY.text);this._data.minAngle=this.minAngle.text==""?1:Number(this.minAngle.text);this._data.maxAngle=this.maxAngle.text==""?1:Number(this.maxAngle.text);this._data.mindisX=this.lblMinDisX.text==""?0:Number(this.lblMinDisX.text);this._data.maxdisX=this.lblMaxDisX.text==""?0:Number(this.lblMaxDisX.text);this._data.mindisY=this.lblMinDisY.text==""?200:Number(this.lblMinDisY.text);this._data.maxdisY=this.lblMaxDisY.text==""?600:Number(this.lblMaxDisY.text);this._data.duration=this.lblDuration.text==""?1e3:Number(this.lblDuration.text);this._data.num=this.lblNum.text==""?10:Number(this.lblNum.text);this._data.startdelay=this.lblStartDelay.text==""?0:Number(this.lblStartDelay.text);this._data.music=this.music.text;return this._data};e.prototype.clearAll=function(){this.lblBoomUrl.text="skill_pitianliedi01";this.lblX.text="0";this.lblY.text="0";this.lblScaleX.text="1";this.lblScaleY.text="1";this.minAngle.text="0";this.maxAngle.text="0";this.lblMinDisX.text="0";this.lblMaxDisX.text="0";this.lblMinDisY.text="200";this.lblMaxDisY.text="600";this.lblDuration.text="1000";this.lblNum.text="10";this.lblStartDelay.text="0";this.music.text=""};e.prototype.recover=function(){this.removeSelf();Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="gm.GmSkillBoomItem";return e}(ui.GM.GmSkillBoomItemUI);t.GmSkillBoomItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnminu.on(Laya.Event.CLICK,this,this.onRemove);this._data=new skill.StageSkillFlyVo};e.prototype.onRemove=function(){this.clearAll();this.recover();this.removeHandler.runWith(this)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.lblFlyUrl.text=this._data.flyurl;this.lblBoomUrl.text=this._data.boomurl;this.lblX.text=this._data.x.toString();this.lblY.text=this._data.y.toString();this.lblScaleX.text=this._data.scaleX.toString();this.lblScaleY.text=this._data.scaleY.toString();this.useTarget.selected=this._data.useTarget;this.targetX.text=this._data.targetX.toString();this.targetY.text=this._data.targetY.toString();this.lblFlyNum.text=this._data.flynum.toString();this.lblNumDelay.text=this._data.flydelay.toString();this.lblSpeed.text=this._data.speed.toString();this.lblAngle.text=this._data.angle.toString();this.lblMinDisX.text=this._data.offXL.toString();this.lblMaxDisX.text=this._data.offXR.toString();this.lblMinDisY.text=this._data.minDis.toString();this.lblMaxDisY.text=this._data.maxDis.toString();this.lblDuration.text=this._data.duration.toString();this.lblNum.text=this._data.num.toString();this.lblStartDelay.text=this._data.startdelay.toString();this.flyMusic.text=this._data.flyMusic;this.boomMusic.text=this._data.boomMusic};e.prototype.getData=function(){this._data.flyurl=this.lblFlyUrl.text;this._data.boomurl=this.lblBoomUrl.text;this._data.x=this.lblX.text==""?0:Number(this.lblX.text);this._data.y=this.lblY.text==""?0:Number(this.lblY.text);this._data.scaleX=this.lblScaleX.text==""?1:Number(this.lblScaleX.text);this._data.scaleY=this.lblScaleY.text==""?1:Number(this.lblScaleY.text);this._data.useTarget=this.useTarget.selected;this._data.targetX=this.targetX.text==""?1:Number(this.targetX.text);this._data.targetY=this.targetY.text==""?1:Number(this.targetY.text);this._data.flynum=this.lblFlyNum.text==""?1:Number(this.lblFlyNum.text);this._data.flydelay=this.lblNumDelay.text==""?0:Number(this.lblNumDelay.text);this._data.speed=this.lblSpeed.text==""?1:Number(this.lblSpeed.text);this._data.angle=this.lblAngle.text==""?45:Number(this.lblAngle.text);this._data.offXL=this.lblMinDisX.text==""?0:Number(this.lblMinDisX.text);this._data.offXR=this.lblMaxDisX.text==""?0:Number(this.lblMaxDisX.text);this._data.minDis=this.lblMinDisY.text==""?200:Number(this.lblMinDisY.text);this._data.maxDis=this.lblMaxDisY.text==""?900:Number(this.lblMaxDisY.text);this._data.duration=this.lblDuration.text==""?1e3:Number(this.lblDuration.text);this._data.num=this.lblNum.text==""?10:Number(this.lblNum.text);this._data.startdelay=this.lblStartDelay.text==""?300:Number(this.lblStartDelay.text);this._data.flyMusic=this.flyMusic.text;this._data.boomMusic=this.boomMusic.text;return this._data};e.prototype.clearAll=function(){this.lblFlyUrl.text="skill_erwa_aoe02";this.lblBoomUrl.text="skill_erwa_aoe03";this.lblX.text="0";this.lblY.text="0";this.lblScaleX.text="1";this.lblScaleY.text="1";this.useTarget.selected=false;this.targetX.text="0";this.targetY.text="0";this.lblFlyNum.text="1";this.lblNumDelay.text="0";this.lblSpeed.text="1";this.lblAngle.text="45";this.lblMinDisX.text="0";this.lblMaxDisX.text="0";this.lblMinDisY.text="200";this.lblMaxDisY.text="900";this.lblDuration.text="1000";this.lblNum.text="10";this.lblStartDelay.text="300";this.flyMusic.text="";this.boomMusic.text=""};e.prototype.recover=function(){this.removeSelf();Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="gm.GmSkillFlyItem";return e}(ui.GM.GmSkillFlyItemUI);t.GmSkillFlyItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(o){var t=function(r){__extends(t,r);function t(){var t=r!==null&&r.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){r.prototype.initialize.call(this);this._model=o.GmModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemArr=[];this.btnadd.on(Laya.Event.CLICK,this,this.onAdd);this.btnLoad.on(Laya.Event.CLICK,this,this.onLoad);this.btnCopy.on(Laya.Event.CLICK,this,this.onCopy);this.btnPlay.on(Laya.Event.CLICK,this,this.onPlay);this.btnReset.on(Laya.Event.CLICK,this,this.onReset);this.tab.selectedIndex=0;this.textJson.text="";this.xiala.vScrollBarSkin="";this.xiala.vScrollBar.isVertical=true;this.xiala.vScrollBar.elasticBackTime=600;this.xiala.vScrollBar.elasticDistance=200;this.endHandler=new Laya.Handler(this,this.onEnd);this.removeHandler=new Laya.Handler(this,this.removeSkill);this.listMediator=new common.ListSelectMediator(this.listskill,this.btnskill,this.lblSkill,o.GmSkillTypeItem,new Laya.Handler(this,this.onSelectRender),31,300,["id","name"]);this.listMediator.boUp=true;this.showSkills=[];var t=csv.SkillProxy.getIns().getArr();for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n.bigeffect!=""){this.showSkills.push({id:n.id,name:n.name+n.level,json:n.bigeffect})}}this.listMediator.array=this.showSkills;this.listMediator.init();this.lblSkill.text="选择技能"};t.prototype.onSelectRender=function(t){for(var e=0,i=this.showSkills.length;e<i;e++){var n=this.showSkills[e];if(n.id==t){this.showSkill=n;this.lblSkill.text=n.name;this.textJson.text=n.json;break}}};t.prototype.onAdd=function(){var t=this.tab.selectedIndex;var e;if(t==0){e=new skill.StageSkillShowVo}else if(t==1){e=new skill.StageSkillStartVo}else if(t==2){e=new skill.StageSkillFlyVo}else if(t==3){e=new skill.StageSkillBoomVo}this.addSkill(e)};t.prototype.onLoad=function(){if(this.textJson.text==""){manager.FlowManager.instance.flowByStyle1("请先导入json");return}this.clear();var t=this.textJson.text;var e=JSON.parse(t);for(var i=0,n=e.length;i<n;i++){var r=e[i];var o=void 0;if(r.type==0){o=new skill.StageSkillShowVo;skill.StageSkillShowVo.setJson(o,r)}else if(r.type==1){o=new skill.StageSkillStartVo;skill.StageSkillStartVo.setJson(o,r)}else if(r.type==2){o=new skill.StageSkillFlyVo;skill.StageSkillFlyVo.setJson(o,r)}else if(r.type==3){o=new skill.StageSkillBoomVo;skill.StageSkillBoomVo.setJson(o,r)}this.addSkill(o)}};t.prototype.onCopy=function(){var t=[];for(var e=0,i=this.itemArr.length;e<i;e++){var n=this.itemArr[e];var r=void 0;var o=n.getData();if(o.type==0){r=skill.StageSkillShowVo.getJson(o)}else if(o.type==1){r=skill.StageSkillStartVo.getJson(o)}else if(o.type==2){r=skill.StageSkillFlyVo.getJson(o)}else if(o.type==3){r=skill.StageSkillBoomVo.getJson(o)}t.push(r)}var a=JSON.stringify(t);this.textJson.text=a};t.prototype.onPlay=function(){if(this.textJson.text==""){manager.FlowManager.instance.flowByStyle1("请先生成json");return}app.ViewManager.toggleDialog(t,-1,0);o.GmModel.getIns().boGmBattle=true;this._model.event("GM_BATTLE");game.Context.on(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.createBattle);scene.SceneMediator.getInstance().initScene(1);app.AppContainer.uiLayer.visible=false};t.prototype.createBattle=function(){game.Context.off(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.createBattle);this.battleMonsters=[];for(var t=0;t<5;t++){var e=new role.MonsterVO;e.insId=Uint64.initClientUint64();e.hp=100;e.maxhp=100;e.mp=100;e.maxmp=100;e.monsterId=647;e.name="怪物"+t;e.movetype=1;e.hittype=1;e.setCfgId(e.monsterId);battle.BattleManager.getIns().createMonster(e,game.SceneModel.random(20,40),game.SceneModel.random(20,40),6);this.battleMonsters.push(e)}var i=new role.RoleVO;i.insId=Uint64.initClientUint64();i.hp=100;i.maxhp=100;i.mp=100;i.maxmp=100;i.name="角色";i.prof=7;battle.BattleManager.getIns().createRole(i,30,30,2);scene.SceneMediator.getInstance().setCameraPos(30,30);this.battleRoleVO=i;Laya.timer.once(500,this,this.playAtt)};t.prototype.playAtt=function(){var t=new battle.AttackVo;t.targetView=scene.SceneMediator.getInstance().getViewById(this.battleMonsters[0].insId);t.attackView=scene.SceneMediator.getInstance().getViewById(this.battleRoleVO.insId);t.skill={};t.skill.bigeffect=this.textJson.text;t.hps=[];for(var e=0;e<5;e++){var i=this.battleMonsters[e];var n=new EffectHpData;n.effectType=new Uint64;n.effectType.addNumber(128);n.tar=i.insId;var r=new Uint64;r.addNumber(666666);n.hurt=n.hp=n.maxhp=n.mp=n.maxmp=r;n.def=0;t.hps.push(n)}t.usetime=0;skill.StageSkillEffect.ins.cast(t,this.endHandler)};t.prototype.onEnd=function(){Laya.timer.once(1e3,this,this.delayEnd);app.TimerRewriter.boStop=false};t.prototype.delayEnd=function(){app.ViewManager.toggleDialog(t,1,0)};t.prototype.onReset=function(){this.textJson.text="";this.clear()};t.prototype.onDisplay=function(){this._model.boGm=true;this.callLater(this.refreshAll);app.AppContainer.uiLayer.visible=false};t.prototype.onUnDisplay=function(){app.AppContainer.uiLayer.visible=true};t.prototype.refreshAll=function(){};t.prototype.clear=function(){for(var t=0,e=this.itemArr.length;t<e;t++){this.itemArr[t].clearAll();this.itemArr[t].recover()}this.itemArr=[]};t.prototype.addSkill=function(t){var e;if(t.type==0){e=Laya.Pool.getItemByClass(o.GmSkillShowItem.SINGLE_KEY,o.GmSkillShowItem)}else if(t.type==1){e=Laya.Pool.getItemByClass(o.GmSkillStartItem.SINGLE_KEY,o.GmSkillStartItem)}else if(t.type==2){e=Laya.Pool.getItemByClass(o.GmSkillFlyItem.SINGLE_KEY,o.GmSkillFlyItem)}else if(t.type==3){e=Laya.Pool.getItemByClass(o.GmSkillBoomItem.SINGLE_KEY,o.GmSkillBoomItem)}e.removeHandler=this.removeHandler;this.boxItems.addChild(e);e.setData(t);this.itemArr.push(e);this.layout()};t.prototype.removeSkill=function(t){var e=this.itemArr.indexOf(t);this.itemArr.splice(e,1);this.layout()};t.prototype.layout=function(){var t=0;for(var e=0,i=this.itemArr.length;e<i;e++){var n=this.itemArr[e];n["y"]=t;t+=n["height"]}this.boxItems.height=t};t.SINGLE_KEY="gm.GmSkillMakerView";return t}(ui.GM.GmSkillSettingUI);o.GmSkillMakerView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnminu.on(Laya.Event.CLICK,this,this.onRemove);this._data=new skill.StageSkillShowVo};e.prototype.onRemove=function(){this.clearAll();this.recover();this.removeHandler.runWith(this)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.lblAniUrl.text=this._data.aninum.toString();this.lblStopTime.text=this._data.stoptime.toString();this.lblAlphaTime.text=this._data.alphatime.toString();this.lblAlpha.text=this._data.alpha.toString();this.lblBreakTime.text=this._data.breaktime.toString();this.music.text=this._data.music;this.musicDelay.text=this._data.musicDelay.toString();this.hurtDelay.text=this._data.hurtDelay.toString();this.hurtNum.text=this._data.hurtNum.toString();this.hurtTime.text=this._data.hurtTime.toString()};e.prototype.getData=function(){this._data.aninum=this.lblAniUrl.text==""?1:Number(this.lblAniUrl.text);this._data.stoptime=this.lblStopTime.text==""?0:Number(this.lblStopTime.text);this._data.alphatime=this.lblAlphaTime.text==""?300:Number(this.lblAlphaTime.text);this._data.alpha=this.lblAlpha.text==""?0:Number(this.lblAlpha.text);this._data.breaktime=this.lblBreakTime.text==""?100:Number(this.lblBreakTime.text);this._data.music=this.music.text;this._data.musicDelay=this.musicDelay.text==""?0:Number(this.musicDelay.text);this._data.hurtDelay=this.hurtDelay.text==""?0:Number(this.hurtDelay.text);this._data.hurtNum=this.hurtNum.text==""?20:Number(this.hurtNum.text);this._data.hurtTime=this.hurtTime.text==""?100:Number(this.hurtTime.text);return this._data};e.prototype.clearAll=function(){this.lblAniUrl.text="1";this.lblStopTime.text="0";this.lblAlphaTime.text="300";this.lblAlpha.text="0";this.lblBreakTime.text="100";this.music.text="";this.musicDelay.text="0";this.hurtDelay.text="500";this.hurtNum.text="20";this.hurtTime.text="100"};e.prototype.recover=function(){this.removeSelf();Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="gm.GmSkillShowItem";return e}(ui.GM.GmSkillShowItemUI);t.GmSkillShowItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnminu.on(Laya.Event.CLICK,this,this.onRemove);this._data=new skill.StageSkillStartVo};e.prototype.onRemove=function(){this.clearAll();this.recover();this.removeHandler.runWith(this)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;this.lblUrl.text=this._data.url;this.starttime.text=this._data.starttime.toString();this.lblX.text=this._data.x.toString();this.lblY.text=this._data.y.toString();this.lblScaleX.text=this._data.scaleX.toString();this.lblScaleY.text=this._data.scaleY.toString();this.minAngle.text=this._data.minAngle.toString();this.maxAngle.text=this._data.maxAngle.toString();this.lblDuration.text=this._data.duration.toString();this.checkLoop.selected=this._data.loop;this.music.text=this._data.music;this.musicDelay.text=this._data.musicDelay.toString()};e.prototype.getData=function(){this._data.url=this.lblUrl.text;this._data.starttime=this.starttime.text==""?0:Number(this.starttime.text);this._data.x=this.lblX.text==""?0:Number(this.lblX.text);this._data.y=this.lblY.text==""?-400:Number(this.lblY.text);this._data.scaleX=this.lblScaleX.text==""?1:Number(this.lblScaleX.text);this._data.scaleY=this.lblScaleY.text==""?1:Number(this.lblScaleY.text);this._data.minAngle=this.minAngle.text==""?1:Number(this.minAngle.text);this._data.maxAngle=this.maxAngle.text==""?1:Number(this.maxAngle.text);this._data.loop=this.checkLoop.selected;this._data.duration=this.lblDuration.text==""?0:Number(this.lblDuration.text);this._data.music=this.music.text;this._data.musicDelay=this.musicDelay.text==""?0:Number(this.musicDelay.text);return this._data};e.prototype.clearAll=function(){this.lblUrl.text="skill_erwa_aoe01";this.starttime.text="0";this.lblX.text="0";this.lblY.text="-400";this.lblScaleX.text="1";this.lblScaleY.text="1";this.minAngle.text="0";this.maxAngle.text="0";this.checkLoop.selected=false;this.lblDuration.text="0";this.music.text="";this.musicDelay.text="0"};e.prototype.recover=function(){this.removeSelf();Laya.Pool.recover(e.SINGLE_KEY,this)};e.SINGLE_KEY="gm.GmSkillStartItem";return e}(ui.GM.GmSkillStartItemUI);t.GmSkillStartItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onClick=function(){};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.shuxing.text=app.getLang(t.name)};e.SINGLE_KEY="skill.GmSkillTypeItem";return e}(ui.zudui.mubiaofubenitemUI);t.GmSkillTypeItem=e})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(r){var t=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.getIns=function(){return app.Singleton.getInstance(n)};n.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._data=new skill.SceneSkillVo;this.release=new ui.SkillMaker.SkillReleaseSetUI;this.bullet=new ui.SkillMaker.SkillBulletSetUI;this.center=new ui.SkillMaker.SkillCenterSetUI;this.hit=new ui.SkillMaker.SkillHitSetUI;this.move=new ui.SkillMaker.SkillMoveSetUI;this.tail=new ui.SkillMaker.SkillTailSetUI;this.tabType.selectHandler=new Laya.Handler(this,this.onTabTypeHandler);this.tabDestory.selectHandler=new Laya.Handler(this,this.onTabDestoryHandler);this.posType.selectHandler=new Laya.Handler(this,this.onTabPosHandler);this.btnRemove.clickHandler=new Laya.Handler(this,this.onRemove);this.hitSelect.on(Laya.Event.CHANGE,this,this.layout);this.moveSelect.on(Laya.Event.CHANGE,this,this.layout);this.tailSelect.on(Laya.Event.CHANGE,this,this.layout);this.bullet.tabTarPos.selectHandler=new Laya.Handler(this,this.onTabBulletPosTypeHandler);this.bullet.jumpType.selectHandler=new Laya.Handler(this,this.onTabJumpTypeHandler);this.center.btnadd.on(Laya.Event.CLICK,this,this.onCenterAddClick);this.subCenters=[]};n.prototype.onCenterAddClick=function(){var t=this.subCenters.length;if(!this.subCenters[t]){this.subCenters[t]=new ui.SkillMaker.SkillCenterSubSetUI;this.subCenters[t].btnminu.on(Laya.Event.CLICK,this,this.removeSubCenter,[this.subCenters[t]]);this.addChild(this.subCenters[t])}var e=new skill.SceneSubCenterSkillVo;this._data.subCenters.push(e);this.createSubCenter(e,this.subCenters[t]);this.layout()};n.prototype.onTabTypeHandler=function(){if(this.tabType.selectedIndex==0){this.tabDestory.labels="播放一次,循环"}else if(this.tabType.selectedIndex==1){this.tabDestory.labels="击中目标"}else if(this.tabType.selectedIndex==2){this.tabDestory.labels="播放一次,循环"}this.tabDestory.selectedIndex=0;this.layout()};n.prototype.onTabDestoryHandler=function(){if(this.tabDestory.selectedIndex==1){this.desDuration.visible=this.loopDuration.visible=true}else{this.desDuration.visible=this.loopDuration.visible=false}};n.prototype.onTabPosHandler=function(){if(this.posType.selectedIndex==3){this.desSceneX.visible=this.sceneX.visible=this.desSceneY.visible=this.sceneY.visible=true}else{this.desSceneX.visible=this.sceneX.visible=this.desSceneY.visible=this.sceneY.visible=false}};n.prototype.onTabBulletPosTypeHandler=function(){if(this.bullet.tabTarPos.selectedIndex==1){this.bullet.desSceneX.visible=this.bullet.sceneX.visible=this.bullet.desSceneY.visible=this.bullet.sceneY.visible=true}else{this.bullet.desSceneX.visible=this.bullet.sceneX.visible=this.bullet.desSceneY.visible=this.bullet.sceneY.visible=false}};n.prototype.onTabJumpTypeHandler=function(){if(this.bullet.jumpType.selectedIndex==1){this.bullet.desLinkWidth.visible=this.bullet.linkWidth.visible=this.bullet.desLinkDelay.visible=this.bullet.linkDelay.visible=true}else{this.bullet.desLinkWidth.visible=this.bullet.linkWidth.visible=this.bullet.desLinkDelay.visible=this.bullet.linkDelay.visible=false}};n.prototype.layout=function(){var t=n.BASE_HEIGHT;if(this.hitSelect.selected){this.addChild(this.hit)}else{this.hit.removeSelf()}if(this.moveSelect.selected){this.addChild(this.move)}else{this.move.removeSelf()}if(this.tailSelect.selected){this.addChild(this.tail)}else{this.tail.removeSelf()}if(this.tabType.selectedIndex==0){this.moveSelect.visible=false;this.tailSelect.visible=false;this.addRelease();this.removeBullet();this.removeCenter();if(this.hitSelect.selected){this.addChild(this.hit);this.hit.y=t;t+=n.HIT_HEIGHT}this.release.y=t;t+=n.RELEASE_HEIGHT;this.height=t}else if(this.tabType.selectedIndex==1){this.moveSelect.visible=false;this.tailSelect.visible=false;this.addBullet();this.removeRelease();this.removeCenter();if(this.hitSelect.selected){this.hit.y=t;t+=n.HIT_HEIGHT}this.bullet.y=t;t+=n.BULLET_HEIGHT;this.height=t}else{this.tailSelect.visible=false;this.moveSelect.visible=true;this.addCenter();this.removeRelease();this.removeBullet();if(this.hitSelect.selected){this.hit.y=t;t+=n.HIT_HEIGHT}if(this.moveSelect.selected){this.move.y=t;t+=n.MOVE_HEIGHT;this.tailSelect.visible=true;if(this.tailSelect.selected){this.tail.y=t;t+=n.TAIL_HEIGHT}}this.center.y=t;t+=n.CENTER_HEIGHT;for(var e=0,i=this.subCenters.length;e<i;e++){this.subCenters[e].y=t;t+=n.SUB_CENTER_HEIGHT}this.height=t}r.SceneSkillMakerView.getIns().layout()};n.prototype.onRemove=function(){this.clearAll();this.recover();this.removeHandler.runWith(this)};n.prototype.addRelease=function(){this.addChild(this.release)};n.prototype.removeRelease=function(){this.release.removeSelf()};n.prototype.addBullet=function(){this.addChild(this.bullet)};n.prototype.removeBullet=function(){this.bullet.removeSelf()};n.prototype.addCenter=function(){this.addChild(this.center)};n.prototype.removeCenter=function(){this.center.removeSelf()};n.prototype.onDisplay=function(){this.callLater(this.refreshAll)};n.prototype.onUnDisplay=function(){};n.prototype.refreshAll=function(){};n.prototype.setData=function(t){this._data=t;this.url.text=this._data.url;this.music.text=this._data.music;this.musicRate.text=this._data.musicRate.toString();this.relySelect.selected=this._data.borely;this.starttime.text=this._data.starttime.toString();this.tabDestory.selectedIndex=this._data.destoryType;this.loopDuration.text=this._data.duration.toString();this.posType.selectedIndex=this._data.posType;this.sceneX.text=this._data.sceneX.toString();this.sceneY.text=this._data.sceneY.toString();this.hurtNum.text=this._data.hurtNum.toString();this.hurtdelay.text=this._data.hurtdelay.toString();this.tabType.selectedIndex=this._data.type;this.buffLink.text=this._data.buffLink.toString();this.hitSelect.selected=this._data.bohit;this.hit.tabHitPos.selectedIndex=this._data.hitPosType;this.hit.hitUrl.text=this._data.hitUrl;this.hit.hitMusic.text=this._data.hitMusic;this.hit.musicRate.text=this._data.hitMusicRate.toString();this.hit.hitCount.text=this._data.hitCount.toString();this.hit.hitRelySelect.selected=this._data.boHitRely;this.hit.hitStartTime.text=this._data.hitStartTime.toString();this.moveSelect.selected=this._data.bomove;this.move.tabMoveType.selectedIndex=this._data.movePosType;this.move.moveSpeed.text=this._data.moveSpeed.toString();this.move.moveScale.text=this._data.moveScale.toString();this.move.effectCd.text=this._data.effectCd.toString();this.move.moveStartX.text=this._data.moveStartX.toString();this.move.moveStartY.text=this._data.moveStartY.toString();this.move.moveEndX.text=this._data.moveEndX.toString();this.move.moveEndY.text=this._data.moveEndY.toString();this.move.movePath.text=this._data.movePath;this.move.appearAlpha.text=this._data.appearAlpha.toString();this.move.appearScale.text=this._data.appearScale.toString();this.move.appearTime.text=this._data.appearTime.toString();this.move.hideAlpha.text=this._data.hideAlpha.toString();this.move.hideScale.text=this._data.hideScale.toString();this.move.hideTime.text=this._data.hideTime.toString();this.tailSelect.selected=this._data.botail;this.tail.tailurl.text=this._data.tailurl;this.tail.tailStart.text=this._data.tailStart.toString();this.tail.taildelay.text=this._data.taildelay.toString();this.tail.tailX.text=this._data.tailX.toString();this.tail.tailY.text=this._data.tailY.toString();if(this._data.type==0){this.setRelease()}else if(this._data.type==1){this.setBullet()}else{this.setCenter()}this.layout()};n.prototype.setRelease=function(){this.release.dirType.selectedIndex=this._data.dirType};n.prototype.setBullet=function(){this.bullet.tabBulletType.selectedIndex=this._data.bulletType;this.bullet.bulletCount.text=this._data.bulletCount.toString();this.bullet.speed.text=this._data.speed.toString();this.bullet.speedRate.text=this._data.speedRate.toString();this.bullet.scaleRate.text=this._data.scaleRate.toString();this.bullet.scatterAngle.text=this._data.scatterAngle.toString();this.bullet.perdelay.text=this._data.scatterPerDelay.toString();this.bullet.tabTarPos.selectedIndex=this._data.tarPosType;this.bullet.sceneX.text=this._data.tarSx.toString();this.bullet.sceneY.text=this._data.tarSy.toString();this.bullet.jumpType.selectedIndex=this._data.jumpType;this.bullet.linkWidth.text=this._data.linkWidth.toString();this.bullet.linkDelay.text=this._data.linkDelay.toString()};n.prototype.setCenter=function(){this.center.tarCount.text=this._data.centerCount.toString();this.center.tabCenterTar.selectedIndex=this._data.centerTar;this.center.minAngle.text=this._data.minAngle.toString();this.center.maxAngle.text=this._data.maxAngle.toString();this.center.perdelay.text=this._data.centerPerDelay.toString();this.center.boShake.selected=this._data.boShake;this.center.shakeStart.text=this._data.shakeStart.toString();this.center.shakeDuration.text=this._data.shakeDuration.toString();this.center.shakeRange.text=this._data.shakeRange.toString();this.center.shakeRate.text=this._data.shakeRate.toString();for(var t=0,e=this._data.subCenters.length;t<e;t++){var i=this._data.subCenters[t];if(!this.subCenters[t]){this.subCenters[t]=new ui.SkillMaker.SkillCenterSubSetUI;this.addChild(this.subCenters[t]);this.subCenters[t].btnminu.on(Laya.Event.CLICK,this,this.removeSubCenter,[this.subCenters[t]])}this.createSubCenter(i,this.subCenters[t])}};n.prototype.createSubCenter=function(t,e){e.centerSubUrl.text=t.url;e.centerSubMusic.text=t.music;e.centerSubX.text=t.offX.toString();e.centerSubY.text=t.offY.toString();e.centerSubScaleX.text=t.scaleX.toString();e.centerSubScaleY.text=t.scaleY.toString();e.centerSubDelay.text=t.delay.toString()};n.prototype.removeSubCenter=function(t){var e=this.subCenters.indexOf(t);if(e!=-1){t.removeSelf();this.subCenters.splice(e,1);this._data.subCenters.splice(e,1)}this.layout()};n.prototype.getData=function(){this._data.url=this.url.text;this._data.music=this.music.text;this._data.musicRate=this.musicRate.text==""?100:Number(this.musicRate.text);this._data.borely=this.relySelect.selected;this._data.starttime=this.starttime.text==""?1:Number(this.starttime.text);this._data.destoryType=this.tabDestory.selectedIndex;this._data.duration=this.loopDuration.text==""?1:Number(this.loopDuration.text);this._data.posType=this.posType.selectedIndex;this._data.sceneX=this.sceneX.text==""?1:Number(this.sceneX.text);this._data.sceneY=this.sceneY.text==""?0:Number(this.sceneY.text);this._data.hurtNum=this.hurtNum.text==""?1:Number(this.hurtNum.text);this._data.hurtdelay=this.hurtdelay.text==""?50:Number(this.hurtdelay.text);this._data.type=this.tabType.selectedIndex;this._data.buffLink=Number(this.buffLink.text);if(this._data.type==0){this._data.dirType=this.release.dirType.selectedIndex}else if(this._data.type==1){this._data.bulletType=this.bullet.tabBulletType.selectedIndex;this._data.bulletCount=this.bullet.bulletCount.text==""?0:Number(this.bullet.bulletCount.text);this._data.speed=this.bullet.speed.text==""?0:Number(this.bullet.speed.text);this._data.speedRate=this.bullet.speedRate.text==""?0:Number(this.bullet.speedRate.text);this._data.scaleRate=this.bullet.scaleRate.text==""?0:Number(this.bullet.scaleRate.text);this._data.scatterAngle=this.bullet.scatterAngle.text==""?0:Number(this.bullet.scatterAngle.text);this._data.scatterPerDelay=this.bullet.perdelay.text==""?0:Number(this.bullet.perdelay.text);this._data.tarPosType=this.bullet.tabTarPos.selectedIndex;this._data.tarSx=this.bullet.sceneX.text==""?0:Number(this.bullet.sceneX.text);this._data.tarSy=this.bullet.sceneY.text==""?0:Number(this.bullet.sceneY.text);this._data.jumpType=this.bullet.jumpType.selectedIndex;this._data.linkWidth=this.bullet.linkWidth.text==""?0:Number(this.bullet.linkWidth.text);this._data.linkDelay=this.bullet.linkDelay.text==""?0:Number(this.bullet.linkDelay.text)}else{this._data.centerCount=this.center.tarCount.text==""?0:Number(this.center.tarCount.text);this._data.centerTar=this.center.tabCenterTar.selectedIndex;this._data.minAngle=this.center.minAngle.text==""?0:Number(this.center.minAngle.text);this._data.maxAngle=this.center.maxAngle.text==""?0:Number(this.center.maxAngle.text);this._data.centerPerDelay=this.center.perdelay.text==""?0:Number(this.center.perdelay.text);this._data.boShake=this.center.boShake.selected;this._data.shakeStart=this.center.shakeStart.text==""?0:Number(this.center.shakeStart.text);this._data.shakeDuration=this.center.shakeDuration.text==""?0:Number(this.center.shakeDuration.text);this._data.shakeRange=this.center.shakeRange.text==""?0:Number(this.center.shakeRange.text);this._data.shakeRate=this.center.shakeRate.text==""?0:Number(this.center.shakeRate.text);this._data.subCenters=this.getSubCenterData()}this._data.bohit=this.hitSelect.selected;this._data.hitPosType=this.hit.tabHitPos.selectedIndex;this._data.hitUrl=this.hit.hitUrl.text;this._data.hitMusic=this.hit.hitMusic.text;this._data.hitMusicRate=this.hit.musicRate.text==""?100:Number(this.hit.musicRate.text);this._data.hitCount=this.hit.hitCount.text==""?0:Number(this.hit.hitCount.text);this._data.boHitRely=this.hit.hitRelySelect.selected;this._data.hitStartTime=this.hit.hitStartTime.text==""?0:Number(this.hit.hitStartTime.text);this._data.bomove=this.moveSelect.selected;this._data.movePosType=this.move.tabMoveType.selectedIndex;this._data.moveSpeed=this.move.moveSpeed.text==""?1:Number(this.move.moveSpeed.text);this._data.moveScale=this.move.moveScale.text==""?1:Number(this.move.moveScale.text);this._data.effectCd=this.move.effectCd.text==""?1:Number(this.move.effectCd.text);this._data.moveStartX=this.move.moveStartX.text==""?0:Number(this.move.moveStartX.text);this._data.moveStartY=this.move.moveStartY.text==""?0:Number(this.move.moveStartY.text);this._data.moveEndX=this.move.moveEndX.text==""?0:Number(this.move.moveEndX.text);this._data.moveEndY=this.move.moveEndY.text==""?0:Number(this.move.moveEndY.text);this._data.movePath=this.move.movePath.text;this._data.appearAlpha=this.move.appearAlpha.text==""?1:Number(this.move.appearAlpha.text);this._data.appearScale=this.move.appearScale.text==""?1:Number(this.move.appearScale.text);this._data.appearScale=this.move.appearScale.text==""?1:Number(this.move.appearScale.text);this._data.appearTime=this.move.appearTime.text==""?100:Number(this.move.appearTime.text);this._data.hideAlpha=this.move.hideAlpha.text==""?0:Number(this.move.hideAlpha.text);this._data.hideScale=this.move.hideScale.text==""?0:Number(this.move.hideScale.text);this._data.hideTime=this.move.hideTime.text==""?100:Number(this.move.hideTime.text);this._data.botail=this.tailSelect.selected;this._data.tailurl=this.tail.tailurl.text;this._data.tailStart=this.tail.tailStart.text==""?100:Number(this.tail.tailStart.text);this._data.taildelay=this.tail.taildelay.text==""?100:Number(this.tail.taildelay.text);this._data.tailX=this.tail.tailX.text==""?0:Number(this.tail.tailX.text);this._data.tailY=this.tail.tailY.text==""?0:Number(this.tail.tailY.text);return this._data};n.prototype.getSubCenterData=function(){var t=[];for(var e=0,i=this.subCenters.length;e<i;e++){var n=this.subCenters[e];var r=new skill.SceneSubCenterSkillVo;r.url=n.centerSubUrl.text;r.music=n.centerSubMusic.text;r.offX=n.centerSubX.text==""?0:Number(n.centerSubX.text);r.offY=n.centerSubY.text==""?0:Number(n.centerSubY.text);r.scaleX=n.centerSubScaleX.text==""?0:Number(n.centerSubScaleX.text);r.scaleY=n.centerSubScaleY.text==""?0:Number(n.centerSubScaleY.text);r.delay=n.centerSubDelay.text==""?0:Number(n.centerSubDelay.text);t.push(r)}return t};n.prototype.clearAll=function(){this.tabType.selectedIndex=0;this.buffLink.text="0";this.url.text="";this.music.text="";this.musicRate.text="100";this.relySelect.selected=false;this.starttime.text="0";this.tabDestory.selectedIndex=0;this.loopDuration.text="1000";this.posType.selectedIndex=0;this.sceneX.text="0";this.sceneY.text="0";this.hurtNum.text="1";this.hurtdelay.text="50";this.hitSelect.selected=false;this.release.dirType.selectedIndex=0;this.bullet.tabBulletType.selectedIndex=0;this.bullet.bulletCount.text="5";this.bullet.speed.text="1";this.bullet.speedRate.text="1";this.bullet.scaleRate.text="1";this.bullet.scatterAngle.text="120";this.bullet.perdelay.text="0";this.bullet.tabTarPos.selectedIndex=0;this.bullet.sceneX.text="0";this.bullet.sceneY.text="0";this.bullet.jumpType.selectedIndex=0;this.bullet.linkWidth.text="500";this.bullet.linkDelay.text="50";this.center.tarCount.text="1";this.center.tabCenterTar.selectedIndex=1;this.center.minAngle.text="0";this.center.maxAngle.text="0";this.center.perdelay.text="0";this.center.boShake.selected=false;this.center.shakeStart.text="0";this.center.shakeDuration.text="200";this.center.shakeRange.text="10";this.center.shakeRate.text="2";this.hit.tabHitPos.selectedIndex=0;this.hit.hitUrl.text="";this.hit.hitMusic.text="";this.hit.musicRate.text="100";this.hit.hitCount.text="1";this.hit.hitRelySelect.selected=true;this.hit.hitStartTime.text="100";this.move.tabMoveType.selectedIndex=0;this.move.moveSpeed.text="1";this.move.moveScale.text="1";this.move.moveStartX.text="0";this.move.moveStartY.text="0";this.move.moveEndX.text="0";this.move.moveEndY.text="0";this.move.movePath.text="";this.move.appearAlpha.text="1";this.move.appearScale.text="1";this.move.hideAlpha.text="0";this.move.hideScale.text="0";this.move.appearTime.text="100";this.move.hideTime.text="100";this.tailSelect.selected=false;this.tail.tailurl.text="";this.tail.tailStart.text="100";this.tail.taildelay.text="100";this.tail.tailX.text="0";this.tail.tailY.text="0";this.clearSubCenter()};n.prototype.clearSubCenter=function(){for(var t=0,e=this.subCenters.length;t<e;t++){this.subCenters[t].removeSelf()}this.subCenters=[]};n.prototype.recover=function(){this.removeSelf();Laya.Pool.recover(n.SINGLE_KEY,this)};n.SINGLE_KEY="gm.SceneSkillItem";n.BASE_HEIGHT=300;n.RELEASE_HEIGHT=60;n.BULLET_HEIGHT=400;n.CENTER_HEIGHT=200;n.SUB_CENTER_HEIGHT=120;n.HIT_HEIGHT=200;n.MOVE_HEIGHT=230;n.TAIL_HEIGHT=130;return n}(ui.SkillMaker.SkillBaseSetUI);r.SceneSkillItem=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var gm;(function(o){var t=function(r){__extends(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){r.prototype.initialize.call(this);this._model=o.GmModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemArr=[];this.btnadd.on(Laya.Event.CLICK,this,this.onAdd);this.btnLoad.on(Laya.Event.CLICK,this,this.onLoad);this.btnCopy.on(Laya.Event.CLICK,this,this.onCopy);this.btnPlay.on(Laya.Event.CLICK,this,this.onPlay);this.btnReset.on(Laya.Event.CLICK,this,this.onReset);this.textJson.text="";this.xiala.vScrollBarSkin="";this.xiala.vScrollBar.isVertical=true;this.xiala.vScrollBar.elasticBackTime=600;this.xiala.vScrollBar.elasticDistance=200;this.endHandler=new Laya.Handler(this,this.onEnd);this.removeHandler=new Laya.Handler(this,this.removeSkill);this.listMediator=new common.ListSelectMediator(this.listskill,this.btnskill,this.lblSkill,o.GmSkillTypeItem,new Laya.Handler(this,this.onSelectRender),31,300,["id","name"]);this.listMediator.boUp=true;this.showSkills=[];var t=csv.SkillProxy.getIns().getArr();for(var e=0,i=t.length;e<i;e++){var n=t[e];if(n.sceneeffect!=""){this.showSkills.push({id:n.id,name:n.name+n.level,json:n.sceneeffect})}}this.listMediator.array=this.showSkills;this.listMediator.init();this.lblSkill.text="选择技能";this.prof.text="1";this.action.text="1";this.dir.text="2"};e.prototype.onSelectRender=function(t){for(var e=0,i=this.showSkills.length;e<i;e++){var n=this.showSkills[e];if(n.id==t){this.showSkill=n;this.lblSkill.text=n.name;this.textJson.text=n.json;break}}};e.prototype.onAdd=function(){var t=new skill.SceneSkillVo;this.addSkill(t)};e.prototype.onLoad=function(){if(this.textJson.text==""){manager.FlowManager.instance.flowByStyle1("请先导入json");return}this.clear();var t=this.textJson.text;var e=JSON.parse(t);for(var i=0,n=e.length;i<n;i++){var r=e[i];var o=new skill.SceneSkillVo;skill.SceneSkillVo.setJson(o,r);this.addSkill(o)}};e.prototype.onCopy=function(){var t=[];for(var e=0,i=this.itemArr.length;e<i;e++){var n=this.itemArr[e];var r=n.getData();t.push(skill.SceneSkillVo.getJson(r))}var o=JSON.stringify(t);this.textJson.text=o};e.prototype.onPlay=function(){if(this.textJson.text==""){manager.FlowManager.instance.flowByStyle1("请先生成json");return}app.ViewManager.toggleDialog(e,-1,0);o.GmModel.getIns().boGmBattle=true;this._model.event("GM_BATTLE");game.Context.on(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.createBattle);scene.SceneMediator.getInstance().initScene(1);app.AppContainer.uiLayer.visible=false};e.prototype.createBattle=function(){game.Context.off(game.ContextEvent.MAP_LOAD_COMPLETE,this,this.createBattle);this.battleMonsters=[];for(var t=0;t<5;t++){var e=new role.MonsterVO;e.insId=Uint64.initClientUint64();e.hp=100;e.maxhp=100;e.mp=100;e.maxmp=100;e.monsterId=647;e.name="怪物"+t;e.movetype=1;e.hittype=1;e.setCfgId(e.monsterId);battle.BattleManager.getIns().createMonster(e,game.SceneModel.random(10,20),game.SceneModel.random(10,20),7);this.battleMonsters.push(e)}var i=new role.RoleVO;i.insId=Uint64.initClientUint64();i.hp=100;i.maxhp=100;i.mp=100;i.maxmp=100;i.name="角色";i.prof=parseInt(this.prof.text);i.dir=parseInt(this.action.text);battle.BattleManager.getIns().createRole(i,30,30,3);scene.SceneMediator.getInstance().setCameraPos(20,20);scene.SceneMediator.getInstance().useCameraCenter(true);this.battleRoleVO=i;this.playAtt()};e.prototype.playAtt=function(){var t=new battle.AttackVo;t.targetView=scene.SceneMediator.getInstance().getViewById(this.battleMonsters[0].insId);t.attackView=scene.SceneMediator.getInstance().getViewById(this.battleRoleVO.insId);t.skill={};t.skill.sceneeffect=this.textJson.text;t.hps=[];t.buffs=[];t.real=1;for(var e=0;e<5;e++){var i=this.battleMonsters[e];var n=new EffectHpData;n.effectType=new Uint64;n.effectType.addNumber(128);n.tar=i.insId;var r=new Uint64;r.addNumber(666666);n.hurt=n.hp=n.maxhp=n.mp=n.maxmp=r;n.def=0;t.hps.push(n)}t.usetime=0;t.attackView.vo.dir=parseInt(this.dir.text);t.attackView.setRoleAni("skill0"+this.action.text,parseInt(this.dir.text),true);var o=Laya.Pool.getItemByClass(skill.SceneSkillEffect.SINGLE_KEY,skill.SceneSkillEffect);o.cast(t,this.endHandler)};e.prototype.onEnd=function(){Laya.timer.once(2e3,this,t);function t(){app.ViewManager.toggleDialog(e,1,0)}};e.prototype.onReset=function(){this.textJson.text="";this.clear()};e.prototype.onDisplay=function(){this._model.boGm=true;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.clear=function(){for(var t=0,e=this.itemArr.length;t<e;t++){this.itemArr[t].clearAll();this.itemArr[t].recover()}this.itemArr=[]};e.prototype.addSkill=function(t){var e=new o.SceneSkillItem;e.removeHandler=this.removeHandler;this.boxItems.addChild(e);e.setData(t);this.itemArr.push(e);this.layout()};e.prototype.removeSkill=function(t){var e=this.itemArr.indexOf(t);this.itemArr.splice(e,1);this.layout()};e.prototype.layout=function(){var t=0;for(var e=0,i=this.itemArr.length;e<i;e++){var n=this.itemArr[e];n.y=t;t+=n.height}this.boxItems.height=t};e.SINGLE_KEY="gm.SceneSkillMakerView";return e}(ui.SkillMaker.SkillMakerUI);o.SceneSkillMakerView=t})(gm||(gm={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=i.GodDungeonModel.getIns();app.ViewManager.regist(i.GodDungeonMainView,"shenshandilao.atlas");app.ViewManager.regist(i.GodDungeonTeamView,"create.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GOD_MOUNTAIN_DUNGEON,i.GodDungeonMainView,new Laya.Handler(this,this.onOpenView,[csv.FunctionsProxy.ENUMS.GOD_MOUNTAIN_DUNGEON]))};e.prototype.onOpenView=function(t){if(battle.BattleModel.getIns().checkBattleState(true)){return}game.ClosureManager.callFunction(t,true,true)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.DilaoNtf,this,this.onDilaoNtfNtf);this.addMsgListener(app.ProtocolResponse.DilaoCombatNtf,this,this.onDilaoCombatNtfNtf);this.addMsgListener(app.ProtocolResponse.DilaoBuffNtf,this,this.onDilaoBuffNtfAck);this.addMsgListener(app.ProtocolResponse.ChooseDilaoBuffNtf,this,this.onChooseDilaoBuffNtf);this.addMsgListener(app.ProtocolResponse.DilaoLayerAck,this,this.onDilaoLayerAck);this.addMsgListener(app.ProtocolResponse.ResetLayerAck,this,this.onResetLayerAck);this.addMsgListener(app.ProtocolResponse.ChangeRoleAck,this,this.onChangeRoleAck);this.addMsgListener(app.ProtocolResponse.GainLayerAwardAck,this,this.onGainLayerAwardAck);this.addMsgListener(app.ProtocolResponse.ChooseDilaoBuffAck,this,this.onChooseDilaoBuffAck)};e.prototype.onDilaoNtfNtf=function(t,e){this._model.updatePlayerLayerVo(e.sdid.length==0?0:e.sdid[e.sdid.length-1]);this._model.updateUsedLayer(e.sdid);this._model.updateAwarArr(e.layeraward);this._model.event(i.GodDungeonModel.UPDATE_LAYER_VIEW)};e.prototype.onDilaoCombatNtfNtf=function(t,e){this._model.updateRoleCombatTopArrr(e);this._model.event(i.GodDungeonModel.UPDATE_LAYER_ROLE_CHANGE)};e.prototype.onDilaoBuffNtfAck=function(t,e){this._model.updateBuffArr(e.buff)};e.prototype.onChooseDilaoBuffNtf=function(t,e){this._model.set_buffid(e.sdid);Laya.timer.once(1e3,this,function(){app.ViewManager.toggleDialog(i.GodDungeonBuffRandomView,1,0)})};e.prototype.onChooseDilaoBuffAck=function(t,e){if(e.result){this._model.addBuffArr(e.buff);this._model.event(i.GodDungeonModel.UPDATE_LAYER_BUFF_ACK)}else{console.log("服务器buff返回失败")}};e.prototype.onDilaoLayerAck=function(t,e){if(e.result){app.ViewManager.toggleDialog(i.GodDungeonShopView,-1,0)}else{}};e.prototype.onResetLayerAck=function(t,e){if(e.result==1){this._model.event(i.GodDungeonModel.UPDATE_LAYER_RESET_VIEW,this._model.getPlayerLayerVo().ccfg.layerid)}};e.prototype.onChangeRoleAck=function(t,e){e};e.prototype.onGainLayerAwardAck=function(t,e){if(e.result==0){manager.FlowManager.instance.flowByStyle1(app.getLang("不能领取"))}else{this._model.event(i.GodDungeonModel.GET_DUN_LAYER_AWARD)}};e.SINGLE_KEY="goddungeon.GodDungeonModule";return e}(app.ModuleBase);i.GodDungeonModule=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(o){var t=function(){function t(){this.nextGoInsIdArr=[]}return t}();o.GodMountainDungeonVo=t;var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.onlyRecordLastAwardLayer=0;t._usedLayerMap={};t._haveBuffArr=[];t._roleCombatTopArr=[];t._roleCombatLowArr=[];t._awardLayerArr=[];return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){i.MAX_BIG_LAYER=this._initMaxLayer();this._initLayerArr();this._initLimitLayer()};i.prototype._initMaxLayer=function(){var t=csv.GodDungeonProxy.getIns().getCfgArr();return t[t.length-1].layerid};i.prototype._initLayerArr=function(){this._allLayerVoMap={};for(var n=1;n<=i.MAX_BIG_LAYER;n++){if(this._allLayerVoMap[n]){continue}this._allLayerVoMap[n]=[];var t=function(t){var i=new o.GodMountainDungeonVo;i.ccfg=csv.GodDungeonProxy.getIns().getCfgItemByLayerViewId(n,t);i.insId=i.ccfg.id;var e=csv.GodDungeonProxy.getIns().getBigLayerCfgArr(n);e.map(function(e){if(e.nleveid!=""){var t=e.nleveid.split("-");t.map(function(t){if(i.insId==+t){i.nextGoInsIdArr.push(+e.id)}})}});r._allLayerVoMap[n].push(i)};var r=this;for(var e=1;e<=30;e++){t(e)}}};i.prototype._initLimitLayer=function(){this._limitLayerArr={};for(var t=1;t<=i.MAX_BIG_LAYER;t++){if(this._limitLayerArr[t]){var e=csv.GodDungeonProxy.getIns().getBigLayerCfgArr(t);this._limitLayerArr[t].push(e[e.length-1].id);this._limitLayerArr[t].push(e[e.length-2].id)}else{this._limitLayerArr[t]=[];var e=csv.GodDungeonProxy.getIns().getBigLayerCfgArr(t);this._limitLayerArr[t].push(e[e.length-1].id);this._limitLayerArr[t].push(e[e.length-2].id)}}};i.prototype.updatePlayerLayerVo=function(e){var i=this;if(e==0){this._playerLayerVo={insId:0,ccfg:{layerid:1,row:0,buff:"",battletime:30},nextGoInsIdArr:[2]};return}var t=csv.GodDungeonProxy.getIns().getCfgMapItem(e).layerid;if(this._limitLayerArr[t].indexOf(e)>-1&&this._limitLayerArr[t+1]){this._playerLayerVo={insId:0,ccfg:{layerid:t+1,row:0,buff:"",battletime:30},nextGoInsIdArr:[csv.GodDungeonProxy.getIns().getBigLayerCfgArr(t+1)[1].id]};return}this._allLayerVoMap[t].map(function(t){if(t.insId==e){i._playerLayerVo=t}})};i.prototype.updateUsedLayer=function(t){var i=this;this._usedLayerMap={};t.map(function(t){var e=csv.GodDungeonProxy.getIns().getCfgMapItem(t);if(i._usedLayerMap[e.layerid]){i._usedLayerMap[e.layerid].push(t)}else{i._usedLayerMap[e.layerid]=[];i._usedLayerMap[e.layerid].push(t)}})};i.prototype.updateBuffArr=function(t){this._haveBuffArr=t};i.prototype.addBuffArr=function(t){(e=this._haveBuffArr).push.apply(e,t);var e};i.prototype.updateRoleCombatTopArrr=function(t){var e=[];var i=[];t.combat.sort(function(t,e){return t.fightpos-e.fightpos});t.combat.map(function(t){if(t.fightpos<=5){e.push(t)}else{i.push(t)}});this._roleCombatTopArr=e;this._roleCombatLowArr=i};i.prototype.updateAwarArr=function(t){this._awardLayerArr=t};i.prototype.set_buffid=function(t){this._buffid=t};i.prototype.getTypeArr=function(){var t=[];for(var e=1;e<=i.MAX_BIG_LAYER;e++){t.push({id:e,name:app.getLang("第"+e+"层")})}return t};i.prototype.getPlayerLayerVo=function(){return this._playerLayerVo};i.prototype.getNowLayerVoArr=function(t){return this._allLayerVoMap[t]};i.prototype.getUsedLayerMap=function(t){return this._usedLayerMap[t]};i.prototype.getBuffArr=function(){return this._haveBuffArr};i.prototype.get_roleCombatTopArr=function(){return this._roleCombatTopArr};i.prototype.get_roleCombatLowArr=function(){return this._roleCombatLowArr};i.prototype.set_tempTeamArr=function(t){if(this._tempTeamArr){this._tempTeamArr.push(t);if(this._tempTeamArr.length==2){if(this._tempTeamArr[0].type==this._tempTeamArr[1].type){this._tempTeamArr.shift()}}}else{this._tempTeamArr=[];this._tempTeamArr.push(t)}};i.prototype.get_tempTeamArr=function(){return this._tempTeamArr};i.prototype.get_awardLayerArr=function(){return this._awardLayerArr};i.prototype.get_buffid=function(){return this._buffid};i.prototype.get_limitLayerArr=function(){return this._limitLayerArr};i.SINGLE_KEY="goddungeon.GodDungeonModel";i.MAX_BIG_LAYER=0;i.GOD_DUNGEON_LIST_TYPE_TOP="GOD_DUNGEON_LIST_TYPE_TOP";i.GOD_DUNGEON_LIST_TYPE_LOW="GOD_DUNGEON_LIST_TYPE_LOW";i.UPDATE_LAYER_VIEW="UPDATE_LAYER_VIEW";i.UPDATE_LAYER_CHECK="UPDATE_LAYER_CHECK";i.UPDATE_LEADROLE_NEXT_POS="UPDATE_LEADROLE_NEXT_POS";i.UPDATE_LAYER_ROLE_CHANGE="UPDATE_LAYER_ROLE_CHANGE";i.UPDATE_LAYER_RESET_VIEW="UPDATE_LAYER_RESET_VIEW";i.UPDATE_LAYER_BUFF_ACK="UPDATE_LAYER_BUFF_ACK";i.UPDATE_REMOVE_TIMEER="UPDATE_REMOVE_TIMEER";i.GET_DUN_LAYER_AWARD="GET_DUN_LAYER_AWARD";return i}(app.ModelBase);o.GodDungeonModel=e})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("shenshandilao.csv");this._cfgMapByLayerViewId=t.getMapList("layerid","viewid");this._cfgMap=t.getMap("id");this._cfgArr=t.getArray()};e.prototype.getBigLayerCfgArr=function(t){var e=[];var i=this._cfgMapByLayerViewId[t];for(var n in i){e.push.apply(e,i[n])}return e};e.prototype.getBigLayerCfg=function(t){return this._cfgMapByLayerViewId[t][0]};e.prototype.getCfgItemByLayerViewId=function(t,e){return this._cfgMapByLayerViewId[t][e][0]};e.prototype.getCfgMap=function(){return this._cfgMap};e.prototype.getCfgMapItem=function(t){return this._cfgMap[t]};e.prototype.getCfgArr=function(){return this._cfgArr};e.SINGLE_KEY="csv.GodDungeonProxy";return e}(app.ModelBase);t.GodDungeonProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GodDungeonModel.getIns();this.gezi.mouseEnabled=false;this.on(Laya.Event.CLICK,this,this.onClick)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this._layerId=e;this.gezi.setData(t);if(this._model.get_awardLayerArr().indexOf(e)>-1){this.mouseEnabled=false;this.imgyilingqu.visible=true;game.RedDotView.removeFrom(this)}else{if(e<this._model.getPlayerLayerVo().ccfg.layerid){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}this.mouseEnabled=true;this.imgyilingqu.visible=false}};e.prototype.onClick=function(){app.ProtocolRequest.GainLayerAwardReq(this._layerId)};e.SINGLE_KEY="goddungeon.GodDungeonAwardIconView";return e}(ui.shenshandilao.shenshandilaocengshujiangliitemUI);i.GodDungeonAwardIconView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.shuxing.text=app.getLang(t.name)};e.SINGLE_KEY="goddungeon.GodDungeonBigLayerItem";return e}(ui.shenshandilao.cengshuitemUI);t.GodDungeonBigLayerItem=e})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GodDungeonModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.gezibg.skin=tip.TipManager.getQualityIcon(e);var i=csv.StatusProxy.getIns().getCfg(+t,+e);this.img.skin="res/icon/skill/"+i.iconid+".png"};e.SINGLE_KEY="goddungeon.GodDungeonBuffIconView";return e}(ui.shenshandilao.zengyiitemUI);i.GodDungeonBuffIconView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GodDungeonModel.getIns();this.on(Laya.Event.CLICK,this,this.onChooseDilaoBuffReq)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this._index=e;this.imgxuanzhong.visible=false;this._id=+t.split("-")[0];this._lv=+t.split("-")[1];var i=csv.StatusProxy.getIns().getCfg(this._id,this._lv);this.gezi.setData(this._id+"",this._lv);this.labelmiaoshu.text=app.getLang(i.explain)};e.prototype.onChooseDilaoBuffReq=function(){var t=this._model.get_buffid();this._model.event(i.GodDungeonModel.UPDATE_REMOVE_TIMEER);app.ProtocolRequest.ChooseDilaoBuffReq(t,this._id,this._lv)};e.prototype.selItem=function(t){if(t==this._index){this.imgxuanzhong.visible=true}};e.SINGLE_KEY="goddungeon.GodDungeonBuffRandomItemView";return e}(ui.shenshandilao.zengyixuanzeitemUI);i.GodDungeonBuffRandomItemView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GodDungeonModel.getIns();this.listzengyi.itemRender=i.GodDungeonBuffRandomItemView;this.listzengyi.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listzengyi.selectEnable=true;this.closebtn.visible=false;this._delayTime=10};t.prototype.onDisplay=function(){this._model.on(i.GodDungeonModel.UPDATE_LAYER_BUFF_ACK,this,this._closeView);this._model.on(i.GodDungeonModel.UPDATE_REMOVE_TIMEER,this,this._clearTimer);this._delayTime=10;this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.off(i.GodDungeonModel.UPDATE_LAYER_BUFF_ACK,this,this._closeView);this._model.off(i.GodDungeonModel.UPDATE_REMOVE_TIMEER,this,this._clearTimer);this._clearTimer()};t.prototype.refreshAll=function(){this.listzengyi.selectedIndex=-1;var t=csv.GodDungeonProxy.getIns().getCfgMapItem(this._model.get_buffid()).buff.split(";");this.listzengyi.array=t;this.startLoopTime()};t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e);t.selItem(this.listzengyi.selectedIndex)};t.prototype._closeView=function(){app.ViewManager.toggleDialog(i.GodDungeonBuffRandomView,-1,0);manager.FlowManager.instance.flowByStyle1(app.getLang("获得buff"))};t.prototype.startLoopTime=function(){this.loopFreshTime();Laya.timer.loop(1e3,this,this.loopFreshTime)};t.prototype.loopFreshTime=function(){this._delayTime-=1;if(this._delayTime<=0){this._delayTime=0;this.listzengyi.mouseEnabled=false;this._randBuff();this._clearTimer()}this.labeldaoji.text=app.getLang("shenshandilao_daojishi",this._delayTime)};t.prototype._randBuff=function(){var t=this;var e=Math.round(Math.random()*2);this.listzengyi.getCell(e)["imgxuanzhong"].visible=true;var i=this.listzengyi.getItem(e);var n=+i.split("-")[0];var r=+i.split("-")[1];var o=this._model.get_buffid();Laya.timer.once(1e3,this,function(){app.ProtocolRequest.ChooseDilaoBuffReq(o,n,r);t.listzengyi.mouseEnabled=true})};t.prototype._clearTimer=function(){Laya.timer.clear(this,this.loopFreshTime)};t.SINGLE_KEY="goddungeon.GodDungeonBuffRandomView";return t}(ui.shenshandilao.shenshannxuanzezengyitipUI);i.GodDungeonBuffRandomView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GodDungeonModel.getIns();this.listjineng.itemRender=i.GodDungeonBuffYouFuIconView;this.listjineng.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listjineng.vScrollBarSkin=""};e.prototype.onClick=function(){};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.listjineng.array=this._model.getBuffArr().slice().sort(function(t,e){return t.lv-e.lv});if(this.listjineng.array.length==0){this.imgtishi.visible=true}else{this.imgtishi.visible=false}};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource.buffid,t.dataSource.level)};e.SINGLE_KEY="goddungeon.GodDungeonBuffView";return e}(ui.shenshandilao.shenshanyoufutipUI);i.GodDungeonBuffView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GodDungeonModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){var i=csv.StatusProxy.getIns().getCfg(+t,+e);this.gezi.setData(t,e);this.labelwenzi.text=app.getLang(i.name);this.registPetSkillTip(this.gezi,+t,+e)};e.prototype.registPetSkillTip=function(t,e,i){t.on(Laya.Event.CLICK,this,this._showBuff,[e,i])};e.prototype._showBuff=function(t,e){tip.TipManager.showBuff(t,e)};e.SINGLE_KEY="goddungeon.GodDungeonBuffYouFuIconView";return e}(ui.shenshandilao.zengyiitemnewUI);i.GodDungeonBuffYouFuIconView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.GodDungeonModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.renwu.on(Laya.Event.CLICK,this,this.onSelect);this.mouseThrough=true;this.imgbukedianji.visible=false};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){Laya.Tween.clearAll(this.imgxuanzhong)};e.prototype.refreshAll=function(){};e.prototype._initStaute=function(){this.visible=false;this.renwu.visible=true;this.renwu.mouseThrough=false;this.renwu.mouseEnabled=false;this.imgxuanzhong.visible=false};e.prototype.setData=function(t,e){this._vo=t;this._playerVo=this._model.getPlayerLayerVo();this._initStaute();if(e==1){this.imgdizuo.mouseEnabled=false;this.renwu.mouseEnabled=false;this.imgxuanzhong.mouseEnabled=false;this.visible=t.ccfg.setvisble==1?true:false;this.updateItemIcon();this.updateFloor();this._updateUsedLayer()}else{this._updateUsedLayer()}};e.prototype.updateItemIcon=function(){if(this._vo.ccfg.leveltype==1){this.renwu.boxhuifu.visible=false;this.renwu.boxjuese.visible=false;this.renwu.boxrenwu.visible=false;this.renwu.boxguaiwu.visible=true}else if(this._vo.ccfg.leveltype==2){this.renwu.boxhuifu.visible=false;this.renwu.boxjuese.visible=true;this.renwu.boxrenwu.visible=false;this.renwu.boxguaiwu.visible=false}else{this.renwu.boxhuifu.visible=true;this.renwu.boxjuese.visible=false;this.renwu.boxrenwu.visible=false;this.renwu.boxguaiwu.visible=false}if(this._playerVo.insId==this._vo.insId){this.renwu.boxhuifu.visible=false;this.renwu.boxjuese.visible=false;this.renwu.boxrenwu.visible=true;this.renwu.boxguaiwu.visible=false;var t=game.Context.roleList[0];this.renwu.imgtouxiang.skin=t.getHeadIconUrl();this.renwu.labelname.text=game.Context.clearPlayerName(game.Context.mainRole.playername);this.renwu.imgframe.skin=game.RoleModel.getIns().getHeadFrameIcon()}};e.prototype.updateFloor=function(){var e=this;Laya.Tween.clearAll(this.imgxuanzhong);if(this._playerVo.insId==this._vo.insId){this.imgxuanzhong.visible=true}else{this.imgxuanzhong.visible=false}this._playerVo.nextGoInsIdArr.map(function(t){if(t==e._vo.insId){e.imgxuanzhong.visible=true;e.playAni();e.renwu.mouseEnabled=true}});if(this._playerVo.ccfg.row==this._vo.ccfg.row){if(this._playerVo.insId==this._vo.insId){this.visible=true}else{this.visible=false}}};e.prototype._updateUsedLayer=function(){if(this._playerVo.ccfg.layerid==this._vo.ccfg.layerid){if(this._playerVo.insId>this._vo.insId){this._dealUsedLayer(this._playerVo.ccfg.layerid)}}else{this._dealUsedLayer(this._vo.ccfg.layerid)}};e.prototype._dealUsedLayer=function(t){var e=this;var i=this._model.getUsedLayerMap(t);if(i!=undefined){this.visible=false;i.map(function(t){if(t==e._vo.insId){e.visible=true;e.renwu.visible=false;e.imgdizuo.mouseEnabled=false;e.renwu.mouseEnabled=false;e.mouseThrough=true;e.imgxuanzhong.mouseEnabled=false;e.imgxuanzhong.alpha=1;e.imgxuanzhong.visible=true}})}};e.prototype.onSelect=function(t){if(this._vo.ccfg.leveltype==1){if(this._roleIsAllDead()){manager.FlowManager.instance.flowByStyle1(app.getLang("角色已全部死亡！"))}else{app.ProtocolRequest.DilaoLayerReq(this._vo.insId,0)}}else{app.ViewManager.toggleDialog(i.GodDungeonShopView,1,0,this._vo)}};e.prototype._roleIsAllDead=function(){var t=this._model.get_roleCombatTopArr();for(var e=0;e<t.length;e++){if(t[e].hps>0){return false}}return true};e.prototype.playAni=function(){this.imgTween1()};e.prototype.imgTween1=function(){Laya.Tween.to(this.imgxuanzhong,{alpha:0},800,null,new Laya.Handler(this,this.imgTween2))};e.prototype.imgTween2=function(){Laya.Tween.to(this.imgxuanzhong,{alpha:1},800,null,new Laya.Handler(this,this.imgTween1))};e.SINGLE_KEY="goddungeon.GodDungeonItem";return e}(ui.shenshandilao.shenshandilaodizuoitemUI);i.GodDungeonItem=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.curSelectId=1;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnshenshanyoufu.clickHandler=new Laya.Handler(this,this.openBuffView);this.btnchongzhitiaozhan.clickHandler=new Laya.Handler(this,this.resetLevel);this.btnzhenrongzhuangtai.clickHandler=new Laya.Handler(this,this.teamState);game.HelperViewHandler.registerStr([this.btntishi,this.labelmiaoshu],"func86t","shenshandilao_rule");this._model=i.GodDungeonModel.getIns();this.imgbiankuang.visible=false;this._initTabList()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll);this._model.on(i.GodDungeonModel.UPDATE_LAYER_VIEW,this,this._updateLayerAndTopList);this._model.on(i.GodDungeonModel.UPDATE_LAYER_RESET_VIEW,this,this._updateResetListXiala);this._model.on(i.GodDungeonModel.GET_DUN_LAYER_AWARD,this,this._updateGetAwardView)};t.prototype.onUnDisplay=function(){this._model.off(i.GodDungeonModel.UPDATE_LAYER_VIEW,this,this._updateLayerAndTopList);this._model.off(i.GodDungeonModel.UPDATE_LAYER_RESET_VIEW,this,this._updateResetListXiala);this._model.off(i.GodDungeonModel.GET_DUN_LAYER_AWARD,this,this._updateGetAwardView)};t.prototype.refreshAll=function(){this.listMediator.init();var t=this._model.getPlayerLayerVo().ccfg.layerid;this.listxiala.selectedIndex=t-1;this.listxiala.selectedIndex=t-1;this._updateDungeonView(t,1);this._updateBigAward()};t.prototype._initTabList=function(){this.listMediator=new common.ListSelectMediator(this.listxiala,this.btnxiala,this.labelcengshu,i.GodDungeonBigLayerItem,new Laya.Handler(this,this.onListSelectHandler),31,200);this.listMediator.array=i.GodDungeonModel.getIns().getTypeArr()};t.prototype.onListSelectHandler=function(t){var e=this._model.getPlayerLayerVo();this.imgyun.visible=false;if(t==e.ccfg.layerid){this._updateDungeonView(t,1)}else if(t<e.ccfg.layerid){this._updateDungeonView(t,0)}else{var i=e.ccfg.layerid;this.listxiala.selectedIndex=i-1;manager.FlowManager.instance.flowByStyle1(app.getLang("未开启"))}};t.prototype._updateLayerAndTopList=function(){this._model.onlyRecordLastAwardLayer=this.listxiala.selectedIndex;this.listxiala.selectedIndex=this._model.getPlayerLayerVo().ccfg.layerid-1;this.listxiala.selectedIndex=this._model.getPlayerLayerVo().ccfg.layerid-1;this._updateDungeonView()};t.prototype._updateGetAwardView=function(){this.listxiala.selectedIndex=this._model.onlyRecordLastAwardLayer;this.listxiala.selectedIndex=this._model.onlyRecordLastAwardLayer;this._updateDungeonView(this._model.onlyRecordLastAwardLayer+1)};t.prototype._updateDungeonView=function(t,e){if(t===void 0){t=this._model.getPlayerLayerVo().ccfg.layerid}if(e===void 0){e=1}this.imgyun.visible=true;this._updateYun(t);var i=this._model.getNowLayerVoArr(t);this.dizuoview["dizuo0"].visible=false;this.dizuoview["dizuo0"].mouseEnabled=false;var n=this._model.get_limitLayerArr();if(n[t].indexOf(this._model.getPlayerLayerVo().insId)>-1){this.imgmeishuzi.visible=true;if(n[t+1]){manager.FlowManager.instance.flowByStyle1(app.getLang("已通关"))}}if(this._model.getPlayerLayerVo().insId==0&&this._model.getPlayerLayerVo().ccfg.layerid==t){this.dizuoview["dizuo0"].visible=true;var r=game.Context.roleList[0];this.dizuoview["dizuo0"].renwu.visible=true;this.dizuoview["dizuo0"].renwu.boxhuifu.visible=false;this.dizuoview["dizuo0"].renwu.boxjuese.visible=false;this.dizuoview["dizuo0"].renwu.boxrenwu.visible=true;this.dizuoview["dizuo0"].renwu.boxguaiwu.visible=false;this.dizuoview["dizuo0"].renwu.imgtouxiang.skin=r.getHeadIconUrl();this.dizuoview["dizuo0"].renwu.labelname.text=game.Context.clearPlayerName(game.Context.mainRole.playername);this.dizuoview["dizuo0"].renwu.imgframe.skin=game.RoleModel.getIns().getHeadFrameIcon()}for(var o=1;o<=i.length;o++){if(this.dizuoview["dizuo"+o]){this.dizuoview["dizuo"+o].setData(i[o-1],e)}}this._updateBigAward()};t.prototype._updateBigAward=function(){var t=this.listxiala.selectedIndex+1;var e=csv.GodDungeonProxy.getIns().getBigLayerCfgArr(t);var i=e[e.length-1].layerawardshow;var n=game.ItemUtil.parserList(i)[0];this.jiangli.setData(n,t)};t.prototype._updateYun=function(t){if(t==i.GodDungeonModel.MAX_BIG_LAYER){this.imgyun.visible=false;this.imgmeishuzi.visible=false;return}if(t==this._model.getPlayerLayerVo().ccfg.layerid){this.imgyun.visible=true;this.imgmeishuzi.visible=false;this.imgyun.y=10;this.imgyun.y-=this._model.getPlayerLayerVo().ccfg.row%12*30}else{this.imgyun.visible=false;this.imgmeishuzi.visible=true}};t.prototype._updateResetListXiala=function(t){this.listxiala.selectedIndex=t-1;this.listxiala.selectedIndex=t-1};t.prototype.openBuffView=function(){app.ViewManager.toggleDialog(i.GodDungeonBuffView,1,0)};t.prototype.resetLevel=function(){app.ViewManager.toggleDialog(i.GodDungeonReTipsView,1,0)};t.prototype.teamState=function(){app.ViewManager.toggleDialog(i.GodDungeonTeamView,1,0)};t.SINGLE_KEY="dungeon.GodDungeonMainView";return t}(ui.shenshandilao.shenshandilaoviewUI);i.GodDungeonMainView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.quedingbtn.clickHandler=new Laya.Handler(this,this.confirm);this.quxiaobtn.clickHandler=new Laya.Handler(this,this.unConfirm);this._model=i.GodDungeonModel.getIns();this.label.text=app.getLang("shenshandilao_reset")};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.confirm=function(){app.ProtocolRequest.ResetLayerReq();app.ViewManager.toggleDialog(i.GodDungeonReTipsView,-1,0)};e.prototype.unConfirm=function(){app.ViewManager.toggleDialog(i.GodDungeonReTipsView,-1,0)};e.SINGLE_KEY="goddungeon.GodDungeonReTipsView";return e}(ui.shenshandilao.shenshandilaochongzhiguanqiatipUI);i.GodDungeonReTipsView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.labelmiaoshu.align="center"};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.imgxuanzhong.visible=false};e.prototype.setData=function(t){if(t.type==2){this.labelname.text=app.getLang("角色");this.img.skin="res/static/head/"+t.icon+".png"}else{this.labelname.text=app.getLang("药水");this.img.skin="res/icon/skill/"+t.icon+".png"}this.shuzi.text="1";this.labelmiaoshu.text=app.getLang(t.des);var e=t.cost.split("-");e.shift();this.imgmoney.parserIcon(e.join("-"),this.labelmoneynum)};e.SINGLE_KEY="goddungeon.GodDungeonShopItemView";return e}(ui.shenshandilao.shenshandilaoshangdianitemUI);t.GodDungeonShopItemView=e})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";t._serverParm=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwuping.itemRender=i.GodDungeonShopItemView;this.listwuping.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listwuping.selectHandler=new Laya.Handler(this,this.onSelect);this.listwuping.selectEnable=true;this.listwuping.selectedIndex=-1;this.btngoumai.on(Laya.Event.CLICK,this,this.onClick);this.closebtn.on(Laya.Event.CLICK,this,this.onClose);this.btntiaoguo.on(Laya.Event.CLICK,this,this.onClose)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.listwuping.selectedIndex=-1};t.prototype.refreshAll=function(){var t=this.dataSource.ccfg.shop.split(";");var e=this.dataSource.ccfg.icon.split(";");var i=this.dataSource.ccfg.des.split(";");var n=[];for(var r=0;r<t.length;r++){n.push({type:this.dataSource.ccfg.leveltype,cost:t[r],icon:e[r],des:i[r]})}this.listwuping.array=n;this.listwuping.width=n.length*190;this.listwuping.x=712/2-this.listwuping.width/2};t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onSelect=function(t){for(var e=0;e<this.listwuping.cells.length;e++){this.listwuping.cells[e].imgxuanzhong.visible=false}if(this.listwuping.getCell(t)){this.listwuping.getCell(t)["imgxuanzhong"].visible=true;this._serverParm=+this.listwuping.getItem(t).cost.split("-")[0]}};t.prototype.onClick=function(){if(this.listwuping.selectedIndex==-1){manager.FlowManager.instance.flowByStyle1(app.getLang("未选择道具"))}else{var t=this.dataSource.ccfg.shop.split("-")[1]+"-"+this.dataSource.ccfg.shop.split("-")[2];if(!game.GridsModel.getIns().hasEnoughItems(t)){manager.FlowManager.instance.flowByStyle1(app.getLang("shenshandilao_nomoney"));return}app.ProtocolRequest.DilaoLayerReq(this.dataSource.insId,this._serverParm)}};t.prototype.onClose=function(){app.ProtocolRequest.DilaoLayerReq(this.dataSource.insId,0)};t.SINGLE_KEY="goddungeon.GodDungeonShopView";return t}(ui.shenshandilao.shenshandilaoshangdianUI);i.GodDungeonShopView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this._model=n.GodDungeonModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model._tempTeamArr=[]};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this._index=e;if(t){this.imgjiahao.visible=false;this.bgshuzi.visible=false;this.labelnum.visible=false;this.imgtouxiang.visible=true;this.barhp.visible=true;this.imgtouxiangkuang02.visible=true;this.labelname.visible=true;this.barhp.value=t.data.hps/1e4;this.imgtouxiang.skin=role.RoleVO.getHeadIconUrl(t.data.classSkin);var i="";if(t.data.name==""){i=app.getLang(csv.DefclassProxy.getIns().getCfg(t.data.classSkin).rolename)}else{i=t.data.name}this.labelname.text=i;this._roleId=t.data.roleid;this._type=t.type}else{this.imgjiahao.visible=true;this.imgtouxiang.visible=false;this.bgshuzi.visible=false;this.barhp.visible=false;this.imgtouxiangkuang02.visible=false;this.labelnum.visible=false;this.labelname.visible=false;this.bg_xuanzhong.visible=false}};e.prototype.onClick=function(){if(this.dataSource){this._model.set_tempTeamArr({type:this._type,value:this._roleId});var t=this._model.get_tempTeamArr();if(t.length==2&&t[0].type!=t[1].type){var e=t[0].type==n.GodDungeonModel.GOD_DUNGEON_LIST_TYPE_LOW?t[0].value:t[1].value;var i=t[1].type==n.GodDungeonModel.GOD_DUNGEON_LIST_TYPE_TOP?t[1].value:t[0].value;if(e!=undefined){app.ProtocolRequest.ChangeRoleReq(e,i);this._model._tempTeamArr=[]}}}};e.prototype.checkItem=function(t){if(this.dataSource){if(this._index==t){this.bg_xuanzhong.visible=true}else{this.bg_xuanzhong.visible=false}}};e.SINGLE_KEY="goddungeon.GodDungeonTeamItemView";return e}(ui.shenshandilao.zhenrongitemUI);n.GodDungeonTeamItemView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var goddungeon;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="fullScreen";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listchuzhan.itemRender=i.GodDungeonTeamItemView;this.listchuzhan.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listchuzhan.selectHandler=new Laya.Handler(this,this._onSelect);this.listchuzhan.selectEnable=true;this.listbeizhan.itemRender=i.GodDungeonTeamItemView;this.listbeizhan.renderHandler=new Laya.Handler(this,this.onRenderHandler2);this.listbeizhan.selectHandler=new Laya.Handler(this,this._onSelect2);this.listbeizhan.selectEnable=true;this.listbeizhan.hScrollBarSkin="";this._model=i.GodDungeonModel.getIns()};t.prototype.onClick=function(){};t.prototype.onDisplay=function(){this.callLater(this.refreshAll);this._model.on(i.GodDungeonModel.UPDATE_LAYER_ROLE_CHANGE,this,this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.off(i.GodDungeonModel.UPDATE_LAYER_ROLE_CHANGE,this,this.refreshAll)};t.prototype.refreshAll=function(){this.listchuzhan.array=this._dealData(this._model.get_roleCombatTopArr(),i.GodDungeonModel.GOD_DUNGEON_LIST_TYPE_TOP);this.listbeizhan.array=this._dealData(this._model.get_roleCombatLowArr(),i.GodDungeonModel.GOD_DUNGEON_LIST_TYPE_LOW);this._resetSelect()};t.prototype._dealData=function(t,e){var i=Array(5).slice().map(function(t){return null});for(var n=0;n<t.length;n++){i[n]={type:e,data:t[n]}}return i};t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e);t.checkItem(this.listchuzhan.selectedIndex)};t.prototype.onRenderHandler2=function(t,e){t.setData(t.dataSource,e);t.checkItem(this.listbeizhan.selectedIndex)};t.prototype._resetSelect=function(){this.listchuzhan.selectedIndex=-1;this.listbeizhan.selectedIndex=-1};t.prototype._onSelect=function(t){this.listchuzhan.selectedIndex=t};t.prototype._onSelect2=function(t){this.listbeizhan.selectedIndex=t};t.SINGLE_KEY="goddungeon.GodDungeonTeamView";return t}(ui.shenshandilao.zhenrongtipUI);i.GodDungeonTeamView=t})(goddungeon||(goddungeon={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var game;(function(l){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){l.GridObserver.getIns().init()};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.ItemDelNtf,this,this.onItemDelNtf);this.addMsgListener(app.ProtocolResponse.ItemModifyNtf,this,this.onItemModifyNtf);this.addMsgListener(app.ProtocolResponse.PackListNtf,this,this.onPackListNtf);this.addMsgListener(app.ProtocolResponse.ItemMoveAck,this,this.onItemMoveAck);this.addMsgListener(app.ProtocolResponse.SellAck,this,this.onSellAck);this.addMsgListener(app.ProtocolResponse.MixEngulfingAck,this,this.onMixEngulfingAck);this.addMsgListener(app.ProtocolResponse.BagUnlockAck,this,this.onBagUnlockAck);this.addMsgListener(app.ProtocolResponse.ItemGainPush,this,this.onItemGainPush);this.addMsgListener(app.ProtocolResponse.PackExpandNtf,this,this.onPackExpandNtf);this.addMsgListener(app.ProtocolResponse.UseResItemNtf,this,this.onUseResItemNtf);this.addMsgListener(app.ProtocolResponse.UseItemAck,this,this.onUseItemAck);this.addMsgListener(app.ProtocolResponse.ShowItemAck,this,this.onShowItemAck);this.addMsgListener(app.ProtocolResponse.ShowItemInfoAck,this,this.onShowItemInfoAck);this.addMsgListener(app.ProtocolResponse.AwardItemScrNtf,this,this.onAwardItemScrNtf);this.addMsgListener(app.ProtocolResponse.ItemQuaUpResp,this,this.onItemQuaUpResp);this.addMsgListener(app.ProtocolResponse.TransfEquipAck,this,this.onTransfEquipAck);this.addMsgListener(app.ProtocolResponse.SpecialItemNtf,this,this.onSpecialItemNtf)};e.prototype.onSpecialItemNtf=function(t,e){l.GridsModel.getIns().updateLuckData(e.data)};e.prototype.onTransfEquipAck=function(t,e){if(e.result){var i=l.ItemUtil.getAwardItem(e.vec,e.res);equip.EquipTransfResultView.pushList(e.source_item,i);equip.EquipModel.getIns().refreshRoleResonates(e.tFlag)}};e.prototype.onItemQuaUpResp=function(t,e){if(e.ret){manager.EffectManager.playStageEffect("skill_shengpinchenggong")}};e.prototype.onAwardItemScrNtf=function(t,e){var i=l.ItemUtil.getAwardItem(e.vec,e.res);if(app.ViewManager.DisplayedInStage(bag.AwardView.SINGLE_KEY)){bag.AwardView.getIns().pushList(i)}else{app.ViewManager.toggleDialog(bag.AwardView,1,0,i)}};e.prototype.onShowItemInfoAck=function(t,e){if(e.result){var i=e.iteminf[0];var n=l.ItemUtil.createVO(i.itemId,i);var r=csv.ChouKaProxy.getIns().getBaseCfg(i.itemId);if(r){var o={};o.star=0;o.level=0;o.source=fabaonew.EFabaoSource.Chat;n.ext=o}tip.TipManager.show(n,true,true)}};e.prototype.onShowItemAck=function(t,e){chat.ChatModel.getIns().onShowItemAck(e.instid,e.showid)};e.prototype.onUseResItemNtf=function(t,e){var i=csv.ItemProxy.getTipHtmlName(e.useitem);var n="";for(var r=0,o=e.res.length;r<o;r++){var a=e.res[r];var s=csv.ItemProxy.getIns().resMap[a.type].id;n+=csv.ItemProxy.getTipHtmlName(s)+("<span color='"+l.STYLES.GREEN_COLOR+"'>x"+a.value+"</span>");if(r<o-1){n+="、"}}manager.FlowManager.instance.flowByStyle1(app.getLang("item_use_2",i,n))};e.prototype.onUseItemAck=function(t,e){if(e.result){var i=csv.ItemProxy.getIns().getItemCfgById(e.itemID);if(i.type==csv.ItemProxy.TYPES.XIAO_HAO_PING){if(i.subtype==csv.ItemProxy.XH_SUB_TYPES.SUB_8){var n=csv.DailyTimeProxy.getIns().getCfg(i.p1);manager.FlowManager.instance.flowByStyle1(app.getLang("item_use_3",app.getLang(n.name),e.count))}}}};e.prototype.onPackExpandNtf=function(t,e){var i=l.GridsModel.getIns().getGridByType(e.flag);i.buyNum=e.buyNum;i.openSize=e.maxPos;l.GridsModel.getIns().event(l.GridsModel.EVENTS.UPDATE,e.flag)};e.prototype.onItemGainPush=function(t,e){if(e.gainflag){return}var i=l.GridsModel.getIns().getVOByInsId(e.itemID);if(i&&!i.itemCfg.autouse){if(i.getRemind()){main.NewItemView.getIns().addNewItemView(i,e.num,true)}l.NoticeManager.getIns().flowMsg(csv.ItemProxy.getTipHtmlName(i.getItemId())+"<span>x"+e.num+"</span>",i.getIconUrl())}};e.prototype.onItemDelNtf=function(t,e){l.GridsModel.getIns().deleteItem(e.flag,e.instId)};e.prototype.onItemModifyNtf=function(t,e){l.GridsModel.getIns().changeItem(e.flag,e.itemModify)};e.prototype.onPackListNtf=function(t,e){l.GridsModel.getIns().initGrid(e.flag,e.itemPack,e.maxPos);if(e.flag==l.GridsModel.BAG_ITEM){for(var i=0,n=e.itemPack;i<n.length;i++){var r=n[i];var o=l.GridsModel.getIns().getVOByInsId(r.instId);if(o&&o.getRemind()){main.NewItemView.getIns().addNewItemView(o,o.count)}}}if(l.GridsModel.EquipEnums.indexOf(e.flag)!=-1){equip.EquipModel.getIns().initResonates(e.flag)}};e.prototype.onItemMoveAck=function(t,e){if(e.result){if(l.GridsModel.EquipEnums.indexOf(e.sFlag)!=-1){equip.EquipModel.getIns().refreshRoleResonates(e.sFlag)}if(l.GridsModel.EquipEnums.indexOf(e.tFlag)!=-1){equip.EquipModel.getIns().refreshRoleResonates(e.tFlag)}}};e.prototype.onSellAck=function(t,e){};e.prototype.onMixEngulfingAck=function(t,e){if(e.result==1){l.GridsModel.getIns().event(l.GridsModel.EVENTS.SMELT_SUCCESS)}};e.prototype.onBagUnlockAck=function(t,e){if(e.result==1){}};e.SINGLE_KEY="game.GridsModule";return e}(app.ModuleBase);l.GridsModule=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("baglocksystem.csv");this.cfgArr=t.getArray();this.cfgMap={};this.maxNum=this.cfgArr.length;for(var e=0;e<this.maxNum;++e){var i=this.cfgArr[e];if(!this.bagLockPerNum){this.bagLockPerNum=parseInt(i.posid)}this.cfgMap[i.lockturn]=i}};e.prototype.getUnlockCost=function(t){return game.ItemUtil.parserList(this.cfgMap[t+1].unlockitem)[0]};e.SINGLE_KEY="csv.BagLockSystem";return e}(app.ModelBase);t.BagLockSystem=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("collectmake.csv");this.cfgMap=t.getMap("id")};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.CollectMake";return e}(app.ModelBase);t.CollectMake=e})(csv||(csv={}));var game;(function(e){var t=function(){function t(){this.idOb=new ObServer;this.typeOb=new ObServer}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){e.GridsModel.getIns().on(e.GridsModel.EVENTS.ITEM_UPDATE,this,this.onItemUpdate)};t.prototype.onItemUpdate=function(t,e){var i=this,n=i.idOb,r=i.typeOb;if(!e){this.notifiAll();return}n.notifi(e.getItemId());r.notifi(csv.ItemProxy.getType(e))};t.prototype.notifiAll=function(){this.idOb.notifiAll();this.typeOb.notifiAll()};t.prototype.onItemType=function(t,e,i,n){if(n===void 0){n=100}this.typeOb.on(Number(t),e,i,n)};t.prototype.offItemType=function(t,e,i){this.typeOb.off(Number(t),e,i)};t.prototype.onItemId=function(t,e,i,n){if(n===void 0){n=100}this.idOb.on(Number(t),e,i,n)};t.prototype.offItemId=function(t,e,i){this.idOb.on(Number(t),e,i)};t.SINGLE_KEY="game.GridObserver";return t}();e.GridObserver=t})(game||(game={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var grids;(function(n){var t=function(e){__extends(t,e);function t(){var t=e.call(this)||this;t.width=t.height=90;t.pivot(45,45);return t}t.prototype.fly=function(){this.angle=-Math.PI/2;Laya.timer.frameLoop(1,this,this.loop)};t.prototype.loop=function(){if(this.angle<=-Math.PI){this.removeSelf();Laya.timer.clear(this,this.loop);Laya.Pool.recover(n.FlyBagItem.SINGLE_KEY,this);return}this.angle-=t._flySpeed;this.x=t._flyPoint.x+Math.cos(this.angle)*t._flyR;this.y=t._flyPoint.y+Math.sin(this.angle)*t._flyR*1.5};t.pushList=function(t,e){if(e===void 0){e=false}if(e){this._flyIds=[]}if(typeof t=="number"){this._flyIds.push(t)}else{this._flyIds=this._flyIds.concat(t)}Laya.timer.loop(200,this,this.playFly)};t.playFly=function(){if(!this._flyPoint){var t=main.MainUIIcon.getMainUIIconPoint(csv.MainIconProxy.BAG);this._flyR=Laya.stage.width-t.x;this._flyPoint=new Laya.Point(Laya.stage.width,t.y)}if(this._flyIds.length>0){var e=this._flyIds.shift();var i=Laya.Pool.getItemByClass(n.FlyBagItem.SINGLE_KEY,n.FlyBagItem);i.skin=csv.ItemProxy.getUrl(e);i.x=this._flyPoint.x;i.y=this._flyPoint.y-this._flyR*1.5;app.AppContainer.flowLayer.addChild(i);i.fly()}else{Laya.timer.clear(this,this.playFly)}};t.SINGLE_KEY="grids.FlyBagItem";t._flySpeed=Math.PI/75;t._flyIds=[];return t}(Laya.Image);n.FlyBagItem=t})(grids||(grids={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var grids;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e,i){if(i===void 0){i=""}this.daoju.setData(t);if(e!=-1){this.jiaobiao.visible=this.gailv.visible=true;this.gailv.value=e+"%";if(i!=""){this.qipao.visible=true;this.lbl.text=i}else{this.qipao.visible=false}}else{this.qipao.visible=false;this.jiaobiao.visible=this.gailv.visible=false}};return e}(ui.common.ratedaojuitemUI);t.GridRateView=e})(grids||(grids={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var grids;(function(t){var e=function(t){__extends(e,t);function e(){return t.call(this)||this}return e}(ui.bag.bagitemUI);t.SkillGrid=e})(grids||(grids={}));var grids;(function(t){var e=function(){function t(){}return t}();t.GridItemVO=e})(grids||(grids={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.GuajiPassView,"guaji.atlas");app.ViewManager.regist(i.MijingRecordShouyiView,"guaji.atlas");app.ViewManager.regist(i.MijingChangeView,"guaji.atlas");app.ViewManager.regist(i.GuajiShouYiView,"guaji.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.PASS,i.GuajiPassView,new Laya.Handler(this,this.onShowPassView));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUAIJI_MAIN,i.GuajiShouYiView,new Laya.Handler(this,this.goChangeView,[0]));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.TIANGONPU,i.GuajiShouYiView,new Laya.Handler(this,this.goChangeView,[1]));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.MIJING_GUAJI,i.GuajiShouYiView,new Laya.Handler(this,this.goChangeView,[2]));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.MONSTER_BOOK,book.MonsterBookMapView)};e.prototype.goChangeView=function(t){app.ViewManager.toggleDialog(i.GuajiShouYiView,1,0,[t,0])};e.prototype.initCommands=function(){battle.BattleModel.getIns().on(battle.BattleModel.INFO_CHANGE,this,this.onChange);this.addMsgListener(app.ProtocolResponse.CheckpointDataNtf,this,this.onCheckpointDataNtf);this.addMsgListener(app.ProtocolResponse.CheckpointAck,this,this.onCheckpointAck);this.addMsgListener(app.ProtocolResponse.CheckpointAwardAck,this,this.onCheckpointAwardAck);this.addMsgListener(app.ProtocolResponse.SecretAreaOpenNtf,this,this.onSecretAreaOpenNtf);this.addMsgListener(app.ProtocolResponse.SecretAreaDataAck,this,this.onSecretAreaDataAck);this.addMsgListener(app.ProtocolResponse.SecretAreaAwardResp,this,this.onSecretAreaAwardResp);this.addMsgListener(app.ProtocolResponse.SecretAreaFightResp,this,this.onSecretAreaFightResp);this.addMsgListener(app.ProtocolResponse.SecretAreaStartResp,this,this.onSecretAreaStartResp)};e.prototype.onShowPassView=function(t){app.ViewManager.toggleDialog(i.GuajiPassView,1,0,[parseInt(t)])};e.prototype.onSecretAreaStartResp=function(t,e){if(e.ret){app.ViewManager.toggleDialog(i.ChartChooseView,-1,0);i.SecretAreaModel.getIns().event(i.SecretAreaModel.SECRETAREA_START_RESP,e.areaid)}};e.prototype.onSecretAreaFightResp=function(t,e){if(e.ret){}};e.prototype.onSecretAreaAwardResp=function(t,e){if(e.ret){}};e.prototype.onSecretAreaDataAck=function(t,e){i.SecretAreaModel.getIns().onSecretAreaDataAck(e.award,e.record)};e.prototype.onSecretAreaOpenNtf=function(t,e){i.SecretAreaModel.getIns().onSecretAreaNtfUpdate(e.endtime,e.opendata)};e.prototype.onCheckpointAwardAck=function(t,e){if(e.result){i.GuajiModel.getIns().onCheckpointAwardAck(e.award_list)}};e.prototype.onCheckpointAck=function(t,e){if(e.result){}};e.prototype.onCheckpointDataNtf=function(t,e){i.GuajiModel.getIns().setPassId(e.checkpointInf[0].id,e.checkpointInf[0].state,e.checkpointInf[0].award_list);i.GuajiModel.getIns().event(i.GuajiModel.GUAJIPASS_DATA_UPDATE)};e.prototype.onChange=function(){if(battle.BattleModel.getIns().battleType==battle.BattleConst.BATTLE_TYPE.GUAJI){i.GuajiModel.getIns().id=battle.BattleModel.getIns().battleval[0]}};e.SINGLE_KEY="guaji.GuajiModule";return e}(app.ModuleBase);i.GuajiModule=t})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(l){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._monsterMap={};return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this.fids=[l.FunctionsProxy.ENUMS.ROLE_WUXING,l.FunctionsProxy.ENUMS.YUANSHEN_DONGFU,l.FunctionsProxy.ENUMS.FABAOLANGHUANGE,l.FunctionsProxy.ENUMS.PET_MAIN,0,l.FunctionsProxy.ENUMS.FABAONEW,l.FunctionsProxy.ENUMS.MOUNT,l.FunctionsProxy.ENUMS.PASS];var t=app.Config.getResById("guaji.csv");this.cfgMap=t.getMap("sceneid");this.cfgArr=t.getArray();var e;for(var i=0,n=this.cfgArr.length;i<n;i++){var r=this.cfgArr[i];if(!e){e=r.needtask}else{if(r.needtask!=0&&e!=r.needtask){e=r.needtask}}r.needtask=e}var o=app.Config.getResById("guanqia.csv");this.guanqiaMap=o.getMap("id");this.guanqiaList=o.getArray();this.chapterMapList=o.getMapList("chapter");this.guanqiachaperMap=app.Config.getResById("guanqiachaper.csv").getMapList("sceneid");this.guanqiarewardArray=app.Config.getResById("guanqiareward.csv").getArray();this.functionIds=app.Config.getResById("guanqiafunctionop.csv").getArray();var a=app.Config.getResById("mijing.csv");this.mijingCfgMap=a.getMap("id");this.mijingArr=a.getMapList("type");var s=app.Config.getResById("mijingincrease.csv");this.creaseCfgMap=s.getMap("id")};t.prototype.getcreaseCfgMap=function(t){return this.creaseCfgMap[t]};t.prototype.getMijingCfg=function(t){return this.mijingCfgMap[t]};t.prototype.getMijingArray=function(){if(!this._mijingList){this._mijingList=this.mijingArr[1];SortUtil.sortOnArr(this._mijingList,["guanqia"],[SortUtil.NUMERIC])}return this._mijingList};t.prototype.getFunctionIds=function(){return this.functionIds};t.prototype.getAll=function(){return this.mijingArr[1].concat(this.mijingArr[2])};t.prototype.getCfgGuanqia=function(t){return this.guanqiaMap[t]};t.prototype.chapterList=function(t){return this.chapterMapList[t]};t.prototype.getGuankaNumByChapter=function(t){return this.chapterList(t).length};t.prototype.getTotalChapter=function(){var t=this.guanqiaList[this.guanqiaList.length-1].id;return this.getStartIDByPassID(t)};t.prototype.getStartIDByPassID=function(t,e){if(e===void 0){e=-1}var i=csv.GuajiProxy.getIns().getCfgGuanqia(t).chapter;if(e<0){var n=this.getPart(t).part;e=(n-1)*20}return this.chapterList(i)[e].id};t.prototype.getPart=function(t){var e=csv.GuajiProxy.getIns().getCfgGuanqia(t).chapter;var i=this.chapterList(e).length;t=t-this.chapterList(e)[0].id+1;var n=this.guanqiachaperMap[e];var r=n.length;var o=1;if(t%i==0){o=r}else{for(var a=r;a>=1;a--){if(t%i>20*(a-1)){o=a;break}}}return{part:o,index:t}};t.prototype.getChaperCfg=function(t){var e=csv.GuajiProxy.getIns().getCfgGuanqia(t).chapter;var i=this.getPart(t).part;return this.guanqiachaperMap[e][i-1]};t.prototype.getGuanqiaByMijingId=function(t){var e=0,i=Object.keys(this.guanqiachaperMap).length;for(var n=1;n<=i;n++){for(var r=0;r<this.guanqiachaperMap[n].length;r++){var o=parseInt(this.guanqiachaperMap[n][r].mijing);if(o==t){e=this.guanqiachaperMap[n][r].sceneid*40;if(r==0){e-=20}}}}return e};t.prototype.getChaperNumber=function(t){var e=this.getCfgGuanqia(t);return e?e.chapter:0};t.prototype.getSceneId=function(t){var e=this.getChaperCfg(t);return e?e.sceneid:0};t.prototype.getCfg=function(t){return this.cfgMap[t]};t.prototype.getArr=function(){return this.cfgArr};t.prototype.getMaxId=function(){var t=1;for(var e=0,i=this.cfgArr.length;e<i;e++){var n=this.cfgArr[e];if(game.Context.isRoleReach(false,n.level)&&dailytask.DailyTaskModel.getIns().taskMainId>=n.needdungeon){t=parseInt(n.sceneid);continue}else{break}}return t};t.prototype.isTaskReach=function(t,e){if(e===void 0){e=false}var i=this.cfgMap[t].needtask;var n=true;if(i!=0){n=game.TaskModel.getIns().hasCompleteTask(i)}if(!n&&e){manager.FlowManager.instance.flowByStyle1(app.getLang("func_er_6",csv.TaskProxy.getTaskName(i)))}return n};t.prototype.isDungeonReach=function(t,e){if(e===void 0){e=false}var i=this.cfgMap[t].needdungeon;if(dailytask.DailyTaskModel.getIns().taskMainId<i){var n=csv.DungeonProxy.getIns().getZxrwCfg(i);manager.FlowManager.instance.flowByStyle1(app.getLang("需要通关葫芦兄弟{0}-{1}",n.chapter,n.round));return false}return true};t.prototype.getGuajiMonsters=function(t){if(!this._monsterMap[t]){var e=this.getCfg(t);var i=csv.MonsterProxy.getIns().getMidsByMset(e.bosssetbase);this._monsterMap[t]=i.concat(csv.MonsterProxy.getIns().getMidsByMset(e.monstersetbase))}return this._monsterMap[t]};t.prototype.getIndexByfid=function(t){if(t>0){var e=this.getcreaseCfgMap(t).fid;return this.fids.indexOf(e)}return this.fids.indexOf(t)};t.prototype.getIconPath=function(t){var e=0,i;if(t>0){i=this.getcreaseCfgMap(t);e=i.fid}var n="";switch(e){case csv.FunctionsProxy.ENUMS.ROLE_WUXING:n="guaji/bg_tubiao_wuxing.png";break;case csv.FunctionsProxy.ENUMS.YUANSHEN_DONGFU:n="guaji/bg_tubiao_yuanshen.png";break;case csv.FunctionsProxy.ENUMS.FABAOLANGHUANGE:n="guaji/bg_tubiao_fabao.png";break;case csv.FunctionsProxy.ENUMS.PET_MAIN:n="guaji/bg_tubiao_chongwu.png";break;case csv.FunctionsProxy.ENUMS.FABAONEW:n="guaji/bg_tubiao_beidong.png";break;case csv.FunctionsProxy.ENUMS.MOUNT:n="guaji/bg_tubiao_zuoqi.png";break;case csv.FunctionsProxy.ENUMS.PASS:n="guaji/bg_tubiao_mijingwanmei.png";break;default:n="guaji/bg_tubiao_jihuo.png";break}return n};t.SINGLE_KEY="csv.GuajiProxy";t.ENUMS={WUXING:1,SOUL:2,FABAO:3,PET:4,FABAO_SKILL:5,MOUNT:6};t.BUFF_ENUMS={WUXING:0,SOUL:1,FABAO:2,PET:3,ITEM:4,FABAO_BEIDONG:5,ZUOQI:6};return t}(app.ModelBase);l.GuajiProxy=t})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(n){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.secretDataInit=true;t.oldOpen=false;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){this.endtime=0;this.award=[];this.opendata=[];this.record=[]};i.prototype.c2sSecretAreaOpen=function(){app.ProtocolRequest.SecretAreaOpenReq()};i.prototype.isMijingOpen=function(){if(n.SecretAreaModel.getIns().opendata.length>0){var t=n.SecretAreaModel.getIns().opendata;for(var e=0;e<t.length;e++){var i=t[e];if(i.status==3||i.status==4){return true}}}return false};i.prototype.onSecretAreaNtfUpdate=function(t,e){this.endtime=t;this.opendata=e;this.event(i.SECRETAREA_INFO_UPDATE);chart.ChartModel.getIns().event(chart.ChartEvent.EVENT_RED)};i.prototype.c2sSecretAreaData=function(){app.ProtocolRequest.SecretAreaDataReq()};i.prototype.onSecretAreaDataAck=function(t,e){this.award=t;this.record=e;this.event(i.MIJING_DATA_ACK)};i.prototype.c2sSecretAreaAward=function(){app.ProtocolRequest.SecretAreaAwardReq()};i.prototype.c2sSecretAreaFight=function(t){if(csv.GuajiProxy.getIns().getMijingCfg(t)){this.activeGuanqia=csv.GuajiProxy.getIns().getGuanqiaByMijingId(t)}app.ProtocolRequest.SecretAreaFightReq(t)};i.prototype.c2sSecretAreaStartReq=function(t){app.ViewManager.toggleDialog(n.ChartChooseView,1,0,[t])};i.prototype.getAreaOpenData=function(t){var e;for(var i=0;i<this.opendata.length;i++){if(t==this.opendata[i].areaId){e=this.opendata[i];break}}return e};i.prototype.getAreaOpenDataByChartId=function(t){var e;for(var i=0;i<this.opendata.length;i++){if(t==this.opendata[i].chartId){e=this.opendata[i];break}}return e};i.prototype.getUseingAreaData=function(){var t;var e=0;for(var i=0;i<this.opendata.length;i++){if(this.opendata[i].status==4){if(e==0||this.opendata[i].starttime<e){t=this.opendata[i];e=this.opendata[i].starttime}}}return t};i.prototype.areaOpended=function(){for(var t=0,e=this.opendata;t<e.length;t++){var i=e[t];if(i.status==4){return true}}return false};i.prototype.getChartValue=function(t){var e=this.getAreaOpenData(t);var i=1;if(e&&e.chartId>0){var n=app.str2Array(game.Config.getParams(1184),";");i=parseInt(n[e.chartId-1])*1e-4}return i};i.prototype.getBuffTime=function(){return n.SecretAreaModel.getIns().endtime-game.Context.getServerTime()};i.SINGLE_KEY="guaji.SecretAreaModel";i.MIJING_DATA_ACK="Mijing_SecretAreaDataAck";i.GUAJI_MINUTE_EXP_CHANGE="guaji_minute_exp_change";i.SECRETAREA_INFO_UPDATE="mijing_ntf_update";i.SECRETAREA_START_RESP="mijing_SecretAreaStartResp";return i}(app.ModelBase);n.SecretAreaModel=t})(guaji||(guaji={}));var guaji;(function(t){var e=function(){function t(t,e){if(e===void 0){e=null}this.pool=[];this.parent=t;this.handler=e}t.prototype.resetBuff=function(){var t;while(this.parent.numChildren>0){t=this.parent.getChildAt(0);if(t){t.removeSelf();this.pool.push(t)}}};t.prototype.onItemClick=function(){if(this.handler){this.handler.run()}};t.prototype.parser=function(t,e,i){this.resetBuff();var n;for(var r=0;r<t.length;r++){n=this.pool.shift();if(!n){n=new Laya.Image;n.scale(i,i);n.on(Laya.Event.CLICK,this,this.onItemClick)}n.skin=csv.GuajiProxy.getIns().getIconPath(parseInt(t[r]));var o=csv.GuajiProxy.getIns().getIndexByfid(parseInt(t[r]));if(e&&e[o]>0){n.gray=false}else{n.gray=true}this.parent.addChild(n)}};return t}();t.BuffIconControl=e})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(o){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.xuanzelist.itemRender=o.ChartChooseItem;this.xuanzelist.renderHandler=new Laya.Handler(this,this.onItemRender);this.xuanzelist.selectHandler=new Laya.Handler(this,this.onSelectHandler);this.xuanzelist.selectEnable=true;this.xuanzelist.array=csv.ChartProxy.getIns().getArray();this.xuanzelist.selectedIndex=-1;this.selectedIndex=-1;this.quedingbtn.clickHandler=new Laya.Handler(this,this.onClickHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.MJ_SEND,this.quedingbtn,null,500)};e.prototype.onSelectHandler=function(t){if(t>=0){var e=this.xuanzelist.getCell(t);var i=chart.ChartModel.getIns().isActivation(e.id);if(!i){this.xuanzelist.selectedIndex=this.selectedIndex;if(e.isVip){app.ViewManager.toggleDialog(vipcode.VipView,1,0)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("jiguanshou_tips_2"))}}else{this.selectedIndex=this.xuanzelist.selectedIndex}}};e.prototype.onItemRender=function(t,e){t.setData(t.dataSource,this.xuanzelist.selectedIndex==e)};e.prototype.onClickHandler=function(){if(chart.ChartModel.getIns().isActivation(this.xuanzelist.selectedItem)){app.ProtocolRequest.SecretAreaStartReq(this.dataSource[0],this.xuanzelist.selectedItem)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("jiguanshou_tips_2"))}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=csv.ChartProxy.getIns().getArray();if(this.xuanzelist.selectedIndex==-1){for(var e=0;e<t.length;e++){if(chart.ChartModel.getIns().isActivation(t[e])){this.xuanzelist.selectedIndex=e;break}}}this.xuanzelist.refresh()};e.SINGLE_KEY="guaji.ChartChooseView";return e}(ui.guaji.xuanzejiguanshouUI);o.ChartChooseView=t;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t,e){this.id=t;this.jiguanname.skin="guaji/bg_tiangongpu_title"+t+".png";this.touxiangimg.skin="res/static/guajiditu/jiguanshou_touxiang_"+t+".png";this.ani1.gotoAndStop(0);this.wenben.text=app.getLang("jiguanshou_state_1");this.isVip=csv.ChartProxy.getIns().isVip(t);if(this.isVip){this.wenben.text=app.getLang("jiguanshou_tips_5")}this.duigou.visible=e;var i=chart.ChartModel.getIns().isActivation(t);if(i){this.ani1.gotoAndStop(1);this.wenben.text=app.getLang("jiguanshou_state_2");var n=o.SecretAreaModel.getIns().getAreaOpenDataByChartId(t);if(n&&n.status==4){var r=csv.GuajiProxy.getIns().getMijingCfg(n.areaId);this.wenben.text=app.getLang("jiguanshou_state_3",app.getLang(r.name))}}};return e}(ui.guaji.xuanzejiguanshouitemUI);o.ChartChooseItem=e})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btndongfu.clickHandler=new Laya.Handler(this,this.onDongClickHandler);this.btnqianwnag.clickHandler=new Laya.Handler(this,this.onXiulianClickHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.DONGFU_TANXIAN,this.btndongfu,null,500)};e.prototype.onXiulianClickHandler=function(){var t=csv.YuanshenProxy.getIns().getHoleCfgMapItem(this.dataSource[0].guanqia);var e=false;if(t.type==1){if(yuanshencode.YuanshenModel.getIns().getDongfuNetItemData(t.id).lock==1){e=true}}else if(t.type==2){if(vipcode.VipModel.getIns().vipLvl>=t.condition){e=true}}if(e){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.YUANSHEN_DONGFU);app.ViewManager.toggleDialog(yuanshencode.YuanshenXiuLianView,1,0,t)}else{var i=csv.GuajiProxy.getIns().getCfgGuanqia(t.condition);var n=csv.GuajiProxy.getIns().getPart(i.id);manager.FlowManager.instance.flowByStyle1(app.getLang("xiulian_shuoming_15",i.chapter+"-"+n.index))}};e.prototype.onDongClickHandler=function(){if(this.dataSource[0].id==1032){mjhole.MjHoleModel.getIns().openDongfu(this.dataSource[0].id)}else{var t=mjhole.MjHoleModel.getIns().isCanOpenMjHoleView(this.dataSource[0].id,this.dataSource[0].type);if(t){app.ViewManager.toggleDialog(mjhole.MjHoleMainView,1,0,[this.dataSource[0].id,true]);app.ViewManager.toggleDialog(s.DongInfoView,-1,0)}}this.close()};e.prototype.onDisplay=function(){s.SecretAreaModel.getIns().on(s.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){s.SecretAreaModel.getIns().off(s.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=this.dataSource[0];this.labeltitle.text=app.getLang(t.name);this.imgbiankuang.skin="res/static/guajiditu/"+t.picture+".jpg";this.labelmiaoshu.text=app.getLang(t.tips);this.labeltiaojian.text=app.getLang("元神达到{0}可进入",yuanshencode.YuanshenModel.getIns().getBigRealm(t.bigrealm));var e=mjhole.MjHoleModel.getIns().getMjjingProgress(t.id);this.labelshouyixiangqing.text=app.getLang("探索进度：{0}%",e);this.labeltiaojian.color=game.STYLES.DESC_TXT_COLOR_S;var i=csv.YuanshenProxy.getIns().getHoleCfgMapItem(t.guanqia).condition;if(!s.GuajiModel.getIns().isActive(i)){this.labeltiaojian.color=game.STYLES.RED_COLOR_S;var n=csv.GuajiProxy.getIns().getCfgGuanqia(i);var r=csv.GuajiProxy.getIns().getPart(n.id);this.labeltiaojian.text=app.getLang("xiulian_shuoming_15",n.chapter+"-"+r.index);this.ani1.gotoAndStop(2)}else{var o=yuanshencode.YuanshenModel.getIns().getBigRealm(t.bigrealm);if(o===app.getLang("mijingjiesuo_lv0")){this.labeltiaojian1.text=""}else{this.labeltiaojian1.text=app.getLang("mijingjiesuo_jingjiexianzhi",o)}this.ani1.gotoAndStop(0);if(t.id==1032){this.btndongfu.label=app.getLang("mijingjiesuo_zhuangtai1")}else{this.btndongfu.label=app.getLang("mijingjiesuo_zhuangtai2")}if(e>=100){this.ani1.gotoAndStop(1)}var a=yuanshencode.YuanshenModel.getIns().getDongfuNetItemData(t.guanqia);if(a&&a.lock==1){this.btnqianwnag.disabled=false}else{this.btnqianwnag.disabled=true}}};e.SINGLE_KEY="guaji.DongInfoView";return e}(ui.guaji.dongfutipUI);s.DongInfoView=t})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(h){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.eleImgs=[this.imgEle0,this.imgEle1,this.imgEle2,this.imgEle3,this.imgEle4];for(var t=0;t<this.eleImgs.length;t++){this.eleImgs[t].shuxing.skin="public/bg_wuxing_"+(t+1)+".png";this.eleImgs[t].xinxi.text="0"}this.listMonster.itemRender=i;this.listMonster.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listMonster.scrollRectOffY=20;this.listdaoju1.itemRender=grids.GridView;this.listdaoju1.renderHandler=grids.GridView.CommonItemRender;this.btnzhuoxiaoyao.clickHandler=new Laya.Handler(this,this.onClickHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.GUANQIA_BATTLE,this.btnzhuoxiaoyao,null,500);this.ani1.gotoAndStop(1)};t.prototype.onClickHandler=function(){h.GuajiModel.getIns().onCheckpointReq()};t.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){for(var t=0;t<this.eleImgs.length;t++){this.eleImgs[t].removeSelf()}var e=this.dataSource[0];if(e){this.labeltitle.text=app.getLang("guanqia_name_1",e.chapter,this.dataSource[1]);var i=csv.GuajiProxy.getIns().getChaperCfg(h.GuajiModel.getIns().passId);if(i){this.imgbg02.skin="res/static/guajiditu/"+i.guanqiabg+".jpg"}var n=csv.MonsterProxy.getIns().getMidsByMset(e.monstersetbase);this.listMonster.array=n;this.btnzhuoxiaoyao.visible=false;if(h.GuajiModel.getIns().passId==e.id&&h.GuajiModel.getIns().state==0){this.btnzhuoxiaoyao.visible=true;this.btnzhuoxiaoyao.label=app.getLang("guanqia_tip1");var r=void 0;for(var t=0;t<n.length;t++){r=csv.MonsterProxy.getIns().getCfg(n[t]);if(r){if(r.montype==2){this.btnzhuoxiaoyao.label=app.getLang("guanqia_tip2");break}}}}var o=csv.MonsterProxy.getIns().getMonsterBase(e.monstersetbase).element;if(o&&o.length>0){var a=app.str2Array(o,";","-");for(var t=0;t<a.length;t++){var s=Attributes.getWuxingEnumType(parseInt(a[t][0]));this.eleImgs[s-1].xinxi.text=a[t][a[t].length-1];this.eleBox.addChild(this.eleImgs[s-1])}}if(e.dropshow.length>0){var l=[];var u=game.ItemUtil.parserList(e.dropshow);for(var t=0,p=u.length;t<p;t++){if(u[t].getItemId()==88001){continue}l.push(u[t])}this.listdaoju1.array=l}else{this.listdaoju1.array=[]}}};t.SINGLE_KEY="guaji.GuajiPassInfoView";return t}(ui.guaji.huluguanqiaviewUI);h.GuajiPassInfoView=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.MOUSE_DOWN,this,this.showTip);this.on(Laya.Event.MOUSE_UP,this,this.hideTip);this.on(Laya.Event.MOUSE_OUT,this,this.hideTip)};e.prototype.showTip=function(t){if(app.ViewManager.DisplayedInStage(h.MonsterTip.SINGLE_KEY)){return}app.ViewManager.toggleView(h.MonsterTip,app.AppContainer.flowLayer,1,[this._ele,t.stageX-50,t.stageY-20])};e.prototype.hideTip=function(){app.ViewManager.toggleView(h.MonsterTip,app.AppContainer.flowLayer,-1)};e.prototype.setData=function(t){this._ele=csv.MonsterProxy.getIns().getCfg(t);this.img.skin=csv.MonsterProxy.getMonsterHeadUrl(this._ele);this.boss.visible=false;if(this._ele.montype==2){this.boss.visible=true}this.shuzi.text=this._ele.monlevel+""};return e}(ui.guaji.guankaUI);h.MonsterItem=i})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnzaixianlibao.on(Laya.Event.CLICK,this,this.openView)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=ScreenAdapter.OFFSET_Y;this.x=375;var e=60+t;if(app.ViewManager.DisplayedInStage(main.BossExitView.SINGLE_KEY)){app.ViewManager.toggleView(main.BossExitView,app.AppContainer.uiLayer,1)}this.y=e};e.prototype.updateView=function(t){this.btnzaixianlibao.skin="res/static/mainicon/"+t.picture+".png";this.labeldaojishi.text=app.getLang(t.name);if(t.function&&t.function.length>0){this.btnzaixianlibao.mouseEnabled=true}else{this.btnzaixianlibao.mouseEnabled=false}};e.prototype.openView=function(){game.ClosureManager.callFunction(parseInt(this.dataSource[0].function))};e.SINGLE_KEY="guaji.GuanKaTips";return e}(ui.main.guankajiangliitemUI);t.GuanKaTips=e})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(p){var t=function(){function t(t){this.ui=t;this.ui.liebiao.itemRender=r;this.ui.liebiao.renderHandler=new Laya.Handler(this,this.onRender);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.MJ_SELECT,this.ui,this.getGuideItemBtn,500);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.MIJING_TANSUO,this.ui,this.getGuideItemBtn2,500);this.taskIds=[];this.guideIds=[];var e=app.str2Array(game.Config.getParams(1212),";","-");for(var i=0,n=e.length;i<n;i++){this.taskIds.push(parseInt(e[i][0]));this.guideIds.push(parseInt(e[i][1]))}}t.prototype.addGuide=function(){var t=game.TaskModel.getIns().currMainTask;if(t&&t.data.questSate==1){var e=this.taskIds.indexOf(t.data.questIndex);if(e!=-1){var i=game.SystemSetModel.getInstance().settingData.data;var n=i[game.SettingType.guideId];if(n>=this.guideIds[e]){}}}else{guide.OtherGuideItem.getIns().hide()}};t.prototype.getGuideItemBtn=function(t){var e=p.SecretAreaModel.getIns().getAreaOpenData(t);if(e.status!=3){return"complete"}var i=0;var n=csv.GuajiProxy.getIns().getMijingArray();for(var r=0,o=n.length;r<o;r++){if(n[r].id==t){i=r;break}}this["liebiao"].scrollTo(i-1);for(var r=0,o=this["liebiao"].cells.length;r<o;r++){var a=this["liebiao"].cells[r];if(a.dataSource&&a.dataSource.id==t){return a.paiqianbtn}}return null};t.prototype.getGuideItemBtn2=function(t){var e=0;var i=csv.GuajiProxy.getIns().getMijingArray();for(var n=0,r=i.length;n<r;n++){if(i[n].id==t){e=n;break}}this["liebiao"].scrollTo(e-1);for(var n=0,r=this["liebiao"].cells.length;n<r;n++){var o=this["liebiao"].cells[n];if(o.dataSource&&o.dataSource.id==t){return o.tansuobtn}}return null};t.prototype.onRender=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(t){this.param=t;p.SecretAreaModel.getIns().on(p.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.onChangeSuccess);mjhole.MjHoleModel.getIns().on(mjhole.MjHoleModel.UPDATE_LAYER_VIEW,this,this.onChangeSuccess);this.refreshAll();this.addGuide()};t.prototype.onUnDisplay=function(){p.SecretAreaModel.getIns().off(p.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.onChangeSuccess);mjhole.MjHoleModel.getIns().off(mjhole.MjHoleModel.UPDATE_LAYER_VIEW,this,this.onChangeSuccess);guide.OtherGuideItem.getIns().hide()};t.prototype.onChangeSuccess=function(){this.updateView(false)};t.prototype.refreshAll=function(){this.updateView(true)};t.prototype.updateView=function(t){this.maxTime=p.GuajiModel.getIns().getMijingLimitTime();this._data=p.SecretAreaModel.getIns().getUseingAreaData();var e=csv.GuajiProxy.getIns().getMijingArray();var i=-1;var n=this.param>0?this.param:0;for(var r=0;r<e.length;r++){if(n==e[r].id){i=r}else{var o=p.SecretAreaModel.getIns().getAreaOpenData(e[r].id);if(o&&o.status==4){i=r}}}this.ui.liebiao.array=e;if(t){this.ui.liebiao.scrollTo(i-1)}};t.SINGLE_KEY="guaji.MijingChangeView";return t}();p.MijingChangeView=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.iconMoney.on(Laya.Event.CLICK,this,this.onShowTips)};e.prototype.onShowTips=function(){tip.TipManager.show(this._data,true)};e.prototype.setData=function(t,e,i){this._data=t;this._total=e;var n=p.SecretAreaModel.getIns().getChartValue(i);var r=t.count*n*60;if(this._total>0){r=Math.floor(r*(1+this._total*.01))}this.iconMoney.parserIcon(t.getItemId()+"-"+r,this.labeljifen);this.labeljifen.text+="/时";var o=mjhole.MjHoleModel.getIns().getMjjingUnlocks(i);if(o.indexOf(t.getItemId())>=0){this.gray=false}else{this.gray=true;this.labeljifen.text="0/时"}};return e}(ui.guaji.mijingshouyilingquitemUI);p.ShouyiItem=i;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjiangli.itemRender=grids.GridView;this.listjiangli.renderHandler=new Laya.Handler(this,this.onRender);this.listjiangli.hScrollBarSkin=" ";this.shouyilist.itemRender=i;this.shouyilist.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.paiqianbtn.clickHandler=new Laya.Handler(this,this.onBtnDiscove);this.tansuobtn.clickHandler=new Laya.Handler(this,this.onClickHandler);this.tansuoani.stop();this.buffIcon=new p.BuffIconControl(this.hbox,new Laya.Handler(this,this.onShowViewJiacheng));this.avatars=new avatar.AvatarAnimation;this.avatarDatas=new avatar.AvatarData;this.weizhi.addChild(this.avatars)};e.prototype.onClickHandler=function(){var t=mjhole.MjHoleModel.getIns().isCanOpenMjHoleView(this._ele.id,this._ele.type);if(t){app.ViewManager.toggleDialog(mjhole.MjHoleMainView,1,0,[this._ele.id,true]);app.ViewManager.toggleDialog(p.GuajiShouYiView,-1,0)}};e.prototype.onShowViewJiacheng=function(){var t=csv.GuajiProxy.getIns().getMijingCfg(this._ele.id);var e=app.str2Array(t.increase,"-");e.push("0");app.ViewManager.toggleDialog(p.MijingDetailView,1,0,[t,e])};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource,this._total,this._ele.id)};e.prototype.onRender=function(t){t.setData(t.dataSource);t.shuzi.text="";t.gezibg.visible=false;t.effect.visible=false;var e=mjhole.MjHoleModel.getIns().getMjjingUnlocks(this._ele.id);if(e.indexOf(t.dataSource.getItemId())>=0){t.gray=false}else{t.gray=true}};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){this.clean()};e.prototype.onBtnDiscove=function(){p.SecretAreaModel.getIns().c2sSecretAreaStartReq(this._ele.id)};e.prototype.clean=function(){this.tansuoani.stop();this.avatars.stop();this.avatars.visible=false;Laya.timer.clearAll(this);this.ani2.stop();this.ani3.stop()};e.prototype.loopFreshTime=function(){var t=game.Context.getServerTime()-this._data.starttime;if(t<this.maxTime){this.tansuoshijian.text=util.TimeUtil.formatTime(t)}else{this.tansuoshijian.text=util.TimeUtil.formatTime(this.maxTime);Laya.timer.clear(this,this.loopFreshTime)}};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.playBack=function(){this.ani3.on(Laya.Event.COMPLETE,this,this.playCaiji,[this.playGo,6]);this.avatars.setAni(avatar.AvatarAnimation.ANI_ENUMS.RUN,6);this.ani3.play(0,false)};e.prototype.playGo=function(){this.ani2.on(Laya.Event.COMPLETE,this,this.playCaiji,[this.playBack,0]);this.avatars.setAni(avatar.AvatarAnimation.ANI_ENUMS.RUN,0);this.ani2.play(0,false)};e.prototype.playCaiji=function(t,e){if(e===void 0){e=0}this.ani2.off(Laya.Event.COMPLETE,this,this.playCaiji);this.ani3.off(Laya.Event.COMPLETE,this,this.playCaiji);this.avatars.setAni(avatar.AvatarAnimation.ANI_ENUMS.CAIJI,e);var i=this.randomNum(2,6)*1e3;Laya.timer.once(i,this,t)};e.prototype.randomNum=function(t,e){var i=e-t;return t+Math.round(Math.random()*i)};e.prototype.setData=function(t){this.clean();this.maxTime=p.GuajiModel.getIns().getMijingLimitTime();this._total=0;this._ele=t;this.shouyilist.array=game.ItemUtil.parserList(t.rewardshow);this.tansuoshijian.text="";this.listjiangli.array=game.ItemUtil.parserList(t.rewardshow);this.nameimg.skin="guaji/"+t.name+".png";this.dituimg.skin="res/static/guajiditu/"+t.guajibg+".jpg";this._data=p.SecretAreaModel.getIns().getAreaOpenData(this._ele.id);var e=yuanshencode.YuanshenModel.getIns().getBigRealm(t.bigrealm);if(e===app.getLang("mijingjiesuo_lv0")){this.tiaojianlab.text=""}else{this.tiaojianlab.text=app.getLang("mijingjiesuo_jingjiexianzhi",e)}var i=mjhole.MjHoleModel.getIns().getMjjingProgress(this._ele.id);this.ani1.gotoAndStop(0);this.jiesuolab.color=game.STYLES.RED_COLOR_S;var n=csv.GuajiProxy.getIns().getCfgGuanqia(t.guanqia);var r=csv.GuajiProxy.getIns().getPart(n.id);this.jiesuolab.text=app.getLang("xiulian_shuoming_15",n.chapter+"-"+r.index);if(this._data){if(this._data.condition){for(var o=0;o<this._data.condition.length;o++){this._total+=this._data.condition[o]}this._total=this._total*.01}this.shouyilab.text=app.getLang("当前秘境探索收益+{0}%",this._total);if(this._data.starttime>0){var a=game.Context.getServerTime()-this._data.starttime;if(a<this.maxTime){this.tansuoshijian.text=util.TimeUtil.formatTime(a);this.startLoop()}else{this.tansuoshijian.text=util.TimeUtil.formatTime(this.maxTime)}}this.tansuobtn.label=app.getLang("秘境探险");if(p.GuajiModel.getIns().isActive(t.guanqia)){if(this._data.status==4){this.avatarDatas.fileName=game.AniView.FILE_NAME.MONSTER;this.avatarDatas.roleKey="jiguan"+this._data.chartId;var s=csv.ChartProxy.getIns().getCfg(this._data.chartId,6);var l=s.modelsize>0?s.modelsize*.01:1;this.avatars.scale(l,l);this.avatars.setAniData(this.avatarDatas);this.avatars.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,0);this.avatars.play();this.avatars.visible=true;this.playCaiji(this.playGo,0);var u=app.str2Array(this._ele.increase,"-");u.push("0");this.buffIcon.parser(u,this._data.condition,.7);this.arr=u;this.tansuoani.play(0,true);if(i>=100||this._data.condition[7]>0){this.ani1.gotoAndStop(5)}else{this.ani1.gotoAndStop(4);this.tansuobtn.label=app.getLang("继续探险")}}else if(this._data.status==3){if(i>=100){this.ani1.gotoAndStop(3)}else{this.ani1.gotoAndStop(2);if(i>0){this.tansuobtn.label=app.getLang("继续探险")}}}else{this.ani1.gotoAndStop(1)}}}else{if(p.GuajiModel.getIns().isActive(t.guanqia)){this.ani1.gotoAndStop(1)}}};return e}(ui.guaji.mijingguajitipitem3UI);p.MijingChangeItem=r})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(l){var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listliebiao.itemRender=l.MijingDetailItem;this.listliebiao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listliebiao.vScrollBarSkin=" "};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource,this.dataSource[0])};e.prototype.onDisplay=function(){l.SecretAreaModel.getIns().on(l.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){l.SecretAreaModel.getIns().off(l.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=0;var e=l.SecretAreaModel.getIns().getAreaOpenData(this.dataSource[0].id);if(e&&e.status==4){if(e.condition){for(var i=0;i<e.condition.length;i++){t+=e.condition[i]}}}this.labelmiaoshu.text=app.getLang("当前秘境探索收益总计+{0}%",t*.01);this.listliebiao.array=this.dataSource[1];this.listliebiao.scrollTo(0)};e.SINGLE_KEY="guaji.MijingDetailView";return e}(ui.guaji.mijingjiachengtipUI);l.MijingDetailView=i;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqianwang.clickHandler=new Laya.Handler(this,this.onFunctionCall);this.labeltishi.on(Laya.Event.LINK,this,this.onHandler)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.coolDown)};e.prototype.onHandler=function(t){chat.ChatStatic.dellLink(t)};e.prototype.onFunctionCall=function(){if(this.fid>0){game.ClosureManager.callFunction(this.fid);app.ViewManager.toggleDialog(i,-1,0)}};e.prototype.coolDown=function(){var t=l.SecretAreaModel.getIns().endtime-game.Context.getServerTime();if(t>=0){this.daojishi.text=util.TimeUtil.formatTime(t)}else{this.daojishi.text="";Laya.timer.clear(this,this.coolDown)}};e.prototype.setData=function(t,e){this.daojishi.visible=false;var i=parseInt(t);if(i>0){this.setdesc(csv.GuajiProxy.getIns().getcreaseCfgMap(i))}else{this.fid=csv.FunctionsProxy.ENUMS.BAG_TOOL;var n=game.ItemUtil.createVO(4105);var r=game.STYLES.ITEM_QUALITY[n.getQuality()];this.labeltishi.text=app.getLang("mijing_explain4",n.getName(),r,"1-"+n.getItemId());var o=l.SecretAreaModel.getIns().endtime-game.Context.getServerTime();if(o>0){this.daojishi.visible=true;this.daojishi.text=util.TimeUtil.formatTime(o);Laya.timer.loop(1e3,this,this.coolDown)}}this.imgtubiao.skin=csv.GuajiProxy.getIns().getIconPath(i);var a=csv.GuajiProxy.getIns().getIndexByfid(i);this.labeltishi2.text=app.getLang("当前秘境探索收益+{0}%",0);this.btnqianwang.visible=true;var s=l.SecretAreaModel.getIns().getAreaOpenData(e.id);if(s&&s.status==4){if(s.condition&&s.condition[a]>0){this.labeltishi2.text=app.getLang("当前秘境探索收益+{0}%",s.condition[a]*.01);this.btnqianwang.visible=false}}this.imgtubiao.gray=this.btnqianwang.visible;this.imgyijiacheng.visible=!this.btnqianwang.visible};e.prototype.setdesc=function(t){this.fid=t.fid;var e=[],i="";if(t.type==4){}else if(t.type==1){e=app.str2Array(t.increase,";","-");for(var n=0;n<e.length;n++){var r=app.getLang("Prop"+e[n][0]);i+=app.getLang(t.explain,r,e[n][3])}this.labeltishi.text=i}else if(t.type==2){e=app.str2Array(t.increase,";","-");for(var n=0;n<e.length;n++){var o=app.getLang(csv.DefclassProxy.getIns().getCfg(parseInt(e[n][0])).rolename);i+=app.getLang(t.explain,o,e[n][1]);if(n!=e.length-1){i+="\n"}}this.labeltishi.text=i}else if(t.type==6){this.labeltishi.text=app.getLang(t.explain,t.increase)}else if(t.type==7){var a=csv.GuajiProxy.getIns().getMijingCfg(t.increase);this.labeltishi.text=app.getLang(t.explain,app.getLang(a.name))}else{var s=game.ItemUtil.createVO(t.increase);var l=game.STYLES.ITEM_QUALITY[s.getQuality()];this.labeltishi.text=app.getLang(t.explain,s.getName(),l,"1-"+s.getItemId())}};return e}(ui.guaji.mijingjiachengItemUI);l.MijingDetailItem=t})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listdaoju1.itemRender=ui.guaji.mijingbagitemUI;this.listdaoju1.renderHandler=new Laya.Handler(this,this.onItemRender);this.listdaoju1.hScrollBarSkin=" ";this.btnmijing.clickHandler=new Laya.Handler(this,this.onClickHandler);this.btncaiji.clickHandler=new Laya.Handler(this,this.onBtnCaijiClickHandler);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.MIJING_CAIJI,this.btncaiji,null,500);this.maxTime=a.GuajiModel.getIns().getMijingLimitTime()};e.prototype.onItemRender=function(t){var e=t.dataSource;t.grid.setData(e);var i=mjhole.MjHoleModel.getIns().getMjjingUnlocks(this.dataSource[0].id);if(i.indexOf(t.dataSource.getItemId())>=0){t.gray=false;t.txtTitle.text=""}else{t.txtTitle.text=app.getLang("baoshi_des_4");t.gray=true}};e.prototype.onBtnCaijiClickHandler=function(){a.SecretAreaModel.getIns().c2sSecretAreaStartReq(this.dataSource[0].id)};e.prototype.onClickHandler=function(){var t=mjhole.MjHoleModel.getIns().isCanOpenMjHoleView(this.dataSource[0].id,this.dataSource[0].type);if(t){app.ViewManager.toggleDialog(mjhole.MjHoleMainView,1,0,[this.dataSource[0].id,true]);app.ViewManager.toggleDialog(a.MijingInfoView,-1,0)}};e.prototype.onDisplay=function(){a.SecretAreaModel.getIns().on(a.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){a.SecretAreaModel.getIns().off(a.SecretAreaModel.SECRETAREA_INFO_UPDATE,this,this.refreshAll);this.imgtansuozhong.visible=false;this.imgtansuozhong.stop();Laya.timer.clear(this,this.loopFreshTime)};e.prototype.startLoop=function(){Laya.timer.loop(1e3,this,this.loopFreshTime)};e.prototype.loopFreshTime=function(){var t=a.SecretAreaModel.getIns().getAreaOpenData(this.dataSource[0].id);var e=game.Context.getServerTime()-t.starttime;if(e<this.maxTime){this.labelshijian.text=app.getLang("{0}",util.TimeUtil.formatTime(e))}else{this.labelshijian.text=app.getLang("{0}",util.TimeUtil.formatTime(this.maxTime));Laya.timer.clear(this,this.loopFreshTime)}};e.prototype.refreshAll=function(){var t=this.dataSource[0];this.labeltitle.text=app.getLang(t.name);this.imgbiankuang.skin="res/static/guajiditu/"+t.picture+".jpg";var e=mjhole.MjHoleModel.getIns().getMjjingProgress(t.id);this.labeltansuojindu.text=app.getLang("探索进度：{0}%",e);if(e>=100){game.RedDotView.removeFrom(this.btnmijing)}else{game.RedDotView.addTo(this.btnmijing)}this.labeltuijian.color="#ffffff";if(game.Context.teamLv<t.teamlevel){this.labeltuijian.color=game.STYLES.RED_COLOR_S}this.labeltuijian.text=app.getLang("推荐：队伍等级{0}级",t.teamlevel);this.labelxiangqing.text=app.getLang(t.tips);this.listdaoju1.array=game.ItemUtil.parserList(t.rewardshow);this.imgtansuozhong.visible=false;this.imgtansuozhong.stop();var i=a.SecretAreaModel.getIns().getAreaOpenData(t.id);this.labeltiaojian.color=game.STYLES.DESC_TXT_COLOR_S;if(!a.GuajiModel.getIns().isActive(t.guanqia)){this.labeltiaojian.color=game.STYLES.RED_COLOR_S;var n=csv.GuajiProxy.getIns().getCfgGuanqia(t.guanqia);var r=csv.GuajiProxy.getIns().getPart(n.id);this.labeltiaojian.text=app.getLang("xiulian_shuoming_15",n.chapter+"-"+r.index);this.ani1.gotoAndStop(5)}else{var o=yuanshencode.YuanshenModel.getIns().getBigRealm(t.bigrealm);if(o===app.getLang("mijingjiesuo_lv0")){this.labeltanxian.text=""}else{this.labeltanxian.text=app.getLang("mijingjiesuo_jingjiexianzhi",o)}this.ani1.gotoAndStop(0);if(i){if(i.status==4){this.imgtansuozhong.play(0,true);this.imgtansuozhong.visible=true;if(e>=100){this.ani1.gotoAndStop(4)}else{this.ani1.gotoAndStop(2)}this.loopFreshTime();this.startLoop()}else if(i.status==3){if(e>=100){this.ani1.gotoAndStop(3)}else{this.ani1.gotoAndStop(1)}}}}};e.SINGLE_KEY="guaji.MijingInfoView";return e}(ui.guaji.mijingtipUI);a.MijingInfoView=t})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClick);this.anis=[this.liefeng,this.xuanwo1,this.tansuozhong];this.listmijingdaoju.renderHandler=new Laya.Handler(this,this.onRenderHander);this.centerLayout=new game.CenterLayoutMediator(this.listmijingdaoju,this,98,10);mjhole.MjHoleModel.getIns().on(mjhole.MjHoleModel.UPDATE_LAYER_VIEW,this,this.onUpdateLayer)};e.prototype.onUpdateLayer=function(){this.listmijingdaoju.refresh()};e.prototype.onRenderHander=function(t){var e=t.dataSource;t.skin=e.getIconUrl();var i=mjhole.MjHoleModel.getIns().getMjjingUnlocks(this.ele.id);if(i.indexOf(t.dataSource.getItemId())>=0){t.gray=false}else{t.gray=true}};e.prototype.onClick=function(){n.GuajiModel.getIns().updateReddotDict(this.ele);if(this.ele.type==1){app.ViewManager.toggleDialog(n.MijingInfoView,1,0,[this.ele])}else if(this.ele.type==2){app.ViewManager.toggleDialog(n.DongInfoView,1,0,[this.ele])}game.RedDotView.removeFrom(this.hongdian)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){for(var t=0;t<this.anis.length;t++){this.anis[t].stop()}this.ani2.stop()};e.prototype.refreshAll=function(){};e.prototype.updateReddot=function(){game.RedDotView.removeFrom(this.hongdian);if(n.GuajiModel.getIns().reddotMijingItem(this.ele)){game.RedDotView.addTo(this.hongdian)}};e.prototype.updateView=function(){for(var t=0;t<this.anis.length;t++){this.anis[t].stop()}this.ani1.gotoAndStop(0);this.ani2.stop();this.anis[0].play();if(this.ele.type==1){if(n.GuajiModel.getIns().isActive(this.ele.guanqia)){var e=n.SecretAreaModel.getIns().getAreaOpenData(this.ele.id);this.ani1.gotoAndStop(3);this.anis[0].play();if(e){if(e.status==4){this.imgtmijingditu1.skin="res/static/guajiditu/"+this.ele.smallicon+".png";this.ani1.gotoAndStop(2);this.anis[1].play();this.anis[2].play()}else if(e.status==3){this.xuanwo2.skin="res/static/guajiditu/"+this.ele.smallicon+".png";this.ani1.gotoAndStop(1)}this.centerLayout.array=game.ItemUtil.parserList(this.ele.show)}}}else if(this.ele.type==2){var i=csv.YuanshenProxy.getIns().getHoleCfgMapItem(this.ele.guanqia).condition;if(n.GuajiModel.getIns().isActive(i)){this.ani1.gotoAndStop(4);this.ani2.play(0,true);this.imgdongfu.skin="res/static/guajiditu/"+this.ele.smallicon+".png"}}this.updateReddot()};e.prototype.setData=function(t){this.ele=t;this.mijingming1.skin="guaji/"+this.ele.name+".png";this.mijingming2.skin="guaji/"+this.ele.name+".png";this.updateView()};e.SINGLE_KEY="guaji.MijingItemView";return e}(ui.guaji.mijingItemUI);n.MijingItemView=t})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(u){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listshouyi.itemRender=i;this.listshouyi.renderHandler=new Laya.Handler(this,this.onItemRenderHandler);this.listshouyi.array=[]};e.prototype.onItemRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource[0];var e=[],i=[];var n=game.Context.getServerZeroTime();for(var r=0,o=u.SecretAreaModel.getIns().record;r<o.length;r++){var a=o[r];if(t==a.chartId){if(a.starttime<n){e.push(a)}else{i.push(a)}}}if(i.length>0){var s=new Date(game.Context.getServerTime()*1e3);e.push(s.getMonth()+1+"/"+s.getDate())}var l=e.concat(i);this.listshouyi.array=l};e.SINGLE_KEY="guaji.MijingRecordShouyiView";return e}(ui.guaji.mijingshouyixiangqingtipsUI);u.MijingRecordShouyiView=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.setData=function(t){if(t instanceof SecretAreaRecord){var e=csv.GuajiProxy.getIns().getMijingCfg(t.areaId);this.label1.text=util.TimeUtil.formatDate(t.starttime,false,true,true,false,"-");this.label2.text=app.getLang(e.name);var i=0,n=0,r=void 0;for(var o=0;o<t.record.length;o++){r=csv.ItemProxy.getIns().getItemCfgById(t.record[o].itemID);if(r.type==csv.ItemProxy.TYPES.ZI_YUAN){i+=t.record[o].value}else{n+=t.record[o].value}}this.label3.text=n+"";this.label4.text=i+"";this.labelriqi.visible=false;this.label1.visible=true;this.label2.visible=true;this.label3.visible=true;this.label4.visible=true}else{this.labelriqi.text=t;this.labelriqi.visible=true;this.label1.visible=false;this.label2.visible=false;this.label3.visible=false;this.label4.visible=false}};return e}(ui.guaji.mijingshouyiitemUI);u.MijingRecordItem=i})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guaji;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.avatar=new avatar.AvatarAnimation;this.weizhi.addChild(this.avatar);this.avatarData=new avatar.AvatarData;this.avatarData.fileName=game.AniView.FILE_NAME.MONSTER};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=this.dataSource[0];this.labelname.text=csv.MonsterProxy.getMonsterName(t);var e=this.dataSource[1];var i=this.dataSource[2]-this.height;if(e<0){e=0}else if(e>Laya.stage.width-this.width){e=Laya.stage.width-this.width}if(i<0){i=0}else if(i>Laya.stage.height-this.height){i=Laya.stage.height-this.height}this.x=e;this.y=i;this.avatarData.roleKey=t.res;this.avatar.setAniData(this.avatarData);var n=t.cardtimes?t.cardtimes/100:1;this.avatar.scale(n,n);this.avatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,0);this.avatar.play()};e.SINGLE_KEY="guaji.MonsterTip";return e}(ui.guaji.bossitemUI);t.MonsterTip=e})(guaji||(guaji={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var common;(function(t){var e=function(){function t(t,e,i,n,r){if(r===void 0){r=0}this.parent=t;this.iconSkin=e;this.startPos=i;this.endPos=n;this.index=r}return t}();t.EmitterItemData=e;var i=function(r){__extends(t,r);function t(t,e,i){var n=r.call(this)||this;n.img=new Laya.Image(t);n.img.scale(.9,.9);n.addChild(n.img);n.startPos=e;n.endPos=i;n.midPos=new Laya.Point;n._randomMidPos();n.x=n.startPos.x;n.y=n.startPos.y;n.visible=true;return n}Object.defineProperty(t.prototype,"factor",{get:function(){return 0},set:function(t){this.x=Math.pow(1-t,2)*this.startPos.x+2*t*(1-t)*this.midPos.x+Math.pow(t,2)*this.endPos.x;this.y=Math.pow(1-t,2)*this.startPos.y+2*t*(1-t)*this.midPos.y+Math.pow(t,2)*this.endPos.y},enumerable:true,configurable:true});t.prototype.aniPlay=function(){var t=this;Laya.Tween.to(this,{factor:1},1e3,Laya.Ease.linearIn,new Laya.Handler(this,function(){Laya.Tween.clearAll(t)}))};t.prototype.playEnd=function(){this.visible=false;this.removeSelf()};t.prototype._randomMidPos=function(){var t=(Math.random()>=.5?-1:1)*n.randomOffNumY;if(Math.random()>=.5){this.midPos.x=(this.startPos.x>this.endPos.x?this.endPos.x:this.startPos.x)-n.randomOffNumX}else{this.midPos.x=(this.startPos.x>this.endPos.x?this.startPos.x:this.endPos.x)+n.randomOffNumX}this.midPos.y=Math.abs(this.endPos.y-this.startPos.y)/2+(this.startPos.y>this.endPos.y?this.endPos.y:this.startPos.y)+t};return t}(Laya.Sprite);t.EmitterItem=i;var n=function(){function t(t,e){this._item=t;this._itemNum=e}t.prototype.go=function(){for(var t=0;t<this._itemNum;t++){Laya.timer.once(50,this,this.createItem,[this._item])}};t.prototype.createItem=function(t){if(t.index>this._itemNum){return}var e=new i(t.iconSkin,t.startPos,t.endPos);e.zOrder=1399;t.parent.addChild(e);e.aniPlay();t.index++;Laya.timer.once(t.index*50+100,e,e.playEnd);Laya.timer.once(50,this,this.createItem,[t])};t.randomOffNumX=150;t.randomOffNumY=150;return t}();t.Emitter=n;var r=function(){function t(t,e){this._arr=t;this._itemNum=e}t.prototype.go=function(){Laya.timer.once(800,this,this.playEffect);Laya.timer.once(this._itemNum*50+1500,this,this.stopEffect);for(var t=0;t<this._arr.length;t++){var e=new n(this._arr[t],this._itemNum);e.go()}};t.prototype.playEffect=function(){};t.prototype.stopEffect=function(){main.RoleInfoView.getIns().animationfly.visible=false};return t}();t.EmitterManger=r})(common||(common={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guajiexp;(function(i){var r=guaji.GuajiModel;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GuajiExpModel.getIns();this.listdaoju.itemRender=grids.GridView;this.listdaoju.renderHandler=grids.GridView.CommonItemRender;this.btnlingqu.clickHandler=new Laya.Handler(this,this._buyItem);this.titlebg.skin="res/static/txt_title_guajishouyi.png"};e.prototype._buyItem=function(){app.ProtocolRequest.HangUpRewardReq();var t=this.pos1.parent.localToGlobal(new Laya.Point(this.pos1.x,this.pos1.y));var e=this.pos2.parent.localToGlobal(new Laya.Point(this.pos2.x,this.pos2.y));var i=this.pos3.parent.localToGlobal(new Laya.Point(this.pos3.x,this.pos3.y));var n=main.MainUIIcon.getMainUIIconPoint(csv.MainIconProxy.BAG);var r=main.MainUIIcon.getMainUIIconPoint(csv.MainIconProxy.mainLeftGroup);var o=new Laya.Point(n.x-35,n.y-35);var a=new Laya.Point(r.x-35,r.y-35);var s=main.RoleInfoView.getIns().imgtouxiang.parent.localToGlobal(new Laya.Point(main.RoleInfoView.getIns().imgtouxiang.x-50,main.RoleInfoView.getIns().imgtouxiang.y-20));var l=[new common.EmitterItemData(Laya.stage,"res/icon/item/item_8024.png",t,s),new common.EmitterItemData(Laya.stage,"res/icon/item/item_004.png",e,a),new common.EmitterItemData(Laya.stage,"res/icon/item/item_20001.png",i,o)];var u=new common.EmitterManger(l,20);u.go();u=null;app.SoundManager.getIns().playSound("boxfly")};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this._model.on(i.GuajiExpModel.UPDATE_GUAIJI_VIEW,this,this.refreshAll);app.ProtocolRequest.HangUpInfoReq();Laya.timer.loop(1e3,this,this._updateTime)};e.prototype.onUnDisplay=function(){this._model.off(i.GuajiExpModel.UPDATE_GUAIJI_VIEW,this,this.refreshAll);Laya.timer.clearAll(this)};e.prototype.refreshAll=function(){this.listdaoju.array=this._model.getAwardArr();this.labellv.text="Lv."+game.Context.teamLv.toString();this.imgtouxiang.skin=role.RoleVO.getHeadIconUrl(game.Context.mainRole.prof);this.labeltime.text=app.getLang("guaji_time",this._model.getGuajiTime());var t=csv.MyTeamProxy.getIns().getTeamMaxExp(game.Context.teamLv);this.imgjindutiao01.width=game.Context.teamExp/t*288;this.imgjindutiao02.width=this.imgjindutiao01.width+this._model.expNum/t*288;if(this.imgjindutiao02.width>288){this.imgjindutiao02.width=288}if(this.imgjindutiao01.width>288){this.imgjindutiao01.width=288}this.labelbaifenbi.text=app.getLang("guaji_des_4")+"+"+Math.floor(this._model.expNum/t*100)+"%";this.labeltishi.text=app.getLang("offline_des1");this.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(game.Context.mainRole.headframeId);this.imgtitle.skin=guaji.GuajiModel.getIns().getChaperPath();var e=csv.GuajiProxy.getIns().getCfgGuanqia(r.getIns().getGujiPassId());var i=e.reward.split(";");this.shuzhi1.text=Math.floor(+i[0].split("-")[1]*60)+"/时";this.shuzhi2.text=Math.floor(+i[1].split("-")[1]*60)+"/时";var n=Math.floor(+e.reward1.split("-")[1]*60/1e4);this.shuzhi3.text=n+"/时";this.labeltishi.text=app.getLang("offline_des1",this._model.get963MaxTime()/3600)};e.prototype._updateTime=function(){var t=game.Context.getServerTime()-this._model.guajiData.lastRewardTime;if(t%60==0){app.ProtocolRequest.HangUpInfoReq()}this.labeltime.text=app.getLang("guaji_time",this._model.getGuajiTime())};e.SINGLE_KEY="guajiexp.GuajiExpMainView";return e}(ui.lixianjingyan.guajishouyiviewUI);i.GuajiExpMainView=t})(guajiexp||(guajiexp={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guajiexp;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.updateData=function(){this.limit=+game.Config.getParams(962)+this.guajiData.lastRewardTime;this.limitMax=this.get963MaxTime()+this.guajiData.lastRewardTime};e.prototype.get963MaxTime=function(){return+game.Config.getParams(963)+csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.GUAJI_TIME_LIMIT,vipcode.VipModel.getIns().vipLvl)*3600};e.prototype.getAwardArr=function(){var t=[];if(this.guajiData.reward.length==0){this.expNum=0}for(var e=0;e<this.guajiData.reward.length;e++){if(this.guajiData.reward[e].itemID==game.ItemUtil.ENUMS.PET_EXP_ITEM&&!csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.PET_LIST)){continue}if(this.guajiData.reward[e].itemID==8024){this.expNum=this.guajiData.reward[e].value}var i=this.guajiData.reward[e].itemID.toString()+"-"+this.guajiData.reward[e].value.toString();t.push(game.ItemUtil.parserList(i)[0])}return t};e.prototype.getProgress=function(){var t=game.Context.getServerTime()-this.guajiData.lastRewardTime;var e=this.get963MaxTime();return t/e};e.prototype.getGuajiSec2Str=function(){if(this.guajiData.lastRewardTime==0){return}return util.TimeUtil.sec2Str(this.getSubGuajiTime(),false,4,false,true)};e.prototype.getGuajiTime=function(){if(this.guajiData.lastRewardTime==0){return}return util.TimeUtil.formatTime(this.getSubGuajiTime())};e.prototype.getSubGuajiTime=function(){var t=0;if(this.guajiData.lastRewardTime==0){return}t=game.Context.getServerTime()-this.guajiData.lastRewardTime;if(t<+game.Config.getParams(962)){this.state=1}else if(t>=+game.Config.getParams(962)&&t<3600*6){this.state=2}else if(t>=3600*6&&t<this.get963MaxTime()){this.state=3}else{this.state=4;t=this.get963MaxTime()}return t};e.SINGLE_KEY="guajiexp.GuajiExpModel";e.UPDATE_GUAIJI_VIEW="UPDATE_GUAIJI_VIEW";return e}(app.ModelBase);t.GuajiExpModel=e})(guajiexp||(guajiexp={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guajiexp;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){this._model=i.GuajiExpModel.getIns();app.ViewManager.regist(i.GuajiExpMainView)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.HangUpInfoAck,this,this.onHangUpInfoAck);this.addMsgListener(app.ProtocolResponse.HangUpRewardAck,this,this.onHangUpRewardAck)};e.prototype.onHangUpInfoAck=function(t,e){this._model.guajiData=e.hangupInfo[0];this._model.updateData();this._model.getGuajiTime();this._model.event(i.GuajiExpModel.UPDATE_GUAIJI_VIEW)};e.prototype.onHangUpRewardAck=function(t,e){if(e){app.ViewManager.toggleDialog(i.GuajiExpMainView,-1,0)}};e.prototype._goFunView=function(){app.ViewManager.toggleDialog(i.GuajiExpMainView,1,0)};e.SINGLE_KEY="guajiexp.GuajiExpModule";return e}(app.ModuleBase);i.GuajiExpModule=t})(guajiexp||(guajiexp={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(a){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.isPop=false;return t}t.prototype.init=function(){app.ViewManager.regist(a.ShouhuhuludaoView,"shouhuhuludao.atlas","bosszhandou.atlas","effect/zidongzhandou/skill_jijian01.atlas");app.ViewManager.regist(a.GuardRightView,"bosszong.atlas","bosszhandou.atlas");app.ViewManager.regist(a.GuardRightBottomView,"bosszhandou.atlas");app.ViewManager.regist(a.ShouhuhuludaofubenjinduView,"bosszhandou.atlas");app.ViewManager.regist(a.GuardleftView,"jiuchongyaota.atlas");app.ViewManager.regist(a.ShouhuHuluDaoCutDownView,"bosszhandou.atlas");a.GuardIslandsModel.getIns().start()};t.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.GuardIslandStartNtf,this,this.GuardIslandStartNtf);this.addMsgListener(app.ProtocolResponse.GuardIslandEndNtf,this,this.GuardIslandEndNtf);this.addMsgListener(app.ProtocolResponse.GuildBuffNtf,this,this.GuildBuffNtf);this.addMsgListener(app.ProtocolResponse.JoinGuardIslandAck,this,this.JoinGuardIslandAck);this.addMsgListener(app.ProtocolResponse.StartGatherAck,this,this.StartGatherAck);this.addMsgListener(app.ProtocolResponse.EndGatherAck,this,this.EndGatherAck);this.addMsgListener(app.ProtocolResponse.StopGatherAck,this,this.StopGatherAck);this.addMsgListener(app.ProtocolResponse.GuardIslandAwardNtf,this,this.GuardIslandAwardNtf);this.addMsgListener(app.ProtocolResponse.GuardIslandNtf,this,this.GuardIslandNtf);this.addMsgListener(app.ProtocolResponse.GuardIslandExpNtf,this,this.GuardIslandExpNtf);this.addMsgListener(app.ProtocolResponse.JoinInfIslandAck,this,this.onJoinInfIslandAck);this.addMsgListener(app.ProtocolResponse.GuardBossAck,this,this.onGuardBossAck)};t.prototype.onGuardBossAck=function(t,e){a.GuardIslandsModel.getIns().event(a.GuardIslandsModel.EVENT_UPDATE_BOSS_FLAG,[e.bossflag])};t.prototype.GuardIslandExpNtf=function(t,e){a.GuardIslandsModel.getIns().vo.curExp=e.exp.toNumber();a.GuardIslandsModel.getIns().event(a.GuardIslandsModel.EVENT_EXP_UPDATE)};t.prototype.onJoinInfIslandAck=function(t,e){a.GuardIslandsModel.getIns().event(a.GuardIslandsModel.EVENT_JOIN_INF_ISLAND_ACK,[e.inf])};t.prototype.GuardIslandNtf=function(t,e){a.GuardIslandsModel.getIns().vo.set_diff(e.diff)};t.prototype.GuardIslandAwardNtf=function(t,e){var i=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(i==csv.MapProxy.MAP_TYPE.HULU_DAO||i==csv.MapProxy.MAP_TYPE.HULU_DAO_BOSS||i==csv.MapProxy.MAP_TYPE.HULU_DAO_MONSTER){game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.onMapChangeHandler,[e])}};t.prototype.onMapChangeHandler=function(t){game.Context.off(game.ContextEvent.CHANGE_MAP,this,this.onMapChangeHandler);app.ViewManager.toggleDialog(a.ShouHuDaoJieSuan,1,0,t)};t.prototype.GuardIslandStartNtf=function(t,e){a.GuardIslandsModel.getIns().vo.isActiviy=true;if(!this.isPop){this.isPop=true}a.GuardIslandsModel.getIns().vo.info=e;a.GuardIslandsModel.getIns().vo.set_activityId(e.actid)};t.prototype.GuardIslandEndNtf=function(t,e){this.isPop=false;a.GuardIslandsModel.getIns().vo.isActiviy=false;app.ViewManager.toggleDialog(a.ShouhuhuludaoView,-1,0)};t.prototype.GuildBuffNtf=function(t,e){var i=e.gbuff||[];a.GuardIslandsModel.getIns().vo.clearBuffer();for(var n=0;n<i.length;n++){var r=i[n];var o=a.GuardIslandsModel.getIns().vo.getGuildBufferVO(r.buffid);o.save(r)}a.GuardIslandsModel.getIns().event(a.GuardIslandsModel.EVENT_USE_MEDICINE)};t.prototype.JoinGuardIslandAck=function(t,e){if(e.flag==1){}};t.prototype.StartGatherAck=function(t,e){a.GuardIslandsModel.getIns().saveCollectInfo(e);a.GuardIslandsModel.getIns().event(a.GuardIslandsModel.EVENT_GATHER_INFO,e)};t.prototype.EndGatherAck=function(t,e){a.GuardIslandsModel.getIns().endResp=e;a.GuardIslandsModel.getIns().event(a.GuardIslandsModel.EVENT_GATHER_END,e)};t.prototype.StopGatherAck=function(t,e){a.GuardIslandsModel.getIns().delCollectInfo(e.playerID)};t.SINGLE_KEY="guard.GuardIslandsModule";return t}(app.ModuleBase);a.GuardIslandsModule=t})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.getCollectID=function(t){for(var e=0;e<this.huluDaoCfgArray.length;e++){var i=this.huluDaoCfgArray[e];if(i.diff==t&&i.type==guardisland.EGuardIslandType.Collect){return i.id}}return-1};e.prototype.init=function(){var t=app.Config.getResById("huludao.csv");this.huluDaoCfgMap=t.getMap("id");this.huluDaoCfgArray=t.getArray();t=app.Config.getResById("huludao_award.csv");this.huluDaoAwardCfgMap=t.getMap("diff");this.huluDaoAwardList=t.getArray();t=app.Config.getResById("huludao_buff.csv");this.huludaoBuffCfgMap=t.getMap("id");this.huludaoBuffArray=t.getArray();t=app.Config.getResById("collection.csv");this.collectionMap=t.getMap("id")};Object.defineProperty(e.prototype,"maxDif",{get:function(){if(this._maxDif==undefined){this._maxDif=0;for(var t=0;t<this.huluDaoAwardList.length;t++){var e=this.huluDaoAwardList[t];if(e.diff>this._maxDif){this._maxDif=e.diff}}}return this._maxDif},enumerable:true,configurable:true});e.prototype.getListByDiff=function(t){var e=[];for(var i=0;i<this.huluDaoCfgArray.length;i++){var n=this.huluDaoCfgArray[i];if(n.diff==t){e.push(n)}}return e};e.SINGLE_KEY="csv.GuardIsandProxy";return e}(app.ModelBase);t.GuardIsandProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(h){var e;(function(t){t[t["Boss"]=1]="Boss";t[t["Essence"]=2]="Essence";t[t["Monester"]=3]="Monester";t[t["Collect"]=4]="Collect";t[t["None"]=0]="None"})(e=h.EGuardIslandType||(h.EGuardIslandType={}));var o=function(){function t(){}t.prototype.save=function(t){this.vo.num=t.num};return t}();h.GuardBufferCdVO=o;var i=function(){function t(){this.cdEnd=0}t.prototype.getDelayTime=function(){var t=game.Config.getIntParams(484);return t};t.prototype.start=function(){this.cdEnd=game.Context.getServerTime()+this.getDelayTime()};t.prototype.stop=function(){this.cdEnd=0};Object.defineProperty(t.prototype,"subTime",{get:function(){return this.cdEnd-game.Context.getServerTime()},enumerable:true,configurable:true});t.prototype.isCdFinished=function(){if(this.cdEnd==0){return true}var t=game.Context.getServerTime()-this.cdEnd;return t>0};return t}();var c=function(){function t(){}Object.defineProperty(t.prototype,"monsterType",{get:function(){if(this.list.length>0){return this.list[this.list.length-1].monsterType}return e.None},enumerable:true,configurable:true});t.prototype.isDead=function(){if(this.list.length>0){var t=this.list[this.list.length-1];return t.isDead()}return false};Object.defineProperty(t.prototype,"count",{get:function(){var t=0;if(this.list){for(var e=0;e<this.list.length;e++){t+=this.list[e].count}return t}return t},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"npcVO",{get:function(){if(this.list.length>0){for(var t=0;t<this.list.length;t++){var e=this.list[t];if(e.mapobj&&e.mapobj.relievetime==0){return this.list[t]}}return this.list[this.list.length-1]}},enumerable:true,configurable:true});return t}();h.GuardIslandLeftVO=c;var t=function(){function t(){this.cfgID=0;this.diff=0;this.curExp=0;this.enterTime=0;this.bloodMax=5;this.curBloodLevel=0;this.isActiviy=false}Object.defineProperty(t.prototype,"roleList",{get:function(){return scene.SceneMediator.getInstance().huludaoRoleList||[]},enumerable:true,configurable:true});t.prototype.getGuildBufferVO=function(t){if(this.guildDgnList){for(var e=0;e<this.guildDgnList.length;e++){var i=this.guildDgnList[e];if(i.vo.buffid==t){return i}}}};t.prototype.clearBuffer=function(){if(this.guildDgnList){for(var t=0;t<this.guildDgnList.length;t++){var e=this.guildDgnList[t];e.useTime=0;e.vo.num=0}}};t.prototype.getNear=function(t){var e=scene.SceneMediator.getInstance().getViewById(game.Context.mainRoleId);if(e&&e.vo){var i=e.vo.posX;var n=e.vo.posY;var r=Number.MAX_VALUE;var o=void 0;for(var a=0;a<t.length;a++){var s=t[a];var l=Math.sqrt((i-s.posX)*(i-s.posX)+(n-s.posY)*(n-s.posY));if(r>l){o=s;r=l}}return o}};t.prototype.findByType=function(t){if(this.roleList){var e=[];for(var i=0;i<this.roleList.length;i++){var n=this.roleList[i];if(n.monsterType==t&&!n.isDead()){var r=false;if(n.isBoss){r=true}else{if(!n.hasAnyPeoFight()){if(n.isCollect){if(n.isCanCollect){r=true}}else{r=true}}}if(r){e.push(n)}}}if(e.length){return this.getNear(e)}}};t.prototype.set_activityId=function(t){this.cfgID=t;this.activityFuncCfg=csv.ActivityFunction.getIns().getCfg(this.cfgID);this.mapid=this.activityFuncCfg.map;this.enterTime=this.activityFuncCfg.param1;this.everySec=this.activityFuncCfg.param2};t.prototype.getCutDownSec=function(){var t=this.info.starttime+this.enterTime;var e=game.Context.getServerTime();if(e>=t){return 0}var i=e-this.info.starttime;return i};t.prototype.set_diff=function(t){this.diff=t;this.huluDaoAwardCfg=csv.GuardIsandProxy.getIns().huluDaoAwardCfgMap[this.diff]};t.prototype.getScore=function(t){var e=Math.floor(t*1e4);var i=this.huluDaoAwardCfg;var n=this.bloodMax;var r=0;for(var o=0;o<n;o++){var a=i["blood"+(o+1)];if(o<n-1){var s=i["blood"+(o+2)];if(e>=s&&e<a){r=o}}}if(e<i["blood"+this.bloodMax]){r=this.bloodMax-1}return r};t.prototype.getNext=function(t){if(this.isMaxLv(t)){return 0}var e=this.bloodMax;var i=this.huluDaoAwardCfg;t++;for(var n=0;n<e;n++){var r=i["blood"+(n+1)];if(t==n){return r}}};t.prototype.isMaxLv=function(t){return t>=this.bloodMax-1};t.prototype.updateBossBlood=function(t){var e=this.getScore(t);this.curBloodLevel=e};t.prototype.init=function(){this.guildDgnList=[];var t=csv.GuardIsandProxy.getIns().huludaoBuffArray;for(var e=0;e<t.length;e++){var i=t[e];var n=new GuildDgnBuff;var r=new o;r.vo=n;n.num=0;n.buffid=i.id;this.guildDgnList.push(r)}};return t}();h.GuardIsLandVO=t;var n=function(e){__extends(p,e);function p(){var t=e!==null&&e.apply(this,arguments)||this;t.bUseClientPos=false;t.bShowBossHp=false;t._isAutoSearch=false;t._coldCD=new i;t.collectRoleList=[];t.debug=true;return t}p.getIns=function(){return app.Singleton.getInstance(p)};p.getStarStr=function(t){var e="D;C;B;A;S";var i=e.split(";");return i[t]};Object.defineProperty(p.prototype,"total_peo",{get:function(){return parseInt(game.Config.getParams(482))},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"isAutoSearch",{get:function(){return this._isAutoSearch},set:function(t){this.stopCold();this._isAutoSearch=t},enumerable:true,configurable:true});Object.defineProperty(p.prototype,"rewardSec",{get:function(){return parseInt(game.Config.getParams(485))},enumerable:true,configurable:true});p.prototype.init=function(){this.fightPriority=[];this.fightQuitTime=parseInt(game.Config.getParams(481))};p.prototype.start=function(){this.vo=new t;this.vo.init();this.on(p.EVENT_UPDATE_AUTO_SEARCH,this,this.onStartAuto);this.quitHandler=new Laya.Handler(this,this.onQuit)};p.prototype.isEnable=function(){return this.vo&&this.vo.isActiviy};p.prototype.onQuit=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(t==csv.MapProxy.MAP_TYPE.HULU_DAO){console.log("此地图不主动退出!!! maptype = %d mapid = %s",t,game.Context.mainRole.mapId);return}app.ProtocolRequest.BattleShowEndReq(battle.BattleModel.getIns().battleid)};p.prototype.callLaterHandler=function(t){var e={};e.endHandler=this.quitHandler;e.resp=t;app.ViewManager.toggleDialog(h.GuardFailView,1,0,[e])};p.prototype.showFail=function(t){this.callLaterHandler(t)};p.prototype.showBossSucceed=function(t){this.callLaterHandler(t)};p.prototype.showSucceed=function(t){var e={};e.endHandler=this.quitHandler;e.resp=t;app.ViewManager.toggleDialog(h.ShouhuhuludaoshengliView,1,0,[e])};p.prototype.stopAutoFight=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(t==csv.MapProxy.MAP_TYPE.HULU_DAO){this.absStopFight()}};p.prototype.absStopFight=function(){role.LeadingRoleView.getIns().cancelCollect();this.isAutoSearch=false;role.LeadingRoleView.getIns().isBeginingCollect=false;role.LeadingRoleView.getIns().stopMove();if(scene.ClickEffect.getIns().posView){scene.ClickEffect.getIns().posView.removeClickView()}this.event(p.EVENT_UPDATE_AUTO_SEARCH)};p.prototype.startCold=function(){if(this.isAutoSearch){this._coldCD.start()}};p.prototype.stopCold=function(){if(this.isAutoSearch){this._coldCD.stop();role.LeadingRoleView.getIns().isBeginingCollect=false;this.onStartAuto()}};p.prototype.onStartAuto=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(t!=csv.MapProxy.MAP_TYPE.HULU_DAO){return}var e=role.LeadingRoleView.getIns();if(e&&e.isBeginingCollect){return}if(role.LeadingRoleView.getIns().roleState==role.RoleStateConst.MOVE){return}if(this.isAutoSearch){if(!this._coldCD.isCdFinished()){return}var i=null;for(var n=0;n<this.fightPriority.length;n++){var r=this.fightPriority[n];if(r==h.E_Ai_isLand.None){continue}var o=this.vo.findByType(r);if(o){i=o;break}}if(i){game.SceneModel.getInstance().goto(i)}}else{}};p.prototype.timeEndActivityStart=function(){manager.FlowManager.instance.flowByStyle1(app.getLang("倒计时结束,活动开始!"))};p.prototype.sortHandler=function(t,e){if(t.monsterType<e.monsterType){return-1}else if(t.monsterType>e.monsterType){return 1}return 0};p.prototype.rebuildShowList=function(){var t=[];var e=new c;e.list=[];var i=scene.SceneMediator.getInstance().huludaoRoleList||[];for(var n=0;n<i.length;n++){var r=i[n];if(r.monsterType==h.EGuardIslandType.Collect){e.list.push(r)}else{var o=new c;o.list=[];o.list.push(r);t.push(o)}}if(e.list.length>0){t.push(e)}var a=[];var s=[];for(var n=0;n<t.length;n++){var l=t[n];var u=l.isDead();if(u){s.push(l)}else{a.push(l)}if(l.monsterType==h.EGuardIslandType.Boss){this.event(p.EVENT_UPDATE_BOSS_ICON)}}a=a.sort(this.sortHandler);if(s.length>0){a=a.concat(s)}return a};p.prototype.getObjView=function(t){var e=scene.SceneMediator.getInstance().huludaoRoleList||[];for(var i=0;i<e.length;i++){var n=e[i];if(Uint64.equal(t,n.mapobj.id)){return n.mapobj}}};p.prototype.getStringByStar=function(t){return p.getStarStr(t-1)};p.prototype.canShowTip=function(t){if(this.vo.huluDaoAwardCfg.diff==csv.GuardIsandProxy.getIns().maxDif){return false}return(this.vo.huluDaoAwardCfg.update||0)<t};p.prototype.stopMove=function(){if(this.isAutoSearch==false){var t=scene.SceneMediator.getInstance().getViewById(game.Context.mainRoleId);if(t){t.stopMove()}}};p.prototype.everyMinExp=function(){var t=this.vo.diff;if(t==0){return 0}var e=csv.GuardIsandProxy.getIns().huluDaoAwardCfgMap[t];var i=e.expparam;var n=0;for(var r=0;r<game.Context.roleList.length;r++){var o=game.Context.roleList[r];var a=o.level;var s=csv.LevelProxy.getIns().getCfg(a);if(s){var l=s.actexp;n+=i*l}}n=n*(60/this.vo.everySec);return n};p.prototype.isMonsterInMap=function(){var t=!this.showlist||this.showlist&&this.showlist.length<=0;return!t};p.prototype.succeedWindow=function(){if(this.endResp){this.showOk(this.endResp);this.endResp=null}};p.prototype.showOk=function(t){if(t.result==1){manager.FlowManager.instance.flowByStyle1(app.getLang("shoufuisland_txt_14"));var e=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId);if(e==csv.MapProxy.MAP_TYPE.KUAFU_BOSS_OUT||e==csv.MapProxy.MAP_TYPE.WORLD_BOSS_ICE){app.ViewManager.toggleDialog(boss.BossKuaFuCaijiChenggongView,1,undefined,[t],undefined,undefined,false)}else{app.ViewManager.toggleDialog(h.ShouhuhuludaocaijiChenggongView,1,undefined,[t],undefined,undefined,false)}}};p.prototype.saveCollectInfo=function(t){for(var e=0;e<this.collectRoleList.length;e++){var i=this.collectRoleList[e];if(Uint64.equal(t.gatherID,i.gatherID)){i.refresh(t);return}}var n=new h.CollectInfoVO;n.refresh(t);this.collectRoleList.push(n)};p.prototype.delCollectInfo=function(t){for(var e=0;e<this.collectRoleList.length;e++){var i=this.collectRoleList[e];if(Uint64.equal(t,i.roleID)){this.collectRoleList.splice(e,1);return}}};p.prototype.delByCollectUID=function(t){for(var e=0;e<this.collectRoleList.length;e++){var i=this.collectRoleList[e];if(Uint64.equal(t,i.gatherID)){this.collectRoleList.splice(e,1);return}}};p.prototype.isCollecting=function(t){for(var e=0;e<this.collectRoleList.length;e++){var i=this.collectRoleList[e];if(Uint64.equal(t,i.gatherID)){return i.isCanCollect}}return true};p.prototype.isBossDead=function(){var t=this.showlist;if(t){var e=false;for(var i=0;i<t.length;i++){var n=t[i];if(n.monsterType==h.EGuardIslandType.Boss){e=true;if(n.isDead()){return true}}}if(!e){return true}}return false};p.SINGLE_KEY="guard.GuardIslandsModel";p.EVENT_UPDATE_BOSS_ICON="EVENT_UPDATE_BOSS_ICON";p.EVENT_UPDATE_BOSS_FLAG="EVENT_UPDATE_BOSS_FLAG";p.EVENT_UPDATA_MAP_ITEMS="EVENT_UPDATA_MAP_ITEMS";p.EVENT_UPDATA_MAP_ONE_ITEMS="EVENT_UPDATA_MAP_ONE_ITEMS";p.EVENT_USE_MEDICINE="EVENT_USE_MEDICINE";p.EVENT_GATHER_INFO="EVENT_GATHER_INFO";p.EVENT_EXP_UPDATE="EVENT_EXP_UPDATE";p.EVENT_JOIN_INF_ISLAND_ACK="EVENT_JOIN_INF_ISLAND_ACK";p.EVENT_GATHER_END="EVENT_GATHER_END";p.EVENT_UPDATE_AUTO_SEARCH="EVENT_UPDATE_AUTO_SEARCH";return p}(app.ModelBase);h.GuardIslandsModel=n})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(i){var n=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this)};e.prototype.setData=function(t){this.labelname.text=t.name;this.labeljileigongxian.text=t.sword.toNumber()+""};return e}(ui.shouhuhuludao.banghuichengyuanitemUI);var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listchengyuanxinxi.itemRender=n;this.listchengyuanxinxi.renderHandler=new Laya.Handler(this,this.onBanghuichengyuanitem);this.labelmiaoshu1.text=app.getLang("shoufuisland_txt_41");this.labelshuzi.x=this.labelmiaoshu1.x+this.labelmiaoshu1.textField.textWidth;this.labelmiaoshu2.text=app.getLang("shoufuisland_txt_09")};e.prototype.onBanghuichengyuanitem=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){i.GuardIslandsModel.getIns().on(i.GuardIslandsModel.EVENT_JOIN_INF_ISLAND_ACK,this,this.onInfoHandler);app.ProtocolRequest.JoinInfIslandReq()};e.prototype.onInfoHandler=function(t){this.labelshuzi.text=t.length+"";this.listchengyuanxinxi.array=t};return e}(ui.shouhuhuludao.banghuichengyviewUI);i.BanghuichengyView=t})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(e){var r;(function(t){t[t["None"]=0]="None";t[t["Boss"]=1]="Boss";t[t["Essence"]=2]="Essence";t[t["Normal"]=3]="Normal";t[t["Collect"]=4]="Collect"})(r=e.E_Ai_isLand||(e.E_Ai_isLand={}));var o=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this)};e.prototype.setData=function(t){this.shuxing.text=app.getLang("shoufuisland_txt_0"+t)};return e}(ui.shouhuhuludao.shouhuhuludaoxuanzexialalitemUI);var a=function(){function t(t,e,i){this._selected=false;this.index=t;this.skin=e;this.selectHandler=i;e.gouxuan.clickHandler=new Laya.Handler(this,this.onCheckHandler);e.butxiala.on(Laya.Event.MOUSE_DOWN,this,this.onXiaHandler);e.imgdikuang.on(Laya.Event.MOUSE_DOWN,this,this.onXiaHandler);this.setType(r.None)}t.prototype.isCanUsed=function(){return this.skin.gouxuan.selected};t.prototype.setType=function(t){this.type=t;this.setLabel(app.getLang("shoufuisland_txt_0"+t))};t.prototype.onCheckHandler=function(){i.getIns().doAction()};t.prototype.onXiaHandler=function(){this._selected=!this._selected;this.skin.butxiala.selected=this._selected;this.selectHandler.runWith([this.index,this._selected])};t.prototype.clearStatus=function(){this.skin.butxiala.selected=false;this._selected=false};t.prototype.setLabel=function(t){this.skin.labelmiaoshu.text=t};return t}();var i=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){n.prototype.initialize.call(this);this.nodelist=[];this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);for(var t=0;t<4;t++){var e=this["xuanzi"+(t+1)];var i=new a(t,e,new Laya.Handler(this,this.onSelectHandler));this.nodelist.push(i)}this.xiala1.itemRender=o;this.xiala1.selectEnable=true;this.xiala1.selectHandler=new Laya.Handler(this,this.onShowListSelectHandler);this.xiala1.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.dataList=[];this.dataList.push(r.None,r.Essence,r.Normal,r.Collect);this.xiala1.array=this.dataList;this.xiala1.visible=false;this.guwulab2.text=app.getLang("shoufuisland_txt_06");this.btnquxiao.clickHandler=new Laya.Handler(this,this.onCannelHandler);this.btnkaishi.clickHandler=new Laya.Handler(this,this.onStartHandler)};t.prototype.onStartHandler=function(){this.setAuto=true};Object.defineProperty(t.prototype,"setAuto",{set:function(t){if(t){e.GuardIslandsModel.getIns().isAutoSearch=true;e.GuardIslandsModel.getIns().event(e.GuardIslandsModel.EVENT_UPDATE_AUTO_SEARCH)}else{e.GuardIslandsModel.getIns().stopAutoFight()}this.refreshByStatus();this.close()},enumerable:true,configurable:true});t.prototype.onCannelHandler=function(){this.setAuto=false};t.prototype.refreshByStatus=function(){this.onOkHandler();if(e.GuardIslandsModel.getIns().isAutoSearch){this.btnquxiao.visible=true;this.btnkaishi.visible=false}else{this.btnquxiao.visible=false;this.btnkaishi.visible=true}};t.prototype.getTypeList=function(t){if(t===void 0){t=false}var e=[];for(var i=0;i<this.nodelist.length;i++){var n=this.nodelist[i];if(n.type!=r.None){if(t){e.push(n.type)}else{if(n.isCanUsed()){e.push(n.type)}}}}return e};t.prototype.onOkHandler=function(){var t=this.getTypeList();e.GuardIslandsModel.getIns().fightPriority=t};t.prototype.doAction=function(){this.onOkHandler()};t.prototype.onShowListSelectHandler=function(t){if(t==-1){return}var e=this.dataList[t];var i=this.getTypeList(true);if(i.indexOf(e)!=-1){this.xiala1.visible=false;this.xiala1.selectedIndex=-1;manager.FlowManager.instance.flowByStyle1(app.getLang("shoufuisland_txt_05"))}else{if(this.cur_node){this.cur_node.clearStatus();this.cur_node.setType(e)}this.xiala1.visible=false;this.xiala1.selectedIndex=-1}this.doAction()};t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};t.prototype.onSelectHandler=function(t,e){var i=0;var n=0;var r=0;for(var o=0;o<this.nodelist.length;o++){var a=this.nodelist[o];if(t==o){r=a.skin.x;i=a.skin.y;n=a.skin.height;this.cur_node=a}else{a.clearStatus()}}this.xiala1.y=i+n;this.xiala1.visible=e};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.refreshByStatus()};t.SINGLE_KEY="guardisland.GuardautofightView";return t}(ui.shouhuhuludao.shouhuhuludaozidongtiaozhanUI);e.GuardautofightView=i})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(i){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);var t=i.GuardIslandsModel.getIns().fightQuitTime;this.useTime=t;this.btnqueding.clickHandler=new Laya.Handler(this,this.onClickHandler);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onClickHandler)};Object.defineProperty(t.prototype,"data",{get:function(){return this.dataSource[0]},enumerable:true,configurable:true});t.prototype.onClickHandler=function(){this.close()};t.prototype.close=function(){if(this.data.endHandler){this.data.endHandler.run()}this.curTicket=0;e.prototype.close.call(this)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};Object.defineProperty(t.prototype,"battletype",{get:function(){return this.data.resp.battletype},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"result",{get:function(){return this.data.resp.result},enumerable:true,configurable:true});t.prototype.refreshAll=function(){if(this.result==battle.BattleConst.BATTLE_RESULT_TYPE.WIN){app.SoundManager.getIns().playSound("win");this.shibaibox.visible=false;this.shenglibox.visible=true;this.daojishi.visible=false;this.suDesc.text=app.getLang("shoufuisland_txt_43");this.label01.text=app.getLang("shoufuisland_txt_37",app.getLang(this.data.resp.tarname)||"playername")}else{app.SoundManager.getIns().playSound("lose");this.shenglibox.visible=false;this.shibaibox.visible=true;this.wanjianame2.text=app.getLang("shoufuisland_txt_26",app.getLang(this.data.resp.tarname)||"playername");this.curTicket=this.useTime;this.onTickHander();Laya.timer.once(1e3,this,this.onTickHander)}};t.prototype.onTickHander=function(){if(this.curTicket<=0){if(this.parent){this.onClickHandler()}}else{Laya.timer.once(1e3,this,this.onTickHander);if(this.result==battle.BattleConst.BATTLE_RESULT_TYPE.WIN){this.daojishi.text=app.getLang("boss_revive_tips1",this.curTicket)}else{this.daojishi2.text=app.getLang("boss_revive_tips1",this.curTicket)}}this.curTicket-=1};t.SINGLE_KEY="guardisland.GuardFailView";return t}(ui.alert.shouhuhuludaoshenglishibaiUI);i.GuardFailView=t})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(a){var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(e.prototype,"vo",{get:function(){return this.dataSource},enumerable:true,configurable:true});e.prototype.initialize=function(){t.prototype.initialize.call(this);this.btncaiji.clickHandler=new Laya.Handler(this,this.onGotoHandler);this.btngongji.clickHandler=new Laya.Handler(this,this.onGotoHandler);this.imgwuping.mouseEnabled=true;this.imgwuping.on(Laya.Event.MOUSE_UP,this,this.onClickBufferHandler);this.imgwuping1.on(Laya.Event.MOUSE_UP,this,this.onClickBufferHandler)};e.prototype.onClickBufferHandler=function(){var t=this.vo.npcVO;var e=t.getBuffCfg();tip.TipManager.showGuardIslandbufferTips(e)};e.prototype.onGotoHandler=function(){a.GuardIslandsModel.getIns().stopAutoFight();if(this.vo.monsterType==a.EGuardIslandType.Collect){if(this.vo.count>0){var t=a.GuardIslandsModel.getIns().vo.findByType(a.E_Ai_isLand.Collect);if(t){game.SceneModel.getInstance().goto(t)}}}else{game.SceneModel.getInstance().goto(this.vo.npcVO)}};e.prototype.setData=function(t,e){var i=t.npcVO;var n=i.getCfg().npchead||"";var r=i.getBuffCfg();if(t.monsterType==a.EGuardIslandType.Collect){this.btncaiji.visible=true;this.btngongji.visible=false}else{this.btncaiji.visible=false;this.btngongji.visible=true}switch(t.monsterType){case a.EGuardIslandType.Essence:case a.EGuardIslandType.Monester:this.boxguaiwuzhuangtai.visible=true;this.boxguaiwushuliang.visible=false;this.boxtiaozhanrenshu.visible=false;this.imgbosstouxiang1.skin="res/touxiang/"+n+".png";if(r){this.imgwuping1.skin="res/icon/item/"+r.icon+".png"}this.btncaiji.label=app.getLang("shoufuisland_txt_18");if(t.isDead()){this.labelmiaoshu2.text=app.getLang("shoufuisland_txt_33");this.labelmiaoshu2.color=game.STYLES.RED_COLOR_S}else{this.labelmiaoshu2.text=app.getLang("shoufuisland_txt_32");this.labelmiaoshu2.color=game.STYLES.GREEN_COLOR_S}break;case a.EGuardIslandType.Boss:this.boxguaiwuzhuangtai.visible=false;this.boxguaiwushuliang.visible=false;this.boxtiaozhanrenshu.visible=true;this.btncaiji.label=app.getLang("shoufuisland_txt_18");this.mingzi.text=csv.NpcProxy.getName(i.getCfg());var o=i.mapobj.curhp/i.mapobj.maxhp;if(a.GuardIslandsModel.getIns().bShowBossHp){this.mingzi.text+="-"+(Math.floor(o*100)/100).toString()}this.xuetiao.value=o;this.renshuzi.text=i.mapobj.fightflag+"/"+a.GuardIslandsModel.getIns().total_peo;break;case a.EGuardIslandType.Collect:this.boxguaiwuzhuangtai.visible=false;this.boxguaiwushuliang.visible=true;this.boxtiaozhanrenshu.visible=false;this.btncaiji.label=app.getLang("shoufuisland_txt_19");this.imgbosstouxiang.skin="res/touxiang/"+n+".png";this.labelshuliang.text=app.getLang("shoufuisland_txt_23");this.labelshu.text=t.count.toString();if(r){this.imgwuping.skin="res/icon/item/"+r.icon+".png"}break}};return e}(ui.bosszhandou.shouhuhuludaobossliebiaoitemUI);var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._itemHeight=0;t._isSpread=true;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.zOrder=app.AppContainer.UI_LAYER_NUME.LEFT_LEFT_TOP_ICON;this.offsetInitX=this.imgjiaobiao.x;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.y=app.AppContainer.UI_LAYER_Y.LEFT_ICON;this.listmubiao.itemRender=i;this.listmubiao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listmubiao.scrollBar.on(Laya.Event.CHANGE,this,this.onListChangleHandler);this.btnshouqi.clickHandler=new Laya.Handler(this,this.onShouQiHandler);this.imgjiaobiao.removeSelf()};t.prototype.updateBossIcon=function(){var t=a.GuardIslandsModel.getIns().isBossDead()};t.prototype.onShouQiHandler=function(){this.isSpread=!this.isSpread};Object.defineProperty(t.prototype,"isSpread",{get:function(){return this._isSpread},set:function(t){this._isSpread=t;if(t){this.x=0;this.btnshouqi.skin="bosszhandou/btn_jiantouzuo.png"}else{this.x=-(this.width-this.btnshouqi.width);this.btnshouqi.skin="bosszhandou/btn_jiantouyou.png"}},enumerable:true,configurable:true});t.prototype.delay1=function(t){t.text=a.GuardIslandsModel.getIns()._coldCD.subTime.toString();Laya.timer.once(200,this,this.delay1,[t])};t.prototype.onRenderHandler=function(t,e){this._itemHeight=t.height;t.setData(t.dataSource,e)};t.prototype.getBarPos=function(){var t=this._itemHeight+this.listmubiao.spaceY;if(this.listmubiao.array){var e=this.listmubiao.array.length;var i=this.listmubiao.scrollBar.value/t;return i}return 0};t.prototype.upHandler=function(){var t=this.getBarPos();var e=Math.floor(t);if(t==e&&t!=0){t--}this.listmubiao.scrollTo(t)};t.prototype.downHandler=function(){var t=this.getBarPos();this.listmubiao.scrollTo(Math.floor(t)+1)};t.prototype.onDisplay=function(){a.GuardIslandsModel.getIns().on(a.GuardIslandsModel.EVENT_UPDATA_MAP_ITEMS,this,this.updateItemHandler);this.callLater(this.refreshAll)};t.prototype.updateItemHandler=function(){this.listmubiao.array=a.GuardIslandsModel.getIns().showlist};t.prototype.onListChangleHandler=function(){var t=this.listmubiao.scrollBar.value;var e=this._itemHeight+this.listmubiao.spaceY;if(!this.listmubiao.array){return}var i=false;var n=false;var r=this.listmubiao.array.length;if(this.listmubiao.height>=r*e-this.listmubiao.spaceY){}else{if(t<=0){n=true}else{var o=r*e-this.listmubiao.spaceY;i=true;if(t+this.listmubiao.height<o){n=true}else{n=false}}}};t.prototype.onUnDisplay=function(){a.GuardIslandsModel.getIns().off(a.GuardIslandsModel.EVENT_UPDATA_MAP_ITEMS,this,this.updateItemHandler)};t.prototype.refreshAll=function(){if(!this.isSpread){this.isSpread=true}var t=a.GuardIslandsModel.getIns().showlist;this.listmubiao.array=t;this.callLater(this.onListChangleHandler)};t.SINGLE_KEY="guardisland.GuardleftView";return t}(ui.bosszhandou.shouhuhuludaomubiaoxuanzeUI);a.GuardleftView=t})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(h){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.UI_LAYER_NUME.LEFT_RIGHT_ICON;this.btn1.skin=csv.FunctionsProxy.getIns().getUrl("btn_pingbi",0);this.btn1.clickHandler=new Laya.Handler(this,this.onShieldClickHandler);this.btn2.skin=csv.FunctionsProxy.getIns().getUrl("btn_zongmenchengyuan",0);this.btn3.skin=csv.FunctionsProxy.getIns().getUrl("btn_guizeshuoming",0);this.btn4.skin=csv.FunctionsProxy.getIns().getUrl("btn_zidongzhandou",0);this.btn4.clickHandler=new Laya.Handler(this,this.onAutoFightHandler)};e.prototype.onShieldClickHandler=function(){battle.BattleModel.getIns().boShield=!battle.BattleModel.getIns().boShield};e.prototype.onShieldHandler=function(){var t=battle.BattleModel.getIns().boShield==false?"btn_pingbi":"btn_weipingbi";this.btn1.skin=csv.FunctionsProxy.getIns().getUrl(t,0)};e.prototype.setEffect=function(t){var e=t;if(t){if(!this.effect){this.effect=Laya.Pool.getItemByCreateFun(e,function(){return new game.AniView(e,game.AniView.BASE,game.AniView.FILE_NAME.UI)});this.effect.pos(this.btn4.width*.5,this.btn4.height*.5)}this.btn4.addChild(this.effect)}else{if(this.effect){this.effect.removeSelf();Laya.Pool.recover(e,this.effect)}}};e.prototype.onAutoFightHandler=function(){app.ViewManager.toggleDialog(h.GuardautofightView,1,0)};e.prototype.onDisplay=function(){this.on(Laya.Event.RESIZE,this,this.updateLayout);h.GuardIslandsModel.getIns().on(h.GuardIslandsModel.EVENT_UPDATE_AUTO_SEARCH,this,this.onUpdateAutoSearch);battle.BattleModel.getIns().on(battle.BattleModel.SHIELD_CHANGE,this,this.onShieldHandler);this.onShieldHandler();this.callLater(this.refreshAll)};e.prototype.onUpdateAutoSearch=function(){this.setEffect(h.GuardIslandsModel.getIns().isAutoSearch?"skill_UI_kuang2":null);h.GuardIslandsModel.getIns().stopMove()};e.prototype.updateLayout=function(){this.x=Laya.stage.width-this.width;this.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-this.height-n.getIns().height};e.prototype.onUnDisplay=function(){this.off(Laya.Event.RESIZE,this,this.updateLayout);battle.BattleModel.getIns().off(battle.BattleModel.SHIELD_CHANGE,this,this.onShieldHandler);h.GuardIslandsModel.getIns().off(h.GuardIslandsModel.EVENT_UPDATE_AUTO_SEARCH,this,this.onUpdateAutoSearch)};e.prototype.refreshAll=function(){this.onUpdateAutoSearch()};return e}(ui.shouhuhuludao.shouhuhuludaorightUI);h.GuardRightView=t;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(e.prototype,"cfg",{get:function(){return this.dataSource},enumerable:true,configurable:true});e.prototype.initialize=function(){t.prototype.initialize.call(this);this.btnshiyong.clickHandler=new Laya.Handler(this,this.onClickHandler);this.cdMask=new h.LattleCDMask(this.gezi.width/2-5,.5);this.cdMask.x=this.gezi.x+this.gezi.width/2*this.gezi.scaleX;this.cdMask.y=this.gezi.y+this.gezi.height/2*this.gezi.scaleY;this.addChild(this.cdMask);this.myLattice=new h.GuardislandBufferIcon(this.gezi);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){h.GuardIslandsModel.getIns().on(h.GuardIslandsModel.EVENT_USE_MEDICINE,this,this.onUpdateUse)};e.prototype.onUpdateUse=function(){if(this.cfg){this.setData(this.cfg)}};e.prototype.onUnDisplay=function(){h.GuardIslandsModel.getIns().off(h.GuardIslandsModel.EVENT_USE_MEDICINE,this,this.onUpdateUse)};e.prototype.onClickHandler=function(){var t=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId.toString());if(t==csv.MapProxy.MAP_TYPE.HULU_DAO_BOSS){if(this.cdMask.isplaying){manager.FlowManager.instance.flowByStyle1(app.getLang("shoufuisland_txt_25"))}else{this.cdMask.play(this.cfg.cd);app.ProtocolRequest.UseGuildBuffReq(this.cfg.id)}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("shoufuisland_txt_24"))}};e.prototype.setData=function(t){this.myLattice.setData(t);var e=h.GuardIslandsModel.getIns().vo.getGuildBufferVO(t.id);var i=e.vo.num;if(i<=0){this.btnshiyong.mouseEnabled=false;this.btnshiyong.gray=true}else{this.btnshiyong.mouseEnabled=true;this.btnshiyong.gray=false}this.myLattice.setCnt(i)};return e}(ui.bosszhandou.shouhuhuludaoshiyongdaojuitemUI);var n=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._isSpread=true;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.UI_LAYER_NUME.LEFT_RIGHT_ICON;this.listshiyong.itemRender=i;this.listshiyong.renderHandler=new Laya.Handler(this,this.onRenderHander);this.btnshouqi.clickHandler=new Laya.Handler(this,this.onShouQiHandler)};t.prototype.onShouQiHandler=function(){this.isSpread=!this.isSpread};Object.defineProperty(t.prototype,"isSpread",{get:function(){return this._isSpread},set:function(t){this._isSpread=t;if(t){this.x=Laya.stage.width-this.width;this.btnshouqi.skin="bosszhandou/btn_jiantouzuo.png"}else{this.x=Laya.stage.width-this.btnshouqi.width;this.btnshouqi.skin="bosszhandou/btn_jiantouyou.png"}},enumerable:true,configurable:true});t.prototype.onRenderHander=function(t,e){t.setData(t.dataSource)};t.prototype.onDisplay=function(){Laya.stage.on(Laya.Event.RESIZE,this,this.updateLayout);this.updateLayout();h.GuardIslandsModel.getIns().on(h.GuardIslandsModel.EVENT_EXP_UPDATE,this,this.onUpdateExp);this.callLater(this.refreshAll)};t.prototype.onUpdateExp=function(){this.callLater(this.updateExp)};t.prototype.updateLayout=function(){this.isSpread=this.isSpread;this.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-this.height};t.prototype.onUnDisplay=function(){Laya.stage.off(Laya.Event.RESIZE,this,this.updateLayout);h.GuardIslandsModel.getIns().off(h.GuardIslandsModel.EVENT_EXP_UPDATE,this,this.onUpdateExp)};t.prototype.refreshAll=function(){if(!this.isSpread){this.isSpread=true}this.text2.text=h.GuardIslandsModel.getIns().vo.diff.toString();this.updateExp();this.listshiyong.array=csv.GuardIsandProxy.getIns().huludaoBuffArray};t.prototype.updateExp=function(){var t=h.GuardIslandsModel.getIns().everyMinExp();var e=h.GuardIslandsModel.getIns().vo.curExp||0;var i=app.getLang("shoufuisland_txt_38",game.MoneyModel.format(e),game.MoneyModel.format(t));this.text3.text=i};t.SINGLE_KEY="guardisland.GuardRightBottomView";return t}(ui.bosszhandou.shouhuhuludaodangqiannanduviewUI);h.GuardRightBottomView=n;var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.zOrder=app.AppContainer.UI_LAYER_NUME.CHAT;this._model=battle.BattleModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.on(Laya.Event.RESIZE,this,this.updateLayout);this.updateHandler()};e.prototype.updateHandler=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.off(Laya.Event.RESIZE,this,this.updateLayout)};e.prototype.updateLayout=function(){this.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-this.height};e.prototype.convert=function(t){return Math.ceil(t*100)};e.prototype.refreshAll=function(){if(this._model.bossInfo){var t=this._model.bossInfo;var e=t.hp/t.maxhp;var i=h.GuardIslandsModel.getIns().vo.getScore(e);var n=h.GuardIslandsModel.getStarStr(i);var r=this.convert(e);if(h.GuardIslandsModel.getIns().vo.isMaxLv(i)){var o=app.getLang("shoufuisland_txt_44",t.getName(),r);this.shalab.text=o}else{var a=h.GuardIslandsModel.getIns().vo.getNext(i);var s=i+1;var l=h.GuardIslandsModel.getStarStr(s);var u=Math.ceil(a/100);var p=app.getLang("shoufuisland_txt_22",t.getName(),r,u,l);this.shalab.text=p}this.pingfen.value=n}};e.SINGLE_KEY="guardisland.ShouhuhuludaofubenjinduView";return e}(ui.bosszhandou.shouhuhuludaofubenjinduviewUI);h.ShouhuhuludaofubenjinduView=e;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.zOrder=app.AppContainer.UI_LAYER_NUME.CHAT;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.on(Laya.Event.RESIZE,this,this.updateLayout);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.off(Laya.Event.RESIZE,this,this.updateLayout)};e.prototype.updateLayout=function(){this.x=(Laya.stage.width-this.width)/2;this.y=main.RoleInfoView.getIns().height};e.prototype.curSub=function(){return this.dataSource[0]};e.prototype.refreshAll=function(){this.curTime=this.curSub();this.showLabel();Laya.timer.once(1e3,this,this.updateTime)};e.prototype.updateLabel=function(){if(this.curTime<60){this.daojishicilp1.x=this.zidi1.x-this.daojishicilp1.width}else{this.daojishicilp1.x=this.zidi1.x-this.daojishicilp1.width;this.zidi2.x=this.daojishicilp1.x-this.zidi2.width;this.daojishicilp2.x=this.zidi2.x-this.daojishicilp2.width}};e.prototype.showLabel=function(){if(this.curTime<60){this.daojishicilp2.visible=false;this.zidi2.visible=false;this.daojishicilp1.visible=true;this.daojishicilp1.value=this.curTime.toString()}else{this.daojishicilp2.visible=true;this.zidi2.visible=true;this.daojishicilp1.visible=true;var t=this.curTime%60;var e=this.curTime/60;e=Math.floor(e);this.daojishicilp2.value=e.toString();this.daojishicilp1.value=t.toString()}this.callLater(this.updateLabel)};e.prototype.updateTime=function(){this.curTime--;if(this.curTime<=0){this.removeSelf();h.GuardIslandsModel.getIns().timeEndActivityStart();return}this.showLabel();Laya.timer.once(1e3,this,this.updateTime)};return e}(ui.bosszhandou.huodongdaojishiUI);h.ShouhuhulutimestartView=r})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(t){var u;(function(t){t[t["Rect"]=0]="Rect";t[t["Circle"]=1]="Circle"})(u=t.Cd_Shap||(t.Cd_Shap={}));var e=function(l){__extends(t,l);function t(t,e,i,n,r){if(t===void 0){t=1}if(e===void 0){e=.5}if(i===void 0){i=false}if(n===void 0){n=-90}if(r===void 0){r=u.Rect}var o=l.call(this)||this;o._percent=0;o.onceMs=10;o.rotation=n;o.dir=i;o.alpha=e;o.cirleRadius=Math.sqrt(t*t+t*t);var a=new Laya.Sprite;var s=o.cirleRadius*1/Math.sqrt(2);if(r==u.Rect){a.graphics.drawRect(-s,-s,s*2,s*2,"#ff0000")}else if(r==u.Circle){o.cirleRadius=s=t;a.graphics.drawCircle(0,0,s,"#ff0000")}o.mask=a;return o}Object.defineProperty(t.prototype,"value",{set:function(t){this._percent=t;this.graphics.clear();var e=this.dir?1:-1;var i=e*(360*this._percent);this.graphics.drawPie(0,0,this.cirleRadius,i,0,"#000000")},enumerable:true,configurable:true});t.prototype.play=function(t){this.allTime=t;this.lastTime=Laya.timer.currTimer+t;Laya.timer.once(this.onceMs,this,this.onFrameHandler)};Object.defineProperty(t.prototype,"isplaying",{get:function(){return this._isRun},enumerable:true,configurable:true});t.prototype.onFrameHandler=function(){var t=this.lastTime-Laya.timer.currTimer;if(t<=0){this.value=0;if(this.endHandler){this.endHandler.run()}this._isRun=false}else{this.value=t/this.allTime;if(this.updateHandler){this.updateHandler.run()}this._isRun=true;Laya.timer.once(this.onceMs,this,this.onFrameHandler)}};return t}(Laya.Sprite);t.LattleCDMask=e})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(r){var t=function(){function t(t){this.skin=t;this.initialize()}t.prototype.initialize=function(){for(var t=0;t<5;t++){this.skin["xing"+(t+1)].visible=false}this.skin.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDownHanlder)};t.prototype.onMouseDownHanlder=function(){tip.TipManager.showGuardIslandbufferTips(this.cfg)};t.prototype.setData=function(t){this.cfg=t;this.skin.img.skin="res/icon/item/"+t.icon+".png"};t.prototype.setCnt=function(t){if(t<=0){this.skin.shuzi.color=game.STYLES.RED_COLOR_S}else{this.skin.shuzi.color=game.STYLES.GREEN_COLOR_S}this.skin.shuzi.text=t.toString()};return t}();r.GuardislandBufferIcon=t;var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.useCutDown=true;return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=grids.GridView.CommonItemRender;this.quedingbtn.clickHandler=new Laya.Handler(this,this.onCloseHandler);this.closebtn.clickHandler=new Laya.Handler(this,this.onCloseHandler);this.useTime=r.GuardIslandsModel.getIns().rewardSec};t.prototype.onCloseHandler=function(){this.close()};t.prototype.onDisplay=function(){app.SoundManager.getIns().playSound("win");this.callLater(this.refreshAll)};Object.defineProperty(t.prototype,"data",{get:function(){return this.dataSource},enumerable:true,configurable:true});t.prototype.refreshAll=function(){util.SkUtil.setWinSkt(this.imgwofang);this.beijingguang.visible=true;util.AniUtil.startCircle(this.beijingguang);var t="";var e=this.data.award;for(var i=0;i<e.length;i++){t+=e[i].itemID+"-"+e[i].value+";"}var n=game.ItemUtil.parserList(t);this.daojulist.array=n;if(n.length<=0){this.lab2.text=app.getLang("shoufuisland_txt_45");this.lab2.visible=true}else{this.lab2.text="";this.lab2.visible=false}this.score.value=r.GuardIslandsModel.getIns().getStringByStar(this.data.star);this.lab1.visible=true;if(r.GuardIslandsModel.getIns().canShowTip(this.data.star)){this.lab1.text=app.getLang("shoufuisland_txt_49")}else{this.lab1.text=app.getLang("shoufuisland_txt_48")}if(this.useCutDown){this.curTicket=this.useTime;this.onTickHander();Laya.timer.once(1e3,this,this.onTickHander)}};t.prototype.onTickHander=function(){if(this.curTicket<=0){if(this.parent){this.onCloseHandler()}}else{Laya.timer.once(1e3,this,this.onTickHander);this.quedingbtn.label=app.getLang("shoufuisland_txt_27",this.curTicket)}this.curTicket-=1};t.prototype.onUnDisplay=function(){this.beijingguang.visible=false};return t}(ui.jiesuan.shouhuhuludaojiesuanUI);r.ShouHuDaoJieSuan=e;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listgezi1.itemRender=grids.GridView;this.listgezi1.renderHandler=grids.GridView.CommonItemRender;this.listgezi2.itemRender=grids.GridView;this.listgezi2.renderHandler=new Laya.Handler(this,this.onRenderHander);this.label03.text=app.getLang("shoufuisland_txt_11");this.quedingbtn.clickHandler=new Laya.Handler(this,this.onOkHandler);this.useTime=r.GuardIslandsModel.getIns().fightQuitTime;this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.label01.text=app.getLang("shoufuisland_txt_46");this.label02.text=app.getLang("shoufuisland_txt_47")};e.prototype.onRenderHander=function(t,e){var i=t.dataSource;t.setHldBuffer(i)};e.prototype.onOkHandler=function(){this.close()};e.prototype.onDisplay=function(){app.SoundManager.getIns().playSound("win");this.quedingbtn.clickHandler=new Laya.Handler(this,this.onClickHandler);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.quedingbtn.clickHandler=null};e.prototype.refreshAll=function(){var t="";var e=this.data.resp.award||[];for(var i=0;i<e.length;i++){var n=e[i];t+=n.itemID+"-"+n.value+";"}this.listgezi1.array=game.ItemUtil.parserList(t);this.showClanReward();this.label05.text=app.getLang(this.data.resp.tarname)||"playername";this.curTicket=this.useTime;this.onTickHander();Laya.timer.once(1e3,this,this.onTickHander)};e.prototype.showClanReward=function(){var t=[];var e=this.data.resp.battleval;if(e&&e.length>=2){var i=e[0].toNumber();var n=e[1].toNumber();var r=new GuildDgnBuff;r.buffid=i;r.num=n;t.push(r);this.listgezi2.array=t}else{console.log("%c%s","color:#ff00ff","无奖励数据!!!!!!!!!!!!");this.listgezi2.array=[]}};Object.defineProperty(e.prototype,"data",{get:function(){return this.dataSource[0]},enumerable:true,configurable:true});e.prototype.onClickHandler=function(){this.close()};e.prototype.close=function(){if(this.data.endHandler){this.data.endHandler.run()}this.curTicket=0;t.prototype.close.call(this)};e.prototype.onTickHander=function(){if(this.curTicket<=0){if(this.parent){this.onClickHandler()}}else{Laya.timer.once(1e3,this,this.onTickHander);this.quedingbtn.label=app.getLang("shoufuisland_txt_27",this.curTicket)}this.curTicket-=1};return e}(ui.alert.shouhuhuludaoshengliUI);r.ShouhuhuludaoshengliView=i;var n=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.curTime=0;t.itemids=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};Object.defineProperty(t.prototype,"data",{get:function(){return this.dataSource[0]},enumerable:true,configurable:true});t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listgezi1.itemRender=grids.GridView;this.listgezi1.renderHandler=grids.GridView.CommonItemRender;this.listgezi2.itemRender=grids.GridView;this.listgezi2.renderHandler=new Laya.Handler(this,this.onClanHander);this.label03.text=app.getLang("shoufuisland_txt_10");this.quedingbtn.clickHandler=new Laya.Handler(this,this.onOkHandler)};t.prototype.onClanHander=function(t,e){t.setHldBuffer(t.dataSource)};t.prototype.onOkHandler=function(){this.close()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.curTime=0};t.prototype.refreshAll=function(){this.itemids=[];var t=this.data.award;var e="";for(var i=0;i<t.length;i++){var n=t[i];e+=n.itemID+"-"+n.value+";";this.itemids.push(n.itemID)}this.listgezi1.array=game.ItemUtil.parserList(e);this.clanItems();this.curTime=r.GuardIslandsModel.getIns().fightQuitTime;this.showLabel();Laya.timer.once(1e3,this,this.updateTime)};t.prototype.clanItems=function(){var t=this.data.dgnbuff||[];this.listgezi2.array=t};t.prototype.showLabel=function(){this.quedingbtn.label=app.getLang("shoufuisland_txt_16",this.curTime)};t.prototype.updateTime=function(){this.curTime--;if(this.curTime<=0){this.close();return}this.showLabel();Laya.timer.once(1e3,this,this.updateTime)};t.SINGLE_KEY="guardisland.ShouhuhuludaocaijiChenggongView";return t}(ui.alert.shouhuhuludaocaijichenggongUI);r.ShouhuhuludaocaijiChenggongView=n})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.setSubTime)};e.prototype.calSub=function(){if(i.GuardIslandsModel.getIns().vo&&i.GuardIslandsModel.getIns().vo.info){this.sub=i.GuardIslandsModel.getIns().vo.info.endtime-game.Context.getServerTime()}else{this.sub=-1}};e.prototype.setSubTime=function(){this.updateLayout();this.calSub();this.updateTime()};e.prototype.updateTime=function(){if(this.sub<0){app.ViewManager.toggleView(i.ShouhuHuluDaoCutDownView,app.AppContainer.uiLayer,-1)}else{this.calSub();this.daojishiclip.value=util.TimeUtil.formatTime(this.sub,this.sub>=3600);Laya.timer.once(1e3,this,this.updateTime)}};e.prototype.updateLayout=function(){var t=0;var e=csv.MapProxy.getIns().getMapType(game.Context.mainRole.mapId.toString());if(e==csv.MapProxy.MAP_TYPE.HULU_DAO_BOSS){t=107}this.y=Laya.stage.height-chat.ChatMiniView.HEIGHT-this.height-t};e.prototype.onUnDisplay=function(){Laya.timer.clear(this,this.updateTime)};e.SINGLE_KEY="guardisland.ShouhuHuluDaoCutDownView";return e}(ui.bosszhandou.bosshuodongdaojishiUI);i.ShouhuHuluDaoCutDownView=t})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guardisland;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listgezi.itemRender=grids.GridView;this.listgezi.renderHandler=grids.GridView.CommonItemRender;game.HelperViewHandler.registerStr([this.buttishi,this.labelshuoming],"shoufuisland_txt_40","shoufuisland_txt_39");this.btnAction.clickHandler=new Laya.Handler(this,this.onbtnActionHandler)};e.prototype.onbtnActionHandler=function(){if(i.GuardIslandsModel.getIns().isEnable()){app.ProtocolRequest.JoinGuardIslandReq()}else{manager.FlowManager.instance.flowByStyle1(app.getLang("shoufuisland_txt_35"))}};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.labelmingxi.text=app.getLang("shoufuisland_txt_07");this.labelmiaoshu1.text=app.getLang("shoufuisland_txt_08");var t=i.GuardIslandsModel.getIns().vo;if(i.GuardIslandsModel.getIns().isEnable()){this.labelnandu.text=t.diff.toString();this.listgezi.array=game.ItemUtil.parserList(t.activityFuncCfg.awardshow)}else{this.labelnandu.text="";this.listgezi.array=[]}};return e}(ui.shouhuhuludao.shouhuhuludaobgUI);i.ShouhuhuludaoView=t})(guardisland||(guardisland={}));var guardisland;(function(t){var e=function(){function t(){}Object.defineProperty(t.prototype,"isTimeFinished",{get:function(){return this.realTime<game.Context.getServerTime()},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isCanCollect",{get:function(){if(Uint64.equal(this.roleID,game.Context.mainRole.insId)&&this.endTime!=0){return true}return false},enumerable:true,configurable:true});t.prototype.refresh=function(t){if(Uint64.equal(this.roleID,game.Context.mainRole.insId)&&t.endTime==0){}else{this.roleID=t.playerID;this.endTime=t.endTime;this.realTime=game.Context.getServerTime()+t.endTime}this.gatherID=t.gatherID};return t}();t.CollectInfoVO=e})(guardisland||(guardisland={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var scene;(function(t){var e=function(r){__extends(t,r);function t(t){var e=r.call(this)||this;e.mapobj=t;e.dir=t.dir;e.insId=t.id;var i=t.cfgid;e.huluCfg=csv.GuardIsandProxy.getIns().huluDaoCfgMap[i];e.posX=t.x;e.posY=t.y;if(e.monsterType==guardisland.EGuardIslandType.Collect){var n=csv.GuardIsandProxy.getIns().collectionMap[e.huluCfg.monstersetbase];e.setCfg(csv.NpcProxy.getIns().getCfg(n.npcid))}else{e.setCfg(csv.NpcProxy.getIns().getCfg(e.huluCfg.monstershow))}return e}Object.defineProperty(t.prototype,"isBoss",{get:function(){return this.monsterType==guardisland.EGuardIslandType.Boss},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"isCollect",{get:function(){return this.monsterType==guardisland.EGuardIslandType.Collect},enumerable:true,configurable:true});t.prototype.isDead=function(){if(this.huluCfg.revive>0){return this.mapobj&&this.mapobj.relievetime>0}return false};Object.defineProperty(t.prototype,"isCanCollect",{get:function(){return guardisland.GuardIslandsModel.getIns().isCollecting(this.insId)},enumerable:true,configurable:true});t.prototype.hasAnyPeoFight=function(){if(this.mapobj){return this.mapobj.fightflag>0}return false};Object.defineProperty(t.prototype,"count",{get:function(){return this.insId==undefined?0:1},enumerable:true,configurable:true});t.prototype.getBuffCfg=function(){var t=this.huluCfg;if(t.award_guild){var e=t.award_guild.split(";");if(e.length>0){var i=e[0].split("-")[0];var n=csv.GuardIsandProxy.getIns().huludaoBuffCfgMap[i];return n}}};Object.defineProperty(t.prototype,"monsterType",{get:function(){return parseInt(this.huluCfg.type)},enumerable:true,configurable:true});return t}(role.NpcVO);t.HuLuDaooRoleVo=e})(scene||(scene={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(e){var t=function(t){__extends(_,t);function _(){return t!==null&&t.apply(this,arguments)||this}_.prototype.init=function(){this._model=e.GuideModel.getIns();this._gsi=e.GuideScreenItem.getIns();this._gbi=e.GuideBubbleItem.getIns();this._gei=e.GuideEffectItem.getIns();this._areaClickHandler=new Laya.Handler(this,this.onStep);this._jumpClickHandler=new Laya.Handler(this,this.completeAllGuides);this._gsi.areaBack=this._areaClickHandler;this.taskControl=new e.GuideTaskController(this);this.taskControl.alive()};_.prototype.initCommands=function(){this._model.on(e.GuideModel.GUIDE_RESET,this,this.resetGuides);this._model.on(e.GuideModel.GUIDE_CLEAR,this,this.removeGuides);this._model.on(e.GuideModel.GUIDE_STATE_CHANGE,this,this.onGuideState);this._model.on(e.GuideModel.SECOND_DIALOG_CHANGE,this,this.onGuideState);this._model.on(e.GuideModel.GUIDE_REGISTER,this,this.onGuideItemRegister);game.Context.on(game.ContextEvent.FUNCTION_OPEN,this,this.onFuncOpen);game.Context.on(game.ContextEvent.FUNCTION_CLOSE,this,this.onFuncClose);game.Context.on(game.ContextEvent.SECOND_WINDOW_OPEN,this,this.onFuncClose);game.Context.on(game.ContextEvent.SECOND_WINDOW_CLOSE,this,this.onFuncClose);game.Context.on(game.ContextEvent.MAINDLG_OPEN,this,this.onMaindlgOpenOrClose);game.Context.on(game.ContextEvent.MAINDLG_CLOSE,this,this.onMaindlgOpenOrClose);game.Context.on(game.ContextEvent.FUNC_BTN_CHANGE,this,this.onFuncBtnChange);game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.onFuncClose);game.Context.on(game.ContextEvent.CHANGE_MAP,this,this.onMapChange);e.GuideModel.getIns().on(e.GuideModel.GUIDE_ITEM_REFRESH,this,this.refreshPerGuide);e.GuideModel.getIns().on(e.GuideModel.GUIDE_LOSE,this,this.aliveLoseControl);e.GuideModel.getIns().on(e.GuideModel.GUIDE_SPECIAL,this,this.aliveSpecialControl)};_.prototype.resetGuides=function(){if(this.control!=this.taskControl){this.control.unalive();this.taskControl.alive()}this.taskControl.resetGuides()};_.prototype.aliveLoseControl=function(t){if(!this.loseControl){this.loseControl=new e.GuideLoseController(this)}this.control&&this.control.unalive();this.loseControl.alive();this.loseControl.doLose(t)};_.prototype.aliveSpecialControl=function(t){if(!this.specialControl){this.specialControl=new e.GuideSpecialController(this)}this.control&&this.control.unalive();this.specialControl.alive();this.specialControl.doSpecial(t)};_.prototype.onGuideState=function(){Laya.timer.clear(this,this.dellPerGuide);Laya.timer.callLater(this,this.dellGuide)};_.prototype.onGuideItemRegister=function(t){Laya.timer.callLater(this,this.dellGuide)};_.prototype.onMaindlgOpenOrClose=function(t){Laya.timer.callLater(this,this.dellGuide)};_.prototype.onMapChange=function(){Laya.timer.callLater(this,this.dellGuide)};_.prototype.onFuncOpen=function(t){Laya.timer.callLater(this,this.dellGuide)};_.prototype.onFuncClose=function(){Laya.timer.callLater(this,this.dellGuide)};_.prototype.onFuncBtnChange=function(){Laya.timer.callLater(this,this.dellGuide)};_.prototype.removeGuides=function(){this._gsi.removeSelf();this._gbi.removeSelf();this._gei.removeSelf();this._model.boIgnoreRedRule=false;Laya.timer.clearAll(this);this.control.currGuideEle=null;this._model.hasGuide=false;this._model.event(e.GuideModel.GUIDE_HAS)};_.prototype.checkJump=function(t){if(t.jump){this.control.completeGuide=[];var e=t.jump;if(t.request!=""){if(!this._model.checkIsNeedJump(t.request)){e=t.group;this.control.completeGuide.push(t)}}this.control.currGuideArr=this.control.groupMap[e]}Laya.timer.callLater(this,this.dellGuide)};_.prototype.refreshPerGuide=function(){if(this.control.currGuideEle){this.dellPerGuide(this.control.currGuideEle,true)}};_.prototype.dellGuide=function(){if(!game.Context.mainRole){return}var t=game.Context.getMapType();if(t!=csv.MapProxy.MAP_TYPE.GUAJI&&t!=csv.MapProxy.MAP_TYPE.HOME){return}if(!this.control.currGuideArr){return}if(this._model.openCount){this.removeGuides();return}if(this.control.currGuideArr.length==this.control.completeGuide.length){if(this.control!=this.taskControl){this.control.unalive();this.taskControl.alive();this.taskControl.resetGuides()}return}var e=-1;for(var i=0,n=this.control.currGuideArr.length;i<n;i++){var r=false;var o=this.control.currGuideArr[i];if(o.statetype==csv.GuideProxy.STATE_TYPE.REQUEST){if(this.control.completeGuide.indexOf(o)==-1){this.checkJump(o);return}else{continue}}switch(parseInt(o.statetype)){case csv.GuideProxy.STATE_TYPE.MAINDLG:var a=app.str2Array(o.statevalue,";");for(var s=0,l=a.length;s<l;s++){if(game.WindowsResigter.commonWindowDisplayedInStage()){r=game.WindowsResigter.isContainFuncID(a[s]);if(r){break}}else{r=false}}break;case csv.GuideProxy.STATE_TYPE.FUNCTION:if(game.WindowsResigter.commonWindowDisplayedInStage()){r=game.WindowsResigter.isSelectFuncID(o.statevalue)}else{r=false}break;case csv.GuideProxy.STATE_TYPE.NO_FUNCTION:if(game.WindowsResigter.commonWindowDisplayedInStage()){r=false}else{var u=parseInt(o.statevalue);if(u){r=t==u}else{r=true}}break;case csv.GuideProxy.STATE_TYPE.SPECIAL_VIEW:if(app.ViewManager.DisplayedInStage(csv.GuideProxy.SPECIAL_TYPE[o.statevalue])){r=true}else{r=false}break;case csv.GuideProxy.STATE_TYPE.SECOND_FUNCTION:if(app.ViewManager.DisplayedInStage(common.SecondCommonWindow.SINGLE_KEY)){r=common.SecondCommonWindow.getIns().isContainFuncID(o.statevalue)}else{r=false}break}if(r){if(o.fitemid){for(var p=this.control.completeGuide.length-1;p>=0;p--){if(this.control.completeGuide[p].itemid==o.fitemid){e=i;var h=this.control.currGuideArr[e-1];if(h&&this.control.completeGuide.indexOf(h)==-1){this.control.completeGuide.push(h)}}}}else{e=i;var h=this.control.currGuideArr[e-1];if(h&&this.control.completeGuide.indexOf(h)==-1){this.control.completeGuide.push(h)}}}else{if(o==this.control.currGuideEle){this.removeGuides()}}}var c=this.control.currGuideArr[e];if(c){if(this.control.completeGuide.indexOf(c)==-1){if(c.playone=="1"){var f=game.SystemSetModel.getInstance().settingData.data;var g=f[game.SettingType.guideId];if(g>=c.id){this.removeGuides();this.control.completeGuide.push(c);Laya.timer.callLater(this,this.dellGuide);return}}if(c.extcomplete!=""&&this._model.checkIfComplete(c,false)){this.removeGuides();this.control.completeGuide.push(c);Laya.timer.callLater(this,this.dellGuide);return}if(c==this.control.currGuideEle){return}this.removeGuides();this.dellPerGuide(c)}}else{this.removeGuides()}};_.prototype.dellPerGuide=function(t,e,i){if(e===void 0){e=false}if(i===void 0){i=0}Laya.timer.clear(this,this.dellPerGuide);var n=csv.GuideProxy.getIns().getGuideItem(t.itemid);var r=false;var o;if(t.ext_para!=""){o=app.str2Array(t.ext_para,"-")}var a;switch(parseInt(n.type)){case 1:var s=parseInt(n.p1);this.addOtherListeners(t);var l=this._model.getItem(s);var u=this._model.getTweenTime(s);if(!e&&u){Laya.timer.once(u,this,this.dellPerGuide,[t,true],true);return}if(l&&l.displayedInStage){if(n.special){a=this._gei}else{a=this._gsi}r=true;var p=this._model.getFunc(s);if(p){var h=void 0;if(o&&o[0]=="1"){h=p.call(l,parseInt(o[1]),parseInt(o[2]));if(h=="complete"){this.directCompleteGuide(t);return}if(h&&h.displayedInStage){a.callBack=this._jumpClickHandler;a.setData(h,n,t);h.on(Laya.Event.CLICK,this,this.onStep,[h,t,n]);h.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[h,t]);this.showItem=l}else{if(i<=_.checkCount){Laya.timer.once(_.checkCd,this,this.dellPerGuide,[t,false,++i],true)}}}else if(o&&o[0]=="2"){h=p.call(l,parseInt(o[1]),parseInt(o[2]));if(h=="complete"){this.directCompleteGuide(t);return}if(h&&h.displayedInStage){a.callBack=this._jumpClickHandler;a.setData(h,n,t);h.on(Laya.Event.CLICK,this,this.onStep,[h,t,n]);h.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[h,t]);this.showItem=l}else{if(i<=_.checkCount){Laya.timer.once(_.checkCd,this,this.dellPerGuide,[t,false,++i],true)}}}else if(o&&o[0]=="4"){h=p.call(l,o[1]);if(h=="complete"){this.directCompleteGuide(t);return}if(h&&h.displayedInStage){a.callBack=this._jumpClickHandler;a.setData(h,n,t);h.on(Laya.Event.CLICK,this,this.onStep,[h,t,n]);h.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[h,t]);this.showItem=l}else{if(i<=_.checkCount){Laya.timer.once(_.checkCd,this,this.dellPerGuide,[t,false,++i],true)}}}else{h=p.call(l);if(h=="complete"){this.directCompleteGuide(t);return}if(h&&h.displayedInStage){a.callBack=this._jumpClickHandler;a.setData(h,n,t);h.on(Laya.Event.CLICK,this,this.onStep,[h,t,n]);h.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[h,t]);this.showItem=l}else{if(i<=_.checkCount){Laya.timer.once(_.checkCd,this,this.dellPerGuide,[t,false,++i],true)}}}}else if(n.area!=""){a.callBack=this._jumpClickHandler;a.setData(l,n,t);l.on(Laya.Event.CLICK,this,this.onStep,[l,t,n]);l.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[l,t])}else{a.callBack=this._jumpClickHandler;a.setData(l,n,t);l.on(Laya.Event.CLICK,this,this.onStep,[l,t,n]);l.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[l,t]);this.showItem=l}}this.showItem&&this.showItem.on(app.NodeRewriter.VISIBLE_CHAGNE,this,this.dellGuide);break;case 2:var c=parseInt(n.p1);var f=main.MainUIIcon.getMainUIIcon(c);if(f&&f.displayedInStage){if(!e){Laya.timer.once(300,this,this.dellPerGuide,[t,true],true);return}if(n.special){a=this._gei}else{a=this._gsi}r=true;this._model.boIgnoreRedRule=true;a.callBack=this._jumpClickHandler;a.setData(f,n,t,.7);f.on(Laya.Event.CLICK,this,this.onStep,[f,t,n])}else{var g=csv.MainIconProxy.getIns().getCfg(c);if(g.arrang==csv.MainIconProxy.rightGroup&&main.RightIconList.getIns().control.state==1){main.RightIconList.getIns().control.doClick();Laya.timer.once(100,this,this.dellPerGuide,[t]);return}else if(g.arrang==csv.MainIconProxy.leftGroup&&main.LeftIconList.getIns().control.state==1){main.LeftIconList.getIns().control.doClick();Laya.timer.once(100,this,this.dellPerGuide,[t]);return}}break;case 3:var d=game.WindowsResigter.guide(n);if(d){if(n.special){a=this._gei}else{a=this._gsi}r=true;a.callBack=this._jumpClickHandler;a.setData(d,n,t);d.on(Laya.Event.CLICK,this,this.onStep,[d,t,n])}break;case 4:if(game.WindowsResigter.commonWindowDisplayedInStage()){r=true;app.AppContainer.talkLayer.addChild(this._gbi);this._gbi.callData=[this._gbi,t];this._gbi.callBack=this._areaClickHandler;this._gbi.setData(n,t)}break;case 5:var y=common.SecondCommonWindow.getIns().getBtnByFuncId(n.p1);if(y){if(n.special){a=this._gei}else{a=this._gsi}r=true;a.callBack=this._jumpClickHandler;a.setData(y,n,t);y.on(Laya.Event.CLICK,this,this.onStep,[y,t,n])}break;case 6:var m=csv.NpcProxy.getIns().getNpcVO(n.p1);var v=scene.SceneMediator.getInstance().getViewById(m.insId);if(v){if(n.special){a=this._gei}else{a=this._gsi}a.callBack=this._jumpClickHandler;a.setData(v,n,t);v.on(Laya.Event.CLICK,this,this.onStep,[v,t,n]);v.on(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay,[v,t]);this.showItem=v}break;case 7:var b=tip.TipMeiator.getIns().getList.getGuideItem(t.ext_para);if(b){if(n.special){a=this._gei}else{a=this._gsi}r=true;a.callBack=this._jumpClickHandler;a.setData(b,n,t);b.on(Laya.Event.CLICK,this,this.onStep,[b,t,n])}else{if(i<=_.checkCount){Laya.timer.once(_.checkCd,this,this.dellPerGuide,[t,false,++i],true)}}break}if(r){this.control.currGuideEle=t;if(app.ViewManager.DisplayedInStage(main.TaskMainEnterView.SINGLE_KEY)){main.TaskMainEnterView.getIns().removeGuide()}}};_.prototype.completeAllGuides=function(){this.control.completeGuide=this.control.currGuideArr;this.removeOtherListeners(this.control.currGuideEle);this.removeGuides();this.control.groupMap=null;for(var t=0,e=this.control.currGuideArr.length;t<e;t++){var i=this.control.currGuideArr[t];if(i.playone=="1"){game.SystemSetModel.getInstance().setValueByType(i.id,game.SettingType.guideId)}}};_.prototype.onSubItemUnDisplay=function(t,e){t.off(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay);if(this.control.currGuideEle==e){this.removeGuides()}};_.prototype.onStep=function(t,e,i){var n=this._model.getClickedFunc(parseInt(i.p1));if(n){n.call(t,e)}if(e.extcomplete!=""){if(this._model.checkIfComplete(e)){this.removeOtherListeners(e);this.completeGuide(t,e)}}else{this.completeGuide(t,e)}if(e.playone=="1"){game.SystemSetModel.getInstance().setValueByType(e.id,game.SettingType.guideId)}};_.prototype.completeGuide=function(t,e){this.control.perGuideComplete(e);if(this.showItem){this.showItem.off(app.NodeRewriter.VISIBLE_CHAGNE,this,this.dellGuide)}this.control.completeGuide.push(e);t.off(Laya.Event.CLICK,this,this.onStep);t.off(Laya.Event.UNDISPLAY,this,this.onSubItemUnDisplay);this.removeGuides();this.checkJump(e)};_.prototype.directCompleteGuide=function(t){this.control.perGuideComplete(t);this.control.completeGuide.push(t);this.checkJump(t)};_.prototype.addOtherListeners=function(t){var e=app.str2Array(t.extcomplete,"-");var i=parseInt(e[0]);if(i==1){game.RoleModel.getIns().on(game.RoleModel.EVENTS.LEVEL_CHANGE,this,this.dellGuide)}else if(i==2){}else if(i==3){}else if(i==4){}else if(i==5){guaji.GuajiModel.getIns().on(guaji.GuajiModel.GUAJIPASS_DATA_UPDATE,this,this.dellGuide)}else if(i==6){equip.EquipModel.getIns().on(equip.EquipEvent.QIANG_HUA_SUCCESS,this,this.dellGuide)}else if(i==12){activitytaren.ActivityTaRenModel.getIns().on(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.GET_MAIN_PANEL_INFO,this,this.dellGuide)}else if(i==13){guaji.GuajiModel.getIns().on(guaji.GuajiModel.GUAJIPASS_DATA_UPDATE,this,this.dellGuide)}};_.prototype.removeOtherListeners=function(t){if(!t){return}var e=app.str2Array(t.extcomplete,"-");var i=parseInt(e[0]);if(i==1){game.RoleModel.getIns().off(game.RoleModel.EVENTS.LEVEL_CHANGE,this,this.dellGuide)}else if(i==2){}else if(i==3){}else if(i==4){}else if(i==5){guaji.GuajiModel.getIns().off(guaji.GuajiModel.GUAJIPASS_DATA_UPDATE,this,this.dellGuide)}else if(i==6){equip.EquipModel.getIns().off(equip.EquipEvent.QIANG_HUA_SUCCESS,this,this.dellGuide)}else if(i==12){activitytaren.ActivityTaRenModel.getIns().off(activitytaren.ActivityTaRenModel.ACTIVIT_TAREN_EVENT.GET_MAIN_PANEL_INFO,this,this.dellGuide)}else if(i==13){guaji.GuajiModel.getIns().off(guaji.GuajiModel.GUAJIPASS_DATA_UPDATE,this,this.dellGuide)}};_.SINGLE_KEY="guide.GuideModule";_.checkCd=300;_.checkCount=20;return _}(app.ModuleBase);e.GuideModule=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(n){var t=function(i){__extends(t,i);function t(t){var e=i.call(this)||this;e.manager=t;e.model=n.GuideModel.getIns();return e}t.prototype.alive=function(){this.manager.control=this;this.addListeners()};t.prototype.unalive=function(){this.manager.control=null;this.removeListeners()};t.prototype.addListeners=function(){};t.prototype.removeListeners=function(){};t.prototype.dellGroup=function(t){this.groupMap={};var e=t[0];if(e.group){for(var i=0,n=t.length;i<n;i++){var r=t[i];if(!this.groupMap[r.group]){this.groupMap[r.group]=[]}this.groupMap[r.group].push(r)}this.currGuideArr=this.groupMap[e.group]}else{this.currGuideArr=t}Laya.timer.callLater(this.manager,this.manager.dellGuide)};t.prototype.perGuideComplete=function(t){};t.SINGLE_KEY="guide.GuideBaseController";return t}(Laya.EventDispatcher);n.GuideBaseController=t;var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boFirst=true;return t}t.prototype.addListeners=function(){game.TaskModel.getIns().on(game.TaskModel.EVENTS.TASK_MAIN_GUIDE,this,this.onTaskChange)};t.prototype.removeListeners=function(){game.TaskModel.getIns().off(game.TaskModel.EVENTS.TASK_MAIN_GUIDE,this,this.onTaskChange)};t.prototype.onTaskChange=function(){var t=csv.GuideProxy.getIns().getGuideTaskMap();for(var e in t){var i=app.str2Array(e,"-");var n=parseInt(i[0]);var r=game.TaskModel.getIns().getTaskData(n);if(r&&r.data&&r.data.questSate!=3){if(t[e]){for(var o=0,a=t[e].length;o<a;o++){var s=t[e][o];if(s.tiggertype==r.data.questSate){var l=t[e].concat();if(this.boFirst){this.boFirst=false;if(r.cfg.action){this.doGuide(l,r)}else{Laya.timer.once(1e3,this,this.doGuide,[l,r])}}else{this.doGuide(l,r)}}}}}}};t.prototype.doGuide=function(t,e){if(!this._taskData||this._taskData.cfg.task_id!=e.cfg.task_id||this._taskData.data.questSate!=e.data.questSate){this.manager.removeGuides();this.completeGuide=[];this._taskData=e;this.dellGroup(t)}};t.prototype.resetGuides=function(){this.completeGuide=[];this._taskData=null;this.currGuideArr=null;this.manager.removeGuides();this.onTaskChange()};t.prototype.perGuideComplete=function(t){login.CoverModel.getIns().report_task(t.id);if(t.done){var e=game.TaskModel.getIns().currMainTask;if(e.data.questSate==2){app.ProtocolRequest.TaskSubmit(e.data.questIndex)}else if(e.data.questSate==1){app.ProtocolRequest.GuideTaskReq(e.cfg.task_id)}}};return t}(t);n.GuideTaskController=e;var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.addListeners=function(){};e.prototype.removeListeners=function(){};e.prototype.doLose=function(t){this.manager.removeGuides();this.completeGuide=[];this.dellGroup(csv.GuideProxy.getIns().getGuideLoseMap(t))};e.checkLose=function(){var t=csv.GuideProxy.getIns().loseArr;for(var e=0,i=t.length;e<i;e++){var n=t[e];var r=app.str2Array(n.level,"-");if(game.Context.teamLv>=parseInt(r[0])&&game.Context.teamLv<=parseInt(r[1])){if(!this.isReach(n.type)){return n}}}return null};e.isReach=function(t){var e=app.str2Array(t,"-");var i=parseInt(e.shift());if(i==1){var n=parseInt(e[0]);if(game.Context.roleList.length<n){return false}var r=parseInt(e[1]);var o=game.GridsModel.EquipEnums[n-1];var a=game.GridsModel.getIns().getEquipByTypeAndPos(o,r);if(a){return true}}else if(i==2){var s=parseInt(e[0]);var l=equip.EquipModel.getIns().getWearStrenLv();if(l>=s){return true}if(!game.GridsModel.getIns().hasEnoughItems(e[1]+"-"+e[2])){return true}}else if(i==3){if(!game.ClosureManager.hasDot(csv.FunctionsProxy.ENUMS.ROLE_MAIN)){return true}}return false};return e}(t);n.GuideLoseController=i;var r=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.addListeners=function(){};e.prototype.removeListeners=function(){};e.prototype.doSpecial=function(t){this.manager.removeGuides();this.completeGuide=[];this.dellGroup(csv.GuideProxy.getIns().getGuideSpecialMap(t))};e.checkSpecial=function(t){var e=csv.GuideProxy.getIns().specialMap[t];if(this.isReach(e.condtion)){return e}return null};e.isReach=function(t){var e=app.str2Array(t,"-");var i=parseInt(e.shift());if(i==1){if(game.TaskModel.getIns().currMainTask&&game.TaskModel.getIns().currMainTask.data.questIndex==parseInt(e[0])&&game.TaskModel.getIns().currMainTask.data.questSate==1){return true}return false}};return e}(t);n.GuideSpecialController=r})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(m){var t=function(e){__extends(o,e);function o(){var t=e!==null&&e.apply(this,arguments)||this;t.boIgnoreRedRule=false;t._openCount=0;return t}o.getIns=function(){return app.Singleton.getInstance(o)};o.prototype.init=function(){this.itemMap={};this.funcMap={};this.tweenTimeMap={};this.clickedFuncMap={}};Object.defineProperty(o.prototype,"boOpen",{set:function(t){if(t){this._openCount--}else{this._openCount++}if(this._openCount<0){this._openCount=0}this.event(o.GUIDE_STATE_CHANGE)},enumerable:true,configurable:true});Object.defineProperty(o.prototype,"openCount",{get:function(){return this._openCount},enumerable:true,configurable:true});Object.defineProperty(o.prototype,"isSuperGuide",{get:function(){return this._isSuperGuide},set:function(t){this._isSuperGuide=t;this.event(o.SUPER_GUIDE_STATE_CHANGE)},enumerable:true,configurable:true});o.prototype.register=function(t,e,i,n,r){this.itemMap[t]=e;if(i){this.funcMap[t]=i}if(n){this.tweenTimeMap[t]=n}if(r){this.clickedFuncMap[t]=r}this.event(o.GUIDE_REGISTER,t)};o.prototype.getTweenTime=function(t){return this.tweenTimeMap[t]|0};o.prototype.getItem=function(t){return this.itemMap[t]};o.prototype.getFunc=function(t){return this.funcMap[t]};o.prototype.getClickedFunc=function(t){return this.clickedFuncMap[t]};o.prototype.getFuncOpen=function(t){var e=Laya.LocalStorage.getItem(game.AccountModel.accountId+"_guide_fid_"+t);if(e&&e=="1"){return true}return false};o.prototype.setFuncOpen=function(t){Laya.LocalStorage.setItem(game.AccountModel.accountId+"_guide_fid_"+t,"1")};o.prototype.checkIfComplete=function(t,e){if(e===void 0){e=true}var i=true;var n=app.str2Array(t.extcomplete,"-");var r=parseInt(n[0]);if(r==1){var o=game.Context.roleList[parseInt(n[1])-1];if(o&&o.level<parseInt(n[2])){i=false}}else if(r==2){var a=fabaonew.FaBaoNewModel.getIns().getMagicCfgById(parseInt(n[1]));if(a&&a.star<parseInt(n[2])){i=false}}else if(r==3){var s=game.TaskModel.getIns().getTaskData(parseInt(n[1]));if(s&&s.data.questSate!=parseInt(n[2])){i=false}}else if(r==4){var l=game.Context.getMapType();if(l!=parseInt(n[1])){i=false}}else if(r==5){var u=guaji.GuajiModel.getIns().passId;var p=csv.GuajiProxy.getIns().getCfgGuanqia(u);var h=csv.GuajiProxy.getIns().getCfgGuanqia(u+1);if(p&&h&&p.chapter!=h.chapter){if(guaji.GuajiModel.getIns().state==1){i=false}}}else if(r==6){var c=game.GridsModel.EquipEnums[parseInt(n[1])-1];var f=game.GridsModel.getIns().getEquipByTypeAndPos(c,parseInt(n[2]));if(f&&f.strenLv<parseInt(n[3])){i=false}}else if(r==8){var c=game.GridsModel.EquipEnums[parseInt(n[1])-1];var f=game.GridsModel.getIns().getEquipByTypeAndPos(c,parseInt(n[2]));if(f&&f.strenLv<parseInt(n[3])){i=false}}else if(r==9){var g=parseInt(n[1]);var d=game.SystemSetModel.getInstance().getFuncDataById(game.settingFuncType.bossCaveTreasure,g);if(!d||d.val!=1){i=false}}else if(r==10){}else if(r==11){}else if(r==12){var y=csv.ActivityTarenProxy.getIns().activityidMap[1];var m=levelpackage.LevelPackageModel.getIns().sortList(y);for(var v=0,b=m.list.length;v<b;v++){if(levelpackage.LevelPackageModel.getIns().getLingQuState(m.list[v])==levelpackage.LevelPackageModel.LINGQU_ENUM.CAN_LINGQU){i=false}}}else if(r==13){if(e){var u=guaji.GuajiModel.getIns().passId;var h=csv.GuajiProxy.getIns().getCfgGuanqia(u+1);if(h&&guaji.GuajiModel.getIns().state==1){i=false}}else{i=false}}return i};o.prototype.checkIsNeedJump=function(t){var e=app.str2Array(t,"-");var i=parseInt(e.shift());if(i==1){var n=parseInt(e.shift());var r=game.GridsModel.EquipEnums[n-1];var o=[];for(var a=0;a<e.length;a++){var s=parseInt(e[a]);var l=game.GridsModel.getIns().getEquipByTypeAndPos(r,s);if(l){continue}o.push(s)}if(!o.length){return true}var u=game.GridsModel.getIns().getBagEquips();for(var a=0,p=u.length;a<p;a++){var h=u[a];var c=o.indexOf(h.pos);if(c!=-1){o.splice(c,1);if(!o.length){return true}}}}else if(i==2){if(guild.GuildModel.getIns().isGuild){return true}}else if(i==3){var f=parseInt(e[0]);var u=game.GridsModel.getIns().getBagEquips();for(var a=0,p=u.length;a<p;a++){var h=u[a];if(h.equipCfg.equipgrade==f){return true}}}else if(i==4){var g=parseInt(e[0]);if(boss.BossModel.getIns().isChallenged(g)){return true}}else if(i==5){var d=yuanshencode.YuanshenModel.getIns().getDongfuNetItemData(parseInt(e[0]));if(d&&!Uint64.equal(d.combatid,Uint64.ZERO)){return true}}else if(i==6){var y=m.GuideModel.getIns().specialGuideParams[1];for(var a=0,p=y.length;a<p;a++){if(!game.GridsModel.getIns().hasEnoughItems(y[a])){return true}}}return false};o.SINGLE_KEY="guide.GuideModel";o.GUIDE_REGISTER="guide_register";o.GUIDE_TASK_END="guide_task_end";o.SECOND_DIALOG_CHANGE="second_dialog_change";o.GUIDE_STATE_CHANGE="guide_state_change";o.SUPER_GUIDE_STATE_CHANGE="super_guide_state_change";o.GUIDE_CLEAR="guide_clear";o.GUIDE_ITEM_REFRESH="guide_item_refresh";o.GUIDE_RESET="guide_reset";o.GUIDE_LOSE="guide_lose";o.GUIDE_SPECIAL="guide_special";o.GUIDE_HAS="guide_has";return o}(app.ModelBase);m.GuideModel=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("guide.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray();this.guideTaskMap={};this.guideLoseMap={};this.guideSpecialMap={};for(var e=0,i=this.cfgArr.length;e<i;e++){var n=this.cfgArr[e];if(n.taskid){var r=n.taskid+"-"+n.tiggertype;if(!this.guideTaskMap[r]){this.guideTaskMap[r]=[]}this.guideTaskMap[r].push(n)}else if(n.loseid){if(!this.guideLoseMap[n.loseid]){this.guideLoseMap[n.loseid]=[]}this.guideLoseMap[n.loseid].push(n)}else if(n.special){if(!this.guideSpecialMap[n.special]){this.guideSpecialMap[n.special]=[]}this.guideSpecialMap[n.special].push(n)}}this.initGuideItem();this.initLose();this.initSpecial()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getArr=function(){return this.cfgArr};e.prototype.getGuideTaskMap=function(){return this.guideTaskMap};e.prototype.getGuideLoseMap=function(t){return this.guideLoseMap[t]};e.prototype.getGuideSpecialMap=function(t){return this.guideSpecialMap[t]};e.prototype.initGuideItem=function(){var t=app.Config.getResById("guideitem.csv");this.guideItemMap=t.getMap("id")};e.prototype.getGuideItem=function(t){return this.guideItemMap[t]};e.prototype.initLose=function(){var t=app.Config.getResById("loseguide.csv");this.loseArr=t.getArray()};e.prototype.initSpecial=function(){var t=app.Config.getResById("guidespecial.csv");this.specialMap=t.getMap("id")};e.SINGLE_KEY="csv.GuideProxy";e.STATE_TYPE={REQUEST:0,MAINDLG:1,FUNCTION:2,NO_FUNCTION:3,SPECIAL_VIEW:4,SECOND_FUNCTION:5};e.SPECIAL_TYPE={2:garden.GardenView.SINGLE_KEY,3:mount.MountSkillView.SINGLE_KEY,4:yuanshencode.YuanshenMainView.SINGLE_KEY,5:yuanshencode.YuanshenXiuLianView.SINGLE_KEY,6:danfang.DanFangMainView.SINGLE_KEY,7:guaji.GuajiPassView.SINGLE_KEY,10:dianfenceshi.DianFenCeShiMainView.SINGLE_KEY,11:role.AlertGetTeamIconView.SINGLE_KEY,12:guaji.GuajiShouYiView.SINGLE_KEY,13:battle.BattleLoseFullView.SINGLE_KEY,14:mjhole.MjHoleMainView.SINGLE_KEY,15:tip.TipMeiator.SINGLE_KEY};e.ENUM_VIEW={TASK_MAIN_ENTER:1,COMMON_WINDOW_CLOSE:2,GUAJI_BATTLE:6,HOME:7,GAJI_ENTER:8,GUAJI_SELECT:9,SKILL_GRADE_UP:15,RIDE:16,ZXRW_BATTLE:17,JJC_MATCH:18,HULU_GOTO_WATER:19,HULU_PICK:20,HEAD_TITLE_UP:21,BOSS_YEWAI_ADD:22,MOUNT_ALIVE:24,SHOP_BLACK_REFRESH:25,REBIRTH_ACCEPT:26,SSSL_FIGHT:27,EQUIP_SMELT_ENTER:28,HECHENG_ITEM:29,MOUNTAIN_ENTER:30,ANISOUL_ALIVE:31,BOSS_YEWAI_ENTER:32,ROLE_CREATE:33,SHOP_BLACK_BUY:36,SHOP_RONGYU_BUY:37,COMMON_WINDOW2_CLOSE:38,SEVEN_SOUL_ALIVE:39,CREATE_ROLE_LIMIT:40,MOUNT_TAB_SELECT:41,EXP_ROLE_SELECT:42,MOUNT_SKILL_ENTER:48,MOUNT_SKILL_SELECT:49,SHOUHU_SELECT:50,MOUNT_UP:51,DAILY_TASK_ACT_GET:52,FUBEN_GOTO:53,XIULIAN_TUPO:54,SKIIL_SELECT:55,MJG_BATTLE:56,EXP_QUICK_UP:57,SKILL_DES_CHECK:58,BOSS_WORLD_ENTER:59,COMMON_WINDOW3_CLOSE:60,FARM_PLANT_SELECT:44,FARM_EARTH_SELECT:45,ROLE_LEVEL_UP:61,FABAO_CHOUKA:62,MOUTAIN_BATTLE:63,EQUIP_WEAR:64,EQUIP_WEAR_SELECT:65,EQUIP_PEYANG:66,EQUIP_STREN:67,DONGFU_SELECT:68,YUANSHEN_XIULIAN:69,YUANSHEN_ROLE_SELECT:70,DANFANG_ENTER:71,DANFANG_CHAKAN:72,DANFANG_SELECT:73,DANFANG_COMFIRM:74,DANFANG_LIANZHI:75,DANFANG_CLOSE:76,FARM_CLOSE:77,EQUIP_SELECT:78,EQUIP_PER_WEAR:79,ZHUA_XIAOYAO:81,COMMON_WINDOW5_CLOSE:82,QUICK_BATTLE_CLICK:83,ROLE_ADD_BTN:84,ROLE_ADD_CLICK:85,FABAO_SELECT:86,FABAO_NINGYUN:87,FABAO_NINGYUN_COMFIRM:88,XIANDAN:89,EAT_XIANDAN:90,BAG_EQUIP_SELECT:91,TIP_SMELT:92,EQUIP_SMELT:93,BAG_ITEM_SELECT:94,TIP_USE:95,FABAO_NINGYUN_CLOSE:96,MIJING_ENTER:97,MIJING_TANSUO:98,TIP_REPLACE:99,GUANQIA_ENTER:104,GUANQIA_CLOSE:106,SECOND_COMMON_WINDOW_CLOSE:107,SHANDONG_BATTLE:108,GUANQIA_NEXT:109,GUANQIA_HEAD:110,GUANQIA_BATTLE:111,JUESE_ROLE_SELECT:105,EQUIP_ROLE_SELECT:114,DONGFU_TANXIAN:116,MJHOLE_ENTER:117,MJHOLE_SELECT:118,MJHOLE_BATTLE:119,MB_ENTER:120,MB_SELECT:121,MB_AWARD:122,MIJING_CAIJI:123,MJ_ENTER:124,MJ_SELECT:125,MJ_SEND:126,YUANSHEN_TUPO:127,LIZHI_WATER:128,LIZHI_WATER_COMFIRM:129,LIZHI_GET:130,LIZHI_MANAGER:131,LIZHI_MANAGER_UP:132,LIZHI_MANAGER_BACK:133,ROLE_TUPO:134,YUANSHEN_CLOSE:135,ZHUANPAN_FIRST:136,ZHUANPAN_ONCE:137,ZHUANPAN_CLOSE:138,DIANFENCESHI_GO:139,DIANFENCESHI_GET:140,DIANFENCESHI_SUB_GLOSE:141,DIANFENCESHI_ENTER:142,DIANFENCESHI_CLOSE:143,TEAM_ICON_GO:144,TEAM_ICON_SELECT:145,TEAM_ICON_WEAR:146,HIGH_BLACK_SHOP_SELECT:147,SHOP_BUY:148,CHECK_WUXING_TU:149,CHECK_WUXIGN_MU:150,ZHUXIAN_LEFT_ROLE:151,QIANDAO:152,FABAO_ZHULIN:153,FABAO_ZHULIN_COMFIRM:154,FABAO_ZHULIN_CLOSE:155,GUAJI_BAOXIANG:157,GUAJI_BAOXIANG_GET:158,GUAJI_BAOXIANG_CLOSE:159,GUAJI_BAOXIANG_YAOSHUI:168,GUAJI_TAB:177,BANGHUI_DATING:160,TONGBI_DONATE:161,BANGHUI_DATING_CLOSE:162,BANGHUI_SHOP:163,BANGHUI_SHOP_SELECT:164,BANGHUI_SHOP_ITEM_SELECT:165,BANGHUI_SHOP_ITEM_BUY:166,BANGHUI_SHOP_CLOSE:167,MOUNT_RIDE:170,ROLE_WUXING_SKILL_CHECK:171,PET_EGG_POS_SELECT:172,PET_EGG_SELECT:173,PET_SHANGZHEN_POS_SELECT:174,PET_SHANGZHEN_PET_SELECT:175,BOSS_QIFU:176,QUICK_GUAJI_CLOSE:178,YUANSHEN_FUYAO:179,ROLE_MAIN_HEAD:180,SHANDONG_SELECT:181,BASE_BLACK_SHOP_SELECT:182,FABAO_WUXING_CHECK_SELECT:183,COMMON_SHANGCHENG_CLOSE:184,LOSE_STREN_FUNC:185,SHANDONG_SWEEP:186,DENGJI_JIANGLI:187,MJHOLE_ZIDONG:188,EQUIP_LV_ROLE_SELECT:189,EQUIP_LV_SELECT:190,MOUTAIN_BATTLE_OR_SWEEP:191,COMMON_WINDOW_CLOSE_WITH_FUNC:192,EQUIP_STREN_ROLE_SELECT:193,EQUIP_STREN_SELECT:194,EQUIP_BAOSHI_SELECT:195,BAOSHI_SELECT:196,BAOSHI_WEAR:197};e.SPECIAL_GUIDE_ID={MOUNTAIN:1};return e}(app.ModelBase);t.GuideProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(a){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.currStep=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=a.GuideModel.getIns();this.lbldes.width=200;this.lbldes.y=a.GuideItem.OFFY;this.qipaoimg.width=220;this.tiaoguoimg.visible=false;this.width=Laya.stage.width;this.height=Laya.stage.height;this.imgSelect.visible=false};t.prototype.onStep=function(){this.currStep++;if(this.currStep>this.totalStep){this.callBack.runWith(this.callData)}else{this.setBubble()}};t.prototype.onDisplay=function(){this.currStep=0;this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t,e){if(this.currStep!=0){return}this._model.hasGuide=true;this.setMap={};this.currStep=1;this.on(Laya.Event.CLICK,this,this.onStep);var i=app.str2Array(e.guidedes,";");this.totalStep=i.length;var n=app.str2Array(t.p1,";");var r=app.str2Array(t.dir,";");for(var o=0,a=i.length;o<a;o++){this.setMap[o+1]={des:i[o],x:parseInt(n[o*2]),y:parseInt(n[o*2+1]),dir:parseInt(r[o])}}this._guideEle=e;this.setBubble()};t.prototype.setBubble=function(){var t=this.setMap[this.currStep];this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.visible=true;var e=t.x+(Laya.stage.width-750)/2;var i=t.y+(Laya.stage.height-1334)/2;var n=(this._dir-1)*90;this.imgArrow.rotation=n;this.imgArrow.x=e;this.imgArrow.y=i;this.lbldes.text=t.des;var r=this.lbldes.textField.textWidth;var o=this.lbldes.textField.textHeight;if(r<120){r=120}this.qipaoimg.width=r+a.GuideItem.OFFX*2;this.qipaoimg.height=o+a.GuideItem.OFFY*2;this.lbldes.x=(this.qipaoimg.width-this.lbldes.textField.textWidth)/2;this.qipaoimg.visible=true;if(this._dir==1){this.qipaoimg.pivotX=this.qipaoimg.width;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x-this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==2){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y-this.imgArrow.width}else if(this._dir==3){this.qipaoimg.pivotX=0;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x+this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==4){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=0;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y+this.imgArrow.width}};t.SINGLE_KEY="guide.GuideBubbleItem";return t}(ui.main.guideitemUI);a.GuideBubbleItem=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(p){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boPlay=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.TALK_LAYER_NUME.GUIDE;this.width=Laya.stage.width;this.height=Laya.stage.height;this._mask=new Laya.Image;this._mask.width=Laya.stage.width;this._mask.height=Laya.stage.height;this._mask.sizeGrid="9,9,11,9";this._mask.skin="public/bg_jiugong_zhezhao2.png";this.addChildAt(this._mask,0);this._hole=new Laya.Sprite;this._mask.mask=this._hole;this.lbldes.width=200;this.lbldes.y=p.GuideItem.OFFY;this.qipaoimg.width=220;this.width=Laya.stage.width;this.height=Laya.stage.height;this.tiaoguoimg.visible=true;this.imgSelect.visible=false;this.on(Laya.Event.CLICK,this,this.onStep);this.tiaoguoimg.on(Laya.Event.CLICK,this,this.onJumpClick);this.tiaoguoimg.y=ScreenAdapter.OFFSET_Y};t.prototype.onJumpClick=function(t){if(this.jumpHandler){this.jumpHandler.run();this.jumpHandler=null}this.removeSelf()};Object.defineProperty(t.prototype,"imgRect",{get:function(){if(!this._imgRect){this._imgRect=new Laya.Image;this._imgRect.mouseEnabled=false;this._imgRect.skin="public/bg_daoju_xuanzhong.png";this._imgRect.sizeGrid="20,20,20,20"}return this._imgRect},enumerable:true,configurable:true});t.prototype.onStep=function(){this.removeSelf();if(this.handler){this.handler.run()}};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.stopShine()};t.prototype.refreshAll=function(){};t.prototype.add=function(t,e,i,n,r,o,a){this.handler=a;this.imgSelect.x=e;this.imgSelect.y=i;this.imgSelect.width=n;this.imgSelect.height=r;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.visible=true;var s=(o-1)*90;this._dir=o;this.imgArrow.rotation=s;if(this._dir==1){this.imgArrow.x=e;this.imgArrow.y=i+r/2}else if(this._dir==2){this.imgArrow.x=e+n/2;this.imgArrow.y=i}else if(this._dir==3){this.imgArrow.x=e+n;this.imgArrow.y=i+r/2}else if(this._dir==4){this.imgArrow.x=e+n/2;this.imgArrow.y=i+r}this.lbldes.text=t;this.lbldes.cacheAsBitmap=true;var l=this.lbldes.textField.textWidth;var u=this.lbldes.textField.textHeight;if(l<120){l=120}this.qipaoimg.width=l+p.GuideItem.OFFX*2;this.qipaoimg.height=u+p.GuideItem.OFFY*2;this.lbldes.x=(this.qipaoimg.width-this.lbldes.textField.textWidth)/2;this.qipaoimg.visible=true;if(o==1){this.qipaoimg.pivotX=this.qipaoimg.width;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x-this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(o==2){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y-this.imgArrow.width}else if(o==3){this.qipaoimg.pivotX=0;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x+this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(o==4){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=0;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y+this.imgArrow.width}app.AppContainer.zhezhaoLayer.addChild(this);this._mask.alpha=.1;this.drawHole();this.playShine()};t.prototype.drawHole=function(){var t=this.imgSelect.x;var e=this.imgSelect.y;var i=this.imgSelect.width;var n=this.imgSelect.height;this._hole.graphics.clear();this._hole.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,0);var r=new Laya.HitArea;r.hit=this._hole.graphics;this.hitArea=r;this.imgRect.x=t-8;this.imgRect.y=e-8;this.imgRect.width=i+16;this.imgRect.height=n+16;this.addChild(this.imgRect)};t.prototype.playShine=function(){if(this.boPlay){return}this.boPlay=true;this._ax=this.imgArrow.x;this._ay=this.imgArrow.y;this._speed=1;Laya.timer.loop(50,this,this.loopShine)};t.prototype.stopShine=function(){this.boPlay=false;Laya.timer.clear(this,this.loopShine)};t.prototype.loopShine=function(){switch(this._dir){case 1:if(this.imgArrow.x<=this._ax-10){this._speed=2}else if(this.imgArrow.x>=this._ax){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 2:if(this.imgArrow.y<=this._ay-10){this._speed=2}else if(this.imgArrow.y>=this._ay){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break;case 3:if(this.imgArrow.x<=this._ax){this._speed=2}else if(this.imgArrow.x>=this._ax+10){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 4:if(this.imgArrow.y<=this._ay){this._speed=2}else if(this.imgArrow.y>=this._ay+10){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break}};t.SINGLE_KEY="guide.GuideBubbleItem2";return t}(ui.main.guideitemUI);p.GuideBubbleItem2=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GuideModel.getIns();this.zOrder=app.AppContainer.TALK_LAYER_NUME.GUIDE;this.width=Laya.stage.width;this.height=Laya.stage.height;this.aniEff=new game.AniView;this.aniEff.x=this.width/2;this.aniEff.y=this.height/2;this.aniEff.load("skill_xuanzhong01",game.AniView.FILE_NAME.UI);this.addChild(this.aniEff)};e.prototype.onDisplay=function(){this._model.isSuperGuide=true;this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this._model.isSuperGuide=false;Laya.timer.clear(this,this.checkIfShow);Laya.timer.clear(this,this.reDraw);this.item=null;this.guideItemEle=null;this.guideEle=null;this.px=this.py=null};e.prototype.refreshAll=function(){Laya.timer.loop(100,this,this.reDraw)};e.prototype.reDraw=function(){if(this.item){this.draw(this.item,this.guideItemEle,this.guideEle)}};e.prototype.checkIfShow=function(){var t=this.item.parent;while(t!=Laya.stage){if(!t.visible){this.visible=false;return}t=t.parent}this.visible=true};e.prototype.setData=function(t,e,i){if(!t.parent){return}this._model.hasGuide=true;this.item=t;this.guideItemEle=e;this.guideEle=i;this.checkIfShow();Laya.timer.loop(500,this,this.checkIfShow);app.AppContainer.talkLayer.addChild(this);this.draw(t,e,i)};e.prototype.draw=function(t,e,i){var n=t.parent.localToGlobal(new Laya.Point(t.x,t.y));var r;var o;if(e.area!=""){var a=app.str2Array(e.area,";");r=n.x+parseInt(a[0]);o=n.y+parseInt(a[1])}else{r=n.x+t.width/2-t.pivotX;o=n.y+t.height/2-t.pivotY}if(this.px==r&&this.py==o){return}this.px=r;this.py=o;this.aniEff.play();this.aniEff.x=r;this.aniEff.y=o};e.SINGLE_KEY="guide.GuideEffectItem";return e}(Laya.Component);i.GuideEffectItem=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(t){var e=function(e){__extends(y,e);function y(){var t=e!==null&&e.apply(this,arguments)||this;t.boPlay=false;return t}y.getIns=function(){return app.Singleton.getInstance(y)};y.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=t.GuideModel.getIns();this.lbldes.width=200;this.lbldes.y=y.OFFY;this.qipaoimg.width=220;this.tiaoguoimg.visible=false};y.prototype.onDisplay=function(){this.callLater(this.refreshAll)};y.prototype.onUnDisplay=function(){this.stopShine()};y.prototype.refreshAll=function(){};y.prototype.setData=function(t,e,i,n,r){this.visible=t.visible;n.addChild(this);this._guideEle=i;var o;var a;var s;var l;if(e.area!=""){this.imgSelect.visible=true;var u=app.str2Array(e.area,"-");o=r.x+parseInt(u[0]);a=r.y+parseInt(u[1]);s=parseInt(u[2]);l=parseInt(u[3]);this.imgSelect.x=o;this.imgSelect.y=a;this.imgSelect.width=s;this.imgSelect.height=l}else{this.imgSelect.visible=false;o=r.x-t.pivotX;a=r.y-t.pivotY;s=t.width;l=t.height}this._dir=e.dir?parseInt(e.dir):1;var p=app.str2Array(e.offxy,";");var h=p[0]?parseInt(p[0]):0;var c=p[1]?parseInt(p[1]):0;var f=(this._dir-1)*90;this.imgArrow.rotation=f;if(this._dir==1){this.imgArrow.x=o+h;this.imgArrow.y=a+l/2+c}else if(this._dir==2){this.imgArrow.x=o+s/2+h;this.imgArrow.y=a+c}else if(this._dir==3){this.imgArrow.x=o+s+h;this.imgArrow.y=a+l/2+c}else if(this._dir==4){this.imgArrow.x=o+s/2+h;this.imgArrow.y=a+l+c}if(i.guidedes==""){this.qipaoimg.visible=false}else{this.lbldes.x=y.OFFX;this.lbldes.text=i.guidedes;this.lbldes.cacheAsBitmap=true;var g=this.lbldes.textField.textWidth;var d=this.lbldes.textField.textHeight;if(g<120){g=120}this.qipaoimg.width=g+y.OFFX*2;this.qipaoimg.height=d+y.OFFY*2;this.lbldes.x=(this.qipaoimg.width-this.lbldes.textField.textWidth)/2;this.qipaoimg.visible=true;if(this._dir==1){this.qipaoimg.pivotX=this.qipaoimg.width;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x-this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==2){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y-this.imgArrow.width}else if(this._dir==3){this.qipaoimg.pivotX=0;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x+this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==4){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=0;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y+this.imgArrow.width}}this.playShine()};y.prototype.playShine=function(){if(this.boPlay){return}this._ax=this.imgArrow.x;this._ay=this.imgArrow.y;this._speed=1;Laya.timer.loop(50,this,this.loopShine)};y.prototype.stopShine=function(){this.boPlay=false;Laya.timer.clear(this,this.loopShine)};y.prototype.loopShine=function(){switch(this._dir){case 1:if(this.imgArrow.x<=this._ax-10){this._speed=2}else if(this.imgArrow.x>=this._ax){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 2:if(this.imgArrow.y<=this._ay-10){this._speed=2}else if(this.imgArrow.y>=this._ay){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break;case 3:if(this.imgArrow.x<=this._ax){this._speed=2}else if(this.imgArrow.x>=this._ax+10){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 4:if(this.imgArrow.y<=this._ay){this._speed=2}else if(this.imgArrow.y>=this._ay+10){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break}};y.SINGLE_KEY="guide.GuideItem";y.OFFX=20;y.OFFY=20;return y}(ui.main.guideitemUI);t.GuideItem=e})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(c){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boPlay=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.zOrder=app.AppContainer.TALK_LAYER_NUME.GUIDE;this.width=Laya.stage.width;this.height=Laya.stage.height;this._mask=new Laya.Image;this._mask.width=Laya.stage.width;this._mask.height=Laya.stage.height;this._mask.sizeGrid="9,9,11,9";this._mask.skin="public/bg_jiugong_zhezhao2.png";this.addChildAt(this._mask,0);this._hole=new Laya.Sprite;this._mask.mask=this._hole;this.on(Laya.Event.CLICK,this,this.onClick);this.imgSelect.visible=false;this.qipaoimg.visible=false;this.lbldes.y=c.GuideItem.OFFY;this.tiaoguoimg.visible=true;this.tiaoguoimg.on(Laya.Event.CLICK,this,this.onJumpClick);this.tiaoguoimg.y=ScreenAdapter.OFFSET_Y};t.prototype.onJumpClick=function(t){if(this.jumpHandler){this.jumpHandler.run();this.jumpHandler=null}this.removeSelf()};Object.defineProperty(t.prototype,"imgRect",{get:function(){if(!this._imgRect){this._imgRect=new Laya.Image;this._imgRect.mouseEnabled=false;this._imgRect.skin="public/bg_daoju_xuanzhong.png";this._imgRect.sizeGrid="20,20,20,20"}return this._imgRect},enumerable:true,configurable:true});t.prototype.onClick=function(t){t.stopPropagation()};t.prototype.onDisplay=function(){this.tiaoguoimg.y=ScreenAdapter.OFFSET_Y;this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.stopShine()};t.prototype.refreshAll=function(){};t.prototype.add=function(t,e,i,n,r,o,a,s){if(a===void 0){a=false}if(s===void 0){s=""}if(t==this._tempItem){return}this._tempItem=t;i-=t.pivotX;n-=t.pivotY;this.imgSelect.x=i;this.imgSelect.y=n;this.imgSelect.width=r;this.imgSelect.height=o;this.qipaoimg.visible=false;this.imgArrow.visible=true;var l=(e-1)*90;this._dir=e;this.imgArrow.rotation=l;if(e==1){this.imgArrow.x=i;this.imgArrow.y=n+o/2}else if(e==2){this.imgArrow.x=i+r/2;this.imgArrow.y=n}else if(e==3){this.imgArrow.x=i+r;this.imgArrow.y=n+o/2}else if(e==4){this.imgArrow.x=i+r/2;this.imgArrow.y=n+o}if(s!=""){this.lbldes.text=s;this.lbldes.cacheAsBitmap=true;var u=this.lbldes.textField.textWidth;var p=this.lbldes.textField.textHeight;if(u<120){u=120}this.qipaoimg.width=u+c.GuideItem.OFFX*2;this.qipaoimg.height=p+c.GuideItem.OFFY*2;this.lbldes.x=(this.qipaoimg.width-this.lbldes.textField.textWidth)/2;this.qipaoimg.visible=true;if(this._dir==1){this.qipaoimg.pivotX=this.qipaoimg.width;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x-this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==2){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y-this.imgArrow.width}else if(this._dir==3){this.qipaoimg.pivotX=0;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x+this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==4){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=0;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y+this.imgArrow.width}}app.AppContainer.talkLayer.addChild(this);if(a){this._mask.alpha=.3;this.drawHole()}else{var h=new Laya.HitArea;this._hole.graphics.clear();this._hole.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,0);h.unHit=this._hole.graphics;this.hitArea=h;this._mask.alpha=0}this.playShine()};t.prototype.hide=function(){this.removeSelf();this._tempItem=null};t.prototype.drawHole=function(){var t=this.imgSelect.x;var e=this.imgSelect.y;var i=this.imgSelect.width;var n=this.imgSelect.height;this._hole.graphics.clear();this._hole.graphics.drawRect(0,0,Laya.stage.width,e,0);this._hole.graphics.drawRect(0,e,t,n,0);this._hole.graphics.drawRect(t+i,e,Laya.stage.width-t-i,n,0);this._hole.graphics.drawRect(0,e+n,Laya.stage.width,Laya.stage.height-e-n,0);var r=new Laya.HitArea;r.hit=this._hole.graphics;this.hitArea=r;this.imgRect.x=t-8;this.imgRect.y=e-8;this.imgRect.width=i+16;this.imgRect.height=n+16;this.addChild(this.imgRect)};t.prototype.playShine=function(){if(this.boPlay){return}this.boPlay=true;this._ax=this.imgArrow.x;this._ay=this.imgArrow.y;this._speed=1;Laya.timer.loop(50,this,this.loopShine)};t.prototype.stopShine=function(){this.boPlay=false;Laya.timer.clear(this,this.loopShine)};t.prototype.loopShine=function(){switch(this._dir){case 1:if(this.imgArrow.x<=this._ax-10){this._speed=1}else if(this.imgArrow.x>=this._ax){this._speed=-1}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 2:if(this.imgArrow.y<=this._ay-10){this._speed=1}else if(this.imgArrow.y>=this._ay){this._speed=-1}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break;case 3:if(this.imgArrow.x<=this._ax){this._speed=1}else if(this.imgArrow.x>=this._ax+10){this._speed=-1}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 4:if(this.imgArrow.y<=this._ay){this._speed=1}else if(this.imgArrow.y>=this._ay+10){this._speed=-1}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break}};t.SINGLE_KEY="guide.GuideItem2";return t}(ui.main.guideitemUI);c.GuideItem2=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(y){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boPlay=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=y.GuideModel.getIns();this.zOrder=app.AppContainer.TALK_LAYER_NUME.GUIDE;this.width=Laya.stage.width;this.height=Laya.stage.height;this._mask=new Laya.Image;this._mask.width=Laya.stage.width;this._mask.height=Laya.stage.height;this._mask.sizeGrid="9,9,11,9";this._mask.skin="public/bg_jiugong_zhezhao2.png";this.addChildAt(this._mask,0);this._hole=new Laya.Sprite;this._mask.mask=this._hole;this.imgSelect.visible=false;this.qipaoimg.visible=false;this.lbldes.y=y.GuideItem.OFFY;this.tiaoguoimg.on(Laya.Event.CLICK,this,this.onJumpClick);this.tiaoguoimg.y=ScreenAdapter.OFFSET_Y};Object.defineProperty(t.prototype,"imgRect",{get:function(){if(!this._imgRect){this._imgRect=new Laya.Image;this._imgRect.mouseEnabled=false;this._imgRect.skin="public/bg_daoju_xuanzhong.png";this._imgRect.sizeGrid="20,20,20,20"}return this._imgRect},enumerable:true,configurable:true});t.prototype.onJumpClick=function(t){if(this.callBack){this.callBack.run()}else{this.removeSelf()}};t.prototype.onStep=function(){this.areaBack&&this.areaBack.runWith([this.item,this.guideEle,this.guideItemEle])};t.prototype.onDisplay=function(){this.tiaoguoimg.y=ScreenAdapter.OFFSET_Y;this._model.isSuperGuide=true;this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.isSuperGuide=false;this.stopShine();Laya.timer.clear(this,this.checkIfShow);Laya.timer.clear(this,this.reDraw);this.item=null;this.guideItemEle=null;this.guideEle=null;this.px=this.py=null;this.off(Laya.Event.CLICK,this,this.onStep)};t.prototype.refreshAll=function(){};t.prototype.reDraw=function(){if(this.item){this.draw(this.item,this.guideItemEle,this.guideEle,this.maskAlpha)}};t.prototype.checkIfShow=function(){var t=this.item.parent;while(t!=Laya.stage){if(!t){this.visible=false;return}if(!t.visible){this.visible=false;return}t=t.parent}this.visible=true};t.prototype.setData=function(t,e,i,n){if(n===void 0){n=.3}if(!t.parent){return}this._model.hasGuide=true;this.item=t;this.guideItemEle=e;this.guideEle=i;this.maskAlpha=n;this.checkIfShow();Laya.timer.loop(500,this,this.checkIfShow);this.tiaoguoimg.visible=true;if(e.id==1539){app.AppContainer.zhezhaoLayer.addChild(this)}else{app.AppContainer.talkLayer.addChild(this)}this.draw(t,e,i,n);if(this.guideItemEle.jump){this.on(Laya.Event.CLICK,this,this.onStep)}Laya.timer.loop(100,this,this.reDraw)};t.prototype.draw=function(t,e,i,n){if(n===void 0){n=.3}if(!t.parent){return}var r=t.parent.localToGlobal(new Laya.Point(t.x,t.y));var o;var a;var s;var l;if(e.area!=""){var u=app.str2Array(e.area,";");o=r.x+parseInt(u[0]);a=r.y+parseInt(u[1]);s=parseInt(u[2]);l=parseInt(u[3])}else{o=r.x-t.pivotX;a=r.y-t.pivotY;s=t.width*t.scaleX;l=t.height*t.scaleY}if(this.px==o&&this.py==a){return}this.px=o;this.py=a;this.imgSelect.x=o;this.imgSelect.y=a;this.imgSelect.width=s;this.imgSelect.height=l;this._dir=e.dir==""?1:parseInt(e.dir);var p=app.str2Array(e.offxy,";");var h=p[0]?parseInt(p[0]):0;var c=p[1]?parseInt(p[1]):0;var f=(this._dir-1)*90;this.imgArrow.rotation=f;if(this._dir==1){this.imgArrow.x=o+h;this.imgArrow.y=a+l/2+c}else if(this._dir==2){this.imgArrow.x=o+s/2+h;this.imgArrow.y=a+c}else if(this._dir==3){this.imgArrow.x=o+s+h;this.imgArrow.y=a+l/2+c}else if(this._dir==4){this.imgArrow.x=o+s/2+h;this.imgArrow.y=a+l+c}if(i.guidedes==""){this.qipaoimg.visible=false}else{this.lbldes.text=i.guidedes;this.lbldes.cacheAsBitmap=true;var g=this.lbldes.textField.textWidth;var d=this.lbldes.textField.textHeight;if(g<120){g=120}this.qipaoimg.width=g+y.GuideItem.OFFX*2;this.qipaoimg.height=d+y.GuideItem.OFFY*2;this.lbldes.x=(this.qipaoimg.width-this.lbldes.textField.textWidth)/2;this.qipaoimg.visible=true;if(this._dir==1){this.qipaoimg.pivotX=this.qipaoimg.width;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x-this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==2){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y-this.imgArrow.width;if(this.qipaoimg.x-this.qipaoimg.pivotX<0){this.qipaoimg.x-=this.qipaoimg.x-this.qipaoimg.pivotX}else if(this.qipaoimg.x+this.qipaoimg.pivotX-Laya.stage.width>0){this.qipaoimg.x-=this.qipaoimg.x+this.qipaoimg.pivotX-Laya.stage.width}}else if(this._dir==3){this.qipaoimg.pivotX=0;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x+this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(this._dir==4){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=0;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y+this.imgArrow.width;if(this.qipaoimg.x-this.qipaoimg.pivotX<0){this.qipaoimg.x-=this.qipaoimg.x-this.qipaoimg.pivotX}else if(this.qipaoimg.x+this.qipaoimg.pivotX-Laya.stage.width>0){this.qipaoimg.x-=this.qipaoimg.x+this.qipaoimg.pivotX-Laya.stage.width}}}this._mask.alpha=n;this.drawHole();if(!e.shake){this.playShine()}};t.prototype.drawHole=function(){var t=this.imgSelect.x;var e=this.imgSelect.y;var i=this.imgSelect.width;var n=this.imgSelect.height;this._hole.graphics.clear();this._hole.graphics.drawRect(0,0,Laya.stage.width,e,0);this._hole.graphics.drawRect(0,e,t,n,0);this._hole.graphics.drawRect(t+i,e,Laya.stage.width-t-i,n,0);this._hole.graphics.drawRect(0,e+n,Laya.stage.width,Laya.stage.height-e-n,0);var r=new Laya.HitArea;r.hit=this._hole.graphics;this.hitArea=r;this.imgRect.x=t-8;this.imgRect.y=e-8;this.imgRect.width=i+16;this.imgRect.height=n+16;this.addChild(this.imgRect)};t.prototype.playShine=function(){if(this.boPlay){return}this.boPlay=true;this._ax=this.imgArrow.x;this._ay=this.imgArrow.y;this._speed=1;Laya.timer.loop(50,this,this.loopShine)};t.prototype.stopShine=function(){this.boPlay=false;Laya.timer.clear(this,this.loopShine)};t.prototype.loopShine=function(){switch(this._dir){case 1:if(this.imgArrow.x<=this._ax-10){this._speed=2}else if(this.imgArrow.x>=this._ax){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 2:if(this.imgArrow.y<=this._ay-10){this._speed=2}else if(this.imgArrow.y>=this._ay){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break;case 3:if(this.imgArrow.x<=this._ax){this._speed=2}else if(this.imgArrow.x>=this._ax+10){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 4:if(this.imgArrow.y<=this._ay){this._speed=2}else if(this.imgArrow.y>=this._ay+10){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break}};t.SINGLE_KEY="guide.GuideScreenItem";return t}(ui.main.guideitemUI);y.GuideScreenItem=t})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.ani1.play()};e.prototype.onUnDisplay=function(){this.ani1.stop()};e.SINGLE_KEY="guide.GuideSz";return e}(ui.main.guideszUI);t.GuideSz=e})(guide||(guide={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guide;(function(p){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boPlay=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=p.GuideModel.getIns();this.lbldes.width=200;this.lbldes.y=20;this.qipaoimg.width=220;this.imgSelect.visible=this.tiaoguoimg.visible=false};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.stopShine()};t.prototype.refreshAll=function(){};t.prototype.add=function(t,e,i,n,r,o,a){this.visible=t.visible;t.addChild(this);this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.visible=true;var s=(a-1)*90;this._dir=a;this.imgArrow.rotation=s;if(this._dir==1){this.imgArrow.x=i;this.imgArrow.y=n+o/2}else if(this._dir==2){this.imgArrow.x=i+r/2;this.imgArrow.y=n}else if(this._dir==3){this.imgArrow.x=i+r;this.imgArrow.y=n+o/2}else if(this._dir==4){this.imgArrow.x=i+r/2;this.imgArrow.y=n+o}this.lbldes.text=e;this.lbldes.cacheAsBitmap=true;var l=this.lbldes.textField.textWidth;var u=this.lbldes.textField.textHeight;if(l<120){l=120}this.qipaoimg.width=l+p.GuideItem.OFFX*2;this.qipaoimg.height=u+p.GuideItem.OFFY*2;this.lbldes.x=(this.qipaoimg.width-this.lbldes.textField.textWidth)/2;this.qipaoimg.visible=true;if(a==1){this.qipaoimg.pivotX=this.qipaoimg.width;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x-this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(a==2){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=this.qipaoimg.height;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y-this.imgArrow.width}else if(a==3){this.qipaoimg.pivotX=0;this.qipaoimg.pivotY=this.qipaoimg.height/2;this.qipaoimg.x=this.imgArrow.x+this.imgArrow.width;this.qipaoimg.y=this.imgArrow.y}else if(a==4){this.qipaoimg.pivotX=this.qipaoimg.width/2;this.qipaoimg.pivotY=0;this.qipaoimg.x=this.imgArrow.x;this.qipaoimg.y=this.imgArrow.y+this.imgArrow.width}this.playShine()};t.prototype.hide=function(){this.stopShine();this.removeSelf()};t.prototype.playShine=function(){if(this.boPlay){return}this._ax=this.imgArrow.x;this._ay=this.imgArrow.y;this._speed=1;Laya.timer.loop(50,this,this.loopShine)};t.prototype.stopShine=function(){this.boPlay=false;Laya.timer.clear(this,this.loopShine)};t.prototype.loopShine=function(){switch(this._dir){case 1:if(this.imgArrow.x<=this._ax-10){this._speed=2}else if(this.imgArrow.x>=this._ax){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 2:if(this.imgArrow.y<=this._ay-10){this._speed=2}else if(this.imgArrow.y>=this._ay){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break;case 3:if(this.imgArrow.x<=this._ax){this._speed=2}else if(this.imgArrow.x>=this._ax+10){this._speed=-2}this.imgArrow.x+=this._speed;this.qipaoimg.x+=this._speed;break;case 4:if(this.imgArrow.y<=this._ay){this._speed=2}else if(this.imgArrow.y>=this._ay+10){this._speed=-2}this.imgArrow.y+=this._speed;this.qipaoimg.y+=this._speed;break}};t.SINGLE_KEY="guide.OtherGuideItem";return t}(ui.main.guideitemUI);p.OtherGuideItem=t})(guide||(guide={}));var guild;(function(c){var t=function(){function t(){}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.onGuildInfListReq=function(){app.ProtocolRequest.GuildInfListReq()};t.prototype.onGuildInfListByNameReq=function(t){app.ProtocolRequest.GuildInfListByNameReq(t)};t.prototype.onJoinGuildReq=function(t){var e=c.GuildModel.getIns().onJoinGuild(t);if(e){app.ProtocolRequest.JoinGuildReq(t)}};t.prototype.onCreateGuildReq=function(t){app.ProtocolRequest.CreateGuildReq(t)};t.prototype.onOpenGuildReq=function(){app.ProtocolRequest.OpenGuildReq()};t.prototype.onGuildMemberListReq=function(){app.ProtocolRequest.GuildMemberListReq()};t.prototype.onOperateGuildReq=function(t,e,i){var n=c.GuildModel.getIns().getGuildData();if(n){if(e==0){var r=n.guildInf.members<=1;if(!r){if(c.GuildModel.getIns().isClan()){manager.FlowManager.instance.flowByStyle1(app.getLang("family_23"));return}}var o=app.getLang("family_21");if(r){o=app.getLang("family_93")}game.Alert.show(o,Laya.Handler.create(this,function(){app.ProtocolRequest.OperateGuildReq(t,e,i)}));return}else if(e==2){var a=csv.GuildProxy.getIns().getBaseCfg(n.guildInf.level);var s=0;if(i==c.POSITION_ENUM.ELDER){s=parseInt(a.elite)}else if(i==c.POSITION_ENUM.ASS_CLAN){s=parseInt(a.deputy)}if(s>0){var l=c.GuildModel.getIns().getMemberNum(i);if(l>=s){manager.FlowManager.instance.flowByStyle1(app.getLang("family_77"));return}}}app.ProtocolRequest.OperateGuildReq(t,e,i)}};t.prototype.onOpenJoinGuildReq=function(){app.ProtocolRequest.OpenJoinGuildReq()};t.prototype.onOperateJoinGuildReq=function(t,e){app.ProtocolRequest.OperateJoinGuildReq(t,e)};t.prototype.onAutoJoinGuildLimitReq=function(t,e){app.ProtocolRequest.AutoJoinGuildLimitReq(t,e)};t.prototype.onChangeGuildNameReq=function(t){app.ProtocolRequest.ChangeGuildNameReq(t)};t.prototype.onChangeGuildNcReq=function(t){app.ProtocolRequest.ChangeGuildNcReq(t)};t.prototype.onGuildInfReq=function(t){app.ProtocolRequest.GuildInfReq(t)};t.prototype.canUpgrap=function(t,e,i,n){var r=parseInt(app.str2Array(e,"-")[1]);var o=parseInt(app.str2Array(e,"-")[0]);var a=game.ItemUtil.createVO(o);if(c.GuildModel.getIns().guildVO.guildGold<r){if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("{0}不足",a.getName()))}return false}if(this.checkMaxLevel(t,i)){if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("已经达到最高等级"))}return false}var s=c.GuildModel.getIns().guildVO.getLobbylevel();if(i>0&&t>=s){if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("帮派大厅等级不足"))}return false}return true};t.prototype.getRedArrTech=function(){var t=[];for(var e=1;e<=game.Context.roleList.length;e++){var i=false;var n=c.GuildModel.getIns().getGuildSkillVO(e);for(var r=0;r<n.length;r++){if(n[r]){if(this.canGuildTechReq(r,n[r].sid,n[r].lv,false)){i=true;break}}}t.push(i)}return t};t.prototype.redDotRedBag=function(){var t=false;if(c.GuildModel.getIns().isFunOpended(c.GUILD_BUILD_ENUM.RED_BAG,false)){var e=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);if(e-c.GuildModel.getIns().rptimes>0){var i=c.GuildModel.getIns().getGuildRedPack();for(var n=0,r=i;n<r.length;n++){var o=r[n];if(o.list.length==0){t=true;break}else{var a=false;for(var s=0,l=o.list;s<l.length;s++){var u=l[s];if(Uint64.equal(u.id,game.Context.mainRoleId)){a=true;break}}if(!a){t=true;break}}}}}return t};t.prototype.redDotTask=function(){var t=false;if(c.GuildModel.getIns().guildVO&&c.GuildModel.getIns().isFunOpended(c.GUILD_BUILD_ENUM.TASK,false)){t=this.checkTaskAward();if(!t){t=this.checkTaskGuild()}if(!t){t=this.checkHelpTask()}if(t){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_TASK)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_TASK)}}return t};t.prototype.checkTaskAward=function(){var t=false;var e=c.GuildModel.getIns().guildTask.starnum;var i=csv.GuildProxy.getIns().getTaskStar();for(var n in i){if(e>=parseInt(i[n].star)){if(c.GuildModel.getIns().canReqAward(parseInt(i[n].star))){t=true;break}}}return t};t.prototype.checkTaskGuild=function(){var t=false;for(var e=1;e<=4;e++){var i=c.GuildModel.getIns().guildTask.getTaskByPos(e);if(i&&i.taskindex>0){t=true;break}}return t};t.prototype.checkHelpTask=function(){var t=false;var e=c.GuildModel.getIns().guildTask.guildhelp;var i=game.Config.getIntParams(game.ConfigID.GUILD_HELP);var n=c.GuildModel.getIns().helpTask;if(i-e>0){for(var r=0,o=n;r<o.length;r++){var a=o[r];if(Uint64.equal(a.uid,game.Context.mainRoleId))continue;t=this.compareHelpData(a);if(t){break}}}return t};t.prototype.compareHelpData=function(t){var e=true;var i=c.GuildModel.getIns().helpRecord;var n=[];for(var r=0;r<i.length;r++){if(Uint64.equal(i[r].uid,t.uid)){n.push(i[r])}}for(var r=0;r<n.length;r++){if(n[r].stime==t.stime){e=false;break}}return e};t.prototype.redDotShopView=function(){var t=false;return t};t.prototype.redDotTechView=function(){var t=false;return t};t.prototype.redDotTreasureView=function(){var t=false;if(c.GuildModel.getIns().guildVO&&c.GuildModel.getIns().isFunOpended(c.GUILD_BUILD_ENUM.HOUSEWARE,false)){t=this.canTreasureReq()}return t};t.prototype.redDotHallView=function(){var t=false;if(c.GuildModel.getIns().guildVO&&c.GuildModel.getIns().isFunOpended(c.GUILD_BUILD_ENUM.LOBBY,false)){t=this.canConGuildReq(0);if(!t&&c.GuildModel.getIns().isLimitsHigh()){var e=c.GuildModel.getIns().guildVO.getLobbylevel();var i=csv.GuildProxy.getIns().getBaseCfg(e).cost;t=this.canUpgrap(e,i,0,false)}}return t};t.prototype.redDotRedPackView=function(){return c.GuildController.getIns().redDotRedBag()};t.prototype.redDotGuildBoss=function(){return guildboss.GuildBossModel.getIns().isShowRedDot()};t.prototype.redDotDefend=function(){var t=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.SHOU_HU);if(t){return true}return false};t.prototype.onFunctionRedDotChange=function(){game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_INFO);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_TASK);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_FUN);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.HULU_PICK);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILDBOSS);if(c.GuildModel.getIns().guildVO){if(this.redDotHallView()||this.redDotTreasureView()||this.redDotTechView()||this.redDotShopView()||this.redDotRedPackView()||hulupick.HuluPickModel.getIns().isShowHuluPickRedDot()||this.redDotTask()||this.redDotGuildBoss()||this.redDotDefend()){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_FUN)}if(c.GuildModel.getIns().joinNotify){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_INFO)}}};t.prototype.onUpgraGuildReq=function(t,e,i){var n=c.GuildModel.getIns().isLimitsHigh();if(!n){manager.FlowManager.instance.flowByStyle1(app.getLang("权限不足"));return}if(this.canUpgrap(t,e,i,true)){app.ProtocolRequest.UpgraGuildReq(i)}};t.prototype.checkMaxLevel=function(t,e){var i=csv.GuildProxy.getIns().getMaxGuildLevel();if(e==2){i=csv.GuildProxy.getIns().getMaxShopLevel()}else if(e==3){i=csv.GuildProxy.getIns().getMaxTechLevel()}return t>=i};t.prototype.onConGuildReq=function(t){var e=c.GuildModel.getIns().guildVO;var i=e.getLobbylevel();var n=csv.GuildProxy.getIns().getBaseCfg(i);var r=0;var o=0;if(t==0){r=csv.GuildProxy.getIns().getMoneyDonateCount();o=c.GuildModel.getIns().guildVO.guildSelfInf.gnum}else{r=csv.GuildProxy.getIns().getDiamondDonateCount();o=c.GuildModel.getIns().guildVO.guildSelfInf.mnum}var a=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.GUILD_BUILD_TIME,vipcode.VipModel.getIns().vipLvl);if(e.dailyGold>=n.daylimit){var s=app.getLang("family_116");if(t==0){if(o>=r){manager.FlowManager.instance.flowByStyle1(app.getLang("今日铜钱捐献次数已达上限"))}else{game.Alert.show(s,new Laya.Handler(this,this.onConGuildReqCallBack,[t]),new Laya.Handler)}}else{if(o>=r){if(a!=999){if(game.Context.disableIosRecharge()||vipcode.VipModel.getIns().isMaxLevel()){manager.FlowManager.instance.flowByStyle1(app.getLang("family_112"))}else{game.Alert.show(app.getLang("family_113"),new Laya.Handler(this,this.gotoVipView),new Laya.Handler)}}}else{game.Alert.show(s,new Laya.Handler(this,this.onConGuildReqCallBack,[t]),new Laya.Handler)}}}else if(o>=r){if(t==1){if(a!=999){if(game.Context.disableIosRecharge()||vipcode.VipModel.getIns().isMaxLevel()){manager.FlowManager.instance.flowByStyle1(app.getLang("family_112"))}else{game.Alert.show(app.getLang("family_113"),new Laya.Handler(this,this.gotoVipView),new Laya.Handler)}}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("family_115"))}}else{this.onOkHandler(t,t==0)}};t.prototype.onConGuildReqCallBack=function(t){if(this.canConGuildReq(t,t==0)){app.ProtocolRequest.ConGuildReq(t)}};t.prototype.onOkHandler=function(t,e){if(this.canConGuildReq(t,true,e)){if(t==1){var i=c.GuildModel.getIns().guildVO.guildSelfInf.mnum;var n=csv.GuildProxy.getIns().getDonateCfg(i+1);var r=game.ItemUtil.parserList(n.diamondcost)[0];if(game.SystemSetModel.getInstance().alertViewCheck(csv.FunctionsProxy.ENUMS.GUILD_HALL)){app.ProtocolRequest.ConGuildReq(t)}else{game.Alert.show(app.getLang("family_104",r.getItemId(),r.count),new Laya.Handler(this,this.onConGuildReqHandler,[t]),new Laya.Handler,0,"","","center","center",csv.FunctionsProxy.ENUMS.GUILD_HALL)}}else{app.ProtocolRequest.ConGuildReq(t)}}};t.prototype.onConGuildReqHandler=function(t){app.ProtocolRequest.ConGuildReq(t)};t.prototype.gotoVipView=function(){app.ViewManager.toggleDialog(vipcode.VipView,1,0)};t.prototype.canConGuildReq=function(t,e,i){if(e===void 0){e=false}if(i===void 0){i=false}var n=0;var r=0;if(t==0){n=csv.GuildProxy.getIns().getMoneyDonateCount();r=c.GuildModel.getIns().guildVO.guildSelfInf.gnum}else{n=csv.GuildProxy.getIns().getDiamondDonateCount();r=c.GuildModel.getIns().guildVO.guildSelfInf.mnum}if(r>=n){return false}var o=csv.GuildProxy.getIns().getDonateCfg(r+1);var a=0==t?o.goldcost:o.diamondcost;var s=game.GridsModel.getIns().hasEnoughItems(a,false,e,i);if(!s){return false}return true};t.prototype.onConGuildRecordReq=function(){app.ProtocolRequest.ConGuildRecordReq()};t.prototype.onBuyGuildMallNumReq=function(t,e,i,n){var r=app.str2Array(i,"-")[0];var o=game.GridsModel.getIns().hasEnoughItems(i);if(!o){this.flowItemNotEnough(r);return}for(var a=0,s=c.GuildModel.getIns().recordList;a<s.length;a++){var l=s[a];if(l.mallID==t){if(mall.MallModel.getIns().getCnt(l)>=n){manager.FlowManager.instance.flowByStyle1(app.getLang("当日购买数量已达上限"));return}}}app.ProtocolRequest.BuyGuildMallNumReq(t,e)};t.prototype.onGuildTechReq=function(t,e,i){if(this.canGuildTechReq(t,e,i,true)){app.ProtocolRequest.GuildTechReq(t,e);console.log(t,e)}};t.prototype.canGuildTechReq=function(t,e,i,n){var r=csv.GuildProxy.getIns().getTechMaxLevel(e);if(i>=r){if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("lotus_8"))}return false}var o=c.GuildModel.getIns().guildVO.getBuildlevel();var a=csv.GuildProxy.getIns().getTechLimitLevel(e,o);if(i>=a){if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("family_error_1",a))}return false}var s=csv.GuildProxy.getIns().getTechAttr(e,i+1);var l=app.str2Array(s.cost,";");if(o<e){if(n){manager.FlowManager.instance.flowByStyle1(app.getLang("family_error_2",e))}return false}for(var u=0;u<2;u++){var p=l[u];if(p&&p.length>0){var h=game.GridsModel.getIns().hasEnoughItems(p,false,n);if(!h){return false}}}return true};t.prototype.canTreasureReq=function(){var t=game.Config.getIntParams(204);return t-c.GuildModel.getIns().dailynum>0&&c.GuildModel.getIns().guildTreasure.length>0};t.prototype.onGainGuildTreasureReq=function(t){if(t>0){if(c.GuildModel.getIns().getGuildAWardDB(t)){app.ProtocolRequest.GainGuildTreasureReq(t)}}else if(this.canTreasureReq()){app.ProtocolRequest.GainGuildTreasureReq(0)}};t.prototype.onGuildTaskStarAwardReq=function(t){app.ProtocolRequest.GuildTaskStarAwardReq(t)};t.prototype.onSubGuildQuestItemReq=function(t,e){var i=c.GuildModel.getIns().guildTask.guildhelp;var n=game.Config.getIntParams(game.ConfigID.GUILD_HELP);var r=csv.TaskProxy.getIns().getCfg(e);var o=parseInt(app.str2Array(r.param)[0]);var a=game.GridsModel.getIns().getItemByItemId(o);if(n-i>0){if(game.GridsModel.getIns().hasEnoughItems(r.param,false,true)){app.ProtocolRequest.SubGuildQuestItemReq(t,e,[a.getInstId()])}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("今日协助次数已用完"))}};t.prototype.onSubGuildQuestItemBuyReq=function(t,e){var i=c.GuildModel.getIns().guildTask.guildhelp;var n=game.Config.getIntParams(game.ConfigID.GUILD_HELP);if(n-i>0){app.ProtocolRequest.SubGuildQuestItemBuyReq(t,e)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("今日协助次数已用完"))}};t.prototype.onGuildQuestReq=function(){app.ProtocolRequest.GuildQuestReq()};t.prototype.onHelpGuildQuestReq=function(t){app.ProtocolRequest.HelpGuildQuestReq(t)};t.prototype.onFreshGuildQuestStar=function(t){var e=false;var i=false;var n=c.GuildModel.getIns().guildTask.taskinf;var r;for(var o=0;o<n.length;o++){r=game.TaskModel.getIns().getTaskData(n[o].taskindex);if(r){if(r.data.star!=7){e=true}}if(n[o].helpflag==0){i=true}}if(!i||!e){manager.FlowManager.instance.flowByStyle1(app.getLang("family_error_6"))}else if(t==0){if(c.GuildController.getIns().enoughfreshGeneral()){this.onFreshGuildQuestStarReq(0)}}else if(game.SystemSetModel.getInstance().alertViewCheck(csv.FunctionsProxy.ENUMS.GUILD_TASK)){this.onFreshGuildQuestStarReq(t)}else{game.Alert.show(app.getLang("family_117",game.ItemUtil.ENUMS.YUANBAO,this.getFreshMoeny()),new Laya.Handler(this,this.onFreshGuildQuestStarReq,[t]),new Laya.Handler,0,"","","center","center",csv.FunctionsProxy.ENUMS.GUILD_TASK,"","")}};t.prototype.onFreshGuildQuestStarReq=function(t){app.ProtocolRequest.FreshGuildQuestStarReq(t)};t.prototype.getFreshMoeny=function(){var t=app.str2Array(game.Config.getParams(game.ConfigID.GUILD_FRESH_COST),";");var e=parseInt(t[0]);var i=parseInt(t[1]);var n=game.Config.getIntParams(game.ConfigID.GUILD_FREE_INTERVAL);var r=c.GuildModel.getIns().guildTask.goldnum;return e+parseInt((r/n).toString())*i};t.prototype.flowItemNotEnough=function(t){manager.FlowManager.instance.flowByStyle1(app.getLang("item_not_enough",csv.ItemProxy.getName(t)))};t.prototype.enoughfreshGeneral=function(){return c.GuildModel.getIns().guildTask.freenum>0};t.SINGLE_KEY="guild.GuildController";return t}();c.GuildController=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.UpgraGuildAck,this,this.onUpgraGuildAck);this.addMsgListener(app.ProtocolResponse.ConGuildAck,this,this.onConGuildAck);this.addMsgListener(app.ProtocolResponse.ConGuildRecordAck,this,this.onConGuildRecordAck);this.addMsgListener(app.ProtocolResponse.GuildTechNtf,this,this.onGuildTechNtf);this.addMsgListener(app.ProtocolResponse.ChangeGuildTechNtf,this,this.onChangeGuildTechNtf);this.addMsgListener(app.ProtocolResponse.GuildTechAck,this,this.onGuildTechAck);this.addMsgListener(app.ProtocolResponse.GuildMallRecordNtf,this,this.onGuildMallRecordNtf);this.addMsgListener(app.ProtocolResponse.GuildMallRandNtf,this,this.onGuildMallRandNtf);this.addMsgListener(app.ProtocolResponse.BuyGuildMallNumAck,this,this.onBuyGuildMallNumAck);this.addMsgListener(app.ProtocolResponse.GuildTreasureNtf,this,this.onGuildTreasureNtf);this.addMsgListener(app.ProtocolResponse.ModifyGuildTreasureNtf,this,this.onModifyGuildTreasureNtf);this.addMsgListener(app.ProtocolResponse.DelGuildTreasureNtf,this,this.onDelGuildTreasureNtf);this.addMsgListener(app.ProtocolResponse.GainGuildTreasureAck,this,this.onGainGuildTreasureAck);this.addMsgListener(app.ProtocolResponse.GuildTreasureDailyNtf,this,this.onGuildTreasureDailyNtf);this.addMsgListener(app.ProtocolResponse.GuildTaskNtf,this,this.onGuildTaskNtf);this.addMsgListener(app.ProtocolResponse.GuildTaskStarAwardAck,this,this.onGuildTaskStarAwardAck);this.addMsgListener(app.ProtocolResponse.SubGuildQuestItemAck,this,this.onSubGuildQuestItemAck);this.addMsgListener(app.ProtocolResponse.GuildQuestAck,this,this.onGuildQuestAck);this.addMsgListener(app.ProtocolResponse.HelpGuildQuestAck,this,this.onHelpGuildQuestAck);this.addMsgListener(app.ProtocolResponse.FreshGuildQuestStarAck,this,this.onFreshGuildQuestStarAck);this.addMsgListener(app.ProtocolResponse.SubGuildQuestBuyAck,this,this.onSubGuildQuestBuyAck);this.addMsgListener(app.ProtocolResponse.GuildTaskHelpAck,this,this.onGuildTaskHelpAck);this.addMsgListener(app.ProtocolResponse.RPInfoAck,this,this.onRPInfoAck);this.addMsgListener(app.ProtocolResponse.RPGetAck,this,this.onRPGetAck);this.addMsgListener(app.ProtocolResponse.RPHistoryAck,this,this.onRPHistoryAck);this.addMsgListener(app.ProtocolResponse.RPSendInfo,this,this.onRPSendInfo);this.addMsgListener(app.ProtocolResponse.RPGetTimes,this,this.onRPGetTimes)};e.prototype.onRPSendInfo=function(t,e){i.GuildModel.getIns().onRPSendInfo(e.rpInfo,e.flag);i.GuildModel.getIns().event(i.GuildFunView.RED_DOT_UPDATE,n.RED_BAG)};e.prototype.onRPHistoryAck=function(t,e){if(e.result){i.GuildModel.getIns().onRPHistoryAck(e.type,e.gInfo)}};e.prototype.onRPGetAck=function(t,e){if(e.result){i.GuildModel.getIns().onRPGetAck(e.gInfo);i.GuildModel.getIns().event(i.GuildFunView.RED_DOT_UPDATE,n.RED_BAG)}};e.prototype.onRPInfoAck=function(t,e){if(e.result){i.GuildModel.getIns().onRPInfoAck(e.gInfo);i.GuildModel.getIns().event(i.GuildFunView.RED_DOT_UPDATE,n.RED_BAG)}};e.prototype.onRPGetTimes=function(t,e){i.GuildModel.getIns().onRPGetTimes(e.rptimes)};e.prototype.onGuildTaskNtf=function(t,e){i.GuildModel.getIns().updateGuildTask(e)};e.prototype.onGuildTaskStarAwardAck=function(t,e){if(e.result==1){i.GuildModel.getIns().onGuildTaskStarAwardAck(e.staraward)}};e.prototype.onSubGuildQuestItemAck=function(t,e){app.ProtocolRequest.GuildQuestReq()};e.prototype.onHelpGuildQuestAck=function(t,e){if(e.result==1){i.GuildModel.getIns().onHelpGuildQuestAck(e.taskIndex)}};e.prototype.onGuildQuestAck=function(t,e){i.GuildModel.getIns().onGuildQuestAck(e.result)};e.prototype.onSubGuildQuestBuyAck=function(t,e){if(e.result){}};e.prototype.onGuildTaskHelpAck=function(t,e){i.GuildModel.getIns().onGuildTaskHelpAck(e.record)};e.prototype.onFreshGuildQuestStarAck=function(t,e){if(e.result==1){manager.FlowManager.instance.flowByStyle1(app.getLang("family_87"))}};e.prototype.onGuildTreasureNtf=function(t,e){i.GuildModel.getIns().updateGuildTreasure(e.treasure)};e.prototype.onModifyGuildTreasureNtf=function(t,e){i.GuildModel.getIns().updateGuildTreasure(e.treasure)};e.prototype.onDelGuildTreasureNtf=function(t,e){i.GuildModel.getIns().delGuildTreasure(e.tid);i.GuildModel.getIns().event(i.GuildTreasureView.DEL_TREASURE,[e.tid])};e.prototype.onGainGuildTreasureAck=function(t,e){if(e.result){}};e.prototype.onGuildTreasureDailyNtf=function(t,e){i.GuildModel.getIns().dailynum=e.dailynum;i.GuildModel.getIns().event(i.GuildTreasureView.UPDATE_TREASURE)};e.prototype.onBuyGuildMallNumAck=function(t,e){if(e.result==1){}};e.prototype.onGuildMallRandNtf=function(t,e){i.GuildModel.getIns().randList=e.randList;i.GuildModel.getIns().event(i.GuildShopView.GUILD_MALL_RAND)};e.prototype.onGuildMallRecordNtf=function(t,e){i.GuildModel.getIns().recordList=e.recordList;i.GuildModel.getIns().event(i.GuildEvent.EVENT.GUILD_MALLRECORD_UPDATE)};e.prototype.onConGuildRecordAck=function(t,e){app.ViewManager.toggleDialog(i.GuildDonateListView,1,0,e.con)};e.prototype.onConGuildAck=function(t,e){if(e.result==1){}};e.prototype.onUpgraGuildAck=function(t,e){if(e.result==1){i.GuildModel.getIns().event(i.GuildFunView.RED_DOT_UPDATE,n.LOBBY);i.GuildModel.getIns().event(i.GuildFunView.RED_DOT_UPDATE,n.SHOP);i.GuildModel.getIns().event(i.GuildFunView.RED_DOT_UPDATE,n.BOSS);app.ViewManager.toggleDialog(i.GuildUpradeBuildView,-1);manager.EffectManager.playStageEffect("skill_shengjichenggong")}};e.prototype.onGuildTechNtf=function(t,e){i.GuildModel.getIns().onGuildTechNtf(e.tech)};e.prototype.onChangeGuildTechNtf=function(t,e){i.GuildModel.getIns().onChangeGuildTechNtf(e.tech[0])};e.prototype.onGuildTechAck=function(t,e){if(e.result==1){}};e.SINGLE_KEY="guild.GuildFunctionModule";return e}(app.ModuleBase);i.GuildFunctionModule=t;var n;(function(t){t[t["LOBBY"]=1]="LOBBY";t[t["BOSS"]=2]="BOSS";t[t["HOUSEWARE"]=3]="HOUSEWARE";t[t["TASK"]=4]="TASK";t[t["SHOP"]=5]="SHOP";t[t["RED_BAG"]=6]="RED_BAG";t[t["HULU_PICK"]=7]="HULU_PICK";t[t["HULU_DEFINE"]=8]="HULU_DEFINE";t[t["GUILD_BOSS"]=9]="GUILD_BOSS"})(n=i.GUILD_BUILD_ENUM||(i.GUILD_BUILD_ENUM={}))})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var i=hulupick.HuluPickModel;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){app.ViewManager.regist(n.GuildListView,"banghui.atlas");app.ViewManager.regist(n.GuildFunView,"banghui.atlas");app.ViewManager.regist(n.GuildShopView,"banghui.atlas");app.ViewManager.regist(n.GuildTaskMainView,"banghui.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.REDPACK_GUILD,n.GuildRedPackView,null,0);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_LIST,n.GuildListView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_WAREHOUSE,n.GuildTreasureView,new Laya.Handler(this,this.goWarehouseView),0);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_FUN,n.GuildFunView,new Laya.Handler(this,this.goFunView,[csv.FunctionsProxy.ENUMS.GUILD_FUN]));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_INFO,n.GuildInfoView,new Laya.Handler(this,this.goFunView,[csv.FunctionsProxy.ENUMS.GUILD_INFO]));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_TECH,n.GuildTechView,new Laya.Handler(this,this.goTechView));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_TASK,n.GuildTaskMainView,new Laya.Handler(this,this.goTaskView));game.WindowsResigter.registFunctionOpenCheck(csv.FunctionsProxy.ENUMS.GUILD_FUN,new Laya.Handler(this,this.openCheck,[csv.FunctionsProxy.ENUMS.GUILD_FUN]));game.WindowsResigter.registFunctionOpenCheck(csv.FunctionsProxy.ENUMS.GUILD_INFO,new Laya.Handler(this,this.openCheck,[csv.FunctionsProxy.ENUMS.GUILD_INFO]));game.WindowsResigter.registFunctionOpenCheck(csv.FunctionsProxy.ENUMS.GUILD_TASK,new Laya.Handler(this,this.openCheck,[csv.FunctionsProxy.ENUMS.GUILD_TASK]));game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_SHOP,n.GuildShopView,new Laya.Handler(this,this.goShopView),0);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_HALL,n.GuildHallView,new Laya.Handler(this,this.goHallView),0);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.CHANGE,this,this.onRedDotChange);game.GridObserver.getIns().onItemType(csv.ItemProxy.TYPES.CAI_LIAO,this,this.onRedDotChange);game.GridObserver.getIns().onItemId(40001,this,this.onRedDotChange);game.GridObserver.getIns().onItemId(40002,this,this.onRedDotChange);game.GridObserver.getIns().onItemId(40003,this,this.onRedDotChange);dailytask.DailyTaskModel.getIns().on(dailytask.DailyTaskModel.OPEN_ACTIVITY_CHANGE,this,this.onRedDotChange)};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.LeaveGuildNtf,this,this.onLeaveGuildNtf);this.addMsgListener(app.ProtocolResponse.GuildNtf,this,this.onGuildNtf);this.addMsgListener(app.ProtocolResponse.GuildReqNtf,this,this.onGuildReqNtf);this.addMsgListener(app.ProtocolResponse.GuildInfListAck,this,this.onGuildInfListAck);this.addMsgListener(app.ProtocolResponse.ChangeGuildNameAck,this,this.onChangeGuildNameAck);this.addMsgListener(app.ProtocolResponse.OpenGuildAck,this,this.onOpenGuildAck);this.addMsgListener(app.ProtocolResponse.UpdateGuildInfAck,this,this.onUpdateGuildInfAck);this.addMsgListener(app.ProtocolResponse.UpdateGuildChiefAck,this,this.onUpdateGuildChiefAck);this.addMsgListener(app.ProtocolResponse.OpenJoinGuildAck,this,this.onOpenJoinGuildAck);this.addMsgListener(app.ProtocolResponse.OperateJoinGuildAck,this,this.onOperateJoinGuildAck);this.addMsgListener(app.ProtocolResponse.AutoJoinGuildLimitAck,this,this.onAutoJoinGuildLimitAck);this.addMsgListener(app.ProtocolResponse.GuildMemberListAck,this,this.onGuildMemberListAck);this.addMsgListener(app.ProtocolResponse.UpdateGuildSelfAck,this,this.onUpdateGuildSelfAck);this.addMsgListener(app.ProtocolResponse.JoinNotify,this,this.onJoinNotify);this.addMsgListener(app.ProtocolResponse.CreateGuildAck,this,this.onCreateGuildAck);this.addMsgListener(app.ProtocolResponse.UpdateGuildNoticeAck,this,this.onUpdateGuildNoticeAck);this.addMsgListener(app.ProtocolResponse.ChangeGuildNcAck,this,this.onChangeGuildNcAck);this.addMsgListener(app.ProtocolResponse.GuildInfAck,this,this.onGuildInfAck);this.addMsgListener(app.ProtocolResponse.OperateGuildAck,this,this.onOperateGuildAck);this.addMsgListener(app.ProtocolResponse.GuildQuestNumNtf,this,this.onGuildQuestNumNtf);this.addMsgListener(app.ProtocolResponse.GuildGourdNtf,this,this.onGuildGourdNtf);csv.FunctionsProxy.getIns().on(csv.FunctionsProxy.EVENTS.ADD,this,this.checkOpen)};e.prototype.checkOpen=function(t){if(t.id==csv.FunctionsProxy.ENUMS.GUILD_FUN){var e=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.GUILD_BOSS);if(e){dailytask.DailyTaskModel.getIns().showTip(e.id,[e.id])}}};e.prototype.onGuildGourdNtf=function(t,e){i.getIns().updateHuluPickInfo(e);i.getIns().updateRedDot()};e.prototype.onGuildQuestNumNtf=function(t,e){n.GuildModel.getIns().onGuildQuestNumNtf(e.num)};e.prototype.onOperateGuildAck=function(t,e){if(e.result==1&&e.flag==0){n.GuildModel.getIns().event(n.GuildEvent.EVENT.GUILD_OPERATE_ACK)}};e.prototype.onRedDotChange=function(){n.GuildController.getIns().onFunctionRedDotChange()};e.prototype.onLeaveGuildNtf=function(t,e){n.GuildModel.getIns().destoryGuild()};e.prototype.onGuildNtf=function(t,e){n.GuildModel.getIns().createGuildVO(e);n.GuildController.getIns().onFunctionRedDotChange()};e.prototype.onGuildReqNtf=function(t,e){n.GuildModel.getIns().setGuildIDs(e.guildID)};e.prototype.onGuildInfListAck=function(t,e){n.GuildModel.getIns().updateGuildListInf(e.GuildInfs);n.GuildModel.getIns().event(n.GuildEvent.EVENT.GUILDLISTINFO_UPDATE)};e.prototype.onChangeGuildNameAck=function(t,e){if(e.result==1){var i=n.GuildModel.getIns().getGuildData();n.GuildInfoView.getIns().labelname01.text=game.Context.getGuildName(i.guildInf.guildName);manager.FlowManager.instance.flowByStyle1(app.getLang("改名成功"))}};e.prototype.onOpenGuildAck=function(t,e){n.GuildModel.getIns().updateMemSword(e.sword);n.GuildModel.getIns().event(n.GuildEvent.EVENT.GUILDSWORD_UPDATE)};e.prototype.onUpdateGuildInfAck=function(t,e){n.GuildModel.getIns().updateGuildInfAck(e);game.Context.event(n.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE);this.onRedDotChange()};e.prototype.onUpdateGuildChiefAck=function(t,e){n.GuildModel.getIns().updateGuildChiefAck(e)};e.prototype.onOpenJoinGuildAck=function(t,e){n.GuildModel.getIns().updateJoinInfArr(e.joinGuildInf)};e.prototype.onOperateJoinGuildAck=function(t,e){if(e.result==1){n.GuildModel.getIns().event(n.GuildEvent.EVENT.JOIN_GUILD_ACK)}};e.prototype.onAutoJoinGuildLimitAck=function(t,e){n.GuildModel.getIns().minFightFlag=e.flag;n.GuildModel.getIns().minFight=e.score};e.prototype.onGuildMemberListAck=function(t,e){n.GuildModel.getIns().updateGuildMemberList(e.guildMember)};e.prototype.onUpdateGuildSelfAck=function(t,e){n.GuildModel.getIns().updateGuildSelfAck(e.guildSelfInf[0]);game.Context.event(n.GuildHallView.GUILD_UPDATE_RECORD_TIME)};e.prototype.onJoinNotify=function(t,e){n.GuildModel.getIns().joinNotify=false;if(e.flag==1){if(n.GuildModel.getIns().isLimits()){n.GuildModel.getIns().joinNotify=true;n.FamilyRedTip.getIns().pushTipArr(n.FamilyRedTip.REDTIP_ENUM.SHENGQING_LIST)}else{n.FamilyRedTip.getIns().delTipArr(n.FamilyRedTip.REDTIP_ENUM.SHENGQING_LIST)}}else{n.FamilyRedTip.getIns().delTipArr(n.FamilyRedTip.REDTIP_ENUM.SHENGQING_LIST)}};e.prototype.onCreateGuildAck=function(t,e){if(e.result==1){}};e.prototype.onChangeGuildNcAck=function(t,e){if(e.result==1){}};e.prototype.onUpdateGuildNoticeAck=function(t,e){n.GuildModel.getIns().updateNotice(e.guildNotice);n.GuildModel.getIns().event(n.GuildEvent.EVENT.GUILDNOTICE_UPDATE)};e.prototype.onGuildInfAck=function(t,e){app.ViewManager.toggleDialog(n.GuildInfoTipView,1,-1,e.guildView[0])};e.prototype.openCheck=function(t){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(t,true,true);return true}else{manager.FlowManager.instance.flowByStyle1(app.getLang("family_tip_2"));return false}};e.prototype.goWarehouseView=function(){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true,Laya.Handler.create(this,function(){app.ViewManager.toggleDialog(n.GuildTreasureView,1,0)}))}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_LIST,true,true)}};e.prototype.goFunView=function(t){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(t,true,true)}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_LIST,true,true)}};e.prototype.goHallView=function(){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true,Laya.Handler.create(this,function(){app.ViewManager.toggleDialog(n.GuildHallView,1,0)}))}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_LIST,true,true)}};e.prototype.goTechView=function(){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true,Laya.Handler.create(this,function(){app.ViewManager.toggleDialog(n.GuildTechView,1,0)}))}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_LIST,true,true)}};e.prototype.goTaskView=function(){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true,Laya.Handler.create(this,function(){app.ViewManager.toggleDialog(n.GuildTaskMainView,1,0)}))}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_LIST,true,true)}};e.prototype.goShopView=function(t){if(n.GuildModel.getIns().isGuild){game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true,Laya.Handler.create(this,function(){app.ViewManager.toggleDialog(n.GuildShopView,1,0,[t])}))}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_LIST,true,true)}};e.SINGLE_KEY="guild.GuildModule";return e}(app.ModuleBase);n.GuildModule=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(m){var t=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.isGuild=false;t.open_shop=false;t.guildVO=null;return t}Object.defineProperty(i.prototype,"unGetedredPack",{get:function(){this._unGetedredPack=[];var t=game.Config.getIntParams(1239);for(var e=this.gInfo.length-1;e>=0;e--){var i=this.getRedPacketGetDataById(this.gInfo[e].rpid);if(i){var n=false;for(var r=0;r<i.list.length;r++){if(Uint64.equal(i.list[r].id,game.Context.mainRoleId)){n=true;break}}if(n==false){this._unGetedredPack.push(this.gInfo[e].rpid);if(this._unGetedredPack.length>=t){break}}}}return this._unGetedredPack.reverse()},enumerable:true,configurable:true});i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){this.dailynum=0;this.guildInfoList=[];this.guildIDs=[];this.guildTreasure=[];this.guildJoinInfArr=[];this.skillInfVO=new m.GuildSkillInfVO;this.guildTask=new m.GuildTaskVO;this.helpTask=[];this.randList=[];this.recordList=[];this.joinNotify=false;this.gInfo=[];this.redPackItems=[];this._unGetedredPack=[];this.rptimes=0;this.helptime=0;this.helpRecord=[];this.record=[]};i.prototype.onGuildQuestNumNtf=function(t){this.helptime=t;if(t>0){m.GuildController.getIns().onGuildQuestReq()}};i.prototype.onSysNewNoticeParamNtf=function(t){var e=new SysNewNoticeParamNtf;e.msgID=501;e.noticeChannel=0;e.msgParam=[];e.msgParam.push(chat.ChatModel.getIns().addSysMsgParam(chat.ChatModel.SYS_MSG_TYPE.USER_NAME_LINK,t.ownerid.toString10(),t.ownername,t.headframeId+""));var i=csv.GuildProxy.getIns().getRedPackCfg(t.rptype);if(i){e.msgID=800+i.event;var n=app.str2Array(i.param1,"-");for(var r=0;r<n.length;r++){e.msgParam.push(chat.ChatModel.getIns().addSysMsgParam(chat.ChatModel.SYS_MSG_TYPE.TEXT,n[r]))}}chat.ChatModel.getIns().onSysNewNoticeParamNtf(e)};i.prototype.canGetRedPack=function(t,e){return m.GuildModel.getIns().checkPackGetted(t,e)};i.prototype.addRedPack=function(){if(this.redPackItems.length>0){this.redPackItems.shift().onStart()}};i.prototype.onRPSendInfo=function(t,e){Laya.timer.clearAll(this);if(e==0){this.gInfo=this.gInfo.concat(t);var i=game.SystemSetModel.getInstance().settingData.getValueByType(game.SettingType.redPack);var n=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);if(i.switch&&i.value==1){this.updateUngetList(t)}for(var r=0;r<t.length;r++){if(i.switch&&i.value==1){}else{var o=Laya.Pool.getItemByClass("guild.RedPackItem",m.RedPackItem);o.setData(t[r]);this.redPackItems.push(o)}this.onSysNewNoticeParamNtf(t[r])}Laya.timer.once(1e3,this,this.addRedPack)}else if(e==1){this.gInfo=this.gInfo.concat(t);var n=game.Config.getIntParams(574);for(var r=0;r<t.length;r++){this.onSysNewNoticeParamNtf(t[r])}this.updateUngetList(t)}else if(e==2){this.gInfo=[];this._unGetedredPack=[]}};i.prototype.getRedPacketGetDataById=function(t){for(var e=0,i=this.gInfo;e<i.length;e++){var n=i[e];if(n.rpid==t){return n}}return null};i.prototype.checkPackGetted=function(t,e){var i="";for(var n=0,r=this.gInfo;n<r.length;n++){var o=r[n];if(t==o.rpid){if(o.lcount<=0){i=app.getLang("手慢了，红包已抢完");if(e){manager.FlowManager.instance.flowByStyle1(i)}return i}for(var a=0,s=o.list;a<s.length;a++){var l=s[a];if(Uint64.equal(l.id,game.Context.mainRoleId)){i=app.getLang("已领取该红包");if(e){manager.FlowManager.instance.flowByStyle1(i)}return i}}}}return i};i.prototype.onRPGetTimes=function(t){this.rptimes=t};i.prototype.onRPInfoAck=function(t){this.gInfo=t;this.updateUngetList(t)};i.prototype.updateUngetList=function(t){if(t===void 0){t=[]}main.RedPackageList.getIns().updateRedPack();this.event(m.GuildRedPackView.REDPACK_INFO_UPDATE,[t])};i.prototype.onRPGetAck=function(t){var e=false;for(var i in t){for(var n in this.gInfo){if(t[i].rpid==this.gInfo[n].rpid){this.gInfo[n]=t[i];e=true;break}}}if(!e){this.gInfo=this.gInfo.concat(t)}this.updateUngetList(t);if(t.length==1){app.ViewManager.toggleDialog(tip.TipMeiator,1,0,[m.GuildRedPackGetView,t,[]])}};i.prototype.onRPHistoryAck=function(t,e){var i=[];var n=0;var r="";var o="";var a=0;var s="";for(var l=0,u=e;l<u.length;l++){var p=u[l];if(t==1){for(var h=0,c=p.list;h<c.length;h++){var f=c[h];r=p.ownername;if(Uint64.equal(f.id,game.Context.mainRoleId)){n=f.gold;o=f.name;a=f.time;break}}s=app.getLang("qianghongbao_history_1",r,n);i.push({desc:s,time:a})}else{if(p.rptype!=1)continue;var g=m.GuildModel.getIns().getProfessionString(p.profession);s=app.getLang("fasonghongbao",g,p.ownername);i.push({desc:s,time:p.time});for(var d=0,y=p.list;d<y.length;d++){var f=y[d];g=m.GuildModel.getIns().getProfessionString(f.profession);s=app.getLang("qianghongbao_history_0",g,f.name,f.gold);i.push({desc:s,time:f.time})}}}i.sort(this.timeSort);this.event(m.GuildRedPackView.REDPACK_RECORDS_UPDATE,[i])};i.prototype.timeSort=function(t,e){if(t.time<e.time)return-1;if(t.time>e.time)return 1;return 0};i.prototype.getGuildRedPack=function(){var t=[];if(this.guildVO){var e=this.guildVO.guildInf.chiefID;for(var i=0,n=this.gInfo;i<n.length;i++){var r=n[i];if(r.rptype==1&&Uint64.equal(r.ownerid,e)){var o=csv.GuildProxy.getIns().getRedPackCfg(r.rptype).time;var a=r.time+parseInt(o);var s=a-game.Context.getServerTime();if(s>0){var l=false;for(var u=0,p=r.list;u<p.length;u++){var h=p[u];if(Uint64.equal(h.id,game.Context.mainRoleId)){l=true;break}}if(!l&&r.lcount>0){t.push(r)}}}}}return t};i.prototype.getGuildData=function(){return this.guildVO};i.prototype.updateGuildTask=function(t){if(this.guildTask==null){this.guildTask=new m.GuildTaskVO}this.guildTask.updateVO(t);this.event(m.GuildTaskView.UPDATE_GUILD_TASKNTF)};i.prototype.onGuildTaskStarAwardAck=function(t){this.guildTask.staraward=t;this.event(m.GuildTaskView.UPDATE_GUILD_STARAWARD)};i.prototype.canReqAward=function(t){return this.guildTask.staraward.indexOf(t)==-1};i.prototype.getedAward=function(t){return this.guildTask.staraward.indexOf(t)>=0};i.prototype.onHelpGuildQuestAck=function(t){this.guildTask.onHelpGuildQuestAck(t);this.event(m.GuildTaskView.UPDATE_GUILD_TASKNTF)};i.prototype.updateNotice=function(t){if(t.length==0){t=app.getLang("family_7_2")}this.guildVO.guildNotice=t};i.prototype.updateJoinInfArr=function(t){this.guildJoinInfArr=t;this.event(n.EVENT.GUILDJOINLIST_UPDATE)};i.prototype.updateMemSword=function(t){this.guildVO.guildInf.memSword=t};i.prototype.updateGuildInfAck=function(t){this.guildVO.updateGuildInfAck(t)};i.prototype.updateGuildChiefAck=function(t){this.guildVO.updateGuildChiefAck(t);this.event(n.EVENT.GUILDMEMBERINFO_UPDATE)};i.prototype.updateGuildMemberList=function(t){t.sort(this.sortMember);this.guildVO.memberList=t;this.event(n.EVENT.GUILDMEMBERLIST_UPDATE)};i.prototype.sortMember=function(t,e){if(t.logoutTime==0&&e.logoutTime>0){return-1}if(t.logoutTime>0&&e.logoutTime==0){return 1}if(t.logoutTime==0&&e.logoutTime==0){if(t.profession>e.profession){return-1}if(t.profession<e.profession){return 1}if(t.devote>e.devote){return-1}if(t.devote<e.devote){return 1}}else{if(t.profession>e.profession){return-1}if(t.profession<e.profession){return 1}if(t.logoutTime<e.logoutTime){return-1}if(t.logoutTime>e.logoutTime){return 1}if(t.logoutTime<e.logoutTime){return-1}if(t.logoutTime>e.logoutTime){return 1}if(t.devote>e.devote){return-1}if(t.devote<e.devote){return 1}}return Uint64.compare(t.swordScore,e.swordScore)};i.prototype.updateGuildSelfAck=function(t){this.guildVO.guildSelfInf=t;if(this.guildVO.guildSelfInf.profession==m.POSITION_ENUM.CLAN){for(var e in this.guildVO.memberList){if(this.guildVO.memberList[e].profession==m.POSITION_ENUM.CLAN){this.guildVO.memberList[e].profession=m.POSITION_ENUM.MEMBER;break}}for(var e in this.guildVO.memberList){if(Uint64.equal(this.guildVO.memberList[e].playerID,game.Context.mainRoleId)){this.guildVO.memberList[e].profession=t.profession;break}}this.guildVO.memberList.sort(this.sortMember);this.event(n.EVENT.GUILDMEMBERLIST_UPDATE)}};i.prototype.updateGuildListInf=function(t){this.guildInfoList=t};i.prototype.creatGuildCheck=function(t){var e=game.ItemUtil.parserList(game.Config.getParams(200))[0];var i=game.GridsModel.getIns().hasEnoughItems(e);if(t.length==0){game.Alert.show(app.getLang("family_tip_0"));return false}var n=parseInt(app.str2Array(game.Config.getParams(201),";")[1]);if(t.length>n){game.Alert.show(app.getLang("family_tip_4",n));return false}for(var r=0,o=this.guildInfoList;r<o.length;r++){var a=o[r];var s=a.guildName;var l=a.guildName.indexOf(".");if(l>0){s=s.substring(l+1)}if(s==t){manager.FlowManager.instance.flowByStyle1(app.getLang("family_tip_3",e.getName()));return false}}if(!i){shop.ShopModel.getIns().askChongZhi();return false}return true};i.prototype.createGuildVO=function(t){if(!this.guildVO){this.guildVO=new m.GuildVO}this.guildVO.init(t);this.isGuild=true;this.event(m.GuildEvent.EVENT.GUILD_STATE_CHANGE);if(app.ViewManager.DisplayedInStage(m.GuildListView.SINGLE_KEY)){if(Uint64.equal(game.Context.mainRoleId,this.guildVO.guildInf.chiefID)){app.ViewManager.toggleDialog(m.GuildCreateTipView,-1);game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true);manager.FlowManager.instance.flowByStyle1(app.getLang("family_84"))}else{game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.GUILD_FUN,true,true);manager.FlowManager.instance.flowByStyle1(app.getLang("family_91"))}}};i.prototype.destoryGuild=function(){this.guildVO=null;this.isGuild=false;this.guildIDs=[];this.helptime=0;this.event(m.GuildEvent.EVENT.GUILD_STATE_CHANGE);m.GuildController.getIns().onFunctionRedDotChange()};i.prototype.isInGuildIDs=function(t){var e=false;for(var i in this.guildIDs){if(Uint64.equal(this.guildIDs[i],t)){e=true;break}}return e};i.prototype.setGuildIDs=function(t){var e=false;if(t.length>0){for(var i in t){if(!this.isInGuildIDs(t[i])){this.guildIDs.push(t[i]);e=true}}if(e){this.event(n.EVENT.GUILDIDS_UPDATE)}}else{this.guildIDs=t;this.event(n.EVENT.GUILDIDS_UPDATE)}};i.prototype.onJoinGuild=function(t){var e=true;for(var i in this.guildIDs){if(Uint64.equal(this.guildIDs[i],t)){e=false;break}}if(e){this.guildIDs.push(t)}return e};i.prototype.isLimits=function(){if(this.guildVO.guildSelfInf.profession>m.POSITION_ENUM.MEMBER){return true}else{return false}};i.prototype.isLimitsHigh=function(){if(this.guildVO&&this.guildVO.guildSelfInf.profession>m.POSITION_ENUM.ELDER){return true}else{return false}};i.prototype.isClan=function(){return this.guildVO.guildSelfInf.profession==m.POSITION_ENUM.CLAN};i.prototype.isAssClan=function(){return this.guildVO.guildSelfInf.profession==m.POSITION_ENUM.ASS_CLAN};i.prototype.hasChief=function(){return!Uint64.equal(this.guildVO.chiefID,Uint64.ZERO)||this.guildVO.chiefName.length>0};i.prototype.getProfessionString=function(t){var e;if(t==m.POSITION_ENUM.MEMBER){e="family_14"}else if(t==m.POSITION_ENUM.ELDER){e="family_13"}else if(t==m.POSITION_ENUM.ASS_CLAN){e="family_12"}else if(t==m.POSITION_ENUM.CLAN){e="family_11"}return app.getLang(e)};i.prototype.isOnile=function(t){var e;if(t==0){return true}else{return false}};i.prototype.requestCheck=function(t,e,i){var n="";var r=csv.GuildProxy.getIns().getBaseCfg(t);if(m.GuildModel.getIns().isGuild){n="family_75"}else if(game.Context.score<i){n="family_2"}else if(e>=r.people){n="family_1"}return n};i.prototype.updateBuildLevel=function(t){switch(t.buildID){case m.GUILD_BUILD_ENUM.LOBBY:t.update(this.guildVO.getLobbylevel());break;case m.GUILD_BUILD_ENUM.BOSS:t.update(this.guildVO.getBuildlevel(),csv.ActivityFunction.ENUM.GUILD_BOSS);break;case m.GUILD_BUILD_ENUM.SHOP:t.update(this.guildVO.getShopLevel());break;case m.GUILD_BUILD_ENUM.HULU_PICK:t.update(0,csv.ActivityFunction.ENUM.HULU_PICk);break;case m.GUILD_BUILD_ENUM.HULU_DEFINE:t.update(0,csv.ActivityFunction.ENUM.SHOU_HU);break;case m.GUILD_BUILD_ENUM.GUILD_BOSS:t.update(0,csv.ActivityFunction.ENUM.GUILD_BOSS);break;default:t.update(0)}};i.prototype.onGuildTechNtf=function(t){for(var e=0;e<t.length;e++){for(var i=1;i<=5;i++){var n=this.getInfoBySid(t[e].skill,i);if(!n){n=new GuildSkillInf;n.sid=i;n.lv=0;t[e].skill.push(n)}}}this.skillInfVO.tech=t};i.prototype.getInfoBySid=function(t,e){var i;for(var n in t){if(t[n].sid==e){i=t[n];break}}return i};i.prototype.onChangeGuildTechNtf=function(t){for(var e=0,i=this.skillInfVO.tech;e<i.length;e++){var n=i[e];if(t.pos==n.pos){for(var r=0;r<t.skill.length;r++){for(var o=0;o<n.skill.length;o++){if(t.skill[r].sid==n.skill[o].sid){n.skill[o]=t.skill[r];break}}}}}this.event(m.GuildTechView.CHANGE_GUILD_TECH_NTF)};i.prototype.getGuildSkillVO=function(t){var e=[];for(var i=0,n=this.skillInfVO.tech;i<n.length;i++){var r=n[i];if(r.pos==t){e=r.skill.sort(this.sortBySid);break}}for(var o=0;o<5;o++){if(e[o]==null){e.push(null)}}return e};i.prototype.sortBySid=function(t,e){if(t.sid<e.sid)return-1;if(t.sid>e.sid)return 1;return 0};i.prototype.isFunOpended=function(t,e){var i=this.getFunOpenLevel(t);var n=m.GuildModel.getIns().guildVO.guildInf.level>=i;if(n){if(t==m.GUILD_BUILD_ENUM.BOSS){n=csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.GUILD_TECH,e)}else if(t==m.GUILD_BUILD_ENUM.TASK){n=csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.GUILD_TASK,e)}}else if(e){var r=m.GuildModel.getIns().getFunOpenLevel(t);manager.FlowManager.instance.flowByStyle1(app.getLang("func_er_8",r))}return n};i.prototype.getFunOpenLevel=function(t){return csv.GuildProxy.getIns().getGuildFunCfg(t).guildlevel};i.prototype.updateGuildTreasure=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];var r=this.getGuildAWardDB(n.awardid);if(r){r=n}else{this.guildTreasure.push(n)}}this.event(m.GuildTreasureView.UPDATE_TREASURE)};i.prototype.getGuildAWardDB=function(t){var e=null;for(var i=0;i<this.guildTreasure.length;i++){if(t==this.guildTreasure[i].awardid){e=this.guildTreasure[i];break}}return e};i.prototype.onGuildQuestAck=function(t){this.helpTask=t;this.helpTask.sort(this.sortTask);m.GuildController.getIns().onFunctionRedDotChange();this.event(n.EVENT.GUILD_QUEST_ACK)};i.prototype.onGuildTaskHelpAck=function(t){this.record=t;this.record.sort(this.sortTaskHelp);this.event(n.EVENT.GUILD_TASKHELP_ACK)};i.prototype.sortTaskHelp=function(t,e){if(t.ctime<e.ctime)return-1;if(t.ctime>e.ctime)return 1;return 0};i.prototype.sortTask=function(t,e){var i=Uint64.equal(game.Context.mainRoleId,t.uid);var n=Uint64.equal(game.Context.mainRoleId,e.uid);if(i&&!n)return-1;if(!i&&n)return 1;if(t.stime<e.stime)return-1;if(t.stime>e.stime)return 1;return 0};i.prototype.delGuildTreasure=function(n){for(var r in n){this.guildTreasure.forEach(function(t,e,i){if(n[r]===t.awardid){i.splice(e,1)}})}};i.prototype.onGainGuildTreasure=function(t,e){this.event(m.GuildTreasureView.GAIN_TREASURE,[t,e])};i.prototype.setIcon=function(t,e){var i=t.width;var n=t.height;t.skin=e;t.width=i;t.height=n};i.prototype.getMemberNum=function(t){var e=0;var i=this.guildVO.memberList;for(var n=0,r=i;n<r.length;n++){var o=r[n];if(o.profession==t){++e}}return e};i.prototype.callBackHandler=function(t){m.GuildController.getIns().onOperateGuildReq(t,1,m.POSITION_ENUM.CLAN)};i.prototype.kickOff=function(t){m.GuildController.getIns().onOperateGuildReq(t,3,0)};i.prototype.action=function(t){var e=t.data.playerData;switch(t.label){case app.getLang("family_11"):game.Alert.show(app.getLang("family_78",e.playerName),new Laya.Handler(this,i.getIns().callBackHandler,[e.playerID]),new Laya.Handler);break;case app.getLang("family_12"):case app.getLang("family_13"):case app.getLang("family_30"):m.GuildController.getIns().onOperateGuildReq(e.playerID,2,t.data.position);break;case app.getLang("family_25"):chat.ChatModel.getIns().showSiLiaoAlert([e.playerID,e.playerName]);break;case app.getLang("family_26"):app.ProtocolRequest.GetShowPlayerReq(e.playerID);break;case app.getLang("family_27"):if(friend.FriendModel.getIns().containsFridenList(e.playerID)){manager.FlowManager.instance.flowByStyle1(app.getLang("family_80",e.playerName))}else{app.ProtocolRequest.friendListAddReq(e.playerID)}break;case app.getLang("family_28"):if(friend.FriendModel.getIns().containsBlackList(e.playerID)){manager.FlowManager.instance.flowByStyle1(app.getLang("family_79",e.playerName))}else{game.Alert.show(app.getLang("friend_7",e.playerName),new Laya.Handler(this,app.ProtocolRequest.BlackListAddReq,[e.playerID]),new Laya.Handler)}break;case app.getLang("family_29"):game.Alert.show(app.getLang("family_81",e.playerName),new Laya.Handler(this,i.getIns().kickOff,[e.playerID]),new Laya.Handler);break}};i.SINGLE_KEY="guild.GuildModel";return i}(app.ModelBase);m.GuildModel=t;var n=function(){function t(){}t.EVENT={GUILDLISTINFO_UPDATE:"GUILDLISTINFO_UPDATE",GUILDMEMBERLIST_UPDATE:"GUILDMEMBERLIST_UPDATE",GUILDSWORD_UPDATE:"GUILDSWORD_UPDATE",GUILDMEMBERINFO_UPDATE:"GUILDMEMBERINFO_UPDATE",GUILDJOINLIST_UPDATE:"GUILDJOINLIST_UPDATE",GUILDNOTICE_UPDATE:"GUILDNOTICE_UPDATE",GUILD_SELF_INFO_UPDATE:"GUILD_SELF_INFO_UPDATE",JOIN_GUILD_ACK:"JOIN_GUILD_ACK",UPDATE_GUILD_LIST:"UPDATE_GUILD_LIST",GUILD_STATE_CHANGE:"GUILD_STATE_CHANGE",GUILD_QUEST_ACK:"GUILD_QUEST_ACK",GUILD_OPERATE_ACK:"GUILD_OPERATE_ACK",GUILDIDS_UPDATE:"guild.guildIDsUpdate",GUILD_MALLRECORD_UPDATE:"GUILD_MALLRECORD_UPDATE",GUILD_TASKHELP_ACK:"GUILD_TASKHELP_ACK"};return t}();m.GuildEvent=n;var e;(function(t){t[t["MEMBER"]=0]="MEMBER";t[t["ELDER"]=1]="ELDER";t[t["ASS_CLAN"]=2]="ASS_CLAN";t[t["CLAN"]=3]="CLAN"})(e=m.POSITION_ENUM||(m.POSITION_ENUM={}))})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){this.cfgMap=app.Config.getResById("guildbase.csv").getMap("level");this.cfgShop=app.Config.getResById("guildshop.csv").getMap("id");this.shopItems=app.Config.getResById("guildshop.csv").getMapList("shopid");this.cfgShopLevel=app.Config.getResById("guildshoplevel.csv").getArray();this.cfgDonate=app.Config.getResById("guilddonate.csv").getMap("id");this.cfgLobby=app.Config.getResById("guildlobby.csv").getMap("level");this.cfgTech=app.Config.getResById("guildtech.csv").getMap("level");this.cfgTechAttr=app.Config.getResById("guildtechattr.csv").getMapList("type");this.cfgGuildtaskStar=app.Config.getResById("guildtaskstar.csv").getArray();var t=app.Config.getResById("guildtask.csv");this.cfgGuildtask=t.getMap("task_id");this.tasks=t.getArray();this.cfgGuildtreasure=app.Config.getResById("guildtreasure.csv").getMap("id");this.guildfunctionMap=app.Config.getResById("guildfunction.csv").getMap("function");this.funIdLength=Object.keys(this.guildfunctionMap).length;this.guildredPack=app.Config.getResById("hongbao.csv").getMap("id")};e.prototype.getRedPackCfg=function(t){return this.guildredPack[t]};e.prototype.getMaxGuildLevel=function(){return Object.keys(this.cfgMap).length};e.prototype.getGuildFunCfg=function(t){return this.guildfunctionMap[t]};e.prototype.getBaseCfg=function(t){return this.cfgMap[t]};e.prototype.getGuildshopCfg=function(t){return this.cfgShop[t]};e.prototype.getShopItemsByLevel=function(t){var e=[];if(this.shopItems[t]){e=this.shopItems[t]}for(var i=0,n=e.length;i<n;i++){if(e[i]){var r=false;if(e[i].type==2){r=true}else if(e[i].counttype==3){for(var o=0,a=guild.GuildModel.getIns().recordList;o<a.length;o++){var s=a[o];if(s.mallID==e[i].id&&s.total>=e[i].count){r=true;break}}}if(r){e.splice(i,1);i--}}}for(var i=0;i<guild.GuildModel.getIns().randList.length;i++){var l=csv.GuildProxy.getIns().getGuildshopCfg(guild.GuildModel.getIns().randList[i]);if(l&&l.shopid==t){e.push(l)}}return e};e.prototype.getShopLevelArray=function(){return this.cfgShopLevel};e.prototype.getUlockLevel=function(t){var e=1;for(var i=0;i<this.cfgShopLevel.length;i++){if(this.cfgShopLevel[i].id==t){e=this.cfgShopLevel[i].ulock;break}}return e};e.prototype.getMaxShopLevel=function(){return this.cfgShopLevel[this.cfgShopLevel.length-1].id};e.prototype.getGuildshopLevelCfg=function(t){var e=1;for(var i=this.cfgShopLevel.length-1;i>=0;i--){if(t>=this.cfgShopLevel[i].ulock){e=this.cfgShopLevel[i].id;break}}return e};e.prototype.getMoneyDonateCount=function(){var t=0;for(var e in this.cfgDonate){if(this.cfgDonate[e].goldcost&&this.cfgDonate[e].goldcost.length>0){++t}else{break}}return t};e.prototype.getDiamondDonateCount=function(){var t=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.GUILD_BUILD_TIME,vipcode.VipModel.getIns().vipLvl);return t};e.prototype.getDonateAward=function(){return this.cfgDonate[1].goldreward};e.prototype.getDonateCfg=function(t){return this.cfgDonate[t]};e.prototype.getLobbyCfg=function(t){return this.cfgLobby[t]};e.prototype.getTechCfg=function(t){return this.cfgTech[t]};e.prototype.getMaxTechLevel=function(){return Object.keys(this.cfgTech).length};e.prototype.getTechAttr=function(t,e){var i=this.cfgTechAttr[t];for(var n in i){if(parseInt(i[n].level)==e){return i[n]}}return null};e.prototype.getTechMaxLevel=function(t){var e=this.getMaxTechLevel();var i=this.getTechCfg(e);var n=0;var r=i.limit;var o=app.str2Array(r,";","-");for(var a=0;a<o.length;a++){if(parseInt(o[a][0])==t){n=parseInt(o[a][1]);break}}return n};e.prototype.getTechLimitLevel=function(t,e){var i=this.getTechCfg(e);var n=0;var r=i.limit;var o=app.str2Array(r,";","-");for(var a=0;a<o.length;a++){if(parseInt(o[a][0])==t){n=parseInt(o[a][1]);break}}return n};e.prototype.getTask=function(t){return this.cfgGuildtask[t]};e.prototype.getTaskStar=function(){return this.cfgGuildtaskStar};e.SINGLE_KEY="csv.GuildProxy";return e}(app.ModelBase);t.GuildProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.onRPInfoReq=function(t){};e.prototype.onRPGetReq=function(t){};e.prototype.onRPHistoryReq=function(t){};e.prototype.onRPSendReq=function(t,e,i){};e.SINGLE_KEY="guild.GuildRedBagProxy";return e}(app.ModelBase);t.GuildRedBagProxy=e})(guild||(guild={}));var guild;(function(i){var t=function(){function t(){this._redTipArr=[]}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.pushTipArr=function(t){if(this._redTipArr.indexOf(t)==-1){this._redTipArr.push(t);if(t==i.FamilyRedTip.REDTIP_ENUM.SHENGQING_LIST){i.GuildInfoView.getIns().onUpdateRedTip(1);game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_INFO)}}};t.prototype.delTipArr=function(t){if(this._redTipArr.indexOf(t)>-1){for(var e=0;e<this._redTipArr.length;e++){if(this._redTipArr[e]==t){this._redTipArr.splice(e,1);break}}if(t==i.FamilyRedTip.REDTIP_ENUM.SHENGQING_LIST){i.GuildInfoView.getIns().onUpdateRedTip(0);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_INFO)}}};t.prototype.haveTipArrByID=function(t){return this._redTipArr.indexOf(t)>-1};t.prototype.isHaveTipArr=function(){return this._redTipArr.length>0};t.REDTIP_EVENT={UPDATA_REDTIP:"UPDATA_REDTIP"};t.REDTIP_ENUM={JOIN_NEW_FAMILY:1,SHENGQING_LIST:2,SKILL_REDTIP:3,JIBAI_REDTIP:4,YUNSHU_REDTIP:5,FUBEN_REDTIP:6};return t}();i.FamilyRedTip=t})(guild||(guild={}));var guild;(function(t){var e=function(){function t(){this.memberList=[]}t.prototype.init=function(t){this.guildInf=t.guildInf[0];this.guildSelfInf=t.guildSelfInf[0];this.guildNotice=t.guildNotice;this.guildGold=t.guildGold;this.dailyGold=t.dailyGold;this.shoplevel=t.shoplevel;this.buildlevel=t.buildlevel;this.guildRpGold=t.guildRpGold};t.prototype.updateGuildChiefAck=function(t){this.chiefID=t.chiefID;this.chiefName=t.chiefName;this.guildInf.chiefID=t.chiefID;this.guildInf.chiefName=t.chiefName};t.prototype.updateGuildInfAck=function(t){if(t.level>this.guildInf.level){var e={t:app.getLang("guild_tips2",t.level),channel:3};chat.ChatModel.getIns().dellSysNotice(e)}this.guildInf.level=t.level;this.guildInf.members=t.members;this.guildInf.guildName=t.gName;this.score=t.score;this.guildGold=t.guildGold;this.dailyGold=t.dailyGold;this.shoplevel=t.shoplevel;this.buildlevel=t.buildlevel;this.guildRpGold=t.guildRpGold};t.prototype.getShopLevel=function(){return csv.GuildProxy.getIns().getGuildshopLevelCfg(this.getLobbylevel())};t.prototype.getLobbylevel=function(){return this.guildInf.level};t.prototype.getBuildlevel=function(){return this.buildlevel?this.buildlevel:1};return t}();t.GuildVO=e;var i=function(){function t(){}return t}();t.GuildSkillInfVO=i;var n=function(){function t(){this.donetask=0;this.taskinf=[];this.freenum=0;this.goldnum=0;this.starnum=0;this.staraward=[];this.guildhelp=0}t.prototype.updateVO=function(t){this.donetask=t.donetask;this.taskinf=t.taskinf;this.freenum=t.freenum;this.goldnum=t.goldnum;this.starnum=t.starnum;this.staraward=t.staraward;this.guildhelp=t.guildhelp};t.prototype.getTaskByPos=function(t){for(var e in this.taskinf){if(this.taskinf[e].pos==t){return this.taskinf[e]}}return null};t.prototype.onHelpGuildQuestAck=function(t){for(var e in this.taskinf){if(this.taskinf[e].taskindex==t){this.taskinf[e].helpflag=1;break}}};return t}();t.GuildTaskVO=n})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(e){var t=function(i){__extends(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnchuangjian.clickHandler=new Laya.Handler(this,this.onGuildCreate);var t=app.str2Array(game.Config.getParams(201),";")[1];this.labelbanghuiname.maxChars=parseInt(t);var e=game.ItemUtil.parserList(game.Config.getParams(200))[0];this.imgmoney.parserIcon(game.Config.getParams(200));this.labelmoneynum.text=e.count+""};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.imgmoney.parserIcon(game.Config.getParams(200))};t.prototype.onGuildCreate=function(){var t=this.labelbanghuiname.text;if(e.GuildModel.getIns().creatGuildCheck(t)){e.GuildController.getIns().onCreateGuildReq(t)}};t.SINGLE_KEY="guild.GuildCreateTipView";return t}(ui.banghui.chuangjianbanghuitipUI);e.GuildCreateTipView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(o){var t=function(n){__extends(r,n);function r(){return n!==null&&n.apply(this,arguments)||this}r.getIns=function(){return app.Singleton.getInstance(r)};r.prototype.initialize=function(){n.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);var t=csv.GuildProxy.getIns().funIdLength;var e;for(var i=1;i<=t;i++){if(this["area"+i]){this["area"+i].on(Laya.Event.CLICK,this,this.btnBuildClick)}e=this["family_build_"+i];e&&e.init(i)}this.updateData(null);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BANGHUI_DATING,this.area1);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BANGHUI_SHOP,this.area5)};r.prototype.updateData=function(t){if(t){this.labelname.text=game.Context.getGuildName(t.guildInf.guildName);this.labelmoney.text=game.MoneyModel.format(t.guildGold);this.labellv.text=app.getLang("zuoqi_11")+t.guildInf.level;var e=csv.GuildProxy.getIns().funIdLength;for(var i=1;i<=e;i++){o.GuildModel.getIns().updateBuildLevel(this["family_build_"+i]);this.onRedDotUpdate(i)}}else{this.labelname.text="";this.labelmoney.text="";this.labellv.text=""}};r.prototype.onDisplay=function(){o.GuildController.getIns().onOpenGuildReq();r.getIns().on(r.SHOW_BUILD_VIEW,this,this.onShowBuildView);game.Context.on(o.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.onGuildSelfInfoUpdate);o.GuildModel.getIns().on(r.RED_DOT_UPDATE,this,this.onRedDotUpdate);o.GuildModel.getIns().on(o.GuildEvent.EVENT.GUILD_QUEST_ACK,this,this.redDotTaskView);game.Context.on(o.GuildHallView.GUILD_UPDATE_RECORD_TIME,this,this.onGuildSelfInfoUpdate);o.GuildModel.getIns().on(o.GuildTaskView.UPDATE_GUILD_TASKNTF,this,this.redDotTaskView);this.callLater(this.refreshAll)};r.prototype.onUnDisplay=function(){r.getIns().off(r.SHOW_BUILD_VIEW,this,this.onShowBuildView);game.Context.off(o.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.onGuildSelfInfoUpdate);o.GuildModel.getIns().off(r.RED_DOT_UPDATE,this,this.onRedDotUpdate);o.GuildModel.getIns().off(o.GuildEvent.EVENT.GUILD_QUEST_ACK,this,this.redDotTaskView);game.Context.off(o.GuildHallView.GUILD_UPDATE_RECORD_TIME,this,this.onGuildSelfInfoUpdate);o.GuildModel.getIns().off(o.GuildTaskView.UPDATE_GUILD_TASKNTF,this,this.redDotTaskView)};r.prototype.btnBuildClick=function(t){t.stopPropagation();var e=t.currentTarget;var i=0;switch(e){case this.area1:i=1;break;case this.area2:i=2;break;case this.area3:i=3;break;case this.area4:i=4;break;case this.area5:i=5;break;case this.area6:i=6;break;case this.area7:i=7;break;case this.area8:i=8;break;case this.area9:i=9;break}if(i>0){r.getIns().event(r.SHOW_BUILD_VIEW,i)}};r.prototype.refreshAll=function(){this.onGuildSelfInfoUpdate();var t;for(var e=1;e<=6;e++){t=this["family_build_"+e];game.RedDotView.removeFrom(t)}this.redDotHallView();this.redDotTreasureView();this.redDotTechView();this.redDotShopView();this.redDotTaskView();this.redDotRedBagView();this.redDotHuluPick();this.redDotGuildDefend();if(o.GuildModel.getIns().open_shop){app.ViewManager.toggleDialog(o.GuildShopView,1,0);o.GuildModel.getIns().open_shop=false}};r.prototype.redDotShopView=function(){if(o.GuildController.getIns().redDotShopView()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.SHOP])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.SHOP])}};r.prototype.redDotHallView=function(){if(o.GuildController.getIns().redDotHallView()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.LOBBY])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.LOBBY])}};r.prototype.redDotTreasureView=function(){if(o.GuildController.getIns().redDotTreasureView()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.HOUSEWARE])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.HOUSEWARE])}};r.prototype.redDotTechView=function(){if(o.GuildController.getIns().redDotTechView()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.BOSS])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.BOSS])}};r.prototype.redDotTaskView=function(){if(o.GuildController.getIns().redDotTask()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.TASK])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.TASK])}};r.prototype.redDotRedBagView=function(){if(o.GuildController.getIns().redDotRedBag()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.RED_BAG])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.RED_BAG])}};r.prototype.redDotHuluPick=function(){if(hulupick.HuluPickModel.getIns().isShowHuluPickRedDot()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.HULU_PICK])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.HULU_PICK])}};r.prototype.redDotGuildDefend=function(){var t=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.SHOU_HU);if(t){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.HULU_DEFINE])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.HULU_DEFINE])}};r.prototype.redDotGuildBoss=function(){if(guildboss.GuildBossModel.getIns().isShowRedDot()){game.RedDotView.addTo(this["family_build_"+o.GUILD_BUILD_ENUM.GUILD_BOSS])}else{game.RedDotView.removeFrom(this["family_build_"+o.GUILD_BUILD_ENUM.GUILD_BOSS])}};r.prototype.onRedDotUpdate=function(t){switch(t){case o.GUILD_BUILD_ENUM.LOBBY:this.redDotHallView();this.redDotTechView();this.redDotShopView();break;case o.GUILD_BUILD_ENUM.BOSS:this.redDotTechView();break;case o.GUILD_BUILD_ENUM.SHOP:this.redDotShopView();break;case o.GUILD_BUILD_ENUM.HOUSEWARE:this.redDotTreasureView();break;case o.GUILD_BUILD_ENUM.TASK:this.redDotTaskView();break;case o.GUILD_BUILD_ENUM.RED_BAG:this.redDotRedBagView();break;case o.GUILD_BUILD_ENUM.HULU_PICK:this.redDotHuluPick();break;case o.GUILD_BUILD_ENUM.HULU_DEFINE:this.redDotGuildDefend();break;case o.GUILD_BUILD_ENUM.GUILD_BOSS:this.redDotGuildBoss();break}o.GuildController.getIns().onFunctionRedDotChange()};r.prototype.onGuildSelfInfoUpdate=function(){this._model=o.GuildModel.getIns();var t=this._model.getGuildData();this.updateData(t)};r.prototype.onShowBuildView=function(t){if(o.GuildModel.getIns().isFunOpended(t,false)){if(csv.GuildProxy.getIns().getGuildFunCfg(t).open==1){switch(t){case o.GUILD_BUILD_ENUM.LOBBY:app.ViewManager.toggleDialog(o.GuildHallView,1,0);break;case o.GUILD_BUILD_ENUM.BOSS:this.check(t,csv.FunctionsProxy.ENUMS.GUILD_TECH);break;case o.GUILD_BUILD_ENUM.TASK:app.ViewManager.toggleDialog(o.GuildTaskMainView,1,0);break;case o.GUILD_BUILD_ENUM.HOUSEWARE:app.ViewManager.toggleDialog(o.GuildTreasureView,1,0);break;case o.GUILD_BUILD_ENUM.SHOP:app.ViewManager.toggleDialog(o.GuildShopView,1,0);break;case o.GUILD_BUILD_ENUM.RED_BAG:this.check(t,csv.FunctionsProxy.ENUMS.REDPACK_GUILD);break;case o.GUILD_BUILD_ENUM.HULU_PICK:this.check(t,csv.FunctionsProxy.ENUMS.HULU_PICK);break;case o.GUILD_BUILD_ENUM.HULU_DEFINE:game.ClosureManager.callFunction(csv.FunctionsProxy.ENUMS.SHOUHU_HULU);break;case o.GUILD_BUILD_ENUM.GUILD_BOSS:this.check(t,csv.FunctionsProxy.ENUMS.GUILDBOSS);break}}}};r.prototype.check=function(t,e){game.ClosureManager.callFunction(e)};r.SINGLE_KEY="guild.GuildFunView";r.SHOW_BUILD_VIEW="showBuildView";r.RED_DOT_UPDATE="guild.GuildFunView.RedDotUpdate";return r}(ui.banghui.banghuigongnengviewUI);o.GuildFunView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwanjiaxinxi.itemRender=i.GuildMemberItem;this.listwanjiaxinxi.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listwanjiaxinxi.selectEnable=true;this.listwanjiaxinxi.vScrollBarSkin=" ";this.listwanjiaxinxi.array=[];this.btnshenqingliebiao.clickHandler=new Laya.Handler(this,this.onShowApplyList);this.btngaiming.clickHandler=new Laya.Handler(this,this.changeName);this.setTitle(null);this.txtbanghuigonggao.overflow="hidden"};e.prototype.changeName=function(){app.ViewManager.toggleDialog(i.GuildModifyName,1,0)};e.prototype.setTitle=function(t){if(t){this.labelname01.text=game.Context.getGuildName(t.guildInf.guildName);this.labelname02.text=t.guildInf.chiefName;this.labellv.text=app.getLang("zuoqi_11")+t.guildInf.level;var e=csv.GuildProxy.getIns().getLobbyCfg(t.guildInf.level);var i=e?parseInt(e.p1)*.01:0;this.labeljiacheng.text=i+"%";this.txtbanghuigonggao.text=t.guildNotice;if(Uint64.equal(t.guildInf.chiefID,Uint64.ZERO)){this.txtbanghuigonggao.text="family_7_4"}if(this.txtbanghuigonggao.text.length==0){this.txtbanghuigonggao.text=app.getLang("family_7_2")}}else{this.labelname01.text="";this.labelname02.text="";this.labellv.text="";this.labeljiacheng.text="";this.txtbanghuigonggao.text=""}};e.prototype.onDisplay=function(){i.GuildModel.getIns().on(i.GuildEvent.EVENT.GUILDMEMBERLIST_UPDATE,this,this.onMemberListUpdata);i.GuildModel.getIns().on(i.GuildEvent.EVENT.GUILDNOTICE_UPDATE,this,this.onNoticeUpdate);i.GuildModel.getIns().on(i.GuildEvent.EVENT.JOIN_GUILD_ACK,this,this.onJoinGuildAck);i.GuildModel.getIns().on(i.GuildEvent.EVENT.GUILDMEMBERINFO_UPDATE,this,this.refreshAll);this.on(Laya.Event.CLICK,this,this.onMenuHide);i.GuildController.getIns().onGuildMemberListReq();this.onLimits();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){i.GuildModel.getIns().off(i.GuildEvent.EVENT.GUILDMEMBERLIST_UPDATE,this,this.onMemberListUpdata);i.GuildModel.getIns().off(i.GuildEvent.EVENT.GUILDNOTICE_UPDATE,this,this.onNoticeUpdate);i.GuildModel.getIns().off(i.GuildEvent.EVENT.JOIN_GUILD_ACK,this,this.onJoinGuildAck);i.GuildModel.getIns().off(i.GuildEvent.EVENT.GUILDMEMBERINFO_UPDATE,this,this.refreshAll);common.CommonMenu.getIns().hideAll()};e.prototype.refreshAll=function(){var t=i.GuildModel.getIns().getGuildData();this.setTitle(t)};e.prototype.onJoinGuildAck=function(){i.GuildController.getIns().onGuildMemberListReq()};e.prototype.onMenuHide=function(){common.CommonMenu.getIns().hideAll()};e.prototype.onShowPayView=function(){};e.prototype.onEditNotice=function(){if(i.GuildModel.getIns().isLimitsHigh()){app.ViewManager.toggleDialog(i.GuildNoticeEditView,1,0)}};e.prototype.onShowApplyList=function(){if(i.GuildModel.getIns().isLimits()){app.ViewManager.toggleDialog(i.GuildApplyListView,1,0)}};e.prototype.onUpdateRedTip=function(t){if(1==t){game.RedDotView.addTo(this.btnshenqingliebiao)}else{game.RedDotView.removeFrom(this.btnshenqingliebiao)}};e.prototype.onLimits=function(){this.btnshenqingliebiao.visible=i.GuildModel.getIns().isLimits();this.btngaiming.visible=i.GuildModel.getIns().isClan();this.imgbangzhu.visible=!i.GuildModel.getIns().hasChief()};e.prototype.onNoticeUpdate=function(){this.txtbanghuigonggao.text=i.GuildModel.getIns().getGuildData().guildNotice};e.prototype.onMemberListUpdata=function(){this.listwanjiaxinxi.array=i.GuildModel.getIns().getGuildData().memberList};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.SINGLE_KEY="guild.GuildInfoView";return e}(ui.banghui.banghuixinxiviewUI);i.GuildInfoView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listbanghui.itemRender=s.GuildListItem;this.listbanghui.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listbanghui.selectEnable=true;this.listbanghui.vScrollBarSkin=" ";this.btnchazhao.clickHandler=new Laya.Handler(this,this.onSearch);this.btnchuangjianbanghui.clickHandler=new Laya.Handler(this,this.onCreate);this.btnyijianshenqing.clickHandler=new Laya.Handler(this,this.onQuickJoin);this.btntuichubanghui.clickHandler=new Laya.Handler(this,this.onGuildOut);this.showBtn(false);this.listbanghui.array=[];this.textshuru.prompt=app.getLang("family_tip_1");this.textshuru.on(Laya.Event.INPUT,this,this.onInputChange)};e.prototype.checkAddFirstGuide=function(){if(!s.GuildModel.getIns().isGuild){var t=this.parent.localToGlobal(new Laya.Point(this.x+450,this.y+90));guide.GuideBubbleItem2.getIns().add(app.getLang("yindao_text4"),t.x,t.y,170,700,1)}};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e)};e.prototype.onGuildOut=function(){s.GuildController.getIns().onOperateGuildReq(game.Context.mainRoleId,0,0)};e.prototype.onQuickJoin=function(){if(s.GuildModel.getIns().isGuild){manager.FlowManager.instance.flowByStyle1(app.getLang("family_75"));return}var t=[];var e=s.GuildModel.getIns().guildInfoList;for(var i=0,n=e;i<n.length;i++){var r=n[i];var o=s.GuildModel.getIns().requestCheck(r.level,r.members,r.needSword.toNumber());if(o.length==0){var a=s.GuildModel.getIns().isInGuildIDs(r.guildID);if(!a){t.push(r.guildID)}}}if(t.length>0){s.GuildModel.getIns().setGuildIDs(t);this.listbanghui.refresh();app.ProtocolRequest.JoinGuildReq(Uint64.ZERO)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("family_error_Join"))}};e.prototype.onCreate=function(){app.ViewManager.toggleDialog(s.GuildCreateTipView,1,0)};e.prototype.onSearch=function(){var t=this.textshuru.text;if(t.length==0){manager.FlowManager.instance.flowByStyle1(app.getLang("family_tip_1"))}else{s.GuildController.getIns().onGuildInfListByNameReq(t)}};e.prototype.onInputChange=function(){if(this.textshuru.text.length==0){s.GuildController.getIns().onGuildInfListReq()}};e.prototype.onDisplay=function(){s.GuildModel.getIns().on(s.GuildEvent.EVENT.GUILDLISTINFO_UPDATE,this,this.onGuildListUpdata);s.GuildModel.getIns().on(s.GuildEvent.EVENT.GUILD_OPERATE_ACK,this,this.exitGuild);s.GuildModel.getIns().on(s.GuildEvent.EVENT.GUILDIDS_UPDATE,this,this.onUpdateGuildIds);s.GuildController.getIns().onGuildInfListReq();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){s.GuildModel.getIns().off(s.GuildEvent.EVENT.GUILDLISTINFO_UPDATE,this,this.onGuildListUpdata);s.GuildModel.getIns().off(s.GuildEvent.EVENT.GUILD_OPERATE_ACK,this,this.exitGuild);s.GuildModel.getIns().off(s.GuildEvent.EVENT.GUILDIDS_UPDATE,this,this.onUpdateGuildIds)};e.prototype.refreshAll=function(){this.showBtn(s.GuildModel.getIns().isGuild)};e.prototype.onUpdateGuildIds=function(){this.showBtn(s.GuildModel.getIns().isGuild)};e.prototype.exitGuild=function(){this.showBtn(s.GuildModel.getIns().isGuild);s.GuildController.getIns().onGuildInfListReq()};e.prototype.onGuildListUpdata=function(){this.listbanghui.array=s.GuildModel.getIns().guildInfoList;this.checkAddFirstGuide()};e.prototype.showBtn=function(t){this.btnchuangjianbanghui.visible=this.btnyijianshenqing.visible=!t;this.btntuichubanghui.visible=t};e.SINGLE_KEY="guild.GuildListView";return e}(ui.banghui.banghuiliebiaoviewUI);s.GuildListView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.fullScreen="";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.fullScreen="fullScreen";this.label.align="center";this.label.fontSize=22;this.label.leading=5;this.btnyuanbaowancheng01.clickHandler=new Laya.Handler(this,this.setState,[0]);this.btnbanghuigoumai.clickHandler=new Laya.Handler(this,this.setState,[1]);this.btnquxiao.clickHandler=new Laya.Handler(this,this.setState,[0]);this.btnyuanbaowancheng02.clickHandler=new Laya.Handler(this,this.setState,[1])};t.prototype.setState=function(t){if(t==0&&this.dataSource[4]){this.dataSource[4].run()}if(t==1&&this.dataSource[3]){this.dataSource[3].run()}this.close()};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){if(this.icons){for(var t=0,e=this.icons.length;t<e;t++){this.icons[t].removeSelf();this.icons[t].off(Laya.Event.CLICK,game.Alert,game.Alert.onShowTips)}this.icons=null}};t.prototype.refreshAll=function(){if(this.dataSource[0]==0){this.ani1.gotoAndStop(0)}else{this.ani1.gotoAndStop(1)}this.labelmoney02.text=this.labelmoney01.text=this.dataSource[1]+"";this.label.text=this.dataSource[2];this.icons=game.Alert.addImag(this.label)};t.SINGLE_KEY="guild.GuildShopTips";return t}(ui.alert.banghuishangdiantipUI);t.GuildShopTips=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjilu.renderHandler=new Laya.Handler(this,this.onItemRender);this.listjilu.array=[];this.imgzhanwu.visible=true};e.prototype.onItemRender=function(t){var e=t.dataSource;var i=new Date(e.ctime*1e3);t.labeltime01.text=i.getMonth()+1+"-"+i.getDate();var n=util.TimeUtil.getTimeArr(e.ctime);t.labeltime02.text=n.hour+":"+n.minute;var r=csv.TaskProxy.getIns().getCfg(e.taskid);var o=game.ItemUtil.parserList(r.param)[0];if(Uint64.equal(game.Context.mainRoleId,e.uid)){t.labelxiangxi.text=app.getLang("family_108",e.tarname,o.count,o.getName())}else if(Uint64.equal(game.Context.mainRoleId,e.taruid)){t.labelxiangxi.text=app.getLang("family_107",e.uname,o.count,o.getName())}else{t.labelxiangxi.text=app.getLang("family_106",e.uname,e.tarname,o.count,o.getName())}};e.prototype.onDisplay=function(){i.GuildModel.getIns().on(i.GuildEvent.EVENT.GUILD_TASKHELP_ACK,this,this.refreshAll);app.ProtocolRequest.GuildTaskHelpReq();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){i.GuildModel.getIns().off(i.GuildEvent.EVENT.GUILD_TASKHELP_ACK,this,this.refreshAll)};e.prototype.refreshAll=function(){this.listjilu.array=i.GuildModel.getIns().record;if(i.GuildModel.getIns().record.length>0){this.imgzhanwu.visible=false}else{this.imgzhanwu.visible=true}};e.SINGLE_KEY="guild.GuildAssistRecordView";return e}(ui.banghui.xiezhujilutipUI);i.GuildAssistRecordView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjuanxianjilu.itemRender=i.ItemDonate;this.listjuanxianjilu.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listjuanxianjilu.selectEnable=true;this.listjuanxianjilu.vScrollBarSkin=" ";this.listjuanxianjilu.array=[]};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){if(this.dataSource){this.listjuanxianjilu.array=this.dataSource}};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.SINGLE_KEY="guild.GuildDonateListView";return e}(ui.banghui.juanxianjilutipUI);i.GuildDonateListView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(u){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.labeltishi.on(Laya.Event.CLICK,this,this.onShowDonateView);this.btnjuanxian01.label=app.getLang("family_86");this.btnmoney02.label=app.getLang("family_85");this.btnjuanxian01.clickHandler=new Laya.Handler(this,this.onDonate);this.btnmoney02.clickHandler=new Laya.Handler(this,this.onMoneyDo);this.imgmoney01.parserIcon("8002-1");this.imgmoney02.parserIcon("8000-1");this._desc=[app.getLang("family_97"),app.getLang("family_98")];this.itemjianzhu.boxlianghang.visible=false;guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.TONGBI_DONATE,this.btnmoney02,null,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BANGHUI_DATING_CLOSE,this.backbtn)};e.prototype.onDisplay=function(){game.Context.on(u.GuildHallView.GUILD_UPDATE_RECORD_TIME,this,this.updateGuildRecord);game.Context.on(u.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.onGuildSelfInfoUpdate);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onMoneyChange);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.Context.off(u.GuildHallView.GUILD_UPDATE_RECORD_TIME,this,this.updateGuildRecord);game.Context.off(u.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.onGuildSelfInfoUpdate);game.MoneyModel.getIns().off(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onMoneyChange)};e.prototype.onGuildSelfInfoUpdate=function(){this.refreshAll()};e.prototype.refreshAll=function(){this._model=u.GuildModel.getIns();var t=this._model.guildVO;var e=t.getLobbylevel();var i=csv.GuildProxy.getIns().getBaseCfg(e);this.itemjianzhu.labelbanghuijianzhu.text=app.getLang("family_build_"+u.GUILD_BUILD_ENUM.LOBBY,e);this.itemjianzhu.imgbanghuijianzhu.skin="banghui/"+csv.GuildProxy.getIns().getGuildFunCfg(u.GUILD_BUILD_ENUM.LOBBY).functionpic+".png";this.labeljuanxian.text=app.getLang("帮会每日捐献资金上限："+t.dailyGold+"/"+i.daylimit);var n=csv.GuildProxy.getIns().getDonateAward();var r=app.str2Array(n,";","-");for(var o=0;o<2;o++){var a=this["itembanghuigong0"+(o+1)];a.visible=false;var s=r[o];if(s){this.setTips(parseInt(s[0]),parseInt(s[1]),this["itembanghuigong0"+(o+1)],this._desc[o]);a.visible=true}}this.updateCost(0);this.updateCost(1);this.updateGuildRecord();this.updateButtonRedDot()};e.prototype.setProgress=function(t,e){this.jindu.value=t/e;this.xuqiushuzhi.text=t+"/"+e};e.prototype.updateButtonRedDot=function(){game.RedDotView.removeFrom(this.btnjuanxian01);game.RedDotView.removeFrom(this.btnmoney02);var t=u.GuildModel.getIns().guildVO.getLobbylevel();var e=csv.GuildProxy.getIns().getBaseCfg(t).cost;if(u.GuildModel.getIns().isLimitsHigh()&&u.GuildController.getIns().canUpgrap(t,e,0,false)){}if(u.GuildController.getIns().canConGuildReq(0)){game.RedDotView.addTo(this.btnmoney02)}if(u.GuildController.getIns().canConGuildReq(1)){}this.dengji1.text=app.getLang("zuoqi_11")+t;this.dengji2.text=app.getLang("zuoqi_11")+(t+1);this.setProgress(u.GuildModel.getIns().guildVO.guildGold,parseInt(app.str2Array(e,"-")[1]));var i=u.GuildController.getIns().checkMaxLevel(t,0);if(i){this.ani1.gotoAndStop(1)}else{this.ani1.gotoAndStop(0)}};e.prototype.updateCost=function(t){if(t===void 0){t=0}var e=0,i=0,n=0,r="",o,a=game.STYLES.DESC_TXT_COLOR_S;if(t==0){e=csv.GuildProxy.getIns().getMoneyDonateCount();i=u.GuildModel.getIns().guildVO.guildSelfInf.gnum;if(i>=e){i=e-1}o=csv.GuildProxy.getIns().getDonateCfg(i+1);r=o.goldcost;n=game.GridsModel.getIns().getItemCount(game.ItemUtil.ENUMS.TONGBI)}else{e=csv.GuildProxy.getIns().getDiamondDonateCount();i=u.GuildModel.getIns().guildVO.guildSelfInf.mnum;if(i>=e&&e>0){i=e-1}o=csv.GuildProxy.getIns().getDonateCfg(i+1);r=o.diamondcost;n=game.GridsModel.getIns().getItemCount(game.ItemUtil.ENUMS.YUANBAO)}var s="0";if(r.length>0){var l=parseInt(app.str2Array(r,"-")[1]);s=game.MoneyModel.format(l);if(n<l){a=game.STYLES.RED_COLOR_S}}if(t==0){this.labelmoneynum02.color=a;this.labelmoneynum02.text=s}else{this.labelmoneynum01.color=a;this.labelmoneynum01.text=s}};e.prototype.onMoneyChange=function(){this.updateCost(0);this.updateCost(1);this.updateButtonRedDot()};e.prototype.updateGuildRecord=function(){this.getResidue(1);this.getResidue(0);this.updateButtonRedDot()};e.prototype.getResidue=function(t){var e=0;var i=0;if(t==0){e=u.GuildModel.getIns().guildVO.guildSelfInf.gnum;i=csv.GuildProxy.getIns().getMoneyDonateCount();e=i-e;this.labelcishunum02.color=e>0?game.STYLES.GREEN_COLOR_S:game.STYLES.RED_COLOR_S;this.labelcishunum02.text=e+""}else{e=u.GuildModel.getIns().guildVO.guildSelfInf.mnum;i=csv.GuildProxy.getIns().getDiamondDonateCount();e=i-e;var n=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.GUILD_BUILD_TIME,vipcode.VipModel.getIns().vipLvl);if(n==999){this.labelcishu01.text=app.getLang("VIP{0}无限制次数",vipcode.VipModel.getIns().vipLvl)}else if(e>0){this.labelcishu01.text=app.getLang("family_111",game.STYLES.GREEN_COLOR_S,e)}else{this.labelcishu01.text=app.getLang("family_111",game.STYLES.RED_COLOR_S,0)}}};e.prototype.setTips=function(t,e,i,n){var r=game.ItemUtil.createVO(t);i.miniIcon.parserIcon(t+"");i.labelbanghui.text=r.getName();i.labelmoney.text=game.MoneyModel.format(Math.floor(e));if(n){i.labeltishi.text=app.getLang(n)}};e.prototype.onDonate=function(){u.GuildController.getIns().onConGuildReq(1)};e.prototype.onMoneyDo=function(){u.GuildController.getIns().onConGuildReq(0)};e.prototype.onShowUpgradeView=function(){app.ViewManager.toggleDialog(u.GuildUpradeBuildView,1,0,[u.GUILD_BUILD_ENUM.LOBBY,this._model.guildVO.getLobbylevel()])};e.prototype.onShowDonateView=function(){u.GuildController.getIns().onConGuildRecordReq()};e.SINGLE_KEY="guild.GuildHallView";e.GUILD_UPDATE_RECORD_TIME="guild.updateGuildRecord";return e}(ui.banghui.banghuijuanxianviewUI);u.GuildHallView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(u){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.curLevel=1;this.listshangdian.itemRender=u.GuildShopItem;this.listshangdian.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listshangdian.selectEnable=true;this.listshangdian.vScrollBarSkin=" ";this.listshangdian.array=[];this.btnadd.clickHandler=new Laya.Handler(this,this.openView);var t=csv.GuildProxy.getIns().getGuildshopCfg(1);this.setMoney(t.price);this.btnLeft.clickHandler=new Laya.Handler(this,this.onLeft);this.btnRight.clickHandler=new Laya.Handler(this,this.onRight);this.centerLayout=new game.CenterLayoutMediator(this.listfanye,this.boxfanye,32,8);this.listfanye.renderHandler=new Laya.Handler(this,this.onPageRenderHandler);this.centerLayout.array=csv.GuildProxy.getIns().getShopLevelArray();guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BANGHUI_SHOP_SELECT,this,this.getGuideItemBtn,500);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BANGHUI_SHOP_ITEM_SELECT,this,this.getGuideItemBtn2,300);guide.GuideModel.getIns().register(csv.GuideProxy.ENUM_VIEW.BANGHUI_SHOP_CLOSE,this.backbtn)};t.prototype.getGuideItemBtn=function(t){this.curLevel=t;this.updateView();return"complete"};t.prototype.getGuideItemBtn2=function(t){var e=0;for(var i=0,n=this.listshangdian.array.length;i<n;i++){if(this.listshangdian.array[i].id==t){e=i;break}}this.listshangdian.scrollTo(e-1);for(var i=0,n=this.listshangdian.cells.length;i<n;i++){var r=this.listshangdian.cells[i];if(r.dataSource&&r.dataSource.id==t){return r}}return null};t.prototype.openView=function(){app.ViewManager.toggleDialog(u.GuildHallView,1,0)};t.prototype.onPageRenderHandler=function(t){var e=t.dataSource;if(e.id==this.curLevel){t.skin="banghui/btn_banghui_fanye01.png"}else{t.skin="banghui/btn_banghui_fanye02.png"}};t.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};t.prototype.onDisplay=function(){this.curLevel=u.GuildModel.getIns().guildVO.getShopLevel();game.Context.on(u.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.onGuildSelfInfoUpdate);u.GuildModel.getIns().on(u.GuildEvent.EVENT.GUILD_MALLRECORD_UPDATE,this,this.updateView);u.GuildModel.getIns().on(t.GUILD_MALL_RAND,this,this.updateView);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onMoneyChange);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){game.Context.off(u.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.onGuildSelfInfoUpdate);u.GuildModel.getIns().off(u.GuildEvent.EVENT.GUILD_MALLRECORD_UPDATE,this,this.updateView);u.GuildModel.getIns().off(t.GUILD_MALL_RAND,this,this.updateView);game.MoneyModel.getIns().off(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onMoneyChange)};t.prototype.onLeft=function(){if(this.curLevel>1){this.curLevel-=1;this.updateView()}else{manager.FlowManager.instance.flowByStyle1(app.getLang("family_100"))}};t.prototype.onRight=function(){var t=csv.GuildProxy.getIns().getMaxShopLevel();if(this.curLevel<t){this.curLevel+=1;this.updateView()}else{manager.FlowManager.instance.flowByStyle1(app.getLang("family_101"))}};t.prototype.updateView=function(){this.listfanye.refresh();var t=csv.GuildProxy.getIns().getShopItemsByLevel(this.curLevel);var e=true,i;for(var n=0;n<t.length;n++){i=t[n];if(i.counttype==0){e=false;break}var r=void 0;for(var o=0,a=u.GuildModel.getIns().recordList;o<a.length;o++){var s=a[o];if(s.mallID==i.id){r=s;break}}var l=0;if(r){if(i.counttype==1){l=i.count-(r?r.dailynum:0)}else if(i.counttype==2){l=i.count-(r?r.weeknum:0)}else if(i.counttype==3){l=i.count-(r?r.total:0)}}if(!r||l>0){e=false;break}}if(e){this.listshangdian.array=[]}else{this.listshangdian.array=t.sort(this.sortByItemId)}this.imgyishouqing.visible=e;this.labeltishi.text=app.getLang("family_99",csv.GuildProxy.getIns().getUlockLevel(this.curLevel));this.boxjiesuotishi.visible=this.curLevel>u.GuildModel.getIns().guildVO.getShopLevel();this.labellvnum.text=app.getLang("zuoqi_11")+this.curLevel;this.labelmoney.text=game.GridsModel.getIns().getItemCount(this._costItemID)+""};t.prototype.refreshAll=function(){if(this.dataSource&&this.dataSource.length>0){if(parseInt(this.dataSource[0])>0){this.curLevel=parseInt(this.dataSource[0])}else{this.curLevel=1}}this.updateView()};t.prototype.onGuildSelfInfoUpdate=function(){this.updateView()};t.prototype.setMoney=function(t){this._costItemID=parseInt(app.str2Array(t,"-")[0]);this.imgmoney.parserIcon(t)};t.prototype.sortByItemId=function(t,e){if(t.id<e.id)return-1;if(t.id>e.id)return 1;return 0};t.prototype.onMoneyChange=function(){this.labelmoney.text=game.GridsModel.getIns().getItemCount(this._costItemID)+""};t.SINGLE_KEY="guild.GuildShopView";t.GUILD_MALL_RAND="guild.GuildMallRandNtf";return t}(ui.banghui.banghuishangdianviewUI);u.GuildShopView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemList=[];this.btnyijianxiezhu.clickHandler=new Laya.Handler(this,this.onQuickQuestReq);this.btntip.clickHandler=new Laya.Handler(this,this.onShowView);this.labeltip.on(Laya.Event.CLICK,this,this.onShowView)};e.prototype.onShowView=function(){app.ViewManager.toggleDialog(a.GuildAssistRecordView,1,0)};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){};e.prototype.cleanItems=function(){while(this.itemList.length>0){var t=this.itemList.pop();if(t){t.removeSelf();Laya.Pool.recover("GuildHelpItem",t)}}};e.prototype.addItem=function(t){if(t&&t.length>0){var e=void 0;var i=0;for(var n=0;n<t.length;n++){e=Laya.Pool.getItemByClass("GuildHelpItem",a.GuildHelpItem);if(!e){e=new a.GuildHelpItem}e.setData(t[n]);e.y=i;i+=e.height+tip.TipManager.GAPS.GAP_ARROW;this.itemPanel.addChild(e);this.itemList.push(e)}}};e.prototype.onGuildHelpUpadte=function(){var t=a.GuildModel.getIns().guildTask.guildhelp;var e=game.Config.getIntParams(game.ConfigID.GUILD_HELP);this.labeltishi.text=app.getLang("family_96",e-t,e)};e.prototype.onGuildQuestAck=function(){this.cleanItems();var t=a.GuildModel.getIns().helpTask;this.addItem(t);this.onGuildHelpUpadte()};e.prototype.refreshAll=function(){a.GuildController.getIns().onGuildQuestReq()};e.prototype.onQuickQuestReq=function(){var t=a.GuildModel.getIns().guildTask.guildhelp;var e=game.Config.getIntParams(game.ConfigID.GUILD_HELP);if(e-t>0){var i=[];var n=[];for(var r=0,o=a.GuildModel.getIns().helpTask.length;r<o;r++){this.subGuildQuest(a.GuildModel.getIns().helpTask[r],i,n)}i=i.concat(n);for(var r=0,o=e-t;r<o;r++){if(i[r]){a.GuildController.getIns().onSubGuildQuestItemReq(i[r].uid,i[r].task[0].questIndex)}}}else{manager.FlowManager.instance.flowByStyle1(app.getLang("今日协助次数已用完"))}};e.prototype.subGuildQuest=function(t,e,i){var n=t.task[0].questIndex;if(Uint64.equal(t.uid,game.Context.mainRoleId)){}else{var r=csv.TaskProxy.getIns().getCfg(n);if(game.GridsModel.getIns().hasEnoughItems(r.param,false,false)){e.push(t)}else{i.push(t)}}};e.SINGLE_KEY="guild.GuildTaskAssistView";return e}(ui.banghui.banghuiqiuzhuviewUI);a.GuildTaskAssistView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(e){var t=function(i){__extends(t,i);function t(){var t=i!==null&&i.apply(this,arguments)||this;t._selectIndex=-1;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.tab.on(Laya.Event.CHANGE,this,this.onShow);var t=["family_82","family_83"];for(var e in this.tab.items){this.tab.items[e].label=t[e]}};t.prototype.onUnDisplay=function(){this._selectIndex=-1;this.tab.selectedIndex=-1;game.TaskModel.getIns().off(game.TaskModel.EVENTS.TASK_REFRESH,this,this.taskViewRefreshAll);e.GuildModel.getIns().off(e.GuildTaskView.UPDATE_GUILD_TASKNTF,this,this.taskViewRefreshAll);e.GuildModel.getIns().off(e.GuildTaskView.UPDATE_GUILD_STARAWARD,this,this.refreshStarAward);e.GuildModel.getIns().off(e.GuildEvent.EVENT.GUILD_QUEST_ACK,this,this.onGuildQuestAck);e.GuildModel.getIns().off(e.GuildTaskView.UPDATE_GUILD_TASKNTF,this,this.onGuildHelpUpadte)};t.prototype.onDisplay=function(){game.TaskModel.getIns().on(game.TaskModel.EVENTS.TASK_REFRESH,this,this.taskViewRefreshAll);e.GuildModel.getIns().on(e.GuildTaskView.UPDATE_GUILD_TASKNTF,this,this.taskViewRefreshAll);e.GuildModel.getIns().on(e.GuildTaskView.UPDATE_GUILD_STARAWARD,this,this.refreshStarAward);e.GuildModel.getIns().on(e.GuildEvent.EVENT.GUILD_QUEST_ACK,this,this.onGuildQuestAck);e.GuildModel.getIns().on(e.GuildTaskView.UPDATE_GUILD_TASKNTF,this,this.onGuildHelpUpadte);this.callLater(this.refreshAll)};t.prototype.refreshStarAward=function(){this.taskView.refreshStarAward();this.redDot()};t.prototype.taskViewRefreshAll=function(){this.taskView.refreshAll();this.redDot()};t.prototype.onGuildQuestAck=function(){this.assistView.onGuildQuestAck();this.redDot()};t.prototype.onGuildHelpUpadte=function(){this.assistView.onGuildHelpUpadte();this.redDot()};t.prototype.onShow=function(){if(this.tab.selectedIndex==0){this.onShowTaskView()}else if(this.tab.selectedIndex==1){this.onShowAssistView()}this.redDot()};t.prototype.redDot=function(){game.RedDotView.removeFrom(this.tab.items[0]);game.RedDotView.removeFrom(this.tab.items[1]);game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_TASK);var t=false;if(e.GuildController.getIns().checkTaskAward()||e.GuildController.getIns().checkTaskGuild()){game.RedDotView.addTo(this.tab.items[0]);game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_TASK);t=true}if(e.GuildController.getIns().checkHelpTask()){game.RedDotView.addTo(this.tab.items[1]);game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_TASK);t=true}if(t){e.GuildModel.getIns().event(e.GuildFunView.RED_DOT_UPDATE,e.GUILD_BUILD_ENUM.TASK)}};t.prototype.refreshAll=function(){this.tab.selectedIndex=0;e.GuildController.getIns().onGuildQuestReq()};t.prototype.onShowTaskView=function(){if(this._selectIndex==0){return}this.taskView.visible=true;this.assistView.visible=false;this.taskView.refreshAll();this._selectIndex=0;common.CommonWindow.getIns().common.setTitle(app.getLang("name_guild6"))};t.prototype.onShowAssistView=function(){if(this._selectIndex==1){return}this.taskView.visible=false;this.assistView.visible=true;e.GuildModel.getIns().helpRecord=e.GuildModel.getIns().helpTask;this.assistView.refreshAll();this._selectIndex=1;common.CommonWindow.getIns().common.setTitle(app.getLang("name_guild9"))};t.SINGLE_KEY="guild.GuildTaskMainView";return t}(ui.banghui.banghuiweituoview1UI);e.GuildTaskMainView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(c){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listbaoxiang.itemRender=c.GuildTaskAwardItem;this.listbaoxiang.renderHandler=new Laya.Handler(this,this.onAwardItemRenderHandler);this.listbaoxiang.selectEnable=true;this.listbaoxiang.hScrollBarSkin="";this.listbaoxiang.array=[];this.btnjipinshuaxin.label=app.getLang("guild_btn_1");this.btnzuanshishuaxin.label=app.getLang("guild_btn_2");this.labelguize.text=app.getLang("guild_2");game.HelperViewHandler.registerStr([this.btnguize,this.labelguize],"rule_des1","guild_5");this.initAwardItems();this.btnjipinshuaxin.clickHandler=new Laya.Handler(this,this.onFreshGuildQuestStarReq,[0]);this.btnzuanshishuaxin.clickHandler=new Laya.Handler(this,this.onFreshGuildQuestStarReq,[1])};e.prototype.onFreshGuildQuestStarReq=function(t){c.GuildController.getIns().onFreshGuildQuestStar(t)};e.prototype.onAwardItemRenderHandler=function(t,e){t.setData(t.dataSource,e)};e.prototype.refreshStarAward=function(){this.listbaoxiang.refresh()};e.prototype.onDisplay=function(){};e.prototype.onUnDisplay=function(){this.clean()};e.prototype.refreshAll=function(){this.listbaoxiang.refresh();this.taskItem0.setData(c.GuildModel.getIns().guildTask.getTaskByPos(1));this.taskItem1.setData(c.GuildModel.getIns().guildTask.getTaskByPos(2));this.taskItem2.setData(c.GuildModel.getIns().guildTask.getTaskByPos(3));this.taskItem3.setData(c.GuildModel.getIns().guildTask.getTaskByPos(4));var t="8002-"+c.GuildController.getIns().getFreshMoeny();var e=game.GridsModel.getIns().hasEnoughItems(t,false,false);var i=e?game.STYLES.DESC_TXT_COLOR_S:game.STYLES.RED_COLOR_S;this.itemmoney02.parserIcon(t);this.labelmoneynum02.color=i;this.labelmoneynum02.text=app.str2Array(t,"-")[1];this.btnjipinshuaxin.disabled=!c.GuildController.getIns().enoughfreshGeneral();this.labelmoneynum01.text=app.getLang("免费");this.clean();if(this.btnjipinshuaxin.disabled){this.ani1.gotoAndStop(1)}else{this.ani1.gotoAndStop(0)}this.setRwd();var n=c.GuildModel.getIns().guildTask.taskinf;var r=0;for(var o=0;o<n.length;o++){if(n[o].taskindex==0){r++}}if(r==4){this.ani1.gotoAndStop(2)}};e.prototype.initAwardItems=function(){var t=csv.GuildProxy.getIns().getTaskStar();var e=new Array;for(var i in t){e.push(t[i])}for(var n=0;n<e.length;n++){var r=parseInt(e[n].star);this["shuzilab"+(n+1)].text=app.getLang("{0}星",r)}this.listbaoxiang.array=e};e.prototype.getTotalStar=function(){var t=0;var e=csv.GuildProxy.getIns().getTaskStar();for(var i in e){if(parseInt(i)>t)t=parseInt(i)}return t};e.prototype.setRwd=function(){var t=csv.GuildProxy.getIns().getTaskStar();var e=c.GuildModel.getIns().guildTask.starnum;this.shuzhi.value=e+"";var i=t.length;var n=0;var r=this.barjindutiao.width/i;var o=0;for(var a=0;a<i;a++){var s=t[a];var l=parseInt(s.star);if(e<o){}else{if(e>=l){n+=r;o=l}else{var u=e-o;var p=l-o;var h=u/p;n+=r*h;o=l}}}this.barjindutiao.value=n/this.barjindutiao.width};e.prototype.coolDown=function(){var t=this._endTime-game.Context.getServerTime();if(t>0){this.labelmoneynum01.text=util.TimeUtil.formatTime(t)}else{this.clean()}};e.prototype.clean=function(){Laya.timer.clear(this,this.coolDown)};e.SINGLE_KEY="guild.GuildTaskView";e.UPDATE_GUILD_TASKNTF="guild.UpdateGuildTaskNtf";e.UPDATE_GUILD_STARAWARD="guild.UpdateGuildStarward";return e}(ui.banghui.banghuiweituoviewnewUI);c.GuildTaskView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(v){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._sid=1;t._slv=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.roleMediator=new common.RoleListMediator(this.itemxuanze.xuanzelist,equip.RoleItem,new Laya.Handler(this,this.roleSelectChange));this.listskill.itemRender=v.GuildSkillItem;this.listskill.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listskill.selectEnable=true;this.listskill.selectHandler=new Laya.Handler(this,this.onItemClick);this.listskill.array=[];this.btnxuexi.clickHandler=new Laya.Handler(this,this.onGuildTechReq);this.btnjianzhushengji.clickHandler=new Laya.Handler(this,this.onShowUpgradeView);this._colorDefault=this.labelshengjitishi.color;this._tfArray=[this.labelnummoney01,this.labelnummoney02];this._moneyArray=[this.imgmoney01,this.imgmoney02];game.HelperViewHandler.registerStr([this.btntishi,this.labeltishi],"func86t","guild_6")};t.prototype.onShowUpgradeView=function(){app.ViewManager.toggleDialog(v.GuildUpradeBuildView,1,0,[v.GUILD_BUILD_ENUM.BOSS,v.GuildModel.getIns().guildVO.getBuildlevel()])};t.prototype.onGuildTechReq=function(){var t=this.roleMediator.selectedIndex+1;v.GuildController.getIns().onGuildTechReq(t,this._sid,this._slv)};t.prototype.onDisplay=function(){v.GuildModel.getIns().on(t.CHANGE_GUILD_TECH_NTF,this,this.onRefrshTech);v.GuildModel.getIns().on(v.GuildFunView.RED_DOT_UPDATE,this,this.onRefrshTech);game.MoneyModel.getIns().on(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onMoneyChange);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){v.GuildModel.getIns().off(t.CHANGE_GUILD_TECH_NTF,this,this.onRefrshTech);v.GuildModel.getIns().off(v.GuildFunView.RED_DOT_UPDATE,this,this.onRefrshTech);game.MoneyModel.getIns().off(game.MoneyModel.EVENTS.MONEY_CHANGE,this,this.onMoneyChange)};t.prototype.refreshAll=function(){if(this.dataSource&&this.dataSource.length==1){this.roleMediator.setData(this.dataSource[0])}else{this.setRoleData()}this.roleSelectChange()};t.prototype.setRoleData=function(){var t=v.GuildController.getIns().getRedArrTech();var e=0;for(var i=0;i<t.length;i++){if(t[i]){e=i;break}}if(this.roleMediator.selectedIndex&&this.roleMediator.selectedIndex>=0){if(t[this.roleMediator.selectedIndex]==false){this.roleMediator.setData(e,t)}}else{this.roleMediator.setData(e,t)}};t.prototype.roleSelectChange=function(){var t=this.roleMediator.selectedIndex+1;var e=v.GuildModel.getIns().getGuildSkillVO(t);this.listskill.array=e;if(this._sid>0){this.listskill.selectedIndex=this._sid-1}else{this.listskill.selectedIndex=0}var i=this.listskill.selectedItem;this._sid=i?i.sid:this.listskill.selectedIndex+1;this._slv=i?i.lv:0;this.selectSkill();this.setSkillInfo()};t.prototype.onItemClick=function(){var t=this.listskill.selectedItem;if(t&&this._sid==t.sid){return}this._sid=t?t.sid:this.listskill.selectedIndex+1;this._slv=t?t.lv:0;this.selectSkill();this.setSkillInfo()};t.prototype.selectSkill=function(){for(var t=1;t<=5;t++){var e=this.listskill.getCell(t-1);if(e){e.setSelect(this._sid==t)}}};t.prototype.setSkillInfo=function(){var t=this._slv;var e=csv.GuildProxy.getIns().getTechMaxLevel(this._sid);var i=t<e?t+1:e;var n=csv.GuildProxy.getIns().getTechAttr(this._sid,t);var r=csv.GuildProxy.getIns().getTechAttr(this._sid,i);this.labeljineng.text=r.name;this.setSkillIcon(r.icon);this.labellv.text=app.getLang("zuoqi_11")+t;this.setSkillProp(n,r,t>=e);this.setCost()};t.prototype.setSkillProp=function(t,e,i){var n=Attributes.decode(t?t.attr:"").baseList[0];var r=Attributes.decode(e.attr).baseList[0];var o=Attributes.getPropName(r.propId);this.itemjichushuxing.txtName.text=o;this.itemjichushuxing.txtValue.text=n?Attributes.getPropValue(n.propId,n.value,n.formula)+"":"0";this.itemjichushuxing.imgArrow.visible=true;this.itemjichushuxing.txtNext.text=r?Attributes.getPropValue(r.propId,r.value,r.formula)+"":"0";this.itemjichushuxing.reSetSize();var a=true;this.itemjichushuxing.width=this.itemjichushuxing.txtNext.x+this.itemjichushuxing.txtNext.textField.width-30;if(i){a=false;this.itemjichushuxing.txtName.text=o+" "+(r?Attributes.getPropValue(r.propId,r.value,r.formula):"0");this.itemjichushuxing.width=this.itemjichushuxing.txtName.textField.width-30}this.itemjichushuxing.txtValue.visible=a;this.itemjichushuxing.imgArrow.visible=a;this.itemjichushuxing.txtNext.visible=a};t.prototype.setSkillIcon=function(t){this.itemjineng.shuzi.text="";this.itemjineng.img.skin="res/icon/skill/"+t+".png";this.itemjineng.starMediator.value=0};t.prototype.setCost=function(){var t=v.GuildModel.getIns().guildVO.getBuildlevel();var e=t<this._sid;var i=this._slv;var n=csv.GuildProxy.getIns().getTechMaxLevel(this._sid);var r=i>=n;var o=csv.GuildProxy.getIns().getTechLimitLevel(this._sid,t);var a=i>=o;this.labelshengjitishi.text="";this.labelxuexixiaohao.text=app.getLang("学习消耗");this.labelshengjitishi.color=this._colorDefault;if(e){this.labelxuexixiaohao.text=app.getLang("学习条件");this.labelshengjitishi.color="#ff0000";this.labelshengjitishi.text=app.getLang("帮派科技达到{0}级后可学习",this._sid)}else if(r){this.labelshengjitishi.text=app.getLang("该技能已提升至满级",this._sid)}else if(a){var s=t+1;var l=csv.GuildProxy.getIns().getTechLimitLevel(this._sid,s);this.labelshengjitishi.color="#ff0000";this.labelshengjitishi.text=app.getLang("帮派科技达到{0}级后可学习至{1}级",s,l)}var u=e||r||a;this.labelshengjitishi.visible=u;var p=this._slv;var h=csv.GuildProxy.getIns().getTechAttr(this._sid,p+1);var c=true;for(var f=0;f<2;f++){this._tfArray[f].visible=false;this._moneyArray[f].visible=false;if(h){var g=app.str2Array(h.cost,";");var d=g[f];if(d&&d.length>0&&!u){this._moneyArray[f].parserIcon(d);this._tfArray[f].color=game.GridsModel.getIns().hasEnoughItems(d)?game.STYLES.GREEN_COLOR_S:game.STYLES.RED_COLOR_S;var y=game.GridsModel.getIns().getItemCount(parseInt(app.str2Array(d,"-")[0]));var m=app.str2Array(d,"-")[1];this._tfArray[f].text=game.MoneyModel.format(y)+"/"+game.MoneyModel.format(m);this._tfArray[f].visible=true;this._moneyArray[f].visible=true;if(c&&!game.GridsModel.getIns().hasEnoughItems(d)){c=false}}}}this.updateButtonRedDot(!u&&c)};t.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e+1)};t.prototype.onMoneyChange=function(){this.setCost();v.GuildModel.getIns().event(v.GuildFunView.RED_DOT_UPDATE,v.GUILD_BUILD_ENUM.BOSS)};t.prototype.onRefrshTech=function(){var t=v.GuildController.getIns().getRedArrTech();this.roleMediator.setData(this.roleMediator.selectedIndex,t);this.roleSelectChange()};t.prototype.updateButtonRedDot=function(t){game.RedDotView.removeFrom(this.btnjianzhushengji);game.RedDotView.removeFrom(this.btnxuexi);var e=v.GuildModel.getIns().guildVO.getBuildlevel();var i=csv.GuildProxy.getIns().getTechCfg(e).cost;if(v.GuildModel.getIns().isLimitsHigh()&&v.GuildController.getIns().canUpgrap(e,i,3,false)){game.RedDotView.addTo(this.btnjianzhushengji)}if(t){game.RedDotView.addTo(this.btnxuexi)}};t.SINGLE_KEY="guild.GuildTechView";t.GUILD_SKILL_ITEM_CLICK="GuildSKillItemClick";t.CHANGE_GUILD_TECH_NTF="ChangeGuildTechNtf";return t}(ui.banghui.banghuikejiviewUI);v.GuildTechView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(r){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.limitCount=50;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemList=[];this.playList=[];this.btnyijiankaiqi.clickHandler=new Laya.Handler(this,this.onClickHandler);game.HelperViewHandler.registerStr([this.btntishi,this.labelguizeshuoming],"func86t","guild_3")};t.prototype.onClickHandler=function(){r.GuildController.getIns().onGainGuildTreasureReq(0)};t.prototype.cleanItems=function(){while(this.itemList.length>0){var t=this.itemList.pop();if(t){t.clean();t.removeSelf();Laya.Pool.recover("GuildTreasureItem",t)}}this.playList=[]};t.prototype.addItem=function(t){if(t&&t.length>0){var e=void 0;var i=0;for(var n=0;n<t.length;n++){if(n<this.limitCount){e=Laya.Pool.getItemByClass("GuildTreasureItem",r.GuildTreasureItem);if(!e){e=new r.GuildTreasureItem}e.setData(t[n]);e.y=i;i+=e.height+tip.TipManager.GAPS.GAP_ARROW;this.panelbaoxiang.addChild(e);this.itemList.push(e)}}}};t.prototype.onDisplay=function(){r.GuildModel.getIns().on(t.UPDATE_TREASURE,this,this.refreshAll);r.GuildModel.getIns().on(t.DEL_TREASURE,this,this.onDelTreasure);r.GuildModel.getIns().on(t.GAIN_TREASURE,this,this.onGainTreasure);r.GuildModel.getIns().on(t.TIMEOUT_TREASURE,this,this.onTimeOutTreasure);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){r.GuildModel.getIns().off(t.UPDATE_TREASURE,this,this.refreshAll);r.GuildModel.getIns().off(t.DEL_TREASURE,this,this.onDelTreasure);r.GuildModel.getIns().off(t.GAIN_TREASURE,this,this.onGainTreasure);r.GuildModel.getIns().off(t.TIMEOUT_TREASURE,this,this.onTimeOutTreasure)};t.prototype.refreshAll=function(){this.cleanItems();this.limitCount+=game.Config.getIntParams(205);this.labelbaoxiangnum.text=r.GuildModel.getIns().guildTreasure.length+"/"+this.limitCount;this.addItem(r.GuildModel.getIns().guildTreasure);this.check();var t=game.Config.getIntParams(204);this.lbldailynum.text=t-r.GuildModel.getIns().dailynum+"/"+t};t.prototype.onTimeOutTreasure=function(t){var e=r.GuildController.getIns().canTreasureReq();this.btnyijiankaiqi.disabled=!e;r.GuildController.getIns().onFunctionRedDotChange();r.GuildModel.getIns().event(r.GuildFunView.RED_DOT_UPDATE,r.GUILD_BUILD_ENUM.HOUSEWARE)};t.prototype.onDelTreasure=function(t){var e=r.GuildController.getIns().canTreasureReq();this.btnyijiankaiqi.disabled=!e;r.GuildController.getIns().onFunctionRedDotChange();r.GuildModel.getIns().event(r.GuildFunView.RED_DOT_UPDATE,r.GUILD_BUILD_ENUM.HOUSEWARE);for(var i in t){for(var n in this.itemList){if(t[i]===this.itemList[n].awardid){this.itemList[n].isGeted(true);this.itemList[n].playItemEffect();break}}}};t.prototype.onGainTreasure=function(t,e){};t.prototype.getGuildTreasureItem=function(t){var e;for(var i=0,n=this.itemList;i<n.length;i++){var r=n[i];if(r.awardid==t){e=r;break}}return e};t.prototype.check=function(){var t=r.GuildController.getIns().canTreasureReq();this.btnyijiankaiqi.disabled=!t;this.imglingqutishi.visible=!(r.GuildModel.getIns().guildTreasure.length>0)};t.SINGLE_KEY="guild.GuildTreasureView";t.UPDATE_TREASURE="guild.UpdateGuildTreasure";t.DEL_TREASURE="guild.DelGuildTreasure";t.TIMEOUT_TREASURE="guild.TreasureTimeOut";t.GAIN_TREASURE="guild.GainGuildTreasure";return t}(ui.banghui.banghuibaokuviewUI);r.GuildTreasureView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(l){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.cost="";return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnshengji.clickHandler=new Laya.Handler(this,this.onUpgrade)};t.prototype.onDisplay=function(){game.Context.on(l.GuildHallView.GUILD_UPDATE_RECORD_TIME,this,this.refreshAll);game.Context.on(l.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.refreshAll);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){game.Context.off(l.GuildHallView.GUILD_UPDATE_RECORD_TIME,this,this.refreshAll);game.Context.off(l.GuildEvent.EVENT.GUILD_SELF_INFO_UPDATE,this,this.refreshAll)};t.prototype.refreshAll=function(){this.updateData(this.dataSource[0])};t.prototype.updateData=function(t){var e=1;var i,n;if(t==l.GUILD_BUILD_ENUM.LOBBY){e=l.GuildModel.getIns().guildVO.getLobbylevel();i=csv.GuildProxy.getIns().getLobbyCfg(e);this.labelbiaoti01.text=app.getLang("guild_14");n=l.GuildController.getIns().checkMaxLevel(e,0);if(!n){this.normal.gotoAndStop(1);this.showLimit();if(i.effect>0){this.labelxiangxi04.text=this.getLobbyP(e)/100+"%";this.labelxiangxi05.text=this.getLobbyP(e+1)/100+"%";this.labelxiangxi06.text=app.getLang("guild_15",e);this.labelxiangxi03.text=i.des}else{this.labelxiangxi04.text="";this.labelxiangxi05.text="";this.labelxiangxi06.text="";this.labelxiangxi03.text="";this.imgjiantou02.visible=false;this.labelbiaoti02.visible=false}}var r=csv.GuildProxy.getIns().getBaseCfg(e).cost;var o=parseInt(app.str2Array(r,"-")[0]);this.cost=r;this.setProgress(l.GuildModel.getIns().guildVO.guildGold,parseInt(app.str2Array(r,"-")[1]))}else if(t==l.GUILD_BUILD_ENUM.SHOP){}else if(t==l.GUILD_BUILD_ENUM.BOSS){e=l.GuildModel.getIns().guildVO.getBuildlevel();i=csv.GuildProxy.getIns().getTechCfg(e);this.labelbiaoti01.text=app.getLang("guild_17");n=l.GuildController.getIns().checkMaxLevel(e,3);if(!n){this.normal.gotoAndStop(1);this.labelxiangxi04.visible=false;this.labelxiangxi05.visible=false;this.imgjiantou02.visible=false;this.showLimit();var a=csv.GuildProxy.getIns().getTechCfg(e+1);this.getBuildEffect(e+1,a.effect,a.p1)}this.cost=i.cost;this.setProgress(l.GuildModel.getIns().guildVO.guildGold,parseInt(app.str2Array(i.cost,"-")[1]))}this.labelxiangxi01.text=app.getLang("zuoqi_11")+e;this.labelxiangxi02.text=app.getLang("zuoqi_11")+(e+1);var s=l.GuildModel.getIns().isLimitsHigh()&&l.GuildController.getIns().canUpgrap(this.dataSource[1],this.cost,this.getType(),false);this.btnshengji.gray=!s;game.RedDotView.removeFrom(this.btnshengji);if(s){game.RedDotView.addTo(this.btnshengji)}this.btnshengji.visible=true;if(n){this.max.gotoAndStop(1);this.labelxiangxi03.text=app.getLang("guild_18");this.btnshengji.visible=false}};t.prototype.getLobbyP=function(t){var e=0;var i=csv.GuildProxy.getIns().getLobbyCfg(t);if(i)e=parseInt(i.p1);return e};t.prototype.getBuildEffect=function(t,e,i){if(e){if(e==1){var n=csv.GuildProxy.getIns().getTechAttr(parseInt(i),1).name;this.labelxiangxi03.text=app.getLang("guild_10",t,n)}else if(e==2){var r=app.str2Array(i,"-");this.labelxiangxi03.text=app.getLang("guild_11",r[1])}}};t.prototype.getShopEffect=function(t,e,i){if(e){if(e==1){var n=game.ItemUtil.createVO(parseInt(i));this.labelxiangxi03.text=app.getLang("guild_12",t,n.getName())}else if(e==2){var r=app.str2Array(i,"-");var n=game.ItemUtil.createVO(r[0]);this.labelxiangxi03.text=app.getLang("guild_13",n.getName(),r[1])}}};t.prototype.setProgress=function(t,e){this.barjindutiao.value=t/e;this.labeljindutiao.text=t+"/"+e};t.prototype.showLimit=function(){var t=!(this.dataSource[0]==l.GUILD_BUILD_ENUM.LOBBY);this.labelxiangxi06.visible=this.labelbiaoti04.visible=t;if(t){var e=this.dataSource[1];var i=l.GuildModel.getIns().guildVO.getLobbylevel();if(i>e){this.labelxiangxi06.color=game.STYLES.GREEN_COLOR_S}else{this.labelxiangxi06.color=game.STYLES.RED_COLOR_S}this.labelxiangxi06.text=app.getLang("guild_15",this.dataSource[1]+1)}};t.prototype.onUpgrade=function(){l.GuildController.getIns().onUpgraGuildReq(this.dataSource[1],this.cost,this.getType())};t.prototype.getType=function(){var t=0;if(this.dataSource[0]==l.GUILD_BUILD_ENUM.LOBBY){t=0}else if(this.dataSource[0]==l.GUILD_BUILD_ENUM.SHOP){t=1}else if(this.dataSource[0]==l.GUILD_BUILD_ENUM.BOSS){t=2}return t};t.SINGLE_KEY="guild.GuildUpradeBuildView";return t}(ui.banghui.jianzhushengjitipUI);l.GuildUpradeBuildView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(s){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){if(this.icons){for(var t=0,e=this.icons.length;t<e;t++){this.icons[t].removeSelf();this.icons[t].off(Laya.Event.CLICK,game.Alert,game.Alert.onShowTips)}this.icons=null}};e.prototype.updateView=function(t){var e=t&&t.length>0?t[0]:this._data;if(e){this._data=e;this.touxiang.imgframe.skin=csv.HeadFrameProxy.getIns().getIcon(e.headframeId);this.touxiang.imgtouxiang.skin=csv.MyTeamProxy.getIns().getTeamIcon(e.classskin);this.labelwanjiamingzi.text=app.getLang("hongbao_label_0",e.ownername);var i=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);this.labelhongbaomiaoshu.text=app.getLang("hongbao_label_9",s.GuildModel.getIns().rptimes,i);for(var n=0,r=e.list;n<r.length;n++){var o=r[n];if(Uint64.equal(o.id,game.Context.mainRoleId)){this.labelhuode.text=app.getLang("hongbao_label_10",this._data.resid,game.MoneyModel.format(o.gold),this._data.resid);this.icons=game.Alert.addImag(this.labelhuode)}}var a=csv.GuildProxy.getIns().getRedPackCfg(e.rptype);if(a.subtype==1){this.ani1.gotoAndStop(1)}else{this.ani1.gotoAndStop(0)}}else{}};e.prototype.refreshAll=function(){this.updateView(this.dataSource[0]);this.callHandler=this.dataSource[1];if(this.callHandler)this.callHandler.run()};e.prototype.getTipX=function(){return this.imghongbaodi.x};e.prototype.getTipH=function(){return this.imghongbaodi.height};e.prototype.getTipW=function(){return this.imghongbaodi.width};e.prototype.getBottomX=function(){return this.imghongbaodi.x+this.imghongbaodi.width};e.prototype.getBottomY=function(){return this.imghongbaodi.y+this.imghongbaodi.height};e.SINGLE_KEY="guild.GuildRedPackGetView";return e}(ui.hongbao.hongbaoitemUI);s.GuildRedPackGetView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onOpen)};e.prototype.onOpen=function(){i.GuildRedPackProxy.getIns().onRPGetReq(this.data.rpid)};e.prototype.onDisplay=function(){i.GuildModel.getIns().on(i.GuildRedPackView.REDPACK_INFO_UPDATE,this,this.updateView);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){i.GuildModel.getIns().off(i.GuildRedPackView.REDPACK_INFO_UPDATE,this,this.updateView);this.clean()};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.clean();this.data=t;this.labelwanjiamingzi.text=app.getLang("hongbao_label_0",t.ownername);this.labelhuode.text=game.MoneyModel.format(t.tgold);this.moneyIcon.parserIconByItemId(t.resid);var e=csv.GuildProxy.getIns().getRedPackCfg(t.rptype).time;var i=t.time+parseInt(e);this.txtCoolDown.text=app.getLang("hongbao_label_2",util.TimeUtil.formatTime(i-game.Context.getServerTime()));var n=i-game.Context.getServerTime();if(n>0){Laya.timer.loop(1e3,this,this.coolDown,[i])}};e.prototype.coolDown=function(t){var e=t-game.Context.getServerTime();console.log(e);if(e>0){this.txtCoolDown.text=app.getLang("hongbao_label_2",util.TimeUtil.formatTime(e))}else{this.txtCoolDown.text=app.getLang("hongbao_label_2",util.TimeUtil.formatTime(0));this.clean();i.GuildModel.getIns().event(i.GuildRedPackView.REDPACK_INFO_UPDATE)}};e.prototype.updateView=function(t){if(this.data){if(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n.rpid==this.data.rpid){this.clean();break}}}}};e.prototype.clean=function(){Laya.timer.clear(this,this.coolDown)};e.SINGLE_KEY="guild.GuildRedPackItem";return e}(ui.banghui.hongbaoitembanghuiitmeUI);i.GuildRedPackItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(a){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){};e.prototype.onRPInfoReq=function(t){app.ProtocolRequest.RPInfoReq(t)};e.prototype.onRPGetReq=function(t){var e=a.GuildModel.getIns().canGetRedPack(t,true);if(e.length==0){var i=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);var n=i-a.GuildModel.getIns().rptimes;if(n>0){app.ProtocolRequest.RPGetReq([t])}else{if(vipcode.VipModel.getIns().isMaxLevel()){manager.FlowManager.instance.flowByStyle1(app.getLang("次数已满"))}else{var r=csv.VipProxy.getIns().getArr();var o=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,r[r.length-1].level);if(o>i){app.ViewManager.toggleDialog(a.RedTips,1,0)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("次数已满"))}}}}};e.prototype.onRPHistoryReq=function(t){app.ProtocolRequest.RPHistoryReq(t)};e.prototype.onRPSendReq=function(t,e,i){if(!a.GuildModel.getIns().isClan()){manager.FlowManager.instance.flowByStyle1(app.getLang("family_8"));return false}var n=csv.GuildProxy.getIns().getRedPackCfg(t);if(e<n.money){manager.FlowManager.instance.flowByStyle1(app.getLang("红包金额不能少于{0}",n.money));return false}if(i<n.number){manager.FlowManager.instance.flowByStyle1(app.getLang("红包数量不能少于{0}",n.number));return false}if(e<i){manager.FlowManager.instance.flowByStyle1(app.getLang("红包数量已达上限"));return false}if(e>a.GuildModel.getIns().guildVO.guildRpGold){var r=csv.ItemProxy.getIns().getItemCfgById(8019);manager.FlowManager.instance.flowByStyle1(app.getLang("item_not_enough",csv.ItemProxy.getName(r)));return false}app.ProtocolRequest.RPSendReq(t,e,i);return true};e.SINGLE_KEY="guild.GuildRedPackProxy";return e}(app.ModelBase);a.GuildRedPackProxy=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var t=function(e){__extends(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.shurutishi.text="";this.shurutishi2.text="";var t=csv.GuildProxy.getIns().getRedPackCfg(1);this.shurutishi.prompt=app.getLang("最少{0}元宝",t.money);this.shurutishi2.prompt=app.getLang("不低于{0}个",t.number);this.shurutishi.restrict="0-9";this.shurutishi2.restrict="0-9";this.quedingbtn.clickHandler=new Laya.Handler(this,this.onSend);this.shurutishi.on(Laya.Event.INPUT,this,this.onTextChange,[this.shurutishi]);this.shurutishi2.on(Laya.Event.INPUT,this,this.onTextChange,[this.shurutishi2])};i.prototype.onTextChange=function(t){if(t.text.length>0){var e=parseInt(t.text);if(t==this.shurutishi){if(e>n.GuildModel.getIns().guildVO.guildRpGold){e=n.GuildModel.getIns().guildVO.guildRpGold}}else if(t==this.shurutishi2){var i=csv.GuildProxy.getIns().getRedPackCfg(1);if(e==0){e=i.number}}t.text=e+""}};i.prototype.onSend=function(){var t=this.shurutishi.text.length>0?parseInt(this.shurutishi.text):0;var e=this.shurutishi2.text.length>0?parseInt(this.shurutishi2.text):0;if(n.GuildRedPackProxy.getIns().onRPSendReq(1,t,e)){app.ViewManager.toggleDialog(i,-1)}};i.prototype.onDisplay=function(){this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){};i.prototype.refreshAll=function(){this.shurutishi.text="";this.shurutishi2.text=""};i.SINGLE_KEY="guild.GuildRedPackSendView";return i}(ui.banghui.fahongbaoUI);n.GuildRedPackSendView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var t=function(i){__extends(t,i);function t(){var t=i!==null&&i.apply(this,arguments)||this;t._tabIndex=-1;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){i.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.redbagList.itemRender=n.GuildRedPackItem;this.redbagList.renderHandler=new Laya.Handler(this,this.onRedbagListRender);this.redbagList.hScrollBarSkin=" ";var t=[app.getLang("hongbao_label_4"),app.getLang("hongbao_label_5")];for(var e in this.tab.items){this.tab.items[e].label=t[e]}this.tab.on(Laya.Event.CHANGE,this,this.onShow);this.btnSend.clickHandler=new Laya.Handler(this,this.onBtnSend);this.labelshengyuyuanbao.text=app.getLang("hongbao_label_6");this.labelrenshu.text=app.getLang("hongbao_label_7");this.btnSend.label=app.getLang("hongbao_label_8");this.labelArr=[];this._hbox=new Laya.VBox;this._hbox.y=10;this.recordPanel.addChild(this._hbox);this.bg_wuhongbao.visible=false;game.HelperViewHandler.registerStr([this.btntishi,this.labelguizeshuoming],"func86t","guild_7")};t.prototype.onRedbagListRender=function(t){t.setData(t.dataSource)};t.prototype.onBtnSend=function(){app.ViewManager.toggleDialog(n.GuildRedPackSendView,1,0)};t.prototype.onShow=function(){if(this.tab.selectedIndex==0){this.onShowGuildRecord()}else{this.onShowSelfRecord()}this.redDot();n.GuildRedPackProxy.getIns().onRPHistoryReq(this._tabIndex)};t.prototype.redDot=function(){game.RedDotView.removeFrom(this.tab.items[0]);game.RedDotView.removeFrom(this.tab.items[1])};t.prototype.onDisplay=function(){n.GuildModel.getIns().on(t.REDPACK_INFO_UPDATE,this,this.updateView);n.GuildModel.getIns().on(t.REDPACK_RECORDS_UPDATE,this,this.updateRecord);n.GuildRedPackProxy.getIns().onRPInfoReq(0);this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){n.GuildModel.getIns().off(t.REDPACK_INFO_UPDATE,this,this.updateView);n.GuildModel.getIns().off(t.REDPACK_RECORDS_UPDATE,this,this.updateRecord)};t.prototype.refreshAll=function(){this.updateView();if(this.tab.selectedIndex==-1){this.tab.selectedIndex=0}};t.prototype.updateView=function(){this.txtNum1.text=game.MoneyModel.format(n.GuildModel.getIns().guildVO.guildRpGold);this.txtNum.text=n.GuildModel.getIns().guildVO.guildInf.members+"";this.btnSend.visible=n.GuildModel.getIns().isClan();game.RedDotView.removeFrom(this.tab.items[0]);game.RedDotView.removeFrom(this.tab.items[1]);var t=n.GuildModel.getIns().getGuildRedPack();this.redbagList.array=t;this.bg_wuhongbao.visible=t.length>0?false:true;var e=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);this.labeltishi.text=app.getLang("hongbao_label_3",e-n.GuildModel.getIns().rptimes)};t.prototype.updateRecord=function(t){this.cleanRecordPanel();var e=0;for(var i=0;i<t.length;i++){var n=Laya.Pool.getItemByClass("banghuihongbaojiluitemUI",ui.banghui.banghuihongbaojiluitemUI);n.labelwenben.text=t[i].desc;var r=new Date(t[i].time*1e3);n.labelriqi.text=r.getMonth()+1+"-"+r.getDate();var o=r.getMinutes();var a=o<10?"0"+o:o.toString();var s=r.getHours();var l=s<10?"0"+s:s.toString();n.labelshijian.text=l+":"+a;this._hbox.addChild(n);this.labelArr.push(n)}};t.prototype.cleanRecordPanel=function(){while(this.labelArr.length>0){var t=this.labelArr.pop();t.removeSelf();Laya.Pool.recover("banghuihongbaojiluitemUI",t)}};t.prototype.onShowGuildRecord=function(){if(this._tabIndex==0){return}this._tabIndex=0};t.prototype.onShowSelfRecord=function(){if(this._tabIndex==1){return}this._tabIndex=1};t.SINGLE_KEY="guild.GuildRedPackView";t.REDPACK_INFO_UPDATE="guild.GuildRedPackInfoUpdate";t.REDPACK_RECORDS_UPDATE="guild.GuildRedPackRecordsUpdate";return t}(ui.banghui.banghuihongbaotipUI);n.GuildRedPackView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.on(Laya.Event.CLICK,this,this.onOpen);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){this.off(Laya.Event.CLICK,this,this.onOpen)};e.prototype.onOpen=function(){i.GuildRedPackProxy.getIns().onRPGetReq(this.dataSource[0].rpid);app.ViewManager.toggleDialog(tip.TipMeiator,-1,0)};e.prototype.updateView=function(t){this.labelwanjiamingzi.text=t.ownername;var e=csv.GuildProxy.getIns().getRedPackCfg(t.rptype);this.labelhongbaomiaoshu.text=app.getLang(e.hbly,t.tgold);if(e.subtype==1){this.ani1.gotoAndStop(1)}else{this.ani1.gotoAndStop(0)}};e.prototype.refreshAll=function(){this.updateView(this.dataSource[0]);this.callHandler=this.dataSource[1];if(this.callHandler)this.callHandler.run()};e.prototype.getTipX=function(){return this.imghongbaodi.x};e.prototype.getTipH=function(){return this.imghongbaodi.height};e.prototype.getTipW=function(){return this.imghongbaodi.width};e.prototype.getBottomX=function(){return this.imghongbaodi.x+this.imghongbaodi.width};e.prototype.getBottomY=function(){return this.imghongbaodi.y+this.imghongbaodi.height};e.SINGLE_KEY="guild.RedPackCover";return e}(ui.hongbao.hongbaoitem2UI);i.RedPackCover=t})(guild||(guild={}));var guild;(function(e){var t=function(){function t(){this.img=new Laya.Image;this.img.skin="res/static/hongbao/bg_qianghongbao.png";this.img.on(Laya.Event.CLICK,this,this.onOpen)}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.onOpen=function(){var t=e.GuildModel.getIns().getRedPacketGetDataById(this.rpid);app.ViewManager.toggleDialog(tip.TipMeiator,1,0,[e.RedPackCover,t,[]]);this.clear()};t.prototype.setData=function(t){this.rpid=t.rpid;var e=csv.GuildProxy.getIns().getRedPackCfg(t.rptype);if(e.subtype==1){this.img.skin="res/static/hongbao/bg_qianghongbao_jin.png"}else{this.img.skin="res/static/hongbao/bg_qianghongbao.png"}};t.prototype.onStart=function(){this.img.y=0;var t=this.img.width;var e=Laya.stage.width-this.img.width;var i=Math.floor(Math.random()*(e-t)+t);this.img.x=i;app.AppContainer.redPackLayer.addChild(this.img);app.MyTween.to(this.img,{y:Laya.stage.height+this.img.height},5e3,null,Laya.Handler.create(this,this.tweenCompeleteHandler))};t.prototype.tweenCompeleteHandler=function(){e.GuildModel.getIns().updateUngetList();this.clear()};t.prototype.clear=function(){app.MyTween.clearTween(this.img);Laya.Pool.recover("guild.RedPackItem",this);this.img.removeSelf();this.rpid=0};t.SINGLE_KEY="guild.RedPackItem";return t}();e.RedPackItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(l){var i=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.btnlingqu.clickHandler=new Laya.Handler(this,this.onGetRed)};e.prototype.onGetRed=function(){l.GuildRedPackProxy.getIns().onRPGetReq(this._rpid)};e.prototype.setData=function(t){this._rpid=t;var e=l.GuildModel.getIns().getRedPacketGetDataById(t);if(e){var i=csv.GuildProxy.getIns().getRedPackCfg(e.rptype);this.weikaiqilab.text=e.ownername;this.labelmiaoshu.text=app.getLang(i.hbly,e.tgold);if(i.subtype==1){this.ani1.gotoAndStop(1)}else{this.ani1.gotoAndStop(0)}}};return e}(ui.hongbao.hongbaoitem3UI);l.RedListItem=i;var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnyijian.clickHandler=new Laya.Handler(this,this.onGetRed);this.listhongbao.itemRender=i;this.listhongbao.renderHandler=new Laya.Handler(this,this.onRenderHandler)};e.prototype.onRenderHandler=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){l.GuildModel.getIns().on(l.GuildRedPackView.REDPACK_INFO_UPDATE,this,this.refreshAll);l.GuildRedPackProxy.getIns().onRPInfoReq(0);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){l.GuildModel.getIns().off(l.GuildRedPackView.REDPACK_INFO_UPDATE,this,this.refreshAll)};e.prototype.refreshAll=function(){var t=l.GuildModel.getIns().unGetedredPack;this.listhongbao.array=t;var e=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);this.labeltishi.text=app.getLang("领取次数：{0}/{1}",l.GuildModel.getIns().rptimes,e);this.labeltishi2.visible=false;if(vipcode.VipModel.getIns().isMaxLevel()==false){var i=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);var n=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl+1);var r=n-i;if(r>0){this.labeltishi2.text=app.getLang("hongbao_shouna_1",vipcode.VipModel.getIns().vipLvl+1,r);this.labeltishi2.visible=true}}};e.prototype.onGetRed=function(){var t=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);var e=t-l.GuildModel.getIns().rptimes;if(e>0){var i=[];var n=l.GuildModel.getIns().unGetedredPack;for(var r=0;r<e;r++){var o=n[r];if(o>0){var a=l.GuildModel.getIns().canGetRedPack(o,true);if(a.length==0){i.push(o)}}}if(i.length>0){app.ProtocolRequest.RPGetReq(i)}}else{var i=csv.VipProxy.getIns().getArr();var s=i[i.length-1];if(csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,s.level)-t==0){manager.FlowManager.instance.flowByStyle1(app.getLang("次数已满"))}else{app.ViewManager.toggleDialog(l.RedTips,1,0)}}};e.SINGLE_KEY="guild.RedPackView";return e}(ui.hongbao.hongbaoviewUI);l.RedPackView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.diban.width=Laya.stage.width;this.daojulist.itemRender=grids.GridView;this.daojulist.renderHandler=new Laya.Handler(this,this.onGiftItemRender);this.quedingbtn.clickHandler=new Laya.Handler(this,this.onOpenView)};e.prototype.onOpenView=function(){app.ViewManager.toggleDialog(vipcode.VipView,1,0);this.close()};e.prototype.onGiftItemRender=function(t){t.setData(t.dataSource)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=vipcode.VipModel.getIns().vipLvl+1;var e=csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,t)-csv.VipProxy.getIns().getVipPri(csv.PRI_TYPE.REDPACK,vipcode.VipModel.getIns().vipLvl);this.vip.value=t+"";this.cishu.value=e+"";this.tequan.value=t+"";var i=csv.VipProxy.getIns().getCfg(t);var n=parseInt(i.vipgift);if(n>0){var r=csv.MallProxy.getIns().getItemCfgById(n);var o=game.ItemUtil.parserList(r.showitem);this.daojulist.array=o}else{this.daojulist.array=[]}this.resetSize()};e.prototype.resetSize=function(){var t=this.daojulist.array.length;var e;e=t*(98*this.daojulist.scaleX)+(t-1)*20;if(e<this.width){this.daojulist.width=e}else{this.daojulist.width=this.width}this.daojulist.x=(this.width-this.daojulist.width)/2};e.SINGLE_KEY="guild.RedTips";return e}(ui.hongbao.wenxintishiUI);t.RedTips=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnjujue.clickHandler=new Laya.Handler(this,this.onJujuebtnClick);this.btntongyi.clickHandler=new Laya.Handler(this,this.onTongyibtnClick)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.onJujuebtnClick=function(){if(this._data){i.GuildController.getIns().onOperateJoinGuildReq([this._data.playerID],0)}};e.prototype.onTongyibtnClick=function(){if(this._data){var t=i.GuildModel.getIns().getGuildData();var e=csv.GuildProxy.getIns().getBaseCfg(t.guildInf.level);if(t.guildInf.members>=e.people){manager.FlowManager.instance.flowByStyle1(app.getLang("family_1"));return}i.GuildController.getIns().onOperateJoinGuildReq([this._data.playerID],1)}};e.prototype.setData=function(t,e){if(!t){return}this.imgtouxiang.skin=role.RoleVO.getHeadIconUrl(t.classSkin);this.labellv.text=app.getLang("zuoqi_11")+t.level;this.labelname.text=t.playerName;this._data=t};e.SINGLE_KEY="guild.GuildApplyItem";return e}(ui.banghui.shenqingliebiaoitemUI);i.GuildApplyItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(s){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.buildID=1;t.level=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClickHandler)};t.prototype.onClickHandler=function(){s.GuildFunView.getIns().event(s.GuildFunView.SHOW_BUILD_VIEW,this.buildID)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.init=function(t){this.buildID=t;this.labelbanghuijianzhu.text=app.getLang("practice_des4",0);this.imglevelbg.visible=false;this.labelbanghuijianzhu.visible=false;this.boxlianghang.visible=false;this.imgbanghuijianzhu.skin="banghui/"+csv.GuildProxy.getIns().getGuildFunCfg(this.buildID).functionpic+".png"};t.prototype.update=function(t,e){if(e===void 0){e=0}var i=s.GuildModel.getIns().isFunOpended(this.buildID,false);this.boxlianghang.visible=false;this.imglevelbg.visible=this.labelbanghuijianzhu.visible=true;if(e>0){var n=s.GuildModel.getIns().getFunOpenLevel(this.buildID);if(i){var r=dailytask.DailyTaskModel.getIns().getOpenActivityByType(e);if(r){this.labelbanghuijianzhu.text=app.getLang("pickgourd_open2")}else{var o=csv.ActivityFunction.getIns().getTypeArr(e);var a=o?o[0].guildtimetext:"";this.boxlianghang.visible=true;this.imglevelbg.visible=this.labelbanghuijianzhu.visible=false;this.labelbanghuijianzhu01.text=app.getLang(a);this.labelbanghuijianzhu01.y=(this.imglevelbg01.height-this.labelbanghuijianzhu01.height)*.5}}else{this.labelbanghuijianzhu.text=app.getLang("environment_ulock1",n)}}else{if(i&&t>0){this.labelbanghuijianzhu.text=app.getLang("practice_des4",t)}else{this.imglevelbg.visible=false;this.labelbanghuijianzhu.visible=false}}this.visible=csv.GuildProxy.getIns().getGuildFunCfg(this.buildID).open==1};t.SINGLE_KEY="guild.GuildHallItem";return t}(ui.banghui.banghuigongnengitemUI);s.GuildHallItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(f){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnjiaohuo01.clickHandler=new Laya.Handler(this,this.onSubGuildQuestItemReq,[0]);this.btnjiaohuo02.clickHandler=new Laya.Handler(this,this.onSubGuildQuestItemReq,[1])};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.onSubGuildQuestItemReq=function(t){var e=this._data.task[0].questIndex;var i=this._data.uid;var n=csv.TaskProxy.getIns().getCfg(e);var r=game.ItemUtil.parserList(n.param)[0];var o=r.getItemId();var a=r.count;if(Uint64.equal(this._data.uid,game.Context.mainRoleId)){}else if(t==0){f.GuildController.getIns().onSubGuildQuestItemReq(i,e)}else if(t==1){var s=csv.MallProxy.getIns().getPriceByItemID(1,o);var l=0;if(s.length>0){var u=game.ItemUtil.parserList(s)[0];if(game.GridsModel.getIns().getItemCount(o)>=a){l=u.count*a}else{l=u.count*(a-game.GridsModel.getIns().getItemCount(o))}var p=game.GridsModel.getIns().hasEnoughItems(u.getItemId()+"-"+l,false,true);if(p){var h=csv.GuildProxy.getIns().getTask(e).assistreward;var c=game.ItemUtil.parserList(h)[0];game.Alert.show(app.getLang("family_95",l,c.getName(),c.count),new Laya.Handler(this,this.okHandler,[i,e]),null)}}}};e.prototype.okHandler=function(t,e){f.GuildController.getIns().onSubGuildQuestItemBuyReq(t,e)};e.prototype.setData=function(t){this._data=t;this.ani1.gotoAndStop(0);this.labelbanghuichengyuan.color=game.STYLES.GREEN_COLOR_S;var e=Uint64.equal(this._data.uid,game.Context.mainRoleId);if(e){this.labelbanghuichengyuan.color=game.STYLES.YELLOW_COLOR_S;this.ani1.gotoAndStop(2)}this.labelbanghuichengyuan.text=t.uname;var i=this._data.task[0].questIndex;var n=csv.GuildProxy.getIns().getTask(i);var r=n.task_id;var o=csv.TaskProxy.getIns().getCfg(r);var a=game.ItemUtil.parserList(o.param)[0];var s=parseInt(app.str2Array(o.param,"-")[1]);this.itemdaoju.setData(a);this.labelname.text=a.getName();var l=game.GridsModel.getIns().getItemCount(a.getItemId());this.labelnum.text="("+l+"/"+s+")";if(!e){if(l>=s){this.ani1.gotoAndStop(1)}else{var u=csv.MallProxy.getIns().getPriceByItemID(1,a.getItemId());this.btnjiaohuo02.label="";if(u.length>0){var p=game.ItemUtil.parserList(u)[0];this.btnjiaohuo02.label=p.count*(s-l)+p.getName()}if(this.btnjiaohuo02.label.length==0){this.ani1.gotoAndStop(1)}}this.btnjiaohuo01.disabled=!game.GridsModel.getIns().hasEnoughItems(o.param,false,false)}};e.SINGLE_KEY="guild.GuildHelpItem";return e}(ui.banghui.banghuiqiuzhuitemUI);f.GuildHelpItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onShowGuildInfoView);this.btnshenqing.clickHandler=new Laya.Handler(this,this.onJoinGuildReq)};e.prototype.onShowGuildInfoView=function(t){if(t.target===this.btnshenqing){return}r.GuildController.getIns().onGuildInfReq(this._data.guildID)};e.prototype.onDisplay=function(){r.GuildModel.getIns().on(r.GuildEvent.EVENT.GUILDIDS_UPDATE,this,this.onUpdateGuildIds);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){r.GuildModel.getIns().off(r.GuildEvent.EVENT.GUILDIDS_UPDATE,this,this.onUpdateGuildIds)};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){if(!t){return}this._data=t;this.labelbanghui.text=game.Context.getGuildName(t.guildName);this.labelnumchengyuan.text=t.members+"/"+csv.GuildProxy.getIns().getBaseCfg(t.level).people;this.btnshenqing.label=app.getLang("family_5");this.labelxianshi.text=app.getLang("family_0_1");var i=this._data.needSword.toNumber();if(i>0){this.labelxianshi.text=app.getLang("tip_des_2")+game.MoneyModel.format(i)}var n=r.GuildModel.getIns().requestCheck(this._data.level,this._data.members,this._data.needSword.toNumber());if(r.GuildModel.getIns().isInGuildIDs(t.guildID)){this.btnshenqing.label=app.getLang("family_6")}this.btnshenqing.gray=n.length>0;if(e>2){this.imgpaiming.skin="";this.labelpaiming.text=e+1+""}else{this.imgpaiming.skin="res/static/paihangbang/bg_paiming_"+(e+1)+".png";this.labelpaiming.text=""}};e.prototype.onUpdateGuildIds=function(){if(this._data){var t=r.GuildModel.getIns().requestCheck(this._data.level,this._data.members,this._data.needSword.toNumber());if(r.GuildModel.getIns().isInGuildIDs(this._data.guildID)){this.btnshenqing.label=app.getLang("family_6")}else{this.btnshenqing.label=app.getLang("family_5")}this.btnshenqing.gray=t.length>0}};e.prototype.onJoinGuildReq=function(){if(this._data){var t=r.GuildModel.getIns().requestCheck(this._data.level,this._data.members,this._data.needSword.toNumber());if(t.length>0){manager.FlowManager.instance.flowByStyle1(app.getLang(t))}else{this.btnshenqing.label=app.getLang("family_6");r.GuildController.getIns().onJoinGuildReq(this._data.guildID)}}};e.SINGLE_KEY="guild.GuildListItem";return e}(ui.banghui.banghuiliebiaoitemUI);r.GuildListItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.showMenu)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.showMenu=function(t){t.stopPropagation();if(Uint64.equal(game.Context.mainRoleId,this._data.playerID)){common.CommonMenu.getIns().hideAll();return}common.CommonMenu.getIns().item.clean();if(n.GuildModel.getIns().isLimits()&&n.GuildModel.getIns().guildVO.guildSelfInf.profession>this._data.profession){this.addLimitNode(this._data.profession);this.addNode();if(this._data.profession>n.POSITION_ENUM.MEMBER){common.CommonMenu.getIns().item.appendItem({label:app.getLang("family_30"),data:{playerData:this._data,position:n.POSITION_ENUM.MEMBER}})}common.CommonMenu.getIns().item.appendItem({label:app.getLang("family_29"),data:{playerData:this._data}})}else{this.addNode()}common.CommonMenu.getIns().selectHandler=n.GuildModel.getIns().action;common.CommonMenu.getIns().show()};e.prototype.addLimitNode=function(t){var e;if(n.GuildModel.getIns().isClan()){var i=[];i.push({label:app.getLang("family_11"),data:{playerData:this._data,position:n.POSITION_ENUM.CLAN}});if(t!=n.POSITION_ENUM.ASS_CLAN){i.push({label:app.getLang("family_12"),data:{playerData:this._data,position:n.POSITION_ENUM.ASS_CLAN}})}if(t!=n.POSITION_ENUM.ELDER){i.push({label:app.getLang("family_13"),data:{playerData:this._data,position:n.POSITION_ENUM.ELDER}})}e={label:app.getLang("family_24"),subItem:i}}else if(n.GuildModel.getIns().isAssClan()&&t==n.POSITION_ENUM.MEMBER){e={label:app.getLang("family_24"),subItem:[{label:app.getLang("family_13"),data:{playerData:this._data,position:n.POSITION_ENUM.ELDER}}]}}if(e){common.CommonMenu.getIns().item.appendItem(e)}};e.prototype.addNode=function(){common.CommonMenu.getIns().item.appendItem({label:app.getLang("family_25"),data:{playerData:this._data}});common.CommonMenu.getIns().item.appendItem({label:app.getLang("family_26"),data:{playerData:this._data}});if(friend.FriendModel.getIns().containsFridenList(this._data.playerID)==false){common.CommonMenu.getIns().item.appendItem({label:app.getLang("family_27"),data:{playerData:this._data}})}if(friend.FriendModel.getIns().containsBlackList(this._data.playerID)==false){common.CommonMenu.getIns().item.appendItem({label:app.getLang("family_28"),data:{playerData:this._data}})}};e.prototype.setData=function(t){if(t){this._data=t;this.labelname.color=Uint64.equal(t.playerID,game.Context.mainRoleId)?"#d3762e":"#567474";this.labelname.text=t.playerName;this.labelzhandouli.text=t.swordScore.toNumber()+"";this.labelzhiwei.text=n.GuildModel.getIns().getProfessionString(t.profession);this.labeljileigongxian.text=t.devote+"";if(n.GuildModel.getIns().isOnile(t.logoutTime)){this.labelzaixian.text=app.getLang("family_15")}else{this.labelzaixian.text=util.TimeUtil.getOfflineDay(game.Context.getServerTime()-t.logoutTime)}}};e.SINGLE_KEY="guild.GuildMemberItem";return e}(ui.banghui.banghuixinxiitemUI);n.GuildMemberItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(l){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._id=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.itemdaoju.clickHandler=new Laya.Handler(this,this.onClickHandler);this.recommend.visible=false;this.imgdi.visible=false;this.shijianlab.text=""};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t){this._id=t.id;this._cfg=t;if(t){var e=game.ItemUtil.createVO(t.item);if(!this.itemdaoju.data||this.itemdaoju.data.itemCfg.id!=t.item){this.itemdaoju.setData(e)}this.labelname.text=e.getName();var i=app.str2Array(t.price);this.imgmoney.icon.skin=csv.ItemProxy.getItemSmallIcon(parseInt(i[0]));this.zhezhaobox.visible=false;var n=void 0;for(var r=0,o=l.GuildModel.getIns().recordList;r<o.length;r++){var a=o[r];if(a.mallID==this._id){n=a;break}}var s=0;if(t.counttype==0){this.labelmiaoshu.text=""}else if(t.counttype==1){s=t.count-(n?n.dailynum:0);this.labelmiaoshu.text=app.getLang("每日限购({0}/{1})",s,t.count)}else if(t.counttype==2){s=t.count-(n?n.weeknum:0);this.labelmiaoshu.text=app.getLang("每周限购({0}/{1})",s,t.count)}else if(t.counttype==3){s=t.count-(n?n.total:0);this.labelmiaoshu.text=app.getLang("永久限购({0}/{1})",s,t.count)}if(t.counttype==0){this.zhezhaobox.visible=false}else{this.zhezhaobox.visible=!(s>0);this.shouqingimg.visible=this.zhezhaobox.visible}this.itemdaoju.shuzi.text="";this.setCostMoney(t.price);if(l.GuildModel.getIns().guildVO.getShopLevel()<csv.GuildProxy.getIns().getUlockLevel(this._cfg.shopid)){this.zhezhaobox.visible=true;this.shouqingimg.visible=false}}};t.prototype.setCostMoney=function(t){var e=app.str2Array(t,"-");var i=game.GridsModel.getIns().getItemCount(e[0]);if(i>=e[1]){this.labelmoneynum.color=game.STYLES.GREEN_COLOR_S}else{this.labelmoneynum.color=game.STYLES.RED_COLOR_S}this.labelmoneynum.text=e[1]+"";return parseInt(e[0])};t.prototype.onClickHandler=function(){if(this._cfg&&this.zhezhaobox.visible==false){if(l.GuildModel.getIns().guildVO.getShopLevel()>=csv.GuildProxy.getIns().getUlockLevel(this._cfg.shopid)){tip.TipManager.showNumChooseItemTip(this.itemdaoju.data,this._cfg,true,[tip.TipManager.TIP_BTN_TYPE.BUY_GUILD_SHOP])}}};t.SINGLE_KEY="guild.GuildShopItem";return t}(ui.shangcheng.shangchengitem3UI);l.GuildShopItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(h){var t=function(e){__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.setSelect(false);for(var t=1;t<=3;t++){this["xing"+t].visible=false}this.shuzi.text="";this.shuzhibg.visible=false;this.boxbanghuikeji.gray=true;this.img.skin="public/bg_lock01.png"};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){this.setSelect(false)};t.prototype.setData=function(t,e){this.sid=e;this._data=t;this.shuzi.text="";this.shuzhibg.visible=false;this.boxbanghuikeji.gray=true;this.img.skin="public/bg_lock01.png";var i=csv.GuildProxy.getIns().getTechAttr(this.sid,1);game.RedDotView.removeFrom(this);var n=h.GuildModel.getIns().guildVO.getBuildlevel();if(n>=this.sid){if(this._data&&this._data.lv){this.shuzi.text=app.getLang("zuoqi_11")+this._data.lv}else{this.shuzi.text=app.getLang("zuoqi_11")+"0"}this.shuzhibg.visible=true;this.boxbanghuikeji.gray=false;this.img.skin="res/icon/skill/"+i.icon+".png";var r=t?t.lv:0;var o=csv.GuildProxy.getIns().getTechMaxLevel(this.sid);var a=true;var s=csv.GuildProxy.getIns().getTechLimitLevel(this.sid,n);if(r<o&&r<s){var l=csv.GuildProxy.getIns().getTechAttr(this.sid,r+1);var u=app.str2Array(l.cost,";");for(var p=0;p<u.length;p++){if(!game.GridsModel.getIns().hasEnoughItems(u[p])){a=false;break}}}else{a=false}if(a){game.RedDotView.addTo(this,this.width,5)}}};t.prototype.setSelect=function(t){this.imgxuanzhong.visible=t};t.prototype.setRed=function(t){if(t){game.RedDotView.addTo(this)}else{game.RedDotView.removeFrom(this)}};t.SINGLE_KEY="guild.GuildSkillItem";return t}(ui.banghui.banghuikejiitem02UI);h.GuildSkillItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(s){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._index=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.onClickHandler)};t.prototype.onClickHandler=function(){var t=s.GuildModel.getIns().guildTask.starnum;var e=csv.GuildProxy.getIns().getTaskStar();if(t>=parseInt(e[this._index].star)){if(s.GuildModel.getIns().canReqAward(parseInt(e[this._index].star))){app.ProtocolRequest.GuildTaskStarAwardReq(parseInt(e[this._index].star));return}}tip.TipManager.show(this._vo)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.onStop()};t.prototype.refreshAll=function(){this.onStop()};t.prototype.setData=function(t,e){this._index=e;var i=app.str2Array(t.reward,"-");var n=i[0];var r=game.ItemUtil.createVO(n);this._vo=r;this.imgbaoxiang.skin=r.getIconUrl();this.labelnum.text=i[1];var o=s.GuildModel.getIns().guildTask.starnum;var a=csv.GuildProxy.getIns().getTaskStar();this.onStop();if(o>=parseInt(a[this._index].star)){if(s.GuildModel.getIns().canReqAward(parseInt(a[this._index].star))){this.onPlay()}}this.yilingqu.visible=false;if(s.GuildModel.getIns().getedAward(parseInt(a[this._index].star))){this.yilingqu.visible=true}};t.prototype.onPlay=function(){this.animationjihuo.play(0,true);this.animationjihuo.visible=true};t.prototype.onStop=function(){this.animationjihuo.stop();this.animationjihuo.visible=false};t.SINGLE_KEY="guild.GuildTaskAwardItem";return t}(ui.banghui.banghuiweituoitem01UI);s.GuildTaskAwardItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(I){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqiuzhu.clickHandler=new Laya.Handler(this,this.onHelpGuildQuestReq);this.btnjiaohuo.clickHandler=new Laya.Handler(this,this.onSubGuildQuestItemReq);this.btnwancheng.clickHandler=new Laya.Handler(this,this.onSubGuildQuestItemReq);this.btnwancheng.label=app.getLang("family_btn_label0");this.labelname.on(Laya.Event.CLICK,this,this.onShowTips);this.listxingji.renderHandler=new Laya.Handler(this,this.onItemRender)};e.prototype.onItemRender=function(t){if(t.dataSource==1){t.skin="public/bg_wujiaoxing1.png"}else{t.skin="public/bg_wujiaoxing7.png"}};e.prototype.onHelpGuildQuestReq=function(){var t=game.TaskModel.getIns().getTaskData(this._data.taskindex);if(t&&t.data.questSate==2){manager.FlowManager.instance.flowByStyle1(app.getLang("family_error_3"));return}if(this._data.helpflag==0){I.GuildController.getIns().onHelpGuildQuestReq(this._data.taskindex);var e=JSON.stringify({taskindex:this._data.taskindex,roleId:game.Context.mainRoleId.toString10(),itemId:this._awardItemVO.getItemId(),count:this._awardItemVO.count});var i={t:"",ext:e};var n=JSON.stringify(i);chat.ChatModel.getIns().sendMsg(chat.ChatModel.CHANNEL.FAMILY,game.Context.mainRoleId,n,"")}else{manager.FlowManager.instance.flowByStyle1(app.getLang("family_error_4"))}};e.prototype.onSubGuildQuestItemReq=function(){var t=game.TaskModel.getIns().getTaskData(this._data.taskindex);if(t.data.questSate==2){app.ProtocolRequest.TaskSubmit(this._data.taskindex)}else{var e=game.GridsModel.getIns().hasEnoughItems(t.cfg.param);var i=parseInt(app.str2Array(t.cfg.param,"-")[0]);var n=game.GridsModel.getIns().getItemByItemId(i);var r=parseInt(app.str2Array(t.cfg.param,"-")[1]);if(e){app.ProtocolRequest.SubQuestItemReq(this._data.taskindex,[n.getInstId()])}else{var o=I.GuildModel.getIns().guildVO.getShopLevel();var a=void 0;var s=void 0;for(var l=1;l<=o;l++){var u=csv.GuildProxy.getIns().getShopItemsByLevel(l);for(var p=0,h=u;p<h.length;p++){var c=h[p];if(i==c.item){s=c;for(var f=0,g=I.GuildModel.getIns().recordList;f<g.length;f++){var d=g[f];if(d.mallID==c.id){a=d;break}}break}}}var y=true;if(s){if(a){var m=0;if(s.counttype==0){m=1}else if(s.counttype==1){m=s.count-(a?a.dailynum:0)}else if(s.counttype==2){m=s.count-(a?a.weeknum:0)}else if(s.counttype==3){m=s.count-(a?a.total:0)}if(m>0){y=false}}else{y=false}}var v=csv.MallProxy.getIns().getPriceByItemID(1,i);var b=0;if(v.length>0){var _=game.ItemUtil.parserList(v)[0];b=_.count*(r-game.GridsModel.getIns().getItemCount(i))}if(!y){app.ViewManager.toggleDialog(I.GuildShopTips,1,0,[0,b,app.getLang("family_105"),Laya.Handler.create(this,this.gotoShopView,[s.shopid]),Laya.Handler.create(this,this.okHandler,[this._data.taskindex,v])])}else if(v.length>0){app.ViewManager.toggleDialog(I.GuildShopTips,1,0,[1,b,app.getLang("family_105"),Laya.Handler.create(this,this.okHandler,[this._data.taskindex,v]),null])}else{game.GridsModel.getIns().hasEnoughItems(t.cfg.param,false,true)}}}};e.prototype.okHandler=function(t,e){if(game.GridsModel.getIns().hasEnoughItems(e,false,true)){app.ProtocolRequest.SubGuildQuestBuyReq(t)}};e.prototype.gotoShopView=function(t){app.ViewManager.toggleDialog(I.GuildShopView,1,0,[t])};e.prototype.onDisplay=function(){game.GridsModel.getIns().on(game.GridsModel.EVENTS.ITEM_UPDATE,this,this.onChangeItem);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){game.GridsModel.getIns().off(game.GridsModel.EVENTS.ITEM_UPDATE,this,this.onChangeItem)};e.prototype.refreshAll=function(){};e.prototype.onChangeItem=function(t,e){var i=this._awardItemVO.getItemId();if(e&&e.getItemId()==i){var n=game.GridsModel.getIns().getItemCount(i);this.labelnum.color=game.STYLES.DESC_TXT_COLOR_S;if(n<this._need){this.labelnum.color=game.STYLES.RED_COLOR_S}this.labelnum.text="("+n+"/"+this._need+")"}};e.prototype.onShowTips=function(){tip.TipManager.show(this._awardItemVO,true,true)};e.prototype.setData=function(t){this.box0.visible=false;this.box1.visible=false;this.updateView(t)};e.prototype.updateView=function(t){this._data=t;if(t){var e=void 0;var i=void 0;var n=void 0;this.disabled=false;if(t.taskindex>0){var r=game.TaskModel.getIns().getTaskData(t.taskindex);if(r){e=r.data;i=r.cfg}else{i=csv.TaskProxy.getIns().getCfg(t.taskindex)}n=csv.GuildProxy.getIns().getTask(t.taskindex)}else{this.disabled=true;e=t.pretask[0];n=csv.GuildProxy.getIns().getTask(e.questIndex);i=csv.TaskProxy.getIns().getCfg(e.questIndex)}this.labelbiaoti.text=csv.TaskProxy.getTaskName(i);this.imgxuanchuanhua.skin="res/static/"+n.picture+".png";var o=game.ItemUtil.parserList(i.param)[0];this._awardItemVO=o;var a=o.getItemId();var s=o.count;this._need=s;this.ani1.gotoAndStop(0);if(e){if(e.questSate==2||e.questSate==3){this.ani1.gotoAndStop(1)}if(e.questSate==2){this.labelnum.color=game.STYLES.DESC_TXT_COLOR_S;this.labelnum.text="("+s+"/"+s+")"}this.setStar(e.star)}this.labelname.text=o.getName();var l=game.GridsModel.getIns().getItemCount(a);this.labelnum.color=game.STYLES.DESC_TXT_COLOR_S;if(l<s){this.labelnum.color=game.STYLES.RED_COLOR_S}this.labelnum.text="("+l+"/"+s+")";if(t.helpflag==1){this.btnqiuzhu.label=app.getLang("family_btn_label2")}else{this.btnqiuzhu.label=app.getLang("family_btn_label1")}if(t.helpflag==1){this.btnqiuzhu.gray=true}else if(e&&(e.questSate==2||e.questSate==3)){this.btnqiuzhu.gray=true}else{this.btnqiuzhu.gray=false}var u=app.str2Array(n.reward,";");if(u[0]){this.box0.visible=true;this.imgmoney01.parserIcon(u[0],this.labelmoneynum01,"x")}if(u[1]){this.box1.visible=true;this.imgmoney02.parserIcon(u[1],this.labelmoneynum02,"x")}}};e.prototype.setStar=function(t){var e=[];for(var i=0;i<7;i++){if(i<t){e.push(1)}else{e.push(0)}}this.listxingji.array=e};e.SINGLE_KEY="guild.GuildTaskItem";return e}(ui.banghui.banghuiweituoitem02newUI);I.GuildTaskItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.jinengname.text=Attributes.getPropName(t[0].propId);this.shuzhi1.text=t[0].value+"";this.shuzhi2.text=t[1].value+"";this.jiantou.visible=true};e.SINGLE_KEY="guild.GuildTechAttrItem";return e}(ui.banghui.banghuikejiitem01UI);t.GuildTechAttrItem=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.jinengname.text="";this.shuzhi1.text="";this.shuzhi2.text=""};e.SINGLE_KEY="guild.GuildTechItem";return e}(ui.banghui.banghuikejiitem01UI);t.GuildTechItem=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.awardid=0;t.award=0;t._atime=0;t._played=false;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnkaiqi.clickHandler=new Laya.Handler(this,this.onClickHandler);this.itemdaoju.clickHandler=new Laya.Handler(this,this.onShowTips)};t.prototype.onClickHandler=function(){i.GuildController.getIns().onGainGuildTreasureReq(this.awardid)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this.clean()};t.prototype.refreshAll=function(){};t.prototype.onShowTips=function(t){app.ViewManager.toggleDialog(tip.TipMeiator,1,0,[tip.TipItemView,t,false])};t.prototype.setData=function(t){this.isGeted(false);this.awardid=t.awardid;this.award=t.award;this._atime=t.atime;this.labelname.text="";var e=game.ItemUtil.createVO(t.award);this.labelname.text=e.getName();var i=game.ItemUtil.createVO(this.award);this.labelxiangxi.text=i?i.getName()+"*1":"";this.itemdaoju.setData(e);this.btnkaiqi.disabled=false;if(t.atime>0){this.labelxiangxi.text=app.getLang("family_92",util.TimeUtil.formatTime(t.atime-game.Context.getServerTime()));Laya.timer.loop(1e3,this,this.coolDown)}else{this.coolDown()}};t.prototype.coolDown=function(){var t=this._atime-game.Context.getServerTime();if(t>0){this.labelxiangxi.text=app.getLang("family_92",util.TimeUtil.formatTime(t))}else{this.labelxiangxi.text=app.getLang("family_92",util.TimeUtil.formatTime(0));this.btnkaiqi.disabled=true;this.clean();this.imgyiguoqi.visible=true;i.GuildModel.getIns().delGuildTreasure([this.awardid]);i.GuildModel.getIns().event(i.GuildTreasureView.TIMEOUT_TREASURE,[this.awardid])}};t.prototype.clean=function(){Laya.timer.clear(this,this.coolDown)};t.prototype.isGeted=function(t){this.clean();this.imgyikaiqi.visible=t;this.btnkaiqi.visible=!t;this.imgyiguoqi.visible=false;this.labelxiangxi.text=""};t.prototype.playItemEffect=function(){if(this._played==false){manager.EffectManager.playItemEffect("skill_beibaoronglian",this.itemdaoju,null,null,this.itemdaoju);this._played=true}};t.prototype.updateAward=function(t,e){var i;if(t.length>0){i=t[0]}else if(e.length>0){i=e[0]}if(i instanceof ItemData){var n=game.ItemUtil.createVO(i.itemID);n.setCount(i.value);this.itemdaoju.setData(n);this.labelxiangxi.text=n.getName()+"x"+game.MoneyModel.format(n.count)}else if(i instanceof ItemInfoData){var n=game.ItemUtil.createVO(i.itemId,i);this.itemdaoju.setData(n);this.labelxiangxi.text=n.getName()+"x"+game.MoneyModel.format(n.count)}};t.SINGLE_KEY="guild.GuildTreasureItem";return t}(ui.banghui.banghuibaokuitemUI);i.GuildTreasureItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.labeltime01.text=util.TimeUtil.formatDate(t.ctime,true,true,true,true,"-");this.labelxiangxi.text=app.getLang("{0}进行了捐赠（今日已捐赠{1}次）",t.uname,t.cnum)};e.SINGLE_KEY="guild.ItemDonate";return e}(ui.banghui.juanxianjiluitemUI);t.ItemDonate=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(r){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwanjia.itemRender=r.GuildApplyItem;this.listwanjia.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.listwanjia.selectEnable=true;this.listwanjia.vScrollBarSkin=" ";this.listwanjia.array=[];this.btnquanbutongyi.clickHandler=new Laya.Handler(this,this.onReceive);this.btnquanbujujue.clickHandler=new Laya.Handler(this,this.onReject);this.btnshenqingshezhi.clickHandler=new Laya.Handler(this,this.onShowSettingView)};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource,e)};e.prototype.onDisplay=function(){r.GuildModel.getIns().on(r.GuildEvent.EVENT.GUILDJOINLIST_UPDATE,this,this.onUpdataList);r.GuildController.getIns().onOpenJoinGuildReq();this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){r.GuildModel.getIns().on(r.GuildEvent.EVENT.GUILDJOINLIST_UPDATE,this,this.onUpdataList)};e.prototype.refreshAll=function(){};e.prototype.onReceive=function(){this.sendCMD(1)};e.prototype.onReject=function(){this.sendCMD(0)};e.prototype.sendCMD=function(t){var e=r.GuildModel.getIns().guildJoinInfArr;if(e.length>0){var i=[];for(var n=0;n<e.length;n++){i.push(e[n].playerID)}r.GuildController.getIns().onOperateJoinGuildReq(i,t)}else{manager.FlowManager.instance.flowByStyle1(app.getLang("当前无人申请"))}};e.prototype.onShowSettingView=function(){app.ViewManager.toggleDialog(r.GuildApplySettingView,1,0)};e.prototype.onUpdataList=function(){this.listwanjia.array=r.GuildModel.getIns().guildJoinInfArr};e.SINGLE_KEY="guild.GuildApplyListView";return e}(ui.banghui.shenqingliebiaoviewUI);r.GuildApplyListView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var t=function(t){__extends(i,t);function i(){return t!==null&&t.apply(this,arguments)||this}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnqueding.clickHandler=new Laya.Handler(this,this.onbtnClick);this.richtextzhanlinum.restrict="0-9";this.richtextzhanlinum.text="0";this.richtextzhanlinum.maxChars=6};i.prototype.onDisplay=function(){this.callLater(this.refreshAll)};i.prototype.onUnDisplay=function(){};i.prototype.refreshAll=function(){if(n.GuildModel.getIns().minFightFlag==0){this.checkboxxuanze.selected=false}else{this.checkboxxuanze.selected=true}this.richtextzhanlinum.text=n.GuildModel.getIns().minFight.toNumber()*1e-4+""};i.prototype.onbtnClick=function(){var t;var e=Uint64.format(parseInt(this.richtextzhanlinum.text)*1e4);if(this.checkboxxuanze.selected){t=1}else{t=0}n.GuildController.getIns().onAutoJoinGuildLimitReq(t,e);app.ViewManager.toggleDialog(i,-1)};i.SINGLE_KEY="guild.GuildApplySettingView";return i}(ui.banghui.shenqingshezhitipUI);n.GuildApplySettingView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnsiliao.clickHandler=new Laya.Handler(this,this.onClickHandler);this.btnshengji.clickHandler=new Laya.Handler(this,this.onCloseView)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){this.data=this.dataSource;this.labelxiangxi01.text=game.Context.getGuildName(this.dataSource.guildName);this.labelxiangxi03.text=app.getLang("zuoqi_11")+this.dataSource.level;this.labelxiangxi04.text=this.dataSource.chiefName;this.labelxiangxi05.text=game.MoneyModel.format(this.dataSource.totalSword.toNumber());this.labelxiangxi06.text=this.dataSource.members+"/"+csv.GuildProxy.getIns().getBaseCfg(this.dataSource.level).people;if(Uint64.equal(this.dataSource.chiefID,Uint64.ZERO)){this.btnsiliao.visible=false}else{var t=Uint64.equal(this.dataSource.chiefID,game.Context.mainRoleId);this.btnsiliao.visible=!t}};e.prototype.onClickHandler=function(){chat.ChatModel.getIns().showSiLiaoAlert([this.data.chiefID,this.data.chiefName])};e.prototype.onCloseView=function(){app.ViewManager.toggleDialog(e)};e.SINGLE_KEY="guild.GuildInfoTipView";return e}(ui.banghui.banghuixinxitipUI);t.GuildInfoTipView=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guildboss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.init=function(){app.ViewManager.regist(i.GuildBossView,"banghui.atlas");game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILDBOSS,i.GuildBossView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILDBOSS_TREASURY,i.GuildBossTreasuryView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILDBOSS_HURTREWARD,i.GuildBossHurtRewardView);game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILDBOSS_RANK,rank.GuildBossRankView);this.model=i.GuildBossModel.getIns()};e.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.DevilBossDataNtf,this,this.onDevilBossDataNtf);this.addMsgListener(app.ProtocolResponse.DevilBossRoleAndHurtNtf,this,this.onDevilBossRoleAndHurtNtf);this.addMsgListener(app.ProtocolResponse.DevilBossHurtAwardAck,this,this.onDevilBossHurtAwardAck)};e.prototype.onDevilBossDataNtf=function(t,e){this.model.updateChangeData(e)};e.prototype.onDevilBossRoleAndHurtNtf=function(t,e){this.model.updateRoleNumAndHurt(e)};e.prototype.onDevilBossHurtAwardAck=function(t,e){if(e.result==1){}};e.SINGLE_KEY="guildboss.GuildBossModule";return e}(app.ModuleBase);i.GuildBossModule=t})(guildboss||(guildboss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("boss_guildbox.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getCurChongNum=function(){var t=1;var e=this.getCfg(t);while(e&&guildboss.GuildBossModel.getIns().total_hurt>e.needdps){t++;e=this.getCfg(t)}if(!e){t--}return t};e.SINGLE_KEY="csv.GuildBossBoxProxy";return e}(app.ModelBase);t.GuildBossBoxProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guildboss;(function(t){var e=function(e){__extends(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;t.role_size=0;t.total_hurt=0;return t}i.getIns=function(){return app.Singleton.getInstance(i)};i.prototype.init=function(){this.devilbossselfhurt=0;this.devilbossbattletime=0;this.devilbossguildawardid=0};i.prototype.updateRoleNumAndHurt=function(t){this.role_size=t.role_size;this.total_hurt=t.total_hurt.toNumber();Laya.timer.callLater(this,this.updateRedDot);this.event(i.UPDATE_ROLENUM_HURT)};i.prototype.updateChangeData=function(t){this.devilbossbattletime=t.devilbossbattletime;this.devilbossguildawardid=t.devilbossguildawardid;this.devilbossselfaward=t.devilbossselfaward;this.devilbossselfhurt=t.devilbossselfhurt.toNumber();Laya.timer.callLater(this,this.updateRedDot);guild.GuildController.getIns().onFunctionRedDotChange();this.event(i.UPDATE_CHANGE_DATA)};i.prototype.getGuildBossRunTime=function(){var t=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.GUILD_BOSS);var e=0;if(t){var i=t.param1;e=i-this.devilbossbattletime}return e};i.prototype.getNextNeedHurt=function(){var t=csv.GuildBossBoxProxy.getIns().getCurChongNum();var e=csv.GuildBossBoxProxy.getIns().getCfg(t);var i=0;if(t>1){var n=csv.GuildBossBoxProxy.getIns().getCfg(t-1);if(e){i=e.needdps-n.needdps}}else{i=e?e.needdps:0}return i};i.prototype.getTotalHurt=function(){var t=csv.GuildBossBoxProxy.getIns().getCurChongNum();var e=csv.GuildBossBoxProxy.getIns().getCfg(t);return e.needdps};i.prototype.getCurSurpHurt=function(){var t;var e=csv.GuildBossBoxProxy.getIns().getCurChongNum();var i=csv.GuildBossBoxProxy.getIns().getCfg(e);if(i){t=i.needdps-this.total_hurt}return t};i.prototype.getCanGetReward=function(){if(i.getIns().devilbossselfhurt<=0){return[]}var t=this.hasGetReward();return t};i.prototype.hasGetReward=function(){var t=[];var e=csv.GuildBossBoxProxy.getIns().getCurChongNum();var i=csv.GuildBossBoxProxy.getIns().cfgArr;for(var n=0;n<i.length;n++){var r=i[n];if(e>r.id&&r.id>this.devilbossguildawardid&&r.rewarditem!=""){var o=game.ItemUtil.parserList(r.rewarditem);for(var a=0;a<o.length;a++){var s=this.getSameTypeIndex(t,o[a]);if(s!=-1){t[s].setCount(t[s].count+o[a].count)}else{t.push(o[a])}}}}game.ItemUtil.sortItemsByQua(t);return t};i.prototype.getSameTypeIndex=function(t,e){for(var i=0;i<t.length;i++){if(t[i].getItemId()==e.getItemId()){return i}}return-1};i.prototype.getSortHurtRewardCfgArr=function(){var t=[];var e=[];var i=[];var n=csv.GuildBossRewardProxy.getIns().cfgArr;for(var r=0;r<n.length;r++){if(this.devilbossselfaward&&this.devilbossselfaward.indexOf(n[r].id)!=-1){i.push(n[r])}else if(this.devilbossselfhurt&&this.devilbossselfhurt>=n[r].needdps){t.push(n[r])}else{e.push(n[r])}}var o=t.concat(e).concat(i);return o};i.prototype.isShowNoticeIcon=function(){var t=guild.GuildModel.getIns().isGuild&&guild.GuildModel.getIns().isFunOpended(guild.GUILD_BUILD_ENUM.HULU_DEFINE,false);var e=this.getGuildBossRunTime();if(t&&e>0){return true}return false};i.prototype.isShowRedDot=function(){if(this.getCanGetReward().length>0||this.hasHurtDot()){return true}return false};i.prototype.updateRedDot=function(){if(this.getCanGetReward().length>0){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILDBOSS_TREASURY)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILDBOSS_TREASURY)}if(this.hasHurtDot()){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILDBOSS_HURTREWARD)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILDBOSS_HURTREWARD)}};i.prototype.hasHurtDot=function(){var t=csv.GuildBossRewardProxy.getIns().cfgArr;var e;for(var i=0;i<t.length;i++){e=this.devilbossselfaward?this.devilbossselfaward.indexOf(t[i].id):-1;if(e==-1&&this.devilbossselfhurt>=t[i].needdps){return true}}return false};i.SINGLE_KEY="guildboss.GuildBossModel";i.UPDATE_ROLENUM_HURT="UPDATE_ROLENUM_HURT";i.UPDATE_CHANGE_DATA="UPDATE_CHANGE_DATA";return i}(app.ModelBase);t.GuildBossModel=e})(guildboss||(guildboss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("boss_guildreward.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.SINGLE_KEY="csv.GuildBossRewardProxy";return e}(app.ModelBase);t.GuildBossRewardProxy=e})(csv||(csv={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guildboss;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.btnlingqu.clickHandler=new Laya.Handler(this,this.onGetClickBtn);this.btnqianwang.clickHandler=new Laya.Handler(this,this.onGoFuncClickBtn);this.listjiangli.itemRender=grids.GridView;this.listjiangli.renderHandler=grids.GridView.CommonItemRender};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;var e=n.GuildBossModel.getIns();var i=game.ItemUtil.parserList(t.rewarditem);this.labelleiji.text=app.getLang(t.desc);this.listjiangli.array=i;this.labeljingyanzhi.text=game.MoneyModel.format(e.devilbossselfhurt)+"/"+game.MoneyModel.format(t.needdps);this.jindu.value=e.devilbossselfhurt/t.needdps;this.updateState()};e.prototype.updateState=function(){var t=n.GuildBossModel.getIns();var e=t.devilbossselfaward?t.devilbossselfaward.indexOf(this._data.id):-1;game.RedDotView.removeFrom(this.btnlingqu);if(e!=-1){this.imgyilingqu.visible=true;this.btnlingqu.visible=false;this.btnqianwang.visible=false}else{this.imgyilingqu.visible=false;if(t.devilbossselfhurt>=this._data.needdps){this.btnlingqu.visible=true;this.btnqianwang.visible=false;game.RedDotView.addTo(this.btnlingqu)}else{this.btnlingqu.visible=false;this.btnqianwang.visible=true}}};e.prototype.onGetClickBtn=function(){if(csv.MapProxy.isInKuaFuMap()){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_errortips1"));return}app.ProtocolRequest.DevilBossHurtAwardReq(0,this._data.id)};e.prototype.onGoFuncClickBtn=function(){game.ClosureManager.callFunction(this._data.functionid)};e.SINGLE_KEY="guildboss.GuildBossHurtRewardCell";return e}(ui.banghui.fengmoshanghaijiangliitemUI);n.GuildBossHurtRewardCell=t})(guildboss||(guildboss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guildboss;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listliebiao.itemRender=i.GuildBossHurtRewardCell;this.listliebiao.renderHandler=new Laya.Handler(this,this.onRenderHandler);this.shuoming.text=app.getLang("guild_boss_tips12")};e.prototype.onDisplay=function(){i.GuildBossModel.getIns().on(i.GuildBossModel.UPDATE_CHANGE_DATA,this,this.onUpdateData);this.callLater(this.refreshAll);this.listliebiao.scrollBar.value=0};e.prototype.onUnDisplay=function(){i.GuildBossModel.getIns().off(i.GuildBossModel.UPDATE_CHANGE_DATA,this,this.onUpdateData)};e.prototype.onUpdateData=function(){this.callLater(this.refreshAll)};e.prototype.refreshAll=function(){this.listliebiao.array=i.GuildBossModel.getIns().getSortHurtRewardCfgArr()};e.prototype.onRenderHandler=function(t,e){t.setData(t.dataSource)};e.SINGLE_KEY="guildboss.GuildBossHurtRewardView";return e}(ui.banghui.fengmoshanghaijiangliUI);i.GuildBossHurtRewardView=t})(guildboss||(guildboss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guildboss;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.qianwangbtn.clickHandler=new Laya.Handler(this,this.onClickGetHandler);this.listjiangli.hScrollBarSkin="";this.listjiangli.itemRender=grids.GridView;this.listjiangli.renderHandler=grids.GridView.CommonItemRender;this.centerMediator=new game.CenterLayoutMediator(this.listjiangli,this.boxdaoju,98,this.listjiangli.spaceX);this.shuoming.text=app.getLang("guild_boss_tips7")};e.prototype.onDisplay=function(){n.GuildBossModel.getIns().on(n.GuildBossModel.UPDATE_CHANGE_DATA,this,this.onUpdateData);this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){n.GuildBossModel.getIns().off(n.GuildBossModel.UPDATE_CHANGE_DATA,this,this.onUpdateData)};e.prototype.onUpdateData=function(){this.callLater(this.refreshAll)};e.prototype.refreshAll=function(){var t=n.GuildBossModel.getIns();var e=t.hasGetReward();if(e.length>0){this.migzanwu.visible=false;this.lingqubox.visible=true;this.centerMediator.array=e;if(n.GuildBossModel.getIns().devilbossselfhurt>0){game.RedDotView.addTo(this.qianwangbtn)}else{game.RedDotView.removeFrom(this.qianwangbtn)}}else{this.migzanwu.visible=true;this.lingqubox.visible=false;game.RedDotView.removeFrom(this.qianwangbtn)}};e.prototype.onClickGetHandler=function(){var t=n.GuildBossModel.getIns().getCanGetReward();if(n.GuildBossModel.getIns().devilbossselfhurt<=0){var e=csv.ActivityFunction.getIns().getCloseTime(csv.ActivityFunction.ENUM.GUILD_BOSS);var i=e-game.Context.getServerTime();if(i<=0){manager.FlowManager.instance.flowByStyle1(app.getLang("guild_boss_tips16"))}else{manager.FlowManager.instance.flowByStyle1(app.getLang("guild_boss_tips11"))}return}if(csv.MapProxy.isInKuaFuMap()){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_errortips1"));return}if(t.length){app.ProtocolRequest.DevilBossHurtAwardReq(1)}};e.SINGLE_KEY="guildboss.GuildBossTreasuryView";return e}(ui.banghui.fengmobaokuviewUI);n.GuildBossTreasuryView=t})(guildboss||(guildboss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guildboss;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.surpCloseTime=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.qianwangbtn.clickHandler=new Laya.Handler(this,this.onClickBtn);game.HelperViewHandler.registerStr([this.btnwenhao,this.shuoming],"func277t","func2277");this.listshuxing.renderHandler=new Laya.Handler(this,this.onWuXingRenderHandler);this.model=i.GuildBossModel.getIns();this.roleAvatar=new avatar.AvatarAnimation;this.avatarData=new avatar.AvatarData;this.weizhi.addChild(this.roleAvatar);this.labeltishi.text=app.getLang("guild_boss_tips15")};t.prototype.onDisplay=function(){this.model.on(i.GuildBossModel.UPDATE_ROLENUM_HURT,this,this.onUpdateHurtData);this.model.on(i.GuildBossModel.UPDATE_CHANGE_DATA,this,this.onUpdateData);var t=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.GUILD_BOSS);if(t){Laya.timer.clear(this,this.openCountDown);this.closeCountDown();Laya.timer.loop(1e3,this,this.closeCountDown)}this.callLater(this.refreshAll);this.updateLeastTime()};t.prototype.onUnDisplay=function(){this.model.off(i.GuildBossModel.UPDATE_ROLENUM_HURT,this,this.onUpdateHurtData);this.model.off(i.GuildBossModel.UPDATE_CHANGE_DATA,this,this.onUpdateData);Laya.timer.clear(this,this.openCountDown);Laya.timer.clear(this,this.closeCountDown)};t.prototype.onUpdateHurtData=function(){this.callLater(this.refreshAll)};t.prototype.onUpdateData=function(){this.callLater(this.updateLeastTime)};t.prototype.updateLeastTime=function(){var t=this.model.getGuildBossRunTime();if(t>0){this.labeldaojishi.text=app.getLang("guild_boss_tips14",util.TimeUtil.formatTime(t,false));this.labeltishi.visible=false;this.labeldaojishi.visible=this.qianwangbtn.visible=true}else{this.labeltishi.visible=true;this.labeldaojishi.visible=this.qianwangbtn.visible=false}};t.prototype.refreshAll=function(){var t=dailytask.DailyTaskModel.getIns().getOpenActivityByType(csv.ActivityFunction.ENUM.GUILD_BOSS);if(t){this.boxdaojishi1.visible=false;this.boxdaojishi3.visible=false;this.neirongbox.visible=true;var e=csv.BossProxy.getIns().getBossArrByType(csv.BossProxy.ENUM.BOSS_GUILD);var i=csv.MonsterProxy.getIns().getMonsterBase(e[0].bosssetbase);var n=csv.BossProxy.getIns().getMonsterId(e[0].bosssetbase);var r=csv.MonsterProxy.getIns().getCfg(n);this.listshuxing.array=i.element.split(";");this.avatarData.roleKey=r.res;this.avatarData.fileName=game.AniView.FILE_NAME.MONSTER;this.roleAvatar.setAniData(this.avatarData);this.roleAvatar.setAni(avatar.AvatarAnimation.ANI_ENUMS.IDLE,6);this.roleAvatar.play();this.updateCurData()}else{this.updateCloseData()}};t.prototype.updateCloseData=function(){Laya.timer.clear(this,this.closeCountDown);this.boxdaojishi1.visible=true;this.neirongbox.visible=false;this.imgdaojishi.text=this.imgdaojishi2.text=app.getLang("guild_boss_tips2");if(this.model.total_hurt>0){var t=csv.GuildBossBoxProxy.getIns().getCurChongNum();var e=t>1?t-1:1;this.boxdaojishi1.visible=true;this.boxdaojishi3.visible=false;if(e<100){this.chapterBox3.visible=true;this.chapterBox4.visible=false;this.chong3.value=util.CNUtil.toCNLower(e)}else{this.chapterBox3.visible=false;this.chapterBox4.visible=true;this.chong4.value=util.CNUtil.toCNLower(e)}this.chapterBox3.visible=e<100;this.chapterBox4.visible=!this.chapterBox3.visible}else{this.boxdaojishi1.visible=false;this.boxdaojishi3.visible=true}this.openCountDown();Laya.timer.loop(1e3,this,this.openCountDown)};t.prototype.updateCurData=function(){var t=csv.GuildBossBoxProxy.getIns().getCurChongNum();var e=this.model.getNextNeedHurt();if(t<100){this.chapterBox.visible=true;this.chapterBox1.visible=false;this.chong.value=util.CNUtil.toCNLower(t)}else{this.chapterBox.visible=false;this.chapterBox1.visible=true;this.chong1.value=util.CNUtil.toCNLower(t)}if(e){this.imgtishi.visible=false;this.qianwangbox.visible=true;var i=this.model.getCurSurpHurt();this.labeljingyan.text=game.MoneyModel.format(i)+"/"+game.MoneyModel.format(e);this.jindu.value=i/e;this.labelmiaoshu.text=app.getLang("guild_boss_tips9",this.model.role_size)}else{this.imgtishi.visible=true;this.qianwangbox.visible=false;this.labeljingyan.text="";this.jindu.value=1}};t.prototype.onWuXingRenderHandler=function(t,e){var i=t.dataSource;var n=app.str2Array(i,"-");var r=Attributes.getWuxingEnumType(parseInt(n[0]));t.wuxingimg.skin="public/bg_wuxing_"+r+".png";t.shuzhi.text=n[n.length-1]};t.prototype.openCountDown=function(){var t=csv.ActivityFunction.getIns().getNextOpenTime(csv.ActivityFunction.ENUM.GUILD_BOSS);if(t>0){}else{Laya.timer.clear(this,this.openCountDown);this.refreshAll()}};t.prototype.closeCountDown=function(){var t=csv.ActivityFunction.getIns().getCloseTime(csv.ActivityFunction.ENUM.GUILD_BOSS);this.surpCloseTime=t-game.Context.getServerTime();if(this.surpCloseTime>0){var e=util.TimeUtil.formatTime1(this.surpCloseTime,true,true,false);this.labdaojishi1.text=app.getLang("guild_boss_time",e)}else{this.labdaojishi1.text="";Laya.timer.clear(this,this.closeCountDown);this.updateCloseData()}};t.prototype.onClickBtn=function(){if(csv.MapProxy.getIns().checkSameMapTypoe(csv.MapProxy.MAP_TYPE.GUILD_BOSS)){return}if(!battle.BattleModel.getIns().checkJumpState()){return}var t=this.model.getGuildBossRunTime();if(t<=0){manager.FlowManager.instance.flowByStyle1(app.getLang("guild_boss_tips13"));return}var e=csv.BossProxy.getIns().getBossArrByType(csv.BossProxy.ENUM.BOSS_GUILD);app.ProtocolRequest.JoinBossReq(e[0].id)};t.SINGLE_KEY="guildboss.GuildBossView";return t}(ui.banghui.fengmolingtanviewUI);i.GuildBossView=t})(guildboss||(guildboss={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(c){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.boFirst=true;t.boZheng=true;t.emptyGuild=new GuildChampionTeam;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){this._model=c.GuildPkModel.getIns();app.ViewManager.regist(c.GuildPkView,"kuafuzhengba.atlas");app.ViewManager.regist(c.GuildPkMemberView,"kuafuzhengba.atlas");app.ViewManager.regist(c.GuildPkRwdView,"kuafuzhengba.atlas");app.ViewManager.regist(dailytask.ActivityFuncOpenView,"uieffect/ui_zhunbeizhong.atlas","uieffect/ui_jinxingzhong.atlas");this.emptyGuild=new GuildChampionTeam;this.emptyGuild.memberList=[];this.emptyGuild.serverId=0;this.emptyGuild.guildId=Uint64.ZERO;this.emptyGuild.guildName=app.getLang("kuafu_tips20");main.MainUIIcon.iconClassMap[csv.MainIconProxy.GUILD_PK]=c.GuildPkMainIcon;game.WindowsResigter.registFunctionView(csv.FunctionsProxy.ENUMS.GUILD_PK,c.GuildPkView);c.GuildModel.getIns().on(c.GuildEvent.EVENT.GUILD_STATE_CHANGE,this,this.askForSession)};t.prototype.initCommands=function(){this.addMsgListener(app.ProtocolResponse.GuildChampionSessionAck,this,this.onGuildChampionSessionAck);this.addMsgListener(app.ProtocolResponse.GuildChampionBattleListAck,this,this.onGuildChampionBattleListAck)};t.prototype.onGuildChampionSessionAck=function(t,e){console.log("onGuildChampionSessionAck-----------\x3e",e);this._model.info=e;var i=this._model.info.guildPair;if(i.length!=0){if(!i[1]){i[1]=this.emptyGuild}if(i[1].serverId==game.Context.cursvrid){this.boZheng=false}}c.GuildPkModel.getIns().printTime();for(var n=0;n<3;n++){this._model.GuildPairs[n].benfu=e.guildPair[n*2+(this.boZheng?0:1)]?e.guildPair[n*2+(this.boZheng?0:1)]:this.emptyGuild;this._model.GuildPairs[n].waifu=e.guildPair[n*2+(this.boZheng?1:0)]?e.guildPair[n*2+(this.boZheng?1:0)]:this.emptyGuild;this._model.benfuGuilds[n]=e.guildPair[n*2+(this.boZheng?0:1)]?e.guildPair[n*2+(this.boZheng?0:1)]:this.emptyGuild;this._model.WaifuGuilds[n]=e.guildPair[n*2+(this.boZheng?1:0)]?e.guildPair[n*2+(this.boZheng?1:0)]:this.emptyGuild}csv.FunctionsProxy.getIns().event(csv.FunctionsProxy.EVENTS.ADD,csv.FunctionsProxy.getIns().getCfg(csv.FunctionsProxy.ENUMS.GUILD_PK));this._model.event(c.GuildPkModel.INIT);this._model.setGuildPkRed();this._model.setGuildPkShopRed();if(this.boFirst){var r=csv.CycleActivityFunction.getIns().getCfg(e.actid);if(r){var o=e.endTime-game.Context.getServerTime();if(o>=0){Laya.timer.once((o+1)*1e3,this,this.askForSession)}o=e.baomingEndTime-game.Context.getServerTime();if(o>=0){Laya.timer.once((o+1)*1e3,this,this.askForSession)}var a=game.Context.getServerTime()-e.startTime;var s=util.TimeUtil.getWeekTime(e.startTime,r.date5);o=s-a;if(o>=0){Laya.timer.once((o+1)*1e3,this,this.askForResult)}if(e.battleStartTime>game.Context.getServerTime()&&e.battleStartTime-3600<game.Context.getServerTime()&&csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.GUILD_PK)){dailytask.DailyTaskModel.getIns().addCycleActivity(r)}}this.boFirst=false}};t.prototype.onGuildChampionBattleListAck=function(t,e){if(!this.boZheng){switch(e.finalState){case 1:e.finalState=2;break;case 2:e.finalState=1;break}for(var i in e.serverBattleList){var n=e.serverBattleList[i];switch(n.guildFinalState){case 1:n.guildFinalState=2;break;case 2:n.guildFinalState=1;break}var r=n.guildId_2;n.guildId_2=n.guildId;n.guildId=r;var o=n.serverId_2;n.serverId_2=n.serverId;n.serverId=o;var a=n.guildName_2;n.guildName_2=n.guildName;n.guildName=a;var s=n.serverName_2;n.serverName_2=n.serverName;n.serverName=s;var l=n.remainCount2;n.remainCount2=n.remainCount1;n.remainCount1=l;for(var u in n.battleList){var p=n.battleList[u];var h=p.player1;p.player1=p.player2;p.player2=h;switch(p.state){case 1:p.state=2;break;case 2:p.state=1;break}}}}this._model.battleInfo=e;this._model.IsBattleEnd=e.finalState!=0;this._model.event(c.GuildPkModel.REFRESH);this._model.setGuildPkRed();this._model.setGuildPkShopRed()};t.prototype.askForSession=function(){app.ProtocolRequest.GuildChampionSessionReq()};t.prototype.askForResult=function(){app.ProtocolRequest.GuildChampionBattleListReq()};t.SINGLE_KEY="guild.GuildPkModule";return t}(app.ModuleBase);c.GuildPkModule=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var csv;(function(t){var e=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.init=function(){var t=app.Config.getResById("activity_cycle.csv");this.cfgMap=t.getMap("id");this.cfgArr=t.getArray()};e.prototype.getCfg=function(t){return this.cfgMap[t]};e.prototype.getArr=function(){return this.cfgArr};e.SINGLE_KEY="csv.CycleActivityFunction";e.ENUM={GUILD_PK:2};return e}(app.ModelBase);t.CycleActivityFunction=e})(csv||(csv={}));var guild;(function(t){var e=function(){function t(){}return t}();t.GuildPkGuildPair=e})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var o;(function(t){t[t["iS_PREPARING"]=1]="iS_PREPARING";t[t["RUNNING"]=2]="RUNNING";t[t["END"]=3]="END"})(o=n.EGuildPkStatus||(n.EGuildPkStatus={}));var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t._shopFirstOpen=true;t.GuildPairs=[new n.GuildPkGuildPair,new n.GuildPkGuildPair,new n.GuildPkGuildPair];t.benfuGuilds=[];t.WaifuGuilds=[];return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.init=function(){};Object.defineProperty(t.prototype,"shopFirstOpen",{set:function(t){this._shopFirstOpen=t;this.setGuildPkShopRed()},enumerable:true,configurable:true});t.prototype.setGuildPkRed=function(){};t.prototype.setGuildPkShopRed=function(){var t=csv.CycleActivityFunction.getIns().getCfg(this.info.actid);if(this._shopFirstOpen&&this.info.endTime>game.Context.getServerTime()&&util.TimeUtil.checkIfReachWeekTime(this.info.startTime,t.date5)&&this.checkIfShopOpen()){game.ClosureManager.addDot(csv.FunctionsProxy.ENUMS.GUILD_PK_SHOP)}else{game.ClosureManager.removeDot(csv.FunctionsProxy.ENUMS.GUILD_PK_SHOP)}};t.prototype.checkIfShopOpen=function(){var t=false;var e=csv.CycleActivityFunction.getIns().getCfg(this.info.actid);if(this.battleInfo){var i=void 0;if(e.type==1){i=n.GuildModel.getIns().guildVO?n.GuildModel.getIns().guildVO.guildInf.guildID:Uint64.ZERO}else{i=Uint64.fromNumber(game.Context.cursvrid)}if(this.battleInfo.finalState==1){if(Uint64.equal(i,this.info.guildPair[0].guildId)){t=true}}else if(this.battleInfo.finalState==2){if(Uint64.equal(i,this.info.guildPair[1].guildId)){t=true}}else if(this.battleInfo.finalState==3){if(Uint64.equal(i,this.info.guildPair[0].guildId)){t=true}else if(Uint64.equal(i,this.info.guildPair[1].guildId)){t=true}}}return t};t.prototype.setGuildPkName=function(){var t=csv.CycleActivityFunction.getIns().getCfg(this.info.actid);if(t){if(t.type==1){common.CommonWindow.getIns().common.setTitle(app.getLang("buttonname_153"));common.CommonWindow.getIns().common.setFuncName(csv.FunctionsProxy.ENUMS.GUILD_PK,app.getLang("buttonname_153"))}else{common.CommonWindow.getIns().common.setTitle(app.getLang("guild_battle_name1"));common.CommonWindow.getIns().common.setFuncName(csv.FunctionsProxy.ENUMS.GUILD_PK,app.getLang("guild_battle_name1"))}}};t.prototype.getBattleInfoByRecordId=function(t){for(var e=0,i=this.battleInfo.serverBattleList.length;e<i;e++){var n=this.battleInfo.serverBattleList[e];for(var r=0,o=n.battleList.length;r<o;r++){{if(n.battleList[r].recordID==t){return n.battleList[r]}}}}return null};t.prototype.getTeamChange=function(){var t=false;var e=this.info;var i=csv.CycleActivityFunction.getIns().getCfg(e.actid);if(i.type==1){if(n.GuildModel.getIns().guildVO){if(Uint64.equal(e.guildPair[1].guildId,n.GuildModel.getIns().guildVO.guildInf.guildID)){t=true}}}else{if(e.guildPair[1].serverId==game.Context.cursvrid){t=true}}return t};t.prototype.getDebuffId=function(){var t=this.info;var e=csv.CycleActivityFunction.getIns().getCfg(t.actid);return e.param2};t.prototype.getUrlByResult=function(t,e){if(e===void 0){e=false}var i;if(t==1){if(e){i="bg_kuafuzhengba_bai"}else{i="bg_kuafuzhengba_sheng"}}else if(t==2){if(e){i="bg_kuafuzhengba_sheng"}else{i="bg_kuafuzhengba_bai"}}else if(t==3){i="bg_kuafuzhengba_ping"}else{i="bg_kuafuzhengba_wenhao"}return"kuafuzhengba/"+i+".png"};t.prototype.getTextUrlByResult=function(t){var e;if(t==1){e="bg_kuafuzhengba_shengli"}else if(t==2){e="bg_kuafuzhengba_shibai"}else if(t==3){e="bg_kuafuzhengba_pingju"}return"kuafuzhengba/"+e+".png"};t.prototype.getBgUrlByResult=function(t,e){if(e===void 0){e=false}var i;if(t==1){if(e){i="bg_kuafuzhengba_shibai"}else{i="bg_kuafuzhengba_shengli"}}else if(t==2){if(e){i="bg_kuafuzhengba_shengli"}else{i="bg_kuafuzhengba_shibai"}}else if(t==3){i="bg_kuafuzhengba_pingju"}else if(t==0){return""}return"res/static/kuafuzhengba/"+i+".png"};t.prototype.IsOpen=function(){return this.info&&game.Context.getServerTime()>this.info.startTime&&game.Context.getServerTime()<this.info.endTime&&csv.FunctionsProxy.getIns().isOpen(csv.FunctionsProxy.ENUMS.GUILD_PK)};t.prototype.curStatus=function(){if(this.info){var t=csv.CycleActivityFunction.getIns().getCfg(this.info.actid);var e=game.Context.getServerTime();var i=util.TimeUtil.getTimeWeek(t.date1);var n=util.TimeUtil.getTimeWeek(t.date2);var r=util.TimeUtil.getTimeWeek(t.date6);if(e>=i&&e<n){return o.iS_PREPARING}else if(e>=n&&e<=r){return o.RUNNING}}return o.END};t.prototype.getCloseTime=function(){if(this.info){var t=csv.CycleActivityFunction.getIns().getCfg(this.info.actid);var e=util.TimeUtil.getTimeWeek(t.date3);var i=e-game.Context.getServerTime();if(i<0){i=0}return i}};t.prototype.printTime=function(){console.log(" 开始时间 "+util.TimeUtil.formatDate(this.info.startTime,true));console.log(" 当前时间 "+util.TimeUtil.formatDate(game.Context.getServerTime(),true));console.log(" 战斗开始时间 "+util.TimeUtil.formatDate(this.info.battleStartTime,true));console.log(" 结束时间 "+util.TimeUtil.formatDate(this.info.endTime,true))};t.prototype.getRemainCount=function(t){if(t&&this.battleInfo){for(var e in this.battleInfo.serverBattleList){var i=this.battleInfo.serverBattleList[e];if(Uint64.equal(i.guildId,t)){return i.remainCount1}if(Uint64.equal(i.guildId_2,t)){return i.remainCount2}}}return 0};t.SINGLE_KEY="guild.GuildPkModel";t.INIT="init";t.REFRESH="refresh";return t}(app.ModelBase);n.GuildPkModel=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GuildPkModel.getIns();this.btnbofang.clickHandler=new Laya.Handler(this,this.onHuikan)};e.prototype.onHuikan=function(){app.ProtocolRequest.GuildChampionBattleRecordReq(this._data.recordID)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this._data=t;if(!this._data){return}this.labelname1.text=this._data.player1[0].name;this.labelname2.text=this._data.player2[0].name;this.imgshengli.skin=i.GuildPkModel.getIns().getUrlByResult(this._data.state)};e.SINGLE_KEY="guild.GuildPkBattleItem";return e}(ui.kuafuzhengba.kuafuzhengbaitem05UI);i.GuildPkBattleItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.GuildPkModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjilu.itemRender=i.GuildPkBattleItem;this.listjilu.renderHandler=new Laya.Handler(this,this.onGuildPkBattleItem)};e.prototype.onGuildPkBattleItem=function(t,e){t.setData(t.dataSource)};e.prototype.onDisplay=function(){Laya.timer.loop(3e4,this,this.askBattleResult);this.askBattleResult();this._model.on(i.GuildPkModel.REFRESH,this,this.refreshAll);this.callLater(this.refreshAll)};e.prototype.askBattleResult=function(){app.ProtocolRequest.GuildChampionBattleListReq()};e.prototype.onUnDisplay=function(){Laya.timer.clearAll(this);this._model.off(i.GuildPkModel.REFRESH,this,this.refreshAll)};e.prototype.refreshAll=function(){if(!this._model.battleInfo){this.listjilu.array=[];this.wuimg.visible=true}else{for(var t in this._model.battleInfo.serverBattleList){var e=this._model.battleInfo.serverBattleList[t];if(Uint64.equal(e.guildId,this._model.curPair.benfu.guildId)){this.listjilu.array=e.battleList}}this.wuimg.visible=false}};e.SINGLE_KEY="guild.GuildPkBattleView";return e}(ui.kuafuzhengba.kuafuzhengbatip3UI);i.GuildPkBattleView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GuildPkModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){if(t){this.banghuiname.text=t.guildName==""?app.getLang("kuafu_tips20"):t.guildName}else{this.banghuiname.text=app.getLang("kuafu_tips20")}};return e}(ui.kuafuzhengba.kuafuzhengbaitem04UI);i.GuildPkGuildNameItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GuildPkModel.getIns()};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this.on(Laya.Event.CLICK,this,this.OnBtnClick)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.OnBtnClick=function(){if(this.dataSource==app.getLang("kuafu_tips10")){app.ProtocolRequest.GuildChampionSetPositionReq(2,Uint64.ZERO,Uint64.ZERO)}if(this.dataSource==app.getLang("kuafu_tips11")){app.ProtocolRequest.GuildChampionSetPositionReq(1,Uint64.ZERO,Uint64.ZERO)}};return e}(ui.kuafuzhengba.kuafuzhengbaxialaitemUI);i.GuildPkGuildXialaItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this._model=i.GuildPkModel.getIns();this.btnhuikan.on(Laya.Event.CLICK,this,this.OnBtnClick)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t){this.pair=t;this.labelname01.text=t.benfu.guildName==""?app.getLang("kuafu_tips20"):t.benfu.guildName;this.labelname02.text=t.waifu.guildName==""?app.getLang("kuafu_tips20"):t.waifu.guildName;this.labshengyu1.text=app.getLang("kuafu_tips18",this._model.getRemainCount(t.benfu.guildId));this.labshengyu2.text=app.getLang("kuafu_tips18",this._model.getRemainCount(t.waifu.guildId));if(game.Context.getServerTime()<=this._model.info.battleStartTime){this.labshengyu1.text=app.getLang("kuafu_tips21",this._model.getRemainCount(t.benfu.guildId));this.labshengyu2.text=app.getLang("kuafu_tips21",this._model.getRemainCount(t.waifu.guildId));this.btnhuikan.label=app.getLang("kuafu_btn1")}else{this.labshengyu1.text=app.getLang("kuafu_tips18",this._model.getRemainCount(t.benfu.guildId));this.labshengyu2.text=app.getLang("kuafu_tips18",this._model.getRemainCount(t.waifu.guildId));this.btnhuikan.label=app.getLang("kuafu_btn2")}if(this._model.IsBattleEnd){this.imgjieguo.visible=true;this.imgzhuangshi.visible=true;for(var e in this._model.battleInfo.serverBattleList){if(Uint64.equal(this._model.battleInfo.serverBattleList[e].guildId,this.pair.benfu.guildId)){this.imgjieguo.skin=this._model.getUrlByResult(this._model.battleInfo.serverBattleList[e].guildFinalState);this.imgzhuangshi.skin=this._model.getBgUrlByResult(this._model.battleInfo.serverBattleList[e].guildFinalState)}}}else{this.imgzhuangshi.visible=false;this.imgjieguo.visible=false}};e.prototype.OnBtnClick=function(){if(game.Context.getServerTime()>=this._model.info.battleStartTime){if(Uint64.equal(this.pair.benfu.guildId,Uint64.ZERO)||Uint64.equal(this.pair.waifu.guildId,Uint64.ZERO)){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafu_error1"))}else{this._model.curPair=this.pair;app.ViewManager.toggleDialog(i.GuildPkBattleView,1,0)}}else{this._model.curPair=this.pair;app.ViewManager.toggleView(i.GuildPkMemberView,i.GuildPkView.getIns().parent,0);app.ViewManager.toggleView(i.GuildPkView,i.GuildPkView.getIns().parent,-1)}};e.SINGLE_KEY="guild.GuildPkItem";return e}(ui.kuafuzhengba.kuafuzhengbaitem02UI);i.GuildPkItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(n){__extends(t,n);function t(t,e){if(e===void 0){e=main.IconListBase.SIZE}var i=n.call(this,t,e)||this;i.setTimeLabel(73,game.STYLES.BLACK_COLOR);i.timeView=new activitytaren.ActivityTimeView(i.lblTime,new Laya.Handler(i,i.refreshTxt),undefined,new Laya.Handler(i,i.refreshTxt));i.lblTime.color=game.STYLES.DESC_TXT_COLOR;return i}t.prototype.onDisplay=function(){n.prototype.onDisplay.call(this);if(i.GuildPkModel.getIns().info&&game.Context.getServerTime()<i.GuildPkModel.getIns().info.endTime){this.timeView.start(i.GuildPkModel.getIns().info.endTime+5)}};t.prototype.onUndisplay=function(){n.prototype.onUndisplay.call(this);this.timeView.stop()};t.prototype.refreshTxt=function(t){if(t===void 0){t=0}if(game.Context.getServerTime()<i.GuildPkModel.getIns().info.battleStartTime){var e=i.GuildPkModel.getIns().info.battleStartTime-game.Context.getServerTime();if(e>3600){this.lblTime.text=app.getLang("kuafu_tips1")}else if(e>0&&e<=3600){this.lblTime.text=app.getLang("kuafu_tips2",util.TimeUtil.formatTime(e,false))}}else if(i.GuildPkModel.getIns().battleInfo&&i.GuildPkModel.getIns().battleInfo.finalState==0){this.lblTime.text=app.getLang("kuafu_tips3")}else{this.lblTime.text="";if(game.Context.getServerTime()>i.GuildPkModel.getIns().info.endTime){this.timeView.stop();csv.FunctionsProxy.getIns().event(csv.FunctionsProxy.EVENTS.ADD,csv.FunctionsProxy.getIns().getCfg(csv.FunctionsProxy.ENUMS.GUILD_PK))}}};return t}(main.MainUIIcon);i.GuildPkMainIcon=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(r){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.onOK=new Laya.Handler(t,t.doExchangePlayer);t.onCancel=new Laya.Handler(t,t.cancelExchangePlayer);return t}t.prototype.initialize=function(){e.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.on(Laya.Event.CLICK,this,this.tryExchangPlayer)};t.prototype.onDisplay=function(){this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){};t.prototype.refreshAll=function(){};t.prototype.setData=function(t,e){var i=r.GuildPkModel.getIns().curPair;var n=i.benfu;this.isBenfu=e;this.data=t;this.lapelpaiming.text=t.name;this.labelname.text=t.score.toNumber().toString();this.btnqiehuan.visible=this.canChange();this.texiao.stop();this.texiao.visible=false};t.prototype.canChange=function(){var t=r.GuildPkModel.getIns().curPair;var e=t.benfu;return r.GuildModel.getIns().isGuild&&Uint64.equal(e.guildId,r.GuildModel.getIns().guildVO.guildInf.guildID)&&r.GuildModel.getIns().isClan()&&this.isBenfu};t.prototype.tryExchangPlayer=function(){if(!this.canChange()){return}if(!t.selectedItem){t.selectedItem=this;this.texiao.play();this.texiao.visible=true}else if(Uint64.equal(t.selectedItem.data.id,this.data.id)){this.cancelExchangePlayer()}else{if(!game.SystemSetModel.getInstance().funIds[csv.FunctionsProxy.ENUMS.GUILD_PK]){game.Alert.show(app.getLang("kuafu_tips13",t.selectedItem.data.name,this.data.name),this.onOK,this.onCancel,0,"","","center","center",csv.FunctionsProxy.ENUMS.GUILD_PK)}else{this.doExchangePlayer()}}};t.prototype.doExchangePlayer=function(){if(r.GuildPkModel.getIns().info.battleStartTime-game.Context.getServerTime()>3600){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafuzhengba_error2"))}else{app.ProtocolRequest.GuildChampionSetPositionReq(3,t.selectedItem.data.id,this.data.id)}this.cancelExchangePlayer()};t.prototype.cancelExchangePlayer=function(){t.selectedItem.texiao.stop();t.selectedItem.texiao.visible=false;t.selectedItem=null};return t}(ui.kuafuzhengba.kuafuzhengbaitem01UI);r.GuildPkMemberItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(i.GuildPkBattleView)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.GuildPkModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwanjia1.itemRender=i.GuildPkMemberItem;this.listwanjia1.renderHandler=new Laya.Handler(this,this.onGuildPkMemberItem);this.listwanjia2.itemRender=i.GuildPkMemberItem;this.listwanjia2.renderHandler=new Laya.Handler(this,this.onEnemyPkMemberItem1);this.labeltime.text=app.getLang("guild_battle_tips8");this.boxLbl2.visible=false;this.imgResult1.visible=false;this.imgResult2.visible=false;this.labelchuzhan01.text=app.getLang("kuafu_tips7");this.labelchuzhan02.text=app.getLang("guild_battle_tips3");this.labeltibu01.text=app.getLang("kuafu_tips8");this.labeltibu02.text=app.getLang("guild_battle_tips3");this.labeltibu02.text=app.getLang("guild_battle_tips3");this.chuanzhanlab.text=app.getLang("kuafu_tips9");this.btntuichu.on(Laya.Event.CLICK,this,this.clickExit);this.btnfenlei.on(Laya.Event.CLICK,this,this.showSelectList);this.listfenlie.on(Laya.Event.CLICK,this,this.onSelectListSelected);this.listfenlie.itemRender=i.GuildPkGuildXialaItem;this.listfenlie.repeatX=1;this.listfenlie.repeatY=2;this.listfenlie.renderHandler=new Laya.Handler(this,this.onSelectListRender);this.listfenlie.hScrollBarSkin=" ";game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.GUILD_PK,[this.btntishi,this.labeltishi])};e.prototype.onGuildPkMemberItem=function(t,e){t.setData(t.dataSource,true)};e.prototype.onEnemyPkMemberItem1=function(t,e){t.setData(t.dataSource,false)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll);this._model.on(i.GuildPkModel.INIT,this,this.refreshAll);Laya.timer.loop(1e3,this,this.setTimeTxt);this.listfenlie.visible=false;app.ProtocolRequest.GuildChampionSessionReq()};e.prototype.onUnDisplay=function(){this._model.off(i.GuildPkModel.INIT,this,this.refreshAll);Laya.timer.clearAll(this)};e.prototype.refreshAll=function(){var t=this._model.info;var e=this._model.curPair;this.labeltime.text=app.getLang("guild_battle_tips8")+this.getSeasonTime(t.startTime,t.endTime-1);this.setTimeTxt();this.listwanjia1.array=e.benfu.memberList;this.listwanjia2.array=e.waifu.memberList;this.labelname01.text=e.benfu.guildName;this.labelname02.text=e.waifu.guildName;if(e.benfu.rankType==1){this.labfenlei.text=app.getLang("kuafu_tips11")}else if(e.benfu.rankType==2){this.labfenlei.text=app.getLang("kuafu_tips10")}else if(e.benfu.rankType==3){this.labfenlei.text=app.getLang("kuafu_tips22")}else{this.labfenlei.text=""}this.btnfenlei.gray=!this.IsThisClan()};e.prototype.getSeasonTime=function(t,e){var i="";i+=util.TimeUtil.formatDate(t,true,false,true,true);i+="—";i+=util.TimeUtil.formatDate(e,true,false,true,true);return i};e.prototype.setTimeTxt=function(){this.labeltishi.text=app.getLang("kuafu_tips5",util.TimeUtil.formatTime(this._model.info.battleStartTime-game.Context.getServerTime()))};e.prototype.clickExit=function(){app.ViewManager.toggleView(i.GuildPkView,this.parent);app.ViewManager.toggleView(e,this.parent,-1)};e.prototype.showSelectList=function(){if(this.IsThisClan()){if(this._model.info.battleStartTime-game.Context.getServerTime()>3600){manager.FlowManager.instance.flowByStyle1(app.getLang("kuafuzhengba_error2"));return}this.listfenlie.visible=true;this.listfenlie.array=[app.getLang("kuafu_tips10"),app.getLang("kuafu_tips11")]}else{manager.FlowManager.instance.flowByStyle1(app.getLang("kuafuzhengba_error1"))}};e.prototype.IsThisClan=function(){return i.GuildModel.getIns().isGuild&&Uint64.equal(i.GuildPkModel.getIns().curPair.benfu.guildId,i.GuildModel.getIns().guildVO.guildInf.guildID)&&i.GuildModel.getIns().isClan()};e.prototype.onSelectListRender=function(t){t.shuxing.text=t.dataSource};e.prototype.onSelectListSelected=function(t){this.listfenlie.visible=false};e.SINGLE_KEY="guild.GuildPkMemberView";return e}(ui.kuafuzhengba.kuafuzhengbaview1UI);i.GuildPkMemberView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(n){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.prototype.initialize=function(){t.prototype.initialize.call(this);this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listjiangli.itemRender=grids.GridView;this.listjiangli.renderHandler=grids.GridView.CommonItemRender;this.jifenlab.text=""};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){};e.prototype.setData=function(t,e){this.imgzhuangshi.skin=n.GuildPkModel.getIns().getBgUrlByResult(e);this.imgjieguo.skin=n.GuildPkModel.getIns().getTextUrlByResult(e);this.listjiangli.array=game.ItemUtil.parserList(t);var i=this.listjiangli.array.length;this.listjiangli.repeatX=i;this.listjiangli.width=i*(98+this.listjiangli.spaceX)-this.listjiangli.spaceX};return e}(ui.kuafuzhengba.kuafuzhengbaitem03UI);n.GuildPkRwdItem=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}e.getIns=function(){return app.Singleton.getInstance(e)};e.prototype.initialize=function(){t.prototype.initialize.call(this);this._model=i.GuildPkModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listduizhan01.itemRender=i.GuildPkRwdItem;this.listduizhan01.renderHandler=new Laya.Handler(this,this.onGuildPkRwdItem);this.listduizhan02.itemRender=i.GuildPkRwdItem;this.listduizhan02.renderHandler=new Laya.Handler(this,this.onGuildPkRwdItem);this.labeltitle.text=app.getLang("kuafu_tips14");this.labeljiangli.text=app.getLang("kuafu_tips15");this.labeljifen.text=app.getLang("kuafu_tips16");this.labeltishi.text=app.getLang("kuafu_tips19")};e.prototype.onGuildPkRwdItem=function(t,e){t.setData(t.dataSource,e+1)};e.prototype.onDisplay=function(){this.callLater(this.refreshAll)};e.prototype.onUnDisplay=function(){};e.prototype.refreshAll=function(){var t=2;if(this._model.info){t=this._model.info.actid}var e=csv.CycleActivityFunction.getIns().getCfg(t);if(!e){return}this.listduizhan01.array=app.str2Array(e.award1,"|");this.listduizhan02.array=app.str2Array(e.award2,"|")};e.SINGLE_KEY="guild.GuildPkRwdView";return e}(ui.kuafuzhengba.kuafuzhengbatip1UI);i.GuildPkRwdView=t})(guild||(guild={}));var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)if(e.hasOwnProperty(i))t[i]=e[i]};return function(t,e){n(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();var guild;(function(i){var t=function(e){__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.refreshCd=0;t.listwanjiaArray=[];t.banghuilist1Array=[];t.banghuilist2Array=[];t.secCount=0;return t}t.getIns=function(){return app.Singleton.getInstance(t)};t.prototype.initialize=function(){e.prototype.initialize.call(this);this._model=i.GuildPkModel.getIns();this.on(Laya.Event.DISPLAY,this,this.onDisplay);this.on(Laya.Event.UNDISPLAY,this,this.onUnDisplay);this.listwanjia.itemRender=i.GuildPkItem;this.listwanjia.renderHandler=new Laya.Handler(this,this.onGuildPkItem);this.banghuilist1.itemRender=i.GuildPkGuildNameItem;this.banghuilist1.renderHandler=new Laya.Handler(this,this.onGuildPkGuildNameItem);this.banghuilist2.itemRender=i.GuildPkGuildNameItem;this.banghuilist2.renderHandler=new Laya.Handler(this,this.onGuildPkGuildNameItem);this.btnduizhanjiangli.on(Laya.Event.CLICK,this,this.onShowRwd);game.HelperViewHandler.register(csv.FunctionsProxy.ENUMS.GUILD_PK,[this.btntishi,this.labeltishi]);this.labeltibu01.text=app.getLang("kuafu_tips4")};t.prototype.onShowRwd=function(){app.ViewManager.toggleDialog(i.GuildPkRwdView,1,0)};t.prototype.onGuildPkItem=function(t){t.setData(t.dataSource)};t.prototype.onGuildPkGuildNameItem=function(t){t.setData(t.dataSource)};t.prototype.onDisplay=function(){this._model.on(i.GuildPkModel.INIT,this,this.refreshAll);this._model.on(i.GuildPkModel.REFRESH,this,this.refreshAll);Laya.timer.loop(1e3,this,this.onTimer);app.ProtocolRequest.GuildChampionSessionReq();app.ProtocolRequest.GuildChampionBattleListReq();this.callLater(this.refreshAll)};t.prototype.onUnDisplay=function(){this._model.off(i.GuildPkModel.INIT,this,this.refreshAll);this._model.off(i.GuildPkModel.REFRESH,this,this.refreshAll);Laya.timer.clearAll(this)};t.prototype.refreshAll=function(){var t=this._model.info;if(!t){return}this._model.setGuildPkName();this.labeltime.text=app.getLang("guild_battle_tips8")+this.getSeasonTime(t.startTime,t.endTime-1);this.onTimer();for(var e=0;e<3;e++){if(!Uint64.equal(this._model.GuildPairs[e].benfu.guildId,Uint64.ZERO)||!Uint64.equal(this._model.GuildPairs[e].waifu.guildId,Uint64.ZERO)){this.listwanjiaArray[e]=this._model.GuildPairs[e];this.banghuilist1Array[e]=this._model.benfuGuilds[e];this.banghuilist2Array[e]=this._model.WaifuGuilds[e]}}this.listwanjia.array=this.listwanjiaArray;this.banghuilist1.array=this.banghuilist1Array;this.banghuilist2.array=this.banghuilist2Array;this.startFight=t.battleStartTime<game.Context.getServerTime()};t.prototype.onTimer=function(){if(this._model.info.battleStartTime>game.Context.getServerTime()){this.labeltishi.text=app.getLang("kuafu_tips5",util.TimeUtil.formatTime(this._model.info.battleStartTime-game.Context.getServerTime()));this.imgyijiesu.skin="res/static/kuafuzhengba/bg_kuafuzhengba_zdzbz.png"}else if(!this._model.IsBattleEnd){this.labeltishi.text=app.getLang("kuafu_tips6");this.imgyijiesu.skin="res/static/kuafuzhengba/bg_kuafuzhengba_zdjxz.png";if(this.secCount>30){app.ProtocolRequest.GuildChampionBattleListReq();this.secCount=0}else{this.secCount++}}else{this.labeltishi.text=app.getLang("kuafu_tips6");this.imgyijiesu.skin="res/static/kuafuzhengba/bg_kuafuzhengba_blzbyjs.png"}if(!this.startFight&&this._model.info.battleStartTime<game.Context.getServerTime()){app.ProtocolRequest.GuildChampionSessionReq()}};t.prototype.getSeasonTime=function(t,e){var i="";i+=util.TimeUtil.formatDate(t,true,false,true,true);i+="—";i+=util.TimeUtil.formatDate(e,true,false,true,true);return i};t.SINGLE_KEY="guild.GuildPkView";return t}(ui.kuafuzhengba.kuafuzhengbaview0UI);i.GuildPkView=t})(guild||(guild={}));w["ui"]=ui;w["Laya"]=Laya;w["laya"]=laya;w["JSZip"]=JSZip;w["GameWXmini"]=GameWXmini;w["ByteUtil"]=ByteUtil;w["Point2D"]=Point2D;w["RoleHpView"]=RoleHpView;w["CombatInfo"]=CombatInfo;w["CommonInfo"]=CommonInfo;w["UserViewData"]=UserViewData;w["ElementPropInf"]=ElementPropInf;w["ObjViewData"]=ObjViewData;w["PropValue"]=PropValue;w["RoleView"]=RoleView;w["RoleScore"]=RoleScore;w["ItemData"]=ItemData;w["ItemCost"]=ItemCost;w["ResourceData"]=ResourceData;w["PropRand"]=PropRand;w["GemData"]=GemData;w["ItemInfoData"]=ItemInfoData;w["EquipStrenData"]=EquipStrenData;w["TaskRd"]=TaskRd;w["TaskData"]=TaskData;w["TaskRecord"]=TaskRecord;w["TaskDailyInf"]=TaskDailyInf;w["MailSimpleData"]=MailSimpleData;w["AnnexInf"]=AnnexInf;w["MailData"]=MailData;w["MailStateInf"]=MailStateInf;w["StringCell"]=StringCell;w["SysMsgParam"]=SysMsgParam;w["MallBuyData"]=MallBuyData;w["BlackMallDataItem"]=BlackMallDataItem;w["BlackMallData"]=BlackMallData;w["MallDB"]=MallDB;w["JoinGuildInf"]=JoinGuildInf;w["GuildSelfInf"]=GuildSelfInf;w["GuildMember"]=GuildMember;w["GuildInf"]=GuildInf;w["GuildListInf"]=GuildListInf;w["GuildViewInf"]=GuildViewInf;w["GuildSkillInf"]=GuildSkillInf;w["PosGuildSkill"]=PosGuildSkill;w["GuildConInf"]=GuildConInf;w["GuildTaskHelpRd"]=GuildTaskHelpRd;w["BattleUserData"]=BattleUserData;w["BattleMonsterData"]=BattleMonsterData;w["BuffData"]=BuffData;w["EffectHpData"]=EffectHpData;w["UseSkillData"]=UseSkillData;w["TrigMasterSkillData"]=TrigMasterSkillData;w["BattleRecord"]=BattleRecord;w["SkillData"]=SkillData;w["MasterSkill"]=MasterSkill;w["MasterTreeSkill"]=MasterTreeSkill;w["PetPropRand"]=PetPropRand;w["PetSpace"]=PetSpace;w["PetInfo"]=PetInfo;w["PetInfoEquip"]=PetInfoEquip;w["BossRank"]=BossRank;w["DgnDailyTime"]=DgnDailyTime;w["BossFocus"]=BossFocus;w["DgnDailyVipTime"]=DgnDailyVipTime;w["BossFreshInfo"]=BossFreshInfo;w["BossFreshInfoNew"]=BossFreshInfoNew;w["KingBossRoleSize"]=KingBossRoleSize;w["BossFreshDB"]=BossFreshDB;w["BossPersonalDB"]=BossPersonalDB;w["InspireInf"]=InspireInf;w["BossBelong"]=BossBelong;w["WorldHostility"]=WorldHostility;w["BossRobot"]=BossRobot;w["BossRobotState"]=BossRobotState;w["PackDB"]=PackDB;w["EquipFromDB"]=EquipFromDB;w["BuffDB"]=BuffDB;w["PetDB"]=PetDB;w["PetFromDB"]=PetFromDB;w["WorldBossFreshDB"]=WorldBossFreshDB;w["CrossBossDrop"]=CrossBossDrop;w["CrossBossDropShow"]=CrossBossDropShow;w["CrossUser"]=CrossUser;w["ExtDB"]=ExtDB;w["GuildAwardDB"]=GuildAwardDB;w["GuildTask"]=GuildTask;w["GuildHelpTask"]=GuildHelpTask;w["GuildPkgDB"]=GuildPkgDB;w["ActHorse"]=ActHorse;w["ActHorseCom"]=ActHorseCom;w["HorseUseSkill"]=HorseUseSkill;w["HorseDB"]=HorseDB;w["LotusData"]=LotusData;w["LotusSeedData"]=LotusSeedData;w["FriendData"]=FriendData;w["VipMallData"]=VipMallData;w["VipData"]=VipData;w["VipDataDB"]=VipDataDB;w["TeamData"]=TeamData;w["TeamMemberData"]=TeamMemberData;w["TeamInviteData"]=TeamInviteData;w["NineTowerLayer"]=NineTowerLayer;w["NineTowerInf"]=NineTowerInf;w["RoleCDInf"]=RoleCDInf;w["DailyDrawData"]=DailyDrawData;w["OpenDrawData"]=OpenDrawData;w["DailyDrawInf"]=DailyDrawInf;w["DailyDrawLuckInf"]=DailyDrawLuckInf;w["DialDrawData"]=DialDrawData;w["CheckpointData"]=CheckpointData;w["DgnGradeData"]=DgnGradeData;w["DailyActInf"]=DailyActInf;w["DailyDgnInf"]=DailyDgnInf;w["GourdInf"]=GourdInf;w["GourdDB"]=GourdDB;w["WaterRecord"]=WaterRecord;w["HomeBubbleData"]=HomeBubbleData;w["HomeQuestionData"]=HomeQuestionData;w["HomeQuestionLotteryData"]=HomeQuestionLotteryData;w["ActivityStartTimeInfo"]=ActivityStartTimeInfo;w["AloneActInfo"]=AloneActInfo;w["AloneActStatus"]=AloneActStatus;w["AloneActIcon"]=AloneActIcon;w["MonsterSoulInfo"]=MonsterSoulInfo;w["TitleData"]=TitleData;w["HeadFrameData"]=HeadFrameData;w["SkinData"]=SkinData;w["GuardData"]=GuardData;w["GuardEquipData"]=GuardEquipData;w["AwakeData"]=AwakeData;w["TransfData"]=TransfData;w["QuenchMagicData"]=QuenchMagicData;w["QuenchData"]=QuenchData;w["SoulFromDB"]=SoulFromDB;w["SoulItemData"]=SoulItemData;w["SoulData"]=SoulData;w["XinfaItemData"]=XinfaItemData;w["XinfaData"]=XinfaData;w["XinfaDbData"]=XinfaDbData;w["BoxBelong"]=BoxBelong;w["BoxRecord"]=BoxRecord;w["GardenEnvData"]=GardenEnvData;w["GardenPlantData"]=GardenPlantData;w["ActivityListInfo"]=ActivityListInfo;w["ActivityRedStatus"]=ActivityRedStatus;w["ActivityIconStatus"]=ActivityIconStatus;w["StatusItem"]=StatusItem;w["StampBuff"]=StampBuff;w["StatusItemGroup"]=StatusItemGroup;w["ActRankList"]=ActRankList;w["StatusBless"]=StatusBless;w["Limitinf"]=Limitinf;w["MedalData"]=MedalData;w["MedalHisttorData"]=MedalHisttorData;w["MedalDbData"]=MedalDbData;w["MedalMallBuyData"]=MedalMallBuyData;w["MedalGlobalData"]=MedalGlobalData;w["MedalRoleSizeRankData"]=MedalRoleSizeRankData;w["MedalMagicWeaponSizeRankData"]=MedalMagicWeaponSizeRankData;w["MedalPetRankData"]=MedalPetRankData;w["MedalOfflineTaskData"]=MedalOfflineTaskData;w["MedalGlobalDbData"]=MedalGlobalDbData;w["MonthCardData"]=MonthCardData;w["MonthCardDbData"]=MonthCardDbData;w["LifeCardDbData"]=LifeCardDbData;w["WeekCardData"]=WeekCardData;w["CardDbData"]=CardDbData;w["RechargeMallData"]=RechargeMallData;w["RechargeMallDbData"]=RechargeMallDbData;w["WarOrderRewardData"]=WarOrderRewardData;w["WarOrderShopData"]=WarOrderShopData;w["WarOrderTaskData"]=WarOrderTaskData;w["WarOrderDbData"]=WarOrderDbData;w["PedlarDbActtime"]=PedlarDbActtime;w["PedlarDbData"]=PedlarDbData;w["OffLineAwardItemData"]=OffLineAwardItemData;w["AmuleteData"]=AmuleteData;w["AmuleteDbData"]=AmuleteDbData;w["TreasureHuntLuckData"]=TreasureHuntLuckData;w["TreasureHuntUnitData"]=TreasureHuntUnitData;w["TreasureHuntData"]=TreasureHuntData;w["TreasureHuntRecordData"]=TreasureHuntRecordData;w["DBTreasureHuntData"]=DBTreasureHuntData;w["DBAllTreasureHuntData"]=DBAllTreasureHuntData;w["DBTreasureHuntRecordData"]=DBTreasureHuntRecordData;w["DBAllTreasureHuntRecordData"]=DBAllTreasureHuntRecordData;w["GuildDgnBuff"]=GuildDgnBuff;w["GuildBuffCD"]=GuildBuffCD;w["GuildDgnJoinInf"]=GuildDgnJoinInf;w["ArenaRecord"]=ArenaRecord;w["WeaponData"]=WeaponData;w["WeaponDataDB"]=WeaponDataDB;w["QuickHangUpDB"]=QuickHangUpDB;w["CtlCode"]=CtlCode;w["GmCombatInfo"]=GmCombatInfo;w["GmItemInfo"]=GmItemInfo;w["GmSyncRoleInfo"]=GmSyncRoleInfo;w["GmDngInfo"]=GmDngInfo;w["GmRankInfo"]=GmRankInfo;w["GmGuildList"]=GmGuildList;w["GmGuildMember"]=GmGuildMember;w["LuheFromDB"]=LuheFromDB;w["LuheItemData"]=LuheItemData;w["LuheData"]=LuheData;w["SvrGroup"]=SvrGroup;w["GuildChampionMember"]=GuildChampionMember;w["GuildChampionBattleInfo"]=GuildChampionBattleInfo;w["GuildChampionTeam"]=GuildChampionTeam;w["GuildChampionBattleList"]=GuildChampionBattleList;w["ServerGuildChampionBattleList"]=ServerGuildChampionBattleList;w["GuildChampionRank"]=GuildChampionRank;w["GuildChampionTeamDB"]=GuildChampionTeamDB;w["GuildChampionBattleInfoDB"]=GuildChampionBattleInfoDB;w["GuildChampionServerGuildDB"]=GuildChampionServerGuildDB;w["GuildChampionGuildPairDB"]=GuildChampionGuildPairDB;w["GuildChampionGroupDB"]=GuildChampionGroupDB;w["GuildChampionDB"]=GuildChampionDB;w["GuildChampionServerRankDB"]=GuildChampionServerRankDB;w["CrossChampionSeverInfo"]=CrossChampionSeverInfo;w["MailAnnex"]=MailAnnex;w["SkillCDData"]=SkillCDData;w["RPGetList"]=RPGetList;w["RedPacketData"]=RedPacketData;w["SaveSeventhBoxData"]=SaveSeventhBoxData;w["BtComInf"]=BtComInf;w["BtComAskResult"]=BtComAskResult;w["DailyBtComInf"]=DailyBtComInf;w["BtComShowInf"]=BtComShowInf;w["BtComRecord"]=BtComRecord;w["TitleRankDataDB"]=TitleRankDataDB;w["DilaoCombatInf"]=DilaoCombatInf;w["DgnBuff"]=DgnBuff;w["ArboretumEnv"]=ArboretumEnv;w["ArboretumSpace"]=ArboretumSpace;w["ArboretumPetSlot"]=ArboretumPetSlot;w["ArboretumMyPetSlot"]=ArboretumMyPetSlot;w["ArboretumPetAward"]=ArboretumPetAward;w["ArboretumOrder"]=ArboretumOrder;w["ArboretumOrderInfo"]=ArboretumOrderInfo;w["ArboretumDevelop"]=ArboretumDevelop;w["ArboretumGuard"]=ArboretumGuard;w["ArboretumUsingGuard"]=ArboretumUsingGuard;w["ArboretumFriend"]=ArboretumFriend;w["ArboretumInfo"]=ArboretumInfo;w["ArboretumRecord"]=ArboretumRecord;w["ArboretumEnvDB"]=ArboretumEnvDB;w["ArboretumSpaceDB"]=ArboretumSpaceDB;w["ArboretumPetSlotDB"]=ArboretumPetSlotDB;w["ArboretumInfoDB"]=ArboretumInfoDB;w["ResDataToClient"]=ResDataToClient;w["LeftData"]=LeftData;w["ResDataToDB"]=ResDataToDB;w["ResFindBack"]=ResFindBack;w["PetDispatchMap"]=PetDispatchMap;w["PetDispatchMapDB"]=PetDispatchMapDB;w["DayShopData"]=DayShopData;w["DayComData"]=DayComData;w["SDayTaskData"]=SDayTaskData;w["SDayPointDdata"]=SDayPointDdata;w["ActDrawData"]=ActDrawData;w["TanbaoInf"]=TanbaoInf;w["SimpleTeamData"]=SimpleTeamData;w["HangUpInfo"]=HangUpInfo;w["DongfuTreasure"]=DongfuTreasure;w["DongfuInfo"]=DongfuInfo;w["SecSoulInfo"]=SecSoulInfo;w["ElixirInfo"]=ElixirInfo;w["SecTimeInfo"]=SecTimeInfo;w["EventData"]=EventData;w["MakeUpData"]=MakeUpData;w["DailyRechargeItem"]=DailyRechargeItem;w["MagicData"]=MagicData;w["MagicLayUnitData"]=MagicLayUnitData;w["MagicEquipUnitData"]=MagicEquipUnitData;w["MagicResonanceInfo"]=MagicResonanceInfo;w["MagicAddInfo"]=MagicAddInfo;w["MagicPluginInfo"]=MagicPluginInfo;w["MagicInfoDB"]=MagicInfoDB;w["SecretAreaOpenData"]=SecretAreaOpenData;w["SecretAreaRecord"]=SecretAreaRecord;w["SecretAreaData"]=SecretAreaData;w["MountDataDB"]=MountDataDB;w["Arboretum2PlantInfo"]=Arboretum2PlantInfo;w["Arboretum2GuardInfo"]=Arboretum2GuardInfo;w["Arboretum2HelpRecord"]=Arboretum2HelpRecord;w["Arboretum2Info"]=Arboretum2Info;w["Arboretum2StewardInfo"]=Arboretum2StewardInfo;w["Arboretum2PlantInfoDB"]=Arboretum2PlantInfoDB;w["Arboretum2StewardInfoDB"]=Arboretum2StewardInfoDB;w["Arboretum2HelpedInfoDB"]=Arboretum2HelpedInfoDB;w["Arboretum2HelpedTimeDB"]=Arboretum2HelpedTimeDB;w["Arboretum2InfoDB"]=Arboretum2InfoDB;w["SimpleArenaBattleRecordData"]=SimpleArenaBattleRecordData;w["RefineDataDB"]=RefineDataDB;w["ElixirDataDB"]=ElixirDataDB;w["GiftData"]=GiftData;w["PedlarNewItemData"]=PedlarNewItemData;w["ActLimitedBuyData"]=ActLimitedBuyData;w["CrossRankData"]=CrossRankData;w["RankData"]=RankData;w["RankShowPlayerData"]=RankShowPlayerData;w["ArenaRankTitleDB"]=ArenaRankTitleDB;w["UserRank"]=UserRank;w["RoleShowView"]=RoleShowView;w["ShowPlayerMagicPluginInfo"]=ShowPlayerMagicPluginInfo;w["ShowPlayerData"]=ShowPlayerData;w["ChartData"]=ChartData;w["MijingUnlockData"]=MijingUnlockData;w["SimpleBubbleData"]=SimpleBubbleData;w["ForumData"]=ForumData;w["ForumRawData"]=ForumRawData;w["InvestFundData"]=InvestFundData;w["DialDrawResult"]=DialDrawResult;w["TimeGiftData"]=TimeGiftData;w["CrossXiuLianData"]=CrossXiuLianData;w["CrossXlInf"]=CrossXlInf;w["BattleHpCacheData"]=BattleHpCacheData;w["CrossXiuLianBattleRecordData"]=CrossXiuLianBattleRecordData;w["CrossXiuLianSecenesData"]=CrossXiuLianSecenesData;w["CrossXiuLianUserData"]=CrossXiuLianUserData;w["SpecialItem"]=SpecialItem;w["PeakRecord"]=PeakRecord;w["PeakParamRecord"]=PeakParamRecord;w["Peakinf"]=Peakinf;w["PeakTask"]=PeakTask;w["CltUseDataInfo"]=CltUseDataInfo;w["CustomGiftData"]=CustomGiftData;w["LingtaiRd"]=LingtaiRd;w["HomeAwardRd"]=HomeAwardRd;w["BuildData"]=BuildData;w["TongtianSData"]=TongtianSData;w["TongtianPData"]=TongtianPData;w["FateDB"]=FateDB;w["YsKillData"]=YsKillData;w["YiShouSData"]=YiShouSData;w["YiShouPData"]=YiShouPData;w["QiYuSData"]=QiYuSData;w["QiYuPData"]=QiYuPData;w["GongfaData"]=GongfaData;w["GongfaAllData"]=GongfaAllData;w["WxShareData"]=WxShareData;w["WxGmRoleData"]=WxGmRoleData;w["WxHelpData"]=WxHelpData;w["FumoData"]=FumoData;w["ShenbingData"]=ShenbingData;w["ShenbingTaskData"]=ShenbingTaskData;w["ShenbingGoingData"]=ShenbingGoingData;w["ShenbingDBData"]=ShenbingDBData;w["ActivityStartTimeAck"]=ActivityStartTimeAck;w["GetMainPanelResp"]=GetMainPanelResp;w["RecvPrizeResp"]=RecvPrizeResp;w["ActEffectResp"]=ActEffectResp;w["ActOpenNoti"]=ActOpenNoti;w["RedTipsNoti"]=RedTipsNoti;w["ShowIconNoti"]=ShowIconNoti;w["GetActMainPanelResp"]=GetActMainPanelResp;w["RecvActPrizeResp"]=RecvActPrizeResp;w["ActRedTipsNoti"]=ActRedTipsNoti;w["ActShowIconNoti"]=ActShowIconNoti;w["OnlineActTimeNoti"]=OnlineActTimeNoti;w["FirstChargeNoti"]=FirstChargeNoti;w["GetActRankListResp"]=GetActRankListResp;w["ZeroBuyResp"]=ZeroBuyResp;w["ActDrawResp"]=ActDrawResp;w["ActDrawInfoResp"]=ActDrawInfoResp;w["ActDrawCountNtf"]=ActDrawCountNtf;w["ActLimitedBuyDataNtf"]=ActLimitedBuyDataNtf;w["AmuletDataAck"]=AmuletDataAck;w["AmuletUpdateAck"]=AmuletUpdateAck;w["Arboretum2Ntf"]=Arboretum2Ntf;w["Arboretum2PlantNtf"]=Arboretum2PlantNtf;w["Arboretum2PlantAck"]=Arboretum2PlantAck;w["Arboretum2WaterAck"]=Arboretum2WaterAck;w["Arboretum2FricendListAck"]=Arboretum2FricendListAck;w["Arboretum2FriendAck"]=Arboretum2FriendAck;w["Arboretum2GuardUpLvAck"]=Arboretum2GuardUpLvAck;w["Arboretum2StewardInfoNtf"]=Arboretum2StewardInfoNtf;w["Arboretum2StewardSetNtf"]=Arboretum2StewardSetNtf;w["Arboretum2RewardAck"]=Arboretum2RewardAck;w["Arboretum2SetPetAck"]=Arboretum2SetPetAck;w["ArboretumNtf"]=ArboretumNtf;w["ArboretumAddEnvAck"]=ArboretumAddEnvAck;w["ArboretumPlantAck"]=ArboretumPlantAck;w["ArboretumOrderAck"]=ArboretumOrderAck;w["ArboretumFosterPetAck"]=ArboretumFosterPetAck;w["ArboretumFriendAck"]=ArboretumFriendAck;w["ArboretumStealAck"]=ArboretumStealAck;w["ArboretumRecordAck"]=ArboretumRecordAck;w["ArboretumGuardOperateAck"]=ArboretumGuardOperateAck;w["ArboretumDevelopAck"]=ArboretumDevelopAck;w["ArboretumUnlockPetSlotAck"]=ArboretumUnlockPetSlotAck;w["ArboretumPetAwardtAck"]=ArboretumPetAwardtAck;w["ArboretumPetAwardtNtf"]=ArboretumPetAwardtNtf;w["ChargeArenaAck"]=ChargeArenaAck;w["ChargePkAck"]=ChargePkAck;w["SimpleArenaDataNtf"]=SimpleArenaDataNtf;w["SimpleArenaRecordAck"]=SimpleArenaRecordAck;w["SimpleArenaAwardAck"]=SimpleArenaAwardAck;w["SimpleArenaMatchAck"]=SimpleArenaMatchAck;w["SimpleArenaChallengeAck"]=SimpleArenaChallengeAck;w["AwakInfoAck"]=AwakInfoAck;w["AwakGetRewardAck"]=AwakGetRewardAck;w["BattleStartNtf"]=BattleStartNtf;w["BattleMonsterNtf"]=BattleMonsterNtf;w["BattleEndNtf"]=BattleEndNtf;w["BattleAwardNtf"]=BattleAwardNtf;w["BattleRecordNtf"]=BattleRecordNtf;w["UseSkillStartNtf"]=UseSkillStartNtf;w["UseSkillEndNtf"]=UseSkillEndNtf;w["TrigMasterSkillNtf"]=TrigMasterSkillNtf;w["UseBackNtf"]=UseBackNtf;w["HpChangeNtf"]=HpChangeNtf;w["BuffChangeNtf"]=BuffChangeNtf;w["CallSummonNtf"]=CallSummonNtf;w["EndTimeSummonNtf"]=EndTimeSummonNtf;w["BattleAttributeNoti"]=BattleAttributeNoti;w["BattleSkillCD"]=BattleSkillCD;w["BattleReportStream"]=BattleReportStream;w["BossDailyNtf"]=BossDailyNtf;w["BossDailyModifyNtf"]=BossDailyModifyNtf;w["BossFocusNtf"]=BossFocusNtf;w["FightBossNtf"]=FightBossNtf;w["BossRobotNtf"]=BossRobotNtf;w["BossRobotStateNtf"]=BossRobotStateNtf;w["BossDailyVipNtf"]=BossDailyVipNtf;w["FreshBossAck"]=FreshBossAck;w["JoinBossAck"]=JoinBossAck;w["BossHurtNtf"]=BossHurtNtf;w["LeaveBossAck"]=LeaveBossAck;w["FocusBossAck"]=FocusBossAck;w["BossAliveNtf"]=BossAliveNtf;w["InspireNtf"]=InspireNtf;w["InspireAck"]=InspireAck;w["BossBelongNtf"]=BossBelongNtf;w["WorldHostilityNtf"]=WorldHostilityNtf;w["WorldBelongNtf"]=WorldBelongNtf;w["ChargeBelongAck"]=ChargeBelongAck;w["ChargeBelongNtf"]=ChargeBelongNtf;w["RelieveAck"]=RelieveAck;w["BuyBossDailyAck"]=BuyBossDailyAck;w["DailyTimeSetNtf"]=DailyTimeSetNtf;w["CrossGroupNtf"]=CrossGroupNtf;w["StateFightNtf"]=StateFightNtf;w["IceWorldNtf"]=IceWorldNtf;w["IceWorldKickNtf"]=IceWorldKickNtf;w["IceWorldBagNtf"]=IceWorldBagNtf;w["CrossBossAwardNtf"]=CrossBossAwardNtf;w["WorldBossBagAllNtf"]=WorldBossBagAllNtf;w["WorldBossBagAddNtf"]=WorldBossBagAddNtf;w["WorldBossBagAwardAck"]=WorldBossBagAwardAck;w["BossFreshInfoNewNtf"]=BossFreshInfoNewNtf;w["KingBossFreshInfoNewNtf"]=KingBossFreshInfoNewNtf;w["KingBossKillListNtf"]=KingBossKillListNtf;w["KingBossRoleSizeNtf"]=KingBossRoleSizeNtf;w["DevilBossRoleAndHurtNtf"]=DevilBossRoleAndHurtNtf;w["DevilBossHurtAwardAck"]=DevilBossHurtAwardAck;w["DevilBossDataNtf"]=DevilBossDataNtf;w["BossClientTipsNtf"]=BossClientTipsNtf;w["BtCompanionNtf"]=BtCompanionNtf;w["BtCompanionModifyNtf"]=BtCompanionModifyNtf;w["NoBtCompanionNtf"]=NoBtCompanionNtf;w["AwardBcActAck"]=AwardBcActAck;w["JoinBcMapAck"]=JoinBcMapAck;w["StartBcAck"]=StartBcAck;w["AskBcReq"]=AskBcReq;w["AskBcResultNtf"]=AskBcResultNtf;w["LeaveBcAck"]=LeaveBcAck;w["OpenBcInfAck"]=OpenBcInfAck;w["ChangeBcNameAck"]=ChangeBcNameAck;w["ChangeBcNtf"]=ChangeBcNtf;w["TransfLeaderBcAck"]=TransfLeaderBcAck;w["AttributeNoti"]=AttributeNoti;w["LevChangeNoti"]=LevChangeNoti;w["AddExpNoti"]=AddExpNoti;w["RoleDataNoti"]=RoleDataNoti;w["ResourceNoti"]=ResourceNoti;w["RoleModifyNtf"]=RoleModifyNtf;w["TransfChangeNoti"]=TransfChangeNoti;w["RealNamePrizeNoti"]=RealNamePrizeNoti;w["CreateCombatAck"]=CreateCombatAck;w["ChangeNameCDNtf"]=ChangeNameCDNtf;w["ChangeNameResp"]=ChangeNameResp;w["ChangeHuluNameAck"]=ChangeHuluNameAck;w["UserScoreResp"]=UserScoreResp;w["UseExpAck"]=UseExpAck;w["GainAwardOnlineAck"]=GainAwardOnlineAck;w["GainAwardItemNtf"]=GainAwardItemNtf;w["OffLineAwardItemNtf"]=OffLineAwardItemNtf;w["QuackHangUpInfoAck"]=QuackHangUpInfoAck;w["StatusItemNtf"]=StatusItemNtf;w["IdentityAuthDataNoti"]=IdentityAuthDataNoti;w["RecvIdentityPrizeResp"]=RecvIdentityPrizeResp;w["IdentityAuthTimeNoti"]=IdentityAuthTimeNoti;w["IdentityAuthKickNoti"]=IdentityAuthKickNoti;w["GetChargeSignResp"]=GetChargeSignResp;w["SaveSettingsAck"]=SaveSettingsAck;w["SaveSettingsNoti"]=SaveSettingsNoti;w["AskAwardNtf"]=AskAwardNtf;w["SetInFightAck"]=SetInFightAck;w["GainBanPhoneAck"]=GainBanPhoneAck;w["CombatAddExpNoti"]=CombatAddExpNoti;w["SectionBattleScoreAck"]=SectionBattleScoreAck;w["CltUseDataNtf"]=CltUseDataNtf;w["ChartDataNtf"]=ChartDataNtf;w["ChartSynthesisResp"]=ChartSynthesisResp;w["ChartMagicLayResp"]=ChartMagicLayResp;w["ChattingResponse"]=ChattingResponse;w["ChattingLangParamResponse"]=ChattingLangParamResponse;w["SysMsgNtf"]=SysMsgNtf;w["SysMsgParamNtf"]=SysMsgParamNtf;w["SysNoticeParamNtf"]=SysNoticeParamNtf;w["SysNewNoticeParamNtf"]=SysNewNoticeParamNtf;w["DialogLangParamNtf"]=DialogLangParamNtf;w["SysMsgStringNtf"]=SysMsgStringNtf;w["BossAIMsgNtf"]=BossAIMsgNtf;w["RoleArenaRecordNtf"]=RoleArenaRecordNtf;w["AddRoleArenaRecordNtf"]=AddRoleArenaRecordNtf;w["DailyActNtf"]=DailyActNtf;w["DailyActModifyNtf"]=DailyActModifyNtf;w["AwardDailyActAck"]=AwardDailyActAck;w["AwardActPointAck"]=AwardActPointAck;w["RoleCDModifyNtf"]=RoleCDModifyNtf;w["PetGemTowerNtf"]=PetGemTowerNtf;w["PetGemTowerAck"]=PetGemTowerAck;w["JoinMountGodAck"]=JoinMountGodAck;w["DailyInspireNtf"]=DailyInspireNtf;w["DailyInspireAck"]=DailyInspireAck;w["MonsterbookNtf"]=MonsterbookNtf;w["AwardMonsterbookAck"]=AwardMonsterbookAck;w["SweepMonsterbookAck"]=SweepMonsterbookAck;w["BuyDailyNumAck"]=BuyDailyNumAck;w["MissPalaceAck"]=MissPalaceAck;w["JoinMissPalaceAck"]=JoinMissPalaceAck;w["MissPalaceExpNtf"]=MissPalaceExpNtf;w["FuncOpenNtf"]=FuncOpenNtf;w["AwardFuncOpenAck"]=AwardFuncOpenAck;w["AchieveInfNtf"]=AchieveInfNtf;w["AwardAchieveAck"]=AwardAchieveAck;w["TaskTowerNtf"]=TaskTowerNtf;w["TaskTowerAck"]=TaskTowerAck;w["TowerAwardNtf"]=TowerAwardNtf;w["TowerAwardAck"]=TowerAwardAck;w["BraveChallengeNtf"]=BraveChallengeNtf;w["BraveChallengeAck"]=BraveChallengeAck;w["EliteChallengeNtf"]=EliteChallengeNtf;w["EliteChallengeAck"]=EliteChallengeAck;w["SweepEliteChallengeAck"]=SweepEliteChallengeAck;w["SignNtf"]=SignNtf;w["SignAck"]=SignAck;w["SignDaysAck"]=SignDaysAck;w["DgnSzjdSweepNtf"]=DgnSzjdSweepNtf;w["DgnSzjdAck"]=DgnSzjdAck;w["DgnSzjdStepNtf"]=DgnSzjdStepNtf;w["SweepDgnSzjdAck"]=SweepDgnSzjdAck;w["DgnNineTowerNtf"]=DgnNineTowerNtf;w["DgnNineTowerAck"]=DgnNineTowerAck;w["AwardNineTowerAck"]=AwardNineTowerAck;w["SweepNineTowerAck"]=SweepNineTowerAck;w["NineTowerBuyAck"]=NineTowerBuyAck;w["DgnSaveSeventhAck"]=DgnSaveSeventhAck;w["SaveSeventhHPNotice"]=SaveSeventhHPNotice;w["SaveSeventhAddBoxNotice"]=SaveSeventhAddBoxNotice;w["SaveSeventhGetBoxAck"]=SaveSeventhGetBoxAck;w["ResFindBackDataAck"]=ResFindBackDataAck;w["ResFindBackAck"]=ResFindBackAck;w["SevenDayDataAck"]=SevenDayDataAck;w["SevenDayRewardAck"]=SevenDayRewardAck;w["DailyDrawResp"]=DailyDrawResp;w["DailyDrawDataNtf"]=DailyDrawDataNtf;w["CheckpointDataNtf"]=CheckpointDataNtf;w["CheckpointAck"]=CheckpointAck;w["CheckpointAwardAck"]=CheckpointAwardAck;w["CaveTreasureDataNtf"]=CaveTreasureDataNtf;w["CaveTreasureBattleAck"]=CaveTreasureBattleAck;w["SecretAreaOpenNtf"]=SecretAreaOpenNtf;w["SecretAreaDataAck"]=SecretAreaDataAck;w["SecretAreaAwardResp"]=SecretAreaAwardResp;w["SecretAreaFightResp"]=SecretAreaFightResp;w["SecretAreaStartResp"]=SecretAreaStartResp;w["SSSSGradeInfoNtf"]=SSSSGradeInfoNtf;w["SSSSSweapAck"]=SSSSSweapAck;w["DialDrawResp"]=DialDrawResp;w["DialDrawDataNtf"]=DialDrawDataNtf;w["DialDrawAwardResp"]=DialDrawAwardResp;w["DailyDrawRecvResp"]=DailyDrawRecvResp;w["DilaoNtf"]=DilaoNtf;w["DilaoCombatNtf"]=DilaoCombatNtf;w["DilaoBuffNtf"]=DilaoBuffNtf;w["GainLayerAwardAck"]=GainLayerAwardAck;w["DilaoLayerAck"]=DilaoLayerAck;w["ResetLayerAck"]=ResetLayerAck;w["ChangeRoleAck"]=ChangeRoleAck;w["ChooseDilaoBuffNtf"]=ChooseDilaoBuffNtf;w["ChooseDilaoBuffAck"]=ChooseDilaoBuffAck;w["AlchemistNtf"]=AlchemistNtf;w["PrescriptionNtf"]=PrescriptionNtf;w["RefineDataNtf"]=RefineDataNtf;w["RefineStartResp"]=RefineStartResp;w["BreakRefineResp"]=BreakRefineResp;w["GetRefineAwardResp"]=GetRefineAwardResp;w["EveryRefineNtf"]=EveryRefineNtf;w["EquipStrenAck"]=EquipStrenAck;w["EquipGemAck"]=EquipGemAck;w["EquipGemLvAck"]=EquipGemLvAck;w["EquipclAck"]=EquipclAck;w["EquipJlAck"]=EquipJlAck;w["TransfEquipAck"]=TransfEquipAck;w["FmPeifangNtf"]=FmPeifangNtf;w["ModifyFmPeifangNtf"]=ModifyFmPeifangNtf;w["FateDataAck"]=FateDataAck;w["FateDrawAck"]=FateDrawAck;w["FateGiftAck"]=FateGiftAck;w["PostCommentAck"]=PostCommentAck;w["PostLikeAck"]=PostLikeAck;w["GetCommentListAck"]=GetCommentListAck;w["GetVerifyDataAck"]=GetVerifyDataAck;w["BlackListDataAck"]=BlackListDataAck;w["BlackListAddAck"]=BlackListAddAck;w["BlackListDelAck"]=BlackListDelAck;w["FriendListDataAck"]=FriendListDataAck;w["friendListAddAck"]=friendListAddAck;w["friendListAcceptAck"]=friendListAcceptAck;w["friendListDelAck"]=friendListDelAck;w["FriendApplyListAck"]=FriendApplyListAck;w["FriendStateListAck"]=FriendStateListAck;w["friendSearchAck"]=friendSearchAck;w["GardenInfoAck"]=GardenInfoAck;w["GardenUpdateAck"]=GardenUpdateAck;w["GardenEnvUpdateAck"]=GardenEnvUpdateAck;w["GardenPlantUpdateAck"]=GardenPlantUpdateAck;w["StartGatherAck"]=StartGatherAck;w["EndGatherAck"]=EndGatherAck;w["StopGatherAck"]=StopGatherAck;w["GongfaDataNtf"]=GongfaDataNtf;w["GongfaGraspResp"]=GongfaGraspResp;w["GongfaTaskResp"]=GongfaTaskResp;w["GuardNtf"]=GuardNtf;w["SpeedGuardAck"]=SpeedGuardAck;w["AwardGuardAck"]=AwardGuardAck;w["GoldSpeedGuardAck"]=GoldSpeedGuardAck;w["NewGuardNtf"]=NewGuardNtf;w["GuajiAck"]=GuajiAck;w["GuardhuluChallengeAck"]=GuardhuluChallengeAck;w["GuardInspireNtf"]=GuardInspireNtf;w["GuardInspireAck"]=GuardInspireAck;w["GuardhuluTimeAck"]=GuardhuluTimeAck;w["GuardPrivateInspireNtf"]=GuardPrivateInspireNtf;w["GuardIslandNtf"]=GuardIslandNtf;w["GuardIslandStartNtf"]=GuardIslandStartNtf;w["GuardIslandEndNtf"]=GuardIslandEndNtf;w["GuardIslandObjNtf"]=GuardIslandObjNtf;w["GuildBuffNtf"]=GuildBuffNtf;w["GuardBossAck"]=GuardBossAck;w["JoinGuardIslandAck"]=JoinGuardIslandAck;w["GuardIslandAwardNtf"]=GuardIslandAwardNtf;w["GuildCDNtf"]=GuildCDNtf;w["GuardIslandExpNtf"]=GuardIslandExpNtf;w["JoinInfIslandAck"]=JoinInfIslandAck;w["GuardInfoAck"]=GuardInfoAck;w["GuardEquipAck"]=GuardEquipAck;w["GuardOverDueNotice"]=GuardOverDueNotice;w["GuardSellAck"]=GuardSellAck;w["GuardRenewAck"]=GuardRenewAck;w["GuardFollowAck"]=GuardFollowAck;w["GuildChampionSessionAck"]=GuildChampionSessionAck;w["GuildChampionBaomingAck"]=GuildChampionBaomingAck;w["GuildChampionBattleListAck"]=GuildChampionBattleListAck;w["GuildChampionBattleRecordAck"]=GuildChampionBattleRecordAck;w["GuildChampionSetPositionAck"]=GuildChampionSetPositionAck;w["GuildChampionOpenNotice"]=GuildChampionOpenNotice;w["GuildNtf"]=GuildNtf;w["GuildReqNtf"]=GuildReqNtf;w["GuildInfListAck"]=GuildInfListAck;w["CreateGuildAck"]=CreateGuildAck;w["UpdateGuildSelfAck"]=UpdateGuildSelfAck;w["UpdateGuildInfAck"]=UpdateGuildInfAck;w["UpdateGuildChiefAck"]=UpdateGuildChiefAck;w["OpenGuildAck"]=OpenGuildAck;w["GuildMemberListAck"]=GuildMemberListAck;w["OperateGuildAck"]=OperateGuildAck;w["LeaveGuildNtf"]=LeaveGuildNtf;w["OpenJoinGuildAck"]=OpenJoinGuildAck;w["OperateJoinGuildAck"]=OperateJoinGuildAck;w["AutoJoinGuildLimitAck"]=AutoJoinGuildLimitAck;w["JoinNotify"]=JoinNotify;w["PlayerGuildChangeNtf"]=PlayerGuildChangeNtf;w["ChangeGuildNameAck"]=ChangeGuildNameAck;w["ChangeGuildNcAck"]=ChangeGuildNcAck;w["UpdateGuildNoticeAck"]=UpdateGuildNoticeAck;w["GuildInfAck"]=GuildInfAck;w["UpgraGuildAck"]=UpgraGuildAck;w["ConGuildAck"]=ConGuildAck;w["ConGuildRecordAck"]=ConGuildRecordAck;w["GuildMallRecordNtf"]=GuildMallRecordNtf;w["GuildMallRandNtf"]=GuildMallRandNtf;w["BuyGuildMallNumAck"]=BuyGuildMallNumAck;w["GuildTechNtf"]=GuildTechNtf;w["ChangeGuildTechNtf"]=ChangeGuildTechNtf;w["GuildTechAck"]=GuildTechAck;w["GuildTreasureNtf"]=GuildTreasureNtf;w["ModifyGuildTreasureNtf"]=ModifyGuildTreasureNtf;w["DelGuildTreasureNtf"]=DelGuildTreasureNtf;w["GainGuildTreasureAck"]=GainGuildTreasureAck;w["GuildTreasureDailyNtf"]=GuildTreasureDailyNtf;w["GuildTaskNtf"]=GuildTaskNtf;w["GuildTaskStarAwardAck"]=GuildTaskStarAwardAck;w["SubGuildQuestItemAck"]=SubGuildQuestItemAck;w["GuildQuestAck"]=GuildQuestAck;w["GuildQuestNumNtf"]=GuildQuestNumNtf;w["HelpGuildQuestAck"]=HelpGuildQuestAck;w["FreshGuildQuestStarAck"]=FreshGuildQuestStarAck;w["SubGuildQuestBuyAck"]=SubGuildQuestBuyAck;w["GuildTaskHelpAck"]=GuildTaskHelpAck;w["CrossBossHelpAck"]=CrossBossHelpAck;w["CrossBossHelpNtf"]=CrossBossHelpNtf;w["GuildGourdNtf"]=GuildGourdNtf;w["HangUpInfoAck"]=HangUpInfoAck;w["HangUpRewardAck"]=HangUpRewardAck;w["HeadFrameInfoAck"]=HeadFrameInfoAck;w["HeadFrameActiveNotice"]=HeadFrameActiveNotice;w["HeadFramePastDueNotice"]=HeadFramePastDueNotice;w["HeadFrameEquipAck"]=HeadFrameEquipAck;w["HeadTitleInfoAck"]=HeadTitleInfoAck;w["HeadTitleUpgradeAck"]=HeadTitleUpgradeAck;w["HomeBubbleDataAck"]=HomeBubbleDataAck;w["HomeQuestionAck"]=HomeQuestionAck;w["HomeAnswerAck"]=HomeAnswerAck;w["HomeLotteryDataAck"]=HomeLotteryDataAck;w["HomeLotteryAck"]=HomeLotteryAck;w["HomeKungDataAck"]=HomeKungDataAck;w["HomeImpartKungAck"]=HomeImpartKungAck;w["HomeInviteKungListAck"]=HomeInviteKungListAck;w["HomeAcceptKungAck"]=HomeAcceptKungAck;w["HomeStartKungAck"]=HomeStartKungAck;w["HomeFinishKungAck"]=HomeFinishKungAck;w["HomePlayerLvAck"]=HomePlayerLvAck;w["HomeWorshipInfoAck"]=HomeWorshipInfoAck;w["HomeWorshipStartAck"]=HomeWorshipStartAck;w["HomeWorshipStopAck"]=HomeWorshipStopAck;w["HomeWorshipFinishAck"]=HomeWorshipFinishAck;w["HomeRunningActivityIdAck"]=HomeRunningActivityIdAck;w["HomeDataNtf"]=HomeDataNtf;w["AwardHomeAck"]=AwardHomeAck;w["HorseListNtf"]=HorseListNtf;w["RideHorseAck"]=RideHorseAck;w["UseHorseSkillAck"]=UseHorseSkillAck;w["RideLvAck"]=RideLvAck;w["ActHorseAck"]=ActHorseAck;w["HorseLvAck"]=HorseLvAck;w["HorseComNtf"]=HorseComNtf;w["AddHorseComNtf"]=AddHorseComNtf;w["ActNewHorseComNtf"]=ActNewHorseComNtf;w["TouziNtf"]=TouziNtf;w["AwardTouziAck"]=AwardTouziAck;w["DayAwardTouziAck"]=DayAwardTouziAck;w["NewMallInfoNtf"]=NewMallInfoNtf;w["GetFreeGiftResp"]=GetFreeGiftResp;w["GetOtherGiftResp"]=GetOtherGiftResp;w["NewTouziNtf"]=NewTouziNtf;w["TimeGiftNtf"]=TimeGiftNtf;w["BuyGiftResp"]=BuyGiftResp;w["SpecialItemNtf"]=SpecialItemNtf;w["CustomGiftChoiceResp"]=CustomGiftChoiceResp;w["CustomGiftChoiceSyn"]=CustomGiftChoiceSyn;w["WxShareDataNtf"]=WxShareDataNtf;w["WxShareAwardResp"]=WxShareAwardResp;w["ItemDelNtf"]=ItemDelNtf;w["ItemModifyNtf"]=ItemModifyNtf;w["PackListNtf"]=PackListNtf;w["PackExpandNtf"]=PackExpandNtf;w["UseItemAck"]=UseItemAck;w["ItemMoveAck"]=ItemMoveAck;w["SellAck"]=SellAck;w["MixEngulfingAck"]=MixEngulfingAck;w["BagUnlockAck"]=BagUnlockAck;w["ItemGainPush"]=ItemGainPush;w["SynthesisAck"]=SynthesisAck;w["UseResItemNtf"]=UseResItemNtf;w["ShowItemAck"]=ShowItemAck;w["ShowItemInfoAck"]=ShowItemInfoAck;w["ItemQuaUpResp"]=ItemQuaUpResp;w["AwardItemScrNtf"]=AwardItemScrNtf;w["LoginResp"]=LoginResp;w["CreateRoleResp"]=CreateRoleResp;w["HeartBeatResp"]=HeartBeatResp;w["EnterGameResp"]=EnterGameResp;w["ServerTimeResp"]=ServerTimeResp;w["BanRoleResp"]=BanRoleResp;w["SysNoticeResp"]=SysNoticeResp;w["LotusDataAck"]=LotusDataAck;w["LotusCultivateAck"]=LotusCultivateAck;w["LotusSeedUseAck"]=LotusSeedUseAck;w["LuheInfoAck"]=LuheInfoAck;w["LuheMoveAck"]=LuheMoveAck;w["LuheModifyNtf"]=LuheModifyNtf;w["LuheDecomposeAck"]=LuheDecomposeAck;w["LuheUpdateAck"]=LuheUpdateAck;w["LuheSynthesisAck"]=LuheSynthesisAck;w["LuheAutoDecomposeAck"]=LuheAutoDecomposeAck;w["MagicDataAck"]=MagicDataAck;w["MagicUpLevelAck"]=MagicUpLevelAck;w["MagicUpStarAck"]=MagicUpStarAck;w["MagicWearAck"]=MagicWearAck;w["MagicLayAck"]=MagicLayAck;w["MagicLayBuyAck"]=MagicLayBuyAck;w["MagicResonanceInfoAck"]=MagicResonanceInfoAck;w["MagicResonanteAck"]=MagicResonanteAck;w["MagicAddExtNtf"]=MagicAddExtNtf;w["ModifyMagicAddExtNtf"]=ModifyMagicAddExtNtf;w["MagicAlmightyPieceAck"]=MagicAlmightyPieceAck;w["MagicPluginAck"]=MagicPluginAck;w["MagicPluginNtf"]=MagicPluginNtf;w["MagicLingtaiNtf"]=MagicLingtaiNtf;w["UpMagicLingtaiAck"]=UpMagicLingtaiAck;w["MailBoxAck"]=MailBoxAck;w["MailBoxInfAck"]=MailBoxInfAck;w["MailDeleteAck"]=MailDeleteAck;w["MailAnnexAck"]=MailAnnexAck;w["NewMailAck"]=NewMailAck;w["MallBuyRecordAck"]=MallBuyRecordAck;w["BuyMallWithNumberAck"]=BuyMallWithNumberAck;w["KfMallBuyRecordNtf"]=KfMallBuyRecordNtf;w["BuyKfMallWithNumberAck"]=BuyKfMallWithNumberAck;w["BlackMallAck"]=BlackMallAck;w["BuyBlackMallAck"]=BuyBlackMallAck;w["FreshBlackMallAck"]=FreshBlackMallAck;w["MoveResponse"]=MoveResponse;w["SetPosistionResponse"]=SetPosistionResponse;w["JoinNewMapNtf"]=JoinNewMapNtf;w["UserViewAck"]=UserViewAck;w["MapObjViewAck"]=MapObjViewAck;w["ViewportDestroyAck"]=ViewportDestroyAck;w["TeleportAck"]=TeleportAck;w["UserViewHpAck"]=UserViewHpAck;w["UserDeadRelieveNtf"]=UserDeadRelieveNtf;w["ChangeNameNoti"]=ChangeNameNoti;w["RoleStatusNtf"]=RoleStatusNtf;w["MapObjFightNtf"]=MapObjFightNtf;w["SetSkinNtf"]=SetSkinNtf;w["SkillTreeListNoti"]=SkillTreeListNoti;w["ModitySkillTreeNtf"]=ModitySkillTreeNtf;w["LearnSkillTreeAck"]=LearnSkillTreeAck;w["ClearTreeAck"]=ClearTreeAck;w["MedalInfoAck"]=MedalInfoAck;w["MedalHistoryInfoAck"]=MedalHistoryInfoAck;w["MedalGetRewardAck"]=MedalGetRewardAck;w["MedalMallRecordNtf"]=MedalMallRecordNtf;w["BuyMedalMallNumAck"]=BuyMedalMallNumAck;w["MijingUnLockNtf"]=MijingUnLockNtf;w["ModifyMijingUnLockNtf"]=ModifyMijingUnLockNtf;w["MijingUnLockAck"]=MijingUnLockAck;w["MonsterSoulInfoAck"]=MonsterSoulInfoAck;w["MonsterSoulUpdateAck"]=MonsterSoulUpdateAck;w["MonthCardInfoAck"]=MonthCardInfoAck;w["MonthCardGetRewardAck"]=MonthCardGetRewardAck;w["LifeCardInfoAck"]=LifeCardInfoAck;w["WeekCardInfoAck"]=WeekCardInfoAck;w["ReceiveWeekCardRewardAck"]=ReceiveWeekCardRewardAck;w["MountainInfoAck"]=MountainInfoAck;w["MountainChallengeAck"]=MountainChallengeAck;w["MountainSweepAck"]=MountainSweepAck;w["AwardMountainAck"]=AwardMountainAck;w["FmbkInfoNtf"]=FmbkInfoNtf;w["FmbkChallengeAck"]=FmbkChallengeAck;w["FmbkSweepAck"]=FmbkSweepAck;w["PeakNtf"]=PeakNtf;w["ModifyPeakNtf"]=ModifyPeakNtf;w["PeakTaskNtf"]=PeakTaskNtf;w["PeakTestNtf"]=PeakTestNtf;w["ChargePeakAck"]=ChargePeakAck;w["TestPeakAck"]=TestPeakAck;w["TupoTestAck"]=TupoTestAck;w["AwardTestAck"]=AwardTestAck;w["FinishPeakTaskAck"]=FinishPeakTaskAck;w["GainPeakAwardAck"]=GainPeakAwardAck;w["OpenPeakAck"]=OpenPeakAck;w["PedlarInfoAck"]=PedlarInfoAck;w["PedlarBuyAck"]=PedlarBuyAck;w["PedlarNewNtf"]=PedlarNewNtf;w["PedlarNewAwardAck"]=PedlarNewAwardAck;w["PetDispatchInfoAck"]=PetDispatchInfoAck;w["PetDispatchRewardAck"]=PetDispatchRewardAck;w["PetDispatchAck"]=PetDispatchAck;w["PetDelNtf"]=PetDelNtf;w["PetModifyNtf"]=PetModifyNtf;w["PetGainPush"]=PetGainPush;w["PetPackNtf"]=PetPackNtf;w["PetReputationNtf"]=PetReputationNtf;w["FullPetStarNtf"]=FullPetStarNtf;w["PetFormNtf"]=PetFormNtf;w["PetMoveAck"]=PetMoveAck;w["FreePetAck"]=FreePetAck;w["PetSpaceNtf"]=PetSpaceNtf;w["UnlockPetSpaceAck"]=UnlockPetSpaceAck;w["HatchPetAck"]=HatchPetAck;w["SpeedPetAck"]=SpeedPetAck;w["GainPetAck"]=GainPetAck;w["UpdatePetAck"]=UpdatePetAck;w["PetStarAck"]=PetStarAck;w["PetReputionAck"]=PetReputionAck;w["QuenchMagicAck"]=QuenchMagicAck;w["QuenchOneKeyMagicAck"]=QuenchOneKeyMagicAck;w["GetRankListResp"]=GetRankListResp;w["RankShowPlayerResp"]=RankShowPlayerResp;w["GetShowPlayerResp"]=GetShowPlayerResp;w["GetTarPlayerIpAck"]=GetTarPlayerIpAck;w["RecharegeMallInfoAck"]=RecharegeMallInfoAck;w["RecharegeTaskNotify"]=RecharegeTaskNotify;w["DailyRechargeDataNtf"]=DailyRechargeDataNtf;w["DailyRechargeAwardAck"]=DailyRechargeAwardAck;w["RechargeInfoNtf"]=RechargeInfoNtf;w["RPInfoAck"]=RPInfoAck;w["RPGetAck"]=RPGetAck;w["RPHistoryAck"]=RPHistoryAck;w["RPSendInfo"]=RPSendInfo;w["RPGetTimes"]=RPGetTimes;w["SecSoulTupoAck"]=SecSoulTupoAck;w["SecSoulDataNtf"]=SecSoulDataNtf;w["SecSoulDujieStartAck"]=SecSoulDujieStartAck;w["SecSoulDujieDamage"]=SecSoulDujieDamage;w["SecSoulDujieEnd"]=SecSoulDujieEnd;w["SecSoulShieldNtf"]=SecSoulShieldNtf;w["SecSoulStartResp"]=SecSoulStartResp;w["SecSoulEventNtf"]=SecSoulEventNtf;w["SecSoulEventResp"]=SecSoulEventResp;w["SecSoulTreasureUpResp"]=SecSoulTreasureUpResp;w["SecSoulMakeUpResp"]=SecSoulMakeUpResp;w["CrossSecSoulSecenesAck"]=CrossSecSoulSecenesAck;w["CrossSecSoulBattleRecordAck"]=CrossSecSoulBattleRecordAck;w["CrossSecSoulBattleRecordShowAck"]=CrossSecSoulBattleRecordShowAck;w["CrossSecSoulChallengeAck"]=CrossSecSoulChallengeAck;w["CrossSecSoulSetBattleArrayAck"]=CrossSecSoulSetBattleArrayAck;w["CrossSecSoulTimeNtf"]=CrossSecSoulTimeNtf;w["OpenDongfuResp"]=OpenDongfuResp;w["DongfuMagicLayResp"]=DongfuMagicLayResp;w["SevenInfoAck"]=SevenInfoAck;w["SevenUpAck"]=SevenUpAck;w["SevenSpiritLvAck"]=SevenSpiritLvAck;w["SevenEffectChooseAck"]=SevenEffectChooseAck;w["ShenbingDataNotify"]=ShenbingDataNotify;w["ShenbingOnGoingNotify"]=ShenbingOnGoingNotify;w["ShenbingOprateAck"]=ShenbingOprateAck;w["SimpleTeamDataNtf"]=SimpleTeamDataNtf;w["SimpleTeamUpdateAvatarAck"]=SimpleTeamUpdateAvatarAck;w["TeamElementPropNtf"]=TeamElementPropNtf;w["TeamElementSkillNtf"]=TeamElementSkillNtf;w["UseElementSkillAck"]=UseElementSkillAck;w["SimpleBubbleDataNtf"]=SimpleBubbleDataNtf;w["SimpleBubbleUpdateAck"]=SimpleBubbleUpdateAck;w["SkinInfoAck"]=SkinInfoAck;w["SkinEquipAck"]=SkinEquipAck;w["SkinActiveAck"]=SkinActiveAck;w["SkinReceiveAck"]=SkinReceiveAck;w["SkinUpStarAck"]=SkinUpStarAck;w["SoulInfoAck"]=SoulInfoAck;w["SoulAck"]=SoulAck;w["SoulDecomposeAck"]=SoulDecomposeAck;w["SoulUpdateeAck"]=SoulUpdateeAck;w["TanbaoNtf"]=TanbaoNtf;w["TanbaoActNtf"]=TanbaoActNtf;w["TanbaoBuffNtf"]=TanbaoBuffNtf;w["TanbaoMoveAck"]=TanbaoMoveAck;w["TanbaoResetLayerAck"]=TanbaoResetLayerAck;w["TaskInfoNtf"]=TaskInfoNtf;w["TaskRecordNtf"]=TaskRecordNtf;w["UpdateTaskRecordNtf"]=UpdateTaskRecordNtf;w["TaskSubmitAck"]=TaskSubmitAck;w["TaskGiveUpAck"]=TaskGiveUpAck;w["SubQuestItemAck"]=SubQuestItemAck;w["QuestDgnAck"]=QuestDgnAck;w["QuestKillAck"]=QuestKillAck;w["FuncItemRecordNtf"]=FuncItemRecordNtf;w["JoinEndlessAck"]=JoinEndlessAck;w["LeaveTeamDgnAck"]=LeaveTeamDgnAck;w["EndlessInfNtf"]=EndlessInfNtf;w["EndlessAwardNtf"]=EndlessAwardNtf;w["RollAwardAck"]=RollAwardAck;w["ViewRollAwardAck"]=ViewRollAwardAck;w["TeamInspireNtf"]=TeamInspireNtf;w["TeamInspireAck"]=TeamInspireAck;w["MyTeamDataAck"]=MyTeamDataAck;w["TeamListAck"]=TeamListAck;w["TeamCreateAck"]=TeamCreateAck;w["TeamSetCopyIdAck"]=TeamSetCopyIdAck;w["TeamInviteListAck"]=TeamInviteListAck;w["TeamInviteNotice"]=TeamInviteNotice;w["TeamMemberAcceptAck"]=TeamMemberAcceptAck;w["TeamApplyAck"]=TeamApplyAck;w["TeamApplyListAck"]=TeamApplyListAck;w["TeamApplyAcceptAck"]=TeamApplyAcceptAck;w["TeamEnterCopyAck"]=TeamEnterCopyAck;w["TeamEnterCopyNotice"]=TeamEnterCopyNotice;w["TeamAcceptEnterCopyAck"]=TeamAcceptEnterCopyAck;w["TeamEnterFinalNotice"]=TeamEnterFinalNotice;w["TeamExitAck"]=TeamExitAck;w["TeamChangeCaptainAck"]=TeamChangeCaptainAck;w["TeamInviteAck"]=TeamInviteAck;w["TeamDissolveAck"]=TeamDissolveAck;w["TitleInfoAck"]=TitleInfoAck;w["TitleActiveNotice"]=TitleActiveNotice;w["TitlePastDueNotice"]=TitlePastDueNotice;w["TitleEquipAck"]=TitleEquipAck;w["TongtiangeNtf"]=TongtiangeNtf;w["TongtiangeBuildResp"]=TongtiangeBuildResp;w["TongtiangeAwardResp"]=TongtiangeAwardResp;w["TongtiangeExchangeResp"]=TongtiangeExchangeResp;w["YiShouNtf"]=YiShouNtf;w["YiShouKillResp"]=YiShouKillResp;w["YiShouAwardResp"]=YiShouAwardResp;w["YiShouExchangeResp"]=YiShouExchangeResp;w["QiYuNtf"]=QiYuNtf;w["QiYuDrawResp"]=QiYuDrawResp;w["QiYuAwardResp"]=QiYuAwardResp;w["QiYuExchangeResp"]=QiYuExchangeResp;w["TransfListNtf"]=TransfListNtf;w["RoleTransfAck"]=RoleTransfAck;w["RoleFinishTransfAck"]=RoleFinishTransfAck;w["StartDujieResp"]=StartDujieResp;w["TreasureHuntDataAck"]=TreasureHuntDataAck;w["TreasureHuntRecordAck"]=TreasureHuntRecordAck;w["TreasureHuntDrawAck"]=TreasureHuntDrawAck;w["TreasureHuntReceiveLuckAck"]=TreasureHuntReceiveLuckAck;w["TreasureHuntRefreshAck"]=TreasureHuntRefreshAck;w["TreasureHuntBuyAck"]=TreasureHuntBuyAck;w["VipDataAck"]=VipDataAck;w["VipUseitemAck"]=VipUseitemAck;w["WarOrderInfoAck"]=WarOrderInfoAck;w["WarOrderGetRewardAck"]=WarOrderGetRewardAck;w["WarOrderUpGradeAck"]=WarOrderUpGradeAck;w["WarOrderShopInfoAck"]=WarOrderShopInfoAck;w["WarOrderShopBuyAck"]=WarOrderShopBuyAck;w["WarOrderGetExpBagAck"]=WarOrderGetExpBagAck;w["WarOrderRewardInfoAck"]=WarOrderRewardInfoAck;w["WarOrderTaskInfoAck"]=WarOrderTaskInfoAck;w["WarGetTaskRewardAck"]=WarGetTaskRewardAck;w["WarBuyLevelAck"]=WarBuyLevelAck;w["WarBuyExpAck"]=WarBuyExpAck;w["WeaponInfoAck"]=WeaponInfoAck;w["WeaponUpLevelAck"]=WeaponUpLevelAck;w["WeaponStrengthlvAck"]=WeaponStrengthlvAck;w["XinfaInfoAck"]=XinfaInfoAck;w["XinfaEquipAck"]=XinfaEquipAck;w["XinfaDecomposeAck"]=XinfaDecomposeAck;w["XinfaUpdateeAck"]=XinfaUpdateeAck;w["XinfaUnlockAck"]=XinfaUnlockAck;w["XinfaGongMingAttr"]=XinfaGongMingAttr;w["Int64"]=Int64;w["SocketRequestBase"]=SocketRequestBase;w["Uint64"]=Uint64;w["Csv"]=Csv;w["LayaConfig"]=LayaConfig;w["LogUtil"]=LogUtil;w["ObServer"]=ObServer;w["ObDispatcher"]=ObDispatcher;w["ScreenAdapter"]=ScreenAdapter;w["SortUtil"]=SortUtil;w["ByteCfg"]=ByteCfg;w["ByteStatus"]=ByteStatus;w["AttributeData"]=AttributeData;w["Attributes"]=Attributes;w["HpBarMediator"]=HpBarMediator;w["IHpBarCache"]=IHpBarCache;w["ZjqwHpBarMediator"]=ZjqwHpBarMediator;